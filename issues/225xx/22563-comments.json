[
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "This is somewhat hackish, but a very small change, in case it is desired for 22.0.\r\n\r\nThe underlying problem is that `CNetAddr::GetGroup()` (edit: this is now `NetGroupManager::GetGroup()`) and the places where it is called are build around the assumption that it is easier to obtain addresses with common prefix (e.g. belonging to one IP subnet). However this assumption is not true for Tor, I2P and CJDNS addresses.\r\n\r\nFor example, we would avoid connecting to `aabcd.onion` if we already have connection to `aaxyz.onion`, assuming that the common prefix makes it more likely they belong to the same actor.\r\n\r\n~`CNetAddr::GetGroup()`~ `NetGroupManager::GetGroup` only makes sense for the IPv4 and IPv6 networks. To resolve this properly a bigger refactor would be required - where we call `GetGroup()` only for IPv4 and IPv6 addresses and treat Tor/I2P/CJDNS separately.\r\n",
      "created_at" : "2021-07-27T14:51:43Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22563#issuecomment-887579571",
      "id" : 887579571,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22563",
      "node_id" : "IC_kwDOABII584052Oz",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/887579571/reactions"
      },
      "updated_at" : "2023-08-29T07:05:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/887579571",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> The underlying problem is that CNetAddr::GetGroup() and the places where it is called are build around the assumption that it is easier to obtain addresses with common prefix (e.g. belonging to one IP subnet). \r\n\r\nDoesn't `CNetAddr::GetGroup()` in `netaddress.cpp` already have special casing for Tor/I2P/CJDNS  (`nBits = 4` , resulting in `num_bytes == 0` ) that would make this unnecessary (because it already treats `aabcd.onion` the same as `aaxyz.onion` and every other Tor address)?",
      "created_at" : "2021-07-27T15:31:21Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22563#issuecomment-887612757",
      "id" : 887612757,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22563",
      "node_id" : "IC_kwDOABII58405-VV",
      "performed_via_github_app" : null,
      "updated_at" : "2021-07-27T15:32:45Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/887612757",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/48763452?v=4",
         "events_url" : "https://api.github.com/users/mzumsande/events{/privacy}",
         "followers_url" : "https://api.github.com/users/mzumsande/followers",
         "following_url" : "https://api.github.com/users/mzumsande/following{/other_user}",
         "gists_url" : "https://api.github.com/users/mzumsande/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/mzumsande",
         "id" : 48763452,
         "login" : "mzumsande",
         "node_id" : "MDQ6VXNlcjQ4NzYzNDUy",
         "organizations_url" : "https://api.github.com/users/mzumsande/orgs",
         "received_events_url" : "https://api.github.com/users/mzumsande/received_events",
         "repos_url" : "https://api.github.com/users/mzumsande/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/mzumsande/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/mzumsande/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/mzumsande"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "I don't think so - currently `CNetAddr::GetGroup()` treats `aabcd.onion` and `aaxyz.onion` the same, but not the same as every other Tor address. The way I read it, `CNetAddr::GetGroup()` will return a vector of 2 bytes for a Tor address: the first byte will be `0x03` (`NET_ONION`), set here:\r\n\r\nhttps://github.com/bitcoin/bitcoin/blob/979f410e69a0350da8bf67f329f760d4dd3a4f44/src/netaddress.cpp#L781\r\n\r\nthe second byte is set here:\r\n\r\nhttps://github.com/bitcoin/bitcoin/blob/979f410e69a0350da8bf67f329f760d4dd3a4f44/src/netaddress.cpp#L814\r\n\r\nand will consist of the first 4 bits of the Tor address, followed by 4 1-bits.",
      "created_at" : "2021-07-27T15:41:49Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22563#issuecomment-887621152",
      "id" : 887621152,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22563",
      "node_id" : "IC_kwDOABII58406AYg",
      "performed_via_github_app" : null,
      "updated_at" : "2021-07-27T15:42:50Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/887621152",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "You are right, I missed the spot where the second byte is set.",
      "created_at" : "2021-07-27T16:02:40Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22563#issuecomment-887637141",
      "id" : 887637141,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22563",
      "node_id" : "IC_kwDOABII58406ESV",
      "performed_via_github_app" : null,
      "updated_at" : "2021-07-27T16:02:40Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/887637141",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/48763452?v=4",
         "events_url" : "https://api.github.com/users/mzumsande/events{/privacy}",
         "followers_url" : "https://api.github.com/users/mzumsande/followers",
         "following_url" : "https://api.github.com/users/mzumsande/following{/other_user}",
         "gists_url" : "https://api.github.com/users/mzumsande/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/mzumsande",
         "id" : 48763452,
         "login" : "mzumsande",
         "node_id" : "MDQ6VXNlcjQ4NzYzNDUy",
         "organizations_url" : "https://api.github.com/users/mzumsande/orgs",
         "received_events_url" : "https://api.github.com/users/mzumsande/received_events",
         "repos_url" : "https://api.github.com/users/mzumsande/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/mzumsande/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/mzumsande/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/mzumsande"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Your eyes, on their own, decided to skip the line that contains `] | ((1 << (8 - nBits)) - 1));` (mine did) :exploding_head: :rofl: ",
      "created_at" : "2021-07-27T16:15:17Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22563#issuecomment-887647228",
      "id" : 887647228,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22563",
      "node_id" : "IC_kwDOABII58406Gv8",
      "performed_via_github_app" : null,
      "updated_at" : "2021-07-27T16:15:42Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/887647228",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Yes, I wonder why :grinning:\r\n\r\nAnother question (still not sure I have completely understood the bucketing...): \r\nWouldn't this mean that addresses advertised to us by peers with a Tor address would always map to the same bucket/position, regardless of the source? And, as a result:\r\n1) if we only have Tor peers, we would only ever reach a multiplicity of one in the New tables, so that the `nRefCount` mechanism to give addrs advertised to us by many diverse peers more weight in New would no longer work in this situation?\r\n2) We'd only ever use 64 of the 1024 buckets for addrs received from Tor addresses",
      "created_at" : "2021-07-27T20:23:05Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22563#issuecomment-887809469",
      "id" : 887809469,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22563",
      "node_id" : "IC_kwDOABII58406uW9",
      "performed_via_github_app" : null,
      "updated_at" : "2021-07-27T21:02:26Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/887809469",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/48763452?v=4",
         "events_url" : "https://api.github.com/users/mzumsande/events{/privacy}",
         "followers_url" : "https://api.github.com/users/mzumsande/followers",
         "following_url" : "https://api.github.com/users/mzumsande/following{/other_user}",
         "gists_url" : "https://api.github.com/users/mzumsande/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/mzumsande",
         "id" : 48763452,
         "login" : "mzumsande",
         "node_id" : "MDQ6VXNlcjQ4NzYzNDUy",
         "organizations_url" : "https://api.github.com/users/mzumsande/orgs",
         "received_events_url" : "https://api.github.com/users/mzumsande/received_events",
         "repos_url" : "https://api.github.com/users/mzumsande/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/mzumsande/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/mzumsande/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/mzumsande"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "The relevant code is [here](https://github.com/bitcoin/bitcoin/blob/be175cef24a0b4613d79d05156358841bf2bad98/src/addrman.cpp#L18-L43).\r\n\r\n_(talking about the \"new\" buckets)_\r\n\r\nCorrect. This PR makes all Tor sources be treated as a single source, so the same address received from different Tor sources will end up in the same bucket/position. Overall, all addresses received by Tor sources will be dispersed amongst 64 `ADDRMAN_NEW_BUCKETS_PER_SOURCE_GROUP` buckets.\r\n\r\nNotice that this is already the case for Tor peers that have connected to us (incoming from our point of view) because all of them look to us as coming from `127.0.0.1`, so all of them belong to a single group. This plays nicely because an attacker looking to fill a victim's addrman new buckets can generate many different Tor addresses and connect from all of them to the victim (mimicking different sources), but all will be treated as one source (`127.0.0.1`). This is not the case for I2P and CJDNS.\r\n\r\nMaybe this patch is too aggressive and should treat as one group sources that are incoming Tor/I2P/CJDNS and leave the 16 groups (4 bits) for sources that we have connected to (outgoing).",
      "created_at" : "2021-07-28T09:10:22Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22563#issuecomment-888147067",
      "id" : 888147067,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22563",
      "node_id" : "IC_kwDOABII58408Ax7",
      "performed_via_github_app" : null,
      "updated_at" : "2021-07-28T09:10:22Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/888147067",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Concept ACK, will look more deeply.",
      "created_at" : "2021-07-28T16:35:00Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22563#issuecomment-888453270",
      "id" : 888453270,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22563",
      "node_id" : "IC_kwDOABII58409LiW",
      "performed_via_github_app" : null,
      "updated_at" : "2021-07-28T16:35:00Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/888453270",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| Concept ACK | [jonatack](https://github.com/bitcoin/bitcoin/pull/22563#issuecomment-888453270), [kristapsk](https://github.com/bitcoin/bitcoin/pull/22563#issuecomment-1346343446) |\n\nIf your review is incorrectly listed, please react with ð to this comment and the bot will ignore it on the next update.\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nNo conflicts as of last run.\n",
      "created_at" : "2021-09-07T22:44:03Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22563#issuecomment-914674109",
      "id" : 914674109,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22563",
      "node_id" : "IC_kwDOABII5842hNG9",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/914674109/reactions"
      },
      "updated_at" : "2023-08-29T11:16:02Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/914674109",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->\nð This pull request conflicts with the target branch and [needs rebase](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#rebasing-changes).\n\n<sub>Want to unsubscribe from rebase notifications on this pull request? Just convert this pull request to a \"draft\".</sub>",
      "created_at" : "2022-04-22T13:59:27Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22563#issuecomment-1106545603",
      "id" : 1106545603,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22563",
      "node_id" : "IC_kwDOABII585B9IvD",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1106545603/reactions"
      },
      "updated_at" : "2022-04-22T13:59:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1106545603",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "Please also consider adding Yggdrasil to the list. https://github.com/bitcoin/bitcoin/pull/23531",
      "created_at" : "2022-04-24T08:29:23Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22563#issuecomment-1107790341",
      "id" : 1107790341,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22563",
      "node_id" : "IC_kwDOABII585CB4oF",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1107790341/reactions"
      },
      "updated_at" : "2022-04-24T08:29:23Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1107790341",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/244565?v=4",
         "events_url" : "https://api.github.com/users/jsarenik/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jsarenik/followers",
         "following_url" : "https://api.github.com/users/jsarenik/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jsarenik/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jsarenik",
         "id" : 244565,
         "login" : "jsarenik",
         "node_id" : "MDQ6VXNlcjI0NDU2NQ==",
         "organizations_url" : "https://api.github.com/users/jsarenik/orgs",
         "received_events_url" : "https://api.github.com/users/jsarenik/received_events",
         "repos_url" : "https://api.github.com/users/jsarenik/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jsarenik/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jsarenik/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jsarenik"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--13523179cfe9479db18ec6c5d236f789-->\nThere hasn't been much activity lately and the patch still needs rebase. What is the status here?\n\n* Is it still relevant? â¡ï¸ Please solve the conflicts to make it ready for review and to ensure the CI passes.\n* Is it no longer relevant? â¡ï¸ Please close.\n* Did the author lose interest or time to work on this? â¡ï¸ Please close it and mark it 'Up for grabs' with the label, so that it can be picked up in the future.\n",
      "created_at" : "2022-12-12T01:40:25Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22563#issuecomment-1345750191",
      "id" : 1345750191,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22563",
      "node_id" : "IC_kwDOABII585QNoSv",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1345750191/reactions"
      },
      "updated_at" : "2022-12-12T01:40:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1345750191",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "`228a8c975a...71cb144cb4`: rebase due to conflicts\r\n\r\nThis is much relevant as it was when I opened it. I am just not sure whether the change may have some unexpected adverse effects. I will eventually reconsider this and maybe move it from \"draft\" to \"open\".",
      "created_at" : "2022-12-12T10:30:51Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22563#issuecomment-1346240920",
      "id" : 1346240920,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22563",
      "node_id" : "IC_kwDOABII585QPgGY",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1346240920/reactions"
      },
      "updated_at" : "2022-12-12T10:30:51Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1346240920",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Concept ACK",
      "created_at" : "2022-12-12T11:53:55Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22563#issuecomment-1346343446",
      "id" : 1346343446,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22563",
      "node_id" : "IC_kwDOABII585QP5IW",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1346343446/reactions"
      },
      "updated_at" : "2022-12-12T11:53:55Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1346343446",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/4500994?v=4",
         "events_url" : "https://api.github.com/users/kristapsk/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kristapsk/followers",
         "following_url" : "https://api.github.com/users/kristapsk/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kristapsk/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kristapsk",
         "id" : 4500994,
         "login" : "kristapsk",
         "node_id" : "MDQ6VXNlcjQ1MDA5OTQ=",
         "organizations_url" : "https://api.github.com/users/kristapsk/orgs",
         "received_events_url" : "https://api.github.com/users/kristapsk/received_events",
         "repos_url" : "https://api.github.com/users/kristapsk/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kristapsk/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kristapsk/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kristapsk"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Yes. But I think I should not give up on treating Tor sources as one source because this is what it is in reality. And then, addrman should be able to accommodate 10s of thousands of addresses from one source (if the source is Tor, I2P or CJDNS) and still not allow a single malicious entity to flood it.",
      "created_at" : "2023-03-30T11:19:11Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22563#issuecomment-1490127136",
      "id" : 1490127136,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22563",
      "node_id" : "IC_kwDOABII585Y0Ykg",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1490127136/reactions"
      },
      "updated_at" : "2023-03-30T11:19:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1490127136",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "`71cb144cb4...9d2cc3f8ab`: rebase due to conflicts\r\n\r\n> To resolve this properly a bigger refactor would be required - where we call GetGroup() only for IPv4 and IPv6 addresses and treat Tor/I2P/CJDNS separately.\r\n\r\nPart of this was already done in https://github.com/bitcoin/bitcoin/pull/27374 which limited `GetGroup()` calls for IPv4/6 peers.\r\n\r\nRemaining pieces of code that depend on the output of `GetGroup()` and pass non-IPv4/6 addresses are:\r\n* the eviction logic (see `nKeyedNetGroup` in `src/node/eviction.cpp`) and\r\n* addrman bucketing (see `GetTriedBucket()` and `GetNewBucket()` in `addrman.cpp`).",
      "created_at" : "2023-08-29T07:58:54Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22563#issuecomment-1696955817",
      "id" : 1696955817,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22563",
      "node_id" : "IC_kwDOABII585lJX2p",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1696955817/reactions"
      },
      "updated_at" : "2023-08-29T07:58:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1696955817",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Is this ready for review?",
      "created_at" : "2023-09-12T11:50:00Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22563#issuecomment-1715575840",
      "id" : 1715575840,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22563",
      "node_id" : "IC_kwDOABII585mQZwg",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1715575840/reactions"
      },
      "updated_at" : "2023-09-12T11:50:00Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1715575840",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/19157360?v=4",
         "events_url" : "https://api.github.com/users/0xB10C/events{/privacy}",
         "followers_url" : "https://api.github.com/users/0xB10C/followers",
         "following_url" : "https://api.github.com/users/0xB10C/following{/other_user}",
         "gists_url" : "https://api.github.com/users/0xB10C/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/0xB10C",
         "id" : 19157360,
         "login" : "0xB10C",
         "node_id" : "MDQ6VXNlcjE5MTU3MzYw",
         "organizations_url" : "https://api.github.com/users/0xB10C/orgs",
         "received_events_url" : "https://api.github.com/users/0xB10C/received_events",
         "repos_url" : "https://api.github.com/users/0xB10C/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/0xB10C/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/0xB10C/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/0xB10C"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "@0xB10C this is a bit hackish and, as an undesirable side-effect, will change the number of buckets in addrman that are available for tor/i2p/cjdns addresses. I would rather embark on a bigger change where `GetGroup()` is only called for IPv4/6 addresses and the distinction between _IPv4/6=use `GetGroup()`_ VS _tor/i2p/cjdns=do something else_ be made in the higher level code (eviction logic and addrman).",
      "created_at" : "2023-09-13T08:14:18Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22563#issuecomment-1717157204",
      "id" : 1717157204,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22563",
      "node_id" : "IC_kwDOABII585mWb1U",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1717157204/reactions"
      },
      "updated_at" : "2023-09-13T08:14:18Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1717157204",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--2e250dc3d92b2c9115b66051148d6e47-->\nð¤ There hasn't been much activity lately and the CI seems to be failing.\n\nIf no one reviewed the current pull request by commit hash, a [rebase](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#rebasing-changes) can be considered. While the CI failure may be a false positive, the CI hasn't been running for some time, so there may be a real issue hiding as well. A rebase triggers the latest CI and makes sure that no silent merge conflicts have snuck in.\n",
      "created_at" : "2024-04-13T01:17:00Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22563#issuecomment-2052841575",
      "id" : 2052841575,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22563",
      "node_id" : "IC_kwDOABII5856W-Bn",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2052841575/reactions"
      },
      "updated_at" : "2024-04-13T01:17:00Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2052841575",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Closing this because I think the proper solution is a bigger change as mentioned above in https://github.com/bitcoin/bitcoin/pull/22563#issuecomment-1717157204:\r\n\r\n_If the address is IPv4 or IPv6 then use `GetGroup()`\r\nElse do something else (for Tor, I2P and CJDNS addresses)._\r\n\r\nCurrently `GetGroup()` is called for all types of addresses from:\r\n`AddrInfo::GetTriedBucket()`\r\n`AddrInfo::GetNewBucket()`\r\n`CConnman::CalculateKeyedNetGroup() // saved in CNode::nKeyedNetGroup and later used during eviction`\r\n`CConnman::ThreadOpenConnections() // already only called for IPv4 or IPv6 addresses, good!`\r\n\r\nIf somebody works on this, I would be happy to review. Otherwise maybe I will pick it at a later time.",
      "created_at" : "2024-05-07T09:00:41Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22563#issuecomment-2097799927",
      "id" : 2097799927,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22563",
      "node_id" : "IC_kwDOABII5859CeL3",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2097799927/reactions"
      },
      "updated_at" : "2024-05-07T09:01:52Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2097799927",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   }
]
