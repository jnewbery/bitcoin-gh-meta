[
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| Stale ACK | [jonatack](https://github.com/bitcoin/bitcoin/pull/26312#pullrequestreview-1292117929) |\n\nIf your review is incorrectly listed, please react with ð to this comment and the bot will ignore it on the next update.\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#26812](https://github.com/bitcoin/bitcoin/pull/26812) (test: add end-to-end tests for CConnman and PeerManager by vasild)\n* [#25619](https://github.com/bitcoin/bitcoin/pull/25619) (net: avoid overriding non-virtual ToString() in CService and use better naming by vasild)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.\n",
      "created_at" : "2022-10-14T10:46:51Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26312#issuecomment-1278839046",
      "id" : 1278839046,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/26312",
      "node_id" : "IC_kwDOABII585MOYkG",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1278839046/reactions"
      },
      "updated_at" : "2023-02-24T14:01:13Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1278839046",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Why not add additional testing/mocking/fuzzing in this PR since this seems to be laying the groundwork for that?",
      "created_at" : "2022-10-15T03:06:43Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26312#issuecomment-1279643329",
      "id" : 1279643329,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/26312",
      "node_id" : "IC_kwDOABII585MRc7B",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1279643329/reactions"
      },
      "updated_at" : "2022-10-15T03:06:43Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1279643329",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/817736?v=4",
         "events_url" : "https://api.github.com/users/yancyribbens/events{/privacy}",
         "followers_url" : "https://api.github.com/users/yancyribbens/followers",
         "following_url" : "https://api.github.com/users/yancyribbens/following{/other_user}",
         "gists_url" : "https://api.github.com/users/yancyribbens/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/yancyribbens",
         "id" : 817736,
         "login" : "yancyribbens",
         "node_id" : "MDQ6VXNlcjgxNzczNg==",
         "organizations_url" : "https://api.github.com/users/yancyribbens/orgs",
         "received_events_url" : "https://api.github.com/users/yancyribbens/received_events",
         "repos_url" : "https://api.github.com/users/yancyribbens/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/yancyribbens/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/yancyribbens/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/yancyribbens"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "@yancyribbens, to ease review. Right now, https://github.com/bitcoin/bitcoin/pull/21878 consists of this PR + the tests (it is almost complete :balloon:). If somebody has spare review cycles they can review/ACK #21878 directly.",
      "created_at" : "2022-10-17T07:23:22Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26312#issuecomment-1280404869",
      "id" : 1280404869,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/26312",
      "node_id" : "IC_kwDOABII585MUW2F",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1280404869/reactions"
      },
      "updated_at" : "2022-10-17T07:23:22Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1280404869",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "@vasild If the tests are not yet complete, then that may change this PR, right?  Besides adding more safety, seeing the accompanying tests would make this easier (for me anyway) to review.",
      "created_at" : "2022-10-17T08:43:20Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26312#issuecomment-1280499728",
      "id" : 1280499728,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/26312",
      "node_id" : "IC_kwDOABII585MUuAQ",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1280499728/reactions"
      },
      "updated_at" : "2022-10-17T08:43:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1280499728",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/817736?v=4",
         "events_url" : "https://api.github.com/users/yancyribbens/events{/privacy}",
         "followers_url" : "https://api.github.com/users/yancyribbens/followers",
         "following_url" : "https://api.github.com/users/yancyribbens/following{/other_user}",
         "gists_url" : "https://api.github.com/users/yancyribbens/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/yancyribbens",
         "id" : 817736,
         "login" : "yancyribbens",
         "node_id" : "MDQ6VXNlcjgxNzczNg==",
         "organizations_url" : "https://api.github.com/users/yancyribbens/orgs",
         "received_events_url" : "https://api.github.com/users/yancyribbens/received_events",
         "repos_url" : "https://api.github.com/users/yancyribbens/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/yancyribbens/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/yancyribbens/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/yancyribbens"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> If the tests are not yet complete, then that may change this PR, right?\r\n\r\nThe tests are \"complete\" in a sense that they are \"production ready\" and can be merged. \"Not complete\" in a sense that more tests can be added. I do not think that tweaking the tests can change this PR. The point of #21878 is to have high level code not deal with `int` sockets (file descriptor), but to deal with `Sock` instead, which can be mocked together with all the relevant operations (connect, accept, read, write, etc).\r\n\r\n> Besides adding more safety, seeing the accompanying tests would make this easier (for me anyway) to review.\r\n\r\nThe tests are in #21878, feel free to look at them :heart:",
      "created_at" : "2022-10-17T10:31:01Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26312#issuecomment-1280642899",
      "id" : 1280642899,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/26312",
      "node_id" : "IC_kwDOABII585MVQ9T",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1280642899/reactions"
      },
      "updated_at" : "2022-10-17T10:31:01Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1280642899",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : ">  .. to have high level code not deal with int sockets (file descriptor), but to deal with Sock instead\r\n\r\nThanks for the additional explanation.  I was wondering if you could explain this a bit more.  It's been a while since i've done anything with int sockets but if I remember, it was in `C` (not C++).  Is `Sock` a C++ construct that makes it easier to Mock?\r\n\r\n> The tests are in https://github.com/bitcoin/bitcoin/pull/21878, feel free to look at them heart\r\n\r\nI looked over 21878 and I see there's some additional fuzz testing however I don't see the `Mocks` that this PR enables.  Am I missing the place where the Mocks are tested or is it yet to be added?  Would this PR be merged before 21878?",
      "created_at" : "2022-10-17T10:54:48Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26312#issuecomment-1280672188",
      "id" : 1280672188,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/26312",
      "node_id" : "IC_kwDOABII585MVYG8",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1280672188/reactions"
      },
      "updated_at" : "2022-10-17T10:54:48Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1280672188",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/817736?v=4",
         "events_url" : "https://api.github.com/users/yancyribbens/events{/privacy}",
         "followers_url" : "https://api.github.com/users/yancyribbens/followers",
         "following_url" : "https://api.github.com/users/yancyribbens/following{/other_user}",
         "gists_url" : "https://api.github.com/users/yancyribbens/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/yancyribbens",
         "id" : 817736,
         "login" : "yancyribbens",
         "node_id" : "MDQ6VXNlcjgxNzczNg==",
         "organizations_url" : "https://api.github.com/users/yancyribbens/orgs",
         "received_events_url" : "https://api.github.com/users/yancyribbens/received_events",
         "repos_url" : "https://api.github.com/users/yancyribbens/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/yancyribbens/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/yancyribbens/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/yancyribbens"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "The `int` sockets is the API provided by the OS. It is in C. We call it from the C++ code.\r\n\r\nBefore https://github.com/bitcoin/bitcoin/pull/21878 we would use that OS C API directly from all over the place. E.g.:\r\n\r\n```cpp\r\nint s = socket(...); // create the socket, see man 2 socket\r\n...\r\nconnect(s, to_addr); // see man 2 connect\r\n```\r\n\r\nThe problem with this is that in order to test it we have to create a real socket that really connects to the given address which is very inconvenient. It cannot be mocked.\r\n\r\nhttps://github.com/bitcoin/bitcoin/pull/21878 aims to replace all such calls to the operating system with constructs like\r\n\r\n```cpp\r\nSock sock = CreateSock(); // can return Sock, FuzzedSock, StaticContentsSock or another class that implements the interface\r\nsock->Connect(to_addr);\r\n```\r\n\r\nThis way a mock `Sock` class can be used and the high level code avoids calling the OS socket API at all in tests or dealing/touching `int` sockets at all. The last piece of that is the removal of `Sock::Get()` and changing the high level code which checks whether the `int` socket stored in `Sock` is `INVALID_SOCKET`.",
      "created_at" : "2022-10-25T09:22:11Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26312#issuecomment-1290250078",
      "id" : 1290250078,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/26312",
      "node_id" : "IC_kwDOABII585M56de",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1290250078/reactions"
      },
      "updated_at" : "2022-10-25T09:22:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1290250078",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "@vasild \r\n> The problem with this is that in order to test it we have to create a real socket that really connects to the given address which is very inconvenient. It cannot be mocked.\r\n\r\nI understand.  What I am asking is if you wouldn't mind adding the `Mock` tests to this PR, or create a new PR with the `Mocks` before merging this one?\r\n",
      "created_at" : "2022-10-25T09:28:03Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26312#issuecomment-1290257523",
      "id" : 1290257523,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/26312",
      "node_id" : "IC_kwDOABII585M58Rz",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1290257523/reactions"
      },
      "updated_at" : "2022-10-25T09:28:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1290257523",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/817736?v=4",
         "events_url" : "https://api.github.com/users/yancyribbens/events{/privacy}",
         "followers_url" : "https://api.github.com/users/yancyribbens/followers",
         "following_url" : "https://api.github.com/users/yancyribbens/following{/other_user}",
         "gists_url" : "https://api.github.com/users/yancyribbens/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/yancyribbens",
         "id" : 817736,
         "login" : "yancyribbens",
         "node_id" : "MDQ6VXNlcjgxNzczNg==",
         "organizations_url" : "https://api.github.com/users/yancyribbens/orgs",
         "received_events_url" : "https://api.github.com/users/yancyribbens/received_events",
         "repos_url" : "https://api.github.com/users/yancyribbens/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/yancyribbens/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/yancyribbens/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/yancyribbens"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> What I am asking is if you wouldn't mind adding the Mock tests to this PR,\r\n\r\nI assume that by \"the Mock tests\" you mean the tests that are in the last 4 commits of https://github.com/bitcoin/bitcoin/pull/21878, right? If I add them to this PR then this PR would be the same as https://github.com/bitcoin/bitcoin/pull/21878.\r\n\r\nI created this PR as a smaller piece of https://github.com/bitcoin/bitcoin/pull/21878 to ease review. If you want to peek or fully review the tests, then see the last 4 commits in https://github.com/bitcoin/bitcoin/pull/21878.\r\n\r\n> or create a new PR with the Mocks before merging this one?\r\n\r\nBecause those tests depend on removing the `Sock::Get()` call which is done in this PR. If the tests get merged first, this may happen: `CConnman::OpenNetworkConnection()` -> `CConnman::ConnectNode()` -> `i2p::sam::Session::Connect()` and later `i2p::sam::Session::~Session()` -> `i2p::sam::Session::Disconnect()` -> `Sock::Get()`. Calling `Get()` on `FuzzedSock` is a bit fishy, the high level code shouldn't peek at the internal `int` socket and make decisions based on its value.",
      "created_at" : "2022-10-25T10:18:00Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26312#issuecomment-1290316536",
      "id" : 1290316536,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/26312",
      "node_id" : "IC_kwDOABII585M6Kr4",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1290316536/reactions"
      },
      "updated_at" : "2022-10-25T10:18:00Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1290316536",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "@vasild \r\n\r\nAre there any Mock tests that are not part of fuzz tests?",
      "created_at" : "2022-10-25T11:28:59Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26312#issuecomment-1290400493",
      "id" : 1290400493,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/26312",
      "node_id" : "IC_kwDOABII585M6fLt",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1290400493/reactions"
      },
      "updated_at" : "2022-10-25T11:28:59Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1290400493",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/817736?v=4",
         "events_url" : "https://api.github.com/users/yancyribbens/events{/privacy}",
         "followers_url" : "https://api.github.com/users/yancyribbens/followers",
         "following_url" : "https://api.github.com/users/yancyribbens/following{/other_user}",
         "gists_url" : "https://api.github.com/users/yancyribbens/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/yancyribbens",
         "id" : 817736,
         "login" : "yancyribbens",
         "node_id" : "MDQ6VXNlcjgxNzczNg==",
         "organizations_url" : "https://api.github.com/users/yancyribbens/orgs",
         "received_events_url" : "https://api.github.com/users/yancyribbens/received_events",
         "repos_url" : "https://api.github.com/users/yancyribbens/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/yancyribbens/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/yancyribbens/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/yancyribbens"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "There is one in `src/test/i2p_tests.cpp`.",
      "created_at" : "2022-10-25T13:49:00Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26312#issuecomment-1290593046",
      "id" : 1290593046,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/26312",
      "node_id" : "IC_kwDOABII585M7OMW",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1290593046/reactions"
      },
      "updated_at" : "2022-10-25T13:49:00Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1290593046",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Which PR is the one `Mock` in `src/test/i2p_tests.cpp`, or is it already merged?",
      "created_at" : "2022-10-25T15:45:29Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26312#issuecomment-1290772051",
      "id" : 1290772051,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/26312",
      "node_id" : "IC_kwDOABII585M755T",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1290772051/reactions"
      },
      "updated_at" : "2022-10-25T15:45:29Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1290772051",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/817736?v=4",
         "events_url" : "https://api.github.com/users/yancyribbens/events{/privacy}",
         "followers_url" : "https://api.github.com/users/yancyribbens/followers",
         "following_url" : "https://api.github.com/users/yancyribbens/following{/other_user}",
         "gists_url" : "https://api.github.com/users/yancyribbens/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/yancyribbens",
         "id" : 817736,
         "login" : "yancyribbens",
         "node_id" : "MDQ6VXNlcjgxNzczNg==",
         "organizations_url" : "https://api.github.com/users/yancyribbens/orgs",
         "received_events_url" : "https://api.github.com/users/yancyribbens/received_events",
         "repos_url" : "https://api.github.com/users/yancyribbens/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/yancyribbens/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/yancyribbens/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/yancyribbens"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "It is already merged.",
      "created_at" : "2022-10-26T07:19:27Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26312#issuecomment-1291605040",
      "id" : 1291605040,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/26312",
      "node_id" : "IC_kwDOABII585M_FQw",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1291605040/reactions"
      },
      "updated_at" : "2022-10-26T07:19:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1291605040",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "I'm confused.  I thought this PR was required before a `Mock` could be used.",
      "created_at" : "2022-10-26T08:34:04Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26312#issuecomment-1291687974",
      "id" : 1291687974,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/26312",
      "node_id" : "IC_kwDOABII585M_Zgm",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1291687974/reactions"
      },
      "updated_at" : "2022-10-26T08:34:04Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1291687974",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/817736?v=4",
         "events_url" : "https://api.github.com/users/yancyribbens/events{/privacy}",
         "followers_url" : "https://api.github.com/users/yancyribbens/followers",
         "following_url" : "https://api.github.com/users/yancyribbens/following{/other_user}",
         "gists_url" : "https://api.github.com/users/yancyribbens/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/yancyribbens",
         "id" : 817736,
         "login" : "yancyribbens",
         "node_id" : "MDQ6VXNlcjgxNzczNg==",
         "organizations_url" : "https://api.github.com/users/yancyribbens/orgs",
         "received_events_url" : "https://api.github.com/users/yancyribbens/received_events",
         "repos_url" : "https://api.github.com/users/yancyribbens/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/yancyribbens/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/yancyribbens/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/yancyribbens"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "`FuzzedSock` and `StaticContentsSock` are mock implementations of `Sock` that are already used in `master`.\r\n\r\nDepending on the code being tested various methods of `Sock` (or a mocked implementation) are going to be called. For example, if you write an unit or fuzz test for `CConnman::SocketSendData()` that is only going to invoke `Sock::Send()`.",
      "created_at" : "2022-10-26T10:36:39Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26312#issuecomment-1291833374",
      "id" : 1291833374,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/26312",
      "node_id" : "IC_kwDOABII585M_9Ae",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1291833374/reactions"
      },
      "updated_at" : "2022-10-26T10:36:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1291833374",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->\nð This pull request conflicts with the target branch and [needs rebase](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#rebasing-changes).\n",
      "created_at" : "2022-11-25T18:25:34Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26312#issuecomment-1327771285",
      "id" : 1327771285,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/26312",
      "node_id" : "IC_kwDOABII585PJC6V",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1327771285/reactions"
      },
      "updated_at" : "2022-11-25T18:25:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1327771285",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "`7b6fe6761a...666c7584cf`: rebase due to conflicts",
      "created_at" : "2022-12-12T10:47:39Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26312#issuecomment-1346259946",
      "id" : 1346259946,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/26312",
      "node_id" : "IC_kwDOABII585QPkvq",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1346259946/reactions"
      },
      "updated_at" : "2022-12-12T10:47:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1346259946",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->\nð This pull request conflicts with the target branch and [needs rebase](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#rebasing-changes).\n",
      "created_at" : "2023-02-01T11:37:51Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26312#issuecomment-1411917204",
      "id" : 1411917204,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/26312",
      "node_id" : "IC_kwDOABII585UKCWU",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1411917204/reactions"
      },
      "updated_at" : "2023-02-01T11:37:51Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1411917204",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "ACK 666c7584cfb5abe882909155ed0af76ead74ef3c modulo trivial rebase",
      "created_at" : "2023-02-01T19:24:44Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26312#issuecomment-1412599564",
      "id" : 1412599564,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/26312",
      "node_id" : "IC_kwDOABII585UMo8M",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1412599564/reactions"
      },
      "updated_at" : "2023-02-01T19:24:44Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1412599564",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "`666c7584cf...c40c25763c`: rebase due to conflicts\r\n\r\nInvalidates ACK from @jonatack \r\n",
      "created_at" : "2023-02-09T14:08:38Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26312#issuecomment-1424247754",
      "id" : 1424247754,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/26312",
      "node_id" : "IC_kwDOABII585U5EvK",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1424247754/reactions"
      },
      "updated_at" : "2023-02-09T14:08:38Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1424247754",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "`Sock::IsConnected()` is used in `src/i2p.cpp`. It is important to override all methods from the mocked sock implementations because when we exercise some real code from the tests with a mocked socket, then we do not want the real `IsConnected()` method to be called. For example, the tests from the [parent PR](https://github.com/bitcoin/bitcoin/pull/21878) mock the socket with `FuzzedSock` and call:\r\n\r\n```\r\nFUZZ_TARGET_INIT(connman, ...) which calls\r\n  Connman::OpenNetworkConnection() which calls\r\n    Connman::ConnectNode() which calls\r\n      i2p::sam::Session::Connect() which calls\r\n        i2p::sam::Session::CreateIfNotCreatedAlready() which calls\r\n          Sock::IsConnected()  // must end up calling FuzzedSock::IsConnected()\r\n```\r\n",
      "created_at" : "2023-02-10T08:15:16Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26312#issuecomment-1425388513",
      "id" : 1425388513,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/26312",
      "node_id" : "IC_kwDOABII585U9bPh",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1425388513/reactions"
      },
      "updated_at" : "2023-02-10T08:15:16Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1425388513",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->\nð This pull request conflicts with the target branch and [needs rebase](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#rebasing-changes).\n",
      "created_at" : "2023-02-17T19:15:25Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26312#issuecomment-1435122231",
      "id" : 1435122231,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/26312",
      "node_id" : "IC_kwDOABII585Vijo3",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1435122231/reactions"
      },
      "updated_at" : "2023-02-17T19:15:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1435122231",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "`c40c25763c...e536b3a67b`: rebase due to conflicts\r\n\r\nInvalidates ACK from @jonatack",
      "created_at" : "2023-02-24T14:01:13Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26312#issuecomment-1443723419",
      "id" : 1443723419,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/26312",
      "node_id" : "IC_kwDOABII585WDXib",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1443723419/reactions"
      },
      "updated_at" : "2023-02-24T14:01:13Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1443723419",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/26312#discussion_r1299754674"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26312"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1299754674"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Should be removing a bunch of \"Equivalent to `blah(this->Get())`\" comments as well (or replacing them with `blah(m_socket)`).",
      "commit_id" : "e536b3a67b390c3c46dce99cb7466862d3fd4863",
      "created_at" : "2023-08-21T08:06:33Z",
      "diff_hunk" : "@@ -62,12 +61,6 @@ class Sock\n      */\n     virtual Sock& operator=(Sock&& other);\n \n-    /**\n-     * Get the value of the contained socket.\n-     * @return socket or INVALID_SOCKET if empty\n-     */\n-    [[nodiscard]] virtual SOCKET Get() const;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26312#discussion_r1299754674",
      "id" : 1299754674,
      "line" : 69,
      "node_id" : "PRRC_kwDOABII585NeK6y",
      "original_commit_id" : "19508a1d0c830dd2a366d8848fc815aed26d247f",
      "original_line" : 69,
      "original_position" : 18,
      "original_start_line" : null,
      "path" : "src/util/sock.h",
      "position" : 27,
      "pull_request_review_id" : 1586431921,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26312",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1299754674/reactions"
      },
      "side" : "LEFT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-08-21T09:13:43Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1299754674",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/127186?v=4",
         "events_url" : "https://api.github.com/users/ajtowns/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ajtowns/followers",
         "following_url" : "https://api.github.com/users/ajtowns/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ajtowns/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ajtowns",
         "id" : 127186,
         "login" : "ajtowns",
         "node_id" : "MDQ6VXNlcjEyNzE4Ng==",
         "organizations_url" : "https://api.github.com/users/ajtowns/orgs",
         "received_events_url" : "https://api.github.com/users/ajtowns/received_events",
         "repos_url" : "https://api.github.com/users/ajtowns/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ajtowns/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ajtowns/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ajtowns"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/26312#discussion_r1299790163"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26312"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1299790163"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Maybe separate the `move_assignment` change to its own commit? The old code wasn't checking that the moved-to socket got closed, so this is improving coverage, not just avoiding the default constructor?",
      "commit_id" : "e536b3a67b390c3c46dce99cb7466862d3fd4863",
      "created_at" : "2023-08-21T08:29:08Z",
      "diff_hunk" : "@@ -56,14 +56,25 @@ BOOST_AUTO_TEST_CASE(move_constructor)\n \n BOOST_AUTO_TEST_CASE(move_assignment)\n {\n-    const SOCKET s = CreateSocket();\n-    Sock* sock1 = new Sock(s);\n-    Sock* sock2 = new Sock();\n+    const SOCKET s1 = CreateSocket();\n+    const SOCKET s2 = CreateSocket();",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26312#discussion_r1299790163",
      "id" : 1299790163,
      "line" : 60,
      "node_id" : "PRRC_kwDOABII585NeTlT",
      "original_commit_id" : "e536b3a67b390c3c46dce99cb7466862d3fd4863",
      "original_line" : 60,
      "original_position" : 8,
      "original_start_line" : null,
      "path" : "src/test/sock_tests.cpp",
      "position" : 8,
      "pull_request_review_id" : 1586431921,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26312",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1299790163/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-08-21T09:13:43Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1299790163",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/127186?v=4",
         "events_url" : "https://api.github.com/users/ajtowns/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ajtowns/followers",
         "following_url" : "https://api.github.com/users/ajtowns/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ajtowns/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ajtowns",
         "id" : 127186,
         "login" : "ajtowns",
         "node_id" : "MDQ6VXNlcjEyNzE4Ng==",
         "organizations_url" : "https://api.github.com/users/ajtowns/orgs",
         "received_events_url" : "https://api.github.com/users/ajtowns/received_events",
         "repos_url" : "https://api.github.com/users/ajtowns/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ajtowns/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ajtowns/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ajtowns"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/26312#discussion_r1299795632"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26312"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1299795632"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "`Sock() = delete;` just to be explicit and improve the error message slightly?",
      "commit_id" : "e536b3a67b390c3c46dce99cb7466862d3fd4863",
      "created_at" : "2023-08-21T08:33:55Z",
      "diff_hunk" : "@@ -26,11 +26,6 @@ static constexpr auto MAX_WAIT_FOR_IO = 1s;\n class Sock\n {\n public:\n-    /**\n-     * Default constructor, creates an empty object that does nothing when destroyed.\n-     */\n-    Sock();",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26312#discussion_r1299795632",
      "id" : 1299795632,
      "line" : 33,
      "node_id" : "PRRC_kwDOABII585NeU6w",
      "original_commit_id" : "e536b3a67b390c3c46dce99cb7466862d3fd4863",
      "original_line" : 32,
      "original_position" : 7,
      "original_start_line" : null,
      "path" : "src/util/sock.h",
      "position" : 7,
      "pull_request_review_id" : 1586431921,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26312",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1299795632/reactions"
      },
      "side" : "LEFT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-08-21T09:13:43Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1299795632",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/127186?v=4",
         "events_url" : "https://api.github.com/users/ajtowns/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ajtowns/followers",
         "following_url" : "https://api.github.com/users/ajtowns/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ajtowns/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ajtowns",
         "id" : 127186,
         "login" : "ajtowns",
         "node_id" : "MDQ6VXNlcjEyNzE4Ng==",
         "organizations_url" : "https://api.github.com/users/ajtowns/orgs",
         "received_events_url" : "https://api.github.com/users/ajtowns/received_events",
         "repos_url" : "https://api.github.com/users/ajtowns/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ajtowns/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ajtowns/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ajtowns"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/26312#discussion_r1299840432"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26312"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1299840432"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Checking that you actually got the socket you wanted seems valuable (particularly for move operations). Maybe:\r\n\r\n```c++\r\nclass Sock {\r\npublic:\r\n    /** For unit tests */\r\n    bool CheckSocket(SOCKET s) const { return s == m_socket; }\r\n...\r\n};\r\n\r\n//  BOOST_CHECK_EQUAL(sock->Get(), s);\r\n    BOOST_CHECK(sock->CheckSocket(s));\r\n```",
      "commit_id" : "e536b3a67b390c3c46dce99cb7466862d3fd4863",
      "created_at" : "2023-08-21T09:12:24Z",
      "diff_hunk" : "@@ -38,7 +38,6 @@ BOOST_AUTO_TEST_CASE(constructor_and_destructor)\n {\n     const SOCKET s = CreateSocket();\n     Sock* sock = new Sock(s);\n-    BOOST_CHECK_EQUAL(sock->Get(), s);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26312#discussion_r1299840432",
      "id" : 1299840432,
      "line" : 41,
      "node_id" : "PRRC_kwDOABII585Nef2w",
      "original_commit_id" : "19508a1d0c830dd2a366d8848fc815aed26d247f",
      "original_line" : 41,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "src/test/sock_tests.cpp",
      "position" : 4,
      "pull_request_review_id" : 1586431921,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26312",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1299840432/reactions"
      },
      "side" : "LEFT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-08-21T09:13:43Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1299840432",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/127186?v=4",
         "events_url" : "https://api.github.com/users/ajtowns/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ajtowns/followers",
         "following_url" : "https://api.github.com/users/ajtowns/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ajtowns/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ajtowns",
         "id" : 127186,
         "login" : "ajtowns",
         "node_id" : "MDQ6VXNlcjEyNzE4Ng==",
         "organizations_url" : "https://api.github.com/users/ajtowns/orgs",
         "received_events_url" : "https://api.github.com/users/ajtowns/received_events",
         "repos_url" : "https://api.github.com/users/ajtowns/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ajtowns/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ajtowns/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ajtowns"
      }
   }
]
