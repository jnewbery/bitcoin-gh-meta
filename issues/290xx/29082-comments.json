[
   {
      "author_association" : "MEMBER",
      "body" : "Does it pass if you increase the timeout factor? See `./test/functional/test_runner.py --help | grep factor`?",
      "created_at" : "2023-12-14T19:49:59Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/29082#issuecomment-1856485017",
      "id" : 1856485017,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/29082",
      "node_id" : "IC_kwDOABII585up7aZ",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1856485017/reactions"
      },
      "updated_at" : "2023-12-14T19:49:59Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1856485017",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/maflcko/events{/privacy}",
         "followers_url" : "https://api.github.com/users/maflcko/followers",
         "following_url" : "https://api.github.com/users/maflcko/following{/other_user}",
         "gists_url" : "https://api.github.com/users/maflcko/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/maflcko",
         "id" : 6399679,
         "login" : "maflcko",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/maflcko/orgs",
         "received_events_url" : "https://api.github.com/users/maflcko/received_events",
         "repos_url" : "https://api.github.com/users/maflcko/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/maflcko/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/maflcko/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/maflcko"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "Setting `--timeout-factor=2` did the trick.\r\nThank you @maflcko.",
      "created_at" : "2023-12-14T20:15:45Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/29082#issuecomment-1856519929",
      "id" : 1856519929,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/29082",
      "node_id" : "IC_kwDOABII585uqD75",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1856519929/reactions"
      },
      "updated_at" : "2023-12-14T20:15:45Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1856519929",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/44040856?v=4",
         "events_url" : "https://api.github.com/users/LeoSpyke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/LeoSpyke/followers",
         "following_url" : "https://api.github.com/users/LeoSpyke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/LeoSpyke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/LeoSpyke",
         "id" : 44040856,
         "login" : "LeoSpyke",
         "node_id" : "MDQ6VXNlcjQ0MDQwODU2",
         "organizations_url" : "https://api.github.com/users/LeoSpyke/orgs",
         "received_events_url" : "https://api.github.com/users/LeoSpyke/received_events",
         "repos_url" : "https://api.github.com/users/LeoSpyke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/LeoSpyke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/LeoSpyke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/LeoSpyke"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "I ran into errors with this test as well. Very similar output to #27091. Setting `--timeout-factor=2` does do the trick.\r\n\r\nWas testing here https://github.com/bitcoin/bitcoin/pull/29521#pullrequestreview-1968183010\r\nSame issue on the base commit for that PR, also on 27.x and 26.x branches.\r\n\r\n<details>\r\n<summary>\r\nOutput\r\n</summary>\r\n\r\n```\r\n2/301 - feature_index_prune.py failed, Duration: 197 s\r\n\r\nstdout:\r\n2024-03-29T09:41:19.756000Z TestFramework (INFO): PRNG seed is: 4178992134959664795\r\n2024-03-29T09:41:19.757000Z TestFramework (INFO): Initializing test directory /mnt/tmp/test_runner_â¿_ð_20240329_104112/feature_index_prune_298\r\n2024-03-29T09:41:20.577000Z TestFramework (INFO): check if we can access blockfilters and coinstats when pruning is enabled but no blocks are actually pruned\r\n2024-03-29T09:42:34.750000Z TestFramework (INFO): prune some blocks\r\n2024-03-29T09:42:34.849000Z TestFramework (INFO): check if we can access the tips blockfilter and coinstats when we have pruned some blocks\r\n2024-03-29T09:42:34.873000Z TestFramework (INFO): check if we can access the blockfilter and coinstats of a pruned block\r\n2024-03-29T09:42:44.412000Z TestFramework (INFO): make sure trying to access the indices throws errors\r\n2024-03-29T09:43:34.374000Z TestFramework (INFO): prune exactly up to the indices best blocks while the indices are disabled\r\n2024-03-29T09:43:36.834000Z TestFramework (INFO): make sure that we can continue with the partially synced indices after having pruned up to the index height\r\n2024-03-29T09:44:36.891000Z TestFramework.utils (ERROR): wait_until() failed. Predicate: ''''\r\n        self.wait_until(lambda: self.nodes[1].getindexinfo() == expected_stats)\r\n'''\r\n2024-03-29T09:44:36.895000Z TestFramework (ERROR): Assertion failed\r\nTraceback (most recent call last):\r\n  File \"/home/chris/Documents/Code/bitcoin-core/test/functional/test_framework/test_framework.py\", line 132, in main\r\n    self.run_test()\r\n  File \"/home/chris/Documents/Code/bitcoin-core/test/functional/feature_index_prune.py\", line 117, in run_test\r\n    self.sync_index(height=1500)\r\n  File \"/home/chris/Documents/Code/bitcoin-core/test/functional/feature_index_prune.py\", line 34, in sync_index\r\n    self.wait_until(lambda: self.nodes[1].getindexinfo() == expected_stats)\r\n  File \"/home/chris/Documents/Code/bitcoin-core/test/functional/test_framework/test_framework.py\", line 780, in wait_until\r\n    return wait_until_helper_internal(test_function, timeout=timeout, timeout_factor=self.options.timeout_factor)\r\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  File \"/home/chris/Documents/Code/bitcoin-core/test/functional/test_framework/util.py\", line 293, in wait_until_helper_internal\r\n    raise AssertionError(\"Predicate {} not true after {} seconds\".format(predicate_source, timeout))\r\nAssertionError: Predicate ''''\r\n        self.wait_until(lambda: self.nodes[1].getindexinfo() == expected_stats)\r\n''' not true after 60 seconds\r\n2024-03-29T09:44:36.948000Z TestFramework (INFO): Stopping nodes\r\n2024-03-29T09:44:37.162000Z TestFramework (WARNING): Not cleaning up dir /mnt/tmp/test_runner_â¿_ð_20240329_104112/feature_index_prune_298\r\n2024-03-29T09:44:37.162000Z TestFramework (ERROR): Test failed. Test logging available at /mnt/tmp/test_runner_â¿_ð_20240329_104112/feature_index_prune_298/test_framework.log\r\n2024-03-29T09:44:37.162000Z TestFramework (ERROR): \r\n2024-03-29T09:44:37.162000Z TestFramework (ERROR): Hint: Call /home/chris/Documents/Code/bitcoin-core/test/functional/combine_logs.py '/mnt/tmp/test_runner_â¿_ð_20240329_104112/feature_index_prune_298' to consolidate all logs\r\n2024-03-29T09:44:37.163000Z TestFramework (ERROR): \r\n2024-03-29T09:44:37.163000Z TestFramework (ERROR): If this failure happened unexpectedly or intermittently, please file a bug and provide a link or upload of the combined log.\r\n2024-03-29T09:44:37.163000Z TestFramework (ERROR): https://github.com/bitcoin/bitcoin/issues\r\n2024-03-29T09:44:37.163000Z TestFramework (ERROR): \r\n\r\n\r\nstderr:\r\n\r\n\r\n43/301 - wallet_listtransactions.py --descriptors passed, Duration: 27 s\r\n```\r\n</details>",
      "created_at" : "2024-03-29T23:05:44Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/29082#issuecomment-2027809715",
      "id" : 2027809715,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/29082",
      "node_id" : "IC_kwDOABII58543euz",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2027809715/reactions"
      },
      "updated_at" : "2024-03-29T23:05:44Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2027809715",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/581308?v=4",
         "events_url" : "https://api.github.com/users/cbergqvist/events{/privacy}",
         "followers_url" : "https://api.github.com/users/cbergqvist/followers",
         "following_url" : "https://api.github.com/users/cbergqvist/following{/other_user}",
         "gists_url" : "https://api.github.com/users/cbergqvist/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/cbergqvist",
         "id" : 581308,
         "login" : "cbergqvist",
         "node_id" : "MDQ6VXNlcjU4MTMwOA==",
         "organizations_url" : "https://api.github.com/users/cbergqvist/orgs",
         "received_events_url" : "https://api.github.com/users/cbergqvist/received_events",
         "repos_url" : "https://api.github.com/users/cbergqvist/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/cbergqvist/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/cbergqvist/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/cbergqvist"
      }
   }
]
