[
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| Concept ACK | [stickies-v](https://github.com/bitcoin/bitcoin/pull/28107#pullrequestreview-1538994126), [glozow](https://github.com/bitcoin/bitcoin/pull/28107#issuecomment-1643837866), [TheCharlatan](https://github.com/bitcoin/bitcoin/pull/28107#issuecomment-1645952454), [luke-jr](https://github.com/bitcoin/bitcoin/pull/28107#issuecomment-1650329917) |\n| Ignored review | [instagibbs](https://github.com/bitcoin/bitcoin/pull/28107#pullrequestreview-1555428522) |\n\nIf your review is incorrectly listed, please react with ð to this comment and the bot will ignore it on the next update.\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#27675](https://github.com/bitcoin/bitcoin/pull/27675) (p2p: Drop m_recently_announced_invs bloom filter by ajtowns)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.\n",
      "created_at" : "2023-07-19T14:10:59Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28107#issuecomment-1642163970",
      "id" : 1642163970,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28107",
      "node_id" : "IC_kwDOABII585h4W8C",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 1,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1642163970/reactions"
      },
      "updated_at" : "2023-08-07T04:14:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1642163970",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "How is this different from `GenTxid`?",
      "created_at" : "2023-07-19T14:17:49Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28107#issuecomment-1642175486",
      "id" : 1642175486,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28107",
      "node_id" : "IC_kwDOABII585h4Zv-",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1642175486/reactions"
      },
      "updated_at" : "2023-07-19T14:17:49Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1642175486",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> How is this different from GenTxid?\r\n\r\nI think mostly compile-time vs. runtime checks? `GenTxid` can hold both txid types but doesn't enforce type correctness at compile time. Any type checks would happen at runtime, e.g. `assert(gtxid.IsWtxid())`. Also nothing prevents passing the wrong txid type when constructing a `GenTxid`.\r\n\r\n(I guess with this PR we could consider making `GenTxid` a `std::variant<Txid, Wtxid>`)",
      "created_at" : "2023-07-19T14:28:17Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28107#issuecomment-1642196812",
      "id" : 1642196812,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28107",
      "node_id" : "IC_kwDOABII585h4e9M",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1642196812/reactions"
      },
      "updated_at" : "2023-07-19T14:28:17Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1642196812",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8077169?v=4",
         "events_url" : "https://api.github.com/users/dergoegge/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dergoegge/followers",
         "following_url" : "https://api.github.com/users/dergoegge/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dergoegge/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dergoegge",
         "id" : 8077169,
         "login" : "dergoegge",
         "node_id" : "MDQ6VXNlcjgwNzcxNjk=",
         "organizations_url" : "https://api.github.com/users/dergoegge/orgs",
         "received_events_url" : "https://api.github.com/users/dergoegge/received_events",
         "repos_url" : "https://api.github.com/users/dergoegge/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dergoegge/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dergoegge/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dergoegge"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "I've definitely written/seen bugs that could be prevented if Txid and Wtxid were different types. When I review code it's something that I look for and it comes up surprisingly often. Interfaces taking `uint256` often implicitly expect them to be a txid, eg #23325.\r\n\r\nAgree that checking at compile time would be nice and probably prevent bugs / make review easier. Concept ACK assuming we're ok with the amount of code change.",
      "created_at" : "2023-07-20T12:28:52Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28107#issuecomment-1643837866",
      "id" : 1643837866,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28107",
      "node_id" : "IC_kwDOABII585h-vmq",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1643837866/reactions"
      },
      "updated_at" : "2023-07-20T12:28:52Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1643837866",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/25183001?v=4",
         "events_url" : "https://api.github.com/users/glozow/events{/privacy}",
         "followers_url" : "https://api.github.com/users/glozow/followers",
         "following_url" : "https://api.github.com/users/glozow/following{/other_user}",
         "gists_url" : "https://api.github.com/users/glozow/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/glozow",
         "id" : 25183001,
         "login" : "glozow",
         "node_id" : "MDQ6VXNlcjI1MTgzMDAx",
         "organizations_url" : "https://api.github.com/users/glozow/orgs",
         "received_events_url" : "https://api.github.com/users/glozow/received_events",
         "repos_url" : "https://api.github.com/users/glozow/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/glozow/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/glozow/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/glozow"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> We'll have to be careful for this not to lead to unnecessary refactoring code churn, but that shouldn't be a reason not to make this change imo.\r\n\r\nIn terms of refactoring, this should be similar to the time type-safety PRs in that we can gradually convert our code.",
      "created_at" : "2023-07-20T12:29:33Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28107#issuecomment-1643838829",
      "id" : 1643838829,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28107",
      "node_id" : "IC_kwDOABII585h-v1t",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1643838829/reactions"
      },
      "updated_at" : "2023-07-20T12:29:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1643838829",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8077169?v=4",
         "events_url" : "https://api.github.com/users/dergoegge/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dergoegge/followers",
         "following_url" : "https://api.github.com/users/dergoegge/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dergoegge/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dergoegge",
         "id" : 8077169,
         "login" : "dergoegge",
         "node_id" : "MDQ6VXNlcjgwNzcxNjk=",
         "organizations_url" : "https://api.github.com/users/dergoegge/orgs",
         "received_events_url" : "https://api.github.com/users/dergoegge/received_events",
         "repos_url" : "https://api.github.com/users/dergoegge/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dergoegge/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dergoegge/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dergoegge"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "concept ACK, it comes up pretty [often](https://github.com/bitcoin/bitcoin/pull/28031#discussion_r1261648754)\r\n\r\nto work around this I'm writing `Assume`'s everywhere to make things clearer for me :)",
      "created_at" : "2023-07-20T15:24:08Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28107#issuecomment-1644129957",
      "id" : 1644129957,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28107",
      "node_id" : "IC_kwDOABII585h_26l",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 1,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1644129957/reactions"
      },
      "updated_at" : "2023-07-20T15:29:06Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1644129957",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5767891?v=4",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "node_id" : "MDQ6VXNlcjU3Njc4OTE=",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "If helpful, a somewhat similar pros/cons discussion took place in March 2021 in https://github.com/bitcoin/bitcoin/pull/21328.",
      "created_at" : "2023-07-20T16:11:45Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28107#issuecomment-1644206979",
      "id" : 1644206979,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28107",
      "node_id" : "IC_kwDOABII585iAJuD",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1644206979/reactions"
      },
      "updated_at" : "2023-07-20T17:22:09Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1644206979",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Ready for review",
      "created_at" : "2023-07-21T15:31:51Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28107#issuecomment-1645768047",
      "id" : 1645768047,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28107",
      "node_id" : "IC_kwDOABII585iGG1v",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1645768047/reactions"
      },
      "updated_at" : "2023-07-21T15:31:51Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1645768047",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8077169?v=4",
         "events_url" : "https://api.github.com/users/dergoegge/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dergoegge/followers",
         "following_url" : "https://api.github.com/users/dergoegge/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dergoegge/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dergoegge",
         "id" : 8077169,
         "login" : "dergoegge",
         "node_id" : "MDQ6VXNlcjgwNzcxNjk=",
         "organizations_url" : "https://api.github.com/users/dergoegge/orgs",
         "received_events_url" : "https://api.github.com/users/dergoegge/received_events",
         "repos_url" : "https://api.github.com/users/dergoegge/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dergoegge/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dergoegge/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dergoegge"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Concept ACK",
      "created_at" : "2023-07-21T16:30:45Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28107#issuecomment-1645952454",
      "id" : 1645952454,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28107",
      "node_id" : "IC_kwDOABII585iGz3G",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1645952454/reactions"
      },
      "updated_at" : "2023-07-21T16:30:45Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1645952454",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8421793?v=4",
         "events_url" : "https://api.github.com/users/TheCharlatan/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheCharlatan/followers",
         "following_url" : "https://api.github.com/users/TheCharlatan/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheCharlatan/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheCharlatan",
         "id" : 8421793,
         "login" : "TheCharlatan",
         "node_id" : "MDQ6VXNlcjg0MjE3OTM=",
         "organizations_url" : "https://api.github.com/users/TheCharlatan/orgs",
         "received_events_url" : "https://api.github.com/users/TheCharlatan/received_events",
         "repos_url" : "https://api.github.com/users/TheCharlatan/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheCharlatan/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheCharlatan/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheCharlatan"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Concept ACK, but I'm not too sure about the `Wtxid` type. It's literally just a hash of the transaction, not really an identifier per se.",
      "created_at" : "2023-07-25T18:26:37Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28107#issuecomment-1650329917",
      "id" : 1650329917,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28107",
      "node_id" : "IC_kwDOABII585iXgk9",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1650329917/reactions"
      },
      "updated_at" : "2023-07-25T18:26:37Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1650329917",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "node_id" : "MDQ6VXNlcjEwOTU2NzU=",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> Concept ACK, but I'm not too sure about the Wtxid type.\r\n\r\nCould you clarify your objections about the `Wtxid` type?  This PR aims to catch type confusion bugs (confusion between txids and wtxids) at compile-time and I don't see how to do that without these explicit types.",
      "created_at" : "2023-07-26T12:51:03Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28107#issuecomment-1651744555",
      "id" : 1651744555,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28107",
      "node_id" : "IC_kwDOABII585ic58r",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1651744555/reactions"
      },
      "updated_at" : "2023-07-26T12:51:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1651744555",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8077169?v=4",
         "events_url" : "https://api.github.com/users/dergoegge/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dergoegge/followers",
         "following_url" : "https://api.github.com/users/dergoegge/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dergoegge/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dergoegge",
         "id" : 8077169,
         "login" : "dergoegge",
         "node_id" : "MDQ6VXNlcjgwNzcxNjk=",
         "organizations_url" : "https://api.github.com/users/dergoegge/orgs",
         "received_events_url" : "https://api.github.com/users/dergoegge/received_events",
         "repos_url" : "https://api.github.com/users/dergoegge/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dergoegge/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dergoegge/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dergoegge"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28107#discussion_r1279068859"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28107"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1279068859"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Is it not possible to replace all of that with just:\r\n\r\n```cpp\r\nclass Txid : public uint256\r\n{\r\n};\r\n\r\nclass Wtxid : public uint256\r\n{\r\n};\r\n```\r\n\r\nIt achieves the purpose of not allowing conversion and comparison between `Txid` and `Wtxid` and each one of them can be treated as `uint256`.",
      "commit_id" : "76fe2c304201646d63b1b01b397e18a99252a2d9",
      "created_at" : "2023-07-31T09:55:41Z",
      "diff_hunk" : "@@ -0,0 +1,54 @@\n+#ifndef BITCOIN_UTIL_TRANSACTION_IDENTIFIER_H\n+#define BITCOIN_UTIL_TRANSACTION_IDENTIFIER_H\n+\n+#include <uint256.h>\n+\n+#include <type_traits>\n+\n+/** transaction_identifier represents the two canonical transaction identifier\n+ * types (txid, wtxid). */\n+template <bool has_witness>\n+class transaction_identifier : public uint256\n+{\n+    static constexpr bool negated_has_witness =\n+        std::negation<std::bool_constant<has_witness>>::value;\n+    using opposite_type =\n+        transaction_identifier<negated_has_witness>;\n+\n+public:\n+    transaction_identifier() : uint256{} {}\n+    explicit transaction_identifier(const uint256& other) : uint256{other} {}\n+    explicit transaction_identifier(const uint256&& other) : uint256{other} {}\n+\n+    // Delete copy/move constructors/assignment for differing transaction_identifier types.\n+    transaction_identifier(const opposite_type&) = delete;\n+    transaction_identifier(opposite_type&&) = delete;\n+    transaction_identifier& operator=(const opposite_type&) = delete;\n+    transaction_identifier& operator=(opposite_type&&) = delete;\n+\n+    // Disallow comparisons between different transaction_identifier types.\n+    friend bool operator==(const transaction_identifier<has_witness>& a,\n+                           const opposite_type& b) = delete;\n+    friend bool operator!=(const transaction_identifier<has_witness>& a,\n+                           const opposite_type& b) = delete;\n+    friend bool operator<(const transaction_identifier<has_witness>& a,\n+                          const opposite_type& b) = delete;\n+    int Compare(const opposite_type&) const = delete;\n+\n+    // Allow comparisons between the same transaction_identifier type.\n+    friend bool operator==(const transaction_identifier<has_witness>& a,\n+                           const transaction_identifier<has_witness>& b) { return a.Compare(b) == 0; }\n+    friend bool operator!=(const transaction_identifier<has_witness>& a,\n+                           const transaction_identifier<has_witness>& b) { return a.Compare(b) != 0; }\n+    friend bool operator<(const transaction_identifier<has_witness>& a,\n+                          const transaction_identifier<has_witness>& b) { return a.Compare(b) < 0; }\n+    constexpr int Compare(const transaction_identifier<has_witness>& other) const { return static_cast<const uint256&>(*this).Compare(other); }\n+};\n+\n+/** Txid commits to all transaction fields except the witness. */\n+using Txid = transaction_identifier<false>;\n+/** Wtxid commits to all transaction fields including the witness. */\n+using Wtxid = transaction_identifier<true>;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28107#discussion_r1279068859",
      "id" : 1279068859,
      "line" : 51,
      "node_id" : "PRRC_kwDOABII585MPQq7",
      "original_commit_id" : "76fe2c304201646d63b1b01b397e18a99252a2d9",
      "original_line" : 51,
      "original_position" : 51,
      "original_start_line" : 8,
      "path" : "src/util/transaction_identifier.h",
      "position" : 51,
      "pull_request_review_id" : 1554400767,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28107",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1279068859/reactions"
      },
      "side" : "RIGHT",
      "start_line" : 8,
      "start_side" : "RIGHT",
      "subject_type" : "line",
      "updated_at" : "2023-07-31T09:55:42Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1279068859",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28107#discussion_r1279109114"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28107"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1279109114"
         }
      },
      "author_association" : "MEMBER",
      "body" : "That is what I originally had in this PR but it actually doesn't achieve the same on all fronts, so I decided to make it explicit to avoid subtle bugs.\r\n\r\ne.g. the following was still permitted:\r\n```c++\r\nTxid txid;\r\nWtxid wtxid{txid};\r\n// or\r\nwtxid.Compare(txid);\r\n// or\r\nbool equal = (wtxid == txid); // same for !=\r\n```",
      "commit_id" : "76fe2c304201646d63b1b01b397e18a99252a2d9",
      "created_at" : "2023-07-31T10:35:17Z",
      "diff_hunk" : "@@ -0,0 +1,54 @@\n+#ifndef BITCOIN_UTIL_TRANSACTION_IDENTIFIER_H\n+#define BITCOIN_UTIL_TRANSACTION_IDENTIFIER_H\n+\n+#include <uint256.h>\n+\n+#include <type_traits>\n+\n+/** transaction_identifier represents the two canonical transaction identifier\n+ * types (txid, wtxid). */\n+template <bool has_witness>\n+class transaction_identifier : public uint256\n+{\n+    static constexpr bool negated_has_witness =\n+        std::negation<std::bool_constant<has_witness>>::value;\n+    using opposite_type =\n+        transaction_identifier<negated_has_witness>;\n+\n+public:\n+    transaction_identifier() : uint256{} {}\n+    explicit transaction_identifier(const uint256& other) : uint256{other} {}\n+    explicit transaction_identifier(const uint256&& other) : uint256{other} {}\n+\n+    // Delete copy/move constructors/assignment for differing transaction_identifier types.\n+    transaction_identifier(const opposite_type&) = delete;\n+    transaction_identifier(opposite_type&&) = delete;\n+    transaction_identifier& operator=(const opposite_type&) = delete;\n+    transaction_identifier& operator=(opposite_type&&) = delete;\n+\n+    // Disallow comparisons between different transaction_identifier types.\n+    friend bool operator==(const transaction_identifier<has_witness>& a,\n+                           const opposite_type& b) = delete;\n+    friend bool operator!=(const transaction_identifier<has_witness>& a,\n+                           const opposite_type& b) = delete;\n+    friend bool operator<(const transaction_identifier<has_witness>& a,\n+                          const opposite_type& b) = delete;\n+    int Compare(const opposite_type&) const = delete;\n+\n+    // Allow comparisons between the same transaction_identifier type.\n+    friend bool operator==(const transaction_identifier<has_witness>& a,\n+                           const transaction_identifier<has_witness>& b) { return a.Compare(b) == 0; }\n+    friend bool operator!=(const transaction_identifier<has_witness>& a,\n+                           const transaction_identifier<has_witness>& b) { return a.Compare(b) != 0; }\n+    friend bool operator<(const transaction_identifier<has_witness>& a,\n+                          const transaction_identifier<has_witness>& b) { return a.Compare(b) < 0; }\n+    constexpr int Compare(const transaction_identifier<has_witness>& other) const { return static_cast<const uint256&>(*this).Compare(other); }\n+};\n+\n+/** Txid commits to all transaction fields except the witness. */\n+using Txid = transaction_identifier<false>;\n+/** Wtxid commits to all transaction fields including the witness. */\n+using Wtxid = transaction_identifier<true>;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28107#discussion_r1279109114",
      "id" : 1279109114,
      "in_reply_to_id" : 1279068859,
      "line" : 51,
      "node_id" : "PRRC_kwDOABII585MPaf6",
      "original_commit_id" : "76fe2c304201646d63b1b01b397e18a99252a2d9",
      "original_line" : 51,
      "original_position" : 51,
      "original_start_line" : 8,
      "path" : "src/util/transaction_identifier.h",
      "position" : 51,
      "pull_request_review_id" : 1554468971,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28107",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1279109114/reactions"
      },
      "side" : "RIGHT",
      "start_line" : 8,
      "start_side" : "RIGHT",
      "subject_type" : "line",
      "updated_at" : "2023-07-31T10:35:17Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1279109114",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8077169?v=4",
         "events_url" : "https://api.github.com/users/dergoegge/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dergoegge/followers",
         "following_url" : "https://api.github.com/users/dergoegge/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dergoegge/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dergoegge",
         "id" : 8077169,
         "login" : "dergoegge",
         "node_id" : "MDQ6VXNlcjgwNzcxNjk=",
         "organizations_url" : "https://api.github.com/users/dergoegge/orgs",
         "received_events_url" : "https://api.github.com/users/dergoegge/received_events",
         "repos_url" : "https://api.github.com/users/dergoegge/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dergoegge/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dergoegge/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dergoegge"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28107#discussion_r1279668749"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28107"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1279668749"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Let's use `Txid` here as well",
      "commit_id" : "76fe2c304201646d63b1b01b397e18a99252a2d9",
      "created_at" : "2023-07-31T17:36:15Z",
      "diff_hunk" : "@@ -20,7 +21,7 @@ bool TxOrphanage::AddTx(const CTransactionRef& tx, NodeId peer)\n {\n     LOCK(m_mutex);\n \n-    const uint256& hash = tx->GetHash();\n+    const auto& hash = tx->GetHash();",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28107#discussion_r1279668749",
      "id" : 1279668749,
      "line" : 24,
      "node_id" : "PRRC_kwDOABII585MRjIN",
      "original_commit_id" : "76fe2c304201646d63b1b01b397e18a99252a2d9",
      "original_line" : 24,
      "original_position" : 13,
      "original_start_line" : null,
      "path" : "src/txorphanage.cpp",
      "position" : 13,
      "pull_request_review_id" : 1555428522,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28107",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1279668749/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-08-03T16:14:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1279668749",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5767891?v=4",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "node_id" : "MDQ6VXNlcjU3Njc4OTE=",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@MarcoFalke could you give this another look? You've done similar work on our time type-safety, so I'd appreciate your feedback.",
      "created_at" : "2023-08-07T13:40:47Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28107#issuecomment-1667881786",
      "id" : 1667881786,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28107",
      "node_id" : "IC_kwDOABII585jads6",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1667881786/reactions"
      },
      "updated_at" : "2023-08-07T13:40:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1667881786",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8077169?v=4",
         "events_url" : "https://api.github.com/users/dergoegge/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dergoegge/followers",
         "following_url" : "https://api.github.com/users/dergoegge/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dergoegge/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dergoegge",
         "id" : 8077169,
         "login" : "dergoegge",
         "node_id" : "MDQ6VXNlcjgwNzcxNjk=",
         "organizations_url" : "https://api.github.com/users/dergoegge/orgs",
         "received_events_url" : "https://api.github.com/users/dergoegge/received_events",
         "repos_url" : "https://api.github.com/users/dergoegge/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dergoegge/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dergoegge/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dergoegge"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28107#discussion_r1285950696"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28107"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1285950696"
         }
      },
      "author_association" : "MEMBER",
      "body" : "```\r\n<stdin>:66: new blank line at EOF.\r\n+\r\nwarning: 1 line adds whitespace errors.\r\n",
      "commit_id" : "76fe2c304201646d63b1b01b397e18a99252a2d9",
      "created_at" : "2023-08-07T14:28:29Z",
      "diff_hunk" : "@@ -0,0 +1,54 @@\n+#ifndef BITCOIN_UTIL_TRANSACTION_IDENTIFIER_H\n+#define BITCOIN_UTIL_TRANSACTION_IDENTIFIER_H\n+\n+#include <uint256.h>\n+\n+#include <type_traits>\n+\n+/** transaction_identifier represents the two canonical transaction identifier\n+ * types (txid, wtxid). */\n+template <bool has_witness>\n+class transaction_identifier : public uint256\n+{\n+    static constexpr bool negated_has_witness =\n+        std::negation<std::bool_constant<has_witness>>::value;\n+    using opposite_type =\n+        transaction_identifier<negated_has_witness>;\n+\n+public:\n+    transaction_identifier() : uint256{} {}\n+    explicit transaction_identifier(const uint256& other) : uint256{other} {}\n+    explicit transaction_identifier(const uint256&& other) : uint256{other} {}\n+\n+    // Delete copy/move constructors/assignment for differing transaction_identifier types.\n+    transaction_identifier(const opposite_type&) = delete;\n+    transaction_identifier(opposite_type&&) = delete;\n+    transaction_identifier& operator=(const opposite_type&) = delete;\n+    transaction_identifier& operator=(opposite_type&&) = delete;\n+\n+    // Disallow comparisons between different transaction_identifier types.\n+    friend bool operator==(const transaction_identifier<has_witness>& a,\n+                           const opposite_type& b) = delete;\n+    friend bool operator!=(const transaction_identifier<has_witness>& a,\n+                           const opposite_type& b) = delete;\n+    friend bool operator<(const transaction_identifier<has_witness>& a,\n+                          const opposite_type& b) = delete;\n+    int Compare(const opposite_type&) const = delete;\n+\n+    // Allow comparisons between the same transaction_identifier type.\n+    friend bool operator==(const transaction_identifier<has_witness>& a,\n+                           const transaction_identifier<has_witness>& b) { return a.Compare(b) == 0; }\n+    friend bool operator!=(const transaction_identifier<has_witness>& a,\n+                           const transaction_identifier<has_witness>& b) { return a.Compare(b) != 0; }\n+    friend bool operator<(const transaction_identifier<has_witness>& a,\n+                          const transaction_identifier<has_witness>& b) { return a.Compare(b) < 0; }\n+    constexpr int Compare(const transaction_identifier<has_witness>& other) const { return static_cast<const uint256&>(*this).Compare(other); }\n+};\n+\n+/** Txid commits to all transaction fields except the witness. */\n+using Txid = transaction_identifier<false>;\n+/** Wtxid commits to all transaction fields including the witness. */\n+using Wtxid = transaction_identifier<true>;\n+\n+#endif // BITCOIN_UTIL_TRANSACTION_IDENTIFIER_H\n+",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28107#discussion_r1285950696",
      "id" : 1285950696,
      "line" : 54,
      "node_id" : "PRRC_kwDOABII585Mpgzo",
      "original_commit_id" : "db8d42b562d24ff01c8ccc6dc9a18630640310f9",
      "original_line" : 54,
      "original_position" : 54,
      "original_start_line" : null,
      "path" : "src/util/transaction_identifier.h",
      "position" : 54,
      "pull_request_review_id" : 1565463240,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28107",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1285950696/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-08-07T14:45:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1285950696",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28107#discussion_r1285956464"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28107"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1285956464"
         }
      },
      "author_association" : "MEMBER",
      "body" : "The \"opposite\" type would be *any* type other than the type itself. For example, currently it is possible to compare `uint256` (a txid) with Wtxid, or `uint256` (a wtxid) with `Txid`.",
      "commit_id" : "76fe2c304201646d63b1b01b397e18a99252a2d9",
      "created_at" : "2023-08-07T14:32:57Z",
      "diff_hunk" : "@@ -0,0 +1,54 @@\n+#ifndef BITCOIN_UTIL_TRANSACTION_IDENTIFIER_H\n+#define BITCOIN_UTIL_TRANSACTION_IDENTIFIER_H\n+\n+#include <uint256.h>\n+\n+#include <type_traits>\n+\n+/** transaction_identifier represents the two canonical transaction identifier\n+ * types (txid, wtxid). */\n+template <bool has_witness>\n+class transaction_identifier : public uint256\n+{\n+    static constexpr bool negated_has_witness =\n+        std::negation<std::bool_constant<has_witness>>::value;\n+    using opposite_type =\n+        transaction_identifier<negated_has_witness>;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28107#discussion_r1285956464",
      "id" : 1285956464,
      "line" : 16,
      "node_id" : "PRRC_kwDOABII585MpiNw",
      "original_commit_id" : "db8d42b562d24ff01c8ccc6dc9a18630640310f9",
      "original_line" : 16,
      "original_position" : 16,
      "original_start_line" : null,
      "path" : "src/util/transaction_identifier.h",
      "position" : 16,
      "pull_request_review_id" : 1565463240,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28107",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1285956464/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-08-07T14:45:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1285956464",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28107#discussion_r1285964524"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28107"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1285964524"
         }
      },
      "author_association" : "MEMBER",
      "body" : "What is this and how does this even compile? I presume `const uint256&&` decays into `const uint256&`, but that already exists??\r\n\r\nWould be better to just remove this line, unless there is a reason to do add a line here.",
      "commit_id" : "76fe2c304201646d63b1b01b397e18a99252a2d9",
      "created_at" : "2023-08-07T14:36:41Z",
      "diff_hunk" : "@@ -0,0 +1,54 @@\n+#ifndef BITCOIN_UTIL_TRANSACTION_IDENTIFIER_H\n+#define BITCOIN_UTIL_TRANSACTION_IDENTIFIER_H\n+\n+#include <uint256.h>\n+\n+#include <type_traits>\n+\n+/** transaction_identifier represents the two canonical transaction identifier\n+ * types (txid, wtxid). */\n+template <bool has_witness>\n+class transaction_identifier : public uint256\n+{\n+    static constexpr bool negated_has_witness =\n+        std::negation<std::bool_constant<has_witness>>::value;\n+    using opposite_type =\n+        transaction_identifier<negated_has_witness>;\n+\n+public:\n+    transaction_identifier() : uint256{} {}\n+    explicit transaction_identifier(const uint256& other) : uint256{other} {}\n+    explicit transaction_identifier(const uint256&& other) : uint256{other} {}",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28107#discussion_r1285964524",
      "id" : 1285964524,
      "line" : 21,
      "node_id" : "PRRC_kwDOABII585MpkLs",
      "original_commit_id" : "db8d42b562d24ff01c8ccc6dc9a18630640310f9",
      "original_line" : 21,
      "original_position" : 21,
      "original_start_line" : null,
      "path" : "src/util/transaction_identifier.h",
      "position" : 21,
      "pull_request_review_id" : 1565463240,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28107",
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1285964524/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-08-07T14:45:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1285964524",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28107#discussion_r1285972399"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28107"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1285972399"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Any reason to delete these? The compiler already has them deleted and provides a better error message than yours: `candidate function (the implicit move assignment operator) not viable: no known conversion from 'transaction_identifier<true>' to 'transaction_identifier<false>' for 1st argument`.\r\n\r\nWould be better to just remove those lines, unless there is a reason to do add lines here.",
      "commit_id" : "76fe2c304201646d63b1b01b397e18a99252a2d9",
      "created_at" : "2023-08-07T14:40:32Z",
      "diff_hunk" : "@@ -0,0 +1,54 @@\n+#ifndef BITCOIN_UTIL_TRANSACTION_IDENTIFIER_H\n+#define BITCOIN_UTIL_TRANSACTION_IDENTIFIER_H\n+\n+#include <uint256.h>\n+\n+#include <type_traits>\n+\n+/** transaction_identifier represents the two canonical transaction identifier\n+ * types (txid, wtxid). */\n+template <bool has_witness>\n+class transaction_identifier : public uint256\n+{\n+    static constexpr bool negated_has_witness =\n+        std::negation<std::bool_constant<has_witness>>::value;\n+    using opposite_type =\n+        transaction_identifier<negated_has_witness>;\n+\n+public:\n+    transaction_identifier() : uint256{} {}\n+    explicit transaction_identifier(const uint256& other) : uint256{other} {}\n+    explicit transaction_identifier(const uint256&& other) : uint256{other} {}\n+\n+    // Delete copy/move constructors/assignment for differing transaction_identifier types.\n+    transaction_identifier(const opposite_type&) = delete;\n+    transaction_identifier(opposite_type&&) = delete;\n+    transaction_identifier& operator=(const opposite_type&) = delete;\n+    transaction_identifier& operator=(opposite_type&&) = delete;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28107#discussion_r1285972399",
      "id" : 1285972399,
      "line" : 27,
      "node_id" : "PRRC_kwDOABII585MpmGv",
      "original_commit_id" : "db8d42b562d24ff01c8ccc6dc9a18630640310f9",
      "original_line" : 27,
      "original_position" : 27,
      "original_start_line" : null,
      "path" : "src/util/transaction_identifier.h",
      "position" : 27,
      "pull_request_review_id" : 1565463240,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28107",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1285972399/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-08-07T14:45:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1285972399",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28107#discussion_r1285972674"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28107"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1285972674"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Same?",
      "commit_id" : "76fe2c304201646d63b1b01b397e18a99252a2d9",
      "created_at" : "2023-08-07T14:40:44Z",
      "diff_hunk" : "@@ -0,0 +1,54 @@\n+#ifndef BITCOIN_UTIL_TRANSACTION_IDENTIFIER_H\n+#define BITCOIN_UTIL_TRANSACTION_IDENTIFIER_H\n+\n+#include <uint256.h>\n+\n+#include <type_traits>\n+\n+/** transaction_identifier represents the two canonical transaction identifier\n+ * types (txid, wtxid). */\n+template <bool has_witness>\n+class transaction_identifier : public uint256\n+{\n+    static constexpr bool negated_has_witness =\n+        std::negation<std::bool_constant<has_witness>>::value;\n+    using opposite_type =\n+        transaction_identifier<negated_has_witness>;\n+\n+public:\n+    transaction_identifier() : uint256{} {}\n+    explicit transaction_identifier(const uint256& other) : uint256{other} {}\n+    explicit transaction_identifier(const uint256&& other) : uint256{other} {}\n+\n+    // Delete copy/move constructors/assignment for differing transaction_identifier types.\n+    transaction_identifier(const opposite_type&) = delete;\n+    transaction_identifier(opposite_type&&) = delete;\n+    transaction_identifier& operator=(const opposite_type&) = delete;\n+    transaction_identifier& operator=(opposite_type&&) = delete;\n+\n+    // Disallow comparisons between different transaction_identifier types.\n+    friend bool operator==(const transaction_identifier<has_witness>& a,\n+                           const opposite_type& b) = delete;\n+    friend bool operator!=(const transaction_identifier<has_witness>& a,\n+                           const opposite_type& b) = delete;\n+    friend bool operator<(const transaction_identifier<has_witness>& a,\n+                          const opposite_type& b) = delete;\n+    int Compare(const opposite_type&) const = delete;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28107#discussion_r1285972674",
      "id" : 1285972674,
      "line" : 36,
      "node_id" : "PRRC_kwDOABII585MpmLC",
      "original_commit_id" : "db8d42b562d24ff01c8ccc6dc9a18630640310f9",
      "original_line" : 36,
      "original_position" : 36,
      "original_start_line" : null,
      "path" : "src/util/transaction_identifier.h",
      "position" : 36,
      "pull_request_review_id" : 1565463240,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28107",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1285972674/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-08-07T14:45:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1285972674",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28107#discussion_r1285978619"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28107"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1285978619"
         }
      },
      "author_association" : "MEMBER",
      "body" : "nit: Any reason to use static_cast when reinterpret_cast can be used? (`reinterpret_cast` is guaranteed to always be compiled to a noop)",
      "commit_id" : "76fe2c304201646d63b1b01b397e18a99252a2d9",
      "created_at" : "2023-08-07T14:44:37Z",
      "diff_hunk" : "@@ -0,0 +1,54 @@\n+#ifndef BITCOIN_UTIL_TRANSACTION_IDENTIFIER_H\n+#define BITCOIN_UTIL_TRANSACTION_IDENTIFIER_H\n+\n+#include <uint256.h>\n+\n+#include <type_traits>\n+\n+/** transaction_identifier represents the two canonical transaction identifier\n+ * types (txid, wtxid). */\n+template <bool has_witness>\n+class transaction_identifier : public uint256\n+{\n+    static constexpr bool negated_has_witness =\n+        std::negation<std::bool_constant<has_witness>>::value;\n+    using opposite_type =\n+        transaction_identifier<negated_has_witness>;\n+\n+public:\n+    transaction_identifier() : uint256{} {}\n+    explicit transaction_identifier(const uint256& other) : uint256{other} {}\n+    explicit transaction_identifier(const uint256&& other) : uint256{other} {}\n+\n+    // Delete copy/move constructors/assignment for differing transaction_identifier types.\n+    transaction_identifier(const opposite_type&) = delete;\n+    transaction_identifier(opposite_type&&) = delete;\n+    transaction_identifier& operator=(const opposite_type&) = delete;\n+    transaction_identifier& operator=(opposite_type&&) = delete;\n+\n+    // Disallow comparisons between different transaction_identifier types.\n+    friend bool operator==(const transaction_identifier<has_witness>& a,\n+                           const opposite_type& b) = delete;\n+    friend bool operator!=(const transaction_identifier<has_witness>& a,\n+                           const opposite_type& b) = delete;\n+    friend bool operator<(const transaction_identifier<has_witness>& a,\n+                          const opposite_type& b) = delete;\n+    int Compare(const opposite_type&) const = delete;\n+\n+    // Allow comparisons between the same transaction_identifier type.\n+    friend bool operator==(const transaction_identifier<has_witness>& a,\n+                           const transaction_identifier<has_witness>& b) { return a.Compare(b) == 0; }\n+    friend bool operator!=(const transaction_identifier<has_witness>& a,\n+                           const transaction_identifier<has_witness>& b) { return a.Compare(b) != 0; }\n+    friend bool operator<(const transaction_identifier<has_witness>& a,\n+                          const transaction_identifier<has_witness>& b) { return a.Compare(b) < 0; }\n+    constexpr int Compare(const transaction_identifier<has_witness>& other) const { return static_cast<const uint256&>(*this).Compare(other); }",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28107#discussion_r1285978619",
      "id" : 1285978619,
      "line" : 45,
      "node_id" : "PRRC_kwDOABII585Mpnn7",
      "original_commit_id" : "db8d42b562d24ff01c8ccc6dc9a18630640310f9",
      "original_line" : 45,
      "original_position" : 45,
      "original_start_line" : null,
      "path" : "src/util/transaction_identifier.h",
      "position" : 45,
      "pull_request_review_id" : 1565463240,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28107",
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1285978619/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-08-07T14:45:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1285978619",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28107#discussion_r1286929692"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28107"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1286929692"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I'm OK with going either way but disallowing uint256 comparisons in this PR causes a lot of churn, i.e. going around casting all the uint256 to the right type. Most of these casts would later be reverted in follow up PRs that convert more things to use the new types (e.g. mempool, net processing, wallet).\r\n\r\nI think I'd prefer doing the switch to the new type system first and then disallowing uint256 comparisons afterwards. What do you think?",
      "commit_id" : "76fe2c304201646d63b1b01b397e18a99252a2d9",
      "created_at" : "2023-08-08T10:33:01Z",
      "diff_hunk" : "@@ -0,0 +1,54 @@\n+#ifndef BITCOIN_UTIL_TRANSACTION_IDENTIFIER_H\n+#define BITCOIN_UTIL_TRANSACTION_IDENTIFIER_H\n+\n+#include <uint256.h>\n+\n+#include <type_traits>\n+\n+/** transaction_identifier represents the two canonical transaction identifier\n+ * types (txid, wtxid). */\n+template <bool has_witness>\n+class transaction_identifier : public uint256\n+{\n+    static constexpr bool negated_has_witness =\n+        std::negation<std::bool_constant<has_witness>>::value;\n+    using opposite_type =\n+        transaction_identifier<negated_has_witness>;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28107#discussion_r1286929692",
      "id" : 1286929692,
      "in_reply_to_id" : 1285956464,
      "line" : 16,
      "node_id" : "PRRC_kwDOABII585MtP0c",
      "original_commit_id" : "db8d42b562d24ff01c8ccc6dc9a18630640310f9",
      "original_line" : 16,
      "original_position" : 16,
      "original_start_line" : null,
      "path" : "src/util/transaction_identifier.h",
      "position" : 16,
      "pull_request_review_id" : 1567000256,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28107",
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1286929692/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-08-08T10:33:02Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1286929692",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8077169?v=4",
         "events_url" : "https://api.github.com/users/dergoegge/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dergoegge/followers",
         "following_url" : "https://api.github.com/users/dergoegge/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dergoegge/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dergoegge",
         "id" : 8077169,
         "login" : "dergoegge",
         "node_id" : "MDQ6VXNlcjgwNzcxNjk=",
         "organizations_url" : "https://api.github.com/users/dergoegge/orgs",
         "received_events_url" : "https://api.github.com/users/dergoegge/received_events",
         "repos_url" : "https://api.github.com/users/dergoegge/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dergoegge/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dergoegge/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dergoegge"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28107#discussion_r1286931397"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28107"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1286931397"
         }
      },
      "author_association" : "MEMBER",
      "body" : "No opinion. I just wanted to mention that this is not type safe and maybe other reviewers would want to know too?",
      "commit_id" : "76fe2c304201646d63b1b01b397e18a99252a2d9",
      "created_at" : "2023-08-08T10:34:44Z",
      "diff_hunk" : "@@ -0,0 +1,54 @@\n+#ifndef BITCOIN_UTIL_TRANSACTION_IDENTIFIER_H\n+#define BITCOIN_UTIL_TRANSACTION_IDENTIFIER_H\n+\n+#include <uint256.h>\n+\n+#include <type_traits>\n+\n+/** transaction_identifier represents the two canonical transaction identifier\n+ * types (txid, wtxid). */\n+template <bool has_witness>\n+class transaction_identifier : public uint256\n+{\n+    static constexpr bool negated_has_witness =\n+        std::negation<std::bool_constant<has_witness>>::value;\n+    using opposite_type =\n+        transaction_identifier<negated_has_witness>;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28107#discussion_r1286931397",
      "id" : 1286931397,
      "in_reply_to_id" : 1285956464,
      "line" : 16,
      "node_id" : "PRRC_kwDOABII585MtQPF",
      "original_commit_id" : "db8d42b562d24ff01c8ccc6dc9a18630640310f9",
      "original_line" : 16,
      "original_position" : 16,
      "original_start_line" : null,
      "path" : "src/util/transaction_identifier.h",
      "position" : 16,
      "pull_request_review_id" : 1567003069,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28107",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1286931397/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-08-08T10:34:45Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1286931397",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28107#discussion_r1286935288"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28107"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1286935288"
         }
      },
      "author_association" : "MEMBER",
      "body" : "> The \"opposite\" type would be any type other than the type itself.\r\n\r\nI meant opposite w.r.t `has_witness`, if you have a better name in mind, let me know.\r\n\r\n> I just wanted to mention that this is not type safe and maybe other reviewers would want to know too?\r\n\r\nI'll just add a todo comment about uint256 comparisons.",
      "commit_id" : "76fe2c304201646d63b1b01b397e18a99252a2d9",
      "created_at" : "2023-08-08T10:38:49Z",
      "diff_hunk" : "@@ -0,0 +1,54 @@\n+#ifndef BITCOIN_UTIL_TRANSACTION_IDENTIFIER_H\n+#define BITCOIN_UTIL_TRANSACTION_IDENTIFIER_H\n+\n+#include <uint256.h>\n+\n+#include <type_traits>\n+\n+/** transaction_identifier represents the two canonical transaction identifier\n+ * types (txid, wtxid). */\n+template <bool has_witness>\n+class transaction_identifier : public uint256\n+{\n+    static constexpr bool negated_has_witness =\n+        std::negation<std::bool_constant<has_witness>>::value;\n+    using opposite_type =\n+        transaction_identifier<negated_has_witness>;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28107#discussion_r1286935288",
      "id" : 1286935288,
      "in_reply_to_id" : 1285956464,
      "line" : 16,
      "node_id" : "PRRC_kwDOABII585MtRL4",
      "original_commit_id" : "db8d42b562d24ff01c8ccc6dc9a18630640310f9",
      "original_line" : 16,
      "original_position" : 16,
      "original_start_line" : null,
      "path" : "src/util/transaction_identifier.h",
      "position" : 16,
      "pull_request_review_id" : 1567009182,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28107",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1286935288/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-08-08T10:38:49Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1286935288",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8077169?v=4",
         "events_url" : "https://api.github.com/users/dergoegge/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dergoegge/followers",
         "following_url" : "https://api.github.com/users/dergoegge/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dergoegge/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dergoegge",
         "id" : 8077169,
         "login" : "dergoegge",
         "node_id" : "MDQ6VXNlcjgwNzcxNjk=",
         "organizations_url" : "https://api.github.com/users/dergoegge/orgs",
         "received_events_url" : "https://api.github.com/users/dergoegge/received_events",
         "repos_url" : "https://api.github.com/users/dergoegge/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dergoegge/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dergoegge/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dergoegge"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28107#discussion_r1286938038"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28107"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1286938038"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Maybe something like this: (no idea if it compiles):\r\n\r\n```cpp\r\ntemplate<typename Other>\r\nconstexpr int Compare(const Other& other) const {\r\nif contexpr (std::is_same_v<Other, uint256> || \\\\ TODO remove this\r\nstd::is_save_v<Other, transaction_identifier<has_witness>>\r\n){\r\nreturn reinterpret_cast<const uint256&>(*this).Compare(other);\r\n}else{\r\nstatic_assert(ALWAYS_FALSE<Other>, \"Forbidden comparison type\");\r\n}\r\n}",
      "commit_id" : "76fe2c304201646d63b1b01b397e18a99252a2d9",
      "created_at" : "2023-08-08T10:41:40Z",
      "diff_hunk" : "@@ -0,0 +1,54 @@\n+#ifndef BITCOIN_UTIL_TRANSACTION_IDENTIFIER_H\n+#define BITCOIN_UTIL_TRANSACTION_IDENTIFIER_H\n+\n+#include <uint256.h>\n+\n+#include <type_traits>\n+\n+/** transaction_identifier represents the two canonical transaction identifier\n+ * types (txid, wtxid). */\n+template <bool has_witness>\n+class transaction_identifier : public uint256\n+{\n+    static constexpr bool negated_has_witness =\n+        std::negation<std::bool_constant<has_witness>>::value;\n+    using opposite_type =\n+        transaction_identifier<negated_has_witness>;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28107#discussion_r1286938038",
      "id" : 1286938038,
      "in_reply_to_id" : 1285956464,
      "line" : 16,
      "node_id" : "PRRC_kwDOABII585MtR22",
      "original_commit_id" : "db8d42b562d24ff01c8ccc6dc9a18630640310f9",
      "original_line" : 16,
      "original_position" : 16,
      "original_start_line" : null,
      "path" : "src/util/transaction_identifier.h",
      "position" : 16,
      "pull_request_review_id" : 1567013453,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28107",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 1,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1286938038/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-08-08T10:41:40Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1286938038",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28107#discussion_r1287123567"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28107"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1287123567"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Yea that works, applied in the latest push",
      "commit_id" : "c1f9c3b28b3d657f56386b9602a33d1a2fc1ed97",
      "created_at" : "2023-08-08T13:30:36Z",
      "diff_hunk" : "@@ -0,0 +1,54 @@\n+#ifndef BITCOIN_UTIL_TRANSACTION_IDENTIFIER_H\n+#define BITCOIN_UTIL_TRANSACTION_IDENTIFIER_H\n+\n+#include <uint256.h>\n+\n+#include <type_traits>\n+\n+/** transaction_identifier represents the two canonical transaction identifier\n+ * types (txid, wtxid). */\n+template <bool has_witness>\n+class transaction_identifier : public uint256\n+{\n+    static constexpr bool negated_has_witness =\n+        std::negation<std::bool_constant<has_witness>>::value;\n+    using opposite_type =\n+        transaction_identifier<negated_has_witness>;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28107#discussion_r1287123567",
      "id" : 1287123567,
      "in_reply_to_id" : 1285956464,
      "line" : 18,
      "node_id" : "PRRC_kwDOABII585Mt_Jv",
      "original_commit_id" : "db8d42b562d24ff01c8ccc6dc9a18630640310f9",
      "original_line" : 18,
      "original_position" : 16,
      "original_start_line" : null,
      "path" : "src/util/transaction_identifier.h",
      "position" : 18,
      "pull_request_review_id" : 1567310021,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28107",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1287123567/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-08-08T13:30:36Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1287123567",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8077169?v=4",
         "events_url" : "https://api.github.com/users/dergoegge/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dergoegge/followers",
         "following_url" : "https://api.github.com/users/dergoegge/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dergoegge/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dergoegge",
         "id" : 8077169,
         "login" : "dergoegge",
         "node_id" : "MDQ6VXNlcjgwNzcxNjk=",
         "organizations_url" : "https://api.github.com/users/dergoegge/orgs",
         "received_events_url" : "https://api.github.com/users/dergoegge/received_events",
         "repos_url" : "https://api.github.com/users/dergoegge/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dergoegge/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dergoegge/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dergoegge"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28107#discussion_r1287123814"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28107"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1287123814"
         }
      },
      "author_association" : "MEMBER",
      "body" : "removed",
      "commit_id" : "c1f9c3b28b3d657f56386b9602a33d1a2fc1ed97",
      "created_at" : "2023-08-08T13:30:47Z",
      "diff_hunk" : "@@ -0,0 +1,54 @@\n+#ifndef BITCOIN_UTIL_TRANSACTION_IDENTIFIER_H\n+#define BITCOIN_UTIL_TRANSACTION_IDENTIFIER_H\n+\n+#include <uint256.h>\n+\n+#include <type_traits>\n+\n+/** transaction_identifier represents the two canonical transaction identifier\n+ * types (txid, wtxid). */\n+template <bool has_witness>\n+class transaction_identifier : public uint256\n+{\n+    static constexpr bool negated_has_witness =\n+        std::negation<std::bool_constant<has_witness>>::value;\n+    using opposite_type =\n+        transaction_identifier<negated_has_witness>;\n+\n+public:\n+    transaction_identifier() : uint256{} {}\n+    explicit transaction_identifier(const uint256& other) : uint256{other} {}\n+    explicit transaction_identifier(const uint256&& other) : uint256{other} {}",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28107#discussion_r1287123814",
      "id" : 1287123814,
      "in_reply_to_id" : 1285964524,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585Mt_Nm",
      "original_commit_id" : "db8d42b562d24ff01c8ccc6dc9a18630640310f9",
      "original_line" : 21,
      "original_position" : 21,
      "original_start_line" : null,
      "path" : "src/util/transaction_identifier.h",
      "position" : null,
      "pull_request_review_id" : 1567310410,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28107",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1287123814/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-08-08T13:30:48Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1287123814",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8077169?v=4",
         "events_url" : "https://api.github.com/users/dergoegge/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dergoegge/followers",
         "following_url" : "https://api.github.com/users/dergoegge/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dergoegge/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dergoegge",
         "id" : 8077169,
         "login" : "dergoegge",
         "node_id" : "MDQ6VXNlcjgwNzcxNjk=",
         "organizations_url" : "https://api.github.com/users/dergoegge/orgs",
         "received_events_url" : "https://api.github.com/users/dergoegge/received_events",
         "repos_url" : "https://api.github.com/users/dergoegge/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dergoegge/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dergoegge/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dergoegge"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28107#discussion_r1287124882"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28107"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1287124882"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I kinda like making this explicit but the assignment operators are not necessary so i removed them",
      "commit_id" : "c1f9c3b28b3d657f56386b9602a33d1a2fc1ed97",
      "created_at" : "2023-08-08T13:31:36Z",
      "diff_hunk" : "@@ -0,0 +1,54 @@\n+#ifndef BITCOIN_UTIL_TRANSACTION_IDENTIFIER_H\n+#define BITCOIN_UTIL_TRANSACTION_IDENTIFIER_H\n+\n+#include <uint256.h>\n+\n+#include <type_traits>\n+\n+/** transaction_identifier represents the two canonical transaction identifier\n+ * types (txid, wtxid). */\n+template <bool has_witness>\n+class transaction_identifier : public uint256\n+{\n+    static constexpr bool negated_has_witness =\n+        std::negation<std::bool_constant<has_witness>>::value;\n+    using opposite_type =\n+        transaction_identifier<negated_has_witness>;\n+\n+public:\n+    transaction_identifier() : uint256{} {}\n+    explicit transaction_identifier(const uint256& other) : uint256{other} {}\n+    explicit transaction_identifier(const uint256&& other) : uint256{other} {}\n+\n+    // Delete copy/move constructors/assignment for differing transaction_identifier types.\n+    transaction_identifier(const opposite_type&) = delete;\n+    transaction_identifier(opposite_type&&) = delete;\n+    transaction_identifier& operator=(const opposite_type&) = delete;\n+    transaction_identifier& operator=(opposite_type&&) = delete;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28107#discussion_r1287124882",
      "id" : 1287124882,
      "in_reply_to_id" : 1285972399,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585Mt_eS",
      "original_commit_id" : "db8d42b562d24ff01c8ccc6dc9a18630640310f9",
      "original_line" : 27,
      "original_position" : 27,
      "original_start_line" : null,
      "path" : "src/util/transaction_identifier.h",
      "position" : null,
      "pull_request_review_id" : 1567312217,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28107",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1287124882/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-08-08T13:31:36Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1287124882",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8077169?v=4",
         "events_url" : "https://api.github.com/users/dergoegge/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dergoegge/followers",
         "following_url" : "https://api.github.com/users/dergoegge/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dergoegge/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dergoegge",
         "id" : 8077169,
         "login" : "dergoegge",
         "node_id" : "MDQ6VXNlcjgwNzcxNjk=",
         "organizations_url" : "https://api.github.com/users/dergoegge/orgs",
         "received_events_url" : "https://api.github.com/users/dergoegge/received_events",
         "repos_url" : "https://api.github.com/users/dergoegge/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dergoegge/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dergoegge/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dergoegge"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28107#discussion_r1287125133"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28107"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1287125133"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Done",
      "commit_id" : "c1f9c3b28b3d657f56386b9602a33d1a2fc1ed97",
      "created_at" : "2023-08-08T13:31:43Z",
      "diff_hunk" : "@@ -0,0 +1,54 @@\n+#ifndef BITCOIN_UTIL_TRANSACTION_IDENTIFIER_H\n+#define BITCOIN_UTIL_TRANSACTION_IDENTIFIER_H\n+\n+#include <uint256.h>\n+\n+#include <type_traits>\n+\n+/** transaction_identifier represents the two canonical transaction identifier\n+ * types (txid, wtxid). */\n+template <bool has_witness>\n+class transaction_identifier : public uint256\n+{\n+    static constexpr bool negated_has_witness =\n+        std::negation<std::bool_constant<has_witness>>::value;\n+    using opposite_type =\n+        transaction_identifier<negated_has_witness>;\n+\n+public:\n+    transaction_identifier() : uint256{} {}\n+    explicit transaction_identifier(const uint256& other) : uint256{other} {}\n+    explicit transaction_identifier(const uint256&& other) : uint256{other} {}\n+\n+    // Delete copy/move constructors/assignment for differing transaction_identifier types.\n+    transaction_identifier(const opposite_type&) = delete;\n+    transaction_identifier(opposite_type&&) = delete;\n+    transaction_identifier& operator=(const opposite_type&) = delete;\n+    transaction_identifier& operator=(opposite_type&&) = delete;\n+\n+    // Disallow comparisons between different transaction_identifier types.\n+    friend bool operator==(const transaction_identifier<has_witness>& a,\n+                           const opposite_type& b) = delete;\n+    friend bool operator!=(const transaction_identifier<has_witness>& a,\n+                           const opposite_type& b) = delete;\n+    friend bool operator<(const transaction_identifier<has_witness>& a,\n+                          const opposite_type& b) = delete;\n+    int Compare(const opposite_type&) const = delete;\n+\n+    // Allow comparisons between the same transaction_identifier type.\n+    friend bool operator==(const transaction_identifier<has_witness>& a,\n+                           const transaction_identifier<has_witness>& b) { return a.Compare(b) == 0; }\n+    friend bool operator!=(const transaction_identifier<has_witness>& a,\n+                           const transaction_identifier<has_witness>& b) { return a.Compare(b) != 0; }\n+    friend bool operator<(const transaction_identifier<has_witness>& a,\n+                          const transaction_identifier<has_witness>& b) { return a.Compare(b) < 0; }\n+    constexpr int Compare(const transaction_identifier<has_witness>& other) const { return static_cast<const uint256&>(*this).Compare(other); }",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28107#discussion_r1287125133",
      "id" : 1287125133,
      "in_reply_to_id" : 1285978619,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585Mt_iN",
      "original_commit_id" : "db8d42b562d24ff01c8ccc6dc9a18630640310f9",
      "original_line" : 45,
      "original_position" : 45,
      "original_start_line" : null,
      "path" : "src/util/transaction_identifier.h",
      "position" : null,
      "pull_request_review_id" : 1567312661,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28107",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1287125133/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-08-08T13:31:45Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1287125133",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8077169?v=4",
         "events_url" : "https://api.github.com/users/dergoegge/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dergoegge/followers",
         "following_url" : "https://api.github.com/users/dergoegge/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dergoegge/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dergoegge",
         "id" : 8077169,
         "login" : "dergoegge",
         "node_id" : "MDQ6VXNlcjgwNzcxNjk=",
         "organizations_url" : "https://api.github.com/users/dergoegge/orgs",
         "received_events_url" : "https://api.github.com/users/dergoegge/received_events",
         "repos_url" : "https://api.github.com/users/dergoegge/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dergoegge/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dergoegge/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dergoegge"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28107#discussion_r1287125465"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28107"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1287125465"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Done",
      "commit_id" : "c1f9c3b28b3d657f56386b9602a33d1a2fc1ed97",
      "created_at" : "2023-08-08T13:31:53Z",
      "diff_hunk" : "@@ -0,0 +1,54 @@\n+#ifndef BITCOIN_UTIL_TRANSACTION_IDENTIFIER_H\n+#define BITCOIN_UTIL_TRANSACTION_IDENTIFIER_H\n+\n+#include <uint256.h>\n+\n+#include <type_traits>\n+\n+/** transaction_identifier represents the two canonical transaction identifier\n+ * types (txid, wtxid). */\n+template <bool has_witness>\n+class transaction_identifier : public uint256\n+{\n+    static constexpr bool negated_has_witness =\n+        std::negation<std::bool_constant<has_witness>>::value;\n+    using opposite_type =\n+        transaction_identifier<negated_has_witness>;\n+\n+public:\n+    transaction_identifier() : uint256{} {}\n+    explicit transaction_identifier(const uint256& other) : uint256{other} {}\n+    explicit transaction_identifier(const uint256&& other) : uint256{other} {}\n+\n+    // Delete copy/move constructors/assignment for differing transaction_identifier types.\n+    transaction_identifier(const opposite_type&) = delete;\n+    transaction_identifier(opposite_type&&) = delete;\n+    transaction_identifier& operator=(const opposite_type&) = delete;\n+    transaction_identifier& operator=(opposite_type&&) = delete;\n+\n+    // Disallow comparisons between different transaction_identifier types.\n+    friend bool operator==(const transaction_identifier<has_witness>& a,\n+                           const opposite_type& b) = delete;\n+    friend bool operator!=(const transaction_identifier<has_witness>& a,\n+                           const opposite_type& b) = delete;\n+    friend bool operator<(const transaction_identifier<has_witness>& a,\n+                          const opposite_type& b) = delete;\n+    int Compare(const opposite_type&) const = delete;\n+\n+    // Allow comparisons between the same transaction_identifier type.\n+    friend bool operator==(const transaction_identifier<has_witness>& a,\n+                           const transaction_identifier<has_witness>& b) { return a.Compare(b) == 0; }\n+    friend bool operator!=(const transaction_identifier<has_witness>& a,\n+                           const transaction_identifier<has_witness>& b) { return a.Compare(b) != 0; }\n+    friend bool operator<(const transaction_identifier<has_witness>& a,\n+                          const transaction_identifier<has_witness>& b) { return a.Compare(b) < 0; }\n+    constexpr int Compare(const transaction_identifier<has_witness>& other) const { return static_cast<const uint256&>(*this).Compare(other); }\n+};\n+\n+/** Txid commits to all transaction fields except the witness. */\n+using Txid = transaction_identifier<false>;\n+/** Wtxid commits to all transaction fields including the witness. */\n+using Wtxid = transaction_identifier<true>;\n+\n+#endif // BITCOIN_UTIL_TRANSACTION_IDENTIFIER_H\n+",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28107#discussion_r1287125465",
      "id" : 1287125465,
      "in_reply_to_id" : 1285950696,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585Mt_nZ",
      "original_commit_id" : "db8d42b562d24ff01c8ccc6dc9a18630640310f9",
      "original_line" : 54,
      "original_position" : 54,
      "original_start_line" : null,
      "path" : "src/util/transaction_identifier.h",
      "position" : null,
      "pull_request_review_id" : 1567313341,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28107",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1287125465/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-08-08T13:31:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1287125465",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8077169?v=4",
         "events_url" : "https://api.github.com/users/dergoegge/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dergoegge/followers",
         "following_url" : "https://api.github.com/users/dergoegge/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dergoegge/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dergoegge",
         "id" : 8077169,
         "login" : "dergoegge",
         "node_id" : "MDQ6VXNlcjgwNzcxNjk=",
         "organizations_url" : "https://api.github.com/users/dergoegge/orgs",
         "received_events_url" : "https://api.github.com/users/dergoegge/received_events",
         "repos_url" : "https://api.github.com/users/dergoegge/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dergoegge/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dergoegge/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dergoegge"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28107#discussion_r1287125880"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28107"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1287125880"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Done",
      "commit_id" : "c1f9c3b28b3d657f56386b9602a33d1a2fc1ed97",
      "created_at" : "2023-08-08T13:32:04Z",
      "diff_hunk" : "@@ -20,7 +21,7 @@ bool TxOrphanage::AddTx(const CTransactionRef& tx, NodeId peer)\n {\n     LOCK(m_mutex);\n \n-    const uint256& hash = tx->GetHash();\n+    const auto& hash = tx->GetHash();",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28107#discussion_r1287125880",
      "id" : 1287125880,
      "in_reply_to_id" : 1279668749,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585Mt_t4",
      "original_commit_id" : "76fe2c304201646d63b1b01b397e18a99252a2d9",
      "original_line" : 24,
      "original_position" : 13,
      "original_start_line" : null,
      "path" : "src/txorphanage.cpp",
      "position" : null,
      "pull_request_review_id" : 1567314110,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28107",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1287125880/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-08-08T13:32:04Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1287125880",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8077169?v=4",
         "events_url" : "https://api.github.com/users/dergoegge/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dergoegge/followers",
         "following_url" : "https://api.github.com/users/dergoegge/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dergoegge/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dergoegge",
         "id" : 8077169,
         "login" : "dergoegge",
         "node_id" : "MDQ6VXNlcjgwNzcxNjk=",
         "organizations_url" : "https://api.github.com/users/dergoegge/orgs",
         "received_events_url" : "https://api.github.com/users/dergoegge/received_events",
         "repos_url" : "https://api.github.com/users/dergoegge/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dergoegge/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dergoegge/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dergoegge"
      }
   }
]
