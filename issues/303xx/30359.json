{
   "active_lock_reason" : null,
   "assignee" : null,
   "assignees" : [],
   "author_association" : "NONE",
   "body" : "### Description\r\n\r\nThis pull request addresses an error code inconsistency in the handling of empty stacks for the `OP_IF` and `OP_NOTIF` Bitcoin Script opcodes.\r\n\r\nCurrently, if the stack is empty when evaluating these opcodes, the script returns `SCRIPT_ERR_UNBALANCED_CONDITIONAL`, which is misleading. The correct error code for this scenario should be `SCRIPT_ERR_INVALID_STACK_OPERATION`, as the issue lies in insufficient stack elements rather than mismatched conditionals.\r\n\r\nThis change modifies the script execution engine to return `SCRIPT_ERR_INVALID_STACK_OPERATION` when an empty stack is encountered during `OP_IF` and `OP_NOTIF` processing.\r\n\r\n### Motivation and Improvement\r\n\r\n- **Accuracy:** The updated error code aligns with the actual nature of the problem, providing more accurate feedback during script validation.\r\n- **Debugging and Analysis:** This correction will make it easier for developers and users to diagnose script failures accurately, leading to improved debugging and troubleshooting.\r\n- **Consistency:** It brings the error handling for empty stack conditions in line with other parts of the Bitcoin Script interpreter, enhancing overall code consistency.\r\n\r\n### Testing\r\n\r\nThis change is accompanied by unit tests in the `src/test/` directory that specifically verify the corrected behavior for `OP_IF` and `OP_NOTIF` with empty stacks.\r\n\r\n### Additional Considerations\r\n\r\nWhile this change might appear minor, its impact on error reporting and debugging is significant. It contributes to a more robust and accurate Bitcoin Script validation process.\r\n\r\n**Note:**  Please note that no functional tests have been added as this is a minor fix in the script interpreter's logic, not affecting the overall Bitcoin functionality.\r\n\r\nI hope this pull request description is helpful. Please let me know if you have any other questions or need further refinements.\r\n",
   "closed_at" : null,
   "closed_by" : null,
   "comments" : 1,
   "comments_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/30359/comments",
   "created_at" : "2024-06-28T16:16:48Z",
   "draft" : false,
   "events_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/30359/events",
   "html_url" : "https://github.com/bitcoin/bitcoin/pull/30359",
   "id" : 2380756374,
   "labels" : [],
   "labels_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/30359/labels{/name}",
   "locked" : false,
   "milestone" : null,
   "node_id" : "PR_kwDOABII585z6Nrz",
   "number" : 30359,
   "performed_via_github_app" : null,
   "pull_request" : {
      "diff_url" : "https://github.com/bitcoin/bitcoin/pull/30359.diff",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/30359",
      "merged_at" : null,
      "patch_url" : "https://github.com/bitcoin/bitcoin/pull/30359.patch",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/30359"
   },
   "reactions" : {
      "+1" : 0,
      "-1" : 0,
      "confused" : 0,
      "eyes" : 0,
      "heart" : 0,
      "hooray" : 0,
      "laugh" : 0,
      "rocket" : 0,
      "total_count" : 0,
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/30359/reactions"
   },
   "repository_url" : "https://api.github.com/repos/bitcoin/bitcoin",
   "state" : "open",
   "state_reason" : null,
   "timeline_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/30359/timeline",
   "title" : "Correct Error Code in OP_IF/OP_NOTIF Empty Stack Check",
   "updated_at" : "2024-06-28T16:16:52Z",
   "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/30359",
   "user" : {
      "avatar_url" : "https://avatars.githubusercontent.com/u/1057486?v=4",
      "events_url" : "https://api.github.com/users/Jianru-Lin/events{/privacy}",
      "followers_url" : "https://api.github.com/users/Jianru-Lin/followers",
      "following_url" : "https://api.github.com/users/Jianru-Lin/following{/other_user}",
      "gists_url" : "https://api.github.com/users/Jianru-Lin/gists{/gist_id}",
      "gravatar_id" : "",
      "html_url" : "https://github.com/Jianru-Lin",
      "id" : 1057486,
      "login" : "Jianru-Lin",
      "node_id" : "MDQ6VXNlcjEwNTc0ODY=",
      "organizations_url" : "https://api.github.com/users/Jianru-Lin/orgs",
      "received_events_url" : "https://api.github.com/users/Jianru-Lin/received_events",
      "repos_url" : "https://api.github.com/users/Jianru-Lin/repos",
      "site_admin" : false,
      "starred_url" : "https://api.github.com/users/Jianru-Lin/starred{/owner}{/repo}",
      "subscriptions_url" : "https://api.github.com/users/Jianru-Lin/subscriptions",
      "type" : "User",
      "url" : "https://api.github.com/users/Jianru-Lin"
   }
}
