[
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage\nFor detailed information about the code coverage, see the [test coverage report](https://corecheck.dev/bitcoin/bitcoin/pulls/30322).\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\nA summary of reviews will appear here.\n",
      "created_at" : "2024-06-22T14:20:17Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/30322#issuecomment-2184051387",
      "id" : 2184051387,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/30322",
      "node_id" : "IC_kwDOABII586CLfq7",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2184051387/reactions"
      },
      "updated_at" : "2024-06-22T14:20:18Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2184051387",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/30322#discussion_r1650041303"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/30322"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1650041303"
         }
      },
      "author_association" : "NONE",
      "body" : "Always nice to see getting rid of magic numbers!",
      "commit_id" : "d0a0408fcfd3c184a25ca5330dc74f8ecd61f29f",
      "created_at" : "2024-06-23T10:36:57Z",
      "diff_hunk" : "@@ -126,7 +126,7 @@ def _bulk_tx(self, tx, target_weight):\n         \"\"\"\n         tx.vout.append(CTxOut(nValue=0, scriptPubKey=CScript([OP_RETURN])))\n         # determine number of needed padding bytes by converting weight difference to vbytes\n-        dummy_vbytes = (target_weight - tx.get_weight() + 3) // 4\n+        dummy_vbytes = (target_weight - tx.get_weight() + 3) // WITNESS_SCALE_FACTOR",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/30322#discussion_r1650041303",
      "id" : 1650041303,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585iWaHX",
      "original_commit_id" : "9acd7b150a5c700c856fcb348bc1737557db2302",
      "original_line" : 129,
      "original_position" : 5,
      "original_start_line" : 129,
      "path" : "test/functional/test_framework/wallet.py",
      "position" : null,
      "pull_request_review_id" : 2134242207,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/30322",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1650041303/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : "LEFT",
      "subject_type" : "line",
      "updated_at" : "2024-06-23T10:55:20Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1650041303",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5960750?v=4",
         "events_url" : "https://api.github.com/users/rkrux/events{/privacy}",
         "followers_url" : "https://api.github.com/users/rkrux/followers",
         "following_url" : "https://api.github.com/users/rkrux/following{/other_user}",
         "gists_url" : "https://api.github.com/users/rkrux/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/rkrux",
         "id" : 5960750,
         "login" : "rkrux",
         "node_id" : "MDQ6VXNlcjU5NjA3NTA=",
         "organizations_url" : "https://api.github.com/users/rkrux/orgs",
         "received_events_url" : "https://api.github.com/users/rkrux/received_events",
         "repos_url" : "https://api.github.com/users/rkrux/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/rkrux/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/rkrux/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/rkrux"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/30322#discussion_r1650041551"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/30322"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1650041551"
         }
      },
      "author_association" : "NONE",
      "body" : "Thanks for this change, I recall highlighting in the previous PR.",
      "commit_id" : "d0a0408fcfd3c184a25ca5330dc74f8ecd61f29f",
      "created_at" : "2024-06-23T10:38:31Z",
      "diff_hunk" : "@@ -20,7 +20,7 @@ def set_test_params(self):\n \n     def test_tx_padding(self):\n         \"\"\"Verify that MiniWallet's transaction padding (`target_weight` parameter)\n-           works accurately enough (i.e. at most 3 WUs higher) with all modes.\"\"\"\n+           works accurately with all modes.\"\"\"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/30322#discussion_r1650041551",
      "id" : 1650041551,
      "line" : 23,
      "node_id" : "PRRC_kwDOABII585iWaLP",
      "original_commit_id" : "3a248172b186649d68aa6e2d8cc135b43c8fbff3",
      "original_line" : 23,
      "original_position" : 5,
      "original_start_line" : 23,
      "path" : "test/functional/feature_framework_miniwallet.py",
      "position" : 5,
      "pull_request_review_id" : 2134242207,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/30322",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1650041551/reactions"
      },
      "side" : "RIGHT",
      "start_line" : 23,
      "start_side" : "LEFT",
      "subject_type" : "line",
      "updated_at" : "2024-06-23T10:55:20Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1650041551",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5960750?v=4",
         "events_url" : "https://api.github.com/users/rkrux/events{/privacy}",
         "followers_url" : "https://api.github.com/users/rkrux/followers",
         "following_url" : "https://api.github.com/users/rkrux/following{/other_user}",
         "gists_url" : "https://api.github.com/users/rkrux/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/rkrux",
         "id" : 5960750,
         "login" : "rkrux",
         "node_id" : "MDQ6VXNlcjU5NjA3NTA=",
         "organizations_url" : "https://api.github.com/users/rkrux/orgs",
         "received_events_url" : "https://api.github.com/users/rkrux/received_events",
         "repos_url" : "https://api.github.com/users/rkrux/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/rkrux/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/rkrux/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/rkrux"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/30322#discussion_r1650041737"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/30322"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1650041737"
         }
      },
      "author_association" : "NONE",
      "body" : "```\r\n\"\"\"Pad a transaction with extra outputs until it reaches a target weight (or higher by\r\n        at most BULK_TX_PADDING_OFFSET WU).\r\n```",
      "commit_id" : "d0a0408fcfd3c184a25ca5330dc74f8ecd61f29f",
      "created_at" : "2024-06-23T10:39:29Z",
      "diff_hunk" : "@@ -121,19 +122,19 @@ def _create_utxo(self, *, txid, vout, value, height, coinbase, confirmations):\n         return {\"txid\": txid, \"vout\": vout, \"value\": value, \"height\": height, \"coinbase\": coinbase, \"confirmations\": confirmations}\n \n     def _bulk_tx(self, tx, target_weight):\n-        \"\"\"Pad a transaction with extra outputs until it reaches a target weight (or higher).\n-        returns the tx\n+        \"\"\"Pad a transaction with extra outputs until it reaches a target weight (or higher\n+        at most BULK_TX_PADDING_OFFSET WU).",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/30322#discussion_r1650041737",
      "id" : 1650041737,
      "line" : 126,
      "node_id" : "PRRC_kwDOABII585iWaOJ",
      "original_commit_id" : "3a248172b186649d68aa6e2d8cc135b43c8fbff3",
      "original_line" : 126,
      "original_position" : 15,
      "original_start_line" : 125,
      "path" : "test/functional/test_framework/wallet.py",
      "position" : 15,
      "pull_request_review_id" : 2134242207,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/30322",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1650041737/reactions"
      },
      "side" : "RIGHT",
      "start_line" : 125,
      "start_side" : "RIGHT",
      "subject_type" : "line",
      "updated_at" : "2024-06-23T10:55:20Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1650041737",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5960750?v=4",
         "events_url" : "https://api.github.com/users/rkrux/events{/privacy}",
         "followers_url" : "https://api.github.com/users/rkrux/followers",
         "following_url" : "https://api.github.com/users/rkrux/following{/other_user}",
         "gists_url" : "https://api.github.com/users/rkrux/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/rkrux",
         "id" : 5960750,
         "login" : "rkrux",
         "node_id" : "MDQ6VXNlcjU5NjA3NTA=",
         "organizations_url" : "https://api.github.com/users/rkrux/orgs",
         "received_events_url" : "https://api.github.com/users/rkrux/received_events",
         "repos_url" : "https://api.github.com/users/rkrux/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/rkrux/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/rkrux/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/rkrux"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/30322#discussion_r1650041868"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/30322"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1650041868"
         }
      },
      "author_association" : "NONE",
      "body" : "â  ",
      "commit_id" : "d0a0408fcfd3c184a25ca5330dc74f8ecd61f29f",
      "created_at" : "2024-06-23T10:40:11Z",
      "diff_hunk" : "@@ -121,19 +122,19 @@ def _create_utxo(self, *, txid, vout, value, height, coinbase, confirmations):\n         return {\"txid\": txid, \"vout\": vout, \"value\": value, \"height\": height, \"coinbase\": coinbase, \"confirmations\": confirmations}\n \n     def _bulk_tx(self, tx, target_weight):\n-        \"\"\"Pad a transaction with extra outputs until it reaches a target weight (or higher).\n-        returns the tx\n+        \"\"\"Pad a transaction with extra outputs until it reaches a target weight (or higher\n+        at most BULK_TX_PADDING_OFFSET WU).\n         \"\"\"\n         tx.vout.append(CTxOut(nValue=0, scriptPubKey=CScript([OP_RETURN])))\n         # determine number of needed padding bytes by converting weight difference to vbytes\n-        dummy_vbytes = (target_weight - tx.get_weight() + 3) // WITNESS_SCALE_FACTOR\n+        dummy_vbytes = (target_weight - tx.get_weight() + BULK_TX_PADDING_OFFSET) // WITNESS_SCALE_FACTOR",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/30322#discussion_r1650041868",
      "id" : 1650041868,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585iWaQM",
      "original_commit_id" : "3a248172b186649d68aa6e2d8cc135b43c8fbff3",
      "original_line" : 130,
      "original_position" : 20,
      "original_start_line" : 129,
      "path" : "test/functional/test_framework/wallet.py",
      "position" : null,
      "pull_request_review_id" : 2134242207,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/30322",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1650041868/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : "LEFT",
      "subject_type" : "line",
      "updated_at" : "2024-06-23T10:55:20Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1650041868",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5960750?v=4",
         "events_url" : "https://api.github.com/users/rkrux/events{/privacy}",
         "followers_url" : "https://api.github.com/users/rkrux/followers",
         "following_url" : "https://api.github.com/users/rkrux/following{/other_user}",
         "gists_url" : "https://api.github.com/users/rkrux/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/rkrux",
         "id" : 5960750,
         "login" : "rkrux",
         "node_id" : "MDQ6VXNlcjU5NjA3NTA=",
         "organizations_url" : "https://api.github.com/users/rkrux/orgs",
         "received_events_url" : "https://api.github.com/users/rkrux/received_events",
         "repos_url" : "https://api.github.com/users/rkrux/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/rkrux/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/rkrux/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/rkrux"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/30322#discussion_r1650043501"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/30322"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1650043501"
         }
      },
      "author_association" : "NONE",
      "body" : "The condition seems correct but the corresponding comment doesn't, it was a bit difficult for me to understand.\r\n\r\nHow about the following?\r\n```\r\nPrevent bulking tx when target weight (along with offset) is less than or equal to the tx weight\r\n```",
      "commit_id" : "d0a0408fcfd3c184a25ca5330dc74f8ecd61f29f",
      "created_at" : "2024-06-23T10:48:37Z",
      "diff_hunk" : "@@ -125,16 +125,18 @@ def _bulk_tx(self, tx, target_weight):\n         \"\"\"Pad a transaction with extra outputs until it reaches a target weight (or higher\n         at most BULK_TX_PADDING_OFFSET WU).\n         \"\"\"\n-        tx.vout.append(CTxOut(nValue=0, scriptPubKey=CScript([OP_RETURN])))\n-        # determine number of needed padding bytes by converting weight difference to vbytes\n-        dummy_vbytes = (target_weight - tx.get_weight() + BULK_TX_PADDING_OFFSET) // WITNESS_SCALE_FACTOR\n-        # compensate for the increase of the compact-size encoded script length\n-        # (note that the length encoding of the unpadded output script needs one byte)\n-        dummy_vbytes -= len(ser_compact_size(dummy_vbytes)) - 1\n-        tx.vout[-1].scriptPubKey = CScript([OP_RETURN] + [OP_1] * dummy_vbytes)\n-        # Actual weight should be at most BULK_TX_PADDING_OFFSET higher than target weight\n-        assert_greater_than_or_equal(tx.get_weight(), target_weight)\n-        assert_greater_than_or_equal(target_weight + BULK_TX_PADDING_OFFSET, tx.get_weight())\n+        # Prevent bulking tx when target weight is below the sum of tx weight and BULK_TX_PADDING_OFFSET\n+        if (target_weight + BULK_TX_PADDING_OFFSET) > tx.get_weight():",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/30322#discussion_r1650043501",
      "id" : 1650043501,
      "line" : 129,
      "node_id" : "PRRC_kwDOABII585iWapt",
      "original_commit_id" : "2bae40e7fd884f7b1df01b31b67eb819f46df734",
      "original_line" : 129,
      "original_position" : 15,
      "original_start_line" : 128,
      "path" : "test/functional/test_framework/wallet.py",
      "position" : 28,
      "pull_request_review_id" : 2134242207,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/30322",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1650043501/reactions"
      },
      "side" : "RIGHT",
      "start_line" : 128,
      "start_side" : "RIGHT",
      "subject_type" : "line",
      "updated_at" : "2024-06-23T10:55:20Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1650043501",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5960750?v=4",
         "events_url" : "https://api.github.com/users/rkrux/events{/privacy}",
         "followers_url" : "https://api.github.com/users/rkrux/followers",
         "following_url" : "https://api.github.com/users/rkrux/following{/other_user}",
         "gists_url" : "https://api.github.com/users/rkrux/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/rkrux",
         "id" : 5960750,
         "login" : "rkrux",
         "node_id" : "MDQ6VXNlcjU5NjA3NTA=",
         "organizations_url" : "https://api.github.com/users/rkrux/orgs",
         "received_events_url" : "https://api.github.com/users/rkrux/received_events",
         "repos_url" : "https://api.github.com/users/rkrux/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/rkrux/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/rkrux/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/rkrux"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/30322#discussion_r1650043843"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/30322"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1650043843"
         }
      },
      "author_association" : "NONE",
      "body" : "Isn't this debug log incorrect?",
      "commit_id" : "d0a0408fcfd3c184a25ca5330dc74f8ecd61f29f",
      "created_at" : "2024-06-23T10:50:23Z",
      "diff_hunk" : "@@ -26,9 +26,14 @@ def test_tx_padding(self):\n             utxo = wallet.get_utxo(mark_as_spent=False)\n             for target_weight in [100, 300, 500, 900, 1000, 2000, 5000, 10000, 20000, 50000, 100000, 200000, 4000000,\n                                   989,  2001, 4337, 13371, 23219, 49153, 102035, 223419, 3999989]:\n-                tx = wallet.create_self_transfer(utxo_to_spend=utxo, target_weight=target_weight)[\"tx\"]\n-                self.log.debug(f\"-> tx weight: {tx.get_weight()} is always greater than or equal target weight: {target_weight}\")\n+                created_tx = wallet.create_self_transfer(utxo_to_spend=utxo, target_weight=target_weight)\n+                tx = created_tx[\"tx\"]\n+                self.log.debug(f\"-> tx weight: {target_weight} is always greater than or equal target weight: {tx.get_weight()}\")",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/30322#discussion_r1650043843",
      "id" : 1650043843,
      "line" : 31,
      "node_id" : "PRRC_kwDOABII585iWavD",
      "original_commit_id" : "58655c0e00307c3fde7855c9f2a67b5e68966e66",
      "original_line" : 31,
      "original_position" : 8,
      "original_start_line" : null,
      "path" : "test/functional/feature_framework_miniwallet.py",
      "position" : 16,
      "pull_request_review_id" : 2134242207,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/30322",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1650043843/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-06-23T10:55:20Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1650043843",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5960750?v=4",
         "events_url" : "https://api.github.com/users/rkrux/events{/privacy}",
         "followers_url" : "https://api.github.com/users/rkrux/followers",
         "following_url" : "https://api.github.com/users/rkrux/following{/other_user}",
         "gists_url" : "https://api.github.com/users/rkrux/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/rkrux",
         "id" : 5960750,
         "login" : "rkrux",
         "node_id" : "MDQ6VXNlcjU5NjA3NTA=",
         "organizations_url" : "https://api.github.com/users/rkrux/orgs",
         "received_events_url" : "https://api.github.com/users/rkrux/received_events",
         "repos_url" : "https://api.github.com/users/rkrux/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/rkrux/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/rkrux/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/rkrux"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/30322#discussion_r1650043938"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/30322"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1650043938"
         }
      },
      "author_association" : "NONE",
      "body" : "```suggestion\r\n                self.log.debug(f\"-> tx weight: {tx.get_weight()} is always greater than or equal target weight: {target_weight}\")\r\n```",
      "commit_id" : "d0a0408fcfd3c184a25ca5330dc74f8ecd61f29f",
      "created_at" : "2024-06-23T10:51:07Z",
      "diff_hunk" : "@@ -26,9 +26,14 @@ def test_tx_padding(self):\n             utxo = wallet.get_utxo(mark_as_spent=False)\n             for target_weight in [100, 300, 500, 900, 1000, 2000, 5000, 10000, 20000, 50000, 100000, 200000, 4000000,\n                                   989,  2001, 4337, 13371, 23219, 49153, 102035, 223419, 3999989]:\n-                tx = wallet.create_self_transfer(utxo_to_spend=utxo, target_weight=target_weight)[\"tx\"]\n-                self.log.debug(f\"-> tx weight: {tx.get_weight()} is always greater than or equal target weight: {target_weight}\")\n+                created_tx = wallet.create_self_transfer(utxo_to_spend=utxo, target_weight=target_weight)\n+                tx = created_tx[\"tx\"]\n+                self.log.debug(f\"-> tx weight: {target_weight} is always greater than or equal target weight: {tx.get_weight()}\")",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/30322#discussion_r1650043938",
      "id" : 1650043938,
      "in_reply_to_id" : 1650043843,
      "line" : 31,
      "node_id" : "PRRC_kwDOABII585iWawi",
      "original_commit_id" : "58655c0e00307c3fde7855c9f2a67b5e68966e66",
      "original_line" : 31,
      "original_position" : 8,
      "original_start_line" : null,
      "path" : "test/functional/feature_framework_miniwallet.py",
      "position" : 16,
      "pull_request_review_id" : 2134242207,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/30322",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1650043938/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-06-23T10:55:20Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1650043938",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5960750?v=4",
         "events_url" : "https://api.github.com/users/rkrux/events{/privacy}",
         "followers_url" : "https://api.github.com/users/rkrux/followers",
         "following_url" : "https://api.github.com/users/rkrux/following{/other_user}",
         "gists_url" : "https://api.github.com/users/rkrux/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/rkrux",
         "id" : 5960750,
         "login" : "rkrux",
         "node_id" : "MDQ6VXNlcjU5NjA3NTA=",
         "organizations_url" : "https://api.github.com/users/rkrux/orgs",
         "received_events_url" : "https://api.github.com/users/rkrux/received_events",
         "repos_url" : "https://api.github.com/users/rkrux/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/rkrux/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/rkrux/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/rkrux"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/30322#discussion_r1650044105"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/30322"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1650044105"
         }
      },
      "author_association" : "NONE",
      "body" : "Good addition imo.",
      "commit_id" : "d0a0408fcfd3c184a25ca5330dc74f8ecd61f29f",
      "created_at" : "2024-06-23T10:52:20Z",
      "diff_hunk" : "@@ -383,7 +383,8 @@ def create_self_transfer(\n             max_actual_weight = target_weight + BULK_TX_PADDING_OFFSET\n             fee = get_fee(math.ceil(max_actual_weight / WITNESS_SCALE_FACTOR), fee_rate)\n         send_value = utxo_to_spend[\"value\"] - (fee or (fee_rate * vsize / 1000))\n-\n+        if send_value <= 0:\n+            raise Exception(f\"UTXO value {utxo_to_spend['value']} is too small to cover fees {(fee or (fee_rate * vsize / 1000))}\")",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/30322#discussion_r1650044105",
      "id" : 1650044105,
      "line" : 387,
      "node_id" : "PRRC_kwDOABII585iWazJ",
      "original_commit_id" : "d0a0408fcfd3c184a25ca5330dc74f8ecd61f29f",
      "original_line" : 387,
      "original_position" : 6,
      "original_start_line" : 386,
      "path" : "test/functional/test_framework/wallet.py",
      "position" : 6,
      "pull_request_review_id" : 2134242207,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/30322",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1650044105/reactions"
      },
      "side" : "RIGHT",
      "start_line" : 386,
      "start_side" : "RIGHT",
      "subject_type" : "line",
      "updated_at" : "2024-06-23T10:55:20Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1650044105",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5960750?v=4",
         "events_url" : "https://api.github.com/users/rkrux/events{/privacy}",
         "followers_url" : "https://api.github.com/users/rkrux/followers",
         "following_url" : "https://api.github.com/users/rkrux/following{/other_user}",
         "gists_url" : "https://api.github.com/users/rkrux/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/rkrux",
         "id" : 5960750,
         "login" : "rkrux",
         "node_id" : "MDQ6VXNlcjU5NjA3NTA=",
         "organizations_url" : "https://api.github.com/users/rkrux/orgs",
         "received_events_url" : "https://api.github.com/users/rkrux/received_events",
         "repos_url" : "https://api.github.com/users/rkrux/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/rkrux/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/rkrux/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/rkrux"
      }
   }
]
