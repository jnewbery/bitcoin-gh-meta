[
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage\nFor detailed information about the code coverage, see the [test coverage report](https://corecheck.dev/bitcoin/bitcoin/pulls/26697).\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| Concept ACK | [kevkevinpal](https://github.com/bitcoin/bitcoin/pull/26697#issuecomment-1386387062) |\n| Approach ACK | [stickies-v](https://github.com/bitcoin/bitcoin/pull/26697#pullrequestreview-1225872773) |\n| Stale ACK | [codo1](https://github.com/bitcoin/bitcoin/pull/26697#issuecomment-1387281337) |\n\nIf your review is incorrectly listed, please react with ð to this comment and the bot will ignore it on the next update.\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#29432](https://github.com/bitcoin/bitcoin/pull/29432) (Stratum v2 Template Provider (take 3) by Sjors)\n* [#29419](https://github.com/bitcoin/bitcoin/pull/29419) (log: deduplicate category names and improve logging.cpp by vasild)\n* [#29415](https://github.com/bitcoin/bitcoin/pull/29415) (Broadcast own transactions only via short-lived Tor or I2P connections by vasild)\n* [#29346](https://github.com/bitcoin/bitcoin/pull/29346) (Stratum v2 Noise Protocol by Sjors)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.\n",
      "created_at" : "2022-12-14T05:40:20Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26697#issuecomment-1350426696",
      "id" : 1350426696,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/26697",
      "node_id" : "IC_kwDOABII585QfeBI",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1350426696/reactions"
      },
      "updated_at" : "2024-03-26T00:31:18Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1350426696",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "https://github.com/bitcoin/bitcoin/pull/26697/checks?check_run_id=10081903933\r\n```bash\r\n/usr/bin/ccache g++ -m32 -std=c++17 -DHAVE_CONFIG_H -I. -I../src/config  -fmacro-prefix-map=/tmp/cirrus-ci-build/ci/scratch/build/bitcoin-i686-pc-linux-gnu=. -U_FORTIFY_SOURCE -D_FORTIFY_SOURCE=2 -DHAVE_BUILD_INFO -D_FILE_OFFSET_BITS=64 -DPROVIDE_FUZZ_MAIN_FUNCTION -I. -I./minisketch/include -I./secp256k1/include -I./univalue/include -I./leveldb/include -I/tmp/cirrus-ci-build/depends/i686-pc-linux-gnu/include/  -fdebug-prefix-map=/tmp/cirrus-ci-build/ci/scratch/build/bitcoin-i686-pc-linux-gnu=. -fstack-reuse=none -Wstack-protector -fstack-protector-all -fcf-protection=full -fstack-clash-protection   -Werror    -fno-extended-identifiers -fvisibility=hidden -fPIE -pipe -std=c++17 -O2  -c -o bitcoind-bitcoind.o `test -f 'bitcoind.cpp' || echo './'`bitcoind.cpp\r\nIn file included from ./interfaces/node.h:9,\r\n                 from ./interfaces/init.h:10,\r\n                 from bitcoind.cpp:16:\r\n./logging.h: In function âconstexpr std::bitset<28> BCLog::all()â:\r\n./logging.h:91:64: error: call to non-âconstexprâ function âstd::bitset<_Nb>& std::bitset<_Nb>::set(std::size_t, bool) [with unsigned int _Nb = 28; std::size_t = unsigned int]â\r\n         for (size_t i{0}; i < LOGFLAGSMAX; ++i) all_flags.set(i);\r\n                                                                ^\r\nmake[2]: *** [Makefile:15498: bitcoind-bitcoind.o] Error 1\r\n```",
      "created_at" : "2022-12-14T09:30:22Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26697#issuecomment-1350721107",
      "id" : 1350721107,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/26697",
      "node_id" : "IC_kwDOABII585Qgl5T",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1350721107/reactions"
      },
      "updated_at" : "2022-12-14T09:30:22Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1350721107",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/863730?v=4",
         "events_url" : "https://api.github.com/users/fanquake/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fanquake/followers",
         "following_url" : "https://api.github.com/users/fanquake/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fanquake/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fanquake",
         "id" : 863730,
         "login" : "fanquake",
         "node_id" : "MDQ6VXNlcjg2MzczMA==",
         "organizations_url" : "https://api.github.com/users/fanquake/orgs",
         "received_events_url" : "https://api.github.com/users/fanquake/received_events",
         "repos_url" : "https://api.github.com/users/fanquake/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fanquake/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fanquake"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Force pushed to fix CI failure, thanks @fanquake ",
      "created_at" : "2022-12-14T16:07:39Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26697#issuecomment-1351698881",
      "id" : 1351698881,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/26697",
      "node_id" : "IC_kwDOABII585QkUnB",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1351698881/reactions"
      },
      "updated_at" : "2022-12-14T16:07:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1351698881",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8321330?v=4",
         "events_url" : "https://api.github.com/users/LarryRuane/events{/privacy}",
         "followers_url" : "https://api.github.com/users/LarryRuane/followers",
         "following_url" : "https://api.github.com/users/LarryRuane/following{/other_user}",
         "gists_url" : "https://api.github.com/users/LarryRuane/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/LarryRuane",
         "id" : 8321330,
         "login" : "LarryRuane",
         "node_id" : "MDQ6VXNlcjgzMjEzMzA=",
         "organizations_url" : "https://api.github.com/users/LarryRuane/orgs",
         "received_events_url" : "https://api.github.com/users/LarryRuane/received_events",
         "repos_url" : "https://api.github.com/users/LarryRuane/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/LarryRuane/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/LarryRuane/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/LarryRuane"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "CI: `logging.cpp:105 EnableCategory: Assertion `flag < LOGFLAGSMAX' failed.`",
      "created_at" : "2022-12-15T07:37:45Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26697#issuecomment-1352668542",
      "id" : 1352668542,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/26697",
      "node_id" : "IC_kwDOABII585QoBV-",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1352668542/reactions"
      },
      "updated_at" : "2022-12-15T07:37:45Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1352668542",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Force pushed (twice) to fix CI, thanks @MarcoFalke. One other small change I made in this force push is that if the category value is beyond the size (range) of the `std::bitset`, then ignore the request rather than throwing a `std::out_of_range` exception. It should no longer be possible for this to happen, but if it does, it's not that big of a problem, it seems too drastic to throw an exception for this reason in a production build. The `Assume()` remains, and will catch the bug during testing.",
      "created_at" : "2022-12-16T20:52:29Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26697#issuecomment-1355591762",
      "id" : 1355591762,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/26697",
      "node_id" : "IC_kwDOABII585QzLBS",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1355591762/reactions"
      },
      "updated_at" : "2022-12-16T20:52:29Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1355591762",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8321330?v=4",
         "events_url" : "https://api.github.com/users/LarryRuane/events{/privacy}",
         "followers_url" : "https://api.github.com/users/LarryRuane/followers",
         "following_url" : "https://api.github.com/users/LarryRuane/following{/other_user}",
         "gists_url" : "https://api.github.com/users/LarryRuane/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/LarryRuane",
         "id" : 8321330,
         "login" : "LarryRuane",
         "node_id" : "MDQ6VXNlcjgzMjEzMzA=",
         "organizations_url" : "https://api.github.com/users/LarryRuane/orgs",
         "received_events_url" : "https://api.github.com/users/LarryRuane/received_events",
         "repos_url" : "https://api.github.com/users/LarryRuane/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/LarryRuane/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/LarryRuane/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/LarryRuane"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/26697#discussion_r1051382151"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26697"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1051382151"
         }
      },
      "author_association" : "MEMBER",
      "body" : "```suggestion\r\n   \r\n    if ( Assume(category < NONE)) {\r\n```\r\n\r\nnit: Can be combined, IIRC",
      "commit_id" : "14e30cf2380d3ffebfd6169aebf6a16beeb8efcc",
      "created_at" : "2022-12-17T10:39:36Z",
      "diff_hunk" : "@@ -121,7 +144,12 @@ bool BCLog::Logger::DisableCategory(const std::string& str)\n \n bool BCLog::Logger::WillLogCategory(BCLog::LogFlags category) const\n {\n-    return (m_categories.load(std::memory_order_relaxed) & category) != 0;\n+    Assume(category < NONE);\n+    if (category < NONE) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26697#discussion_r1051382151",
      "id" : 1051382151,
      "line" : 148,
      "node_id" : "PRRC_kwDOABII584-qtGH",
      "original_commit_id" : "14e30cf2380d3ffebfd6169aebf6a16beeb8efcc",
      "original_line" : 148,
      "original_position" : 54,
      "original_start_line" : 147,
      "path" : "src/logging.cpp",
      "position" : 54,
      "pull_request_review_id" : 1221779788,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26697",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1051382151/reactions"
      },
      "side" : "RIGHT",
      "start_line" : 147,
      "start_side" : "RIGHT",
      "updated_at" : "2022-12-17T10:39:37Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1051382151",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Force pushed for [review comment](https://github.com/bitcoin/bitcoin/pull/26697#discussion_r1051382151), thanks @MarcoFalke!",
      "created_at" : "2022-12-17T15:59:37Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26697#issuecomment-1356317032",
      "id" : 1356317032,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/26697",
      "node_id" : "IC_kwDOABII585Q18Fo",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1356317032/reactions"
      },
      "updated_at" : "2022-12-17T15:59:37Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1356317032",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8321330?v=4",
         "events_url" : "https://api.github.com/users/LarryRuane/events{/privacy}",
         "followers_url" : "https://api.github.com/users/LarryRuane/followers",
         "following_url" : "https://api.github.com/users/LarryRuane/following{/other_user}",
         "gists_url" : "https://api.github.com/users/LarryRuane/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/LarryRuane",
         "id" : 8321330,
         "login" : "LarryRuane",
         "node_id" : "MDQ6VXNlcjgzMjEzMzA=",
         "organizations_url" : "https://api.github.com/users/LarryRuane/orgs",
         "received_events_url" : "https://api.github.com/users/LarryRuane/received_events",
         "repos_url" : "https://api.github.com/users/LarryRuane/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/LarryRuane/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/LarryRuane/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/LarryRuane"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/26697#discussion_r1054248461"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26697"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1054248461"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "What's the rationale behind changing this into a `size_t`? I'd think with this change we could turn it into a smaller type, if anything?",
      "commit_id" : "0dbe9b487face0dc798fc725d671569686883385",
      "created_at" : "2022-12-21T10:49:01Z",
      "diff_hunk" : "@@ -35,41 +36,45 @@ struct LogCategory {\n };\n \n namespace BCLog {\n-    enum LogFlags : uint32_t {\n-        NONE        = 0,\n-        NET         = (1 <<  0),\n-        TOR         = (1 <<  1),\n-        MEMPOOL     = (1 <<  2),\n-        HTTP        = (1 <<  3),\n-        BENCH       = (1 <<  4),\n-        ZMQ         = (1 <<  5),\n-        WALLETDB    = (1 <<  6),\n-        RPC         = (1 <<  7),\n-        ESTIMATEFEE = (1 <<  8),\n-        ADDRMAN     = (1 <<  9),\n-        SELECTCOINS = (1 << 10),\n-        REINDEX     = (1 << 11),\n-        CMPCTBLOCK  = (1 << 12),\n-        RAND        = (1 << 13),\n-        PRUNE       = (1 << 14),\n-        PROXY       = (1 << 15),\n-        MEMPOOLREJ  = (1 << 16),\n-        LIBEVENT    = (1 << 17),\n-        COINDB      = (1 << 18),\n-        QT          = (1 << 19),\n-        LEVELDB     = (1 << 20),\n-        VALIDATION  = (1 << 21),\n-        I2P         = (1 << 22),\n-        IPC         = (1 << 23),\n+    enum LogFlags : size_t {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26697#discussion_r1054248461",
      "id" : 1054248461,
      "line" : 39,
      "node_id" : "PRRC_kwDOABII584-1o4N",
      "original_commit_id" : "0dbe9b487face0dc798fc725d671569686883385",
      "original_line" : 39,
      "original_position" : 38,
      "original_start_line" : null,
      "path" : "src/logging.h",
      "position" : 38,
      "pull_request_review_id" : 1225872773,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26697",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1054248461/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-12-21T12:06:32Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1054248461",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/69010457?v=4",
         "events_url" : "https://api.github.com/users/stickies-v/events{/privacy}",
         "followers_url" : "https://api.github.com/users/stickies-v/followers",
         "following_url" : "https://api.github.com/users/stickies-v/following{/other_user}",
         "gists_url" : "https://api.github.com/users/stickies-v/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/stickies-v",
         "id" : 69010457,
         "login" : "stickies-v",
         "node_id" : "MDQ6VXNlcjY5MDEwNDU3",
         "organizations_url" : "https://api.github.com/users/stickies-v/orgs",
         "received_events_url" : "https://api.github.com/users/stickies-v/received_events",
         "repos_url" : "https://api.github.com/users/stickies-v/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/stickies-v/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/stickies-v/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/stickies-v"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/26697#discussion_r1054260237"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26697"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1054260237"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "nit: I think it'd be more intuitive to switch `NONE` and `ALL` so we have `LogFlagsBitset ` defined as `std::bitset<ALL>`",
      "commit_id" : "0dbe9b487face0dc798fc725d671569686883385",
      "created_at" : "2022-12-21T11:02:03Z",
      "diff_hunk" : "@@ -35,41 +36,45 @@ struct LogCategory {\n };\n \n namespace BCLog {\n-    enum LogFlags : uint32_t {\n-        NONE        = 0,\n-        NET         = (1 <<  0),\n-        TOR         = (1 <<  1),\n-        MEMPOOL     = (1 <<  2),\n-        HTTP        = (1 <<  3),\n-        BENCH       = (1 <<  4),\n-        ZMQ         = (1 <<  5),\n-        WALLETDB    = (1 <<  6),\n-        RPC         = (1 <<  7),\n-        ESTIMATEFEE = (1 <<  8),\n-        ADDRMAN     = (1 <<  9),\n-        SELECTCOINS = (1 << 10),\n-        REINDEX     = (1 << 11),\n-        CMPCTBLOCK  = (1 << 12),\n-        RAND        = (1 << 13),\n-        PRUNE       = (1 << 14),\n-        PROXY       = (1 << 15),\n-        MEMPOOLREJ  = (1 << 16),\n-        LIBEVENT    = (1 << 17),\n-        COINDB      = (1 << 18),\n-        QT          = (1 << 19),\n-        LEVELDB     = (1 << 20),\n-        VALIDATION  = (1 << 21),\n-        I2P         = (1 << 22),\n-        IPC         = (1 << 23),\n+    enum LogFlags : size_t {\n+        NET,\n+        TOR,\n+        MEMPOOL,\n+        HTTP,\n+        BENCH,\n+        ZMQ,\n+        WALLETDB,\n+        RPC,\n+        ESTIMATEFEE,\n+        ADDRMAN,\n+        SELECTCOINS,\n+        REINDEX,\n+        CMPCTBLOCK,\n+        RAND,\n+        PRUNE,\n+        PROXY,\n+        MEMPOOLREJ,\n+        LIBEVENT,\n+        COINDB,\n+        QT,\n+        LEVELDB,\n+        VALIDATION,\n+        I2P,\n+        IPC,\n #ifdef DEBUG_LOCKCONTENTION\n-        LOCK        = (1 << 24),\n+        LOCK,\n #endif\n-        UTIL        = (1 << 25),\n-        BLOCKSTORE  = (1 << 26),\n-        TXRECONCILIATION = (1 << 27),\n-        SCAN        = (1 << 28),\n-        ALL         = ~(uint32_t)0,\n+        UTIL,\n+        BLOCKSTORE,\n+        TXRECONCILIATION,\n+        SCAN,\n+        // Add new entries before this line.\n+\n+        // The following have no representation in m_categories:\n+        NONE, // this is also the size of the bitset\n+        ALL,\n     };\n+    using LogFlagsBitset = std::bitset<NONE>;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26697#discussion_r1054260237",
      "id" : 1054260237,
      "line" : 77,
      "node_id" : "PRRC_kwDOABII584-1rwN",
      "original_commit_id" : "0dbe9b487face0dc798fc725d671569686883385",
      "original_line" : 77,
      "original_position" : 82,
      "original_start_line" : 74,
      "path" : "src/logging.h",
      "position" : 82,
      "pull_request_review_id" : 1225872773,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26697",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1054260237/reactions"
      },
      "side" : "RIGHT",
      "start_line" : 74,
      "start_side" : "RIGHT",
      "updated_at" : "2022-12-21T12:06:32Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1054260237",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/69010457?v=4",
         "events_url" : "https://api.github.com/users/stickies-v/events{/privacy}",
         "followers_url" : "https://api.github.com/users/stickies-v/followers",
         "following_url" : "https://api.github.com/users/stickies-v/following{/other_user}",
         "gists_url" : "https://api.github.com/users/stickies-v/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/stickies-v",
         "id" : 69010457,
         "login" : "stickies-v",
         "node_id" : "MDQ6VXNlcjY5MDEwNDU3",
         "organizations_url" : "https://api.github.com/users/stickies-v/orgs",
         "received_events_url" : "https://api.github.com/users/stickies-v/received_events",
         "repos_url" : "https://api.github.com/users/stickies-v/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/stickies-v/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/stickies-v/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/stickies-v"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/26697#discussion_r1054271580"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26697"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1054271580"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "nit: for consistency with `EnableCategory`, could use `.reset()`?",
      "commit_id" : "0dbe9b487face0dc798fc725d671569686883385",
      "created_at" : "2022-12-21T11:15:14Z",
      "diff_hunk" : "@@ -108,7 +119,17 @@ bool BCLog::Logger::EnableCategory(const std::string& str)\n \n void BCLog::Logger::DisableCategory(BCLog::LogFlags flag)\n {\n-    m_categories &= ~flag;\n+    StdLockGuard scoped_lock(m_cs);\n+    switch (flag) {\n+        case BCLog::NONE:\n+            return;\n+        case BCLog::ALL:\n+            // set all the category flags to false\n+            m_categories = 0;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26697#discussion_r1054271580",
      "id" : 1054271580,
      "line" : 128,
      "node_id" : "PRRC_kwDOABII584-1uhc",
      "original_commit_id" : "0dbe9b487face0dc798fc725d671569686883385",
      "original_line" : 128,
      "original_position" : 38,
      "original_start_line" : null,
      "path" : "src/logging.cpp",
      "position" : 38,
      "pull_request_review_id" : 1225872773,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26697",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1054271580/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-12-21T12:06:32Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1054271580",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/69010457?v=4",
         "events_url" : "https://api.github.com/users/stickies-v/events{/privacy}",
         "followers_url" : "https://api.github.com/users/stickies-v/followers",
         "following_url" : "https://api.github.com/users/stickies-v/following{/other_user}",
         "gists_url" : "https://api.github.com/users/stickies-v/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/stickies-v",
         "id" : 69010457,
         "login" : "stickies-v",
         "node_id" : "MDQ6VXNlcjY5MDEwNDU3",
         "organizations_url" : "https://api.github.com/users/stickies-v/orgs",
         "received_events_url" : "https://api.github.com/users/stickies-v/received_events",
         "repos_url" : "https://api.github.com/users/stickies-v/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/stickies-v/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/stickies-v/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/stickies-v"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/26697#discussion_r1054300871"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26697"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1054300871"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Potential more concise alternative (works for DisableCategory too):\r\n```suggestion\r\n    if (flag == BCLog::NONE) return;\r\n    StdLockGuard scoped_lock(m_cs);\r\n    flag == BCLog::ALL ? m_categories.set() : m_categories.set(flag);\r\n```",
      "commit_id" : "0dbe9b487face0dc798fc725d671569686883385",
      "created_at" : "2022-12-21T11:50:24Z",
      "diff_hunk" : "@@ -95,7 +96,17 @@ void BCLog::Logger::DisconnectTestLogger()\n \n void BCLog::Logger::EnableCategory(BCLog::LogFlags flag)\n {\n-    m_categories |= flag;\n+    StdLockGuard scoped_lock(m_cs);\n+    switch (flag) {\n+        case BCLog::NONE:\n+            return;\n+        case BCLog::ALL:\n+            // with no argument, set() sets all the bits to true\n+            m_categories.set();\n+            return;\n+        default: break;\n+    }\n+    if (Assume(flag < NONE)) m_categories.set(flag);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26697#discussion_r1054300871",
      "id" : 1054300871,
      "line" : 109,
      "node_id" : "PRRC_kwDOABII584-11rH",
      "original_commit_id" : "0dbe9b487face0dc798fc725d671569686883385",
      "original_line" : 109,
      "original_position" : 23,
      "original_start_line" : 99,
      "path" : "src/logging.cpp",
      "position" : 23,
      "pull_request_review_id" : 1225872773,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26697",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1054300871/reactions"
      },
      "side" : "RIGHT",
      "start_line" : 99,
      "start_side" : "RIGHT",
      "updated_at" : "2022-12-21T12:06:32Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1054300871",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/69010457?v=4",
         "events_url" : "https://api.github.com/users/stickies-v/events{/privacy}",
         "followers_url" : "https://api.github.com/users/stickies-v/followers",
         "following_url" : "https://api.github.com/users/stickies-v/following{/other_user}",
         "gists_url" : "https://api.github.com/users/stickies-v/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/stickies-v",
         "id" : 69010457,
         "login" : "stickies-v",
         "node_id" : "MDQ6VXNlcjY5MDEwNDU3",
         "organizations_url" : "https://api.github.com/users/stickies-v/orgs",
         "received_events_url" : "https://api.github.com/users/stickies-v/received_events",
         "repos_url" : "https://api.github.com/users/stickies-v/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/stickies-v/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/stickies-v/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/stickies-v"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/26697#discussion_r1054305926"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26697"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1054305926"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "nit: reorder BCLog::LogFlags::NONE here in line with the definition in `logging.h`?",
      "commit_id" : "0dbe9b487face0dc798fc725d671569686883385",
      "created_at" : "2022-12-21T11:56:26Z",
      "diff_hunk" : "@@ -286,6 +312,8 @@ std::string LogCategoryToStr(BCLog::LogFlags category)\n         return \"txreconciliation\";\n     case BCLog::LogFlags::SCAN:\n         return \"scan\";\n+    // Add new entries before this line.\n+",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26697#discussion_r1054305926",
      "id" : 1054305926,
      "line" : 316,
      "node_id" : "PRRC_kwDOABII584-126G",
      "original_commit_id" : "0dbe9b487face0dc798fc725d671569686883385",
      "original_line" : 316,
      "original_position" : 72,
      "original_start_line" : 315,
      "path" : "src/logging.cpp",
      "position" : 72,
      "pull_request_review_id" : 1225872773,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26697",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1054305926/reactions"
      },
      "side" : "RIGHT",
      "start_line" : 315,
      "start_side" : "RIGHT",
      "updated_at" : "2022-12-21T12:06:32Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1054305926",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/69010457?v=4",
         "events_url" : "https://api.github.com/users/stickies-v/events{/privacy}",
         "followers_url" : "https://api.github.com/users/stickies-v/followers",
         "following_url" : "https://api.github.com/users/stickies-v/following{/other_user}",
         "gists_url" : "https://api.github.com/users/stickies-v/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/stickies-v",
         "id" : 69010457,
         "login" : "stickies-v",
         "node_id" : "MDQ6VXNlcjY5MDEwNDU3",
         "organizations_url" : "https://api.github.com/users/stickies-v/orgs",
         "received_events_url" : "https://api.github.com/users/stickies-v/received_events",
         "repos_url" : "https://api.github.com/users/stickies-v/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/stickies-v/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/stickies-v/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/stickies-v"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/26697#discussion_r1054313340"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26697"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1054313340"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "I think \"For ...\" comments are discouraged from use in new code because of maintainability",
      "commit_id" : "0dbe9b487face0dc798fc725d671569686883385",
      "created_at" : "2022-12-21T12:03:36Z",
      "diff_hunk" : "@@ -6,6 +6,7 @@\n #define BITCOIN_INTERFACES_NODE_H\n \n #include <consensus/amount.h>          // For CAmount\n+#include <logging.h>                   // For BCLog",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26697#discussion_r1054313340",
      "id" : 1054313340,
      "line" : 9,
      "node_id" : "PRRC_kwDOABII584-14t8",
      "original_commit_id" : "0dbe9b487face0dc798fc725d671569686883385",
      "original_line" : 9,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "src/interfaces/node.h",
      "position" : 4,
      "pull_request_review_id" : 1225872773,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26697",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1054313340/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-12-21T12:06:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1054313340",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/69010457?v=4",
         "events_url" : "https://api.github.com/users/stickies-v/events{/privacy}",
         "followers_url" : "https://api.github.com/users/stickies-v/followers",
         "following_url" : "https://api.github.com/users/stickies-v/following{/other_user}",
         "gists_url" : "https://api.github.com/users/stickies-v/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/stickies-v",
         "id" : 69010457,
         "login" : "stickies-v",
         "node_id" : "MDQ6VXNlcjY5MDEwNDU3",
         "organizations_url" : "https://api.github.com/users/stickies-v/orgs",
         "received_events_url" : "https://api.github.com/users/stickies-v/received_events",
         "repos_url" : "https://api.github.com/users/stickies-v/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/stickies-v/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/stickies-v/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/stickies-v"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/26697#discussion_r1054314497"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26697"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1054314497"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Not 100% sure about this. Feels a bit brittle to use `Assume` here. Previously it was fine to pass `ALL` or `NONE` here - we could keep that behaviour?",
      "commit_id" : "0dbe9b487face0dc798fc725d671569686883385",
      "created_at" : "2022-12-21T12:04:57Z",
      "diff_hunk" : "@@ -121,7 +142,11 @@ bool BCLog::Logger::DisableCategory(const std::string& str)\n \n bool BCLog::Logger::WillLogCategory(BCLog::LogFlags category) const\n {\n-    return (m_categories.load(std::memory_order_relaxed) & category) != 0;\n+    if (Assume(category < NONE)) {\n+        StdLockGuard scoped_lock(m_cs);\n+        return m_categories.test(category);\n+    }\n+    return false;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26697#discussion_r1054314497",
      "id" : 1054314497,
      "line" : 149,
      "node_id" : "PRRC_kwDOABII584-15AB",
      "original_commit_id" : "0dbe9b487face0dc798fc725d671569686883385",
      "original_line" : 149,
      "original_position" : 55,
      "original_start_line" : 124,
      "path" : "src/logging.cpp",
      "position" : 55,
      "pull_request_review_id" : 1225872773,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26697",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1054314497/reactions"
      },
      "side" : "RIGHT",
      "start_line" : 124,
      "start_side" : "LEFT",
      "updated_at" : "2022-12-21T12:06:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1054314497",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/69010457?v=4",
         "events_url" : "https://api.github.com/users/stickies-v/events{/privacy}",
         "followers_url" : "https://api.github.com/users/stickies-v/followers",
         "following_url" : "https://api.github.com/users/stickies-v/following{/other_user}",
         "gists_url" : "https://api.github.com/users/stickies-v/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/stickies-v",
         "id" : 69010457,
         "login" : "stickies-v",
         "node_id" : "MDQ6VXNlcjY5MDEwNDU3",
         "organizations_url" : "https://api.github.com/users/stickies-v/orgs",
         "received_events_url" : "https://api.github.com/users/stickies-v/received_events",
         "repos_url" : "https://api.github.com/users/stickies-v/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/stickies-v/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/stickies-v/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/stickies-v"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/26697#discussion_r1054859149"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26697"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1054859149"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Tested approach ACK. I haven't yet checked impact on performance with the benchmarks.",
      "commit_id" : "0dbe9b487face0dc798fc725d671569686883385",
      "created_at" : "2022-12-21T21:41:45Z",
      "diff_hunk" : "@@ -104,7 +109,7 @@ namespace BCLog {\n         std::atomic<Level> m_log_level{DEFAULT_LOG_LEVEL};\n \n         /** Log categories bitfield. */\n-        std::atomic<uint32_t> m_categories{0};\n+        LogFlagsBitset m_categories GUARDED_BY(m_cs);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26697#discussion_r1054859149",
      "id" : 1054859149,
      "line" : 112,
      "node_id" : "PRRC_kwDOABII584-39-N",
      "original_commit_id" : "0dbe9b487face0dc798fc725d671569686883385",
      "original_line" : 112,
      "original_position" : 91,
      "original_start_line" : null,
      "path" : "src/logging.h",
      "position" : 91,
      "pull_request_review_id" : 1226783022,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26697",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1054859149/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-12-21T21:41:45Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1054859149",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/26697#discussion_r1054863078"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26697"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1054863078"
         }
      },
      "author_association" : "MEMBER",
      "body" : "For instance, this code can be called frequently with some logging configs IIRC.",
      "commit_id" : "0dbe9b487face0dc798fc725d671569686883385",
      "created_at" : "2022-12-21T21:48:45Z",
      "diff_hunk" : "@@ -121,7 +142,11 @@ bool BCLog::Logger::DisableCategory(const std::string& str)\n \n bool BCLog::Logger::WillLogCategory(BCLog::LogFlags category) const\n {\n-    return (m_categories.load(std::memory_order_relaxed) & category) != 0;\n+    if (Assume(category < NONE)) {\n+        StdLockGuard scoped_lock(m_cs);\n+        return m_categories.test(category);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26697#discussion_r1054863078",
      "id" : 1054863078,
      "line" : 147,
      "node_id" : "PRRC_kwDOABII584-3-7m",
      "original_commit_id" : "0dbe9b487face0dc798fc725d671569686883385",
      "original_line" : 147,
      "original_position" : 53,
      "original_start_line" : null,
      "path" : "src/logging.cpp",
      "position" : 53,
      "pull_request_review_id" : 1226788934,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26697",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1054863078/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-12-21T21:48:45Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1054863078",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/26697#discussion_r1055606603"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26697"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1055606603"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Thanks, good observation, I tried to continue using atomic, but wasn't able to get it to work.\r\n\r\nBut also, I think that with current master, it may be possible for two threads to try to enable two different logging categories at the same time, and one silently fails (both threads read, thread 1 writes, thread 2 writes, undoing thread 1's write). Using a mutex as this PR does solves this problem. What do you think? Maybe still better to use `std::atomic`?",
      "commit_id" : "0dbe9b487face0dc798fc725d671569686883385",
      "created_at" : "2022-12-22T15:56:59Z",
      "diff_hunk" : "@@ -121,7 +142,11 @@ bool BCLog::Logger::DisableCategory(const std::string& str)\n \n bool BCLog::Logger::WillLogCategory(BCLog::LogFlags category) const\n {\n-    return (m_categories.load(std::memory_order_relaxed) & category) != 0;\n+    if (Assume(category < NONE)) {\n+        StdLockGuard scoped_lock(m_cs);\n+        return m_categories.test(category);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26697#discussion_r1055606603",
      "id" : 1055606603,
      "in_reply_to_id" : 1054863078,
      "line" : 147,
      "node_id" : "PRRC_kwDOABII584-60dL",
      "original_commit_id" : "0dbe9b487face0dc798fc725d671569686883385",
      "original_line" : 147,
      "original_position" : 53,
      "original_start_line" : null,
      "path" : "src/logging.cpp",
      "position" : 53,
      "pull_request_review_id" : 1227888615,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26697",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1055606603/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-12-22T15:57:00Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1055606603",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8321330?v=4",
         "events_url" : "https://api.github.com/users/LarryRuane/events{/privacy}",
         "followers_url" : "https://api.github.com/users/LarryRuane/followers",
         "following_url" : "https://api.github.com/users/LarryRuane/following{/other_user}",
         "gists_url" : "https://api.github.com/users/LarryRuane/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/LarryRuane",
         "id" : 8321330,
         "login" : "LarryRuane",
         "node_id" : "MDQ6VXNlcjgzMjEzMzA=",
         "organizations_url" : "https://api.github.com/users/LarryRuane/orgs",
         "received_events_url" : "https://api.github.com/users/LarryRuane/received_events",
         "repos_url" : "https://api.github.com/users/LarryRuane/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/LarryRuane/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/LarryRuane/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/LarryRuane"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/26697#discussion_r1055609306"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26697"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1055609306"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Maybe this should be a rw lock? You're correct that testing performance is more important, and using rw lock would help with that.",
      "commit_id" : "0dbe9b487face0dc798fc725d671569686883385",
      "created_at" : "2022-12-22T15:59:42Z",
      "diff_hunk" : "@@ -121,7 +142,11 @@ bool BCLog::Logger::DisableCategory(const std::string& str)\n \n bool BCLog::Logger::WillLogCategory(BCLog::LogFlags category) const\n {\n-    return (m_categories.load(std::memory_order_relaxed) & category) != 0;\n+    if (Assume(category < NONE)) {\n+        StdLockGuard scoped_lock(m_cs);\n+        return m_categories.test(category);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26697#discussion_r1055609306",
      "id" : 1055609306,
      "in_reply_to_id" : 1054863078,
      "line" : 147,
      "node_id" : "PRRC_kwDOABII584-61Ha",
      "original_commit_id" : "0dbe9b487face0dc798fc725d671569686883385",
      "original_line" : 147,
      "original_position" : 53,
      "original_start_line" : null,
      "path" : "src/logging.cpp",
      "position" : 53,
      "pull_request_review_id" : 1227892403,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26697",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1055609306/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-12-22T15:59:42Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1055609306",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8321330?v=4",
         "events_url" : "https://api.github.com/users/LarryRuane/events{/privacy}",
         "followers_url" : "https://api.github.com/users/LarryRuane/followers",
         "following_url" : "https://api.github.com/users/LarryRuane/following{/other_user}",
         "gists_url" : "https://api.github.com/users/LarryRuane/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/LarryRuane",
         "id" : 8321330,
         "login" : "LarryRuane",
         "node_id" : "MDQ6VXNlcjgzMjEzMzA=",
         "organizations_url" : "https://api.github.com/users/LarryRuane/orgs",
         "received_events_url" : "https://api.github.com/users/LarryRuane/received_events",
         "repos_url" : "https://api.github.com/users/LarryRuane/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/LarryRuane/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/LarryRuane/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/LarryRuane"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/26697#discussion_r1055885368"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26697"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1055885368"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Currently, neither `NONE` nor `ALL` is passed to this function. The only caller to this function is `LogAcceptCategory()`, which is called by `LogPrint()` and similar, and only actual logging categories (for example, `BCLog::NET`) are passed to those, never `NONE` or `ALL`. I don't think passing those makes sense. `NONE` would mean don't log at all (so why is the `LogPrint` statement there to begin with?), and `ALL` would be just the same as `LogPrintf()`. We could make those work, I guess. But, as I said, they're not used today.\r\n\r\nBut here I would like to not use `NONE`; better to use `m_categories.size()`.\r\n\r\nI think the `Assume()` is nice to keep, because we would like to know if someone calls `LogPrint(BCLog::NONE, ...)` (or similar).",
      "commit_id" : "0dbe9b487face0dc798fc725d671569686883385",
      "created_at" : "2022-12-22T21:52:46Z",
      "diff_hunk" : "@@ -121,7 +142,11 @@ bool BCLog::Logger::DisableCategory(const std::string& str)\n \n bool BCLog::Logger::WillLogCategory(BCLog::LogFlags category) const\n {\n-    return (m_categories.load(std::memory_order_relaxed) & category) != 0;\n+    if (Assume(category < NONE)) {\n+        StdLockGuard scoped_lock(m_cs);\n+        return m_categories.test(category);\n+    }\n+    return false;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26697#discussion_r1055885368",
      "id" : 1055885368,
      "in_reply_to_id" : 1054314497,
      "line" : 149,
      "node_id" : "PRRC_kwDOABII584-74g4",
      "original_commit_id" : "0dbe9b487face0dc798fc725d671569686883385",
      "original_line" : 149,
      "original_position" : 55,
      "original_start_line" : 124,
      "path" : "src/logging.cpp",
      "position" : 55,
      "pull_request_review_id" : 1228315299,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26697",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1055885368/reactions"
      },
      "side" : "RIGHT",
      "start_line" : 124,
      "start_side" : "LEFT",
      "updated_at" : "2022-12-22T21:52:46Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1055885368",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8321330?v=4",
         "events_url" : "https://api.github.com/users/LarryRuane/events{/privacy}",
         "followers_url" : "https://api.github.com/users/LarryRuane/followers",
         "following_url" : "https://api.github.com/users/LarryRuane/following{/other_user}",
         "gists_url" : "https://api.github.com/users/LarryRuane/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/LarryRuane",
         "id" : 8321330,
         "login" : "LarryRuane",
         "node_id" : "MDQ6VXNlcjgzMjEzMzA=",
         "organizations_url" : "https://api.github.com/users/LarryRuane/orgs",
         "received_events_url" : "https://api.github.com/users/LarryRuane/received_events",
         "repos_url" : "https://api.github.com/users/LarryRuane/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/LarryRuane/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/LarryRuane/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/LarryRuane"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/26697#discussion_r1055932559"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26697"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1055932559"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Yeah they're not currently being used, but I think (unnecessarily) bounding which elements of an enum we can accept is confusing at best since that exception is not immediately obvious from the function signature. It can also make maintenance more burdensome. And even _if_ we don't see any use cases (and I think, for example, it's not unreasonable for a future callsite to check if  _any_ logging is happening at the moment), I still think we shouldn't necessarily prevent `ALL` or `NONE` from being used.\r\n\r\nAs an alternative solution, I think having a single function to convert `LogFlags` into `LogFlagsBitSet` simplifies the code and allows callsites to accept any kind of LogFlags:\r\n\r\n<details>\r\n<summary>git diff on 0dbe9b487</summary>\r\n\r\n```diff\r\ndiff --git a/src/logging.cpp b/src/logging.cpp\r\nindex 970f99c12..10b0110c6 100644\r\n--- a/src/logging.cpp\r\n+++ b/src/logging.cpp\r\n@@ -94,19 +94,18 @@ void BCLog::Logger::DisconnectTestLogger()\r\n     m_print_callbacks.clear();\r\n }\r\n \r\n+/** Convert LogFlags into their equivalent bitset for generalized bitwise comparison */\r\n+BCLog::LogFlagsBitset FlagToBitset(BCLog::LogFlags flag){\r\n+    BCLog::LogFlagsBitset flag_bitset;\r\n+    if (flag == BCLog::LogFlags::NONE) return flag_bitset;\r\n+    flag == BCLog::LogFlags::ALL ? flag_bitset.set() : flag_bitset.set(flag);\r\n+    return flag_bitset;\r\n+}\r\n+\r\n void BCLog::Logger::EnableCategory(BCLog::LogFlags flag)\r\n {\r\n     StdLockGuard scoped_lock(m_cs);\r\n-    switch (flag) {\r\n-        case BCLog::NONE:\r\n-            return;\r\n-        case BCLog::ALL:\r\n-            // with no argument, set() sets all the bits to true\r\n-            m_categories.set();\r\n-            return;\r\n-        default: break;\r\n-    }\r\n-    if (Assume(flag < NONE)) m_categories.set(flag);\r\n+    m_categories |= FlagToBitset(flag);\r\n }\r\n \r\n bool BCLog::Logger::EnableCategory(const std::string& str)\r\n@@ -120,16 +119,7 @@ bool BCLog::Logger::EnableCategory(const std::string& str)\r\n void BCLog::Logger::DisableCategory(BCLog::LogFlags flag)\r\n {\r\n     StdLockGuard scoped_lock(m_cs);\r\n-    switch (flag) {\r\n-        case BCLog::NONE:\r\n-            return;\r\n-        case BCLog::ALL:\r\n-            // set all the category flags to false\r\n-            m_categories = 0;\r\n-            return;\r\n-        default: break;\r\n-    }\r\n-    if (Assume(flag < NONE)) m_categories.reset(flag);\r\n+    m_categories &= ~FlagToBitset(flag);\r\n }\r\n \r\n bool BCLog::Logger::DisableCategory(const std::string& str)\r\n@@ -139,14 +129,10 @@ bool BCLog::Logger::DisableCategory(const std::string& str)\r\n     DisableCategory(flag);\r\n     return true;\r\n }\r\n-\r\n bool BCLog::Logger::WillLogCategory(BCLog::LogFlags category) const\r\n {\r\n-    if (Assume(category < NONE)) {\r\n-        StdLockGuard scoped_lock(m_cs);\r\n-        return m_categories.test(category);\r\n-    }\r\n-    return false;\r\n+    StdLockGuard scoped_lock(m_cs);\r\n+    return (m_categories & FlagToBitset(category)) != 0;\r\n }\r\n \r\n bool BCLog::Logger::WillLogCategoryLevel(BCLog::LogFlags category, BCLog::Level level) const\r\n```\r\n</details>\r\n\r\n_(Note: at this point, we also almost just as well might have `m_categories` be a `uint64_t` instead of `std::bitset`, but I'm not very familar with the trade-offs between `std::bitset` and `uint64_t` - it seems bitsets can be a bit safer to use?)_",
      "commit_id" : "0dbe9b487face0dc798fc725d671569686883385",
      "created_at" : "2022-12-22T23:39:51Z",
      "diff_hunk" : "@@ -121,7 +142,11 @@ bool BCLog::Logger::DisableCategory(const std::string& str)\n \n bool BCLog::Logger::WillLogCategory(BCLog::LogFlags category) const\n {\n-    return (m_categories.load(std::memory_order_relaxed) & category) != 0;\n+    if (Assume(category < NONE)) {\n+        StdLockGuard scoped_lock(m_cs);\n+        return m_categories.test(category);\n+    }\n+    return false;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26697#discussion_r1055932559",
      "id" : 1055932559,
      "in_reply_to_id" : 1054314497,
      "line" : 149,
      "node_id" : "PRRC_kwDOABII584-8ECP",
      "original_commit_id" : "0dbe9b487face0dc798fc725d671569686883385",
      "original_line" : 149,
      "original_position" : 55,
      "original_start_line" : 124,
      "path" : "src/logging.cpp",
      "position" : 55,
      "pull_request_review_id" : 1228384317,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26697",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1055932559/reactions"
      },
      "side" : "RIGHT",
      "start_line" : 124,
      "start_side" : "LEFT",
      "updated_at" : "2022-12-22T23:44:44Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1055932559",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/69010457?v=4",
         "events_url" : "https://api.github.com/users/stickies-v/events{/privacy}",
         "followers_url" : "https://api.github.com/users/stickies-v/followers",
         "following_url" : "https://api.github.com/users/stickies-v/following{/other_user}",
         "gists_url" : "https://api.github.com/users/stickies-v/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/stickies-v",
         "id" : 69010457,
         "login" : "stickies-v",
         "node_id" : "MDQ6VXNlcjY5MDEwNDU3",
         "organizations_url" : "https://api.github.com/users/stickies-v/orgs",
         "received_events_url" : "https://api.github.com/users/stickies-v/received_events",
         "repos_url" : "https://api.github.com/users/stickies-v/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/stickies-v/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/stickies-v/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/stickies-v"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/26697#discussion_r1055933151"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26697"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1055933151"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "As per my footnote on https://github.com/bitcoin/bitcoin/pull/26697#discussion_r1055932559 - if using `std::atomic<uint64_t>` would improve performance, that could be an argument to stop using the bitset altogether?",
      "commit_id" : "0dbe9b487face0dc798fc725d671569686883385",
      "created_at" : "2022-12-22T23:41:42Z",
      "diff_hunk" : "@@ -121,7 +142,11 @@ bool BCLog::Logger::DisableCategory(const std::string& str)\n \n bool BCLog::Logger::WillLogCategory(BCLog::LogFlags category) const\n {\n-    return (m_categories.load(std::memory_order_relaxed) & category) != 0;\n+    if (Assume(category < NONE)) {\n+        StdLockGuard scoped_lock(m_cs);\n+        return m_categories.test(category);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26697#discussion_r1055933151",
      "id" : 1055933151,
      "in_reply_to_id" : 1054863078,
      "line" : 147,
      "node_id" : "PRRC_kwDOABII584-8ELf",
      "original_commit_id" : "0dbe9b487face0dc798fc725d671569686883385",
      "original_line" : 147,
      "original_position" : 53,
      "original_start_line" : null,
      "path" : "src/logging.cpp",
      "position" : 53,
      "pull_request_review_id" : 1228385070,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26697",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1055933151/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-12-22T23:41:42Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1055933151",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/69010457?v=4",
         "events_url" : "https://api.github.com/users/stickies-v/events{/privacy}",
         "followers_url" : "https://api.github.com/users/stickies-v/followers",
         "following_url" : "https://api.github.com/users/stickies-v/following{/other_user}",
         "gists_url" : "https://api.github.com/users/stickies-v/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/stickies-v",
         "id" : 69010457,
         "login" : "stickies-v",
         "node_id" : "MDQ6VXNlcjY5MDEwNDU3",
         "organizations_url" : "https://api.github.com/users/stickies-v/orgs",
         "received_events_url" : "https://api.github.com/users/stickies-v/received_events",
         "repos_url" : "https://api.github.com/users/stickies-v/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/stickies-v/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/stickies-v/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/stickies-v"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/26697#discussion_r1055934846"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26697"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1055934846"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "I guess in more generalized terms: I think in this approach it's nice that we have a single place (`FlagToBitset()`) where we define what each LogFlag means, as opposed to having to redefine that in every function.",
      "commit_id" : "0dbe9b487face0dc798fc725d671569686883385",
      "created_at" : "2022-12-22T23:46:54Z",
      "diff_hunk" : "@@ -121,7 +142,11 @@ bool BCLog::Logger::DisableCategory(const std::string& str)\n \n bool BCLog::Logger::WillLogCategory(BCLog::LogFlags category) const\n {\n-    return (m_categories.load(std::memory_order_relaxed) & category) != 0;\n+    if (Assume(category < NONE)) {\n+        StdLockGuard scoped_lock(m_cs);\n+        return m_categories.test(category);\n+    }\n+    return false;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26697#discussion_r1055934846",
      "id" : 1055934846,
      "in_reply_to_id" : 1054314497,
      "line" : 149,
      "node_id" : "PRRC_kwDOABII584-8El-",
      "original_commit_id" : "0dbe9b487face0dc798fc725d671569686883385",
      "original_line" : 149,
      "original_position" : 55,
      "original_start_line" : 124,
      "path" : "src/logging.cpp",
      "position" : 55,
      "pull_request_review_id" : 1228387337,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26697",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1055934846/reactions"
      },
      "side" : "RIGHT",
      "start_line" : 124,
      "start_side" : "LEFT",
      "updated_at" : "2022-12-22T23:46:55Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1055934846",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/69010457?v=4",
         "events_url" : "https://api.github.com/users/stickies-v/events{/privacy}",
         "followers_url" : "https://api.github.com/users/stickies-v/followers",
         "following_url" : "https://api.github.com/users/stickies-v/following{/other_user}",
         "gists_url" : "https://api.github.com/users/stickies-v/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/stickies-v",
         "id" : 69010457,
         "login" : "stickies-v",
         "node_id" : "MDQ6VXNlcjY5MDEwNDU3",
         "organizations_url" : "https://api.github.com/users/stickies-v/orgs",
         "received_events_url" : "https://api.github.com/users/stickies-v/received_events",
         "repos_url" : "https://api.github.com/users/stickies-v/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/stickies-v/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/stickies-v/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/stickies-v"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/26697#discussion_r1056625836"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26697"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1056625836"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "> I still think we shouldn't necessarily prevent ALL or NONE from being used.\r\n\r\nI like this idea, I just force-pushed an update (40e1923e856661fdf68cf783ed9c6d1931dfbdf3) to allow those to have the obvious meanings when specified by `LogPrint()` (i.e. `WillLogCategory()`).\r\n\r\nAs for `FlagToBitset()`, that's very interesting, but it has the downside that evaluating `m_categories & FlagToBitset(category)` (in `WillLogCategory()`) requires (in effect) checking all of the categories (bits), whereas `m_categories.test(category)` checks only one and so _feels_ more efficient (although it may not really be, depending on the implementation). Also, `FlagToBitset()` makes an actual function call to the constructor (I verified this using https://godbolt.org/), and there may also be a call from `WillLogCategory()` to `FlagToBitset()` (if the compiler doesn't inline it). Since these happen for testing a category, which is performance-critical, perhaps they should be avoided.\r\n\r\n> we also almost just as well might have m_categories be a uint64_t ...\r\n\r\nOne nice advantage of using `std::bitset` is that the `BCLog::LogFlags` categories are a simple `enum`, rather than being defined with a manually-selected shift constant, like `1 << 28`. Also, this seems like a perfect use case for `std::bitset` and is just more modern than low-level bit manipulation. So I think I still like `std::bitset` here.",
      "commit_id" : "40e1923e856661fdf68cf783ed9c6d1931dfbdf3",
      "created_at" : "2022-12-23T19:51:11Z",
      "diff_hunk" : "@@ -121,7 +142,11 @@ bool BCLog::Logger::DisableCategory(const std::string& str)\n \n bool BCLog::Logger::WillLogCategory(BCLog::LogFlags category) const\n {\n-    return (m_categories.load(std::memory_order_relaxed) & category) != 0;\n+    if (Assume(category < NONE)) {\n+        StdLockGuard scoped_lock(m_cs);\n+        return m_categories.test(category);\n+    }\n+    return false;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26697#discussion_r1056625836",
      "id" : 1056625836,
      "in_reply_to_id" : 1054314497,
      "line" : null,
      "node_id" : "PRRC_kwDOABII584--tSs",
      "original_commit_id" : "0dbe9b487face0dc798fc725d671569686883385",
      "original_line" : 149,
      "original_position" : 55,
      "original_start_line" : 124,
      "path" : "src/logging.cpp",
      "position" : null,
      "pull_request_review_id" : 1229376474,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26697",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1056625836/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : "LEFT",
      "updated_at" : "2022-12-23T19:51:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1056625836",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8321330?v=4",
         "events_url" : "https://api.github.com/users/LarryRuane/events{/privacy}",
         "followers_url" : "https://api.github.com/users/LarryRuane/followers",
         "following_url" : "https://api.github.com/users/LarryRuane/following{/other_user}",
         "gists_url" : "https://api.github.com/users/LarryRuane/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/LarryRuane",
         "id" : 8321330,
         "login" : "LarryRuane",
         "node_id" : "MDQ6VXNlcjgzMjEzMzA=",
         "organizations_url" : "https://api.github.com/users/LarryRuane/orgs",
         "received_events_url" : "https://api.github.com/users/LarryRuane/received_events",
         "repos_url" : "https://api.github.com/users/LarryRuane/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/LarryRuane/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/LarryRuane/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/LarryRuane"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Force pushed 40e1923e856661fdf68cf783ed9c6d1931dfbdf3 to address review comments (thanks, @stickies-v!):\r\n\r\n- remove the unnecessary comment on `#include <logging.h>` line\r\n- simplify `EnableCategory()` and `DisableCategory()`, and remove the calls to `Assume()`\r\n- allow `WillLogCategory()` to work with special logging categories `NONE` and `ALL`\r\n- remove unnecessary `size_t` from the definition of `enum LogFlags`\r\n- reverse the order of `NONE` and `ALL` so that `LogFlagsBitset` can be `std::bitset<ALL>`",
      "created_at" : "2022-12-23T19:58:42Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26697#issuecomment-1364282228",
      "id" : 1364282228,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/26697",
      "node_id" : "IC_kwDOABII585RUUt0",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1364282228/reactions"
      },
      "updated_at" : "2022-12-23T19:58:42Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1364282228",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8321330?v=4",
         "events_url" : "https://api.github.com/users/LarryRuane/events{/privacy}",
         "followers_url" : "https://api.github.com/users/LarryRuane/followers",
         "following_url" : "https://api.github.com/users/LarryRuane/following{/other_user}",
         "gists_url" : "https://api.github.com/users/LarryRuane/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/LarryRuane",
         "id" : 8321330,
         "login" : "LarryRuane",
         "node_id" : "MDQ6VXNlcjgzMjEzMzA=",
         "organizations_url" : "https://api.github.com/users/LarryRuane/orgs",
         "received_events_url" : "https://api.github.com/users/LarryRuane/received_events",
         "repos_url" : "https://api.github.com/users/LarryRuane/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/LarryRuane/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/LarryRuane/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/LarryRuane"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "Concept ACK",
      "created_at" : "2023-01-18T02:34:13Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26697#issuecomment-1386387062",
      "id" : 1386387062,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/26697",
      "node_id" : "IC_kwDOABII585SopZ2",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1386387062/reactions"
      },
      "updated_at" : "2023-01-18T02:34:13Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1386387062",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/15950706?v=4",
         "events_url" : "https://api.github.com/users/kevkevinpal/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kevkevinpal/followers",
         "following_url" : "https://api.github.com/users/kevkevinpal/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kevkevinpal/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kevkevinpal",
         "id" : 15950706,
         "login" : "kevkevinpal",
         "node_id" : "MDQ6VXNlcjE1OTUwNzA2",
         "organizations_url" : "https://api.github.com/users/kevkevinpal/orgs",
         "received_events_url" : "https://api.github.com/users/kevkevinpal/received_events",
         "repos_url" : "https://api.github.com/users/kevkevinpal/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kevkevinpal/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kevkevinpal/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kevkevinpal"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/26697#discussion_r1073693189"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26697"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1073693189"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "We refer to those as \"categories\" in multiple occasions, which I found a bit confusing while reading the code. Is touching this an opportunity to replace \"flags\" with \"categories\"? \r\n(This has also been suggested in https://github.com/bitcoin/bitcoin/pull/25614#pullrequestreview-1078726454)\r\n\r\nAlso, reading a bit on `enum`, my understanding is that the underlying type is `int` unless a different type is specified ([strongly typed enum](https://www.modernescpp.com/index.php/strongly-typed-enums)).",
      "commit_id" : "40e1923e856661fdf68cf783ed9c6d1931dfbdf3",
      "created_at" : "2023-01-18T15:30:38Z",
      "diff_hunk" : "@@ -35,41 +36,45 @@ struct LogCategory {\n };\n \n namespace BCLog {\n-    enum LogFlags : uint32_t {\n-        NONE        = 0,\n-        NET         = (1 <<  0),\n-        TOR         = (1 <<  1),\n-        MEMPOOL     = (1 <<  2),\n-        HTTP        = (1 <<  3),\n-        BENCH       = (1 <<  4),\n-        ZMQ         = (1 <<  5),\n-        WALLETDB    = (1 <<  6),\n-        RPC         = (1 <<  7),\n-        ESTIMATEFEE = (1 <<  8),\n-        ADDRMAN     = (1 <<  9),\n-        SELECTCOINS = (1 << 10),\n-        REINDEX     = (1 << 11),\n-        CMPCTBLOCK  = (1 << 12),\n-        RAND        = (1 << 13),\n-        PRUNE       = (1 << 14),\n-        PROXY       = (1 << 15),\n-        MEMPOOLREJ  = (1 << 16),\n-        LIBEVENT    = (1 << 17),\n-        COINDB      = (1 << 18),\n-        QT          = (1 << 19),\n-        LEVELDB     = (1 << 20),\n-        VALIDATION  = (1 << 21),\n-        I2P         = (1 << 22),\n-        IPC         = (1 << 23),\n+    enum LogFlags {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26697#discussion_r1073693189",
      "id" : 1073693189,
      "line" : 39,
      "node_id" : "PRRC_kwDOABII584__0IF",
      "original_commit_id" : "40e1923e856661fdf68cf783ed9c6d1931dfbdf3",
      "original_line" : 39,
      "original_position" : 38,
      "original_start_line" : null,
      "path" : "src/logging.h",
      "position" : 38,
      "pull_request_review_id" : 1253717862,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26697",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1073693189/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2023-01-18T16:50:09Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1073693189",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/18506343?v=4",
         "events_url" : "https://api.github.com/users/kouloumos/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kouloumos/followers",
         "following_url" : "https://api.github.com/users/kouloumos/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kouloumos/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kouloumos",
         "id" : 18506343,
         "login" : "kouloumos",
         "node_id" : "MDQ6VXNlcjE4NTA2MzQz",
         "organizations_url" : "https://api.github.com/users/kouloumos/orgs",
         "received_events_url" : "https://api.github.com/users/kouloumos/received_events",
         "repos_url" : "https://api.github.com/users/kouloumos/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kouloumos/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kouloumos/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kouloumos"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "Tested ACK 40e1923e\r\n\r\nWith two disclaimers:\r\na. I should not be considered a C++ programmer\r\nb. this is my first review for Bitcoin Core\r\n\r\nI tested as follows:\r\n\r\n1. I ran all unittests in random order: pass\r\n\r\n2. I ran all functional tests except wallet tests (as I didn't compile the wallet in): pass (two rpc tests timed out, which was unrelated to this PR)\r\n\r\n3. I added a new logging category \"fakecategory\" to the logging code plus a LogPrint call using it ([git diff](https://github.com/bitcoin/bitcoin/files/10448014/gitdiff_fakecategory.txt)). I turned the category on via bitcoin.conf (tried both explicitly by its name, and by using \"debug=1\"). I turned off and on via rpc (again both explicitly by its name, and by using \"all\") Result: the LogPrint message showed up in debug.log where and when I expected it.\r\n\r\n4. I tried to break things: I moved the new logging category to a wrong place within the BCLog::LogFlags enum. I tried two spots: between ALL and NONE, and after NONE. Each spot made logging_tests.cpp fail ([example output](https://github.com/bitcoin/bitcoin/files/10448121/unittest_fails.txt)).",
      "created_at" : "2023-01-18T15:46:30Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26697#issuecomment-1387281337",
      "id" : 1387281337,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/26697",
      "node_id" : "IC_kwDOABII585SsDu5",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1387281337/reactions"
      },
      "updated_at" : "2023-01-18T15:46:30Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1387281337",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/121280309?v=4",
         "events_url" : "https://api.github.com/users/codobtc/events{/privacy}",
         "followers_url" : "https://api.github.com/users/codobtc/followers",
         "following_url" : "https://api.github.com/users/codobtc/following{/other_user}",
         "gists_url" : "https://api.github.com/users/codobtc/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/codobtc",
         "id" : 121280309,
         "login" : "codobtc",
         "node_id" : "U_kgDOBzqXNQ",
         "organizations_url" : "https://api.github.com/users/codobtc/orgs",
         "received_events_url" : "https://api.github.com/users/codobtc/received_events",
         "repos_url" : "https://api.github.com/users/codobtc/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/codobtc/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/codobtc/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/codobtc"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/26697#discussion_r1083376907"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26697"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1083376907"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Currently `BCLog::LogFlags` can represent multiple categories, whereas after this patch it can only represent one at a time, with `LogFlagsBitset` taking over representing multiple categories. Also, you can no longer represent multiple categories by writing `BCLog::NET | BCLog::MEMPOOL`. The `ALL` and `NONE` values in particular would seem much more sensible if they had the `bitset` type.\r\n\r\nMight be worth making `class LogFlagsSet { private: std::bitset<Flags::COUNT> m_flags; public: ... }` and being more explicit about what operations are supported (and more strict about needing to provide a `BCLog::LogFlags` rather than an arbitrary `int` for various operations).",
      "commit_id" : "40e1923e856661fdf68cf783ed9c6d1931dfbdf3",
      "created_at" : "2023-01-22T01:26:20Z",
      "diff_hunk" : "@@ -35,41 +36,45 @@ struct LogCategory {\n };\n \n namespace BCLog {\n-    enum LogFlags : uint32_t {\n-        NONE        = 0,\n-        NET         = (1 <<  0),\n-        TOR         = (1 <<  1),\n-        MEMPOOL     = (1 <<  2),\n-        HTTP        = (1 <<  3),\n-        BENCH       = (1 <<  4),\n-        ZMQ         = (1 <<  5),\n-        WALLETDB    = (1 <<  6),\n-        RPC         = (1 <<  7),\n-        ESTIMATEFEE = (1 <<  8),\n-        ADDRMAN     = (1 <<  9),\n-        SELECTCOINS = (1 << 10),\n-        REINDEX     = (1 << 11),\n-        CMPCTBLOCK  = (1 << 12),\n-        RAND        = (1 << 13),\n-        PRUNE       = (1 << 14),\n-        PROXY       = (1 << 15),\n-        MEMPOOLREJ  = (1 << 16),\n-        LIBEVENT    = (1 << 17),\n-        COINDB      = (1 << 18),\n-        QT          = (1 << 19),\n-        LEVELDB     = (1 << 20),\n-        VALIDATION  = (1 << 21),\n-        I2P         = (1 << 22),\n-        IPC         = (1 << 23),\n+    enum LogFlags {\n+        NET,\n+        TOR,\n+        MEMPOOL,\n+        HTTP,\n+        BENCH,\n+        ZMQ,\n+        WALLETDB,\n+        RPC,\n+        ESTIMATEFEE,\n+        ADDRMAN,\n+        SELECTCOINS,\n+        REINDEX,\n+        CMPCTBLOCK,\n+        RAND,\n+        PRUNE,\n+        PROXY,\n+        MEMPOOLREJ,\n+        LIBEVENT,\n+        COINDB,\n+        QT,\n+        LEVELDB,\n+        VALIDATION,\n+        I2P,\n+        IPC,\n #ifdef DEBUG_LOCKCONTENTION\n-        LOCK        = (1 << 24),\n+        LOCK,\n #endif\n-        UTIL        = (1 << 25),\n-        BLOCKSTORE  = (1 << 26),\n-        TXRECONCILIATION = (1 << 27),\n-        SCAN        = (1 << 28),\n-        ALL         = ~(uint32_t)0,\n+        UTIL,\n+        BLOCKSTORE,\n+        TXRECONCILIATION,\n+        SCAN,\n+        // Add new entries before this line.\n+\n+        // The following have no representation in m_categories:\n+        ALL, // this is also the size of the bitset\n+        NONE,\n     };\n+    using LogFlagsBitset = std::bitset<ALL>;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26697#discussion_r1083376907",
      "id" : 1083376907,
      "line" : 77,
      "node_id" : "PRRC_kwDOABII585AkwUL",
      "original_commit_id" : "40e1923e856661fdf68cf783ed9c6d1931dfbdf3",
      "original_line" : 77,
      "original_position" : 82,
      "original_start_line" : null,
      "path" : "src/logging.h",
      "position" : 82,
      "pull_request_review_id" : 1264707518,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26697",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1083376907/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2023-01-22T01:58:26Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1083376907",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/127186?v=4",
         "events_url" : "https://api.github.com/users/ajtowns/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ajtowns/followers",
         "following_url" : "https://api.github.com/users/ajtowns/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ajtowns/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ajtowns",
         "id" : 127186,
         "login" : "ajtowns",
         "node_id" : "MDQ6VXNlcjEyNzE4Ng==",
         "organizations_url" : "https://api.github.com/users/ajtowns/orgs",
         "received_events_url" : "https://api.github.com/users/ajtowns/received_events",
         "repos_url" : "https://api.github.com/users/ajtowns/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ajtowns/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ajtowns/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ajtowns"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/26697#discussion_r1083376951"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26697"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1083376951"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "I think this should be an `enum class` to make it an error to do bitwise operations?",
      "commit_id" : "40e1923e856661fdf68cf783ed9c6d1931dfbdf3",
      "created_at" : "2023-01-22T01:26:44Z",
      "diff_hunk" : "@@ -35,41 +36,45 @@ struct LogCategory {\n };\n \n namespace BCLog {\n-    enum LogFlags : uint32_t {\n-        NONE        = 0,\n-        NET         = (1 <<  0),\n-        TOR         = (1 <<  1),\n-        MEMPOOL     = (1 <<  2),\n-        HTTP        = (1 <<  3),\n-        BENCH       = (1 <<  4),\n-        ZMQ         = (1 <<  5),\n-        WALLETDB    = (1 <<  6),\n-        RPC         = (1 <<  7),\n-        ESTIMATEFEE = (1 <<  8),\n-        ADDRMAN     = (1 <<  9),\n-        SELECTCOINS = (1 << 10),\n-        REINDEX     = (1 << 11),\n-        CMPCTBLOCK  = (1 << 12),\n-        RAND        = (1 << 13),\n-        PRUNE       = (1 << 14),\n-        PROXY       = (1 << 15),\n-        MEMPOOLREJ  = (1 << 16),\n-        LIBEVENT    = (1 << 17),\n-        COINDB      = (1 << 18),\n-        QT          = (1 << 19),\n-        LEVELDB     = (1 << 20),\n-        VALIDATION  = (1 << 21),\n-        I2P         = (1 << 22),\n-        IPC         = (1 << 23),\n+    enum LogFlags {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26697#discussion_r1083376951",
      "id" : 1083376951,
      "in_reply_to_id" : 1073693189,
      "line" : 39,
      "node_id" : "PRRC_kwDOABII585AkwU3",
      "original_commit_id" : "40e1923e856661fdf68cf783ed9c6d1931dfbdf3",
      "original_line" : 39,
      "original_position" : 38,
      "original_start_line" : null,
      "path" : "src/logging.h",
      "position" : 38,
      "pull_request_review_id" : 1264707518,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26697",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1083376951/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2023-01-22T01:58:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1083376951",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/127186?v=4",
         "events_url" : "https://api.github.com/users/ajtowns/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ajtowns/followers",
         "following_url" : "https://api.github.com/users/ajtowns/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ajtowns/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ajtowns",
         "id" : 127186,
         "login" : "ajtowns",
         "node_id" : "MDQ6VXNlcjEyNzE4Ng==",
         "organizations_url" : "https://api.github.com/users/ajtowns/orgs",
         "received_events_url" : "https://api.github.com/users/ajtowns/received_events",
         "repos_url" : "https://api.github.com/users/ajtowns/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ajtowns/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ajtowns/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ajtowns"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/26697#discussion_r1083377071"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26697"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1083377071"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Seems strange to do this as a `? :` operation rather than `if .. else ..`",
      "commit_id" : "40e1923e856661fdf68cf783ed9c6d1931dfbdf3",
      "created_at" : "2023-01-22T01:28:59Z",
      "diff_hunk" : "@@ -95,7 +96,9 @@ void BCLog::Logger::DisconnectTestLogger()\n \n void BCLog::Logger::EnableCategory(BCLog::LogFlags flag)\n {\n-    m_categories |= flag;\n+    if (flag == BCLog::NONE) return;\n+    StdLockGuard scoped_lock(m_cs);\n+    (flag == BCLog::ALL) ? m_categories.set() : m_categories.set(flag);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26697#discussion_r1083377071",
      "id" : 1083377071,
      "line" : 101,
      "node_id" : "PRRC_kwDOABII585AkwWv",
      "original_commit_id" : "40e1923e856661fdf68cf783ed9c6d1931dfbdf3",
      "original_line" : 101,
      "original_position" : 15,
      "original_start_line" : null,
      "path" : "src/logging.cpp",
      "position" : 15,
      "pull_request_review_id" : 1264707518,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26697",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1083377071/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2023-01-22T01:58:26Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1083377071",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/127186?v=4",
         "events_url" : "https://api.github.com/users/ajtowns/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ajtowns/followers",
         "following_url" : "https://api.github.com/users/ajtowns/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ajtowns/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ajtowns",
         "id" : 127186,
         "login" : "ajtowns",
         "node_id" : "MDQ6VXNlcjEyNzE4Ng==",
         "organizations_url" : "https://api.github.com/users/ajtowns/orgs",
         "received_events_url" : "https://api.github.com/users/ajtowns/received_events",
         "repos_url" : "https://api.github.com/users/ajtowns/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ajtowns/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ajtowns/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ajtowns"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/26697#discussion_r1083379178"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26697"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1083379178"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Switching this from an atomic to be blocking on the `m_cs` mutex doesn't seem great? It's checked for every `LogPrintf` where the log category is disabled, etc. Should at least use a reader/writer lock?",
      "commit_id" : "40e1923e856661fdf68cf783ed9c6d1931dfbdf3",
      "created_at" : "2023-01-22T01:58:07Z",
      "diff_hunk" : "@@ -104,7 +109,7 @@ namespace BCLog {\n         std::atomic<Level> m_log_level{DEFAULT_LOG_LEVEL};\n \n         /** Log categories bitfield. */\n-        std::atomic<uint32_t> m_categories{0};\n+        LogFlagsBitset m_categories GUARDED_BY(m_cs);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26697#discussion_r1083379178",
      "id" : 1083379178,
      "in_reply_to_id" : 1054859149,
      "line" : 112,
      "node_id" : "PRRC_kwDOABII585Akw3q",
      "original_commit_id" : "0dbe9b487face0dc798fc725d671569686883385",
      "original_line" : 112,
      "original_position" : 91,
      "original_start_line" : null,
      "path" : "src/logging.h",
      "position" : 91,
      "pull_request_review_id" : 1264707518,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26697",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1083379178/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2023-01-22T01:58:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1083379178",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/127186?v=4",
         "events_url" : "https://api.github.com/users/ajtowns/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ajtowns/followers",
         "following_url" : "https://api.github.com/users/ajtowns/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ajtowns/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ajtowns",
         "id" : 127186,
         "login" : "ajtowns",
         "node_id" : "MDQ6VXNlcjEyNzE4Ng==",
         "organizations_url" : "https://api.github.com/users/ajtowns/orgs",
         "received_events_url" : "https://api.github.com/users/ajtowns/received_events",
         "repos_url" : "https://api.github.com/users/ajtowns/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ajtowns/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ajtowns/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ajtowns"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Thanks for the reviews, @ajtowns and @codobtc, and for the benchmarking @kouloumos.\r\n\r\nI think now that #26619 (closed in favor of the current PR) may actually be preferable because the [performance degradation](#pullrequestreview-1253717862) could be considered a show-stopper. It is very important that non-enabled log category testing be super fast.\r\n\r\nWhat do all of you think? \r\n\r\nThis PR is also getting complicated. If it added a significant feature or functionality, that would be one thing, but the only thing along those lines is to allow for an unlimited number of logging categories. But having 64 logging categories will carry us for a long time. It's taken 14 years to reach 28 categories, and the rate of new category additions will likely decrease as the project continues to mature.\r\n\r\nSo I've reopened #26619 so that reviews can comment on that approach. (It's much easier to review than the current PR.)",
      "created_at" : "2023-01-23T00:18:40Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26697#issuecomment-1399653384",
      "id" : 1399653384,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/26697",
      "node_id" : "IC_kwDOABII585TbQQI",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1399653384/reactions"
      },
      "updated_at" : "2023-01-23T00:18:40Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1399653384",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8321330?v=4",
         "events_url" : "https://api.github.com/users/LarryRuane/events{/privacy}",
         "followers_url" : "https://api.github.com/users/LarryRuane/followers",
         "following_url" : "https://api.github.com/users/LarryRuane/following{/other_user}",
         "gists_url" : "https://api.github.com/users/LarryRuane/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/LarryRuane",
         "id" : 8321330,
         "login" : "LarryRuane",
         "node_id" : "MDQ6VXNlcjgzMjEzMzA=",
         "organizations_url" : "https://api.github.com/users/LarryRuane/orgs",
         "received_events_url" : "https://api.github.com/users/LarryRuane/received_events",
         "repos_url" : "https://api.github.com/users/LarryRuane/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/LarryRuane/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/LarryRuane/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/LarryRuane"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "How about a slightly different approach? Change `atomic<uint32_t> m_categories` to `FlagCategories m_categories` to a custom thread safe class that offers just the operations we need:\r\n\r\n * `bool any() const`\r\n * `bool none() const`\r\n * `void set()`  (for ALL) and `void set(flag)` (for a particular flag)\r\n * `void reset()` and `void reset(flag)`\r\n * `bool test(flag) const`\r\n\r\nA thread safe class probably shouldn't support copy/move constructors, but the only time we need to copy `m_categories` seems to be in `rpc/node.cpp` where we're checking of the `LIBEVENT` category changes; but the copy there can be replaced by `.test(LIBEVENT)` before and after and seeing if they're `!=`.\r\n\r\nI think a patch to change `LogFlags` to a regular enum like you've done here, and encapsulate `m_categories` as a class containing an `atomic<uint32_t>` should be reasonably straightforward, then updating that to a `uint64_t` when we go over 32 flags, or an array of atomics once we go over 64 flags would be simple? I had a go at messing with the latter, and came up with https://github.com/ajtowns/bitcoin/commits/202301-log-atomic-bitset",
      "created_at" : "2023-01-23T01:47:24Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26697#issuecomment-1399683085",
      "id" : 1399683085,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/26697",
      "node_id" : "IC_kwDOABII585TbXgN",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1399683085/reactions"
      },
      "updated_at" : "2023-01-23T01:47:24Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1399683085",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/127186?v=4",
         "events_url" : "https://api.github.com/users/ajtowns/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ajtowns/followers",
         "following_url" : "https://api.github.com/users/ajtowns/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ajtowns/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ajtowns",
         "id" : 127186,
         "login" : "ajtowns",
         "node_id" : "MDQ6VXNlcjEyNzE4Ng==",
         "organizations_url" : "https://api.github.com/users/ajtowns/orgs",
         "received_events_url" : "https://api.github.com/users/ajtowns/received_events",
         "repos_url" : "https://api.github.com/users/ajtowns/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ajtowns/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ajtowns/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ajtowns"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Given that performance and benchmarks have been a key part of the discussion, #26957 has updated benchmarks that reviewers may use for evaluating this pull and #26619. \r\n\r\nI'm currently rebasing and updating #25203; hopefully any approach adopted in these refactorings won't require a lot of rewriting for that large ongoing migration. Would be helpful to keep that in mind.",
      "created_at" : "2023-01-23T17:21:54Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26697#issuecomment-1400708074",
      "id" : 1400708074,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/26697",
      "node_id" : "IC_kwDOABII585TfRvq",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1400708074/reactions"
      },
      "updated_at" : "2023-01-23T17:21:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1400708074",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Thanks, @ajtowns and @jonatack, I force pushed ac3c16c6978370c9c5ea4c591acbbbcf626804a6 to include Anthony's suggested atomic bitset, which is really nice. I only changed a few of the variable names to be a little clearer to me.\r\n\r\nAlso, I verified using Jon's updated benchmarks (and the existing benchmarks) that the performance of this branch is the same as master, although someone should confirm this.",
      "created_at" : "2023-01-27T20:14:08Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26697#issuecomment-1407028580",
      "id" : 1407028580,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/26697",
      "node_id" : "IC_kwDOABII585T3Y1k",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1407028580/reactions"
      },
      "updated_at" : "2023-01-27T20:14:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1407028580",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8321330?v=4",
         "events_url" : "https://api.github.com/users/LarryRuane/events{/privacy}",
         "followers_url" : "https://api.github.com/users/LarryRuane/followers",
         "following_url" : "https://api.github.com/users/LarryRuane/following{/other_user}",
         "gists_url" : "https://api.github.com/users/LarryRuane/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/LarryRuane",
         "id" : 8321330,
         "login" : "LarryRuane",
         "node_id" : "MDQ6VXNlcjgzMjEzMzA=",
         "organizations_url" : "https://api.github.com/users/LarryRuane/orgs",
         "received_events_url" : "https://api.github.com/users/LarryRuane/received_events",
         "repos_url" : "https://api.github.com/users/LarryRuane/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/LarryRuane/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/LarryRuane/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/LarryRuane"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> although someone should confirm this.\r\n\r\nPR branch (ac3c16c6978370c9c5ea4c591acbbbcf626804a6)\r\n\r\n|               ns/op |                op/s |    err% |          ins/op |          cyc/op |    IPC |         bra/op |   miss% |     total | benchmark\r\n|--------------------:|--------------------:|--------:|----------------:|----------------:|-------:|---------------:|--------:|----------:|:----------\r\n|               13.09 |       76,415,390.27 |    0.1% |           76.00 |           25.97 |  2.927 |          15.00 |    0.0% |      5.50 | `LoggingNoCategory`\r\n|              191.93 |        5,210,284.18 |    0.2% |          806.00 |          380.68 |  2.117 |         190.00 |    0.0% |      5.46 | `LoggingNoFile`\r\n|            6,316.45 |          158,316.81 |    0.1% |       21,105.01 |        8,681.62 |  2.431 |       4,200.01 |    0.1% |      5.47 | `LoggingNoThreadNames`\r\n|            6,444.81 |          155,163.59 |    0.1% |       21,556.93 |        8,931.83 |  2.413 |       4,317.32 |    0.1% |      5.40 | `LoggingYoCategory`\r\n|            6,525.51 |          153,244.80 |    0.2% |       21,993.15 |        9,092.68 |  2.419 |       4,417.28 |    0.2% |      5.50 | `LoggingYoThreadNames`\r\n\r\n Results can be compared with https://github.com/bitcoin/bitcoin/pull/26697#pullrequestreview-1253717862 to confirm that the performance degradation that was previously observed is no longer an issue.",
      "created_at" : "2023-01-28T08:39:50Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26697#issuecomment-1407341610",
      "id" : 1407341610,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/26697",
      "node_id" : "IC_kwDOABII585T4lQq",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1407341610/reactions"
      },
      "updated_at" : "2023-01-28T08:39:50Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1407341610",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/18506343?v=4",
         "events_url" : "https://api.github.com/users/kouloumos/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kouloumos/followers",
         "following_url" : "https://api.github.com/users/kouloumos/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kouloumos/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kouloumos",
         "id" : 18506343,
         "login" : "kouloumos",
         "node_id" : "MDQ6VXNlcjE4NTA2MzQz",
         "organizations_url" : "https://api.github.com/users/kouloumos/orgs",
         "received_events_url" : "https://api.github.com/users/kouloumos/received_events",
         "repos_url" : "https://api.github.com/users/kouloumos/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kouloumos/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kouloumos/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kouloumos"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Force-pushed rebase for merge conflict",
      "created_at" : "2023-06-12T21:47:40Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26697#issuecomment-1588151534",
      "id" : 1588151534,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/26697",
      "node_id" : "IC_kwDOABII585eqUTu",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1588151534/reactions"
      },
      "updated_at" : "2023-06-12T21:47:40Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1588151534",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8321330?v=4",
         "events_url" : "https://api.github.com/users/LarryRuane/events{/privacy}",
         "followers_url" : "https://api.github.com/users/LarryRuane/followers",
         "following_url" : "https://api.github.com/users/LarryRuane/following{/other_user}",
         "gists_url" : "https://api.github.com/users/LarryRuane/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/LarryRuane",
         "id" : 8321330,
         "login" : "LarryRuane",
         "node_id" : "MDQ6VXNlcjgzMjEzMzA=",
         "organizations_url" : "https://api.github.com/users/LarryRuane/orgs",
         "received_events_url" : "https://api.github.com/users/LarryRuane/received_events",
         "repos_url" : "https://api.github.com/users/LarryRuane/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/LarryRuane/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/LarryRuane/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/LarryRuane"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->\nð This pull request conflicts with the target branch and [needs rebase](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#rebasing-changes).\n",
      "created_at" : "2023-06-20T19:30:53Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26697#issuecomment-1599387015",
      "id" : 1599387015,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/26697",
      "node_id" : "IC_kwDOABII585fVLWH",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1599387015/reactions"
      },
      "updated_at" : "2023-06-20T19:30:53Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1599387015",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Rebased to fix merge conflict",
      "created_at" : "2023-06-28T23:13:54Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26697#issuecomment-1612227295",
      "id" : 1612227295,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/26697",
      "node_id" : "IC_kwDOABII585gGKLf",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1612227295/reactions"
      },
      "updated_at" : "2023-06-28T23:13:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1612227295",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8321330?v=4",
         "events_url" : "https://api.github.com/users/LarryRuane/events{/privacy}",
         "followers_url" : "https://api.github.com/users/LarryRuane/followers",
         "following_url" : "https://api.github.com/users/LarryRuane/following{/other_user}",
         "gists_url" : "https://api.github.com/users/LarryRuane/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/LarryRuane",
         "id" : 8321330,
         "login" : "LarryRuane",
         "node_id" : "MDQ6VXNlcjgzMjEzMzA=",
         "organizations_url" : "https://api.github.com/users/LarryRuane/orgs",
         "received_events_url" : "https://api.github.com/users/LarryRuane/received_events",
         "repos_url" : "https://api.github.com/users/LarryRuane/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/LarryRuane/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/LarryRuane/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/LarryRuane"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Rebased to the latest master (since there are no commit-specific acks). This is ready to review, thanks.",
      "created_at" : "2024-03-26T05:03:05Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26697#issuecomment-2019396179",
      "id" : 2019396179,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/26697",
      "node_id" : "IC_kwDOABII5854XYpT",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2019396179/reactions"
      },
      "updated_at" : "2024-03-26T05:03:05Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2019396179",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8321330?v=4",
         "events_url" : "https://api.github.com/users/LarryRuane/events{/privacy}",
         "followers_url" : "https://api.github.com/users/LarryRuane/followers",
         "following_url" : "https://api.github.com/users/LarryRuane/following{/other_user}",
         "gists_url" : "https://api.github.com/users/LarryRuane/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/LarryRuane",
         "id" : 8321330,
         "login" : "LarryRuane",
         "node_id" : "MDQ6VXNlcjgzMjEzMzA=",
         "organizations_url" : "https://api.github.com/users/LarryRuane/orgs",
         "received_events_url" : "https://api.github.com/users/LarryRuane/received_events",
         "repos_url" : "https://api.github.com/users/LarryRuane/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/LarryRuane/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/LarryRuane/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/LarryRuane"
      }
   }
]
