{
   "active_lock_reason" : null,
   "assignee" : null,
   "assignees" : [],
   "author_association" : "CONTRIBUTOR",
   "body" : "The `MallocUsage()` function takes an allocation size as an argument and returns the amount of physical memory consumed, which is greater due to memory allocator overhead and alignment. It was first added in 2015 (first commit of #6102), but its accuracy has degraded as memory allocation libraries have evolved. It's used when it's important that large data structures, such as the coins cache and mempool, should use a predictable, configurable (limited) amount of physical memory (see the `-dbcache` and `-maxmempool` configuration options), as well as a few other places.\r\n\r\n@sipa figured out a concise, efficient [expression](https://github.com/bitcoin/bitcoin/pull/27748#discussion_r1215541260) that this function can use, and that's what's implemented here.\r\n\r\nAlso add a unit test, which is more helpful than usual in this case since platforms, operating systems, and libraries vary significantly in this area.",
   "closed_at" : null,
   "closed_by" : null,
   "comments" : 2,
   "comments_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28531/comments",
   "created_at" : "2023-09-25T22:17:07Z",
   "draft" : false,
   "events_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28531/events",
   "html_url" : "https://github.com/bitcoin/bitcoin/pull/28531",
   "id" : 1912361532,
   "labels" : [
      {
         "color" : "cccccc",
         "default" : false,
         "description" : "",
         "id" : 5334691551,
         "name" : "CI failed",
         "node_id" : "LA_kwDOABII588AAAABPfju3w",
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/labels/CI%20failed"
      }
   ],
   "labels_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28531/labels{/name}",
   "locked" : false,
   "milestone" : null,
   "node_id" : "PR_kwDOABII585bK6Ve",
   "number" : 28531,
   "performed_via_github_app" : null,
   "pull_request" : {
      "diff_url" : "https://github.com/bitcoin/bitcoin/pull/28531.diff",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28531",
      "merged_at" : null,
      "patch_url" : "https://github.com/bitcoin/bitcoin/pull/28531.patch",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28531"
   },
   "reactions" : {
      "+1" : 0,
      "-1" : 0,
      "confused" : 0,
      "eyes" : 0,
      "heart" : 0,
      "hooray" : 0,
      "laugh" : 0,
      "rocket" : 0,
      "total_count" : 0,
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28531/reactions"
   },
   "repository_url" : "https://api.github.com/repos/bitcoin/bitcoin",
   "state" : "open",
   "state_reason" : null,
   "timeline_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28531/timeline",
   "title" : "improve MallocUsage() accuracy",
   "updated_at" : "2023-09-25T23:22:04Z",
   "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28531",
   "user" : {
      "avatar_url" : "https://avatars.githubusercontent.com/u/8321330?v=4",
      "events_url" : "https://api.github.com/users/LarryRuane/events{/privacy}",
      "followers_url" : "https://api.github.com/users/LarryRuane/followers",
      "following_url" : "https://api.github.com/users/LarryRuane/following{/other_user}",
      "gists_url" : "https://api.github.com/users/LarryRuane/gists{/gist_id}",
      "gravatar_id" : "",
      "html_url" : "https://github.com/LarryRuane",
      "id" : 8321330,
      "login" : "LarryRuane",
      "node_id" : "MDQ6VXNlcjgzMjEzMzA=",
      "organizations_url" : "https://api.github.com/users/LarryRuane/orgs",
      "received_events_url" : "https://api.github.com/users/LarryRuane/received_events",
      "repos_url" : "https://api.github.com/users/LarryRuane/repos",
      "site_admin" : false,
      "starred_url" : "https://api.github.com/users/LarryRuane/starred{/owner}{/repo}",
      "subscriptions_url" : "https://api.github.com/users/LarryRuane/subscriptions",
      "type" : "User",
      "url" : "https://api.github.com/users/LarryRuane"
   }
}
