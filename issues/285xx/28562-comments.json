[
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage\nFor detailed information about the code coverage, see the [test coverage report](https://corecheck.dev/bitcoin/bitcoin/pulls/28562).\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| ACK | [ryanofsky](https://github.com/bitcoin/bitcoin/pull/28562#pullrequestreview-1657989469) |\n| Stale ACK | [jamesob](https://github.com/bitcoin/bitcoin/pull/28562#pullrequestreview-1654694833) |\n\nIf your review is incorrectly listed, please react with ð to this comment and the bot will ignore it on the next update.\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#28392](https://github.com/bitcoin/bitcoin/pull/28392) (test: Use pathlib over os path by ns-xvrn)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.\n",
      "created_at" : "2023-10-02T22:42:33Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28562#issuecomment-1743872233",
      "id" : 1743872233,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28562",
      "node_id" : "IC_kwDOABII585n8WDp",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1743872233/reactions"
      },
      "updated_at" : "2023-10-06T12:28:38Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1743872233",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28562#discussion_r1343752096"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28562"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1343752096"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Didn't @ryanofsky say it might be good to `return true;` here in order to avoid spurious warnings?",
      "commit_id" : "0081d1298e08a2e3ecfb770caa73b32f448aca9d",
      "created_at" : "2023-10-03T08:55:48Z",
      "diff_hunk" : "@@ -756,9 +756,10 @@ bool BlockManager::FlushChainstateBlockFile(int tip_height)\n {\n     LOCK(cs_LastBlockFile);\n     auto& cursor = m_blockfile_cursors[BlockfileTypeForHeight(tip_height)];\n+    // If the cursor does not exist, it means an assumeutxo snapshot is loaded,\n+    // but no blocks past the snapshot height have been written yet, so there\n+    // is no data associated with the chainstate, and it is safe not to flush.\n     if (cursor) {\n-        // The cursor may not exist after a snapshot has been loaded but before any\n-        // blocks have been downloaded.\n         return FlushBlockFile(cursor->file_num, /*fFinalize=*/false, /*finalize_undo=*/false);\n     }\n     return false;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28562#discussion_r1343752096",
      "id" : 1343752096,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585QGAeg",
      "original_commit_id" : "26c815b60c8c4aec27de3fc6c7849ea3c7bdd91e",
      "original_line" : 765,
      "original_position" : 12,
      "original_start_line" : null,
      "path" : "src/node/blockstorage.cpp",
      "position" : null,
      "pull_request_review_id" : 1654694833,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28562",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1343752096/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-10-03T08:55:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1343752096",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/73197?v=4",
         "events_url" : "https://api.github.com/users/jamesob/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jamesob/followers",
         "following_url" : "https://api.github.com/users/jamesob/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jamesob/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jamesob",
         "id" : 73197,
         "login" : "jamesob",
         "node_id" : "MDQ6VXNlcjczMTk3",
         "organizations_url" : "https://api.github.com/users/jamesob/orgs",
         "received_events_url" : "https://api.github.com/users/jamesob/received_events",
         "repos_url" : "https://api.github.com/users/jamesob/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jamesob/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jamesob/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jamesob"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28562#discussion_r1343784377"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28562"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1343784377"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Right, I saw it but then missed to addressed it. Now added.",
      "commit_id" : "0081d1298e08a2e3ecfb770caa73b32f448aca9d",
      "created_at" : "2023-10-03T09:17:14Z",
      "diff_hunk" : "@@ -756,9 +756,10 @@ bool BlockManager::FlushChainstateBlockFile(int tip_height)\n {\n     LOCK(cs_LastBlockFile);\n     auto& cursor = m_blockfile_cursors[BlockfileTypeForHeight(tip_height)];\n+    // If the cursor does not exist, it means an assumeutxo snapshot is loaded,\n+    // but no blocks past the snapshot height have been written yet, so there\n+    // is no data associated with the chainstate, and it is safe not to flush.\n     if (cursor) {\n-        // The cursor may not exist after a snapshot has been loaded but before any\n-        // blocks have been downloaded.\n         return FlushBlockFile(cursor->file_num, /*fFinalize=*/false, /*finalize_undo=*/false);\n     }\n     return false;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28562#discussion_r1343784377",
      "id" : 1343784377,
      "in_reply_to_id" : 1343752096,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585QGIW5",
      "original_commit_id" : "26c815b60c8c4aec27de3fc6c7849ea3c7bdd91e",
      "original_line" : 765,
      "original_position" : 12,
      "original_start_line" : null,
      "path" : "src/node/blockstorage.cpp",
      "position" : null,
      "pull_request_review_id" : 1654741618,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28562",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1343784377/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-10-03T09:17:14Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1343784377",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1322187?v=4",
         "events_url" : "https://api.github.com/users/fjahr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fjahr/followers",
         "following_url" : "https://api.github.com/users/fjahr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fjahr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fjahr",
         "id" : 1322187,
         "login" : "fjahr",
         "node_id" : "MDQ6VXNlcjEzMjIxODc=",
         "organizations_url" : "https://api.github.com/users/fjahr/orgs",
         "received_events_url" : "https://api.github.com/users/fjahr/received_events",
         "repos_url" : "https://api.github.com/users/fjahr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fjahr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fjahr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fjahr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28562#discussion_r1343967715"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28562"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1343967715"
         }
      },
      "author_association" : "MEMBER",
      "body" : "not a fan of overwriting and hard-coding the user-picked timeout factor. Why not use `self.wait_until`?\r\n\r\nI think it could make sense to rename `wait_until_helper` to `wait_until_helper_internal`?",
      "commit_id" : "69fbb77cff92649c51d5d22e06b3853db928b8e1",
      "created_at" : "2023-10-03T11:45:03Z",
      "diff_hunk" : "@@ -156,19 +156,19 @@ def no_sync():\n         self.connect_nodes(0, 1)\n \n         self.log.info(f\"Ensuring snapshot chain syncs to tip. ({FINAL_HEIGHT})\")\n-        wait_until_helper(lambda: n1.getchainstates()['snapshot']['blocks'] == FINAL_HEIGHT)\n+        wait_until_helper(lambda: n1.getchainstates()['snapshot']['blocks'] == FINAL_HEIGHT, timeout_factor=2)\n         self.sync_blocks(nodes=(n0, n1))\n \n         self.log.info(\"Ensuring background validation completes\")\n         # N.B.: the `snapshot` key disappears once the background validation is complete.\n-        wait_until_helper(lambda: not n1.getchainstates().get('snapshot'))\n+        wait_until_helper(lambda: not n1.getchainstates().get('snapshot'), timeout_factor=2)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28562#discussion_r1343967715",
      "id" : 1343967715,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585QG1Hj",
      "original_commit_id" : "0081d1298e08a2e3ecfb770caa73b32f448aca9d",
      "original_line" : 164,
      "original_position" : 20,
      "original_start_line" : null,
      "path" : "test/functional/feature_assumeutxo.py",
      "position" : null,
      "pull_request_review_id" : 1655001137,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28562",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1343967715/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-10-03T11:45:55Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1343967715",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28562#discussion_r1344154808"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28562"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1344154808"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "In commit \"doc: Add and edit some comments around assumeutxo\" (42d585d981350052b00001fa52a895ddca642c11)\r\n\r\nIt does not seem accurate that a user would not care if there is a snapshot chainstate, otherwise why would they have loaded a snapshot to begin with?\r\n\r\nI'm not sure exactly which question this comment is trying to answer, but if the goal is just to explain the code maybe it can say \"// If a chainstate has m_from_snapshot_blockhash set and there is more than one chainstate, then it a partially validated snapshot chainstate. Otherwise it is a fully validated normal chainstate.\"",
      "commit_id" : "69fbb77cff92649c51d5d22e06b3853db928b8e1",
      "created_at" : "2023-10-03T13:58:23Z",
      "diff_hunk" : "@@ -2855,6 +2855,9 @@ return RPCHelpMan{\n         return data;\n     };\n \n+    // We present the IBD/background chainstate as \"normal\" to users, since\n+    // it should not matter to them if there is also a snapshot chainstate.\n+    // To users, the IBD chainstate should always be considered \"normal\".",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28562#discussion_r1344154808",
      "id" : 1344154808,
      "line" : 2860,
      "node_id" : "PRRC_kwDOABII585QHiy4",
      "original_commit_id" : "42d585d981350052b00001fa52a895ddca642c11",
      "original_line" : 2860,
      "original_position" : 6,
      "original_start_line" : 2858,
      "path" : "src/rpc/blockchain.cpp",
      "position" : 24,
      "pull_request_review_id" : 1655287137,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28562",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1344154808/reactions"
      },
      "side" : "RIGHT",
      "start_line" : 2858,
      "start_side" : "RIGHT",
      "subject_type" : "line",
      "updated_at" : "2023-10-03T19:35:44Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1344154808",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28562#discussion_r1344415254"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28562"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1344415254"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "all done",
      "commit_id" : "69fbb77cff92649c51d5d22e06b3853db928b8e1",
      "created_at" : "2023-10-03T16:36:46Z",
      "diff_hunk" : "@@ -156,19 +156,19 @@ def no_sync():\n         self.connect_nodes(0, 1)\n \n         self.log.info(f\"Ensuring snapshot chain syncs to tip. ({FINAL_HEIGHT})\")\n-        wait_until_helper(lambda: n1.getchainstates()['snapshot']['blocks'] == FINAL_HEIGHT)\n+        wait_until_helper(lambda: n1.getchainstates()['snapshot']['blocks'] == FINAL_HEIGHT, timeout_factor=2)\n         self.sync_blocks(nodes=(n0, n1))\n \n         self.log.info(\"Ensuring background validation completes\")\n         # N.B.: the `snapshot` key disappears once the background validation is complete.\n-        wait_until_helper(lambda: not n1.getchainstates().get('snapshot'))\n+        wait_until_helper(lambda: not n1.getchainstates().get('snapshot'), timeout_factor=2)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28562#discussion_r1344415254",
      "id" : 1344415254,
      "in_reply_to_id" : 1343967715,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585QIiYW",
      "original_commit_id" : "0081d1298e08a2e3ecfb770caa73b32f448aca9d",
      "original_line" : 164,
      "original_position" : 20,
      "original_start_line" : null,
      "path" : "test/functional/feature_assumeutxo.py",
      "position" : null,
      "pull_request_review_id" : 1655672218,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28562",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1344415254/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-10-03T16:36:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1344415254",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1322187?v=4",
         "events_url" : "https://api.github.com/users/fjahr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fjahr/followers",
         "following_url" : "https://api.github.com/users/fjahr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fjahr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fjahr",
         "id" : 1322187,
         "login" : "fjahr",
         "node_id" : "MDQ6VXNlcjEzMjIxODc=",
         "organizations_url" : "https://api.github.com/users/fjahr/orgs",
         "received_events_url" : "https://api.github.com/users/fjahr/received_events",
         "repos_url" : "https://api.github.com/users/fjahr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fjahr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fjahr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fjahr"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Addressed feedback from @MarcoFalke ",
      "created_at" : "2023-10-03T16:37:19Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28562#issuecomment-1745344476",
      "id" : 1745344476,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28562",
      "node_id" : "IC_kwDOABII585oB9fc",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1745344476/reactions"
      },
      "updated_at" : "2023-10-03T16:37:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1745344476",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1322187?v=4",
         "events_url" : "https://api.github.com/users/fjahr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fjahr/followers",
         "following_url" : "https://api.github.com/users/fjahr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fjahr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fjahr",
         "id" : 1322187,
         "login" : "fjahr",
         "node_id" : "MDQ6VXNlcjEzMjIxODc=",
         "organizations_url" : "https://api.github.com/users/fjahr/orgs",
         "received_events_url" : "https://api.github.com/users/fjahr/received_events",
         "repos_url" : "https://api.github.com/users/fjahr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fjahr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fjahr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fjahr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28562#discussion_r1344568861"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28562"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1344568861"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "In commit \"test: Increase timeout tolerance of feature_assumeutxo\" (613e8317275ecb0051f9dcea57786aabe7dfdb27)\r\n\r\nThis seem strange since it is just referencing the function without calling it. Is it missing `()`? Also, it's not clear why no_op is better than pass. Would be helpful to have a comment.",
      "commit_id" : "69fbb77cff92649c51d5d22e06b3853db928b8e1",
      "created_at" : "2023-10-03T18:48:51Z",
      "diff_hunk" : "@@ -81,7 +81,7 @@ def run_test(self):\n         self.sync_blocks()\n \n         def no_sync():\n-            pass\n+            self.no_op",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28562#discussion_r1344568861",
      "id" : 1344568861,
      "line" : 84,
      "node_id" : "PRRC_kwDOABII585QJH4d",
      "original_commit_id" : "ce120f73e61977c9eb174ea19c64b260f13b086f",
      "original_line" : 84,
      "original_position" : 14,
      "original_start_line" : null,
      "path" : "test/functional/feature_assumeutxo.py",
      "position" : 14,
      "pull_request_review_id" : 1655287137,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28562",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1344568861/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-10-03T19:35:44Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1344568861",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28562#discussion_r1344571683"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28562"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1344571683"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "In commit \"test: Increase timeout tolerance of feature_assumeutxo\" (613e8317275ecb0051f9dcea57786aabe7dfdb27)\r\n\r\nIt would be great to eliminate all these duplicate 120s. I'm surprised the test framework doesn't provide a way to set a default time within the unit tests, but if it doesn't I think it would be better to just declare a `WAIT_TIMEOUT = 120` constant at the top of the test, or add a helper method that calls wait_until.",
      "commit_id" : "69fbb77cff92649c51d5d22e06b3853db928b8e1",
      "created_at" : "2023-10-03T18:51:33Z",
      "diff_hunk" : "@@ -156,19 +156,19 @@ def no_sync():\n         self.connect_nodes(0, 1)\n \n         self.log.info(f\"Ensuring snapshot chain syncs to tip. ({FINAL_HEIGHT})\")\n-        wait_until_helper(lambda: n1.getchainstates()['snapshot']['blocks'] == FINAL_HEIGHT)\n+        self.wait_until(lambda: n1.getchainstates()['snapshot']['blocks'] == FINAL_HEIGHT, timeout=120)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28562#discussion_r1344571683",
      "id" : 1344571683,
      "line" : 159,
      "node_id" : "PRRC_kwDOABII585QJIkj",
      "original_commit_id" : "ce120f73e61977c9eb174ea19c64b260f13b086f",
      "original_line" : 159,
      "original_position" : 23,
      "original_start_line" : null,
      "path" : "test/functional/feature_assumeutxo.py",
      "position" : 23,
      "pull_request_review_id" : 1655287137,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28562",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1344571683/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-10-03T19:35:44Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1344571683",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28562#discussion_r1344606637"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28562"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1344606637"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "In commit \"doc: Add snapshot chainstate removal warning to reindexing documentation\" (2bd1d39491f8ad811dcb6d3787e1e18ca0b928ad)\r\n\r\nThese warnings seem too alarmist, and also not very actionable. The point of reindex commands is to wipe state and rebuild it. So it should not be surprising that state loaded from an assumeutxo snapshot is also wiped. I think it would be a better to add a clarification instead of a warning here, and a suggestion to reload the snapshot. Maybe: \"If an assumeutxo snapshot was loaded and not yet validated, it will need to be reloaded for its chain state to be rebuilt.\"",
      "commit_id" : "69fbb77cff92649c51d5d22e06b3853db928b8e1",
      "created_at" : "2023-10-03T19:12:02Z",
      "diff_hunk" : "@@ -462,8 +462,8 @@ void SetupServerArgs(ArgsManager& argsman)\n     argsman.AddArg(\"-prune=<n>\", strprintf(\"Reduce storage requirements by enabling pruning (deleting) of old blocks. This allows the pruneblockchain RPC to be called to delete specific blocks and enables automatic pruning of old blocks if a target size in MiB is provided. This mode is incompatible with -txindex. \"\n             \"Warning: Reverting this setting requires re-downloading the entire blockchain. \"\n             \"(default: 0 = disable pruning blocks, 1 = allow manual pruning via RPC, >=%u = automatically prune block files to stay under the specified target size in MiB)\", MIN_DISK_SPACE_FOR_BLOCK_FILES / 1024 / 1024), ArgsManager::ALLOW_ANY, OptionsCategory::OPTIONS);\n-    argsman.AddArg(\"-reindex\", \"Rebuild chain state and block index from the blk*.dat files on disk. This will also rebuild active optional indexes.\", ArgsManager::ALLOW_ANY, OptionsCategory::OPTIONS);\n-    argsman.AddArg(\"-reindex-chainstate\", \"Rebuild chain state from the currently indexed blocks. When in pruning mode or if blocks on disk might be corrupted, use full -reindex instead.\", ArgsManager::ALLOW_ANY, OptionsCategory::OPTIONS);\n+    argsman.AddArg(\"-reindex\", \"Rebuild chain state and block index from the blk*.dat files on disk. This will also rebuild active optional indexes. Warning: Not yet validated snapshot chainstates will be removed.\", ArgsManager::ALLOW_ANY, OptionsCategory::OPTIONS);\n+    argsman.AddArg(\"-reindex-chainstate\", \"Rebuild chain state from the currently indexed blocks. When in pruning mode or if blocks on disk might be corrupted, use full -reindex instead. Warning: Not yet validated snapshot chainstates will be removed.\", ArgsManager::ALLOW_ANY, OptionsCategory::OPTIONS);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28562#discussion_r1344606637",
      "id" : 1344606637,
      "line" : 466,
      "node_id" : "PRRC_kwDOABII585QJRGt",
      "original_commit_id" : "949be74b0cb9e0f8adbaf1401c1c937b5b9a3bd2",
      "original_line" : 466,
      "original_position" : 7,
      "original_start_line" : 465,
      "path" : "src/init.cpp",
      "position" : 7,
      "pull_request_review_id" : 1655287137,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28562",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1344606637/reactions"
      },
      "side" : "RIGHT",
      "start_line" : 465,
      "start_side" : "RIGHT",
      "subject_type" : "line",
      "updated_at" : "2023-10-03T19:35:44Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1344606637",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28562#discussion_r1344716529"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28562"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1344716529"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "I think we have a simple misunderstanding of my wording, probably my English makes the comment harder to parse than it needs to be :)\r\n\r\nMy goal is to explain to developers why we talk about a \"normal\" chainstate when speaking to the user (via RPC interface) while internally referring to it as ibd/background in the code. I am trying to convey the same thing you said in your comment here: https://github.com/bitcoin/bitcoin/pull/27596#discussion_r1342035181\r\n\r\nParticularly when you say `The idea is for the \"normal\" chainstate to refer to a typical fully validated chainstate [...] I think the term \"IBD chainstate\" is basically meaningless because both chainstates are downloaded during IBD.` I am trying to say the same thing here: The normal chainstate is the ibd chainstate, no matter if there is a snapshot chainstate or not. Hence \"it does not matter\" that there is a snapshot with regards to the naming of the ibd/background/normal chainstate from the user perspective.\r\n\r\nI am happy to take suggestions for better wording but I don't want to just explain what the code does. I want to document the internal/external divergence in the naming of the chainstates for future developers.",
      "commit_id" : "7a407a817bda288e4c58b768267dcf4e6bcc9b50",
      "created_at" : "2023-10-03T20:42:45Z",
      "diff_hunk" : "@@ -2855,6 +2855,9 @@ return RPCHelpMan{\n         return data;\n     };\n \n+    // We present the IBD/background chainstate as \"normal\" to users, since\n+    // it should not matter to them if there is also a snapshot chainstate.\n+    // To users, the IBD chainstate should always be considered \"normal\".",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28562#discussion_r1344716529",
      "id" : 1344716529,
      "in_reply_to_id" : 1344154808,
      "line" : 2860,
      "node_id" : "PRRC_kwDOABII585QJr7x",
      "original_commit_id" : "42d585d981350052b00001fa52a895ddca642c11",
      "original_line" : 2860,
      "original_position" : 6,
      "original_start_line" : 2858,
      "path" : "src/rpc/blockchain.cpp",
      "position" : 24,
      "pull_request_review_id" : 1656094942,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28562",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1344716529/reactions"
      },
      "side" : "RIGHT",
      "start_line" : 2858,
      "start_side" : "RIGHT",
      "subject_type" : "line",
      "updated_at" : "2023-10-03T20:42:45Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1344716529",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1322187?v=4",
         "events_url" : "https://api.github.com/users/fjahr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fjahr/followers",
         "following_url" : "https://api.github.com/users/fjahr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fjahr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fjahr",
         "id" : 1322187,
         "login" : "fjahr",
         "node_id" : "MDQ6VXNlcjEzMjIxODc=",
         "organizations_url" : "https://api.github.com/users/fjahr/orgs",
         "received_events_url" : "https://api.github.com/users/fjahr/received_events",
         "repos_url" : "https://api.github.com/users/fjahr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fjahr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fjahr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fjahr"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Left some more review comments on the parent pull.",
      "created_at" : "2023-10-03T20:56:26Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28562#issuecomment-1745713152",
      "id" : 1745713152,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28562",
      "node_id" : "IC_kwDOABII585oDXgA",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1745713152/reactions"
      },
      "updated_at" : "2023-10-03T20:56:26Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1745713152",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28562#discussion_r1344732834"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28562"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1344732834"
         }
      },
      "author_association" : "MEMBER",
      "body" : "There shouldn't be a need to pass a timeout value here, unless there is a reason to.",
      "commit_id" : "7a407a817bda288e4c58b768267dcf4e6bcc9b50",
      "created_at" : "2023-10-03T20:58:48Z",
      "diff_hunk" : "@@ -156,19 +156,19 @@ def no_sync():\n         self.connect_nodes(0, 1)\n \n         self.log.info(f\"Ensuring snapshot chain syncs to tip. ({FINAL_HEIGHT})\")\n-        wait_until_helper(lambda: n1.getchainstates()['snapshot']['blocks'] == FINAL_HEIGHT)\n+        self.wait_until(lambda: n1.getchainstates()['snapshot']['blocks'] == FINAL_HEIGHT, timeout=120)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28562#discussion_r1344732834",
      "id" : 1344732834,
      "in_reply_to_id" : 1344571683,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585QJv6i",
      "original_commit_id" : "ce120f73e61977c9eb174ea19c64b260f13b086f",
      "original_line" : 159,
      "original_position" : 23,
      "original_start_line" : null,
      "path" : "test/functional/feature_assumeutxo.py",
      "position" : null,
      "pull_request_review_id" : 1656118109,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28562",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1344732834/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-10-03T20:58:49Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1344732834",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28562#discussion_r1344769801"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28562"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1344769801"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "@MarcoFalke Did you see @achow101 's comment: https://github.com/bitcoin/bitcoin/pull/27596#discussion_r1343167013 ?",
      "commit_id" : "7a407a817bda288e4c58b768267dcf4e6bcc9b50",
      "created_at" : "2023-10-03T21:35:00Z",
      "diff_hunk" : "@@ -156,19 +156,19 @@ def no_sync():\n         self.connect_nodes(0, 1)\n \n         self.log.info(f\"Ensuring snapshot chain syncs to tip. ({FINAL_HEIGHT})\")\n-        wait_until_helper(lambda: n1.getchainstates()['snapshot']['blocks'] == FINAL_HEIGHT)\n+        self.wait_until(lambda: n1.getchainstates()['snapshot']['blocks'] == FINAL_HEIGHT, timeout=120)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28562#discussion_r1344769801",
      "id" : 1344769801,
      "in_reply_to_id" : 1344571683,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585QJ48J",
      "original_commit_id" : "ce120f73e61977c9eb174ea19c64b260f13b086f",
      "original_line" : 159,
      "original_position" : 23,
      "original_start_line" : null,
      "path" : "test/functional/feature_assumeutxo.py",
      "position" : null,
      "pull_request_review_id" : 1656169411,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28562",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1344769801/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-10-03T21:35:00Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1344769801",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1322187?v=4",
         "events_url" : "https://api.github.com/users/fjahr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fjahr/followers",
         "following_url" : "https://api.github.com/users/fjahr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fjahr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fjahr",
         "id" : 1322187,
         "login" : "fjahr",
         "node_id" : "MDQ6VXNlcjEzMjIxODc=",
         "organizations_url" : "https://api.github.com/users/fjahr/orgs",
         "received_events_url" : "https://api.github.com/users/fjahr/received_events",
         "repos_url" : "https://api.github.com/users/fjahr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fjahr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fjahr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fjahr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28562#discussion_r1344770511"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28562"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1344770511"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Done, adapted with your text.",
      "commit_id" : "7a407a817bda288e4c58b768267dcf4e6bcc9b50",
      "created_at" : "2023-10-03T21:35:54Z",
      "diff_hunk" : "@@ -462,8 +462,8 @@ void SetupServerArgs(ArgsManager& argsman)\n     argsman.AddArg(\"-prune=<n>\", strprintf(\"Reduce storage requirements by enabling pruning (deleting) of old blocks. This allows the pruneblockchain RPC to be called to delete specific blocks and enables automatic pruning of old blocks if a target size in MiB is provided. This mode is incompatible with -txindex. \"\n             \"Warning: Reverting this setting requires re-downloading the entire blockchain. \"\n             \"(default: 0 = disable pruning blocks, 1 = allow manual pruning via RPC, >=%u = automatically prune block files to stay under the specified target size in MiB)\", MIN_DISK_SPACE_FOR_BLOCK_FILES / 1024 / 1024), ArgsManager::ALLOW_ANY, OptionsCategory::OPTIONS);\n-    argsman.AddArg(\"-reindex\", \"Rebuild chain state and block index from the blk*.dat files on disk. This will also rebuild active optional indexes.\", ArgsManager::ALLOW_ANY, OptionsCategory::OPTIONS);\n-    argsman.AddArg(\"-reindex-chainstate\", \"Rebuild chain state from the currently indexed blocks. When in pruning mode or if blocks on disk might be corrupted, use full -reindex instead.\", ArgsManager::ALLOW_ANY, OptionsCategory::OPTIONS);\n+    argsman.AddArg(\"-reindex\", \"Rebuild chain state and block index from the blk*.dat files on disk. This will also rebuild active optional indexes. Warning: Not yet validated snapshot chainstates will be removed.\", ArgsManager::ALLOW_ANY, OptionsCategory::OPTIONS);\n+    argsman.AddArg(\"-reindex-chainstate\", \"Rebuild chain state from the currently indexed blocks. When in pruning mode or if blocks on disk might be corrupted, use full -reindex instead. Warning: Not yet validated snapshot chainstates will be removed.\", ArgsManager::ALLOW_ANY, OptionsCategory::OPTIONS);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28562#discussion_r1344770511",
      "id" : 1344770511,
      "in_reply_to_id" : 1344606637,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585QJ5HP",
      "original_commit_id" : "949be74b0cb9e0f8adbaf1401c1c937b5b9a3bd2",
      "original_line" : 466,
      "original_position" : 7,
      "original_start_line" : 465,
      "path" : "src/init.cpp",
      "position" : null,
      "pull_request_review_id" : 1656170355,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28562",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1344770511/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : "RIGHT",
      "subject_type" : "line",
      "updated_at" : "2023-10-03T21:35:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1344770511",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1322187?v=4",
         "events_url" : "https://api.github.com/users/fjahr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fjahr/followers",
         "following_url" : "https://api.github.com/users/fjahr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fjahr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fjahr",
         "id" : 1322187,
         "login" : "fjahr",
         "node_id" : "MDQ6VXNlcjEzMjIxODc=",
         "organizations_url" : "https://api.github.com/users/fjahr/orgs",
         "received_events_url" : "https://api.github.com/users/fjahr/received_events",
         "repos_url" : "https://api.github.com/users/fjahr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fjahr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fjahr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fjahr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28562#discussion_r1344770658"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28562"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1344770658"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "It was actually better to remove no_sync completely and just use `self.no_op` directly. I think it's clearer then because we don't need the same no_op function declaration that we already have in the framework.",
      "commit_id" : "7a407a817bda288e4c58b768267dcf4e6bcc9b50",
      "created_at" : "2023-10-03T21:36:05Z",
      "diff_hunk" : "@@ -81,7 +81,7 @@ def run_test(self):\n         self.sync_blocks()\n \n         def no_sync():\n-            pass\n+            self.no_op",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28562#discussion_r1344770658",
      "id" : 1344770658,
      "in_reply_to_id" : 1344568861,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585QJ5Ji",
      "original_commit_id" : "ce120f73e61977c9eb174ea19c64b260f13b086f",
      "original_line" : 84,
      "original_position" : 14,
      "original_start_line" : null,
      "path" : "test/functional/feature_assumeutxo.py",
      "position" : null,
      "pull_request_review_id" : 1656170553,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28562",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1344770658/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-10-03T21:36:05Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1344770658",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1322187?v=4",
         "events_url" : "https://api.github.com/users/fjahr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fjahr/followers",
         "following_url" : "https://api.github.com/users/fjahr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fjahr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fjahr",
         "id" : 1322187,
         "login" : "fjahr",
         "node_id" : "MDQ6VXNlcjEzMjIxODc=",
         "organizations_url" : "https://api.github.com/users/fjahr/orgs",
         "received_events_url" : "https://api.github.com/users/fjahr/received_events",
         "repos_url" : "https://api.github.com/users/fjahr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fjahr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fjahr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fjahr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28562#discussion_r1344773207"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28562"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1344773207"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "@ryanofsky I think that's an interesting idea to set a test-wide default for the `wait_until` helper, I implemented this [here](https://github.com/bitcoin/bitcoin/pull/28562/commits/bd5e9c5cd84ffd0803bf9b8b35ec15c7afe6554f) for now but it may be better to pull it out into its own PR... What do you think about this idea @MarcoFalke ?",
      "commit_id" : "7a407a817bda288e4c58b768267dcf4e6bcc9b50",
      "created_at" : "2023-10-03T21:39:01Z",
      "diff_hunk" : "@@ -156,19 +156,19 @@ def no_sync():\n         self.connect_nodes(0, 1)\n \n         self.log.info(f\"Ensuring snapshot chain syncs to tip. ({FINAL_HEIGHT})\")\n-        wait_until_helper(lambda: n1.getchainstates()['snapshot']['blocks'] == FINAL_HEIGHT)\n+        self.wait_until(lambda: n1.getchainstates()['snapshot']['blocks'] == FINAL_HEIGHT, timeout=120)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28562#discussion_r1344773207",
      "id" : 1344773207,
      "in_reply_to_id" : 1344571683,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585QJ5xX",
      "original_commit_id" : "ce120f73e61977c9eb174ea19c64b260f13b086f",
      "original_line" : 159,
      "original_position" : 23,
      "original_start_line" : null,
      "path" : "test/functional/feature_assumeutxo.py",
      "position" : null,
      "pull_request_review_id" : 1656173960,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28562",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1344773207/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-10-03T21:39:01Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1344773207",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1322187?v=4",
         "events_url" : "https://api.github.com/users/fjahr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fjahr/followers",
         "following_url" : "https://api.github.com/users/fjahr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fjahr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fjahr",
         "id" : 1322187,
         "login" : "fjahr",
         "node_id" : "MDQ6VXNlcjEzMjIxODc=",
         "organizations_url" : "https://api.github.com/users/fjahr/orgs",
         "received_events_url" : "https://api.github.com/users/fjahr/received_events",
         "repos_url" : "https://api.github.com/users/fjahr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fjahr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fjahr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fjahr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28562#discussion_r1344824078"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28562"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1344824078"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "re: https://github.com/bitcoin/bitcoin/pull/28562#discussion_r1344716529\r\n\r\nThanks, that is helpful. You're convincing me it's not a good idea to add new names and definitions in this RPC.\r\n\r\nI think a good solution would be to get rid of the names entirely and switch to an array. This should be both more clear and more convenient for figuring out the active chain. Something like the following (draft change, untested):\r\n\r\n```diff\r\n--- a/src/rpc/blockchain.cpp\r\n+++ b/src/rpc/blockchain.cpp\r\n@@ -2807,6 +2807,7 @@ const std::vector<RPCResult> RPCHelpForChainstate{\r\n     {RPCResult::Type::STR_HEX, \"snapshot_blockhash\", /*optional=*/true, \"the base block of the snapshot this chainstate is based on, if any\"},\r\n     {RPCResult::Type::NUM, \"coins_db_cache_bytes\", \"size of the coinsdb cache\"},\r\n     {RPCResult::Type::NUM, \"coins_tip_cache_bytes\", \"size of the coinstip cache\"},\r\n+    {RPCResult::Type::BOOL, \"validated\", \"whether the chainstate is fully validated. True if all blocks in the chainstate were validated, false if the chain is based on a snapshot and the snapshot has not yet been validated.\"},\r\n };\r\n \r\n static RPCHelpMan getchainstates()\r\n@@ -2818,8 +2819,7 @@ return RPCHelpMan{\r\n         RPCResult{\r\n             RPCResult::Type::OBJ, \"\", \"\", {\r\n                 {RPCResult::Type::NUM, \"headers\", \"the number of headers seen so far\"},\r\n-                {RPCResult::Type::OBJ, \"normal\", /*optional=*/true, \"fully validated chainstate containing blocks this node has validated starting from the genesis block\", RPCHelpForChainstate},\r\n-                {RPCResult::Type::OBJ, \"snapshot\", /*optional=*/true, \"only present if an assumeutxo snapshot is loaded. Partially validated chainstate containing blocks this node has validated starting from the snapshot. After the snapshot is validated (when the 'normal' chainstate advances far enough to validate it), this chainstate will replace and become the 'normal' chainstate.\", RPCHelpForChainstate},\r\n+                {RPCResult::Type::ARR, \"chainstates\", \"list of the chainstates ordered by work, with the most-work (active) chainstate last\", RPCHelpForChainstate},\r\n             }\r\n         },\r\n         RPCExamples{\r\n@@ -2834,7 +2834,7 @@ return RPCHelpMan{\r\n     NodeContext& node = EnsureAnyNodeContext(request.context);\r\n     ChainstateManager& chainman = *node.chainman;\r\n \r\n-    auto make_chain_data = [&](const Chainstate& cs) EXCLUSIVE_LOCKS_REQUIRED(::cs_main) {\r\n+    auto make_chain_data = [&](const Chainstate& cs, bool validated) EXCLUSIVE_LOCKS_REQUIRED(::cs_main) {\r\n         AssertLockHeld(::cs_main);\r\n         UniValue data(UniValue::VOBJ);\r\n         if (!cs.m_chain.Tip()) {\r\n@@ -2852,20 +2852,18 @@ return RPCHelpMan{\r\n         if (cs.m_from_snapshot_blockhash) {\r\n             data.pushKV(\"snapshot_blockhash\", cs.m_from_snapshot_blockhash->ToString());\r\n         }\r\n+        data.pushKV(\"validated\", validated);\r\n         return data;\r\n     };\r\n \r\n-    if (chainman.GetAll().size() > 1) {\r\n-        for (Chainstate* chainstate : chainman.GetAll()) {\r\n-            obj.pushKV(\r\n-                chainstate->m_from_snapshot_blockhash ? \"snapshot\" : \"normal\",\r\n-                make_chain_data(*chainstate));\r\n-        }\r\n-    } else {\r\n-        obj.pushKV(\"normal\", make_chain_data(chainman.ActiveChainstate()));\r\n-    }\r\n     obj.pushKV(\"headers\", chainman.m_best_header ? chainman.m_best_header->nHeight : -1);\r\n \r\n+    const auto& chainstates = chainman.GetAll();\r\n+    UniValue obj_chainstates{UniValue::VARR};\r\n+    for (Chainstate* cs : chainstates) {\r\n+      obj_chainstates.push_back(make_chain_data(*cs, !cs->m_from_snapshot_blockhash || chainstates.size() == 1));\r\n+    }\r\n+    obj.pushKV(\"chainstates\", std::move(obj_chainstates));\r\n     return obj;\r\n }\r\n     };\r\n\r\n```\r\n\r\nThe reason for introducing new \"normal\" and \"snapshot\" names was just to use terms that could be defined and understood very simply. A \"normal\" chainstate is a chainstate where every block has been validated. A \"snapshot\" chainstate is a chainstate loaded from a snapshot where every block has not been validated.\r\n\r\nExposing these new names was a lot better than exposing our internal \"ibd chainstate\" and \"snapshot chainstate\" names which are can't be defined without reference to temporary implementation details of our code like the fact that IBD snapshot is not deleted until the next node restart after it is done being used. I think these names are also just objectively very bad and add unneeded complexity to our code. I'm working on a change to get rid of them (fb02d9f7cc90f606516e3c3bc55ba177049c4411).",
      "commit_id" : "2c9a84136bd4e9bdf7c85296e56364dc6a22f6b2",
      "created_at" : "2023-10-03T22:36:39Z",
      "diff_hunk" : "@@ -2855,6 +2855,9 @@ return RPCHelpMan{\n         return data;\n     };\n \n+    // We present the IBD/background chainstate as \"normal\" to users, since\n+    // it should not matter to them if there is also a snapshot chainstate.\n+    // To users, the IBD chainstate should always be considered \"normal\".",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28562#discussion_r1344824078",
      "id" : 1344824078,
      "in_reply_to_id" : 1344154808,
      "line" : 2860,
      "node_id" : "PRRC_kwDOABII585QKGMO",
      "original_commit_id" : "42d585d981350052b00001fa52a895ddca642c11",
      "original_line" : 2860,
      "original_position" : 6,
      "original_start_line" : 2858,
      "path" : "src/rpc/blockchain.cpp",
      "position" : 24,
      "pull_request_review_id" : 1656237889,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28562",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1344824078/reactions"
      },
      "side" : "RIGHT",
      "start_line" : 2858,
      "start_side" : "RIGHT",
      "subject_type" : "line",
      "updated_at" : "2023-10-04T11:20:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1344824078",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "The handling of timeouts in `feature_assumeutxo` was moved out into #28586",
      "created_at" : "2023-10-04T14:43:45Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28562#issuecomment-1747023313",
      "id" : 1747023313,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28562",
      "node_id" : "IC_kwDOABII585oIXXR",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1747023313/reactions"
      },
      "updated_at" : "2023-10-04T14:43:45Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1747023313",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1322187?v=4",
         "events_url" : "https://api.github.com/users/fjahr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fjahr/followers",
         "following_url" : "https://api.github.com/users/fjahr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fjahr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fjahr",
         "id" : 1322187,
         "login" : "fjahr",
         "node_id" : "MDQ6VXNlcjEzMjIxODc=",
         "organizations_url" : "https://api.github.com/users/fjahr/orgs",
         "received_events_url" : "https://api.github.com/users/fjahr/received_events",
         "repos_url" : "https://api.github.com/users/fjahr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fjahr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fjahr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fjahr"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Can you point back to / comment on #27596 in regards to what is fixed / followed up on here, and what still needs fixing? Given there are now a number of post-merge review comments.",
      "created_at" : "2023-10-04T15:09:10Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28562#issuecomment-1747088460",
      "id" : 1747088460,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28562",
      "node_id" : "IC_kwDOABII585oInRM",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1747088460/reactions"
      },
      "updated_at" : "2023-10-04T15:09:10Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1747088460",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/863730?v=4",
         "events_url" : "https://api.github.com/users/fanquake/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fanquake/followers",
         "following_url" : "https://api.github.com/users/fanquake/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fanquake/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fanquake",
         "id" : 863730,
         "login" : "fanquake",
         "node_id" : "MDQ6VXNlcjg2MzczMA==",
         "organizations_url" : "https://api.github.com/users/fanquake/orgs",
         "received_events_url" : "https://api.github.com/users/fanquake/received_events",
         "repos_url" : "https://api.github.com/users/fanquake/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fanquake/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fanquake"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28562#discussion_r1346119038"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28562"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1346119038"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "re: https://github.com/bitcoin/bitcoin/pull/28562#discussion_r1344824078\r\n\r\nI implemented the changes I suggested above in #28590, so will mark this thread resolved to avoid unnecessarily slowing down this PR.",
      "commit_id" : "2c9a84136bd4e9bdf7c85296e56364dc6a22f6b2",
      "created_at" : "2023-10-04T16:00:19Z",
      "diff_hunk" : "@@ -2855,6 +2855,9 @@ return RPCHelpMan{\n         return data;\n     };\n \n+    // We present the IBD/background chainstate as \"normal\" to users, since\n+    // it should not matter to them if there is also a snapshot chainstate.\n+    // To users, the IBD chainstate should always be considered \"normal\".",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28562#discussion_r1346119038",
      "id" : 1346119038,
      "in_reply_to_id" : 1344154808,
      "line" : 2860,
      "node_id" : "PRRC_kwDOABII585QPCV-",
      "original_commit_id" : "42d585d981350052b00001fa52a895ddca642c11",
      "original_line" : 2860,
      "original_position" : 6,
      "original_start_line" : 2858,
      "path" : "src/rpc/blockchain.cpp",
      "position" : 24,
      "pull_request_review_id" : 1657989469,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28562",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1346119038/reactions"
      },
      "side" : "RIGHT",
      "start_line" : 2858,
      "start_side" : "RIGHT",
      "subject_type" : "line",
      "updated_at" : "2023-10-04T16:11:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1346119038",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "re: https://github.com/bitcoin/bitcoin/pull/28562#issuecomment-1747088460\r\n\r\n> Can you point back to / comment on #27596 in regards to what is fixed / followed up on here, and what still needs fixing? Given there are now a number of post-merge review comments.\r\n\r\nThis would be great, but there are a lot of open review comments on #27596 right now and this PR only addresses a small number of them, so it would be hard to compile a list of what is left and decide what is worth spending time to fix.\r\n\r\nIt would be good to comment on #27596 about what things were addressed here, though, so if someone wants to make another PR that addresses other issues that seem important, they can do that after this one.",
      "created_at" : "2023-10-04T16:21:38Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28562#issuecomment-1747242568",
      "id" : 1747242568,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28562",
      "node_id" : "IC_kwDOABII585oJM5I",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1747242568/reactions"
      },
      "updated_at" : "2023-10-04T16:22:17Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1747242568",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->\nð This pull request conflicts with the target branch and [needs rebase](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#rebasing-changes).\n",
      "created_at" : "2023-10-04T18:50:55Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28562#issuecomment-1747456375",
      "id" : 1747456375,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28562",
      "node_id" : "IC_kwDOABII585oKBF3",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1747456375/reactions"
      },
      "updated_at" : "2023-10-04T18:50:55Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1747456375",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Can you give this a rebase? I think 952f03704958ff3f924ddf140fc9eb7663eea118 can be dropped after #28590?",
      "created_at" : "2023-10-06T12:28:35Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28562#issuecomment-1750570230",
      "id" : 1750570230,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28562",
      "node_id" : "IC_kwDOABII585oV5T2",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1750570230/reactions"
      },
      "updated_at" : "2023-10-06T12:28:35Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1750570230",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   }
]
