[
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage\nFor detailed information about the code coverage, see the [test coverage report](https://corecheck.dev/bitcoin/bitcoin/pulls/29256).\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| Concept NACK | [ajtowns](https://github.com/bitcoin/bitcoin/pull/29256#issuecomment-1894630511), [hodlinator](https://github.com/bitcoin/bitcoin/pull/29256#pullrequestreview-2142978382) |\n| Concept ACK | [TheCharlatan](https://github.com/bitcoin/bitcoin/pull/29256#issuecomment-2189810744), [jonatack](https://github.com/bitcoin/bitcoin/pull/29256#issuecomment-2197318437) |\n\nIf your review is incorrectly listed, please react with ð to this comment and the bot will ignore it on the next update.\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#30347](https://github.com/bitcoin/bitcoin/pull/30347) (logging: Use LogFatal instead LogError for fatal errors by ryanofsky)\n* [#30342](https://github.com/bitcoin/bitcoin/pull/30342) (kernel, logging: Pass Logger instances to kernel objects by ryanofsky)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.\n",
      "created_at" : "2024-01-16T22:09:38Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29256#issuecomment-1894600378",
      "id" : 1894600378,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/29256",
      "node_id" : "IC_kwDOABII585w7U66",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1894600378/reactions"
      },
      "updated_at" : "2024-06-28T16:58:04Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1894600378",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Concept NACK from me, this seems much uglier and trickier to work with. I've already written [in depth](https://github.com/bitcoin/bitcoin/pull/28318#issuecomment-1702318968) about why the current approach makes sense, so I'll be brief here.\r\n\r\n> Make them always accept log categories to make it possible to only log messages from a particular component.\r\n\r\nBeing able to avoid logging critical messages is adding a bug, not a feature.\r\n\r\n> Make them less verbose by not requiring BCLog category constants to be specified in individual log prints\r\n\r\n\"+841 -626\" and adding a dummy parameter to most calls does not make things less verbose, and it's also much harder to search for net related logging when the individual log statements just say `m_log` rather than `BCLog::NET`.\r\n\r\n> Make them compatible with wallet logging, which includes the wallet name in log messages\r\n\r\nThe only thing needed here is renaming from `Printf` to `Info`...",
      "created_at" : "2024-01-16T22:34:50Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29256#issuecomment-1894630511",
      "id" : 1894630511,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/29256",
      "node_id" : "IC_kwDOABII585w7cRv",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1894630511/reactions"
      },
      "updated_at" : "2024-01-16T22:34:50Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1894630511",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/127186?v=4",
         "events_url" : "https://api.github.com/users/ajtowns/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ajtowns/followers",
         "following_url" : "https://api.github.com/users/ajtowns/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ajtowns/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ajtowns",
         "id" : 127186,
         "login" : "ajtowns",
         "node_id" : "MDQ6VXNlcjEyNzE4Ng==",
         "organizations_url" : "https://api.github.com/users/ajtowns/orgs",
         "received_events_url" : "https://api.github.com/users/ajtowns/received_events",
         "repos_url" : "https://api.github.com/users/ajtowns/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ajtowns/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ajtowns/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ajtowns"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->\nð This pull request conflicts with the target branch and [needs rebase](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#rebasing-changes).\n",
      "created_at" : "2024-01-16T23:59:54Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29256#issuecomment-1894708150",
      "id" : 1894708150,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/29256",
      "node_id" : "IC_kwDOABII585w7vO2",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1894708150/reactions"
      },
      "updated_at" : "2024-01-16T23:59:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1894708150",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Hi AJ, this is a draft, and there will be some more changes which may address your concerns.\r\n\r\n> > Make them always accept log categories to make it possible to only log messages from a particular component.\r\n>\r\n> Being able to avoid logging critical messages is adding a bug, not a feature.\r\n\r\nAgree, but the idea here is not to discard log messages, the idea just is to attach meaningful metadata to log messages so they can be filtered by component.\r\n\r\n> > Make them less verbose by not requiring BCLog category constants to be specified in individual log prints\r\n>\r\n> \"+841 -626\" and adding a dummy parameter to most calls does not make things less verbose, and it's also much harder to search for net related logging when the individual log statements just say `m_log` rather than `BCLog::NET`.\r\n\r\nI can probably make the description clearer, but the idea here is that this will make the code less noisy:\r\n\r\n```diff\r\n-LogPrintLevel(BCLog::NET, BCLog::Level::Warning, \"getsockname failed\\n\");\r\n+LogWarning(log, \"getsockname failed\\n\");\r\n```\r\n\r\nIt is true this sacrifices ability to grep by category constants in the source code, and maybe in your judgement that is an unacceptable cost? But in my opinion, if we ever using same category constants in disparate parts of source code, or different category constants in the same part of the source code, it means source code is badly organized and we should fix that instead of resorting to a coping mechanism of searching for constants instead of searching by source path. In my experience, I've haven't used logging frameworks that have encouraged category constants to be scattered and mixed like this, and I don't think it is a good idea.\r\n\r\nThe \"+841 -626\" refactoring is definitely :hankey:-y and I plan to drop it from this PR. The change to the log macros is meant to facilitate that refactoring, not the other way around. I do think we should stop relying on the global logging instance for libbitcoinkernel code, but probably can keep using it elsewhere.\r\n\r\n> > Make them compatible with wallet logging, which includes the wallet name in log messages\r\n>\r\n> The only thing needed here is renaming from `Printf` to `Info`...\r\n\r\nProbably something is lost in communication here, but the idea is to let wallet code use same LogDebug(), LogTrace(), LogInfo(), LogWarning(), LogError() macros other code uses. It just adds a little formatting hook so the wallet name is automatically included when the log source is the wallet. This way full functionality of #29256 is available to the wallet and we can drop WalletLogPrintf and not have dedicated wallet logging functions.\r\n\r\n",
      "created_at" : "2024-01-17T04:41:32Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29256#issuecomment-1894928988",
      "id" : 1894928988,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/29256",
      "node_id" : "IC_kwDOABII585w8lJc",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1894928988/reactions"
      },
      "updated_at" : "2024-01-17T04:42:02Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1894928988",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--85328a0da195eb286784d51f73fa0af9-->\n\nð§ At least one of the CI tasks failed. Make sure to run all tests locally, according to the\ndocumentation.\n\nPossibly this is due to a silent merge conflict (the changes in this pull request being\nincompatible with the current code in the target branch). If so, make sure to rebase on the latest\ncommit of the target branch.\n\nLeave a comment here, if you need help tracking down a confusing failure.\n\n<sub>Debug: https://github.com/bitcoin/bitcoin/runs/20586125687</sub>",
      "created_at" : "2024-01-17T19:15:21Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29256#issuecomment-1896474430",
      "id" : 1896474430,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/29256",
      "node_id" : "IC_kwDOABII585xCec-",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1896474430/reactions"
      },
      "updated_at" : "2024-01-17T19:15:21Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1896474430",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> Agree, but the idea here is not to discard log messages, the idea just is to attach meaningful metadata to log messages so they can be filtered by component.\r\n\r\nFiltering is discarding.\r\n\r\nIf you just want to *find* log messages, that what's grep is for, and if you want to make it more fine-grained than \"hey this is an important log message/warning/error\", that's what `-logsourcelocations` is for.\r\n\r\nIf it's any help, I think it's better to think of the sections as not related to which section of the code they appear in so much (again, that's what `-logsourcelocations` is for), but as a subset of the \"debug\" part, in that they let you filter/discard various parts of the full debug log that you would get with `-debug=1`.\r\n \r\n> ```diff\r\n> -LogPrintLevel(BCLog::NET, BCLog::Level::Warning, \"getsockname failed\\n\");\r\n> +LogWarning(log, \"getsockname failed\\n\");\r\n> ```\r\n\r\nThe current code there is noisy because it uses `LogPrintLevel`. The change you're actually making is:\r\n\r\n```diff\r\n-LogWarning(\"getsockname failed\\n\");\r\n+LogWarning(log, \"getsockname failed\\n\");\r\n```\r\n\r\nwhich is adding characters, without adding any information to the reader.\r\n \r\n> It is true this sacrifices ability to grep by category constants in the source code, and maybe in your judgement that is an unacceptable cost?\r\n\r\nI think `LogDebug(BCLog::NET, \"oh no, it all went wrong\\n\")` is better than `LogDebug(m_log, \"oh no, it all went wrong)`. All the characters in the former are doing something useful; `m_log` in the latter isn't (if it weren't for macro magic, we'd write `m_log.Debug(\"...\")` instead, which would be okay at least). I don't think moving the category away from the line of code it's affecting is very useful; and if you want to group all the logs from an individual file together (the way putting `m_log{BCLog::NET}` at the top of the file/class does), then, again, that's what logsourcelocations is for...\r\n\r\n> But in my opinion, if we ever using same category constants in disparate parts of source code, or different category constants in the same part of the source code, it means source code is badly organized and we should fix that instead of resorting to a coping mechanism of searching for constants instead of searching by source path.\r\n\r\nThat's something that already happens: `BCLog::NET` is in timedata and headersync and banman and net and net_processing; `BCLog::VALIDATION` is in validation and validationinterface and flatfile (thought there was a pr to fix that one) and signet; `BCLog::MEMPOOL` is in txmempool, validation and net_processing. It doesn't mean the source code is badly organised, it means different parts of the source are generating related log messages.\r\n\r\n> In my experience, I've haven't used logging frameworks that have encouraged category constants to be scattered and mixed like this, and I don't think it is a good idea.\r\n\r\nI don't think there is anything here \"encouraging\" these categories to be scattered or mixed; most of them are specific to a small set of related files: TOR:torcontrol, HTTP:httpserver, ZMQ:zmq/*, WALLETDB:wallet/*, ESTIMATEFEE:policy/fees.cpp, SELECTCOINS:wallet/coinselection, REINDEX:validation, CMPCTBLOCK:blockencodings, RAND:random.cpp, etc.\r\n\r\nAnd you obviously have worked with code designed this way: that's how `LogPrint` has worked in this codebase since it was implemented in #3009.\r\n\r\n> Probably something is lost in communication here, but the idea is to let wallet code use same LogDebug(), LogTrace(), LogInfo(), LogWarning(), LogError() macros other code uses.\r\n\r\nUpdating `TraceSqlCallback` to call `LogTrace` rather than `LogPrintf` would be an improvement as those messages would get categorised properly; but otherwise this seems like massive overkill just to avoid writing `\"[%s] ...\", walletname, ...`.\r\n\r\n> It just adds a little formatting hook so the wallet name is automatically included when the log source is the wallet. This way full functionality of #29256 is available to the wallet and we can drop WalletLogPrintf and not have dedicated wallet logging functions.\r\n\r\nA +190 -109 diff because you don't like a one-line wrapper function seems crazy to me.\r\n\r\nDo you have some reason to think there's large amounts of additional wallet debug logs that would be introduced if it didn't involve writing `[%s], walletname` or are there a bunch of the current unconditional `WalletLogPrintf` calls that should be silenced and only available when debugging is enabled?",
      "created_at" : "2024-01-19T06:12:29Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29256#issuecomment-1899825975",
      "id" : 1899825975,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/29256",
      "node_id" : "IC_kwDOABII585xPQs3",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1899825975/reactions"
      },
      "updated_at" : "2024-01-19T06:12:29Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1899825975",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/127186?v=4",
         "events_url" : "https://api.github.com/users/ajtowns/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ajtowns/followers",
         "following_url" : "https://api.github.com/users/ajtowns/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ajtowns/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ajtowns",
         "id" : 127186,
         "login" : "ajtowns",
         "node_id" : "MDQ6VXNlcjEyNzE4Ng==",
         "organizations_url" : "https://api.github.com/users/ajtowns/orgs",
         "received_events_url" : "https://api.github.com/users/ajtowns/received_events",
         "repos_url" : "https://api.github.com/users/ajtowns/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ajtowns/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ajtowns/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ajtowns"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "@ajtowns, to try to steer this discussion in a more constructive direction, would it be possible for you to make a list of the biggest harms you believe this PR would cause if it were merged? And if you have ideas on how the harms you see could be avoided, while the problems I am trying to solve (see \"Problems this PR attempts to solve\" in the PR description) could be addressed, it would be really helpful to know about. Maybe the harms you see this PR causing and the problems this PR is trying to solve are in direct contradiction, but it's not obvious to me that this is the case, so maybe there is a way out of our disagreement here. In the meantime, I responded to your last message below.\r\n\r\nre: https://github.com/bitcoin/bitcoin/pull/29256#issuecomment-1899825975\r\n\r\n> Filtering is discarding.\r\n\r\nIt's really not. You can view logs into a text editor or log viewer and highlight categories of messages you are interested in while not discarding other messages.\r\n\r\nI am just trying to add some basic flexibility here. If you don't want to attach categories to log messages, you don't have to, you can write `LogWarning({}, \"uncategorizable warning\")`. The PR just makes the log macros consistently accept a source parameter, so code has flexibility to set a category, set a log destination, add metadata to log messages, control log formatting, do a combination of these things, or do none of these things.\r\n\r\n> ```diff\r\n> -LogWarning(\"getsockname failed\\n\");\r\n> +LogWarning(log, \"getsockname failed\\n\");\r\n> ```\r\n> which is adding characters, without adding any information to the reader.\r\n\r\nThis adds 5 characters, but also adds category information that was previously absent to the output. You can find examples of where the API changes in this PR increase verbosity, and examples where they decrease it, and I think there should be less verbosity on net. I also think some of this discussion around verbosity misses the bigger picture, and is a distraction from the actual goal of the PR, which is to add context to log messages, and give code that needs it control over logging behavior. But if making the log parameter optional is a requirement for you, it should be possible to implement that here and never increase verbosity in any case.\r\n\r\n> All the characters in the former are doing something useful; `m_log` in the latter isn't (if it weren't for macro magic, we'd write `m_log.Debug(\"...\")` instead, which would be okay at least).\r\n\r\nI agree `m_log.Debug(\"...\")` would be better than `LogDebug(m_log, \"...\")` but I don't understand why the former would be ok, but the latter is unacceptable. You definitely have much stronger opinions about verbosity than me, so maybe we can try to engage more constructively on this. I think on net, this PR should reduce verbosity, but maybe more improvements are possible that could alleviate your concerns.\r\n\r\n> I don't think moving the category away from the line of code it's affecting is very useful\r\n\r\nThat's ok, since allowing this was a side effect, not a major goal of this PR. But `LogDebug(m_log, \"debug message\")` can be easier to write and read than `LogDebug(BCLog::TXRECONCILIATION, \"debug message\")`, especially if the code has a lot of log prints and the category is repeated a lot. In any case, you aren't forced to choose one approach or the other. The PR allows both.\r\n\r\n> It doesn't mean the source code is badly organised, it means different parts of the source are generating related log messages.\r\n\r\nOk, we definitely disagree on how well the code is organized. IMO, `validation.cpp` doing `BCLog::MEMPOOL` prints is messed up. But this is a tangent. I think log sources should encourage better organization, but this PR does not force anything or break anything that works now.\r\n\r\n> I don't think there is anything here \"encouraging\" these categories to be scattered or mixed\r\n\r\nI don't want to make a big deal out of this, but just to clarify, I think the status quo where trace and debug macros require `BCLog::LogFlags` arguments and can't take source arguments makes it easier to mix up categories, intentionally and unintentionally. The alternative where source objects can be used for error/warning/info prints, not just debug/trace prints, and can tag everything with the same category should make it easier to be consistent if you want to be consistent (and not get in the way if you don't want to).\r\n\r\n> Updating `TraceSqlCallback` to call `LogTrace` rather than `LogPrintf` would be an improvement as those messages would get categorised properly; but otherwise this seems like massive overkill just to avoid writing `\"[%s] ...\", walletname, ...`.\r\n\r\nI don't see the massive overkill. This is a reasonable PR that adds documentation, tests, and doesn't change very much code. We don't want to require every individual wallet log print to include `\"[%s] ...\", walletname, ...` boilerplate for obvious reasons, I think. The problems with the `WalletLogPrintf` function are:\r\n\r\n1. It is only capable of logging at info level, does not provide a way to log at higher or lower levels.\r\n2. It evaluates its arguments unconditionally, so if it were extended to log at lower levels, it would either be inefficient or need to duplicate preprocessor code from logging.h to be as efficient.\r\n3. It is inconsistent with the rest of the codebase. It is nice if the same logging macros can be used everywhere, and the same features can be used everywhere. It also ensures logging is consistent within the wallet and only one logging API is used there.",
      "created_at" : "2024-01-25T20:03:28Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29256#issuecomment-1910905907",
      "id" : 1910905907,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/29256",
      "node_id" : "IC_kwDOABII585x5hwz",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1910905907/reactions"
      },
      "updated_at" : "2024-01-25T20:04:59Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1910905907",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "re: https://github.com/bitcoin/bitcoin/pull/29256#issuecomment-1910905907\r\n\r\n> But if making the log parameter optional is a requirement for you, it should be possible to implement that here and never increase verbosity in any case.\r\n\r\nIt turns out making the category argument completely optional is not too hard to implement: 69e69b2a82c95f8040be093a29e5f84c37641f3a. So you could write:\r\n\r\n ```c++\r\nLogWarning(\"uncategorizable warning\")\r\n```\r\n\r\ninstead of\r\n\r\n ```\r\nLogWarning({}, \"uncategorizable warning\")\r\n```\r\n\r\nif that is the blocker here.",
      "created_at" : "2024-01-29T03:45:15Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29256#issuecomment-1913911460",
      "id" : 1913911460,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/29256",
      "node_id" : "IC_kwDOABII585yE_ik",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1913911460/reactions"
      },
      "updated_at" : "2024-01-29T03:45:15Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1913911460",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> And if you have ideas on how the harms you see could be avoided, while the problems I am trying to solve (see \"Problems this PR attempts to solve\" in the PR description) could be addressed, \r\n\r\nI think the problem you are actually attempting to solve is [\"I, ryanofsky, find this weird and I don't like it\"](https://github.com/bitcoin/bitcoin/pull/28318#discussion_r1450411706), and I don't think code changes are the way of solving that, any more than code changes are the right way to solve the problem \"Bitcoin is weird and I don't like it\". I think you're wrong, but you seem unwilling to consider changing your opinion, so I'm pretty doubtful this is going to be productive. However, in case I'm wrong:\r\n\r\n> These macros cannot be used directly in wallet code because wallet log prints are supposed to automatically attach wallet names to log messages.\r\n\r\nThe only cases where wallet names are automatically attached to log messages are in info level calls, which can be trivially dealt with by changing the existing wrapper to call `LogInfo`, and with an optional scripted diff renaming the wrapper as well.\r\n\r\n> These macros cannot be used at all in libbitcoinkernel code because they do not allow specifying a logger instance. \r\n\r\nThis, also, is not true: the assumption of these macros is that there is a global `BCLog::Logger` instance, which is already provided by `LogInstance()`. If we want to allow apps to configure libbitcoinkernel's logging in future, we could allow them to setup that global instance, or provide their own callbacks for it to use, in much the same way libevent allows you to setup callbacks. That's not something that needs changing.\r\n\r\n> > Filtering is discarding.\r\n> \r\n> It's really not. You can view logs into a text editor or log viewer and highlight categories of messages you are interested in while not discarding other messages.\r\n\r\nThat's not filtering, that's 'grepping'. If you don't want to filter, but just want to highlight, then, as I've said repeatedly, logsourcelocations is what you want; the only benefit categories have compared to that is that categories can be (and by default are) filtered/discarded. logsourcelocations gives you much more exact information, is precisely separated by source file as you want, works with every level of log message, and requires no code changes or ongoing development effort to support.\r\n\r\n> I am just trying to add some basic flexibility here. If you don't want to attach categories to log messages, you don't have to, you can write `LogWarning({}, \"uncategorizable warning\")`.\r\n\r\nIn that case you will not be able to use your log viewer to highlight that message when you're looking for it, which defeats your claimed goal. (Except, of course, you can select it for highlight, by looking for `[warning]` markers)\r\n\r\n> The PR just makes the log macros consistently accept a source parameter,\r\n\r\nCan you please try using the logsourcelocations option before replying again? I really don't see how it doesn't already do everything you want, but you've ignored it every time I've mentioned it.\r\n\r\n> > ```diff\r\n> > -LogWarning(\"getsockname failed\\n\");\r\n> > +LogWarning(log, \"getsockname failed\\n\");\r\n> > ```\r\n> > which is adding characters, without adding any information to the reader.\r\n\r\nThe reader of the source code, is who I'm referring to here.\r\n \r\n> > All the characters in the former are doing something useful; `m_log` in the latter isn't (if it weren't for macro magic, we'd write `m_log.Debug(\"...\")` instead, which would be okay at least).\r\n> \r\n> I agree `m_log.Debug(\"...\")` would be better than `LogDebug(m_log, \"...\")`\r\n\r\nI don't think `m_log.Debug()` would be better than `LogDebug` -- in my opinion having a global log instance is the right thing here, and both having multiple references to a global log instance or having multiple log instances that all then coordinate writing to a single log would be worse.\r\n\r\nAs I've already said, I think `m_log.SetCategory(NET); m_log.Debug(\"connected to foo\")` is much worse than `LogDebug(NET, \"connected to foo\")`. Having to keep more context/state in your head when you're looking at code makes things harder, and it tends to make tool use go from \"usually works\" to \"never works\" (eg, `grep -RIl 'Log.*NET'`).\r\n \r\n> > It doesn't mean the source code is badly organised, it means different parts of the source are generating related log messages.\r\n> \r\n> Ok, we definitely disagree on how well the code is organized. IMO, `validation.cpp` doing `BCLog::MEMPOOL` prints is messed up. But this is a tangent. I think log sources should encourage better organization, but this PR does not force anything or break anything that works now.\r\n\r\nvalidation.cpp is where we have the code for \"is this valid for the mempool\", because we thought the word \"valid\" was more important than the word \"mempool\" in that sentence. `BCLog::VALIDATION` on the other hand is limited to blocks and headers, allowing it to be much less noisy than anything that triggers for every transaction, like `BCLog::MEMPOOL`. None of that is any indication of whether the code is well or badly organised.\r\n\r\n> > I don't think there is anything here \"encouraging\" these categories to be scattered or mixed\r\n> \r\n> I don't want to make a big deal out of this, but just to clarify, I think the status quo where trace and debug macros require `BCLog::LogFlags` arguments and can't take source arguments makes it easier to mix up categories, intentionally and unintentionally.\r\n\r\nI think by \"source arguments\" you mean \"a context argument\", and there's no reason they couldn't -- you can write `LogDebug(m_log_category, \"stuff\");` right now just as easily as you could `LogDebug(m_log, \"stuff\");` after this PR. That would still be a bad idea, though, as having the name of the log category obvious in the code is helpful.\r\n \r\n> > Updating `TraceSqlCallback` to call `LogTrace` rather than `LogPrintf` would be an improvement as those messages would get categorised properly; but otherwise this seems like massive overkill just to avoid writing `\"[%s] ...\", walletname, ...`.\r\n> \r\n> I don't see the massive overkill.\r\n\r\nIf there's a way of getting 99% of the benefits with a +1-1 change, then a +300-200 change is overkill in general.\r\n\r\n> This is a reasonable PR that adds documentation, tests, and doesn't change very much code. We don't want to require every individual wallet log print to include `\"[%s] ...\", walletname, ...` boilerplate for obvious reasons, I think. The problems with the `WalletLogPrintf` function are:\r\n> \r\n>     1. It is only capable of logging at info level, does not provide a way to log at higher or lower levels.\r\n\r\nWhy do you think that is a problem? None of the other existing cases need to add walletname boilerplate. What wallet-specific event (if it's not wallet specific, it doesn't need to be tagged with a wallet name) shouldn't be unconditionally logged (if an event is affecting the thing that holds all your funds, isn't that one of the most important things to log)?\r\n\r\n>     2. It evaluates its arguments unconditionally, so if it were extended to log at lower levels, it would either be inefficient or need to duplicate preprocessor code from logging.h to be as efficient.\r\n\r\nThat it only logs at info level means it is unconditionally logged, so all the arguments are naturally unconditionally evaluated.\r\n\r\n>     3. It is inconsistent with the rest of the codebase.\r\n\r\nIt's inconsistent with your idea of how the codebase should be, but it's completely consistent with how the codebase actually is. Which is fine: changing the codebase to match better ideas is how you improve it. But things aren't going to improve if we can't recognise how things actually are in the first place.",
      "created_at" : "2024-01-29T05:32:13Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29256#issuecomment-1913991867",
      "id" : 1913991867,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/29256",
      "node_id" : "IC_kwDOABII585yFTK7",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1913991867/reactions"
      },
      "updated_at" : "2024-01-29T05:32:13Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1913991867",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/127186?v=4",
         "events_url" : "https://api.github.com/users/ajtowns/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ajtowns/followers",
         "following_url" : "https://api.github.com/users/ajtowns/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ajtowns/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ajtowns",
         "id" : 127186,
         "login" : "ajtowns",
         "node_id" : "MDQ6VXNlcjEyNzE4Ng==",
         "organizations_url" : "https://api.github.com/users/ajtowns/orgs",
         "received_events_url" : "https://api.github.com/users/ajtowns/received_events",
         "repos_url" : "https://api.github.com/users/ajtowns/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ajtowns/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ajtowns/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ajtowns"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--85328a0da195eb286784d51f73fa0af9-->\n\nð§ At least one of the CI tasks failed. Make sure to run all tests locally, according to the\ndocumentation.\n\nPossibly this is due to a silent merge conflict (the changes in this pull request being\nincompatible with the current code in the target branch). If so, make sure to rebase on the latest\ncommit of the target branch.\n\nLeave a comment here, if you need help tracking down a confusing failure.\n\n<sub>Debug: https://github.com/bitcoin/bitcoin/runs/20597453668</sub>",
      "created_at" : "2024-02-10T12:18:15Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29256#issuecomment-1936993273",
      "id" : 1936993273,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/29256",
      "node_id" : "IC_kwDOABII585zdCv5",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1936993273/reactions"
      },
      "updated_at" : "2024-02-10T12:18:15Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1936993273",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Updated 99feed7350b5fc3ae3157dd395ae6260c5bfc092 -> 0cd1616d47e61e125eb3e573573c0c56fba6b775 ([`pr/bclog.12`](https://github.com/ryanofsky/bitcoin/commits/pr/bclog.12) -> [`pr/bclog.13`](https://github.com/ryanofsky/bitcoin/commits/pr/bclog.13), [compare](https://github.com/ryanofsky/bitcoin/compare/pr/bclog.12..pr/bclog.13)) making the log macros backwards compatible to avoid any controversial changes.\r\nRebased 0cd1616d47e61e125eb3e573573c0c56fba6b775 -> 93d37f7d655409e6830475a10f4c9f16e35c76cd ([`pr/bclog.13`](https://github.com/ryanofsky/bitcoin/commits/pr/bclog.13) -> [`pr/bclog.14`](https://github.com/ryanofsky/bitcoin/commits/pr/bclog.14), [compare](https://github.com/ryanofsky/bitcoin/compare/pr/bclog.13-rebase..pr/bclog.14)) due to silent conflicts with #26836.\r\nUpdated 93d37f7d655409e6830475a10f4c9f16e35c76cd -> a91fbbd61551702f26f734f3cdd1c080f9d51628 ([`pr/bclog.14`](https://github.com/ryanofsky/bitcoin/commits/pr/bclog.14) -> [`pr/bclog.15`](https://github.com/ryanofsky/bitcoin/commits/pr/bclog.15), [compare](https://github.com/ryanofsky/bitcoin/compare/pr/bclog.14..pr/bclog.15)) to fix tidy failure https://cirrus-ci.com/task/6362757050662912, and try to work around MSVC compiler bug  https://github.com/bitcoin/bitcoin/actions/runs/8072891468/job/22055528830?pr=29256, and clean up some documentation.\r\n\r\n\r\n> If some parts of this PR cause controversy, could it be reduced to the non-controversial things?\r\n\r\nI made a try at this in the latest push. I think most of the criticism of this PR from AJ is saying that the changes here are unnecessary, not really that they are harmful, so I made the logging macros completely backwards compatible using the approach I mentioned https://github.com/bitcoin/bitcoin/pull/29256#issuecomment-1913911460, and only kept the changes I think are essential. I think this should help.",
      "created_at" : "2024-02-27T23:05:42Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29256#issuecomment-1967871169",
      "id" : 1967871169,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/29256",
      "node_id" : "IC_kwDOABII5851S1TB",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1967871169/reactions"
      },
      "updated_at" : "2024-02-28T01:50:15Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1967871169",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->\nð This pull request conflicts with the target branch and [needs rebase](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#rebasing-changes).\n",
      "created_at" : "2024-03-12T20:26:57Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29256#issuecomment-1992519234",
      "id" : 1992519234,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/29256",
      "node_id" : "IC_kwDOABII5852w25C",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1992519234/reactions"
      },
      "updated_at" : "2024-03-12T20:26:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1992519234",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> I think most of the criticism of this PR from AJ is saying that the changes here are unnecessary, not really that they are harmful,\r\n\r\nI said \"As I've already said, I think `m_log.SetCategory(NET); m_log.Debug(\"connected to foo\")` is much worse than `LogDebug(NET, \"connected to foo\")`.\" Does that really not come across as me saying they're harmful? I really don't think I'm being **that** unclear. Anyway, I'll bow out, I'm already sorry for touching this.",
      "created_at" : "2024-04-30T12:05:25Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29256#issuecomment-2085153558",
      "id" : 2085153558,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/29256",
      "node_id" : "IC_kwDOABII5858SOsW",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2085153558/reactions"
      },
      "updated_at" : "2024-04-30T12:05:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2085153558",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/127186?v=4",
         "events_url" : "https://api.github.com/users/ajtowns/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ajtowns/followers",
         "following_url" : "https://api.github.com/users/ajtowns/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ajtowns/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ajtowns",
         "id" : 127186,
         "login" : "ajtowns",
         "node_id" : "MDQ6VXNlcjEyNzE4Ng==",
         "organizations_url" : "https://api.github.com/users/ajtowns/orgs",
         "received_events_url" : "https://api.github.com/users/ajtowns/received_events",
         "repos_url" : "https://api.github.com/users/ajtowns/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ajtowns/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ajtowns/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ajtowns"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> > I think most of the criticism of this PR from AJ is saying that the changes here are unnecessary, not really that they are harmful,\r\n> \r\n> I said \"As I've already said, I think `m_log.SetCategory(NET); m_log.Debug(\"connected to foo\")` is much worse than `LogDebug(NET, \"connected to foo\")`.\" Does that really not come across as me saying they're harmful? I really don't think I'm being **that** unclear. Anyway, I'll bow out, I'm already sorry for touching this.\r\n\r\nI think it's possible you might be referring to some changes in an earlier version of this PR. The PR allows the syntax you like and support it as a first-class usage! It does change wallet code, however to look like `LogDebug(m_log, \"debug message\")` to include wallet filenames in log messages. So if that is the harm which this PR causes, I want to acknowledge it, and I will update the PR description.\r\n\r\n@ajtowns we've definitely had difficulty communicating here and in some other issues, and I'm sorry for the dismissive comments I initially left on #28318, which on the whole I think is actually a good PR. I especially regret it you are \"sorry for touching this\", because #28318 is a real improvement, and your comments on this PR have made it better too, and motivated all the work and simplifications I've made to it since it was opened.",
      "created_at" : "2024-04-30T13:06:39Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29256#issuecomment-2085290323",
      "id" : 2085290323,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/29256",
      "node_id" : "IC_kwDOABII5858SwFT",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2085290323/reactions"
      },
      "updated_at" : "2024-04-30T13:06:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2085290323",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> > > I think most of the criticism of this PR from AJ is saying that the changes here are unnecessary, not really that they are harmful,\r\n\r\n> > I said \"As I've already said, I think `m_log.SetCategory(NET); m_log.Debug(\"connected to foo\")` is much worse than `LogDebug(NET, \"connected to foo\")`.\" Does that really not come across as me saying they're harmful? I really don't think I'm being **that** unclear. Anyway, I'll bow out, I'm already sorry for touching this.\r\n\r\n> I think it's possible you might be referring to some changes in an earlier version of this PR.\r\n\r\nThat was the clearest example of saying that something was harmful, as evidence that I don't think you summarised my criticism accurately. English is my first language, so it's not like I can switch to another one to try to get my point across better... My main criticism of what remains is:\r\n\r\n> > > > Can you please try using the `logsourcelocations` option before replying again? I really don't see how it doesn't already do everything you want, but you've ignored it every time I've mentioned it.\r\n\r\nI'll rephrase how I see things again for whatever that's worth:\r\n\r\n * being able to match a log entry with where it came from in the source is super valuable\r\n * `-logsourcelocations` does that automatically for us, which is far less effort than manually specifying a category, and by giving a specific filename and line number, does a far better job of it as well\r\n * the only reason to keep the manual categories around at all is for selectively enabling/disabling noisy logs\r\n * the only noisy logs we have are those in the debug and trace levels (anything else would be a bug)\r\n * having those be manually specified rather than automatic is a win, as it allows us to rearrange our source code without accidentally breaking the configs of users who've enabled some noisy logs\r\n * adding those categories for non-noisy log messages is just busy work: it doesn't make it easier to find the source location of the debug message than `-logsourcelocations` does, and it doesn't help reduce log noise because those log messages aren't noisy in the first place\r\n\r\nThe macros in #28318 pretty much fall out from that. I suppose an alternative would be to have `Log(INFO, \"foo\")` and `LogNoisy(DEBUG, NET, \"bar\")` or so.\r\n\r\nThere are probably things `logsourcelocations` is bad at; if so, why not improve it so the benefits hit everywhere automatically?\r\n\r\n> The PR allows the syntax you like and support it as a first-class usage!\r\n\r\nI think specifying a category sometimes and not others depending on who happened to author that section of the code is a terrible idea. But I mean, it's not any more terrible than having \"LogPrint\" and \"LogPrintf\" having significantly different behaviour, so it's not like it's a disaster. Anyway, it's certainly not worth [15+ months of time/energy](https://github.com/bitcoin/bitcoin/pull/25203#issuecomment-1401126785).",
      "created_at" : "2024-04-30T15:05:38Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29256#issuecomment-2085586513",
      "id" : 2085586513,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/29256",
      "node_id" : "IC_kwDOABII5858T4ZR",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2085586513/reactions"
      },
      "updated_at" : "2024-04-30T15:05:38Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2085586513",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/127186?v=4",
         "events_url" : "https://api.github.com/users/ajtowns/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ajtowns/followers",
         "following_url" : "https://api.github.com/users/ajtowns/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ajtowns/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ajtowns",
         "id" : 127186,
         "login" : "ajtowns",
         "node_id" : "MDQ6VXNlcjEyNzE4Ng==",
         "organizations_url" : "https://api.github.com/users/ajtowns/orgs",
         "received_events_url" : "https://api.github.com/users/ajtowns/received_events",
         "repos_url" : "https://api.github.com/users/ajtowns/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ajtowns/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ajtowns/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ajtowns"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Thanks, I added a link directly to this comment in the summary so those who are interested can follow the chain of reasoning.\r\n\r\nTo reiterate my own point of view, `-logsourcelocation` does not solve the same problem this PR solves because it does not (1) let libitcoinkernel applications call validation functions and control which `Logger` object they write to, and (2) allow code like wallet code and index code to easily include additional metadata in log messages (wallet names and index names) while using convenient LogDebug(), LogTrace(), LogInfo(), LogWarning(), and LogError() macros.\r\n\r\n",
      "created_at" : "2024-04-30T16:33:33Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29256#issuecomment-2085898761",
      "id" : 2085898761,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/29256",
      "node_id" : "IC_kwDOABII5858VEoJ",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2085898761/reactions"
      },
      "updated_at" : "2024-04-30T16:33:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2085898761",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> To reiterate my own point of view, `-logsourcelocation` does not solve the same problem this PR solves because it does not\r\n\r\nThat ignores bullets (1), (2) and (5) from your OP (as it stands today).\r\n\r\nIt also ignores comments like [vasild's](https://github.com/bitcoin/bitcoin/pull/29256#pullrequestreview-1884614153), [jamesob's](https://github.com/bitcoin/bitcoin/pull/28318#discussion_r1445429093), [luke-jr's](https://github.com/bitcoin/bitcoin/pull/24464#pullrequestreview-902452600), [jonatack's](https://github.com/bitcoin/bitcoin/pull/28318#issuecomment-1879829758), [laanwj's](https://github.com/bitcoin/bitcoin/pull/28318#issuecomment-2085021744) or [your own](https://github.com/bitcoin/bitcoin/pull/28318#discussion_r1450411706). There's a valid disagreement there, isn't there? Can't we discuss it like engineers and work out what actual tradeoffs are lurking behind the intuition/gut feels? I've tried to spell out my reasoning both [before](https://github.com/bitcoin/bitcoin/pull/28318#issuecomment-1702318968) and after the PR got merged as well as having brought it up at the [irc meeting](https://www.erisian.com.au/bitcoin-core-dev/log-2023-08-31.html#l-384) to try to trigger discussion, but the response has just to reiterate the disagreement without any analysis or engagement with the reasoning that I've offered for doing it this way? Why? That makes no sense to me. I'm willing to be convinced I've made a mistake; but someone has to show me where I made the mistake, or at least do a show of hands that the majority prefers something else.\r\n\r\nI mean, am I incorrect in reading the previous two comments as \"here are the reasons I think this solution make sense: A, B, C, D, E, F\" and \"okay, that's nice, I'm going to completely ignore them, besides, X and Y are still important\"? Other than \"uh, okay, I guess I know when I'm not wanted\", how else am I meant to take it? What's the chance a response addressing X and Y will just also get equally ignored?\r\n\r\n(FWIW, I'd strongly contend that just declaring things should be such-and-such a way without being willing either talk through the tradeoffs and maybe find some mutually preferable solution, or to happily say \"oh well, not what I'd consider perfect, but not so bad, let's press on!\" is a pretty major contributor to things not progressing very fast. I can understand that habit in bitcoin broadly -- you explain why BTC is great and people shrug or call it a ponzi, and the only thing you can do is wait to be proven right, so you start just skipping straight to the final step -- but I don't understand it in the context of code changes at all...)\r\n\r\nAnyway, on to X and Y:\r\n\r\n>  (1) let libitcoinkernel applications call validation functions and control which `Logger` object they write to, \r\n\r\nDoing that meaningfully means changing all the logging in all the bitcoin-kernel related modules (eg validation, mempool, blockstorage, scheduler, ...) to explicitly specify a logger rather than using the global functions, which seems like a lot of pointless busy work? I can't imagine why we'd want to support having multiple bitcoin-kernel instances in a single executable logging to different loggers; if someone wants to do that, it seems easy enough to just launch two separate processes.\r\n\r\nThe alternative would be to just have applications manipulate the global logger directly, which is how things already work, perhaps turning it into an atomic unique_ptr or similar and making many of its function virtual to allow overriding?. I'm just not really sure what the problem here is that's worth fixing; we already buffer log messages until `StartLogging` is called, and libbitcoin-kernel continuing to have a global logger instance seems simple and efficient for both us and any potential users of the library.\r\n\r\n(If we did want to do that anyway for some reason, then waiting until `std::source_location` is available would let us use `log.Debug(...)` syntax via template functions rather than having to use a macro and writing `LogDebug(log, ...)`. So rushing this change now seems bad even if the goal makes sense in some way I don't see)\r\n\r\n(The phrasing in the OP is currently \"The new macros cannot be used in libbitcoinkernel code because they do not allow specifying a logger instance.\" but that seems just false -- there's a bunch of LogInfo() calls in kernel/*.cpp already, and all the LogPrintf and LogPrint calls in validation are just aliases of LogInfo and LogDebug)\r\n\r\n> and (2) allow code like wallet code and index code to easily include additional metadata in log messages (wallet names and index names) while using convenient LogDebug(), LogTrace(), LogInfo(), LogWarning(), and LogError() macros.\r\n\r\nWe could do that simply by renaming `WalletLogPrintf` to `WalletLogInfo`, with behaviour no worse than today. There just isn't currently a need for non-info-level logs that report the wallet's name (which makes sense: in general ops on a wallet are important enough to be an \"INFO\" event).\r\n\r\nHaving `WalletLogPrintf` (or whatever) wrap around `LogInfo` sucks a bit, because it means `-logsourcelocations` reports the wrapper location rather than the caller. But a fix for that will be easy \"real-soon-now\" (#29077) when we can use `std::source_location`.\r\n\r\nChanging `wallet/sqlite`'s `TraceSqlCallback` to use `LogTrace` instead of `LogPrintf` is something we could do today that would improve things by making the output correctly indicate that it's trace-level rather than info-level, and be correctly annotated with the debug category that enables it to be logged. Again, that only needs a few characters changed, not a fundamental revamp.\r\n\r\nHere's a [patchset](https://github.com/ajtowns/bitcoin/commits/202405-walletlog/) that does those wallet changes:  it's a one line change for the trace logging, and two scripted diffs. Easy to do, easy to review, and \"allows the wallet code to easily include its metadata in log messages while using convenient LogInfo macros/functions\". If we want to improve things further (like using `std::source_location` when it's available or introducing some wallet-specific warnings or debug messages) we could still easily do that in the future.",
      "created_at" : "2024-05-02T10:06:51Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29256#issuecomment-2090083022",
      "id" : 2090083022,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/29256",
      "node_id" : "IC_kwDOABII5858lCLO",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2090083022/reactions"
      },
      "updated_at" : "2024-05-02T10:06:51Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2090083022",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/127186?v=4",
         "events_url" : "https://api.github.com/users/ajtowns/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ajtowns/followers",
         "following_url" : "https://api.github.com/users/ajtowns/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ajtowns/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ajtowns",
         "id" : 127186,
         "login" : "ajtowns",
         "node_id" : "MDQ6VXNlcjEyNzE4Ng==",
         "organizations_url" : "https://api.github.com/users/ajtowns/orgs",
         "received_events_url" : "https://api.github.com/users/ajtowns/received_events",
         "repos_url" : "https://api.github.com/users/ajtowns/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ajtowns/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ajtowns/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ajtowns"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Concept ACK\r\n\r\nRe https://github.com/bitcoin/bitcoin/pull/29256#issuecomment-2090083022\r\n\r\n> Doing that meaningfully means changing all the logging in all the bitcoin-kernel related modules (eg validation, mempool, blockstorage, scheduler, ...) to explicitly specify a logger rather than using the global functions, which seems like a lot of pointless busy work? I can't imagine why we'd want to support having multiple bitcoin-kernel instances in a single executable logging to different loggers; if someone wants to do that, it seems easy enough to just launch two separate processes.\r\n\r\nThere are use cases for having e.g. two chainstate managers running in parallel. Take a block file linearizer replacing the scripts in `contrib/linearize` as an example; you have one that reads blocks in their indexed order and another that writes blocks and their index back to another location on disk. Having something to distinguishing logs issued between the two sounds useful. In my eyes an important utility of the library is exactly that, you don't have to use multiple processes or go through the rpc to interact with Bitcoin Core's data structures and validation rules.",
      "created_at" : "2024-06-25T19:26:27Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29256#issuecomment-2189810744",
      "id" : 2189810744,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/29256",
      "node_id" : "IC_kwDOABII586Chdw4",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2189810744/reactions"
      },
      "updated_at" : "2024-06-25T19:35:35Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2189810744",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8421793?v=4",
         "events_url" : "https://api.github.com/users/TheCharlatan/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheCharlatan/followers",
         "following_url" : "https://api.github.com/users/TheCharlatan/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheCharlatan/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheCharlatan",
         "id" : 8421793,
         "login" : "TheCharlatan",
         "node_id" : "MDQ6VXNlcjg0MjE3OTM=",
         "organizations_url" : "https://api.github.com/users/TheCharlatan/orgs",
         "received_events_url" : "https://api.github.com/users/TheCharlatan/received_events",
         "repos_url" : "https://api.github.com/users/TheCharlatan/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheCharlatan/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheCharlatan/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheCharlatan"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "re: https://github.com/bitcoin/bitcoin/pull/29256#issuecomment-2090083022\r\n\r\nAJ, thanks for the response. I want to let your comment stand, and not reply in detail right away to wait for input on this PR from other potential reviewers. I think your views on importance of hardcoding category constants in certain log statements, and on not allowing categories to be specified in other log statements are atypical, or at least will not be as strongly felt by other reviewers.\r\n\r\nBut your response does help me understand your concerns better, and your preferred solution of letting wallet code use its own logging functions, and having kernel code continue to use a global logger. It is also maybe a sign of hope to me that you seem to like `log.Debug(...)` syntax while disliking `LogDebug(log, ...)` syntax. I personally don't see much distinction between the two syntaxes, other than that latter allows arguments to be conditionally evaluated. But not evaluating arguments seems less important to me than being able to log in a consistent way across the codebase, so this offers hope for compromise.\r\n\r\nI also want to say again that I respect your opinions and appreciate you paying attention to this PR. Your earlier comments directly led to a number of improvements in the PR since it was opened.",
      "created_at" : "2024-06-25T20:55:04Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29256#issuecomment-2189951185",
      "id" : 2189951185,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/29256",
      "node_id" : "IC_kwDOABII586CiADR",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2189951185/reactions"
      },
      "updated_at" : "2024-06-25T20:55:04Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2189951185",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> Take a block file linearizer replacing the scripts in `contrib/linearize` as an example; you have one that reads blocks in their indexed order and another that writes blocks and their index back to another location on disk. \r\n\r\nI don't think we should be reworking logging in our entire codebase in order to have a slight improvement in the hypothetical case where we replace some python scripts in contrib with C++ code? If this is worth doing, surely there is a *much* better example of why.\r\n\r\n> Having something to distinguishing logs issued between the two sounds useful\r\n\r\nTo me, this suggests that a \"context\" parameter would be more appropriate than an \"instance\" one -- eg `LogInfo(walletctx, \"opened wallet, and sent all your funds to the genesis address, haha\\n\");` where the logging system would automatically invoke `msg = walletctx(msg)` when provided, in order to prefix the wallet name to the message or similar, but only after verifying logging is actually enabled. That's much more constrained behaviour than an instance parameter -- it just adds context information to a log message rather than allowing you to change the priority/category, or have completely different logging parameters (log file location, log to stdout, display source location, etc). The difference between `LogInfo(m_wallet_ctx, \"...\")` and the existing `WalletLogPrintf(\"...\")` seems pretty minor to me.\r\n\r\nThere are two different ways you might want to add context information: internally to a module, in the way that the wallet does, which would imply the `ctx` variable is established within the module and is private/local to that module. In that case, a similar approach to the one here would make sense -- have it be an optional parameter that the wallet module uses.\r\n\r\nThe other way is to have the context be provided externally to a module, so that you can create two instances of the module with different logging contexts that the caller controls. The latter seems like what you're imagining for the contrib/linearize example; but in that case, every module needs to pull in a context from its caller, much more like #30338. I don't see how the latter would mesh well with modules like wallet that also want to add internal context (would we have chained contexts? would the context object manage that?), and it seems like unnecessary complexity to me.",
      "created_at" : "2024-06-26T08:05:24Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29256#issuecomment-2191074487",
      "id" : 2191074487,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/29256",
      "node_id" : "IC_kwDOABII586CmSS3",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2191074487/reactions"
      },
      "updated_at" : "2024-06-26T08:16:35Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2191074487",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/127186?v=4",
         "events_url" : "https://api.github.com/users/ajtowns/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ajtowns/followers",
         "following_url" : "https://api.github.com/users/ajtowns/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ajtowns/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ajtowns",
         "id" : 127186,
         "login" : "ajtowns",
         "node_id" : "MDQ6VXNlcjEyNzE4Ng==",
         "organizations_url" : "https://api.github.com/users/ajtowns/orgs",
         "received_events_url" : "https://api.github.com/users/ajtowns/received_events",
         "repos_url" : "https://api.github.com/users/ajtowns/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ajtowns/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ajtowns/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ajtowns"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "With the latest push, this PR is now much smaller, and now mostly consists of documentation and test changes.\r\n\r\nI wanted to split this up in order to be able to base #30342 on a smaller changeset. The wallet changes that were previously part of this PR were moved to #30343.\r\n\r\nRebased ce0004e42d37786f98cdf9d55b976b935dcf1ba1 -> 5f64eab013a58967af37a59c863c2ab6d45ba6e8 ([`pr/bclog.16`](https://github.com/ryanofsky/bitcoin/commits/pr/bclog.16) -> [`pr/bclog.17`](https://github.com/ryanofsky/bitcoin/commits/pr/bclog.17), [compare](https://github.com/ryanofsky/bitcoin/compare/pr/bclog.16-rebase..pr/bclog.17)) updating the PR as described.\r\n",
      "created_at" : "2024-06-26T18:19:38Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29256#issuecomment-2192368771",
      "id" : 2192368771,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/29256",
      "node_id" : "IC_kwDOABII586CrOSD",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2192368771/reactions"
      },
      "updated_at" : "2024-06-26T18:19:38Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2192368771",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> Rereading AJ's comments, I'm not sure this paragraph actually represents what he thinks, so striking it out.\r\n\r\nThanks for that, it was bumming me out thinking about how to try and clarify it.\r\n\r\nI really prefer your approach in #30348 and #30347 where you identify a specific objective problem and separately propose a targeted fix for exactly that problem.\r\n\r\n> logging options (before and after this PR) actually do not support filtering out Info/Warning/Error messages at all, by category or otherwise\r\n\r\nNote that filtering out Info messages was previously a feature the logging system (and in particular, Info messages with a category would be filtered out by *default*). That feature was removed in https://github.com/bitcoin/bitcoin/pull/28318/commits/ab34dc6012351e7b8aab871dd9d2b38ade1cd9bc .\r\n\r\nI'll have another go at explaining my point of view:\r\n\r\n> But doing this would not be my starting point because I think generally category information is useful, \r\n\r\nI don't think category information is useful *except* for enabling log message filtering. It's not useful otherwise, because `-logsourcelocations` is strictly superior in multiple ways (it's automatic, it doesn't need to be updated if we refactor things, and it gives more detailed information). For messages we don't want users to filter, we shouldn't provide a category, as that would provide no benefit at all.",
      "created_at" : "2024-06-27T14:47:13Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29256#issuecomment-2194926577",
      "id" : 2194926577,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/29256",
      "node_id" : "IC_kwDOABII586C0-vx",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2194926577/reactions"
      },
      "updated_at" : "2024-06-27T14:47:13Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2194926577",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/127186?v=4",
         "events_url" : "https://api.github.com/users/ajtowns/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ajtowns/followers",
         "following_url" : "https://api.github.com/users/ajtowns/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ajtowns/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ajtowns",
         "id" : 127186,
         "login" : "ajtowns",
         "node_id" : "MDQ6VXNlcjEyNzE4Ng==",
         "organizations_url" : "https://api.github.com/users/ajtowns/orgs",
         "received_events_url" : "https://api.github.com/users/ajtowns/received_events",
         "repos_url" : "https://api.github.com/users/ajtowns/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ajtowns/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ajtowns/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ajtowns"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "> On disallowing category arguments in `LogInfo`, that is an interesting line of reasoning that would not have occurred to me. Your suggestion to only accept source arguments not category arguments for `LogInfo` would probably be ok and is something I can implement.\r\n\r\n> I do think there are plausible reasons to want to disallow attaching categories to certain log statements. If the only way I can make progress on this PR is to refuse to allow categories to be specified, I can make changes implementing that.\r\n\r\nCool! Hoping that's something @ajtowns could agree to allowing something like an optional `source` being passed to `LogInfo` etc to make the wallet code and other exceptions nicer without suddenly also accepting category everywhere.\r\n\r\nThe fact that there's something behind the immediate macro level preventing `LogInfo`/`LogError`/`LogWarning` from being filtered is a weaker argument to use in pushing against added logging outside of `LogDebug`/`LogTrace` statements, than them not even accepting a category to potentially filter on. Gotta respect an opinionated API. :)",
      "created_at" : "2024-06-27T20:40:53Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29256#issuecomment-2195631997",
      "id" : 2195631997,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/29256",
      "node_id" : "IC_kwDOABII586C3q99",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2195631997/reactions"
      },
      "updated_at" : "2024-06-27T20:40:53Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2195631997",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/172445034?v=4",
         "events_url" : "https://api.github.com/users/hodlinator/events{/privacy}",
         "followers_url" : "https://api.github.com/users/hodlinator/followers",
         "following_url" : "https://api.github.com/users/hodlinator/following{/other_user}",
         "gists_url" : "https://api.github.com/users/hodlinator/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/hodlinator",
         "id" : 172445034,
         "login" : "hodlinator",
         "node_id" : "U_kgDOCkdNag",
         "organizations_url" : "https://api.github.com/users/hodlinator/orgs",
         "received_events_url" : "https://api.github.com/users/hodlinator/received_events",
         "repos_url" : "https://api.github.com/users/hodlinator/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/hodlinator/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/hodlinator/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/hodlinator"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : ">    All consistent, now accepting the same parameters\r\n>    All compatible with log categories, to make it possible to filter or highlight log messages from a particular component\r\n>    All compatible with wallet logging, which includes the wallet name in log messages\r\n>    Require less verbosity, by not needing category constants to be repeated in log prints from a common source.\r\n>    Not tied to one hardcoded global Logger instance\r\n\r\n\r\nI think I'd be Concept ACK on these, though I've somewhat tuned out since the unfortunate deviation the severity-based logging has taken since https://github.com/bitcoin/bitcoin/pull/28318 for the reasons I've stated there and in other PRs.\r\n\r\nWe've just over-wrought everything when it could be simple and open. A number of other developers think the same but don't speak up much because it seems pointless to do so.\r\n\r\nAside, and unsure it is an issue of discussion: Unless proven otherwise in practice later on, I do not think we need to be overly paranoid and helicopter parenting yet with respect to node operators footgunning themselves en masse with custom log level settings. Only developers and more technically aware users are likely to use them.",
      "created_at" : "2024-06-28T16:58:00Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29256#issuecomment-2197318437",
      "id" : 2197318437,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/29256",
      "node_id" : "IC_kwDOABII586C-Gsl",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2197318437/reactions"
      },
      "updated_at" : "2024-06-28T17:02:44Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2197318437",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "re: https://github.com/bitcoin/bitcoin/pull/29256#issuecomment-2197318437\r\n\r\n> We've just over-complicated everything when it could be simple and open. I know a number of other developers think the same but don't speak up much because it seems pointless to do so.\r\n\r\nCurious, when you say \"over-complicated\", are you referring to the implementation of the logging code, or to the usage of the logging API? Or to effects of logging settings?\r\n\r\nI don't think the logging API is too complicated. I think #28318 made it more self documenting and simpler.\r\n\r\nOn the other hand, I would say that the macro definitions used to implement the logging API are pretty complicated. This PR does try to improve them by making the implementation sequential and documenting every part of it. But I think it is ok for the implementation to be complicated if the interface is simple, and if there are legitimate reasons to make it complicated, like not evaluating arguments when debug logging is turned off.\r\n\r\nI'm not sure about interpretation of logging settings, but I haven't been involved in those PRs.\r\n",
      "created_at" : "2024-06-28T17:22:08Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29256#issuecomment-2197361518",
      "id" : 2197361518,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/29256",
      "node_id" : "IC_kwDOABII586C-RNu",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2197361518/reactions"
      },
      "updated_at" : "2024-06-28T17:22:22Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2197361518",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> AJ, thanks for the response. I want to let your comment stand, and not reply in detail right away to wait for input on this PR from other potential reviewers.\r\n\r\nThat comment had already stood for eight weeks, and included an example patchset of changes that could improve things with regards to your complaints about wallet logging, while discussion continued on this. Instead we've had no progress and no discussion, which seems to me to be pretty counter productive. I've opened up what I assume is the least controversial of those as #30355 if you have any interest.",
      "created_at" : "2024-06-28T18:49:08Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29256#issuecomment-2197457587",
      "id" : 2197457587,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/29256",
      "node_id" : "IC_kwDOABII586C-oqz",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2197457587/reactions"
      },
      "updated_at" : "2024-06-28T18:49:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2197457587",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/127186?v=4",
         "events_url" : "https://api.github.com/users/ajtowns/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ajtowns/followers",
         "following_url" : "https://api.github.com/users/ajtowns/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ajtowns/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ajtowns",
         "id" : 127186,
         "login" : "ajtowns",
         "node_id" : "MDQ6VXNlcjEyNzE4Ng==",
         "organizations_url" : "https://api.github.com/users/ajtowns/orgs",
         "received_events_url" : "https://api.github.com/users/ajtowns/received_events",
         "repos_url" : "https://api.github.com/users/ajtowns/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ajtowns/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ajtowns/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ajtowns"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> Curious, when you say \"over-complicated\", are you referring to the implementation of the logging code, or to the usage of the logging API? Or to effects of logging settings?\r\n\r\nAll of these, I think.  The idea was:\r\n\r\n- one `Log(level, cat, msg)` macro with a consistent API replace the current macros\r\n- the -debug and -loglevel config options and logging RPC soft-aligned into a single user-facing logging API\r\n- the printed logs to be the same format for each `Log` call, apart from custom options\r\n- developer documentation in the `Log` macro and the level/category enums, where grepping would lead you directly\r\n\r\nInstead (from memory, I'm maybe not up to date), we now have:\r\n\r\n- a larger slew of macros\r\n- an inconsistent API and printed log that vary depending on which of the new level macros is called\r\n- various restrictions on calls and usage\r\n- documentation in various places\r\n- all these ducks to keep in a row\r\n\r\nNone of that seems necessary (unless there is a technical obstacle?)\r\n\r\nI suggest doing the simplest consistent implementation and API we can come up. Easier for both users and developers. Those seem more valuable than e.g. saving characters that developers might copy/paste when adding new logging.",
      "created_at" : "2024-06-28T18:52:33Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29256#issuecomment-2197461775",
      "id" : 2197461775,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/29256",
      "node_id" : "IC_kwDOABII586C-psP",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2197461775/reactions"
      },
      "updated_at" : "2024-06-28T19:06:17Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2197461775",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "re: https://github.com/bitcoin/bitcoin/pull/29256#issuecomment-2197461775\r\n\r\nThanks I appreciate the clarification, and I agree with most of those points, except I genuinely do think having one convenience macro for each log level is nice. And LogPrintLevel exists so it is even possible to ignore the convenience macros if you want to do that. \r\n\r\nJust as an observation, I get the sense that I am not the only one who likes the convenience macros, and that when other people read your comments complaining about the existence of these macros, it might make them discount the value of other things you are saying. So I don't know if it would help, but it might be better if you could come to a grudging acceptance of the macros, and think about not bringing them up if they aren't essential to points you are making. It might help other points be better received and understood.",
      "created_at" : "2024-06-28T19:54:43Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29256#issuecomment-2197540896",
      "id" : 2197540896,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/29256",
      "node_id" : "IC_kwDOABII586C-9Ag",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2197540896/reactions"
      },
      "updated_at" : "2024-06-28T19:54:43Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2197540896",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   }
]
