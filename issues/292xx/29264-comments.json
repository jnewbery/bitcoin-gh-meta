[
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage\nFor detailed information about the code coverage, see the [test coverage report](https://corecheck.dev/bitcoin/bitcoin/pulls/29264).\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\nA summary of reviews will appear here.\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#28560](https://github.com/bitcoin/bitcoin/pull/28560) (wallet, rpc: `FundTransaction` refactor by josibake)\n* [#28201](https://github.com/bitcoin/bitcoin/pull/28201) (Silent Payments: sending by josibake)\n* [#10102](https://github.com/bitcoin/bitcoin/pull/10102) (Multiprocess bitcoin by ryanofsky)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.\n",
      "created_at" : "2024-01-17T20:24:13Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29264#issuecomment-1896633814",
      "id" : 1896633814,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/29264",
      "node_id" : "IC_kwDOABII585xDFXW",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1896633814/reactions"
      },
      "updated_at" : "2024-01-17T22:40:40Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1896633814",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--85328a0da195eb286784d51f73fa0af9-->\n\nð§ At least one of the CI tasks failed. Make sure to run all tests locally, according to the\ndocumentation.\n\nPossibly this is due to a silent merge conflict (the changes in this pull request being\nincompatible with the current code in the target branch). If so, make sure to rebase on the latest\ncommit of the target branch.\n\nLeave a comment here, if you need help tracking down a confusing failure.\n\n<sub>Debug: https://github.com/bitcoin/bitcoin/runs/20589487266</sub>",
      "created_at" : "2024-01-17T21:44:29Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29264#issuecomment-1896912004",
      "id" : 1896912004,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/29264",
      "node_id" : "IC_kwDOABII585xEJSE",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1896912004/reactions"
      },
      "updated_at" : "2024-01-17T21:44:29Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1896912004",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29264#discussion_r1457194322"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29264"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1457194322"
         }
      },
      "author_association" : "MEMBER",
      "body" : "nit: replace magic number with `MAX_STANDARD_TX_WEIGHT`",
      "commit_id" : "8ac0dcdeadd84aefe11e5ce62f591e9a8d404e55",
      "created_at" : "2024-01-18T09:52:56Z",
      "diff_hunk" : "@@ -1472,6 +1490,18 @@ RPCHelpMan sendall()\n             const CAmount fee_from_size{fee_rate.GetFee(tx_size.vsize)};\n             const CAmount effective_value{total_input_value - fee_from_size};\n \n+            // Cap tx weight based on estimated size if requested\n+            if (options.exists(\"max_tx_weight\")) {\n+                const auto max_tx_weight =  options[\"max_tx_weight\"].getInt<int>();\n+                if (max_tx_weight < 0 || max_tx_weight > MAX_STANDARD_TX_WEIGHT) {\n+                    throw JSONRPCError(RPC_WALLET_ERROR, strprintf(\"Invalid parameter, max tx weight must be between 0 and 400000\"));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29264#discussion_r1457194322",
      "id" : 1457194322,
      "line" : 1497,
      "node_id" : "PRRC_kwDOABII585W2wVS",
      "original_commit_id" : "8ac0dcdeadd84aefe11e5ce62f591e9a8d404e55",
      "original_line" : 1497,
      "original_position" : 68,
      "original_start_line" : null,
      "path" : "src/wallet/rpc/spend.cpp",
      "position" : 68,
      "pull_request_review_id" : 1829286044,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29264",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1457194322/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-01-18T10:00:16Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1457194322",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/25183001?v=4",
         "events_url" : "https://api.github.com/users/glozow/events{/privacy}",
         "followers_url" : "https://api.github.com/users/glozow/followers",
         "following_url" : "https://api.github.com/users/glozow/following{/other_user}",
         "gists_url" : "https://api.github.com/users/glozow/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/glozow",
         "id" : 25183001,
         "login" : "glozow",
         "node_id" : "MDQ6VXNlcjI1MTgzMDAx",
         "organizations_url" : "https://api.github.com/users/glozow/orgs",
         "received_events_url" : "https://api.github.com/users/glozow/received_events",
         "repos_url" : "https://api.github.com/users/glozow/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/glozow/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/glozow/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/glozow"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29264#discussion_r1457200003"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29264"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1457200003"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Would this be giving up too early? We could still find a different solution further down the function, no?",
      "commit_id" : "8ac0dcdeadd84aefe11e5ce62f591e9a8d404e55",
      "created_at" : "2024-01-18T09:57:18Z",
      "diff_hunk" : "@@ -335,12 +337,18 @@ util::Result<SelectionResult> KnapsackSolver(std::vector<OutputGroup>& groups, c\n         for (const auto& group : applicable_groups) {\n             result.AddInput(group);\n         }\n+        // We may still fail if max is low\n+        if (result.GetWeight() > max_weight) return ErrorMaxWeightExceeded();",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29264#discussion_r1457200003",
      "id" : 1457200003,
      "line" : 341,
      "node_id" : "PRRC_kwDOABII585W2xuD",
      "original_commit_id" : "8ac0dcdeadd84aefe11e5ce62f591e9a8d404e55",
      "original_line" : 341,
      "original_position" : 14,
      "original_start_line" : null,
      "path" : "src/wallet/coinselection.cpp",
      "position" : 14,
      "pull_request_review_id" : 1829286044,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29264",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1457200003/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-01-18T10:00:16Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1457200003",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/25183001?v=4",
         "events_url" : "https://api.github.com/users/glozow/events{/privacy}",
         "followers_url" : "https://api.github.com/users/glozow/followers",
         "following_url" : "https://api.github.com/users/glozow/following{/other_user}",
         "gists_url" : "https://api.github.com/users/glozow/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/glozow",
         "id" : 25183001,
         "login" : "glozow",
         "node_id" : "MDQ6VXNlcjI1MTgzMDAx",
         "organizations_url" : "https://api.github.com/users/glozow/orgs",
         "received_events_url" : "https://api.github.com/users/glozow/received_events",
         "repos_url" : "https://api.github.com/users/glozow/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/glozow/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/glozow/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/glozow"
      }
   }
]
