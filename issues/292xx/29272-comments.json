[
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage\nFor detailed information about the code coverage, see the [test coverage report](https://corecheck.dev/bitcoin/bitcoin/pulls/29272).\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\nA summary of reviews will appear here.\n",
      "created_at" : "2024-01-18T07:56:40Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29272#issuecomment-1897972545",
      "id" : 1897972545,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/29272",
      "node_id" : "IC_kwDOABII585xIMNB",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1897972545/reactions"
      },
      "updated_at" : "2024-01-18T07:56:41Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1897972545",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "You might want to take a look at this @murchandamus. I discovered the problem while trying to repo your coingrinder results with the coin-selection-simulation scripts.",
      "created_at" : "2024-01-18T07:59:43Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29272#issuecomment-1897978185",
      "id" : 1897978185,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/29272",
      "node_id" : "IC_kwDOABII585xINlJ",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1897978185/reactions"
      },
      "updated_at" : "2024-01-18T07:59:43Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1897978185",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8568892?v=4",
         "events_url" : "https://api.github.com/users/remyers/events{/privacy}",
         "followers_url" : "https://api.github.com/users/remyers/followers",
         "following_url" : "https://api.github.com/users/remyers/following{/other_user}",
         "gists_url" : "https://api.github.com/users/remyers/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/remyers",
         "id" : 8568892,
         "login" : "remyers",
         "node_id" : "MDQ6VXNlcjg1Njg4OTI=",
         "organizations_url" : "https://api.github.com/users/remyers/orgs",
         "received_events_url" : "https://api.github.com/users/remyers/received_events",
         "repos_url" : "https://api.github.com/users/remyers/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/remyers/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/remyers/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/remyers"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29272#discussion_r1457097947"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29272"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1457097947"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "nit: I think this tracepoint would be easier to reason about if it was one line per argument. Not sure if this PR is the right place to reformat it.",
      "commit_id" : "cc1bd8fcff1f82031ff889b9d169feb2aecbb7a3",
      "created_at" : "2024-01-18T08:37:27Z",
      "diff_hunk" : "@@ -1355,7 +1355,7 @@ util::Result<CreatedTransactionResult> CreateTransaction(\n         // if fee of this alternative one is within the range of the max fee, we use this one\n         const bool use_aps{txr_grouped.has_value() ? (txr_grouped->fee <= txr_ungrouped.fee + wallet.m_max_aps_fee) : false};\n         TRACE5(coin_selection, aps_create_tx_internal, wallet.GetName().c_str(), use_aps, txr_grouped.has_value(),\n-               txr_grouped.has_value() ? txr_grouped->fee : 0, txr_grouped.has_value() && txr_grouped->change_pos.has_value() ? *txr_grouped->change_pos : 0);\n+               txr_grouped.has_value() ? txr_grouped->fee : 0, txr_grouped.has_value() && txr_grouped->change_pos.has_value() ? *txr_grouped->change_pos : -1);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29272#discussion_r1457097947",
      "id" : 1457097947,
      "line" : 1358,
      "node_id" : "PRRC_kwDOABII585W2Yzb",
      "original_commit_id" : "cc1bd8fcff1f82031ff889b9d169feb2aecbb7a3",
      "original_line" : 1358,
      "original_position" : 14,
      "original_start_line" : null,
      "path" : "src/wallet/spend.cpp",
      "position" : 14,
      "pull_request_review_id" : 1829131949,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29272",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1457097947/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-01-18T08:39:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1457097947",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/19157360?v=4",
         "events_url" : "https://api.github.com/users/0xB10C/events{/privacy}",
         "followers_url" : "https://api.github.com/users/0xB10C/followers",
         "following_url" : "https://api.github.com/users/0xB10C/following{/other_user}",
         "gists_url" : "https://api.github.com/users/0xB10C/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/0xB10C",
         "id" : 19157360,
         "login" : "0xB10C",
         "node_id" : "MDQ6VXNlcjE5MTU3MzYw",
         "organizations_url" : "https://api.github.com/users/0xB10C/orgs",
         "received_events_url" : "https://api.github.com/users/0xB10C/received_events",
         "repos_url" : "https://api.github.com/users/0xB10C/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/0xB10C/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/0xB10C/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/0xB10C"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--85328a0da195eb286784d51f73fa0af9-->\n\nð§ At least one of the CI tasks failed. Make sure to run all tests locally, according to the\ndocumentation.\n\nPossibly this is due to a silent merge conflict (the changes in this pull request being\nincompatible with the current code in the target branch). If so, make sure to rebase on the latest\ncommit of the target branch.\n\nLeave a comment here, if you need help tracking down a confusing failure.\n\n<sub>Debug: https://github.com/bitcoin/bitcoin/runs/20605138868</sub>",
      "created_at" : "2024-01-18T08:42:46Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29272#issuecomment-1898033547",
      "id" : 1898033547,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/29272",
      "node_id" : "IC_kwDOABII585xIbGL",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1898033547/reactions"
      },
      "updated_at" : "2024-01-18T08:42:46Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1898033547",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29272#discussion_r1457111240"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29272"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1457111240"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "CI is unhappy here:\r\n```\r\n(mocktwallet/spend.cpp:1339:5: runtime error: implicit conversion from type 'int' of value -1 (32-bit, signed) to type 'unsigned int' changed the value to 4294967295 (32-bit, unsigned)\r\n    #0 0x5589c92846e6 in wallet::CreateTransaction(wallet::CWallet&, std::vector<wallet::CRecipient, std::allocator<wallet::CRecipient>> const&, std::optional<unsigned int>, wallet::CCoinControl const&, bool) src/wallet/spend.cpp:1339:5\r\n    #1 0x5589c8d8617d in wallet::spend_tests::wallet_duplicated_preset_inputs_test::test_method() src/wallet/test/spend_tests.cpp:100:53\r\n   ...\r\n\r\nSUMMARY: UndefinedBehaviorSanitizer: implicit-integer-sign-change wallet/spend.cpp:1339:5 in \r\n```",
      "commit_id" : "cc1bd8fcff1f82031ff889b9d169feb2aecbb7a3",
      "created_at" : "2024-01-18T08:48:41Z",
      "diff_hunk" : "@@ -1337,7 +1337,7 @@ util::Result<CreatedTransactionResult> CreateTransaction(\n \n     auto res = CreateTransactionInternal(wallet, vecSend, change_pos, coin_control, sign);\n     TRACE4(coin_selection, normal_create_tx_internal, wallet.GetName().c_str(), bool(res),\n-           res ? res->fee : 0, res && res->change_pos.has_value() ? *res->change_pos : 0);\n+           res ? res->fee : 0, res && res->change_pos.has_value() ? *res->change_pos : -1);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29272#discussion_r1457111240",
      "id" : 1457111240,
      "line" : 1340,
      "node_id" : "PRRC_kwDOABII585W2cDI",
      "original_commit_id" : "cc1bd8fcff1f82031ff889b9d169feb2aecbb7a3",
      "original_line" : 1340,
      "original_position" : 5,
      "original_start_line" : 1339,
      "path" : "src/wallet/spend.cpp",
      "position" : 5,
      "pull_request_review_id" : 1829152382,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29272",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1457111240/reactions"
      },
      "side" : "RIGHT",
      "start_line" : 1339,
      "start_side" : "RIGHT",
      "subject_type" : "line",
      "updated_at" : "2024-01-18T08:49:06Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1457111240",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/19157360?v=4",
         "events_url" : "https://api.github.com/users/0xB10C/events{/privacy}",
         "followers_url" : "https://api.github.com/users/0xB10C/followers",
         "following_url" : "https://api.github.com/users/0xB10C/following{/other_user}",
         "gists_url" : "https://api.github.com/users/0xB10C/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/0xB10C",
         "id" : 19157360,
         "login" : "0xB10C",
         "node_id" : "MDQ6VXNlcjE5MTU3MzYw",
         "organizations_url" : "https://api.github.com/users/0xB10C/orgs",
         "received_events_url" : "https://api.github.com/users/0xB10C/received_events",
         "repos_url" : "https://api.github.com/users/0xB10C/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/0xB10C/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/0xB10C/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/0xB10C"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29272#discussion_r1457258511"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29272"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1457258511"
         }
      },
      "author_association" : "NONE",
      "body" : "I think wrapping the trace parameter in `static_cast<int32_t>()` is the correct way to resolve this because `change_pos` is otherwise a `std::optional<unsigned int>`.  In tracing.md `change_pos` is defined as int32 so it should always be returned as a signed 32-bit int.",
      "commit_id" : "cc1bd8fcff1f82031ff889b9d169feb2aecbb7a3",
      "created_at" : "2024-01-18T10:43:29Z",
      "diff_hunk" : "@@ -1337,7 +1337,7 @@ util::Result<CreatedTransactionResult> CreateTransaction(\n \n     auto res = CreateTransactionInternal(wallet, vecSend, change_pos, coin_control, sign);\n     TRACE4(coin_selection, normal_create_tx_internal, wallet.GetName().c_str(), bool(res),\n-           res ? res->fee : 0, res && res->change_pos.has_value() ? *res->change_pos : 0);\n+           res ? res->fee : 0, res && res->change_pos.has_value() ? *res->change_pos : -1);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29272#discussion_r1457258511",
      "id" : 1457258511,
      "in_reply_to_id" : 1457111240,
      "line" : 1340,
      "node_id" : "PRRC_kwDOABII585W3AAP",
      "original_commit_id" : "cc1bd8fcff1f82031ff889b9d169feb2aecbb7a3",
      "original_line" : 1340,
      "original_position" : 5,
      "original_start_line" : 1339,
      "path" : "src/wallet/spend.cpp",
      "position" : 5,
      "pull_request_review_id" : 1829385774,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29272",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1457258511/reactions"
      },
      "side" : "RIGHT",
      "start_line" : 1339,
      "start_side" : "RIGHT",
      "subject_type" : "line",
      "updated_at" : "2024-01-18T10:43:30Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1457258511",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8568892?v=4",
         "events_url" : "https://api.github.com/users/remyers/events{/privacy}",
         "followers_url" : "https://api.github.com/users/remyers/followers",
         "following_url" : "https://api.github.com/users/remyers/following{/other_user}",
         "gists_url" : "https://api.github.com/users/remyers/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/remyers",
         "id" : 8568892,
         "login" : "remyers",
         "node_id" : "MDQ6VXNlcjg1Njg4OTI=",
         "organizations_url" : "https://api.github.com/users/remyers/orgs",
         "received_events_url" : "https://api.github.com/users/remyers/received_events",
         "repos_url" : "https://api.github.com/users/remyers/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/remyers/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/remyers/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/remyers"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29272#discussion_r1457305630"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29272"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1457305630"
         }
      },
      "author_association" : "NONE",
      "body" : ".. or maybe `static_cast` is overkill, a cast with `int32_t()` seems to be what's recommended in developer-nodes.md .",
      "commit_id" : "cc1bd8fcff1f82031ff889b9d169feb2aecbb7a3",
      "created_at" : "2024-01-18T11:24:27Z",
      "diff_hunk" : "@@ -1337,7 +1337,7 @@ util::Result<CreatedTransactionResult> CreateTransaction(\n \n     auto res = CreateTransactionInternal(wallet, vecSend, change_pos, coin_control, sign);\n     TRACE4(coin_selection, normal_create_tx_internal, wallet.GetName().c_str(), bool(res),\n-           res ? res->fee : 0, res && res->change_pos.has_value() ? *res->change_pos : 0);\n+           res ? res->fee : 0, res && res->change_pos.has_value() ? *res->change_pos : -1);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29272#discussion_r1457305630",
      "id" : 1457305630,
      "in_reply_to_id" : 1457111240,
      "line" : 1340,
      "node_id" : "PRRC_kwDOABII585W3Lge",
      "original_commit_id" : "cc1bd8fcff1f82031ff889b9d169feb2aecbb7a3",
      "original_line" : 1340,
      "original_position" : 5,
      "original_start_line" : 1339,
      "path" : "src/wallet/spend.cpp",
      "position" : 5,
      "pull_request_review_id" : 1829460253,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29272",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1457305630/reactions"
      },
      "side" : "RIGHT",
      "start_line" : 1339,
      "start_side" : "RIGHT",
      "subject_type" : "line",
      "updated_at" : "2024-01-18T11:24:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1457305630",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8568892?v=4",
         "events_url" : "https://api.github.com/users/remyers/events{/privacy}",
         "followers_url" : "https://api.github.com/users/remyers/followers",
         "following_url" : "https://api.github.com/users/remyers/following{/other_user}",
         "gists_url" : "https://api.github.com/users/remyers/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/remyers",
         "id" : 8568892,
         "login" : "remyers",
         "node_id" : "MDQ6VXNlcjg1Njg4OTI=",
         "organizations_url" : "https://api.github.com/users/remyers/orgs",
         "received_events_url" : "https://api.github.com/users/remyers/received_events",
         "repos_url" : "https://api.github.com/users/remyers/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/remyers/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/remyers/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/remyers"
      }
   }
]
