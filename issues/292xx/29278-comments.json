[
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage\nFor detailed information about the code coverage, see the [test coverage report](https://corecheck.dev/bitcoin/bitcoin/pulls/29278).\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\nA summary of reviews will appear here.\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nNo conflicts as of last run.\n",
      "created_at" : "2024-01-18T22:23:52Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29278#issuecomment-1899315871",
      "id" : 1899315871,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/29278",
      "node_id" : "IC_kwDOABII585xNUKf",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1899315871/reactions"
      },
      "updated_at" : "2024-01-26T04:43:59Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1899315871",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29278#discussion_r1459122123"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29278"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1459122123"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I think you accidentally put the `maxburnamount` helptext in the `incrementalrelayfee` helptext here?",
      "commit_id" : "0c9e0c5b2218c154b62275794b878af7e1457647",
      "created_at" : "2024-01-19T14:39:21Z",
      "diff_hunk" : "@@ -624,7 +625,10 @@ void SetupServerArgs(ArgsManager& argsman)\n     SetupChainParamsBaseOptions(argsman);\n \n     argsman.AddArg(\"-acceptnonstdtxn\", strprintf(\"Relay and mine \\\"non-standard\\\" transactions (test networks only; default: %u)\", DEFAULT_ACCEPT_NON_STD_TXN), ArgsManager::ALLOW_ANY | ArgsManager::DEBUG_ONLY, OptionsCategory::NODE_RELAY);\n-    argsman.AddArg(\"-incrementalrelayfee=<amt>\", strprintf(\"Fee rate (in %s/kvB) used to define cost of relay, used for mempool limiting and replacement policy. (default: %s)\", CURRENCY_UNIT, FormatMoney(DEFAULT_INCREMENTAL_RELAY_FEE)), ArgsManager::ALLOW_ANY | ArgsManager::DEBUG_ONLY, OptionsCategory::NODE_RELAY);\n+    argsman.AddArg(\"-maxfeerate=<amt>\", strprintf(\"Reject transactions whose fee rate is higher than the specified value, expressed in %s/kvB. Set to 0 to accept any fee rate. (default: %s %s/kvB)\", CURRENCY_UNIT, FormatMoney(node::DEFAULT_MAX_RAW_TX_FEE_RATE.GetFeePerK()), CURRENCY_UNIT), ArgsManager::ALLOW_ANY, OptionsCategory::DEBUG_TEST);\n+    argsman.AddArg(\"-maxburnamount=<amt>\", strprintf(\"Reject transactions with provably unspendable outputs (e.g. 'datacarrier' outputs that use the OP_RETURN opcode) greater than the specified value, expressed in %s, if burning funds through unspendable outputs is desired, increase this value. This check is based on heuristics and does not guarantee spendability of outputs (default: 0%s).\", CURRENCY_UNIT, CURRENCY_UNIT), ArgsManager::ALLOW_ANY, OptionsCategory::DEBUG_TEST);\n+    argsman.AddArg(\"-incrementalrelayfee=<amt>\", strprintf(\"Fee rate (in %s/kvB) used to define cost of relay, used for mempool limiting and replacement policy. (default: %s) If burning funds through unspendable outputs is desired, increase this value. This check is based on heuristics and does not guarantee spendability of outputs.\",",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29278#discussion_r1459122123",
      "id" : 1459122123,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585W-G_L",
      "original_commit_id" : "2576efcf689401dcbea85856c74efc64af0c2cb2",
      "original_line" : 630,
      "original_position" : 15,
      "original_start_line" : null,
      "path" : "src/init.cpp",
      "position" : null,
      "pull_request_review_id" : 1832875650,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29278",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1459122123/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-01-19T15:05:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1459122123",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/25183001?v=4",
         "events_url" : "https://api.github.com/users/glozow/events{/privacy}",
         "followers_url" : "https://api.github.com/users/glozow/followers",
         "following_url" : "https://api.github.com/users/glozow/following{/other_user}",
         "gists_url" : "https://api.github.com/users/glozow/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/glozow",
         "id" : 25183001,
         "login" : "glozow",
         "node_id" : "MDQ6VXNlcjI1MTgzMDAx",
         "organizations_url" : "https://api.github.com/users/glozow/orgs",
         "received_events_url" : "https://api.github.com/users/glozow/received_events",
         "repos_url" : "https://api.github.com/users/glozow/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/glozow/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/glozow/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/glozow"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29278#discussion_r1459131869"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29278"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1459131869"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Why delete these options (suddenly removing support for something that users might rely on)? Even if a config exists, I can imagine somebody wanting to change the maximum for a single RPC call without needing to restart their node.",
      "commit_id" : "0c9e0c5b2218c154b62275794b878af7e1457647",
      "created_at" : "2024-01-19T14:44:29Z",
      "diff_hunk" : "@@ -43,13 +44,6 @@ static RPCHelpMan sendrawtransaction()\n         \"\\nRelated RPCs: createrawtransaction, signrawtransactionwithkey\\n\",\n         {\n             {\"hexstring\", RPCArg::Type::STR_HEX, RPCArg::Optional::NO, \"The hex string of the raw transaction\"},\n-            {\"maxfeerate\", RPCArg::Type::AMOUNT, RPCArg::Default{FormatMoney(DEFAULT_MAX_RAW_TX_FEE_RATE.GetFeePerK())},\n-             \"Reject transactions whose fee rate is higher than the specified value, expressed in \" + CURRENCY_UNIT +\n-                 \"/kvB.\\nSet to 0 to accept any fee rate.\"},\n-            {\"maxburnamount\", RPCArg::Type::AMOUNT, RPCArg::Default{FormatMoney(0)},\n-             \"Reject transactions with provably unspendable outputs (e.g. 'datacarrier' outputs that use the OP_RETURN opcode) greater than the specified value, expressed in \" + CURRENCY_UNIT + \".\\n\"\n-             \"If burning funds through unspendable outputs is desired, increase this value.\\n\"\n-             \"This check is based on heuristics and does not guarantee spendability of outputs.\\n\"},",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29278#discussion_r1459131869",
      "id" : 1459131869,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585W-JXd",
      "original_commit_id" : "2576efcf689401dcbea85856c74efc64af0c2cb2",
      "original_line" : 52,
      "original_position" : 18,
      "original_start_line" : 46,
      "path" : "src/rpc/mempool.cpp",
      "position" : null,
      "pull_request_review_id" : 1832875650,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29278",
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1459131869/reactions"
      },
      "side" : "LEFT",
      "start_line" : null,
      "start_side" : "LEFT",
      "subject_type" : "line",
      "updated_at" : "2024-01-19T15:05:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1459131869",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/25183001?v=4",
         "events_url" : "https://api.github.com/users/glozow/events{/privacy}",
         "followers_url" : "https://api.github.com/users/glozow/followers",
         "following_url" : "https://api.github.com/users/glozow/following{/other_user}",
         "gists_url" : "https://api.github.com/users/glozow/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/glozow",
         "id" : 25183001,
         "login" : "glozow",
         "node_id" : "MDQ6VXNlcjI1MTgzMDAx",
         "organizations_url" : "https://api.github.com/users/glozow/orgs",
         "received_events_url" : "https://api.github.com/users/glozow/received_events",
         "repos_url" : "https://api.github.com/users/glozow/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/glozow/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/glozow/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/glozow"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29278#discussion_r1459145558"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29278"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1459145558"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Why not just make this a `CFeeRate`? Or describe this as satoshis per KvB. \"fee rate (in satoshis)\" doesn't really make sense to me.",
      "commit_id" : "0c9e0c5b2218c154b62275794b878af7e1457647",
      "created_at" : "2024-01-19T14:51:40Z",
      "diff_hunk" : "@@ -729,6 +729,8 @@ class CWallet final : public WalletStorage, public interfaces::Chain::Notificati\n     /** Absolute maximum transaction fee (in satoshis) used by default for the wallet */\n     CAmount m_default_max_tx_fee{DEFAULT_TRANSACTION_MAXFEE};\n \n+    /** Maximum transaction fee rate (in satoshis) used by default for the wallet */\n+    CAmount m_default_max_tx_fee_rate{node::DEFAULT_MAX_RAW_TX_FEE_RATE.GetFeePerK()};",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29278#discussion_r1459145558",
      "id" : 1459145558,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585W-MtW",
      "original_commit_id" : "2576efcf689401dcbea85856c74efc64af0c2cb2",
      "original_line" : 733,
      "original_position" : 5,
      "original_start_line" : 732,
      "path" : "src/wallet/wallet.h",
      "position" : null,
      "pull_request_review_id" : 1832875650,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29278",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1459145558/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : "RIGHT",
      "subject_type" : "line",
      "updated_at" : "2024-01-19T15:05:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1459145558",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/25183001?v=4",
         "events_url" : "https://api.github.com/users/glozow/events{/privacy}",
         "followers_url" : "https://api.github.com/users/glozow/followers",
         "following_url" : "https://api.github.com/users/glozow/following{/other_user}",
         "gists_url" : "https://api.github.com/users/glozow/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/glozow",
         "id" : 25183001,
         "login" : "glozow",
         "node_id" : "MDQ6VXNlcjI1MTgzMDAx",
         "organizations_url" : "https://api.github.com/users/glozow/orgs",
         "received_events_url" : "https://api.github.com/users/glozow/received_events",
         "repos_url" : "https://api.github.com/users/glozow/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/glozow/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/glozow/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/glozow"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29278#discussion_r1459156381"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29278"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1459156381"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I also don't see this value being used anywhere other than `settxfee`?\r\n\r\n> This approach maintains distinct role for maxfeerate as a wallet and mempool acceptance/relay sanity check \r\n\r\nShouldn't there be a check in `CreateTransactionInternal` that makes sure we don't make transactions above this feerate, and an arg passed to `BroadcastTransaction`? I also don't see a test case for it.",
      "commit_id" : "0c9e0c5b2218c154b62275794b878af7e1457647",
      "created_at" : "2024-01-19T14:58:03Z",
      "diff_hunk" : "@@ -729,6 +729,8 @@ class CWallet final : public WalletStorage, public interfaces::Chain::Notificati\n     /** Absolute maximum transaction fee (in satoshis) used by default for the wallet */\n     CAmount m_default_max_tx_fee{DEFAULT_TRANSACTION_MAXFEE};\n \n+    /** Maximum transaction fee rate (in satoshis) used by default for the wallet */\n+    CAmount m_default_max_tx_fee_rate{node::DEFAULT_MAX_RAW_TX_FEE_RATE.GetFeePerK()};",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29278#discussion_r1459156381",
      "id" : 1459156381,
      "in_reply_to_id" : 1459145558,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585W-PWd",
      "original_commit_id" : "2576efcf689401dcbea85856c74efc64af0c2cb2",
      "original_line" : 733,
      "original_position" : 5,
      "original_start_line" : 732,
      "path" : "src/wallet/wallet.h",
      "position" : null,
      "pull_request_review_id" : 1832875650,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29278",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1459156381/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : "RIGHT",
      "subject_type" : "line",
      "updated_at" : "2024-01-19T15:05:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1459156381",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/25183001?v=4",
         "events_url" : "https://api.github.com/users/glozow/events{/privacy}",
         "followers_url" : "https://api.github.com/users/glozow/followers",
         "following_url" : "https://api.github.com/users/glozow/following{/other_user}",
         "gists_url" : "https://api.github.com/users/glozow/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/glozow",
         "id" : 25183001,
         "login" : "glozow",
         "node_id" : "MDQ6VXNlcjI1MTgzMDAx",
         "organizations_url" : "https://api.github.com/users/glozow/orgs",
         "received_events_url" : "https://api.github.com/users/glozow/received_events",
         "repos_url" : "https://api.github.com/users/glozow/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/glozow/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/glozow/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/glozow"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Thanks @glozow for your review.\r\nWill put this PR in draft while addressing Approach feedback\r\n",
      "created_at" : "2024-01-19T16:12:17Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29278#issuecomment-1900699310",
      "id" : 1900699310,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/29278",
      "node_id" : "IC_kwDOABII585xSl6u",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1900699310/reactions"
      },
      "updated_at" : "2024-01-19T16:12:17Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1900699310",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/48946461?v=4",
         "events_url" : "https://api.github.com/users/ismaelsadeeq/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ismaelsadeeq/followers",
         "following_url" : "https://api.github.com/users/ismaelsadeeq/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ismaelsadeeq/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ismaelsadeeq",
         "id" : 48946461,
         "login" : "ismaelsadeeq",
         "node_id" : "MDQ6VXNlcjQ4OTQ2NDYx",
         "organizations_url" : "https://api.github.com/users/ismaelsadeeq/orgs",
         "received_events_url" : "https://api.github.com/users/ismaelsadeeq/received_events",
         "repos_url" : "https://api.github.com/users/ismaelsadeeq/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ismaelsadeeq/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ismaelsadeeq/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ismaelsadeeq"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "I agree this feels more like it should be a wallet option.",
      "created_at" : "2024-01-23T04:28:54Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29278#issuecomment-1905273019",
      "id" : 1905273019,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/29278",
      "node_id" : "IC_kwDOABII585xkCi7",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1905273019/reactions"
      },
      "updated_at" : "2024-01-23T04:28:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1905273019",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "node_id" : "MDQ6VXNlcjEwOTU2NzU=",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--85328a0da195eb286784d51f73fa0af9-->\n\nð§ At least one of the CI tasks failed. Make sure to run all tests locally, according to the\ndocumentation.\n\nPossibly this is due to a silent merge conflict (the changes in this pull request being\nincompatible with the current code in the target branch). If so, make sure to rebase on the latest\ncommit of the target branch.\n\nLeave a comment here, if you need help tracking down a confusing failure.\n\n<sub>Debug: https://github.com/bitcoin/bitcoin/runs/20878506397</sub>",
      "created_at" : "2024-01-25T21:53:17Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29278#issuecomment-1911058645",
      "id" : 1911058645,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/29278",
      "node_id" : "IC_kwDOABII585x6HDV",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1911058645/reactions"
      },
      "updated_at" : "2024-01-25T21:53:17Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1911058645",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29278#discussion_r1467012383"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29278"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1467012383"
         }
      },
      "author_association" : "MEMBER",
      "body" : "This is gone now.",
      "commit_id" : "0c9e0c5b2218c154b62275794b878af7e1457647",
      "created_at" : "2024-01-25T22:06:13Z",
      "diff_hunk" : "@@ -624,7 +625,10 @@ void SetupServerArgs(ArgsManager& argsman)\n     SetupChainParamsBaseOptions(argsman);\n \n     argsman.AddArg(\"-acceptnonstdtxn\", strprintf(\"Relay and mine \\\"non-standard\\\" transactions (test networks only; default: %u)\", DEFAULT_ACCEPT_NON_STD_TXN), ArgsManager::ALLOW_ANY | ArgsManager::DEBUG_ONLY, OptionsCategory::NODE_RELAY);\n-    argsman.AddArg(\"-incrementalrelayfee=<amt>\", strprintf(\"Fee rate (in %s/kvB) used to define cost of relay, used for mempool limiting and replacement policy. (default: %s)\", CURRENCY_UNIT, FormatMoney(DEFAULT_INCREMENTAL_RELAY_FEE)), ArgsManager::ALLOW_ANY | ArgsManager::DEBUG_ONLY, OptionsCategory::NODE_RELAY);\n+    argsman.AddArg(\"-maxfeerate=<amt>\", strprintf(\"Reject transactions whose fee rate is higher than the specified value, expressed in %s/kvB. Set to 0 to accept any fee rate. (default: %s %s/kvB)\", CURRENCY_UNIT, FormatMoney(node::DEFAULT_MAX_RAW_TX_FEE_RATE.GetFeePerK()), CURRENCY_UNIT), ArgsManager::ALLOW_ANY, OptionsCategory::DEBUG_TEST);\n+    argsman.AddArg(\"-maxburnamount=<amt>\", strprintf(\"Reject transactions with provably unspendable outputs (e.g. 'datacarrier' outputs that use the OP_RETURN opcode) greater than the specified value, expressed in %s, if burning funds through unspendable outputs is desired, increase this value. This check is based on heuristics and does not guarantee spendability of outputs (default: 0%s).\", CURRENCY_UNIT, CURRENCY_UNIT), ArgsManager::ALLOW_ANY, OptionsCategory::DEBUG_TEST);\n+    argsman.AddArg(\"-incrementalrelayfee=<amt>\", strprintf(\"Fee rate (in %s/kvB) used to define cost of relay, used for mempool limiting and replacement policy. (default: %s) If burning funds through unspendable outputs is desired, increase this value. This check is based on heuristics and does not guarantee spendability of outputs.\",",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29278#discussion_r1467012383",
      "id" : 1467012383,
      "in_reply_to_id" : 1459122123,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585XcNUf",
      "original_commit_id" : "2576efcf689401dcbea85856c74efc64af0c2cb2",
      "original_line" : 630,
      "original_position" : 15,
      "original_start_line" : null,
      "path" : "src/init.cpp",
      "position" : null,
      "pull_request_review_id" : 1844762800,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29278",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1467012383/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-01-25T22:06:13Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1467012383",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/48946461?v=4",
         "events_url" : "https://api.github.com/users/ismaelsadeeq/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ismaelsadeeq/followers",
         "following_url" : "https://api.github.com/users/ismaelsadeeq/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ismaelsadeeq/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ismaelsadeeq",
         "id" : 48946461,
         "login" : "ismaelsadeeq",
         "node_id" : "MDQ6VXNlcjQ4OTQ2NDYx",
         "organizations_url" : "https://api.github.com/users/ismaelsadeeq/orgs",
         "received_events_url" : "https://api.github.com/users/ismaelsadeeq/received_events",
         "repos_url" : "https://api.github.com/users/ismaelsadeeq/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ismaelsadeeq/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ismaelsadeeq/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ismaelsadeeq"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29278#discussion_r1467012789"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29278"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1467012789"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Reverted thank you.",
      "commit_id" : "0c9e0c5b2218c154b62275794b878af7e1457647",
      "created_at" : "2024-01-25T22:06:43Z",
      "diff_hunk" : "@@ -43,13 +44,6 @@ static RPCHelpMan sendrawtransaction()\n         \"\\nRelated RPCs: createrawtransaction, signrawtransactionwithkey\\n\",\n         {\n             {\"hexstring\", RPCArg::Type::STR_HEX, RPCArg::Optional::NO, \"The hex string of the raw transaction\"},\n-            {\"maxfeerate\", RPCArg::Type::AMOUNT, RPCArg::Default{FormatMoney(DEFAULT_MAX_RAW_TX_FEE_RATE.GetFeePerK())},\n-             \"Reject transactions whose fee rate is higher than the specified value, expressed in \" + CURRENCY_UNIT +\n-                 \"/kvB.\\nSet to 0 to accept any fee rate.\"},\n-            {\"maxburnamount\", RPCArg::Type::AMOUNT, RPCArg::Default{FormatMoney(0)},\n-             \"Reject transactions with provably unspendable outputs (e.g. 'datacarrier' outputs that use the OP_RETURN opcode) greater than the specified value, expressed in \" + CURRENCY_UNIT + \".\\n\"\n-             \"If burning funds through unspendable outputs is desired, increase this value.\\n\"\n-             \"This check is based on heuristics and does not guarantee spendability of outputs.\\n\"},",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29278#discussion_r1467012789",
      "id" : 1467012789,
      "in_reply_to_id" : 1459131869,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585XcNa1",
      "original_commit_id" : "2576efcf689401dcbea85856c74efc64af0c2cb2",
      "original_line" : 52,
      "original_position" : 18,
      "original_start_line" : 46,
      "path" : "src/rpc/mempool.cpp",
      "position" : null,
      "pull_request_review_id" : 1844764068,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29278",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1467012789/reactions"
      },
      "side" : "LEFT",
      "start_line" : null,
      "start_side" : "LEFT",
      "subject_type" : "line",
      "updated_at" : "2024-01-25T22:06:43Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1467012789",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/48946461?v=4",
         "events_url" : "https://api.github.com/users/ismaelsadeeq/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ismaelsadeeq/followers",
         "following_url" : "https://api.github.com/users/ismaelsadeeq/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ismaelsadeeq/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ismaelsadeeq",
         "id" : 48946461,
         "login" : "ismaelsadeeq",
         "node_id" : "MDQ6VXNlcjQ4OTQ2NDYx",
         "organizations_url" : "https://api.github.com/users/ismaelsadeeq/orgs",
         "received_events_url" : "https://api.github.com/users/ismaelsadeeq/received_events",
         "repos_url" : "https://api.github.com/users/ismaelsadeeq/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ismaelsadeeq/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ismaelsadeeq/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ismaelsadeeq"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29278#discussion_r1467014047"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29278"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1467014047"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Done, `CFeeRate` is the right format since we are representing fee rate.\r\n\r\n ",
      "commit_id" : "0c9e0c5b2218c154b62275794b878af7e1457647",
      "created_at" : "2024-01-25T22:07:55Z",
      "diff_hunk" : "@@ -729,6 +729,8 @@ class CWallet final : public WalletStorage, public interfaces::Chain::Notificati\n     /** Absolute maximum transaction fee (in satoshis) used by default for the wallet */\n     CAmount m_default_max_tx_fee{DEFAULT_TRANSACTION_MAXFEE};\n \n+    /** Maximum transaction fee rate (in satoshis) used by default for the wallet */\n+    CAmount m_default_max_tx_fee_rate{node::DEFAULT_MAX_RAW_TX_FEE_RATE.GetFeePerK()};",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29278#discussion_r1467014047",
      "id" : 1467014047,
      "in_reply_to_id" : 1459145558,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585XcNuf",
      "original_commit_id" : "2576efcf689401dcbea85856c74efc64af0c2cb2",
      "original_line" : 733,
      "original_position" : 5,
      "original_start_line" : 732,
      "path" : "src/wallet/wallet.h",
      "position" : null,
      "pull_request_review_id" : 1844765575,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29278",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1467014047/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : "RIGHT",
      "subject_type" : "line",
      "updated_at" : "2024-01-25T22:07:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1467014047",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/48946461?v=4",
         "events_url" : "https://api.github.com/users/ismaelsadeeq/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ismaelsadeeq/followers",
         "following_url" : "https://api.github.com/users/ismaelsadeeq/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ismaelsadeeq/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ismaelsadeeq",
         "id" : 48946461,
         "login" : "ismaelsadeeq",
         "node_id" : "MDQ6VXNlcjQ4OTQ2NDYx",
         "organizations_url" : "https://api.github.com/users/ismaelsadeeq/orgs",
         "received_events_url" : "https://api.github.com/users/ismaelsadeeq/received_events",
         "repos_url" : "https://api.github.com/users/ismaelsadeeq/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ismaelsadeeq/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ismaelsadeeq/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ismaelsadeeq"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29278#discussion_r1467017299"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29278"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1467017299"
         }
      },
      "author_association" : "MEMBER",
      "body" : ">Shouldn't there be a check in CreateTransactionInternal that makes sure we don't make transactions above this feerate, and an arg passed to BroadcastTransaction?\r\n\r\nAgreed\r\n\r\nI Added a check in `CreateTransactionInternal` in 0c9e0c5b2218c154b62275794b878af7e1457647. \r\n\r\nNo need to pass an arg to `BroadcastTransaction`,  if the transaction fee rate is above `maxfeerate` it will not reach `BroadcastTransaction`. \r\n\r\n> I also don't see a test case for it.\r\n\r\nI added a test in 0c9e0c5b2218c154b62275794b878af7e1457647.",
      "commit_id" : "0c9e0c5b2218c154b62275794b878af7e1457647",
      "created_at" : "2024-01-25T22:11:52Z",
      "diff_hunk" : "@@ -729,6 +729,8 @@ class CWallet final : public WalletStorage, public interfaces::Chain::Notificati\n     /** Absolute maximum transaction fee (in satoshis) used by default for the wallet */\n     CAmount m_default_max_tx_fee{DEFAULT_TRANSACTION_MAXFEE};\n \n+    /** Maximum transaction fee rate (in satoshis) used by default for the wallet */\n+    CAmount m_default_max_tx_fee_rate{node::DEFAULT_MAX_RAW_TX_FEE_RATE.GetFeePerK()};",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29278#discussion_r1467017299",
      "id" : 1467017299,
      "in_reply_to_id" : 1459145558,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585XcOhT",
      "original_commit_id" : "2576efcf689401dcbea85856c74efc64af0c2cb2",
      "original_line" : 733,
      "original_position" : 5,
      "original_start_line" : 732,
      "path" : "src/wallet/wallet.h",
      "position" : null,
      "pull_request_review_id" : 1844769985,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29278",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1467017299/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : "RIGHT",
      "subject_type" : "line",
      "updated_at" : "2024-01-25T22:13:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1467017299",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/48946461?v=4",
         "events_url" : "https://api.github.com/users/ismaelsadeeq/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ismaelsadeeq/followers",
         "following_url" : "https://api.github.com/users/ismaelsadeeq/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ismaelsadeeq/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ismaelsadeeq",
         "id" : 48946461,
         "login" : "ismaelsadeeq",
         "node_id" : "MDQ6VXNlcjQ4OTQ2NDYx",
         "organizations_url" : "https://api.github.com/users/ismaelsadeeq/orgs",
         "received_events_url" : "https://api.github.com/users/ismaelsadeeq/received_events",
         "repos_url" : "https://api.github.com/users/ismaelsadeeq/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ismaelsadeeq/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ismaelsadeeq/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ismaelsadeeq"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Forced pushed from https://github.com/bitcoin/bitcoin/commit/2576efcf689401dcbea85856c74efc64af0c2cb2 to https://github.com/bitcoin/bitcoin/commit/0c9e0c5b2218c154b62275794b878af7e1457647 Compare the [diff](https://github.com/bitcoin/bitcoin/compare/2576efcf689401dcbea85856c74efc64af0c2cb2..0c9e0c5b2218c154b62275794b878af7e1457647)\r\n- All review comments are addressed\r\n- Removed `maxburnamount` option\r\n- Made `maxfeerate` wallet option\r\n- Added a check in `CreateTransactionInternal` that makes sure we don't make transactions above this `-maxfeerate`.\r\n- Fixed ambiguity between `-maxtxfee` and `maxfeerate`\r\n- Prevent setting wallet feerate above `maxfeerate` from `settxfee` RPC\r\n- Added a functional test case\r\n- Updated PR OP\r\n\r\n",
      "created_at" : "2024-01-25T22:19:38Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29278#issuecomment-1911091517",
      "id" : 1911091517,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/29278",
      "node_id" : "IC_kwDOABII585x6PE9",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1911091517/reactions"
      },
      "updated_at" : "2024-01-25T22:19:38Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1911091517",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/48946461?v=4",
         "events_url" : "https://api.github.com/users/ismaelsadeeq/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ismaelsadeeq/followers",
         "following_url" : "https://api.github.com/users/ismaelsadeeq/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ismaelsadeeq/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ismaelsadeeq",
         "id" : 48946461,
         "login" : "ismaelsadeeq",
         "node_id" : "MDQ6VXNlcjQ4OTQ2NDYx",
         "organizations_url" : "https://api.github.com/users/ismaelsadeeq/orgs",
         "received_events_url" : "https://api.github.com/users/ismaelsadeeq/received_events",
         "repos_url" : "https://api.github.com/users/ismaelsadeeq/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ismaelsadeeq/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ismaelsadeeq/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ismaelsadeeq"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29278#discussion_r1468533274"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29278"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1468533274"
         }
      },
      "author_association" : "MEMBER",
      "body" : "This still isn't a wallet option...",
      "commit_id" : "0c9e0c5b2218c154b62275794b878af7e1457647",
      "created_at" : "2024-01-27T17:01:54Z",
      "diff_hunk" : "@@ -62,6 +62,7 @@ void WalletInit::AddWalletOptions(ArgsManager& argsman) const\n     argsman.AddArg(\"-maxapsfee=<n>\", strprintf(\"Spend up to this amount in additional (absolute) fees (in %s) if it allows the use of partial spend avoidance (default: %s)\", CURRENCY_UNIT, FormatMoney(DEFAULT_MAX_AVOIDPARTIALSPEND_FEE)), ArgsManager::ALLOW_ANY, OptionsCategory::WALLET);\n     argsman.AddArg(\"-maxtxfee=<amt>\", strprintf(\"Maximum total fees (in %s) to use in a single wallet transaction; setting this too low may abort large transactions (default: %s)\",\n         CURRENCY_UNIT, FormatMoney(DEFAULT_TRANSACTION_MAXFEE)), ArgsManager::ALLOW_ANY, OptionsCategory::DEBUG_TEST);\n+    argsman.AddArg(\"-maxfeerate=<amt>\", strprintf(\"Maximum fee rate (in %s) of a single wallet transaction (default: %s)\", CURRENCY_UNIT, FormatMoney(DEFAULT_TRANSACTION_MAXFEERATE.GetFeePerK())), ArgsManager::ALLOW_ANY, OptionsCategory::WALLET);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29278#discussion_r1468533274",
      "id" : 1468533274,
      "line" : 65,
      "node_id" : "PRRC_kwDOABII585XiAoa",
      "original_commit_id" : "0c9e0c5b2218c154b62275794b878af7e1457647",
      "original_line" : 65,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "src/wallet/init.cpp",
      "position" : 4,
      "pull_request_review_id" : 1847133124,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29278",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1468533274/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-01-27T17:01:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1468533274",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "node_id" : "MDQ6VXNlcjEwOTU2NzU=",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29278#discussion_r1469291356"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29278"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1469291356"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Maybe add tests where you (successfully) configure the node's wallet using `-maxfeerate`?",
      "commit_id" : "0c9e0c5b2218c154b62275794b878af7e1457647",
      "created_at" : "2024-01-29T09:21:15Z",
      "diff_hunk" : "@@ -184,6 +184,33 @@ def test_send(self, from_wallet, to_wallet=None, amount=None, data=None,\n \n         return res\n \n+    def test_maxfeerate(self):",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29278#discussion_r1469291356",
      "id" : 1469291356,
      "line" : 187,
      "node_id" : "PRRC_kwDOABII585Xk5tc",
      "original_commit_id" : "0c9e0c5b2218c154b62275794b878af7e1457647",
      "original_line" : 187,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "test/functional/wallet_send.py",
      "position" : 4,
      "pull_request_review_id" : 1848180625,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29278",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1469291356/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-01-29T09:27:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1469291356",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/25183001?v=4",
         "events_url" : "https://api.github.com/users/glozow/events{/privacy}",
         "followers_url" : "https://api.github.com/users/glozow/followers",
         "following_url" : "https://api.github.com/users/glozow/following{/other_user}",
         "gists_url" : "https://api.github.com/users/glozow/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/glozow",
         "id" : 25183001,
         "login" : "glozow",
         "node_id" : "MDQ6VXNlcjI1MTgzMDAx",
         "organizations_url" : "https://api.github.com/users/glozow/orgs",
         "received_events_url" : "https://api.github.com/users/glozow/received_events",
         "repos_url" : "https://api.github.com/users/glozow/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/glozow/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/glozow/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/glozow"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29278#discussion_r1469293744"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29278"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1469293744"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Similarly, it would be good to test that both maxfee and maxfeerate requirements must be met.",
      "commit_id" : "0c9e0c5b2218c154b62275794b878af7e1457647",
      "created_at" : "2024-01-29T09:23:07Z",
      "diff_hunk" : "@@ -184,6 +184,33 @@ def test_send(self, from_wallet, to_wallet=None, amount=None, data=None,\n \n         return res\n \n+    def test_maxfeerate(self):",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29278#discussion_r1469293744",
      "id" : 1469293744,
      "in_reply_to_id" : 1469291356,
      "line" : 187,
      "node_id" : "PRRC_kwDOABII585Xk6Sw",
      "original_commit_id" : "0c9e0c5b2218c154b62275794b878af7e1457647",
      "original_line" : 187,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "test/functional/wallet_send.py",
      "position" : 4,
      "pull_request_review_id" : 1848180625,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29278",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1469293744/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-01-29T09:27:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1469293744",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/25183001?v=4",
         "events_url" : "https://api.github.com/users/glozow/events{/privacy}",
         "followers_url" : "https://api.github.com/users/glozow/followers",
         "following_url" : "https://api.github.com/users/glozow/following{/other_user}",
         "gists_url" : "https://api.github.com/users/glozow/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/glozow",
         "id" : 25183001,
         "login" : "glozow",
         "node_id" : "MDQ6VXNlcjI1MTgzMDAx",
         "organizations_url" : "https://api.github.com/users/glozow/orgs",
         "received_events_url" : "https://api.github.com/users/glozow/received_events",
         "repos_url" : "https://api.github.com/users/glozow/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/glozow/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/glozow/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/glozow"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29278#discussion_r1469296961"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29278"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1469296961"
         }
      },
      "author_association" : "MEMBER",
      "body" : "1000 is redundant",
      "commit_id" : "0c9e0c5b2218c154b62275794b878af7e1457647",
      "created_at" : "2024-01-29T09:25:41Z",
      "diff_hunk" : "@@ -136,6 +136,8 @@ static const bool DEFAULT_DISABLE_WALLET = false;\n static const bool DEFAULT_WALLETCROSSCHAIN = false;\n //! -maxtxfee default\n constexpr CAmount DEFAULT_TRANSACTION_MAXFEE{COIN / 10};\n+//! maxfeerate default\n+const CFeeRate DEFAULT_TRANSACTION_MAXFEERATE(CFeeRate((COIN / 10), 1000));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29278#discussion_r1469296961",
      "id" : 1469296961,
      "line" : 140,
      "node_id" : "PRRC_kwDOABII585Xk7FB",
      "original_commit_id" : "0c9e0c5b2218c154b62275794b878af7e1457647",
      "original_line" : 140,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "src/wallet/wallet.h",
      "position" : 5,
      "pull_request_review_id" : 1848180625,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29278",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1469296961/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-01-29T09:27:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1469296961",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/25183001?v=4",
         "events_url" : "https://api.github.com/users/glozow/events{/privacy}",
         "followers_url" : "https://api.github.com/users/glozow/followers",
         "following_url" : "https://api.github.com/users/glozow/following{/other_user}",
         "gists_url" : "https://api.github.com/users/glozow/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/glozow",
         "id" : 25183001,
         "login" : "glozow",
         "node_id" : "MDQ6VXNlcjI1MTgzMDAx",
         "organizations_url" : "https://api.github.com/users/glozow/orgs",
         "received_events_url" : "https://api.github.com/users/glozow/received_events",
         "repos_url" : "https://api.github.com/users/glozow/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/glozow/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/glozow/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/glozow"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29278#discussion_r1469368423"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29278"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1469368423"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I think we should keep the word \"wallet\" here, since this is a client set option. If you look at the RPC call above, it differentiates between the node wide policy of `relayMinFee` and the wallet set policy `m_min_fee` by adding the world \"wallet\" to the RPC error.",
      "commit_id" : "0c9e0c5b2218c154b62275794b878af7e1457647",
      "created_at" : "2024-01-29T10:15:17Z",
      "diff_hunk" : "@@ -430,15 +430,14 @@ RPCHelpMan settxfee()\n \n     CAmount nAmount = AmountFromValue(request.params[0]);\n     CFeeRate tx_fee_rate(nAmount, 1000);\n-    CFeeRate max_tx_fee_rate(pwallet->m_default_max_tx_fee, 1000);\n     if (tx_fee_rate == CFeeRate(0)) {\n         // automatic selection\n     } else if (tx_fee_rate < pwallet->chain().relayMinFee()) {\n         throw JSONRPCError(RPC_INVALID_PARAMETER, strprintf(\"txfee cannot be less than min relay tx fee (%s)\", pwallet->chain().relayMinFee().ToString()));\n     } else if (tx_fee_rate < pwallet->m_min_fee) {\n         throw JSONRPCError(RPC_INVALID_PARAMETER, strprintf(\"txfee cannot be less than wallet min fee (%s)\", pwallet->m_min_fee.ToString()));\n-    } else if (tx_fee_rate > max_tx_fee_rate) {\n-        throw JSONRPCError(RPC_INVALID_PARAMETER, strprintf(\"txfee cannot be more than wallet max tx fee (%s)\", max_tx_fee_rate.ToString()));\n+    } else if (tx_fee_rate > pwallet->m_max_tx_fee_rate) {\n+        throw JSONRPCError(RPC_INVALID_PARAMETER, strprintf(\"txfee cannot be more than max tx fee rate (%s)\", pwallet->m_max_tx_fee_rate.ToString()));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29278#discussion_r1469368423",
      "id" : 1469368423,
      "line" : 440,
      "node_id" : "PRRC_kwDOABII585XlMhn",
      "original_commit_id" : "677dec10cc5a481db79bf34073d9eb65f5d30aff",
      "original_line" : 440,
      "original_position" : 14,
      "original_start_line" : 439,
      "path" : "src/wallet/rpc/spend.cpp",
      "position" : 14,
      "pull_request_review_id" : 1848310090,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29278",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1469368423/reactions"
      },
      "side" : "RIGHT",
      "start_line" : 439,
      "start_side" : "RIGHT",
      "subject_type" : "line",
      "updated_at" : "2024-01-29T10:40:28Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1469368423",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7444140?v=4",
         "events_url" : "https://api.github.com/users/josibake/events{/privacy}",
         "followers_url" : "https://api.github.com/users/josibake/followers",
         "following_url" : "https://api.github.com/users/josibake/following{/other_user}",
         "gists_url" : "https://api.github.com/users/josibake/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/josibake",
         "id" : 7444140,
         "login" : "josibake",
         "node_id" : "MDQ6VXNlcjc0NDQxNDA=",
         "organizations_url" : "https://api.github.com/users/josibake/orgs",
         "received_events_url" : "https://api.github.com/users/josibake/received_events",
         "repos_url" : "https://api.github.com/users/josibake/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/josibake/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/josibake/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/josibake"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29278#discussion_r1469372132"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29278"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1469372132"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I don't think we should remove this check for setting a `max_fee` that results in fee rates less than the `relayMinFee`.",
      "commit_id" : "0c9e0c5b2218c154b62275794b878af7e1457647",
      "created_at" : "2024-01-29T10:18:09Z",
      "diff_hunk" : "@@ -3058,13 +3058,21 @@ std::shared_ptr<CWallet> CWallet::Create(WalletContext& context, const std::stri\n             warnings.push_back(strprintf(_(\"%s is set very high! Fees this large could be paid on a single transaction.\"), \"-maxtxfee\"));\n         }\n \n-        if (chain && CFeeRate{max_fee.value(), 1000} < chain->relayMinFee()) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29278#discussion_r1469372132",
      "id" : 1469372132,
      "line" : 3061,
      "node_id" : "PRRC_kwDOABII585XlNbk",
      "original_commit_id" : "677dec10cc5a481db79bf34073d9eb65f5d30aff",
      "original_line" : 3061,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "src/wallet/wallet.cpp",
      "position" : 4,
      "pull_request_review_id" : 1848310090,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29278",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1469372132/reactions"
      },
      "side" : "LEFT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-01-29T10:40:28Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1469372132",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7444140?v=4",
         "events_url" : "https://api.github.com/users/josibake/events{/privacy}",
         "followers_url" : "https://api.github.com/users/josibake/followers",
         "following_url" : "https://api.github.com/users/josibake/following{/other_user}",
         "gists_url" : "https://api.github.com/users/josibake/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/josibake",
         "id" : 7444140,
         "login" : "josibake",
         "node_id" : "MDQ6VXNlcjc0NDQxNDA=",
         "organizations_url" : "https://api.github.com/users/josibake/orgs",
         "received_events_url" : "https://api.github.com/users/josibake/received_events",
         "repos_url" : "https://api.github.com/users/josibake/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/josibake/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/josibake/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/josibake"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29278#discussion_r1469517392"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29278"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1469517392"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I dont understand why you said it is not a wallet option.\r\nThe `OptionsCategory` of this startup option is `WALLET`.\r\nAnd its only used in the wallet.\r\n\r\nCan you please expand on your comment.\r\nThanks",
      "commit_id" : "0c9e0c5b2218c154b62275794b878af7e1457647",
      "created_at" : "2024-01-29T12:25:55Z",
      "diff_hunk" : "@@ -62,6 +62,7 @@ void WalletInit::AddWalletOptions(ArgsManager& argsman) const\n     argsman.AddArg(\"-maxapsfee=<n>\", strprintf(\"Spend up to this amount in additional (absolute) fees (in %s) if it allows the use of partial spend avoidance (default: %s)\", CURRENCY_UNIT, FormatMoney(DEFAULT_MAX_AVOIDPARTIALSPEND_FEE)), ArgsManager::ALLOW_ANY, OptionsCategory::WALLET);\n     argsman.AddArg(\"-maxtxfee=<amt>\", strprintf(\"Maximum total fees (in %s) to use in a single wallet transaction; setting this too low may abort large transactions (default: %s)\",\n         CURRENCY_UNIT, FormatMoney(DEFAULT_TRANSACTION_MAXFEE)), ArgsManager::ALLOW_ANY, OptionsCategory::DEBUG_TEST);\n+    argsman.AddArg(\"-maxfeerate=<amt>\", strprintf(\"Maximum fee rate (in %s) of a single wallet transaction (default: %s)\", CURRENCY_UNIT, FormatMoney(DEFAULT_TRANSACTION_MAXFEERATE.GetFeePerK())), ArgsManager::ALLOW_ANY, OptionsCategory::WALLET);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29278#discussion_r1469517392",
      "id" : 1469517392,
      "in_reply_to_id" : 1468533274,
      "line" : 65,
      "node_id" : "PRRC_kwDOABII585Xlw5Q",
      "original_commit_id" : "0c9e0c5b2218c154b62275794b878af7e1457647",
      "original_line" : 65,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "src/wallet/init.cpp",
      "position" : 4,
      "pull_request_review_id" : 1848550494,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29278",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1469517392/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-01-29T12:25:55Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1469517392",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/48946461?v=4",
         "events_url" : "https://api.github.com/users/ismaelsadeeq/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ismaelsadeeq/followers",
         "following_url" : "https://api.github.com/users/ismaelsadeeq/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ismaelsadeeq/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ismaelsadeeq",
         "id" : 48946461,
         "login" : "ismaelsadeeq",
         "node_id" : "MDQ6VXNlcjQ4OTQ2NDYx",
         "organizations_url" : "https://api.github.com/users/ismaelsadeeq/orgs",
         "received_events_url" : "https://api.github.com/users/ismaelsadeeq/received_events",
         "repos_url" : "https://api.github.com/users/ismaelsadeeq/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ismaelsadeeq/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ismaelsadeeq/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ismaelsadeeq"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> Or is there a use case for caring about the total fees you pay AND caring about the sats per vbyte you pay that I'm not understanding?\r\n\r\nI think it makes sense to have both. I could have a `maxtxfee` of the upper bound of what I'm willing to pay ever, and also set `maxfeerate` to something reasonable just to make sure I don't typo a feerate and accidentally pay a feerate orders of magnitude higher than intended. At `maxfeerate`, a small transaction can still pay a smaller fee than `maxtxfee`, but a large transaction could exceed `maxtxfee`.",
      "created_at" : "2024-01-29T17:59:49Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29278#issuecomment-1915276592",
      "id" : 1915276592,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/29278",
      "node_id" : "IC_kwDOABII585yKM0w",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1915276592/reactions"
      },
      "updated_at" : "2024-01-29T17:59:49Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1915276592",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "node_id" : "MDQ6VXNlcjM3ODIyNzQ=",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> I think it makes sense to have both. I could have a `maxtxfee` of the upper bound of what I'm willing to pay ever, and also set `maxfeerate` to something reasonable just to make sure I don't typo a feerate and accidentally pay a feerate orders of magnitude higher than intended. At `maxfeerate`, a small transaction can still pay a smaller fee than `maxtxfee`, but a large transaction could exceed `maxtxfee`.\r\n\r\nBut in this example, if you typo'd a feerate orders of magnitude higher, your `maxtxfee` should get hit. If you accidentally typo a higher fee rate than intended but it's below the `maxtxfee` you're willing to pay, that doesn't seem like a big problem to me.\r\n\r\nSeems less footgunny to only let the user set one or the other (and then as a belt and suspenders still check the defaults for both, regardless of what is set?). But I might be overthinking this.. just seems really gross to have to now consider both of these in coin selection, especially if a user sets wonky values.",
      "created_at" : "2024-01-29T18:37:46Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29278#issuecomment-1915336928",
      "id" : 1915336928,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/29278",
      "node_id" : "IC_kwDOABII585yKbjg",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1915336928/reactions"
      },
      "updated_at" : "2024-01-29T18:37:46Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1915336928",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7444140?v=4",
         "events_url" : "https://api.github.com/users/josibake/events{/privacy}",
         "followers_url" : "https://api.github.com/users/josibake/followers",
         "following_url" : "https://api.github.com/users/josibake/following{/other_user}",
         "gists_url" : "https://api.github.com/users/josibake/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/josibake",
         "id" : 7444140,
         "login" : "josibake",
         "node_id" : "MDQ6VXNlcjc0NDQxNDA=",
         "organizations_url" : "https://api.github.com/users/josibake/orgs",
         "received_events_url" : "https://api.github.com/users/josibake/received_events",
         "repos_url" : "https://api.github.com/users/josibake/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/josibake/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/josibake/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/josibake"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Thank you for your comments @josibake @glozow @achow101 , will address review comments shortly.\r\n\r\n> if you typo'd a feerate orders of magnitude higher, your maxtxfee should get hit.\r\n\r\nI don't think this is true; it depends on what your `maxtxfee` is. Going by the default value of 0.10 BTC.\r\n\r\nThis is not likely to occur. \r\n\r\nI did a manual test on master.\r\n\r\nWhen I set `maxtxfee` to 0.10 BTC on master, if you mistakenly type 10,000 as the fee rate, the max fee exceed error will not be hit.\r\n\r\nHowever, in some cases where you set a low `maxtxfee`it may be hit or not depending on the transaction size.\r\nIt's uncertain.\r\n\r\n```terminal\r\nabubakarismail@Abubakars-MacBook-Pro bitcoin % ./src/bitcoind -regtest -maxtxfee=0.10  -daemon                                                                                          \r\nBitcoin Core starting\r\n\r\nabubakarismail@Abubakars-MacBook-Pro bitcoin % ./src/bitcoin-cli -regtest loadwallet abubakar-test                                                                          \r\n{\r\n  \"name\": \"abubakar-test\"\r\n}\r\n\r\nabubakarismail@Abubakars-MacBook-Pro bitcoin % ./src/bitcoin-cli -regtest -named sendtoaddress address=\"bcrt1qt3fvqww6reduq287nhl59cu05hmyrj7achar44\" fee_rate=10000 amount=1\r\n22a92fdfa68581ba1d3da4aeedaeb20c7570b8c8eff9c29699c846aa1dacd73d\r\n\r\n```\r\n\r\n\r\n---\r\n\r\nOn this branch, if I set my `-maxtxfee` as 0.10 absolute fee and `-maxfeerate` as (0.010 which is 1000s/vb), and make a typo in a `sendtoaddress` call with a `fee_rate` of 10,000 s/vb instead of 100, the `maxfeerate` check will be hit.\r\n```\r\n ./src/bitcoind -regtest -maxfeerate=0.01 -maxtxfee=0.10 -daemon                                                                         \r\nBitcoin Core starting\r\nabubakarismail@Abubakars-MacBook-Pro bitcoin % ./src/bitcoin-cli -regtest loadwallet abubakar-test                                                                         \r\n{\r\n  \"name\": \"abubakar-test\"\r\n}\r\n\r\nabubakarismail@Abubakars-MacBook-Pro bitcoin % ./src/bitcoin-cli -regtest -named sendtoaddress address=\"bcrt1qt3fvqww6reduq287nhl59cu05hmyrj7achar44\" fee_rate=10000 amount=1\r\nerror code: -6\r\nerror message:\r\nFee exceeds maximum configured by user (e.g. -maxtxfee, maxfeerate)\r\n```\r\n\r\n\r\nIIUC `-maxtxfee` should generally be high as the maximum absolute fee you think you can ever pay, and `-maxfeerate` as a cautionary check against an absurd fee rate for a transaction based on current fee estimates.\r\n\r\nMaybe I should differentiate between the two error messages and make it more verbose, so that users can know which one is hit and adjust if its not intentional.\r\n\r\n\r\n\r\n",
      "created_at" : "2024-01-29T21:12:27Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29278#issuecomment-1915579486",
      "id" : 1915579486,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/29278",
      "node_id" : "IC_kwDOABII585yLWxe",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1915579486/reactions"
      },
      "updated_at" : "2024-01-29T21:12:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1915579486",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/48946461?v=4",
         "events_url" : "https://api.github.com/users/ismaelsadeeq/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ismaelsadeeq/followers",
         "following_url" : "https://api.github.com/users/ismaelsadeeq/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ismaelsadeeq/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ismaelsadeeq",
         "id" : 48946461,
         "login" : "ismaelsadeeq",
         "node_id" : "MDQ6VXNlcjQ4OTQ2NDYx",
         "organizations_url" : "https://api.github.com/users/ismaelsadeeq/orgs",
         "received_events_url" : "https://api.github.com/users/ismaelsadeeq/received_events",
         "repos_url" : "https://api.github.com/users/ismaelsadeeq/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ismaelsadeeq/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ismaelsadeeq/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ismaelsadeeq"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> just seems really gross to have to now consider both of these in coin selection, especially if a user sets wonky values.\r\n\r\nI dont really understand how this can affect coinselection, can you expand please? Thanks",
      "created_at" : "2024-01-29T21:14:20Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29278#issuecomment-1915582287",
      "id" : 1915582287,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/29278",
      "node_id" : "IC_kwDOABII585yLXdP",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1915582287/reactions"
      },
      "updated_at" : "2024-01-29T21:14:20Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1915582287",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/48946461?v=4",
         "events_url" : "https://api.github.com/users/ismaelsadeeq/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ismaelsadeeq/followers",
         "following_url" : "https://api.github.com/users/ismaelsadeeq/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ismaelsadeeq/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ismaelsadeeq",
         "id" : 48946461,
         "login" : "ismaelsadeeq",
         "node_id" : "MDQ6VXNlcjQ4OTQ2NDYx",
         "organizations_url" : "https://api.github.com/users/ismaelsadeeq/orgs",
         "received_events_url" : "https://api.github.com/users/ismaelsadeeq/received_events",
         "repos_url" : "https://api.github.com/users/ismaelsadeeq/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ismaelsadeeq/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ismaelsadeeq/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ismaelsadeeq"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> I dont really understand how this can affect coinselection, can you expand please? Thanks\r\n\r\nSorry, I was completely overthinking it! I was incorrectly thinking that we took `max_tx_fee` and `tx_fee_rate` as inputs to coin selection, but what we do instead:\r\n\r\n1. Check the if the user provided a `fee_rate` (this fee rate would have already been sanity checked against `max_fee_rate`)\r\n2. If not, get a fee rate by doing some checks against min fees and fee estimation\r\n3. Check `max_tx_fee` *after* the transaction is done (and now `max_tx_fee_rate`)",
      "created_at" : "2024-01-30T09:26:53Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29278#issuecomment-1916411990",
      "id" : 1916411990,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/29278",
      "node_id" : "IC_kwDOABII585yOiBW",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1916411990/reactions"
      },
      "updated_at" : "2024-01-30T09:26:53Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1916411990",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7444140?v=4",
         "events_url" : "https://api.github.com/users/josibake/events{/privacy}",
         "followers_url" : "https://api.github.com/users/josibake/followers",
         "following_url" : "https://api.github.com/users/josibake/following{/other_user}",
         "gists_url" : "https://api.github.com/users/josibake/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/josibake",
         "id" : 7444140,
         "login" : "josibake",
         "node_id" : "MDQ6VXNlcjc0NDQxNDA=",
         "organizations_url" : "https://api.github.com/users/josibake/orgs",
         "received_events_url" : "https://api.github.com/users/josibake/received_events",
         "repos_url" : "https://api.github.com/users/josibake/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/josibake/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/josibake/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/josibake"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@ismaelsadeeq thanks for walking through the scenario! Reading over what you posted, if `maxtxfee` is left as the default, then the user can set whatever they want for `maxfeerate` without any issues. Depending on the types of transactions they make, they are essentially setting a new, lower `maxtxfee`.\r\n\r\nIf the user is setting both, they could create weird scenarios where the `maxtxfee` is too low compared to the `maxtxfeerate` and vice versa. But thinking it through and with your examples, I think most of my concern boils down to \"the user set a `maxtxfee` which is too low for the current fee environment.\" \r\n\r\n> Maybe I should differentiate between the two error messages and make it more verbose, so that users can know which one is hit and adjust if its not intentional.\r\n\r\nI think differentiating errors makes sense! Then it doesn't really matter if the user sets bad values for `max_fee_rate` or `max_tx_fee`, so long as we tell them which bad value is getting hit and prompt them to change it.",
      "created_at" : "2024-01-30T09:44:12Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29278#issuecomment-1916447568",
      "id" : 1916447568,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/29278",
      "node_id" : "IC_kwDOABII585yOqtQ",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1916447568/reactions"
      },
      "updated_at" : "2024-01-30T09:44:12Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1916447568",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7444140?v=4",
         "events_url" : "https://api.github.com/users/josibake/events{/privacy}",
         "followers_url" : "https://api.github.com/users/josibake/followers",
         "following_url" : "https://api.github.com/users/josibake/following{/other_user}",
         "gists_url" : "https://api.github.com/users/josibake/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/josibake",
         "id" : 7444140,
         "login" : "josibake",
         "node_id" : "MDQ6VXNlcjc0NDQxNDA=",
         "organizations_url" : "https://api.github.com/users/josibake/orgs",
         "received_events_url" : "https://api.github.com/users/josibake/received_events",
         "repos_url" : "https://api.github.com/users/josibake/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/josibake/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/josibake/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/josibake"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29278#discussion_r1470885445"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29278"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1470885445"
         }
      },
      "author_association" : "MEMBER",
      "body" : "perhaps introduce a new error type: \r\n\r\n```suggestion\r\n        return util::Error{TransactionErrorString(TransactionError::MAX_FEE_RATE_EXCEEDED)};\r\n```",
      "commit_id" : "0c9e0c5b2218c154b62275794b878af7e1457647",
      "created_at" : "2024-01-30T09:46:44Z",
      "diff_hunk" : "@@ -1294,6 +1294,11 @@ static util::Result<CreatedTransactionResult> CreateTransactionInternal(\n         return util::Error{TransactionErrorString(TransactionError::MAX_FEE_EXCEEDED)};\n     }\n \n+    CFeeRate tx_fee_rate = CFeeRate(current_fee, nBytes);\n+    if (tx_fee_rate > wallet.m_max_tx_fee_rate) {\n+        return util::Error{TransactionErrorString(TransactionError::MAX_FEE_EXCEEDED)};",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29278#discussion_r1470885445",
      "id" : 1470885445,
      "line" : 1299,
      "node_id" : "PRRC_kwDOABII585Xq-5F",
      "original_commit_id" : "0c9e0c5b2218c154b62275794b878af7e1457647",
      "original_line" : 1299,
      "original_position" : 6,
      "original_start_line" : null,
      "path" : "src/wallet/spend.cpp",
      "position" : 6,
      "pull_request_review_id" : 1850694919,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29278",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1470885445/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-01-30T09:46:44Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1470885445",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7444140?v=4",
         "events_url" : "https://api.github.com/users/josibake/events{/privacy}",
         "followers_url" : "https://api.github.com/users/josibake/followers",
         "following_url" : "https://api.github.com/users/josibake/following{/other_user}",
         "gists_url" : "https://api.github.com/users/josibake/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/josibake",
         "id" : 7444140,
         "login" : "josibake",
         "node_id" : "MDQ6VXNlcjc0NDQxNDA=",
         "organizations_url" : "https://api.github.com/users/josibake/orgs",
         "received_events_url" : "https://api.github.com/users/josibake/received_events",
         "repos_url" : "https://api.github.com/users/josibake/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/josibake/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/josibake/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/josibake"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29278#discussion_r1470968822"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29278"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1470968822"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Interestingly, in https://github.com/bitcoin/bitcoin/blob/411ba32af21a56efa0a570b6aa8bf8f035410230/src/rpc/mempool.cpp#L89\r\n\r\n`sendrawtransaction` takes a fee_rate argument, which is used to calculate a `max_tx_fee` based on the size of the transaction, and this `max_tx_fee` is passed to `BroadcastTransaction`. This means a user could typo an insane `maxfeerate` when calling `sendrawtransaction` that bypasses the default max tx fee.\r\n\r\nPerhaps it does make more sense to have `BroadcastTransaction` take two arguments, one for `max_tx_fee` and another for `max_tx_fee_rate`, and check them independently. Probably out of scope for this PR, since this is focused on the wallet, but wanted to mention it as a potential follow-up. ",
      "commit_id" : "0c9e0c5b2218c154b62275794b878af7e1457647",
      "created_at" : "2024-01-30T10:28:15Z",
      "diff_hunk" : "@@ -729,6 +729,8 @@ class CWallet final : public WalletStorage, public interfaces::Chain::Notificati\n     /** Absolute maximum transaction fee (in satoshis) used by default for the wallet */\n     CAmount m_default_max_tx_fee{DEFAULT_TRANSACTION_MAXFEE};\n \n+    /** Maximum transaction fee rate (in satoshis) used by default for the wallet */\n+    CAmount m_default_max_tx_fee_rate{node::DEFAULT_MAX_RAW_TX_FEE_RATE.GetFeePerK()};",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29278#discussion_r1470968822",
      "id" : 1470968822,
      "in_reply_to_id" : 1459145558,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585XrTP2",
      "original_commit_id" : "2576efcf689401dcbea85856c74efc64af0c2cb2",
      "original_line" : 733,
      "original_position" : 5,
      "original_start_line" : 732,
      "path" : "src/wallet/wallet.h",
      "position" : null,
      "pull_request_review_id" : 1850821547,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29278",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1470968822/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : "RIGHT",
      "subject_type" : "line",
      "updated_at" : "2024-01-30T10:28:15Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1470968822",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7444140?v=4",
         "events_url" : "https://api.github.com/users/josibake/events{/privacy}",
         "followers_url" : "https://api.github.com/users/josibake/followers",
         "following_url" : "https://api.github.com/users/josibake/following{/other_user}",
         "gists_url" : "https://api.github.com/users/josibake/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/josibake",
         "id" : 7444140,
         "login" : "josibake",
         "node_id" : "MDQ6VXNlcjc0NDQxNDA=",
         "organizations_url" : "https://api.github.com/users/josibake/orgs",
         "received_events_url" : "https://api.github.com/users/josibake/received_events",
         "repos_url" : "https://api.github.com/users/josibake/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/josibake/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/josibake/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/josibake"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29278#discussion_r1472767521"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29278"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1472767521"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Added",
      "commit_id" : "d4dceeafc2292cd050cb10e308d73bc8ef84201a",
      "created_at" : "2024-01-31T12:40:38Z",
      "diff_hunk" : "@@ -1294,6 +1294,11 @@ static util::Result<CreatedTransactionResult> CreateTransactionInternal(\n         return util::Error{TransactionErrorString(TransactionError::MAX_FEE_EXCEEDED)};\n     }\n \n+    CFeeRate tx_fee_rate = CFeeRate(current_fee, nBytes);\n+    if (tx_fee_rate > wallet.m_max_tx_fee_rate) {\n+        return util::Error{TransactionErrorString(TransactionError::MAX_FEE_EXCEEDED)};",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29278#discussion_r1472767521",
      "id" : 1472767521,
      "in_reply_to_id" : 1470885445,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585XyKYh",
      "original_commit_id" : "0c9e0c5b2218c154b62275794b878af7e1457647",
      "original_line" : 1299,
      "original_position" : 6,
      "original_start_line" : null,
      "path" : "src/wallet/spend.cpp",
      "position" : null,
      "pull_request_review_id" : 1853638679,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29278",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1472767521/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-01-31T12:40:38Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1472767521",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/48946461?v=4",
         "events_url" : "https://api.github.com/users/ismaelsadeeq/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ismaelsadeeq/followers",
         "following_url" : "https://api.github.com/users/ismaelsadeeq/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ismaelsadeeq/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ismaelsadeeq",
         "id" : 48946461,
         "login" : "ismaelsadeeq",
         "node_id" : "MDQ6VXNlcjQ4OTQ2NDYx",
         "organizations_url" : "https://api.github.com/users/ismaelsadeeq/orgs",
         "received_events_url" : "https://api.github.com/users/ismaelsadeeq/received_events",
         "repos_url" : "https://api.github.com/users/ismaelsadeeq/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ismaelsadeeq/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ismaelsadeeq/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ismaelsadeeq"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29278#discussion_r1472768478"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29278"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1472768478"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Yes, fixed here and other place I did the same.",
      "commit_id" : "d4dceeafc2292cd050cb10e308d73bc8ef84201a",
      "created_at" : "2024-01-31T12:41:29Z",
      "diff_hunk" : "@@ -136,6 +136,8 @@ static const bool DEFAULT_DISABLE_WALLET = false;\n static const bool DEFAULT_WALLETCROSSCHAIN = false;\n //! -maxtxfee default\n constexpr CAmount DEFAULT_TRANSACTION_MAXFEE{COIN / 10};\n+//! maxfeerate default\n+const CFeeRate DEFAULT_TRANSACTION_MAXFEERATE(CFeeRate((COIN / 10), 1000));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29278#discussion_r1472768478",
      "id" : 1472768478,
      "in_reply_to_id" : 1469296961,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585XyKne",
      "original_commit_id" : "0c9e0c5b2218c154b62275794b878af7e1457647",
      "original_line" : 140,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "src/wallet/wallet.h",
      "position" : null,
      "pull_request_review_id" : 1853640183,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29278",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1472768478/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-01-31T12:41:29Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1472768478",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/48946461?v=4",
         "events_url" : "https://api.github.com/users/ismaelsadeeq/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ismaelsadeeq/followers",
         "following_url" : "https://api.github.com/users/ismaelsadeeq/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ismaelsadeeq/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ismaelsadeeq",
         "id" : 48946461,
         "login" : "ismaelsadeeq",
         "node_id" : "MDQ6VXNlcjQ4OTQ2NDYx",
         "organizations_url" : "https://api.github.com/users/ismaelsadeeq/orgs",
         "received_events_url" : "https://api.github.com/users/ismaelsadeeq/received_events",
         "repos_url" : "https://api.github.com/users/ismaelsadeeq/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ismaelsadeeq/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ismaelsadeeq/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ismaelsadeeq"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29278#discussion_r1472775391"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29278"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1472775391"
         }
      },
      "author_association" : "MEMBER",
      "body" : "> Maybe add tests where you (successfully) configure the node's wallet using -maxfeerate?\r\n\r\nI dont understand what you mean by successfully configure nodes wallet.\r\n\r\nThe test you are commenting on configure node[0] with the `-maxfeerate` option.\r\nCould you clarify your comment, thanks.\r\n\r\n---\r\n>  Similarly, it would be good to test that both maxfee and maxfeerate requirements must be met.\r\n\r\nTheir is a test for `maxtxfee` already, and I added one for `maxfeerate`.\r\nhttps://github.com/bitcoin/bitcoin/blob/11b436a66af3ceaebb0f907878715f331516a0bc/test/functional/wallet_bumpfee.py#L557",
      "commit_id" : "d4dceeafc2292cd050cb10e308d73bc8ef84201a",
      "created_at" : "2024-01-31T12:47:44Z",
      "diff_hunk" : "@@ -184,6 +184,33 @@ def test_send(self, from_wallet, to_wallet=None, amount=None, data=None,\n \n         return res\n \n+    def test_maxfeerate(self):",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29278#discussion_r1472775391",
      "id" : 1472775391,
      "in_reply_to_id" : 1469291356,
      "line" : 187,
      "node_id" : "PRRC_kwDOABII585XyMTf",
      "original_commit_id" : "0c9e0c5b2218c154b62275794b878af7e1457647",
      "original_line" : 187,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "test/functional/wallet_send.py",
      "position" : 4,
      "pull_request_review_id" : 1853651123,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29278",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1472775391/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-01-31T12:47:44Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1472775391",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/48946461?v=4",
         "events_url" : "https://api.github.com/users/ismaelsadeeq/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ismaelsadeeq/followers",
         "following_url" : "https://api.github.com/users/ismaelsadeeq/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ismaelsadeeq/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ismaelsadeeq",
         "id" : 48946461,
         "login" : "ismaelsadeeq",
         "node_id" : "MDQ6VXNlcjQ4OTQ2NDYx",
         "organizations_url" : "https://api.github.com/users/ismaelsadeeq/orgs",
         "received_events_url" : "https://api.github.com/users/ismaelsadeeq/received_events",
         "repos_url" : "https://api.github.com/users/ismaelsadeeq/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ismaelsadeeq/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ismaelsadeeq/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ismaelsadeeq"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29278#discussion_r1472785028"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29278"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1472785028"
         }
      },
      "author_association" : "MEMBER",
      "body" : "`relayMinFee` is relative to the fee rate of the transaction. I believe I did the right thing by removing it and enforcing this check on `-maxfeerate` instead.\r\n\r\nI don't think we should use the base fee value as a quantifier for the fee rate, as transaction sizes differ. \r\nThis is indicated in the issue description #29220.",
      "commit_id" : "d4dceeafc2292cd050cb10e308d73bc8ef84201a",
      "created_at" : "2024-01-31T12:56:08Z",
      "diff_hunk" : "@@ -3058,13 +3058,21 @@ std::shared_ptr<CWallet> CWallet::Create(WalletContext& context, const std::stri\n             warnings.push_back(strprintf(_(\"%s is set very high! Fees this large could be paid on a single transaction.\"), \"-maxtxfee\"));\n         }\n \n-        if (chain && CFeeRate{max_fee.value(), 1000} < chain->relayMinFee()) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29278#discussion_r1472785028",
      "id" : 1472785028,
      "in_reply_to_id" : 1469372132,
      "line" : 3061,
      "node_id" : "PRRC_kwDOABII585XyOqE",
      "original_commit_id" : "677dec10cc5a481db79bf34073d9eb65f5d30aff",
      "original_line" : 3061,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "src/wallet/wallet.cpp",
      "position" : 4,
      "pull_request_review_id" : 1853666735,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29278",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1472785028/reactions"
      },
      "side" : "LEFT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-01-31T12:56:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1472785028",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/48946461?v=4",
         "events_url" : "https://api.github.com/users/ismaelsadeeq/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ismaelsadeeq/followers",
         "following_url" : "https://api.github.com/users/ismaelsadeeq/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ismaelsadeeq/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ismaelsadeeq",
         "id" : 48946461,
         "login" : "ismaelsadeeq",
         "node_id" : "MDQ6VXNlcjQ4OTQ2NDYx",
         "organizations_url" : "https://api.github.com/users/ismaelsadeeq/orgs",
         "received_events_url" : "https://api.github.com/users/ismaelsadeeq/received_events",
         "repos_url" : "https://api.github.com/users/ismaelsadeeq/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ismaelsadeeq/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ismaelsadeeq/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ismaelsadeeq"
      }
   }
]
