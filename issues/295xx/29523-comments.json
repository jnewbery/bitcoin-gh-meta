[
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage\nFor detailed information about the code coverage, see the [test coverage report](https://corecheck.dev/bitcoin/bitcoin/pulls/29523).\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| Concept ACK | [murchandamus](https://github.com/bitcoin/bitcoin/pull/29523#pullrequestreview-1942922925) |\n| Stale ACK | [Eunovo](https://github.com/bitcoin/bitcoin/pull/29523#issuecomment-2037477967) |\n\nIf your review is incorrectly listed, please react with ð to this comment and the bot will ignore it on the next update.\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#10102](https://github.com/bitcoin/bitcoin/pull/10102) (Multiprocess bitcoin by ryanofsky)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.\n",
      "created_at" : "2024-03-01T09:38:40Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29523#issuecomment-1972844180",
      "id" : 1972844180,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/29523",
      "node_id" : "IC_kwDOABII5851lzaU",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1972844180/reactions"
      },
      "updated_at" : "2024-06-11T12:24:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1972844180",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Some C.I jobs are failing, putting in draft while I try to address that.",
      "created_at" : "2024-03-01T10:27:37Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29523#issuecomment-1972928501",
      "id" : 1972928501,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/29523",
      "node_id" : "IC_kwDOABII5851mH_1",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1972928501/reactions"
      },
      "updated_at" : "2024-03-01T10:27:37Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1972928501",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/48946461?v=4",
         "events_url" : "https://api.github.com/users/ismaelsadeeq/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ismaelsadeeq/followers",
         "following_url" : "https://api.github.com/users/ismaelsadeeq/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ismaelsadeeq/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ismaelsadeeq",
         "id" : 48946461,
         "login" : "ismaelsadeeq",
         "node_id" : "MDQ6VXNlcjQ4OTQ2NDYx",
         "organizations_url" : "https://api.github.com/users/ismaelsadeeq/orgs",
         "received_events_url" : "https://api.github.com/users/ismaelsadeeq/received_events",
         "repos_url" : "https://api.github.com/users/ismaelsadeeq/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ismaelsadeeq/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ismaelsadeeq/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ismaelsadeeq"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "~~Note for reviewers: eaf40cea9d31b43b4eb112e561fbadc1911e5732 has been added to ensure the calculation of `max_selection_weight` remains consistent and correct in the next commit 854acd72e99dc9f0924c5f0b5b7a657b39538911~~\r\n```\r\nint64_t` max_selection_weight = coin_selection_params.m_max_tx_weight.value_or(MAX_STANDARD_TX_WEIGHT) - static_cast<int64_t>(coin_selection_params.tx_noinputs_size * WITNESS_SCALE_FACTOR);\r\n```\r\n~~This resolves the failure on the CI when compiling with ASan + LSan + UBSan + integer, without dependencies, USDT.\r\nhttps://cirrus-ci.com/task/6341256662482944~~",
      "created_at" : "2024-03-09T06:40:53Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29523#issuecomment-1986752160",
      "id" : 1986752160,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/29523",
      "node_id" : "IC_kwDOABII5852a26g",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1986752160/reactions"
      },
      "updated_at" : "2024-03-19T12:54:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1986752160",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/48946461?v=4",
         "events_url" : "https://api.github.com/users/ismaelsadeeq/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ismaelsadeeq/followers",
         "following_url" : "https://api.github.com/users/ismaelsadeeq/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ismaelsadeeq/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ismaelsadeeq",
         "id" : 48946461,
         "login" : "ismaelsadeeq",
         "node_id" : "MDQ6VXNlcjQ4OTQ2NDYx",
         "organizations_url" : "https://api.github.com/users/ismaelsadeeq/orgs",
         "received_events_url" : "https://api.github.com/users/ismaelsadeeq/received_events",
         "repos_url" : "https://api.github.com/users/ismaelsadeeq/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ismaelsadeeq/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ismaelsadeeq/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ismaelsadeeq"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29523#discussion_r1528504926"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29523"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1528504926"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "In \"[doc]: update reason for deducing change output weight\" (05373e632500670ff8bd65ed6621a039849886ad):\r\n\r\n_to deduct_ means to subtract, _to deduce_ means to draw a logical conclusion\r\n\r\n```suggestion\r\n    // Deduct change weight because remaining Coin Selection algorithms can create change output.\r\n```\r\n\r\nAlso in the commit message for that PR:\r\n\r\nCoinGrinder will _always_ produce a change output.\r\n\r\n```diff\r\n-`CoinGrinder` also might produce change output, listing all the\r\n+`CoinGrinder` will also produce a change output, listing all the\r\n```",
      "commit_id" : "8e256fe679236710549820ec48ac7c0793fcfd96",
      "created_at" : "2024-03-18T13:11:23Z",
      "diff_hunk" : "@@ -701,7 +701,7 @@ util::Result<SelectionResult> ChooseSelectionResult(interfaces::Chain& chain, co\n         } else append_error(bnb_result);\n     }\n \n-    // As Knapsack and SRD can create change, also deduce change weight.\n+    // Deduce change weight because remaining Coin Selection algorithms can create change output.",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29523#discussion_r1528504926",
      "id" : 1528504926,
      "line" : 704,
      "node_id" : "PRRC_kwDOABII585bGyJe",
      "original_commit_id" : "05373e632500670ff8bd65ed6621a039849886ad",
      "original_line" : 704,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "src/wallet/spend.cpp",
      "position" : 19,
      "pull_request_review_id" : 1942922925,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29523",
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1528504926/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-03-18T14:15:23Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1528504926",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/4060799?v=4",
         "events_url" : "https://api.github.com/users/murchandamus/events{/privacy}",
         "followers_url" : "https://api.github.com/users/murchandamus/followers",
         "following_url" : "https://api.github.com/users/murchandamus/following{/other_user}",
         "gists_url" : "https://api.github.com/users/murchandamus/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/murchandamus",
         "id" : 4060799,
         "login" : "murchandamus",
         "node_id" : "MDQ6VXNlcjQwNjA3OTk=",
         "organizations_url" : "https://api.github.com/users/murchandamus/orgs",
         "received_events_url" : "https://api.github.com/users/murchandamus/received_events",
         "repos_url" : "https://api.github.com/users/murchandamus/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/murchandamus/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/murchandamus/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/murchandamus"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29523#discussion_r1528529931"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29523"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1528529931"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "In \"[wallet]: change `max_selection_weight` to `int64_t`\" (eaf40cea9d31b43b4eb112e561fbadc1911e5732):\r\n\r\nThis commit surprises me. I guess being explicit is better than being implicit, so I would understand using `int32_t` instead of `int`, but I donât understand the motivation to switch to an `int64_t`. `int` in Bitcoin Core is always a signed 32-bit integer, because [Bitcoin Core only supports platforms where `int` is exactly 32 bits](https://github.com/bitcoin/bitcoin/blob/v26.0/src/compat/assumptions.h#L44). Therefore, the maximum value for `int` is 2<sup>31</sup>, i.e. a bit more than 2 billion. Since the blockweight is limited to 4 _million_ bytes, itâs unclear to me why we would need more than 32 bits for  `max_selection_weight`. What am I missing here?",
      "commit_id" : "8e256fe679236710549820ec48ac7c0793fcfd96",
      "created_at" : "2024-03-18T13:29:00Z",
      "diff_hunk" : "@@ -84,19 +84,19 @@ struct {\n  *        bound of the range.\n  * @param const CAmount& cost_of_change This is the cost of creating and spending a change output.\n  *        This plus selection_target is the upper bound of the range.\n- * @param int max_selection_weight The maximum allowed weight for a selection result to be valid.\n+ * @param int64_t max_selection_weight The maximum allowed weight for a selection result to be valid.",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29523#discussion_r1528529931",
      "id" : 1528529931,
      "line" : 87,
      "node_id" : "PRRC_kwDOABII585bG4QL",
      "original_commit_id" : "eaf40cea9d31b43b4eb112e561fbadc1911e5732",
      "original_line" : 87,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "src/wallet/coinselection.cpp",
      "position" : 5,
      "pull_request_review_id" : 1942922925,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29523",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1528529931/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-03-18T14:15:23Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1528529931",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/4060799?v=4",
         "events_url" : "https://api.github.com/users/murchandamus/events{/privacy}",
         "followers_url" : "https://api.github.com/users/murchandamus/followers",
         "following_url" : "https://api.github.com/users/murchandamus/following{/other_user}",
         "gists_url" : "https://api.github.com/users/murchandamus/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/murchandamus",
         "id" : 4060799,
         "login" : "murchandamus",
         "node_id" : "MDQ6VXNlcjQwNjA3OTk=",
         "organizations_url" : "https://api.github.com/users/murchandamus/orgs",
         "received_events_url" : "https://api.github.com/users/murchandamus/received_events",
         "repos_url" : "https://api.github.com/users/murchandamus/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/murchandamus/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/murchandamus/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/murchandamus"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29523#discussion_r1528610398"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29523"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1528610398"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "In \"[wallet, rpc]: add `max_tx_weight` to tx funding options\" (854acd72e99dc9f0924c5f0b5b7a657b39538911):\r\n\r\nWeight, not size:\r\n```suggestion\r\n     /** The maximum weight for this transaction */\r\n```",
      "commit_id" : "8e256fe679236710549820ec48ac7c0793fcfd96",
      "created_at" : "2024-03-18T13:53:54Z",
      "diff_hunk" : "@@ -174,10 +174,15 @@ struct CoinSelectionParams {\n      * 1) Received from other wallets, 2) replacing other txs, 3) that have been replaced.\n      */\n     bool m_include_unsafe_inputs = false;\n+    /**\n+     * The maximally sized transaction we are willing to make.\n+     */",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29523#discussion_r1528610398",
      "id" : 1528610398,
      "line" : 179,
      "node_id" : "PRRC_kwDOABII585bHL5e",
      "original_commit_id" : "854acd72e99dc9f0924c5f0b5b7a657b39538911",
      "original_line" : 179,
      "original_position" : 6,
      "original_start_line" : 177,
      "path" : "src/wallet/coinselection.h",
      "position" : 24,
      "pull_request_review_id" : 1942922925,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29523",
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1528610398/reactions"
      },
      "side" : "RIGHT",
      "start_line" : 177,
      "start_side" : "RIGHT",
      "subject_type" : "line",
      "updated_at" : "2024-03-18T14:15:23Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1528610398",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/4060799?v=4",
         "events_url" : "https://api.github.com/users/murchandamus/events{/privacy}",
         "followers_url" : "https://api.github.com/users/murchandamus/followers",
         "following_url" : "https://api.github.com/users/murchandamus/following{/other_user}",
         "gists_url" : "https://api.github.com/users/murchandamus/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/murchandamus",
         "id" : 4060799,
         "login" : "murchandamus",
         "node_id" : "MDQ6VXNlcjQwNjA3OTk=",
         "organizations_url" : "https://api.github.com/users/murchandamus/orgs",
         "received_events_url" : "https://api.github.com/users/murchandamus/received_events",
         "repos_url" : "https://api.github.com/users/murchandamus/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/murchandamus/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/murchandamus/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/murchandamus"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29523#discussion_r1528621409"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29523"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1528621409"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "In \"[wallet, rpc]: add `max_tx_weight` to tx funding options\" (854acd72e99dc9f0924c5f0b5b7a657b39538911):\r\n\r\nIâm a bit surprised by this sudden type change in a commit whose commit message doesnât mention it. While I agree in principal that `size_t` is an inappropriate type for variables storing `vsize` or `weight`, could you please explain your motivation to change the types, and especially in this context? If you are retyping unrelated variables, I think that should perhaps  be a separate commit. If you are changing the types of `change_output_size` and `tx_noinputs_size`, why not also `change_spend_size`?\r\nPerhaps if we are getting big into the business of changing the types of various transaction size, vsize and weight variables, we should perhaps consider introducing explicit types for weight, size, and vsize to prevent people accidentally mistaking them for the same type. On the other hand, that feels like the sort of change that will never propagate to the entire codebase, so Iâm not sure itâs a good idea to even start.",
      "commit_id" : "8e256fe679236710549820ec48ac7c0793fcfd96",
      "created_at" : "2024-03-18T13:59:54Z",
      "diff_hunk" : "@@ -174,10 +174,15 @@ struct CoinSelectionParams {\n      * 1) Received from other wallets, 2) replacing other txs, 3) that have been replaced.\n      */\n     bool m_include_unsafe_inputs = false;\n+    /**\n+     * The maximally sized transaction we are willing to make.\n+     */\n+    std::optional<int64_t> m_max_tx_weight{std::nullopt};\n \n-    CoinSelectionParams(FastRandomContext& rng_fast, size_t change_output_size, size_t change_spend_size,\n+    CoinSelectionParams(FastRandomContext& rng_fast, int change_output_size, size_t change_spend_size,",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29523#discussion_r1528621409",
      "id" : 1528621409,
      "line" : 182,
      "node_id" : "PRRC_kwDOABII585bHOlh",
      "original_commit_id" : "854acd72e99dc9f0924c5f0b5b7a657b39538911",
      "original_line" : 182,
      "original_position" : 10,
      "original_start_line" : null,
      "path" : "src/wallet/coinselection.h",
      "position" : 28,
      "pull_request_review_id" : 1942922925,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29523",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1528621409/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-03-18T14:15:23Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1528621409",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/4060799?v=4",
         "events_url" : "https://api.github.com/users/murchandamus/events{/privacy}",
         "followers_url" : "https://api.github.com/users/murchandamus/followers",
         "following_url" : "https://api.github.com/users/murchandamus/following{/other_user}",
         "gists_url" : "https://api.github.com/users/murchandamus/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/murchandamus",
         "id" : 4060799,
         "login" : "murchandamus",
         "node_id" : "MDQ6VXNlcjQwNjA3OTk=",
         "organizations_url" : "https://api.github.com/users/murchandamus/orgs",
         "received_events_url" : "https://api.github.com/users/murchandamus/received_events",
         "repos_url" : "https://api.github.com/users/murchandamus/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/murchandamus/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/murchandamus/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/murchandamus"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29523#discussion_r1528649863"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29523"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1528649863"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "In \"[rpc]: update `sendall` RPC to return the resulting tx weight\" (8e256fe679236710549820ec48ac7c0793fcfd96):\r\n\r\n\"bytes\" is not a unit of weight. I would expect that this is returning the weight in weight units or the vsize in vbytes.",
      "commit_id" : "8e256fe679236710549820ec48ac7c0793fcfd96",
      "created_at" : "2024-03-18T14:14:53Z",
      "diff_hunk" : "@@ -1374,6 +1374,7 @@ RPCHelpMan sendall()\n             RPCResult::Type::OBJ, \"\", \"\",\n                 {\n                     {RPCResult::Type::BOOL, \"complete\", \"If the transaction has a complete set of signatures\"},\n+                    {RPCResult::Type::NUM, \"weight\", \"The resulting transaction weight in bytes\"},",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29523#discussion_r1528649863",
      "id" : 1528649863,
      "line" : 1377,
      "node_id" : "PRRC_kwDOABII585bHViH",
      "original_commit_id" : "8e256fe679236710549820ec48ac7c0793fcfd96",
      "original_line" : 1377,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "src/wallet/rpc/spend.cpp",
      "position" : 4,
      "pull_request_review_id" : 1942922925,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29523",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1528649863/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-03-18T14:15:23Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1528649863",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/4060799?v=4",
         "events_url" : "https://api.github.com/users/murchandamus/events{/privacy}",
         "followers_url" : "https://api.github.com/users/murchandamus/followers",
         "following_url" : "https://api.github.com/users/murchandamus/following{/other_user}",
         "gists_url" : "https://api.github.com/users/murchandamus/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/murchandamus",
         "id" : 4060799,
         "login" : "murchandamus",
         "node_id" : "MDQ6VXNlcjQwNjA3OTk=",
         "organizations_url" : "https://api.github.com/users/murchandamus/orgs",
         "received_events_url" : "https://api.github.com/users/murchandamus/received_events",
         "repos_url" : "https://api.github.com/users/murchandamus/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/murchandamus/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/murchandamus/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/murchandamus"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29523#discussion_r1528745048"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29523"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1528745048"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Thanks for your review @murchandamus \r\n> Perhaps if we are getting big into the business of changing the types of various transaction size, vsize and weight variables, we should perhaps consider introducing explicit types for weight, size, and vsize to prevent people accidentally mistaking them for the same type.\r\n\r\nI agree with this suggestion and have same concern previously here https://github.com/bitcoin/bitcoin/pull/29242#discussion_r1469871777 should make the code cleaner\r\n\r\nSorry for not explaining the rationale behind this in the commit messages, I will try and explain why I did the change below\r\n\r\n\r\nOn master  we have\r\n```cpp\r\n    int max_inputs_weight = MAX_STANDARD_TX_WEIGHT - (coin_selection_params.tx_noinputs_size * WITNESS_SCALE_FACTOR);\r\n    \r\n\r\n   .......\r\n    max_inputs_weight -= (coin_selection_params.change_output_size * WITNESS_SCALE_FACTOR);\r\n\r\n```\r\n\r\nAfter this PR maximum transaction weight can be configured by users, so we now subtract from user provided maximum weight or use the default if not given.\r\n```cpp\r\nint max_selection_weight = coin_selection_params.m_max_tx_weight.value_or(MAX_STANDARD_TX\r\n_WEIGHT) - coin_selection_params.tx_noinputs_size * WITNESS_SCALE_FACTOR;\r\n```\r\n \r\n `m_max_tx_weight` is `int`,` tx_noinputs_size` and `change_output_size`  are both `size_t`.\r\ngiven that [Bitcoin Core only supports platforms where int is exactly 32 bits](https://github.com/bitcoin/bitcoin/blob/v26.0/src/compat/assumptions.h#L44)\r\n For signed integers (int), it ranges from -2^(31) to (2^(31)) - 1.\r\n For unsigned integers (unsigned int), it ranges from 0 to (2^(32)) - 1.\r\n \r\nThe issue arises when  after compiling with \"ASan + LSan + UBSan + integer, without dependencies, USDT\" and running the functional test.\r\n\r\nFrom  854acd72e9 we allow passing 0 weight  and test for that in the functional test,  results of subtracting `coin_selection_params.tx_noinputs_size * WITNESS_SCALE_FACTOR` from 0 causes  `max_selection_weight`  to have some positive value instead of negative. hence the test fails see  https://cirrus-ci.com/task/6341256662482944, This is reproducible locally.\r\n\r\nThats why I changed  `change_output_size`,  and `tx_noinputs_size`from `size_t` to `int64_t` and also use same datatype for `m_max_tx_weight` which works fine.\r\n\r\n\r\n\r\n```cpp\r\nint64_t max_selection_weight = coin_selection_params.m_max_tx_weight.value_or(MAX_STANDARD_TX\r\n_WEIGHT) - static_cast<int64_t>(coin_selection_params.tx_noinputs_size * WITNESS_SCALE_FACTOR);\r\n```\r\n\r\nBut since [Bitcoin Core only supports platforms where int is exactly 32 bits](https://github.com/bitcoin/bitcoin/blob/v26.0/src/compat/assumptions.h#L44) I think using int for `change_output_size`,  and `tx_noinputs_size` should work fine?",
      "commit_id" : "cddf4e92840ed62951d377941d1aa9d04057e16c",
      "created_at" : "2024-03-18T15:07:26Z",
      "diff_hunk" : "@@ -174,10 +174,15 @@ struct CoinSelectionParams {\n      * 1) Received from other wallets, 2) replacing other txs, 3) that have been replaced.\n      */\n     bool m_include_unsafe_inputs = false;\n+    /**\n+     * The maximally sized transaction we are willing to make.\n+     */\n+    std::optional<int64_t> m_max_tx_weight{std::nullopt};\n \n-    CoinSelectionParams(FastRandomContext& rng_fast, size_t change_output_size, size_t change_spend_size,\n+    CoinSelectionParams(FastRandomContext& rng_fast, int change_output_size, size_t change_spend_size,",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29523#discussion_r1528745048",
      "id" : 1528745048,
      "in_reply_to_id" : 1528621409,
      "line" : 180,
      "node_id" : "PRRC_kwDOABII585bHsxY",
      "original_commit_id" : "854acd72e99dc9f0924c5f0b5b7a657b39538911",
      "original_line" : 180,
      "original_position" : 10,
      "original_start_line" : null,
      "path" : "src/wallet/coinselection.h",
      "position" : 8,
      "pull_request_review_id" : 1943369508,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29523",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1528745048/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-03-19T12:12:53Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1528745048",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/48946461?v=4",
         "events_url" : "https://api.github.com/users/ismaelsadeeq/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ismaelsadeeq/followers",
         "following_url" : "https://api.github.com/users/ismaelsadeeq/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ismaelsadeeq/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ismaelsadeeq",
         "id" : 48946461,
         "login" : "ismaelsadeeq",
         "node_id" : "MDQ6VXNlcjQ4OTQ2NDYx",
         "organizations_url" : "https://api.github.com/users/ismaelsadeeq/orgs",
         "received_events_url" : "https://api.github.com/users/ismaelsadeeq/received_events",
         "repos_url" : "https://api.github.com/users/ismaelsadeeq/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ismaelsadeeq/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ismaelsadeeq/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ismaelsadeeq"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29523#discussion_r1528748451"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29523"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1528748451"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Thanks @murchandamus for the link and your review comment, I will look into this and respond as soon as I can.",
      "commit_id" : "8e256fe679236710549820ec48ac7c0793fcfd96",
      "created_at" : "2024-03-18T15:08:51Z",
      "diff_hunk" : "@@ -84,19 +84,19 @@ struct {\n  *        bound of the range.\n  * @param const CAmount& cost_of_change This is the cost of creating and spending a change output.\n  *        This plus selection_target is the upper bound of the range.\n- * @param int max_selection_weight The maximum allowed weight for a selection result to be valid.\n+ * @param int64_t max_selection_weight The maximum allowed weight for a selection result to be valid.",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29523#discussion_r1528748451",
      "id" : 1528748451,
      "in_reply_to_id" : 1528529931,
      "line" : 87,
      "node_id" : "PRRC_kwDOABII585bHtmj",
      "original_commit_id" : "eaf40cea9d31b43b4eb112e561fbadc1911e5732",
      "original_line" : 87,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "src/wallet/coinselection.cpp",
      "position" : 5,
      "pull_request_review_id" : 1943374840,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29523",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1528748451/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-03-18T15:08:51Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1528748451",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/48946461?v=4",
         "events_url" : "https://api.github.com/users/ismaelsadeeq/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ismaelsadeeq/followers",
         "following_url" : "https://api.github.com/users/ismaelsadeeq/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ismaelsadeeq/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ismaelsadeeq",
         "id" : 48946461,
         "login" : "ismaelsadeeq",
         "node_id" : "MDQ6VXNlcjQ4OTQ2NDYx",
         "organizations_url" : "https://api.github.com/users/ismaelsadeeq/orgs",
         "received_events_url" : "https://api.github.com/users/ismaelsadeeq/received_events",
         "repos_url" : "https://api.github.com/users/ismaelsadeeq/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ismaelsadeeq/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ismaelsadeeq/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ismaelsadeeq"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29523#discussion_r1529019669"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29523"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1529019669"
         }
      },
      "author_association" : "MEMBER",
      "body" : "> From https://github.com/bitcoin/bitcoin/commit/854acd72e99dc9f0924c5f0b5b7a657b39538911 we allow passing 0 weight and test for that in the functional test.\r\n\r\nAfter thinking about this more, it does not make sense to allow passing passing 0 maximum transaction weight, should instead be between minimum transaction weight possible and `MAX_STANDARD_TX_WEIGHT`.\r\nI will update to this.",
      "commit_id" : "8e256fe679236710549820ec48ac7c0793fcfd96",
      "created_at" : "2024-03-18T18:00:48Z",
      "diff_hunk" : "@@ -174,10 +174,15 @@ struct CoinSelectionParams {\n      * 1) Received from other wallets, 2) replacing other txs, 3) that have been replaced.\n      */\n     bool m_include_unsafe_inputs = false;\n+    /**\n+     * The maximally sized transaction we are willing to make.\n+     */\n+    std::optional<int64_t> m_max_tx_weight{std::nullopt};\n \n-    CoinSelectionParams(FastRandomContext& rng_fast, size_t change_output_size, size_t change_spend_size,\n+    CoinSelectionParams(FastRandomContext& rng_fast, int change_output_size, size_t change_spend_size,",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29523#discussion_r1529019669",
      "id" : 1529019669,
      "in_reply_to_id" : 1528621409,
      "line" : 182,
      "node_id" : "PRRC_kwDOABII585bIv0V",
      "original_commit_id" : "854acd72e99dc9f0924c5f0b5b7a657b39538911",
      "original_line" : 182,
      "original_position" : 10,
      "original_start_line" : null,
      "path" : "src/wallet/coinselection.h",
      "position" : 28,
      "pull_request_review_id" : 1943815291,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29523",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1529019669/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-03-18T18:02:49Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1529019669",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/48946461?v=4",
         "events_url" : "https://api.github.com/users/ismaelsadeeq/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ismaelsadeeq/followers",
         "following_url" : "https://api.github.com/users/ismaelsadeeq/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ismaelsadeeq/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ismaelsadeeq",
         "id" : 48946461,
         "login" : "ismaelsadeeq",
         "node_id" : "MDQ6VXNlcjQ4OTQ2NDYx",
         "organizations_url" : "https://api.github.com/users/ismaelsadeeq/orgs",
         "received_events_url" : "https://api.github.com/users/ismaelsadeeq/received_events",
         "repos_url" : "https://api.github.com/users/ismaelsadeeq/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ismaelsadeeq/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ismaelsadeeq/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ismaelsadeeq"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29523#discussion_r1530280260"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29523"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1530280260"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Fixed thank you!",
      "commit_id" : "cddf4e92840ed62951d377941d1aa9d04057e16c",
      "created_at" : "2024-03-19T12:37:59Z",
      "diff_hunk" : "@@ -701,7 +701,7 @@ util::Result<SelectionResult> ChooseSelectionResult(interfaces::Chain& chain, co\n         } else append_error(bnb_result);\n     }\n \n-    // As Knapsack and SRD can create change, also deduce change weight.\n+    // Deduce change weight because remaining Coin Selection algorithms can create change output.",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29523#discussion_r1530280260",
      "id" : 1530280260,
      "in_reply_to_id" : 1528504926,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585bNjlE",
      "original_commit_id" : "05373e632500670ff8bd65ed6621a039849886ad",
      "original_line" : 704,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "src/wallet/spend.cpp",
      "position" : null,
      "pull_request_review_id" : 1946087963,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29523",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1530280260/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-03-19T12:37:59Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1530280260",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/48946461?v=4",
         "events_url" : "https://api.github.com/users/ismaelsadeeq/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ismaelsadeeq/followers",
         "following_url" : "https://api.github.com/users/ismaelsadeeq/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ismaelsadeeq/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ismaelsadeeq",
         "id" : 48946461,
         "login" : "ismaelsadeeq",
         "node_id" : "MDQ6VXNlcjQ4OTQ2NDYx",
         "organizations_url" : "https://api.github.com/users/ismaelsadeeq/orgs",
         "received_events_url" : "https://api.github.com/users/ismaelsadeeq/received_events",
         "repos_url" : "https://api.github.com/users/ismaelsadeeq/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ismaelsadeeq/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ismaelsadeeq/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ismaelsadeeq"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29523#discussion_r1530280723"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29523"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1530280723"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Fixed",
      "commit_id" : "cddf4e92840ed62951d377941d1aa9d04057e16c",
      "created_at" : "2024-03-19T12:38:13Z",
      "diff_hunk" : "@@ -174,10 +174,15 @@ struct CoinSelectionParams {\n      * 1) Received from other wallets, 2) replacing other txs, 3) that have been replaced.\n      */\n     bool m_include_unsafe_inputs = false;\n+    /**\n+     * The maximally sized transaction we are willing to make.\n+     */",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29523#discussion_r1530280723",
      "id" : 1530280723,
      "in_reply_to_id" : 1528610398,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585bNjsT",
      "original_commit_id" : "854acd72e99dc9f0924c5f0b5b7a657b39538911",
      "original_line" : 179,
      "original_position" : 6,
      "original_start_line" : 177,
      "path" : "src/wallet/coinselection.h",
      "position" : null,
      "pull_request_review_id" : 1946088515,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29523",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1530280723/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : "RIGHT",
      "subject_type" : "line",
      "updated_at" : "2024-03-19T12:38:14Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1530280723",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/48946461?v=4",
         "events_url" : "https://api.github.com/users/ismaelsadeeq/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ismaelsadeeq/followers",
         "following_url" : "https://api.github.com/users/ismaelsadeeq/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ismaelsadeeq/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ismaelsadeeq",
         "id" : 48946461,
         "login" : "ismaelsadeeq",
         "node_id" : "MDQ6VXNlcjQ4OTQ2NDYx",
         "organizations_url" : "https://api.github.com/users/ismaelsadeeq/orgs",
         "received_events_url" : "https://api.github.com/users/ismaelsadeeq/received_events",
         "repos_url" : "https://api.github.com/users/ismaelsadeeq/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ismaelsadeeq/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ismaelsadeeq/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ismaelsadeeq"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29523#discussion_r1530281835"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29523"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1530281835"
         }
      },
      "author_association" : "MEMBER",
      "body" : "changed to \"The resulting transaction weight in weight units\"",
      "commit_id" : "53ee67de7e388703cb672e67ffaecdde53eb01de",
      "created_at" : "2024-03-19T12:38:51Z",
      "diff_hunk" : "@@ -1374,6 +1374,7 @@ RPCHelpMan sendall()\n             RPCResult::Type::OBJ, \"\", \"\",\n                 {\n                     {RPCResult::Type::BOOL, \"complete\", \"If the transaction has a complete set of signatures\"},\n+                    {RPCResult::Type::NUM, \"weight\", \"The resulting transaction weight in bytes\"},",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29523#discussion_r1530281835",
      "id" : 1530281835,
      "in_reply_to_id" : 1528649863,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585bNj9r",
      "original_commit_id" : "8e256fe679236710549820ec48ac7c0793fcfd96",
      "original_line" : 1377,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "src/wallet/rpc/spend.cpp",
      "position" : null,
      "pull_request_review_id" : 1946089827,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29523",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1530281835/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-03-21T15:28:18Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1530281835",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/48946461?v=4",
         "events_url" : "https://api.github.com/users/ismaelsadeeq/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ismaelsadeeq/followers",
         "following_url" : "https://api.github.com/users/ismaelsadeeq/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ismaelsadeeq/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ismaelsadeeq",
         "id" : 48946461,
         "login" : "ismaelsadeeq",
         "node_id" : "MDQ6VXNlcjQ4OTQ2NDYx",
         "organizations_url" : "https://api.github.com/users/ismaelsadeeq/orgs",
         "received_events_url" : "https://api.github.com/users/ismaelsadeeq/received_events",
         "repos_url" : "https://api.github.com/users/ismaelsadeeq/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ismaelsadeeq/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ismaelsadeeq/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ismaelsadeeq"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29523#discussion_r1530290578"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29523"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1530290578"
         }
      },
      "author_association" : "MEMBER",
      "body" : "You are right `int` is enough, I switched back to the status quo.\r\n\r\nThanks.",
      "commit_id" : "cddf4e92840ed62951d377941d1aa9d04057e16c",
      "created_at" : "2024-03-19T12:43:51Z",
      "diff_hunk" : "@@ -84,19 +84,19 @@ struct {\n  *        bound of the range.\n  * @param const CAmount& cost_of_change This is the cost of creating and spending a change output.\n  *        This plus selection_target is the upper bound of the range.\n- * @param int max_selection_weight The maximum allowed weight for a selection result to be valid.\n+ * @param int64_t max_selection_weight The maximum allowed weight for a selection result to be valid.",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29523#discussion_r1530290578",
      "id" : 1530290578,
      "in_reply_to_id" : 1528529931,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585bNmGS",
      "original_commit_id" : "eaf40cea9d31b43b4eb112e561fbadc1911e5732",
      "original_line" : 87,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "src/wallet/coinselection.cpp",
      "position" : null,
      "pull_request_review_id" : 1946100490,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29523",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1530290578/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-03-19T12:43:51Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1530290578",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/48946461?v=4",
         "events_url" : "https://api.github.com/users/ismaelsadeeq/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ismaelsadeeq/followers",
         "following_url" : "https://api.github.com/users/ismaelsadeeq/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ismaelsadeeq/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ismaelsadeeq",
         "id" : 48946461,
         "login" : "ismaelsadeeq",
         "node_id" : "MDQ6VXNlcjQ4OTQ2NDYx",
         "organizations_url" : "https://api.github.com/users/ismaelsadeeq/orgs",
         "received_events_url" : "https://api.github.com/users/ismaelsadeeq/received_events",
         "repos_url" : "https://api.github.com/users/ismaelsadeeq/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ismaelsadeeq/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ismaelsadeeq/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ismaelsadeeq"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29523#discussion_r1530304472"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29523"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1530304472"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I switched back to status quo, and prevent users from passing `max_tx_weight` below `MIN_STANDARD_TX_NONWITNESS_SIZE * WITNESS_SCALE_FACTOR`",
      "commit_id" : "cddf4e92840ed62951d377941d1aa9d04057e16c",
      "created_at" : "2024-03-19T12:50:35Z",
      "diff_hunk" : "@@ -174,10 +174,15 @@ struct CoinSelectionParams {\n      * 1) Received from other wallets, 2) replacing other txs, 3) that have been replaced.\n      */\n     bool m_include_unsafe_inputs = false;\n+    /**\n+     * The maximally sized transaction we are willing to make.\n+     */\n+    std::optional<int64_t> m_max_tx_weight{std::nullopt};\n \n-    CoinSelectionParams(FastRandomContext& rng_fast, size_t change_output_size, size_t change_spend_size,\n+    CoinSelectionParams(FastRandomContext& rng_fast, int change_output_size, size_t change_spend_size,",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29523#discussion_r1530304472",
      "id" : 1530304472,
      "in_reply_to_id" : 1528621409,
      "line" : 180,
      "node_id" : "PRRC_kwDOABII585bNpfY",
      "original_commit_id" : "854acd72e99dc9f0924c5f0b5b7a657b39538911",
      "original_line" : 180,
      "original_position" : 10,
      "original_start_line" : null,
      "path" : "src/wallet/coinselection.h",
      "position" : 8,
      "pull_request_review_id" : 1946118716,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29523",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1530304472/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-03-19T12:50:35Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1530304472",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/48946461?v=4",
         "events_url" : "https://api.github.com/users/ismaelsadeeq/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ismaelsadeeq/followers",
         "following_url" : "https://api.github.com/users/ismaelsadeeq/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ismaelsadeeq/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ismaelsadeeq",
         "id" : 48946461,
         "login" : "ismaelsadeeq",
         "node_id" : "MDQ6VXNlcjQ4OTQ2NDYx",
         "organizations_url" : "https://api.github.com/users/ismaelsadeeq/orgs",
         "received_events_url" : "https://api.github.com/users/ismaelsadeeq/received_events",
         "repos_url" : "https://api.github.com/users/ismaelsadeeq/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ismaelsadeeq/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ismaelsadeeq/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ismaelsadeeq"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29523#discussion_r1532374066"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29523"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1532374066"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "> But since [Bitcoin Core only supports platforms where int is exactly 32 bits](https://github.com/bitcoin/bitcoin/blob/v26.0/src/compat/assumptions.h#L44) I think using int for `change_output_size`, and `tx_noinputs_size` should work fine?\r\n\r\n[â¦]\r\n\r\n> I switched back to status quo, and prevent users from passing `max_tx_weight` below `MIN_STANDARD_TX_NONWITNESS_SIZE * WITNESS_SCALE_FACTOR`\r\n\r\nI think we may have crossed some wires here. Thanks for the explanation, that was very helpful. I still agree that `size_t` is the _wrong_ type for `change_output_size` and `tx_noinputs_size`. I would support you taking the opportunity because `m_max_tx_weight` is `int` to also change those two to `int`, perhaps even take `change_spend_size` along for that. I just think that it might be better to make it a separate commit and that it should be explained in the commit message.",
      "commit_id" : "cddf4e92840ed62951d377941d1aa9d04057e16c",
      "created_at" : "2024-03-20T16:06:19Z",
      "diff_hunk" : "@@ -174,10 +174,15 @@ struct CoinSelectionParams {\n      * 1) Received from other wallets, 2) replacing other txs, 3) that have been replaced.\n      */\n     bool m_include_unsafe_inputs = false;\n+    /**\n+     * The maximally sized transaction we are willing to make.\n+     */\n+    std::optional<int64_t> m_max_tx_weight{std::nullopt};\n \n-    CoinSelectionParams(FastRandomContext& rng_fast, size_t change_output_size, size_t change_spend_size,\n+    CoinSelectionParams(FastRandomContext& rng_fast, int change_output_size, size_t change_spend_size,",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29523#discussion_r1532374066",
      "id" : 1532374066,
      "in_reply_to_id" : 1528621409,
      "line" : 180,
      "node_id" : "PRRC_kwDOABII585bViwy",
      "original_commit_id" : "854acd72e99dc9f0924c5f0b5b7a657b39538911",
      "original_line" : 180,
      "original_position" : 10,
      "original_start_line" : null,
      "path" : "src/wallet/coinselection.h",
      "position" : 8,
      "pull_request_review_id" : 1949364050,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29523",
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1532374066/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-03-20T16:07:12Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1532374066",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/4060799?v=4",
         "events_url" : "https://api.github.com/users/murchandamus/events{/privacy}",
         "followers_url" : "https://api.github.com/users/murchandamus/followers",
         "following_url" : "https://api.github.com/users/murchandamus/following{/other_user}",
         "gists_url" : "https://api.github.com/users/murchandamus/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/murchandamus",
         "id" : 4060799,
         "login" : "murchandamus",
         "node_id" : "MDQ6VXNlcjQwNjA3OTk=",
         "organizations_url" : "https://api.github.com/users/murchandamus/orgs",
         "received_events_url" : "https://api.github.com/users/murchandamus/received_events",
         "repos_url" : "https://api.github.com/users/murchandamus/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/murchandamus/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/murchandamus/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/murchandamus"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29523#discussion_r1535452473"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29523"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1535452473"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I Added a commit that changed them to `int` :)",
      "commit_id" : "53ee67de7e388703cb672e67ffaecdde53eb01de",
      "created_at" : "2024-03-22T11:45:08Z",
      "diff_hunk" : "@@ -174,10 +174,15 @@ struct CoinSelectionParams {\n      * 1) Received from other wallets, 2) replacing other txs, 3) that have been replaced.\n      */\n     bool m_include_unsafe_inputs = false;\n+    /**\n+     * The maximally sized transaction we are willing to make.\n+     */\n+    std::optional<int64_t> m_max_tx_weight{std::nullopt};\n \n-    CoinSelectionParams(FastRandomContext& rng_fast, size_t change_output_size, size_t change_spend_size,\n+    CoinSelectionParams(FastRandomContext& rng_fast, int change_output_size, size_t change_spend_size,",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29523#discussion_r1535452473",
      "id" : 1535452473,
      "in_reply_to_id" : 1528621409,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585bhSU5",
      "original_commit_id" : "854acd72e99dc9f0924c5f0b5b7a657b39538911",
      "original_line" : 180,
      "original_position" : 10,
      "original_start_line" : null,
      "path" : "src/wallet/coinselection.h",
      "position" : null,
      "pull_request_review_id" : 1954594398,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29523",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1535452473/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-03-22T11:45:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1535452473",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/48946461?v=4",
         "events_url" : "https://api.github.com/users/ismaelsadeeq/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ismaelsadeeq/followers",
         "following_url" : "https://api.github.com/users/ismaelsadeeq/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ismaelsadeeq/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ismaelsadeeq",
         "id" : 48946461,
         "login" : "ismaelsadeeq",
         "node_id" : "MDQ6VXNlcjQ4OTQ2NDYx",
         "organizations_url" : "https://api.github.com/users/ismaelsadeeq/orgs",
         "received_events_url" : "https://api.github.com/users/ismaelsadeeq/received_events",
         "repos_url" : "https://api.github.com/users/ismaelsadeeq/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ismaelsadeeq/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ismaelsadeeq/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ismaelsadeeq"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29523#discussion_r1535461018"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29523"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1535461018"
         }
      },
      "author_association" : "MEMBER",
      "body" : "`change_spend_size` is already an int.",
      "commit_id" : "53ee67de7e388703cb672e67ffaecdde53eb01de",
      "created_at" : "2024-03-22T11:54:08Z",
      "diff_hunk" : "@@ -1050,7 +1050,7 @@ static util::Result<CreatedTransactionResult> CreateTransactionInternal(\n     if (change_spend_size == -1) {\n         coin_selection_params.change_spend_size = DUMMY_NESTED_P2WPKH_INPUT_SIZE;\n     } else {\n-        coin_selection_params.change_spend_size = (size_t)change_spend_size;\n+        coin_selection_params.change_spend_size = (int)change_spend_size;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29523#discussion_r1535461018",
      "id" : 1535461018,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585bhUaa",
      "original_commit_id" : "1ae0261524d01230979e6df91a5917e389a6a419",
      "original_line" : 1053,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "src/wallet/spend.cpp",
      "position" : null,
      "pull_request_review_id" : 1954608817,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29523",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1535461018/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-03-22T11:54:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1535461018",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5377650?v=4",
         "events_url" : "https://api.github.com/users/furszy/events{/privacy}",
         "followers_url" : "https://api.github.com/users/furszy/followers",
         "following_url" : "https://api.github.com/users/furszy/following{/other_user}",
         "gists_url" : "https://api.github.com/users/furszy/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/furszy",
         "id" : 5377650,
         "login" : "furszy",
         "node_id" : "MDQ6VXNlcjUzNzc2NTA=",
         "organizations_url" : "https://api.github.com/users/furszy/orgs",
         "received_events_url" : "https://api.github.com/users/furszy/received_events",
         "repos_url" : "https://api.github.com/users/furszy/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/furszy/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/furszy/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/furszy"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29523#discussion_r1535468480"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29523"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1535468480"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Yes indeed updated, thanks!",
      "commit_id" : "53ee67de7e388703cb672e67ffaecdde53eb01de",
      "created_at" : "2024-03-22T12:01:43Z",
      "diff_hunk" : "@@ -1050,7 +1050,7 @@ static util::Result<CreatedTransactionResult> CreateTransactionInternal(\n     if (change_spend_size == -1) {\n         coin_selection_params.change_spend_size = DUMMY_NESTED_P2WPKH_INPUT_SIZE;\n     } else {\n-        coin_selection_params.change_spend_size = (size_t)change_spend_size;\n+        coin_selection_params.change_spend_size = (int)change_spend_size;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29523#discussion_r1535468480",
      "id" : 1535468480,
      "in_reply_to_id" : 1535461018,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585bhWPA",
      "original_commit_id" : "1ae0261524d01230979e6df91a5917e389a6a419",
      "original_line" : 1053,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "src/wallet/spend.cpp",
      "position" : null,
      "pull_request_review_id" : 1954620948,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29523",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1535468480/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-03-22T12:01:43Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1535468480",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/48946461?v=4",
         "events_url" : "https://api.github.com/users/ismaelsadeeq/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ismaelsadeeq/followers",
         "following_url" : "https://api.github.com/users/ismaelsadeeq/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ismaelsadeeq/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ismaelsadeeq",
         "id" : 48946461,
         "login" : "ismaelsadeeq",
         "node_id" : "MDQ6VXNlcjQ4OTQ2NDYx",
         "organizations_url" : "https://api.github.com/users/ismaelsadeeq/orgs",
         "received_events_url" : "https://api.github.com/users/ismaelsadeeq/received_events",
         "repos_url" : "https://api.github.com/users/ismaelsadeeq/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ismaelsadeeq/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ismaelsadeeq/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ismaelsadeeq"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29523#discussion_r1542667882"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29523"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1542667882"
         }
      },
      "author_association" : "NONE",
      "body" : "I can see that the \"400000\" here is the `MAX_STANDARD_TX_WEIGHT` but I think it's better to define the `MAX_STANDARD_TX_WEIGHT` constant and use it here. This makes it obvious to anyone reading what \"400000\" is.",
      "commit_id" : "53ee67de7e388703cb672e67ffaecdde53eb01de",
      "created_at" : "2024-03-28T10:27:49Z",
      "diff_hunk" : "@@ -187,6 +188,16 @@ def run_test(self):\n         # Create and fund a raw tx for sending 10 BTC\n         psbtx1 = self.nodes[0].walletcreatefundedpsbt([], {self.nodes[2].getnewaddress():10})['psbt']\n \n+        self.log.info(\"Test that max_tx_weight option is sanity checked and fails when expected\")\n+        dest_arg = [{self.nodes[0].getnewaddress(): 1}]\n+        min_tx_weight = MIN_STANDARD_TX_NONWITNESS_SIZE * WITNESS_SCALE_FACTOR\n+        assert_raises_rpc_error(-8, f\"Invalid parameter, max tx weight must be between {min_tx_weight} and 400000\", self.nodes[0].walletcreatefundedpsbt, [], dest_arg, 0, {\"max_tx_weight\": -1})",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29523#discussion_r1542667882",
      "id" : 1542667882,
      "line" : 194,
      "node_id" : "PRRC_kwDOABII585b8z5q",
      "original_commit_id" : "0b6835c9462479a9b876b57f3e796b30c1c9fe4b",
      "original_line" : 194,
      "original_position" : 15,
      "original_start_line" : null,
      "path" : "test/functional/rpc_psbt.py",
      "position" : 15,
      "pull_request_review_id" : 1965720329,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29523",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1542667882/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-03-28T10:27:49Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1542667882",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/37949128?v=4",
         "events_url" : "https://api.github.com/users/Eunovo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Eunovo/followers",
         "following_url" : "https://api.github.com/users/Eunovo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Eunovo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Eunovo",
         "id" : 37949128,
         "login" : "Eunovo",
         "node_id" : "MDQ6VXNlcjM3OTQ5MTI4",
         "organizations_url" : "https://api.github.com/users/Eunovo/orgs",
         "received_events_url" : "https://api.github.com/users/Eunovo/received_events",
         "repos_url" : "https://api.github.com/users/Eunovo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Eunovo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Eunovo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Eunovo"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29523#discussion_r1542685025"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29523"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1542685025"
         }
      },
      "author_association" : "NONE",
      "body" : "Nit: might be good to define this in one place since you use it multiple times.",
      "commit_id" : "53ee67de7e388703cb672e67ffaecdde53eb01de",
      "created_at" : "2024-03-28T10:41:17Z",
      "diff_hunk" : "@@ -787,6 +796,8 @@ RPCHelpMan fundrawtransaction()\n                                     },\n                                 },\n                              },\n+                            {\"max_tx_weight\", RPCArg::Type::NUM, RPCArg::Default{MAX_STANDARD_TX_WEIGHT}, \"The maximum acceptable transaction weight.\\n\"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29523#discussion_r1542685025",
      "id" : 1542685025,
      "line" : 799,
      "node_id" : "PRRC_kwDOABII585b84Fh",
      "original_commit_id" : "0b6835c9462479a9b876b57f3e796b30c1c9fe4b",
      "original_line" : 799,
      "original_position" : 27,
      "original_start_line" : null,
      "path" : "src/wallet/rpc/spend.cpp",
      "position" : 27,
      "pull_request_review_id" : 1965748475,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29523",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1542685025/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-03-28T10:41:17Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1542685025",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/37949128?v=4",
         "events_url" : "https://api.github.com/users/Eunovo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Eunovo/followers",
         "following_url" : "https://api.github.com/users/Eunovo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Eunovo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Eunovo",
         "id" : 37949128,
         "login" : "Eunovo",
         "node_id" : "MDQ6VXNlcjM3OTQ5MTI4",
         "organizations_url" : "https://api.github.com/users/Eunovo/orgs",
         "received_events_url" : "https://api.github.com/users/Eunovo/received_events",
         "repos_url" : "https://api.github.com/users/Eunovo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Eunovo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Eunovo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Eunovo"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29523#discussion_r1542868561"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29523"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1542868561"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Yes can also be used in future tests, thinking about defining it in \r\n`test_framework/blocktools.py`",
      "commit_id" : "53ee67de7e388703cb672e67ffaecdde53eb01de",
      "created_at" : "2024-03-28T12:26:11Z",
      "diff_hunk" : "@@ -187,6 +188,16 @@ def run_test(self):\n         # Create and fund a raw tx for sending 10 BTC\n         psbtx1 = self.nodes[0].walletcreatefundedpsbt([], {self.nodes[2].getnewaddress():10})['psbt']\n \n+        self.log.info(\"Test that max_tx_weight option is sanity checked and fails when expected\")\n+        dest_arg = [{self.nodes[0].getnewaddress(): 1}]\n+        min_tx_weight = MIN_STANDARD_TX_NONWITNESS_SIZE * WITNESS_SCALE_FACTOR\n+        assert_raises_rpc_error(-8, f\"Invalid parameter, max tx weight must be between {min_tx_weight} and 400000\", self.nodes[0].walletcreatefundedpsbt, [], dest_arg, 0, {\"max_tx_weight\": -1})",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29523#discussion_r1542868561",
      "id" : 1542868561,
      "in_reply_to_id" : 1542667882,
      "line" : 194,
      "node_id" : "PRRC_kwDOABII585b9k5R",
      "original_commit_id" : "0b6835c9462479a9b876b57f3e796b30c1c9fe4b",
      "original_line" : 194,
      "original_position" : 15,
      "original_start_line" : null,
      "path" : "test/functional/rpc_psbt.py",
      "position" : 15,
      "pull_request_review_id" : 1966048084,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29523",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1542868561/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-03-28T12:26:12Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1542868561",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/48946461?v=4",
         "events_url" : "https://api.github.com/users/ismaelsadeeq/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ismaelsadeeq/followers",
         "following_url" : "https://api.github.com/users/ismaelsadeeq/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ismaelsadeeq/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ismaelsadeeq",
         "id" : 48946461,
         "login" : "ismaelsadeeq",
         "node_id" : "MDQ6VXNlcjQ4OTQ2NDYx",
         "organizations_url" : "https://api.github.com/users/ismaelsadeeq/orgs",
         "received_events_url" : "https://api.github.com/users/ismaelsadeeq/received_events",
         "repos_url" : "https://api.github.com/users/ismaelsadeeq/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ismaelsadeeq/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ismaelsadeeq/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ismaelsadeeq"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29523#discussion_r1542874540"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29523"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1542874540"
         }
      },
      "author_association" : "MEMBER",
      "body" : "What should be defined?\r\nThe help text ? not sure if this is a good idea though so leaving this as is!",
      "commit_id" : "53ee67de7e388703cb672e67ffaecdde53eb01de",
      "created_at" : "2024-03-28T12:29:36Z",
      "diff_hunk" : "@@ -787,6 +796,8 @@ RPCHelpMan fundrawtransaction()\n                                     },\n                                 },\n                              },\n+                            {\"max_tx_weight\", RPCArg::Type::NUM, RPCArg::Default{MAX_STANDARD_TX_WEIGHT}, \"The maximum acceptable transaction weight.\\n\"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29523#discussion_r1542874540",
      "id" : 1542874540,
      "in_reply_to_id" : 1542685025,
      "line" : 799,
      "node_id" : "PRRC_kwDOABII585b9mWs",
      "original_commit_id" : "0b6835c9462479a9b876b57f3e796b30c1c9fe4b",
      "original_line" : 799,
      "original_position" : 27,
      "original_start_line" : null,
      "path" : "src/wallet/rpc/spend.cpp",
      "position" : 27,
      "pull_request_review_id" : 1966056486,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29523",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1542874540/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-03-28T12:29:36Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1542874540",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/48946461?v=4",
         "events_url" : "https://api.github.com/users/ismaelsadeeq/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ismaelsadeeq/followers",
         "following_url" : "https://api.github.com/users/ismaelsadeeq/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ismaelsadeeq/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ismaelsadeeq",
         "id" : 48946461,
         "login" : "ismaelsadeeq",
         "node_id" : "MDQ6VXNlcjQ4OTQ2NDYx",
         "organizations_url" : "https://api.github.com/users/ismaelsadeeq/orgs",
         "received_events_url" : "https://api.github.com/users/ismaelsadeeq/received_events",
         "repos_url" : "https://api.github.com/users/ismaelsadeeq/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ismaelsadeeq/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ismaelsadeeq/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ismaelsadeeq"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29523#discussion_r1551446237"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29523"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1551446237"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Fixed thanks",
      "commit_id" : "3a64b3a339fe55c2642369b00a382231871c2838",
      "created_at" : "2024-04-04T10:51:53Z",
      "diff_hunk" : "@@ -187,6 +188,16 @@ def run_test(self):\n         # Create and fund a raw tx for sending 10 BTC\n         psbtx1 = self.nodes[0].walletcreatefundedpsbt([], {self.nodes[2].getnewaddress():10})['psbt']\n \n+        self.log.info(\"Test that max_tx_weight option is sanity checked and fails when expected\")\n+        dest_arg = [{self.nodes[0].getnewaddress(): 1}]\n+        min_tx_weight = MIN_STANDARD_TX_NONWITNESS_SIZE * WITNESS_SCALE_FACTOR\n+        assert_raises_rpc_error(-8, f\"Invalid parameter, max tx weight must be between {min_tx_weight} and 400000\", self.nodes[0].walletcreatefundedpsbt, [], dest_arg, 0, {\"max_tx_weight\": -1})",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29523#discussion_r1551446237",
      "id" : 1551446237,
      "in_reply_to_id" : 1542667882,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585ceTDd",
      "original_commit_id" : "0b6835c9462479a9b876b57f3e796b30c1c9fe4b",
      "original_line" : 194,
      "original_position" : 15,
      "original_start_line" : null,
      "path" : "test/functional/rpc_psbt.py",
      "position" : null,
      "pull_request_review_id" : 1979495037,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29523",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1551446237/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-04-04T10:51:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1551446237",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/48946461?v=4",
         "events_url" : "https://api.github.com/users/ismaelsadeeq/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ismaelsadeeq/followers",
         "following_url" : "https://api.github.com/users/ismaelsadeeq/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ismaelsadeeq/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ismaelsadeeq",
         "id" : 48946461,
         "login" : "ismaelsadeeq",
         "node_id" : "MDQ6VXNlcjQ4OTQ2NDYx",
         "organizations_url" : "https://api.github.com/users/ismaelsadeeq/orgs",
         "received_events_url" : "https://api.github.com/users/ismaelsadeeq/received_events",
         "repos_url" : "https://api.github.com/users/ismaelsadeeq/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ismaelsadeeq/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ismaelsadeeq/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ismaelsadeeq"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Force pushed from https://github.com/bitcoin/bitcoin/commit/53ee67de7e388703cb672e67ffaecdde53eb01de to https://github.com/bitcoin/bitcoin/pull/29523/commits/3a64b3a339fe55c2642369b00a382231871c2838 [compare diff](https://github.com/bitcoin/bitcoin/compare/53ee67de7e388703cb672e67ffaecdde53eb01de..3a64b3a339fe55c2642369b00a382231871c2838)\r\n\r\n- Addressed [review comment ](https://github.com/bitcoin/bitcoin/pull/29523#discussion_r1542667882)\r\n- Rebased on master after #29788\r\n",
      "created_at" : "2024-04-04T10:54:33Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29523#issuecomment-2036840812",
      "id" : 2036840812,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/29523",
      "node_id" : "IC_kwDOABII5855Z7ls",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2036840812/reactions"
      },
      "updated_at" : "2024-04-04T10:54:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2036840812",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/48946461?v=4",
         "events_url" : "https://api.github.com/users/ismaelsadeeq/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ismaelsadeeq/followers",
         "following_url" : "https://api.github.com/users/ismaelsadeeq/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ismaelsadeeq/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ismaelsadeeq",
         "id" : 48946461,
         "login" : "ismaelsadeeq",
         "node_id" : "MDQ6VXNlcjQ4OTQ2NDYx",
         "organizations_url" : "https://api.github.com/users/ismaelsadeeq/orgs",
         "received_events_url" : "https://api.github.com/users/ismaelsadeeq/received_events",
         "repos_url" : "https://api.github.com/users/ismaelsadeeq/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ismaelsadeeq/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ismaelsadeeq/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ismaelsadeeq"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "Tested ACK https://github.com/bitcoin/bitcoin/pull/29523/commits/3a64b3a339fe55c2642369b00a382231871c283\r\nVerified fuzz tests",
      "created_at" : "2024-04-04T15:10:15Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29523#issuecomment-2037477967",
      "id" : 2037477967,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/29523",
      "node_id" : "IC_kwDOABII5855cXJP",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2037477967/reactions"
      },
      "updated_at" : "2024-04-04T15:20:06Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2037477967",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/37949128?v=4",
         "events_url" : "https://api.github.com/users/Eunovo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Eunovo/followers",
         "following_url" : "https://api.github.com/users/Eunovo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Eunovo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Eunovo",
         "id" : 37949128,
         "login" : "Eunovo",
         "node_id" : "MDQ6VXNlcjM3OTQ5MTI4",
         "organizations_url" : "https://api.github.com/users/Eunovo/orgs",
         "received_events_url" : "https://api.github.com/users/Eunovo/received_events",
         "repos_url" : "https://api.github.com/users/Eunovo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Eunovo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Eunovo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Eunovo"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> Any chance to turn the first commit into an scripted-diff?\r\n\r\nThe commit message was misleading It's not just renaming `max_weight`, it also updates the input parameter docstring to match the new name,  some comment updates, and also the fuzz test renames has more info like `low_max_selection_weight` and `high_max_selection_weight`.\r\n\r\nI've updated the commit message of the first commit https://github.com/bitcoin/bitcoin/pull/29523/commits/270639324a6637e0025e1458221ab488a8a09554\r\n\r\n\r\n",
      "created_at" : "2024-04-05T16:02:27Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29523#issuecomment-2040171293",
      "id" : 2040171293,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/29523",
      "node_id" : "IC_kwDOABII5855mosd",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2040171293/reactions"
      },
      "updated_at" : "2024-04-08T13:48:51Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2040171293",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/48946461?v=4",
         "events_url" : "https://api.github.com/users/ismaelsadeeq/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ismaelsadeeq/followers",
         "following_url" : "https://api.github.com/users/ismaelsadeeq/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ismaelsadeeq/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ismaelsadeeq",
         "id" : 48946461,
         "login" : "ismaelsadeeq",
         "node_id" : "MDQ6VXNlcjQ4OTQ2NDYx",
         "organizations_url" : "https://api.github.com/users/ismaelsadeeq/orgs",
         "received_events_url" : "https://api.github.com/users/ismaelsadeeq/received_events",
         "repos_url" : "https://api.github.com/users/ismaelsadeeq/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ismaelsadeeq/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ismaelsadeeq/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ismaelsadeeq"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--85328a0da195eb286784d51f73fa0af9-->\n\nð§ At least one of the CI tasks failed. Make sure to run all tests locally, according to the\ndocumentation.\n\nPossibly this is due to a silent merge conflict (the changes in this pull request being\nincompatible with the current code in the target branch). If so, make sure to rebase on the latest\ncommit of the target branch.\n\nLeave a comment here, if you need help tracking down a confusing failure.\n\n<sub>Debug: https://github.com/bitcoin/bitcoin/runs/23495200918</sub>",
      "created_at" : "2024-04-24T23:55:58Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29523#issuecomment-2076063341",
      "id" : 2076063341,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/29523",
      "node_id" : "IC_kwDOABII5857vjZt",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2076063341/reactions"
      },
      "updated_at" : "2024-04-24T23:55:58Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2076063341",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Rebased and force pushed from 3d76c37106a4f80fd2ac410696b1049c3aa321c5 to b24b7a9a6a1a10024c639e9d4ee27aa4d0ce653e to fix C.I  failure [compare diff](https://github.com/bitcoin/bitcoin/compare/3d76c37106a4f80fd2ac410696b1049c3aa321c5..b24b7a9a6a1a10024c639e9d4ee27aa4d0ce653e)",
      "created_at" : "2024-05-03T09:46:41Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29523#issuecomment-2092667450",
      "id" : 2092667450,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/29523",
      "node_id" : "IC_kwDOABII5858u5I6",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2092667450/reactions"
      },
      "updated_at" : "2024-05-03T09:46:41Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2092667450",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/48946461?v=4",
         "events_url" : "https://api.github.com/users/ismaelsadeeq/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ismaelsadeeq/followers",
         "following_url" : "https://api.github.com/users/ismaelsadeeq/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ismaelsadeeq/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ismaelsadeeq",
         "id" : 48946461,
         "login" : "ismaelsadeeq",
         "node_id" : "MDQ6VXNlcjQ4OTQ2NDYx",
         "organizations_url" : "https://api.github.com/users/ismaelsadeeq/orgs",
         "received_events_url" : "https://api.github.com/users/ismaelsadeeq/received_events",
         "repos_url" : "https://api.github.com/users/ismaelsadeeq/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ismaelsadeeq/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ismaelsadeeq/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ismaelsadeeq"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->\nð This pull request conflicts with the target branch and [needs rebase](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#rebasing-changes).\n",
      "created_at" : "2024-06-05T00:10:47Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29523#issuecomment-2148607784",
      "id" : 2148607784,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/29523",
      "node_id" : "IC_kwDOABII586AESco",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2148607784/reactions"
      },
      "updated_at" : "2024-06-05T00:10:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2148607784",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Rebased to fix conflict after https://github.com/bitcoin/bitcoin/pull/28366  was merged.\r\n[b24b7a9a6..845d16c1b](https://github.com/bitcoin/bitcoin/compare/b24b7a9a6a1a10024c639e9d4ee27aa4d0ce653e..845d16c1bbffb574b22c79ce08e2b6eba31865bc)",
      "created_at" : "2024-06-10T10:32:44Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29523#issuecomment-2157981878",
      "id" : 2157981878,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/29523",
      "node_id" : "IC_kwDOABII586AoDC2",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2157981878/reactions"
      },
      "updated_at" : "2024-06-10T10:32:44Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2157981878",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/48946461?v=4",
         "events_url" : "https://api.github.com/users/ismaelsadeeq/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ismaelsadeeq/followers",
         "following_url" : "https://api.github.com/users/ismaelsadeeq/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ismaelsadeeq/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ismaelsadeeq",
         "id" : 48946461,
         "login" : "ismaelsadeeq",
         "node_id" : "MDQ6VXNlcjQ4OTQ2NDYx",
         "organizations_url" : "https://api.github.com/users/ismaelsadeeq/orgs",
         "received_events_url" : "https://api.github.com/users/ismaelsadeeq/received_events",
         "repos_url" : "https://api.github.com/users/ismaelsadeeq/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ismaelsadeeq/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ismaelsadeeq/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ismaelsadeeq"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29523#discussion_r1646722661"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29523"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1646722661"
         }
      },
      "author_association" : "MEMBER",
      "body" : "In d9ec6e7f28f0:\r\n\r\nInstead of setting it to 0, could error out early if `max_selection_weight <= 0` (a test for this would be nice).",
      "commit_id" : "845d16c1bbffb574b22c79ce08e2b6eba31865bc",
      "created_at" : "2024-06-19T22:15:44Z",
      "diff_hunk" : "@@ -692,7 +692,9 @@ util::Result<SelectionResult> ChooseSelectionResult(interfaces::Chain& chain, co\n     };\n \n     // Maximum allowed weight for selected coins.\n-    int max_selection_weight = MAX_STANDARD_TX_WEIGHT - (coin_selection_params.tx_noinputs_size * WITNESS_SCALE_FACTOR);\n+    int max_transaction_weight = coin_selection_params.m_max_tx_weight.value_or(MAX_STANDARD_TX_WEIGHT);\n+    int tx_weight_no_input = coin_selection_params.tx_noinputs_size * WITNESS_SCALE_FACTOR;\n+    int max_selection_weight = std::max((max_transaction_weight - tx_weight_no_input), 0);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29523#discussion_r1646722661",
      "id" : 1646722661,
      "line" : 697,
      "node_id" : "PRRC_kwDOABII585iJv5l",
      "original_commit_id" : "d9ec6e7f28f06cb2407c8e13fcc7b3f2dae48974",
      "original_line" : 697,
      "original_position" : 7,
      "original_start_line" : 695,
      "path" : "src/wallet/spend.cpp",
      "position" : 9,
      "pull_request_review_id" : 2129092322,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29523",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1646722661/reactions"
      },
      "side" : "RIGHT",
      "start_line" : 695,
      "start_side" : "RIGHT",
      "subject_type" : "line",
      "updated_at" : "2024-06-19T22:21:58Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1646722661",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5377650?v=4",
         "events_url" : "https://api.github.com/users/furszy/events{/privacy}",
         "followers_url" : "https://api.github.com/users/furszy/followers",
         "following_url" : "https://api.github.com/users/furszy/following{/other_user}",
         "gists_url" : "https://api.github.com/users/furszy/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/furszy",
         "id" : 5377650,
         "login" : "furszy",
         "node_id" : "MDQ6VXNlcjUzNzc2NTA=",
         "organizations_url" : "https://api.github.com/users/furszy/orgs",
         "received_events_url" : "https://api.github.com/users/furszy/received_events",
         "repos_url" : "https://api.github.com/users/furszy/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/furszy/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/furszy/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/furszy"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29523#discussion_r1646723399"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29523"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1646723399"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Same as above, would be nice to error out early if `max_selection_weight <= 0`. No need to run the selection algorithms under such circumstance.",
      "commit_id" : "845d16c1bbffb574b22c79ce08e2b6eba31865bc",
      "created_at" : "2024-06-19T22:17:40Z",
      "diff_hunk" : "@@ -702,7 +704,8 @@ util::Result<SelectionResult> ChooseSelectionResult(interfaces::Chain& chain, co\n     }\n \n     // Deduct change weight because remaining Coin Selection algorithms can create change output\n-    max_selection_weight -= (coin_selection_params.change_output_size * WITNESS_SCALE_FACTOR);\n+    int change_outputs_weight = coin_selection_params.change_output_size * WITNESS_SCALE_FACTOR;\n+    max_selection_weight = std::max((max_selection_weight - change_outputs_weight), 0);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29523#discussion_r1646723399",
      "id" : 1646723399,
      "line" : 708,
      "node_id" : "PRRC_kwDOABII585iJwFH",
      "original_commit_id" : "d9ec6e7f28f06cb2407c8e13fcc7b3f2dae48974",
      "original_line" : 708,
      "original_position" : 17,
      "original_start_line" : 707,
      "path" : "src/wallet/spend.cpp",
      "position" : 23,
      "pull_request_review_id" : 2129092322,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29523",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1646723399/reactions"
      },
      "side" : "RIGHT",
      "start_line" : 707,
      "start_side" : "RIGHT",
      "subject_type" : "line",
      "updated_at" : "2024-06-19T22:21:58Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1646723399",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5377650?v=4",
         "events_url" : "https://api.github.com/users/furszy/events{/privacy}",
         "followers_url" : "https://api.github.com/users/furszy/followers",
         "following_url" : "https://api.github.com/users/furszy/following{/other_user}",
         "gists_url" : "https://api.github.com/users/furszy/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/furszy",
         "id" : 5377650,
         "login" : "furszy",
         "node_id" : "MDQ6VXNlcjUzNzc2NTA=",
         "organizations_url" : "https://api.github.com/users/furszy/orgs",
         "received_events_url" : "https://api.github.com/users/furszy/received_events",
         "repos_url" : "https://api.github.com/users/furszy/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/furszy/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/furszy/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/furszy"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29523#discussion_r1646724513"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29523"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1646724513"
         }
      },
      "author_association" : "MEMBER",
      "body" : "nit: could replace [this line](https://github.com/bitcoin/bitcoin/blob/2d21060af831fa8f8f1791b4464961d5f28a88cb/test/functional/p2p_segwit.py#L1265) with this constant.",
      "commit_id" : "845d16c1bbffb574b22c79ce08e2b6eba31865bc",
      "created_at" : "2024-06-19T22:20:42Z",
      "diff_hunk" : "@@ -48,6 +48,7 @@\n \n MAX_BLOCK_SIGOPS = 20000\n MAX_BLOCK_SIGOPS_WEIGHT = MAX_BLOCK_SIGOPS * WITNESS_SCALE_FACTOR\n+MAX_STANDARD_TX_WEIGHT = 400000",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29523#discussion_r1646724513",
      "id" : 1646724513,
      "line" : 51,
      "node_id" : "PRRC_kwDOABII585iJwWh",
      "original_commit_id" : "d9ec6e7f28f06cb2407c8e13fcc7b3f2dae48974",
      "original_line" : 51,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "test/functional/test_framework/blocktools.py",
      "position" : 4,
      "pull_request_review_id" : 2129092322,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29523",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1646724513/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-06-19T22:21:58Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1646724513",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5377650?v=4",
         "events_url" : "https://api.github.com/users/furszy/events{/privacy}",
         "followers_url" : "https://api.github.com/users/furszy/followers",
         "following_url" : "https://api.github.com/users/furszy/following{/other_user}",
         "gists_url" : "https://api.github.com/users/furszy/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/furszy",
         "id" : 5377650,
         "login" : "furszy",
         "node_id" : "MDQ6VXNlcjUzNzc2NTA=",
         "organizations_url" : "https://api.github.com/users/furszy/orgs",
         "received_events_url" : "https://api.github.com/users/furszy/received_events",
         "repos_url" : "https://api.github.com/users/furszy/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/furszy/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/furszy/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/furszy"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "thanks for your review @furszy will force push to address this comments shortly.",
      "created_at" : "2024-06-20T08:12:00Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29523#issuecomment-2180079920",
      "id" : 2180079920,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/29523",
      "node_id" : "IC_kwDOABII586B8WEw",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2180079920/reactions"
      },
      "updated_at" : "2024-06-20T08:12:00Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2180079920",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/48946461?v=4",
         "events_url" : "https://api.github.com/users/ismaelsadeeq/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ismaelsadeeq/followers",
         "following_url" : "https://api.github.com/users/ismaelsadeeq/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ismaelsadeeq/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ismaelsadeeq",
         "id" : 48946461,
         "login" : "ismaelsadeeq",
         "node_id" : "MDQ6VXNlcjQ4OTQ2NDYx",
         "organizations_url" : "https://api.github.com/users/ismaelsadeeq/orgs",
         "received_events_url" : "https://api.github.com/users/ismaelsadeeq/received_events",
         "repos_url" : "https://api.github.com/users/ismaelsadeeq/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ismaelsadeeq/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ismaelsadeeq/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ismaelsadeeq"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29523#discussion_r1649181039"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29523"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1649181039"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Thanks fixed.",
      "commit_id" : "b3ac1179ff90fe261af4e6dc9c7af64e1518b435",
      "created_at" : "2024-06-21T16:24:05Z",
      "diff_hunk" : "@@ -692,7 +692,9 @@ util::Result<SelectionResult> ChooseSelectionResult(interfaces::Chain& chain, co\n     };\n \n     // Maximum allowed weight for selected coins.\n-    int max_selection_weight = MAX_STANDARD_TX_WEIGHT - (coin_selection_params.tx_noinputs_size * WITNESS_SCALE_FACTOR);\n+    int max_transaction_weight = coin_selection_params.m_max_tx_weight.value_or(MAX_STANDARD_TX_WEIGHT);\n+    int tx_weight_no_input = coin_selection_params.tx_noinputs_size * WITNESS_SCALE_FACTOR;\n+    int max_selection_weight = std::max((max_transaction_weight - tx_weight_no_input), 0);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29523#discussion_r1649181039",
      "id" : 1649181039,
      "in_reply_to_id" : 1646722661,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585iTIFv",
      "original_commit_id" : "d9ec6e7f28f06cb2407c8e13fcc7b3f2dae48974",
      "original_line" : 697,
      "original_position" : 7,
      "original_start_line" : 695,
      "path" : "src/wallet/spend.cpp",
      "position" : null,
      "pull_request_review_id" : 2133014008,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29523",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1649181039/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : "RIGHT",
      "subject_type" : "line",
      "updated_at" : "2024-06-21T16:24:05Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1649181039",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/48946461?v=4",
         "events_url" : "https://api.github.com/users/ismaelsadeeq/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ismaelsadeeq/followers",
         "following_url" : "https://api.github.com/users/ismaelsadeeq/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ismaelsadeeq/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ismaelsadeeq",
         "id" : 48946461,
         "login" : "ismaelsadeeq",
         "node_id" : "MDQ6VXNlcjQ4OTQ2NDYx",
         "organizations_url" : "https://api.github.com/users/ismaelsadeeq/orgs",
         "received_events_url" : "https://api.github.com/users/ismaelsadeeq/received_events",
         "repos_url" : "https://api.github.com/users/ismaelsadeeq/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ismaelsadeeq/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ismaelsadeeq/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ismaelsadeeq"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29523#discussion_r1649181380"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29523"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1649181380"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Also added a test for this",
      "commit_id" : "b3ac1179ff90fe261af4e6dc9c7af64e1518b435",
      "created_at" : "2024-06-21T16:24:25Z",
      "diff_hunk" : "@@ -692,7 +692,9 @@ util::Result<SelectionResult> ChooseSelectionResult(interfaces::Chain& chain, co\n     };\n \n     // Maximum allowed weight for selected coins.\n-    int max_selection_weight = MAX_STANDARD_TX_WEIGHT - (coin_selection_params.tx_noinputs_size * WITNESS_SCALE_FACTOR);\n+    int max_transaction_weight = coin_selection_params.m_max_tx_weight.value_or(MAX_STANDARD_TX_WEIGHT);\n+    int tx_weight_no_input = coin_selection_params.tx_noinputs_size * WITNESS_SCALE_FACTOR;\n+    int max_selection_weight = std::max((max_transaction_weight - tx_weight_no_input), 0);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29523#discussion_r1649181380",
      "id" : 1649181380,
      "in_reply_to_id" : 1646722661,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585iTILE",
      "original_commit_id" : "d9ec6e7f28f06cb2407c8e13fcc7b3f2dae48974",
      "original_line" : 697,
      "original_position" : 7,
      "original_start_line" : 695,
      "path" : "src/wallet/spend.cpp",
      "position" : null,
      "pull_request_review_id" : 2133014540,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29523",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1649181380/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : "RIGHT",
      "subject_type" : "line",
      "updated_at" : "2024-06-21T16:24:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1649181380",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/48946461?v=4",
         "events_url" : "https://api.github.com/users/ismaelsadeeq/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ismaelsadeeq/followers",
         "following_url" : "https://api.github.com/users/ismaelsadeeq/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ismaelsadeeq/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ismaelsadeeq",
         "id" : 48946461,
         "login" : "ismaelsadeeq",
         "node_id" : "MDQ6VXNlcjQ4OTQ2NDYx",
         "organizations_url" : "https://api.github.com/users/ismaelsadeeq/orgs",
         "received_events_url" : "https://api.github.com/users/ismaelsadeeq/received_events",
         "repos_url" : "https://api.github.com/users/ismaelsadeeq/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ismaelsadeeq/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ismaelsadeeq/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ismaelsadeeq"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29523#discussion_r1649181913"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29523"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1649181913"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Fixed, and also add a test case for it.",
      "commit_id" : "b3ac1179ff90fe261af4e6dc9c7af64e1518b435",
      "created_at" : "2024-06-21T16:24:55Z",
      "diff_hunk" : "@@ -702,7 +704,8 @@ util::Result<SelectionResult> ChooseSelectionResult(interfaces::Chain& chain, co\n     }\n \n     // Deduct change weight because remaining Coin Selection algorithms can create change output\n-    max_selection_weight -= (coin_selection_params.change_output_size * WITNESS_SCALE_FACTOR);\n+    int change_outputs_weight = coin_selection_params.change_output_size * WITNESS_SCALE_FACTOR;\n+    max_selection_weight = std::max((max_selection_weight - change_outputs_weight), 0);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29523#discussion_r1649181913",
      "id" : 1649181913,
      "in_reply_to_id" : 1646723399,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585iTITZ",
      "original_commit_id" : "d9ec6e7f28f06cb2407c8e13fcc7b3f2dae48974",
      "original_line" : 708,
      "original_position" : 17,
      "original_start_line" : 707,
      "path" : "src/wallet/spend.cpp",
      "position" : null,
      "pull_request_review_id" : 2133015337,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29523",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1649181913/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : "RIGHT",
      "subject_type" : "line",
      "updated_at" : "2024-06-21T16:24:55Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1649181913",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/48946461?v=4",
         "events_url" : "https://api.github.com/users/ismaelsadeeq/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ismaelsadeeq/followers",
         "following_url" : "https://api.github.com/users/ismaelsadeeq/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ismaelsadeeq/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ismaelsadeeq",
         "id" : 48946461,
         "login" : "ismaelsadeeq",
         "node_id" : "MDQ6VXNlcjQ4OTQ2NDYx",
         "organizations_url" : "https://api.github.com/users/ismaelsadeeq/orgs",
         "received_events_url" : "https://api.github.com/users/ismaelsadeeq/received_events",
         "repos_url" : "https://api.github.com/users/ismaelsadeeq/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ismaelsadeeq/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ismaelsadeeq/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ismaelsadeeq"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29523#discussion_r1649184476"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29523"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1649184476"
         }
      },
      "author_association" : "MEMBER",
      "body" : "leaving this as is, as I suspect there might be other places that needs to be replaced also.\r\nthis and others can come in a separate PR ?",
      "commit_id" : "b3ac1179ff90fe261af4e6dc9c7af64e1518b435",
      "created_at" : "2024-06-21T16:27:17Z",
      "diff_hunk" : "@@ -48,6 +48,7 @@\n \n MAX_BLOCK_SIGOPS = 20000\n MAX_BLOCK_SIGOPS_WEIGHT = MAX_BLOCK_SIGOPS * WITNESS_SCALE_FACTOR\n+MAX_STANDARD_TX_WEIGHT = 400000",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29523#discussion_r1649184476",
      "id" : 1649184476,
      "in_reply_to_id" : 1646724513,
      "line" : 51,
      "node_id" : "PRRC_kwDOABII585iTI7c",
      "original_commit_id" : "d9ec6e7f28f06cb2407c8e13fcc7b3f2dae48974",
      "original_line" : 51,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "test/functional/test_framework/blocktools.py",
      "position" : 4,
      "pull_request_review_id" : 2133019242,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29523",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1649184476/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-06-21T16:27:17Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1649184476",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/48946461?v=4",
         "events_url" : "https://api.github.com/users/ismaelsadeeq/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ismaelsadeeq/followers",
         "following_url" : "https://api.github.com/users/ismaelsadeeq/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ismaelsadeeq/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ismaelsadeeq",
         "id" : 48946461,
         "login" : "ismaelsadeeq",
         "node_id" : "MDQ6VXNlcjQ4OTQ2NDYx",
         "organizations_url" : "https://api.github.com/users/ismaelsadeeq/orgs",
         "received_events_url" : "https://api.github.com/users/ismaelsadeeq/received_events",
         "repos_url" : "https://api.github.com/users/ismaelsadeeq/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ismaelsadeeq/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ismaelsadeeq/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ismaelsadeeq"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29523#discussion_r1650773911"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29523"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1650773911"
         }
      },
      "author_association" : "NONE",
      "body" : "As per the following 2 statements in `ChooseSelectionResult`:\r\n- https://github.com/bitcoin/bitcoin/blob/master/src/wallet/spend.cpp#L699\r\n- https://github.com/bitcoin/bitcoin/blob/master/src/wallet/spend.cpp#L709\r\n\r\nThe `no_input` and `change_output` weights are accounted for, but where is the weight of the destination output accounted for?\r\n",
      "commit_id" : "b3ac1179ff90fe261af4e6dc9c7af64e1518b435",
      "created_at" : "2024-06-24T10:27:19Z",
      "diff_hunk" : "@@ -84,14 +84,14 @@ struct {\n  *        bound of the range.\n  * @param const CAmount& cost_of_change This is the cost of creating and spending a change output.\n  *        This plus selection_target is the upper bound of the range.\n- * @param int max_weight The maximum weight available for the input set.\n+ * @param int max_selection_weight The maximum allowed weight for a selection result to be valid.",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29523#discussion_r1650773911",
      "id" : 1650773911,
      "line" : 87,
      "node_id" : "PRRC_kwDOABII585iZM-X",
      "original_commit_id" : "79f3affa3954ebedcdcb28101723f5ce3fe05880",
      "original_line" : 87,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "src/wallet/coinselection.cpp",
      "position" : 5,
      "pull_request_review_id" : 2135369361,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29523",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1650773911/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-06-24T12:36:10Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1650773911",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5960750?v=4",
         "events_url" : "https://api.github.com/users/rkrux/events{/privacy}",
         "followers_url" : "https://api.github.com/users/rkrux/followers",
         "following_url" : "https://api.github.com/users/rkrux/following{/other_user}",
         "gists_url" : "https://api.github.com/users/rkrux/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/rkrux",
         "id" : 5960750,
         "login" : "rkrux",
         "node_id" : "MDQ6VXNlcjU5NjA3NTA=",
         "organizations_url" : "https://api.github.com/users/rkrux/orgs",
         "received_events_url" : "https://api.github.com/users/rkrux/received_events",
         "repos_url" : "https://api.github.com/users/rkrux/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/rkrux/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/rkrux/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/rkrux"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29523#discussion_r1650862134"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29523"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1650862134"
         }
      },
      "author_association" : "NONE",
      "body" : "Took me a while to figure but as I see they are accounted for within `coin_selection_params.tx_noinputs_size` here: https://github.com/bitcoin/bitcoin/blob/master/src/wallet/spend.cpp#L1100",
      "commit_id" : "b3ac1179ff90fe261af4e6dc9c7af64e1518b435",
      "created_at" : "2024-06-24T11:21:07Z",
      "diff_hunk" : "@@ -84,14 +84,14 @@ struct {\n  *        bound of the range.\n  * @param const CAmount& cost_of_change This is the cost of creating and spending a change output.\n  *        This plus selection_target is the upper bound of the range.\n- * @param int max_weight The maximum weight available for the input set.\n+ * @param int max_selection_weight The maximum allowed weight for a selection result to be valid.",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29523#discussion_r1650862134",
      "id" : 1650862134,
      "in_reply_to_id" : 1650773911,
      "line" : 87,
      "node_id" : "PRRC_kwDOABII585iZig2",
      "original_commit_id" : "79f3affa3954ebedcdcb28101723f5ce3fe05880",
      "original_line" : 87,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "src/wallet/coinselection.cpp",
      "position" : 5,
      "pull_request_review_id" : 2135369361,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29523",
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1650862134/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-06-24T12:36:10Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1650862134",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5960750?v=4",
         "events_url" : "https://api.github.com/users/rkrux/events{/privacy}",
         "followers_url" : "https://api.github.com/users/rkrux/followers",
         "following_url" : "https://api.github.com/users/rkrux/following{/other_user}",
         "gists_url" : "https://api.github.com/users/rkrux/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/rkrux",
         "id" : 5960750,
         "login" : "rkrux",
         "node_id" : "MDQ6VXNlcjU5NjA3NTA=",
         "organizations_url" : "https://api.github.com/users/rkrux/orgs",
         "received_events_url" : "https://api.github.com/users/rkrux/received_events",
         "repos_url" : "https://api.github.com/users/rkrux/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/rkrux/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/rkrux/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/rkrux"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29523#discussion_r1650867991"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29523"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1650867991"
         }
      },
      "author_association" : "NONE",
      "body" : "> This change ensures consistency in transaction size and weight calculation\r\n  within the wallet and prevents conversion overflow when calculating\r\n  `max_selection_weight`.\r\n\r\nAre the inconsistencies because size_t is platform dependent and int is not (at least for the purposes of core because of this: https://github.com/bitcoin/bitcoin/blob/v26.0/src/compat/assumptions.h#L44)?\r\nI still need to digest this comment: https://github.com/bitcoin/bitcoin/pull/29523#discussion_r1528745048",
      "commit_id" : "b3ac1179ff90fe261af4e6dc9c7af64e1518b435",
      "created_at" : "2024-06-24T11:26:08Z",
      "diff_hunk" : "@@ -139,9 +139,9 @@ struct CoinSelectionParams {\n     /** Randomness to use in the context of coin selection. */\n     FastRandomContext& rng_fast;\n     /** Size of a change output in bytes, determined by the output type. */\n-    size_t change_output_size = 0;\n+    int change_output_size = 0;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29523#discussion_r1650867991",
      "id" : 1650867991,
      "line" : 142,
      "node_id" : "PRRC_kwDOABII585iZj8X",
      "original_commit_id" : "80355372d55fa575818c749247c6d319915e20cb",
      "original_line" : 142,
      "original_position" : 5,
      "original_start_line" : 142,
      "path" : "src/wallet/coinselection.h",
      "position" : 5,
      "pull_request_review_id" : 2135369361,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29523",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1650867991/reactions"
      },
      "side" : "RIGHT",
      "start_line" : 142,
      "start_side" : "LEFT",
      "subject_type" : "line",
      "updated_at" : "2024-06-24T12:36:10Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1650867991",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5960750?v=4",
         "events_url" : "https://api.github.com/users/rkrux/events{/privacy}",
         "followers_url" : "https://api.github.com/users/rkrux/followers",
         "following_url" : "https://api.github.com/users/rkrux/following{/other_user}",
         "gists_url" : "https://api.github.com/users/rkrux/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/rkrux",
         "id" : 5960750,
         "login" : "rkrux",
         "node_id" : "MDQ6VXNlcjU5NjA3NTA=",
         "organizations_url" : "https://api.github.com/users/rkrux/orgs",
         "received_events_url" : "https://api.github.com/users/rkrux/received_events",
         "repos_url" : "https://api.github.com/users/rkrux/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/rkrux/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/rkrux/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/rkrux"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29523#discussion_r1650936364"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29523"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1650936364"
         }
      },
      "author_association" : "NONE",
      "body" : "Nit: In case the file is changed.\r\n\r\n```\r\n# ensure the transaction's weight is below the specified max_tx_weight.\r\n```",
      "commit_id" : "b3ac1179ff90fe261af4e6dc9c7af64e1518b435",
      "created_at" : "2024-06-24T12:18:25Z",
      "diff_hunk" : "@@ -186,6 +191,49 @@ def run_test(self):\n         # Create and fund a raw tx for sending 10 BTC\n         psbtx1 = self.nodes[0].walletcreatefundedpsbt([], {self.nodes[2].getnewaddress():10})['psbt']\n \n+        self.log.info(\"Test for invalid maximum transaction weights\")\n+        dest_arg = [{self.nodes[0].getnewaddress(): 1}]\n+        min_tx_weight = MIN_STANDARD_TX_NONWITNESS_SIZE * WITNESS_SCALE_FACTOR\n+        assert_raises_rpc_error(-4, f\"Maximum transaction weight must be between {min_tx_weight} and {MAX_STANDARD_TX_WEIGHT}\", self.nodes[0].walletcreatefundedpsbt, [], dest_arg, 0, {\"max_tx_weight\": -1})\n+        assert_raises_rpc_error(-4, f\"Maximum transaction weight must be between {min_tx_weight} and {MAX_STANDARD_TX_WEIGHT}\", self.nodes[0].walletcreatefundedpsbt, [], dest_arg, 0, {\"max_tx_weight\": 0})\n+        assert_raises_rpc_error(-4, f\"Maximum transaction weight must be between {min_tx_weight} and {MAX_STANDARD_TX_WEIGHT}\", self.nodes[0].walletcreatefundedpsbt, [], dest_arg, 0, {\"max_tx_weight\": MAX_STANDARD_TX_WEIGHT + 1})\n+\n+        # Base transaction vsize: version (4) + locktime (4) + input count (1) + witness overhead (1) = 10 vbytes\n+        base_tx_vsize = 10\n+        # One P2WPKH output vsize: outpoint (31 vbytes)\n+        p2wpkh_output_vsize = 31\n+        # 1 vbyte for output count\n+        output_count = 1\n+        tx_weight_without_inputs = (base_tx_vsize + output_count + p2wpkh_output_vsize) * WITNESS_SCALE_FACTOR\n+        # min_tx_weight is greater than transaction weight without inputs\n+        assert_greater_than(min_tx_weight, tx_weight_without_inputs)\n+\n+        # In other to test for when the passed max weight is less than the transaction weight without inputs\n+        # Define destination with two outputs.\n+        dest_arg_large = [{self.nodes[0].getnewaddress(): 1}, {self.nodes[0].getnewaddress(): 1}]\n+        large_tx_vsize_without_inputs = base_tx_vsize + output_count + (p2wpkh_output_vsize * 2)\n+        large_tx_weight_without_inputs = large_tx_vsize_without_inputs * WITNESS_SCALE_FACTOR\n+        assert_greater_than(large_tx_weight_without_inputs, min_tx_weight)\n+        # Test for max_tx_weight less than Transaction weight without inputs\n+        assert_raises_rpc_error(-4, \"Maximum transaction weight is less than transaction weight without inputs\", self.nodes[0].walletcreatefundedpsbt, [], dest_arg_large, 0, {\"max_tx_weight\": min_tx_weight})\n+        assert_raises_rpc_error(-4, \"Maximum transaction weight is less than transaction weight without inputs\", self.nodes[0].walletcreatefundedpsbt, [], dest_arg_large, 0, {\"max_tx_weight\": large_tx_weight_without_inputs})\n+\n+        # Test for max_tx_weight just enough to include inputs but not change output\n+        assert_raises_rpc_error(-4, \"Maximum transaction weight is too low, can not accommodate change output\", self.nodes[0].walletcreatefundedpsbt, [], dest_arg_large, 0, {\"max_tx_weight\": (large_tx_vsize_without_inputs + 1) * WITNESS_SCALE_FACTOR})\n+        # Test that it has to accommodate a change output\n+        large_tx_vsize_with_change = large_tx_vsize_without_inputs + p2wpkh_output_vsize\n+        assert_raises_rpc_error(-4, \"Maximum transaction weight is too low, can not accommodate change output\", self.nodes[0].walletcreatefundedpsbt, [], dest_arg_large, 0, {\"max_tx_weight\": (large_tx_vsize_with_change) * WITNESS_SCALE_FACTOR})\n+\n+        self.log.info(\"Test that a funded PSBT is always faithful to max_tx_weight option\")\n+        # It's enough but won't accommodate selected input size\n+        assert_raises_rpc_error(-4, \"The inputs size exceeds the maximum weight\", self.nodes[0].walletcreatefundedpsbt, [], dest_arg_large, 0, {\"max_tx_weight\": (large_tx_vsize_with_change + 1) * WITNESS_SCALE_FACTOR})\n+\n+        max_tx_weight_sufficient = 1000 # 1k vbytes is enough\n+        psbt = self.nodes[0].walletcreatefundedpsbt(outputs=dest_arg,locktime=0, options={\"max_tx_weight\": max_tx_weight_sufficient})[\"psbt\"]\n+        weight = self.nodes[0].decodepsbt(psbt)[\"tx\"][\"weight\"]\n+        # ensure the transactions weight is below the transaction weight.",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29523#discussion_r1650936364",
      "id" : 1650936364,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585iZ0os",
      "original_commit_id" : "723a8da8e562451facc8daa5d6ba61977f68cafe",
      "original_line" : 234,
      "original_position" : 70,
      "original_start_line" : null,
      "path" : "test/functional/rpc_psbt.py",
      "position" : null,
      "pull_request_review_id" : 2135369361,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29523",
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1650936364/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-06-24T12:36:10Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1650936364",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5960750?v=4",
         "events_url" : "https://api.github.com/users/rkrux/events{/privacy}",
         "followers_url" : "https://api.github.com/users/rkrux/followers",
         "following_url" : "https://api.github.com/users/rkrux/following{/other_user}",
         "gists_url" : "https://api.github.com/users/rkrux/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/rkrux",
         "id" : 5960750,
         "login" : "rkrux",
         "node_id" : "MDQ6VXNlcjU5NjA3NTA=",
         "organizations_url" : "https://api.github.com/users/rkrux/orgs",
         "received_events_url" : "https://api.github.com/users/rkrux/received_events",
         "repos_url" : "https://api.github.com/users/rkrux/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/rkrux/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/rkrux/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/rkrux"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29523#discussion_r1650938860"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29523"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1650938860"
         }
      },
      "author_association" : "NONE",
      "body" : "Was the intention to write \"In order to ...\"?",
      "commit_id" : "b3ac1179ff90fe261af4e6dc9c7af64e1518b435",
      "created_at" : "2024-06-24T12:20:24Z",
      "diff_hunk" : "@@ -186,6 +191,49 @@ def run_test(self):\n         # Create and fund a raw tx for sending 10 BTC\n         psbtx1 = self.nodes[0].walletcreatefundedpsbt([], {self.nodes[2].getnewaddress():10})['psbt']\n \n+        self.log.info(\"Test for invalid maximum transaction weights\")\n+        dest_arg = [{self.nodes[0].getnewaddress(): 1}]\n+        min_tx_weight = MIN_STANDARD_TX_NONWITNESS_SIZE * WITNESS_SCALE_FACTOR\n+        assert_raises_rpc_error(-4, f\"Maximum transaction weight must be between {min_tx_weight} and {MAX_STANDARD_TX_WEIGHT}\", self.nodes[0].walletcreatefundedpsbt, [], dest_arg, 0, {\"max_tx_weight\": -1})\n+        assert_raises_rpc_error(-4, f\"Maximum transaction weight must be between {min_tx_weight} and {MAX_STANDARD_TX_WEIGHT}\", self.nodes[0].walletcreatefundedpsbt, [], dest_arg, 0, {\"max_tx_weight\": 0})\n+        assert_raises_rpc_error(-4, f\"Maximum transaction weight must be between {min_tx_weight} and {MAX_STANDARD_TX_WEIGHT}\", self.nodes[0].walletcreatefundedpsbt, [], dest_arg, 0, {\"max_tx_weight\": MAX_STANDARD_TX_WEIGHT + 1})\n+\n+        # Base transaction vsize: version (4) + locktime (4) + input count (1) + witness overhead (1) = 10 vbytes\n+        base_tx_vsize = 10\n+        # One P2WPKH output vsize: outpoint (31 vbytes)\n+        p2wpkh_output_vsize = 31\n+        # 1 vbyte for output count\n+        output_count = 1\n+        tx_weight_without_inputs = (base_tx_vsize + output_count + p2wpkh_output_vsize) * WITNESS_SCALE_FACTOR\n+        # min_tx_weight is greater than transaction weight without inputs\n+        assert_greater_than(min_tx_weight, tx_weight_without_inputs)\n+\n+        # In other to test for when the passed max weight is less than the transaction weight without inputs",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29523#discussion_r1650938860",
      "id" : 1650938860,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585iZ1Ps",
      "original_commit_id" : "723a8da8e562451facc8daa5d6ba61977f68cafe",
      "original_line" : 211,
      "original_position" : 47,
      "original_start_line" : null,
      "path" : "test/functional/rpc_psbt.py",
      "position" : null,
      "pull_request_review_id" : 2135369361,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29523",
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1650938860/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-06-24T12:36:10Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1650938860",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5960750?v=4",
         "events_url" : "https://api.github.com/users/rkrux/events{/privacy}",
         "followers_url" : "https://api.github.com/users/rkrux/followers",
         "following_url" : "https://api.github.com/users/rkrux/following{/other_user}",
         "gists_url" : "https://api.github.com/users/rkrux/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/rkrux",
         "id" : 5960750,
         "login" : "rkrux",
         "node_id" : "MDQ6VXNlcjU5NjA3NTA=",
         "organizations_url" : "https://api.github.com/users/rkrux/orgs",
         "received_events_url" : "https://api.github.com/users/rkrux/received_events",
         "repos_url" : "https://api.github.com/users/rkrux/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/rkrux/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/rkrux/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/rkrux"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29523#discussion_r1652431615"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29523"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1652431615"
         }
      },
      "author_association" : "MEMBER",
      "body" : "It's simply just to ensure consistency in transaction size and weight calculation within the wallet and prevents conversion overflow when calculating `max_selection_weight` as it happened here https://cirrus-ci.com/task/6341256662482944\r\n\r\n---\r\nI think it definitely will be worth it to define a datatype for size in the entire codebase.\r\nBut I am limiting this change to affects only the wallet size variables `change_output_size`, `change_spend_size` and `tx_noinputs_size`, because they relate to this PR.",
      "commit_id" : "b3ac1179ff90fe261af4e6dc9c7af64e1518b435",
      "created_at" : "2024-06-25T10:10:22Z",
      "diff_hunk" : "@@ -139,9 +139,9 @@ struct CoinSelectionParams {\n     /** Randomness to use in the context of coin selection. */\n     FastRandomContext& rng_fast;\n     /** Size of a change output in bytes, determined by the output type. */\n-    size_t change_output_size = 0;\n+    int change_output_size = 0;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29523#discussion_r1652431615",
      "id" : 1652431615,
      "in_reply_to_id" : 1650867991,
      "line" : 142,
      "node_id" : "PRRC_kwDOABII585ifhr_",
      "original_commit_id" : "80355372d55fa575818c749247c6d319915e20cb",
      "original_line" : 142,
      "original_position" : 5,
      "original_start_line" : 142,
      "path" : "src/wallet/coinselection.h",
      "position" : 5,
      "pull_request_review_id" : 2138127604,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29523",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1652431615/reactions"
      },
      "side" : "RIGHT",
      "start_line" : 142,
      "start_side" : "LEFT",
      "subject_type" : "line",
      "updated_at" : "2024-06-25T10:10:22Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1652431615",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/48946461?v=4",
         "events_url" : "https://api.github.com/users/ismaelsadeeq/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ismaelsadeeq/followers",
         "following_url" : "https://api.github.com/users/ismaelsadeeq/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ismaelsadeeq/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ismaelsadeeq",
         "id" : 48946461,
         "login" : "ismaelsadeeq",
         "node_id" : "MDQ6VXNlcjQ4OTQ2NDYx",
         "organizations_url" : "https://api.github.com/users/ismaelsadeeq/orgs",
         "received_events_url" : "https://api.github.com/users/ismaelsadeeq/received_events",
         "repos_url" : "https://api.github.com/users/ismaelsadeeq/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ismaelsadeeq/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ismaelsadeeq/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ismaelsadeeq"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29523#discussion_r1652442056"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29523"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1652442056"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Fixed.",
      "commit_id" : "b3ac1179ff90fe261af4e6dc9c7af64e1518b435",
      "created_at" : "2024-06-25T10:13:14Z",
      "diff_hunk" : "@@ -186,6 +191,49 @@ def run_test(self):\n         # Create and fund a raw tx for sending 10 BTC\n         psbtx1 = self.nodes[0].walletcreatefundedpsbt([], {self.nodes[2].getnewaddress():10})['psbt']\n \n+        self.log.info(\"Test for invalid maximum transaction weights\")\n+        dest_arg = [{self.nodes[0].getnewaddress(): 1}]\n+        min_tx_weight = MIN_STANDARD_TX_NONWITNESS_SIZE * WITNESS_SCALE_FACTOR\n+        assert_raises_rpc_error(-4, f\"Maximum transaction weight must be between {min_tx_weight} and {MAX_STANDARD_TX_WEIGHT}\", self.nodes[0].walletcreatefundedpsbt, [], dest_arg, 0, {\"max_tx_weight\": -1})\n+        assert_raises_rpc_error(-4, f\"Maximum transaction weight must be between {min_tx_weight} and {MAX_STANDARD_TX_WEIGHT}\", self.nodes[0].walletcreatefundedpsbt, [], dest_arg, 0, {\"max_tx_weight\": 0})\n+        assert_raises_rpc_error(-4, f\"Maximum transaction weight must be between {min_tx_weight} and {MAX_STANDARD_TX_WEIGHT}\", self.nodes[0].walletcreatefundedpsbt, [], dest_arg, 0, {\"max_tx_weight\": MAX_STANDARD_TX_WEIGHT + 1})\n+\n+        # Base transaction vsize: version (4) + locktime (4) + input count (1) + witness overhead (1) = 10 vbytes\n+        base_tx_vsize = 10\n+        # One P2WPKH output vsize: outpoint (31 vbytes)\n+        p2wpkh_output_vsize = 31\n+        # 1 vbyte for output count\n+        output_count = 1\n+        tx_weight_without_inputs = (base_tx_vsize + output_count + p2wpkh_output_vsize) * WITNESS_SCALE_FACTOR\n+        # min_tx_weight is greater than transaction weight without inputs\n+        assert_greater_than(min_tx_weight, tx_weight_without_inputs)\n+\n+        # In other to test for when the passed max weight is less than the transaction weight without inputs\n+        # Define destination with two outputs.\n+        dest_arg_large = [{self.nodes[0].getnewaddress(): 1}, {self.nodes[0].getnewaddress(): 1}]\n+        large_tx_vsize_without_inputs = base_tx_vsize + output_count + (p2wpkh_output_vsize * 2)\n+        large_tx_weight_without_inputs = large_tx_vsize_without_inputs * WITNESS_SCALE_FACTOR\n+        assert_greater_than(large_tx_weight_without_inputs, min_tx_weight)\n+        # Test for max_tx_weight less than Transaction weight without inputs\n+        assert_raises_rpc_error(-4, \"Maximum transaction weight is less than transaction weight without inputs\", self.nodes[0].walletcreatefundedpsbt, [], dest_arg_large, 0, {\"max_tx_weight\": min_tx_weight})\n+        assert_raises_rpc_error(-4, \"Maximum transaction weight is less than transaction weight without inputs\", self.nodes[0].walletcreatefundedpsbt, [], dest_arg_large, 0, {\"max_tx_weight\": large_tx_weight_without_inputs})\n+\n+        # Test for max_tx_weight just enough to include inputs but not change output\n+        assert_raises_rpc_error(-4, \"Maximum transaction weight is too low, can not accommodate change output\", self.nodes[0].walletcreatefundedpsbt, [], dest_arg_large, 0, {\"max_tx_weight\": (large_tx_vsize_without_inputs + 1) * WITNESS_SCALE_FACTOR})\n+        # Test that it has to accommodate a change output\n+        large_tx_vsize_with_change = large_tx_vsize_without_inputs + p2wpkh_output_vsize\n+        assert_raises_rpc_error(-4, \"Maximum transaction weight is too low, can not accommodate change output\", self.nodes[0].walletcreatefundedpsbt, [], dest_arg_large, 0, {\"max_tx_weight\": (large_tx_vsize_with_change) * WITNESS_SCALE_FACTOR})\n+\n+        self.log.info(\"Test that a funded PSBT is always faithful to max_tx_weight option\")\n+        # It's enough but won't accommodate selected input size\n+        assert_raises_rpc_error(-4, \"The inputs size exceeds the maximum weight\", self.nodes[0].walletcreatefundedpsbt, [], dest_arg_large, 0, {\"max_tx_weight\": (large_tx_vsize_with_change + 1) * WITNESS_SCALE_FACTOR})\n+\n+        max_tx_weight_sufficient = 1000 # 1k vbytes is enough\n+        psbt = self.nodes[0].walletcreatefundedpsbt(outputs=dest_arg,locktime=0, options={\"max_tx_weight\": max_tx_weight_sufficient})[\"psbt\"]\n+        weight = self.nodes[0].decodepsbt(psbt)[\"tx\"][\"weight\"]\n+        # ensure the transactions weight is below the transaction weight.",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29523#discussion_r1652442056",
      "id" : 1652442056,
      "in_reply_to_id" : 1650936364,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585ifkPI",
      "original_commit_id" : "723a8da8e562451facc8daa5d6ba61977f68cafe",
      "original_line" : 234,
      "original_position" : 70,
      "original_start_line" : null,
      "path" : "test/functional/rpc_psbt.py",
      "position" : null,
      "pull_request_review_id" : 2138142716,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29523",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1652442056/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-06-25T10:13:15Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1652442056",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/48946461?v=4",
         "events_url" : "https://api.github.com/users/ismaelsadeeq/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ismaelsadeeq/followers",
         "following_url" : "https://api.github.com/users/ismaelsadeeq/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ismaelsadeeq/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ismaelsadeeq",
         "id" : 48946461,
         "login" : "ismaelsadeeq",
         "node_id" : "MDQ6VXNlcjQ4OTQ2NDYx",
         "organizations_url" : "https://api.github.com/users/ismaelsadeeq/orgs",
         "received_events_url" : "https://api.github.com/users/ismaelsadeeq/received_events",
         "repos_url" : "https://api.github.com/users/ismaelsadeeq/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ismaelsadeeq/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ismaelsadeeq/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ismaelsadeeq"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29523#discussion_r1652443303"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29523"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1652443303"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Yes updated",
      "commit_id" : "b3ac1179ff90fe261af4e6dc9c7af64e1518b435",
      "created_at" : "2024-06-25T10:13:26Z",
      "diff_hunk" : "@@ -186,6 +191,49 @@ def run_test(self):\n         # Create and fund a raw tx for sending 10 BTC\n         psbtx1 = self.nodes[0].walletcreatefundedpsbt([], {self.nodes[2].getnewaddress():10})['psbt']\n \n+        self.log.info(\"Test for invalid maximum transaction weights\")\n+        dest_arg = [{self.nodes[0].getnewaddress(): 1}]\n+        min_tx_weight = MIN_STANDARD_TX_NONWITNESS_SIZE * WITNESS_SCALE_FACTOR\n+        assert_raises_rpc_error(-4, f\"Maximum transaction weight must be between {min_tx_weight} and {MAX_STANDARD_TX_WEIGHT}\", self.nodes[0].walletcreatefundedpsbt, [], dest_arg, 0, {\"max_tx_weight\": -1})\n+        assert_raises_rpc_error(-4, f\"Maximum transaction weight must be between {min_tx_weight} and {MAX_STANDARD_TX_WEIGHT}\", self.nodes[0].walletcreatefundedpsbt, [], dest_arg, 0, {\"max_tx_weight\": 0})\n+        assert_raises_rpc_error(-4, f\"Maximum transaction weight must be between {min_tx_weight} and {MAX_STANDARD_TX_WEIGHT}\", self.nodes[0].walletcreatefundedpsbt, [], dest_arg, 0, {\"max_tx_weight\": MAX_STANDARD_TX_WEIGHT + 1})\n+\n+        # Base transaction vsize: version (4) + locktime (4) + input count (1) + witness overhead (1) = 10 vbytes\n+        base_tx_vsize = 10\n+        # One P2WPKH output vsize: outpoint (31 vbytes)\n+        p2wpkh_output_vsize = 31\n+        # 1 vbyte for output count\n+        output_count = 1\n+        tx_weight_without_inputs = (base_tx_vsize + output_count + p2wpkh_output_vsize) * WITNESS_SCALE_FACTOR\n+        # min_tx_weight is greater than transaction weight without inputs\n+        assert_greater_than(min_tx_weight, tx_weight_without_inputs)\n+\n+        # In other to test for when the passed max weight is less than the transaction weight without inputs",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29523#discussion_r1652443303",
      "id" : 1652443303,
      "in_reply_to_id" : 1650938860,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585ifkin",
      "original_commit_id" : "723a8da8e562451facc8daa5d6ba61977f68cafe",
      "original_line" : 211,
      "original_position" : 47,
      "original_start_line" : null,
      "path" : "test/functional/rpc_psbt.py",
      "position" : null,
      "pull_request_review_id" : 2138144412,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29523",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1652443303/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-06-25T10:13:26Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1652443303",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/48946461?v=4",
         "events_url" : "https://api.github.com/users/ismaelsadeeq/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ismaelsadeeq/followers",
         "following_url" : "https://api.github.com/users/ismaelsadeeq/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ismaelsadeeq/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ismaelsadeeq",
         "id" : 48946461,
         "login" : "ismaelsadeeq",
         "node_id" : "MDQ6VXNlcjQ4OTQ2NDYx",
         "organizations_url" : "https://api.github.com/users/ismaelsadeeq/orgs",
         "received_events_url" : "https://api.github.com/users/ismaelsadeeq/received_events",
         "repos_url" : "https://api.github.com/users/ismaelsadeeq/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ismaelsadeeq/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ismaelsadeeq/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ismaelsadeeq"
      }
   }
]
