[
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage\nFor detailed information about the code coverage, see the [test coverage report](https://corecheck.dev/bitcoin/bitcoin/pulls/28998).\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| Concept ACK | [pablomartin4btc](https://github.com/bitcoin/bitcoin/pull/28998#pullrequestreview-1765800678), [jonatack](https://github.com/bitcoin/bitcoin/pull/28998#pullrequestreview-1766137449), [stratospher](https://github.com/bitcoin/bitcoin/pull/28998#issuecomment-1842434756), [amitiuttarwar](https://github.com/bitcoin/bitcoin/pull/28998#issuecomment-1850781513), [brunoerg](https://github.com/bitcoin/bitcoin/pull/28998#issuecomment-1992027727) |\n| Approach ACK | [sr-gi](https://github.com/bitcoin/bitcoin/pull/28998#pullrequestreview-1868852542) |\n\nIf your review is incorrectly listed, please react with ð to this comment and the bot will ignore it on the next update.\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#29639](https://github.com/bitcoin/bitcoin/pull/29639) (test: fix intermittent failures with test=addrman by mzumsande)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.\n",
      "created_at" : "2023-12-05T14:21:57Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28998#issuecomment-1840889202",
      "id" : 1840889202,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28998",
      "node_id" : "IC_kwDOABII585tub1y",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1840889202/reactions"
      },
      "updated_at" : "2024-03-13T00:39:29Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1840889202",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28998#discussion_r1415701162"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28998"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1415701162"
         }
      },
      "author_association" : "MEMBER",
      "body" : "nit: no need for those\r\n\r\n```suggestion\r\n        \"Add the address of a potential peer to an address manager table. This RPC is for testing only.\",\r\n```",
      "commit_id" : "cf54bc7aaace7f17d851b38415844b03b773e1a4",
      "created_at" : "2023-12-05T14:26:34Z",
      "diff_hunk" : "@@ -944,7 +944,7 @@ static RPCHelpMan getnodeaddresses()\n static RPCHelpMan addpeeraddress()\n {\n     return RPCHelpMan{\"addpeeraddress\",\n-        \"\\nAdd the address of a potential peer to the address manager. This RPC is for testing only.\\n\",\n+        \"\\nAdd the address of a potential peer to an address manager table. This RPC is for testing only.\\n\",",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28998#discussion_r1415701162",
      "id" : 1415701162,
      "line" : 947,
      "node_id" : "PRRC_kwDOABII585UYeKq",
      "original_commit_id" : "cf54bc7aaace7f17d851b38415844b03b773e1a4",
      "original_line" : 947,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "src/rpc/net.cpp",
      "position" : 5,
      "pull_request_review_id" : 1765221105,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28998",
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1415701162/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-12-05T14:31:05Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1415701162",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/maflcko/events{/privacy}",
         "followers_url" : "https://api.github.com/users/maflcko/followers",
         "following_url" : "https://api.github.com/users/maflcko/following{/other_user}",
         "gists_url" : "https://api.github.com/users/maflcko/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/maflcko",
         "id" : 6399679,
         "login" : "maflcko",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/maflcko/orgs",
         "received_events_url" : "https://api.github.com/users/maflcko/received_events",
         "repos_url" : "https://api.github.com/users/maflcko/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/maflcko/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/maflcko/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/maflcko"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28998#discussion_r1415708737"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28998"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1415708737"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Is a copy the right way, or does it need to be removed from the expected tried table?\r\n\r\nMaybe add steps to reproduce the test code?",
      "commit_id" : "cf54bc7aaace7f17d851b38415844b03b773e1a4",
      "created_at" : "2023-12-05T14:30:58Z",
      "diff_hunk" : "@@ -495,11 +495,20 @@ def check_getrawaddrman_entries(expected):\n             # added. Incrementing the port changes the position in the new table bucket (bucket\n             # stays the same) and changes both the bucket and the position in the tried table.\n             while True:\n-                if node.addpeeraddress(address=table_info[\"entries\"][1][\"address\"], port=port, tried=table_name == \"tried\")[\"success\"]:\n+                result = node.addpeeraddress(address=table_info[\"entries\"][1][\"address\"], port=port, tried=table_name == \"tried\")\n+                if result[\"success\"]:\n                     table_info[\"entries\"][1][\"port\"] = port\n                     self.log.debug(f\"Added {table_info['entries'][1]['address']} to {table_name} table\")\n                     break\n                 else:\n+                    self.log.debug(f\"Failed to add {table_info['entries'][1]['address']} to {table_name} table\")\n+                    # When trying to add an address to the tried table, it's first added to the\n+                    # new table and then moved to the tried table. If the move to the tried table\n+                    # fails, the address still remains in the new table.\n+                    if table_name == \"tried\" and result[\"error\"] == \"faild-adding-to-tried\":\n+                        entry = table_info[\"entries\"][1]",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28998#discussion_r1415708737",
      "id" : 1415708737,
      "line" : 509,
      "node_id" : "PRRC_kwDOABII585UYgBB",
      "original_commit_id" : "cf54bc7aaace7f17d851b38415844b03b773e1a4",
      "original_line" : 509,
      "original_position" : 25,
      "original_start_line" : null,
      "path" : "test/functional/rpc_net.py",
      "position" : 25,
      "pull_request_review_id" : 1765221105,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28998",
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1415708737/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-12-05T14:31:05Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1415708737",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/maflcko/events{/privacy}",
         "followers_url" : "https://api.github.com/users/maflcko/followers",
         "following_url" : "https://api.github.com/users/maflcko/following{/other_user}",
         "gists_url" : "https://api.github.com/users/maflcko/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/maflcko",
         "id" : 6399679,
         "login" : "maflcko",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/maflcko/orgs",
         "received_events_url" : "https://api.github.com/users/maflcko/received_events",
         "repos_url" : "https://api.github.com/users/maflcko/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/maflcko/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/maflcko/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/maflcko"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28998#discussion_r1416294937"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28998"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1416294937"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "```suggestion\r\n                    if table_name == \"tried\" and result[\"error\"] == \"failed-adding-to-tried\":\r\n```\r\n\r\n(edit, seems this should be covered by a test in every case)",
      "commit_id" : "cf54bc7aaace7f17d851b38415844b03b773e1a4",
      "created_at" : "2023-12-05T21:24:53Z",
      "diff_hunk" : "@@ -495,11 +495,20 @@ def check_getrawaddrman_entries(expected):\n             # added. Incrementing the port changes the position in the new table bucket (bucket\n             # stays the same) and changes both the bucket and the position in the tried table.\n             while True:\n-                if node.addpeeraddress(address=table_info[\"entries\"][1][\"address\"], port=port, tried=table_name == \"tried\")[\"success\"]:\n+                result = node.addpeeraddress(address=table_info[\"entries\"][1][\"address\"], port=port, tried=table_name == \"tried\")\n+                if result[\"success\"]:\n                     table_info[\"entries\"][1][\"port\"] = port\n                     self.log.debug(f\"Added {table_info['entries'][1]['address']} to {table_name} table\")\n                     break\n                 else:\n+                    self.log.debug(f\"Failed to add {table_info['entries'][1]['address']} to {table_name} table\")\n+                    # When trying to add an address to the tried table, it's first added to the\n+                    # new table and then moved to the tried table. If the move to the tried table\n+                    # fails, the address still remains in the new table.\n+                    if table_name == \"tried\" and result[\"error\"] == \"faild-adding-to-tried\":",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28998#discussion_r1416294937",
      "id" : 1416294937,
      "line" : 508,
      "node_id" : "PRRC_kwDOABII585UavIZ",
      "original_commit_id" : "cf54bc7aaace7f17d851b38415844b03b773e1a4",
      "original_line" : 508,
      "original_position" : 24,
      "original_start_line" : null,
      "path" : "test/functional/rpc_net.py",
      "position" : 24,
      "pull_request_review_id" : 1766137449,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28998",
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1416294937/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-12-05T21:27:26Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1416294937",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28998#discussion_r1416295706"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28998"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1416295706"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Not sure, maybe test explicitly for `True` rather than just truthy\r\n\r\n```suggestion\r\n                if result[\"success\"] is True:\r\n```",
      "commit_id" : "cf54bc7aaace7f17d851b38415844b03b773e1a4",
      "created_at" : "2023-12-05T21:25:37Z",
      "diff_hunk" : "@@ -495,11 +495,20 @@ def check_getrawaddrman_entries(expected):\n             # added. Incrementing the port changes the position in the new table bucket (bucket\n             # stays the same) and changes both the bucket and the position in the tried table.\n             while True:\n-                if node.addpeeraddress(address=table_info[\"entries\"][1][\"address\"], port=port, tried=table_name == \"tried\")[\"success\"]:\n+                result = node.addpeeraddress(address=table_info[\"entries\"][1][\"address\"], port=port, tried=table_name == \"tried\")\n+                if result[\"success\"]:",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28998#discussion_r1416295706",
      "id" : 1416295706,
      "line" : 499,
      "node_id" : "PRRC_kwDOABII585UavUa",
      "original_commit_id" : "cf54bc7aaace7f17d851b38415844b03b773e1a4",
      "original_line" : 499,
      "original_position" : 15,
      "original_start_line" : null,
      "path" : "test/functional/rpc_net.py",
      "position" : 15,
      "pull_request_review_id" : 1766137449,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28998",
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1416295706/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-12-05T21:25:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1416295706",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Concept ACK. it's nice to clearly define success/failure paths for `addpeeraddress`. hopefully after #29007, these rare collisions won't happen since a fixed `nKey` can be used.",
      "created_at" : "2023-12-06T08:42:07Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28998#issuecomment-1842434756",
      "id" : 1842434756,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28998",
      "node_id" : "IC_kwDOABII585t0VLE",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1842434756/reactions"
      },
      "updated_at" : "2023-12-06T08:42:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1842434756",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/44024636?v=4",
         "events_url" : "https://api.github.com/users/stratospher/events{/privacy}",
         "followers_url" : "https://api.github.com/users/stratospher/followers",
         "following_url" : "https://api.github.com/users/stratospher/following{/other_user}",
         "gists_url" : "https://api.github.com/users/stratospher/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/stratospher",
         "id" : 44024636,
         "login" : "stratospher",
         "node_id" : "MDQ6VXNlcjQ0MDI0NjM2",
         "organizations_url" : "https://api.github.com/users/stratospher/orgs",
         "received_events_url" : "https://api.github.com/users/stratospher/received_events",
         "repos_url" : "https://api.github.com/users/stratospher/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/stratospher/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/stratospher/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/stratospher"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28998#discussion_r1417047413"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28998"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1417047413"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "> Is a copy the right way, or does it need to be removed from the expected tried table?\r\n\r\nJust removing the address from the _expected_ tried table does not work. It's still in the new table. So the question would rather be: \"Do we need to retry adding the address to the tried table?\". I guess that's debatable. We're only running into this case very rarely when there's a collision - all other runs test that this works. This should be solved with #29007.\r\n\r\n> Maybe add steps to reproduce the test code?\r\n\r\nYes, I think we should have that. Especially with typos like https://github.com/bitcoin/bitcoin/pull/28998#discussion_r1416294937. Due to addrman non-determinism, this isn't really doable. Again, #29007 helps here. \r\n",
      "commit_id" : "cf54bc7aaace7f17d851b38415844b03b773e1a4",
      "created_at" : "2023-12-06T10:11:43Z",
      "diff_hunk" : "@@ -495,11 +495,20 @@ def check_getrawaddrman_entries(expected):\n             # added. Incrementing the port changes the position in the new table bucket (bucket\n             # stays the same) and changes both the bucket and the position in the tried table.\n             while True:\n-                if node.addpeeraddress(address=table_info[\"entries\"][1][\"address\"], port=port, tried=table_name == \"tried\")[\"success\"]:\n+                result = node.addpeeraddress(address=table_info[\"entries\"][1][\"address\"], port=port, tried=table_name == \"tried\")\n+                if result[\"success\"]:\n                     table_info[\"entries\"][1][\"port\"] = port\n                     self.log.debug(f\"Added {table_info['entries'][1]['address']} to {table_name} table\")\n                     break\n                 else:\n+                    self.log.debug(f\"Failed to add {table_info['entries'][1]['address']} to {table_name} table\")\n+                    # When trying to add an address to the tried table, it's first added to the\n+                    # new table and then moved to the tried table. If the move to the tried table\n+                    # fails, the address still remains in the new table.\n+                    if table_name == \"tried\" and result[\"error\"] == \"faild-adding-to-tried\":\n+                        entry = table_info[\"entries\"][1]",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28998#discussion_r1417047413",
      "id" : 1417047413,
      "in_reply_to_id" : 1415708737,
      "line" : 509,
      "node_id" : "PRRC_kwDOABII585Udm11",
      "original_commit_id" : "cf54bc7aaace7f17d851b38415844b03b773e1a4",
      "original_line" : 509,
      "original_position" : 25,
      "original_start_line" : null,
      "path" : "test/functional/rpc_net.py",
      "position" : 25,
      "pull_request_review_id" : 1767179279,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28998",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1417047413/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-12-06T10:11:43Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1417047413",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/19157360?v=4",
         "events_url" : "https://api.github.com/users/0xB10C/events{/privacy}",
         "followers_url" : "https://api.github.com/users/0xB10C/followers",
         "following_url" : "https://api.github.com/users/0xB10C/following{/other_user}",
         "gists_url" : "https://api.github.com/users/0xB10C/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/0xB10C",
         "id" : 19157360,
         "login" : "0xB10C",
         "node_id" : "MDQ6VXNlcjE5MTU3MzYw",
         "organizations_url" : "https://api.github.com/users/0xB10C/orgs",
         "received_events_url" : "https://api.github.com/users/0xB10C/received_events",
         "repos_url" : "https://api.github.com/users/0xB10C/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/0xB10C/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/0xB10C/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/0xB10C"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Maybe get #29007 in first. ~This allows us to remove the getrawaddrman-test retry logic (possibly do it there). Makes the `getrawaddrman` test simpler.~ edit: I just noticed that 29007 already does that!\r\n\r\nI've addressed the minor comments here, but I think it makes sense to draft this PR for now until #29007 is in. With #29007 we can test the collision case when `addpeeraddress tried` returns `{\"success\": false, \"error\": \"failed-adding-to-tried\"}` as discussed in https://github.com/bitcoin/bitcoin/pull/28998#discussion_r1417047413. ",
      "created_at" : "2023-12-06T10:48:25Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28998#issuecomment-1842629300",
      "id" : 1842629300,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28998",
      "node_id" : "IC_kwDOABII585t1Eq0",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1842629300/reactions"
      },
      "updated_at" : "2023-12-06T10:57:12Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1842629300",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/19157360?v=4",
         "events_url" : "https://api.github.com/users/0xB10C/events{/privacy}",
         "followers_url" : "https://api.github.com/users/0xB10C/followers",
         "following_url" : "https://api.github.com/users/0xB10C/following{/other_user}",
         "gists_url" : "https://api.github.com/users/0xB10C/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/0xB10C",
         "id" : 19157360,
         "login" : "0xB10C",
         "node_id" : "MDQ6VXNlcjE5MTU3MzYw",
         "organizations_url" : "https://api.github.com/users/0xB10C/orgs",
         "received_events_url" : "https://api.github.com/users/0xB10C/received_events",
         "repos_url" : "https://api.github.com/users/0xB10C/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/0xB10C/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/0xB10C/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/0xB10C"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "approach ACK \r\n\r\n> (the address manager interface does not support removing addresses at the moment and adding this seems to be a bigger effort)\r\n\r\nsince right now the only way addresses are kicked off is triggered by a collision, removing addresses from addrman would require introducing new test-only code paths. in addition to being a bigger effort, it would increase the surface area of potential issues in the future. eg. if someone tried to use it with mainnet code. when I was learning addrman, it took a while for me to wrap my head around the only-removed-by-collision logic (how it works, the reasoning, etc.), and I find it valuable for the tests to encourage devs familiarizing with the pattern that's used in the wild.\r\n\r\nthis is to provide some context behind my approach ACK. the solution proposed here is scoped to the RPC code, which is appropriate for improving the currently misleading RPC interface. ",
      "created_at" : "2023-12-11T19:52:23Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28998#issuecomment-1850781513",
      "id" : 1850781513,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28998",
      "node_id" : "IC_kwDOABII585uUK9J",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1850781513/reactions"
      },
      "updated_at" : "2023-12-11T19:52:23Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1850781513",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1500952?v=4",
         "events_url" : "https://api.github.com/users/amitiuttarwar/events{/privacy}",
         "followers_url" : "https://api.github.com/users/amitiuttarwar/followers",
         "following_url" : "https://api.github.com/users/amitiuttarwar/following{/other_user}",
         "gists_url" : "https://api.github.com/users/amitiuttarwar/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/amitiuttarwar",
         "id" : 1500952,
         "login" : "amitiuttarwar",
         "node_id" : "MDQ6VXNlcjE1MDA5NTI=",
         "organizations_url" : "https://api.github.com/users/amitiuttarwar/orgs",
         "received_events_url" : "https://api.github.com/users/amitiuttarwar/received_events",
         "repos_url" : "https://api.github.com/users/amitiuttarwar/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/amitiuttarwar/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/amitiuttarwar/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/amitiuttarwar"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28998#discussion_r1482129839"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28998"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1482129839"
         }
      },
      "author_association" : "MEMBER",
      "body" : "This is a non-exhaustive case now. There are two potential error outcomes that can be triggered on demand, from which only one is being tested:\r\n\r\n- a) The address is already in `new` and we are trying to add it again (to any table)\r\n- b) The address is already in `tried` and we are trying to add it again (to any table)\r\n\r\nIn this case, only `b)` is being tested: we do so both with and without the \"try to add to tried\" flag, but the reality is that the reason why the function is failing is the entry is already present in `tried`, even when we try to add it to `new`. Given how the addrman works, we cannot really try to add things to `tried` multiple times on demand, given it would need to be added to `new` first and that would fail.\r\n\r\nSo I think the only way to properly test this would be to add two different addresses twice. e.g:\r\n\r\n```python\r\n# Try that the same address cannot be added twice to `new`\r\nassert_equal(node.addpeeraddress(address=\"1.2.3.5\", tried=False, port=8333), {\"success\": True})\r\nassert_equal(node.addpeeraddress(address=\"1.2.3.5\", tried=False, port=8333), {\"success\": False, \"error\": \"failed-adding-to-new\"})\r\n# Try that the same address cannot be added twice to `tried`\r\nassert_equal(node.addpeeraddress(address=\"1.2.3.6\", tried=True, port=8333), {\"success\": True})\r\nassert_equal(node.addpeeraddress(address=\"1.2.3.6\", tried=True, port=8333), {\"success\": False, \"error\": \"failed-adding-to-new\"})\r\n```",
      "commit_id" : "4f251842dd33ac8b6e845ced948b2ccc79d1f8a8",
      "created_at" : "2024-02-07T21:39:26Z",
      "diff_hunk" : "@@ -336,7 +336,7 @@ def test_addpeeraddress(self):\n \n         self.log.debug(\"Test that adding an already-present tried address to the new and tried tables fails\")\n         for value in [True, False]:\n-            assert_equal(node.addpeeraddress(address=\"1.2.3.4\", tried=value, port=8333), {\"success\": False})\n+            assert_equal(node.addpeeraddress(address=\"1.2.3.4\", tried=value, port=8333), {\"success\": False, \"error\": \"failed-adding-to-new\"})",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28998#discussion_r1482129839",
      "id" : 1482129839,
      "line" : 339,
      "node_id" : "PRRC_kwDOABII585YV4Gv",
      "original_commit_id" : "4f251842dd33ac8b6e845ced948b2ccc79d1f8a8",
      "original_line" : 339,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "test/functional/rpc_net.py",
      "position" : 5,
      "pull_request_review_id" : 1868852542,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28998",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1482129839/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-02-07T21:44:10Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1482129839",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6665628?v=4",
         "events_url" : "https://api.github.com/users/sr-gi/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sr-gi/followers",
         "following_url" : "https://api.github.com/users/sr-gi/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sr-gi/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sr-gi",
         "id" : 6665628,
         "login" : "sr-gi",
         "node_id" : "MDQ6VXNlcjY2NjU2Mjg=",
         "organizations_url" : "https://api.github.com/users/sr-gi/orgs",
         "received_events_url" : "https://api.github.com/users/sr-gi/received_events",
         "repos_url" : "https://api.github.com/users/sr-gi/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sr-gi/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sr-gi/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sr-gi"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Thanks for the review @sr-gi! You might want to take a look at #29007 first - this allows us to also test `failed-adding-to-tried`. Once this is merged, I'll continue to work on this PR. ",
      "created_at" : "2024-02-09T09:35:05Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28998#issuecomment-1935600643",
      "id" : 1935600643,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28998",
      "node_id" : "IC_kwDOABII585zXuwD",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1935600643/reactions"
      },
      "updated_at" : "2024-02-09T09:35:05Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1935600643",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/19157360?v=4",
         "events_url" : "https://api.github.com/users/0xB10C/events{/privacy}",
         "followers_url" : "https://api.github.com/users/0xB10C/followers",
         "following_url" : "https://api.github.com/users/0xB10C/following{/other_user}",
         "gists_url" : "https://api.github.com/users/0xB10C/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/0xB10C",
         "id" : 19157360,
         "login" : "0xB10C",
         "node_id" : "MDQ6VXNlcjE5MTU3MzYw",
         "organizations_url" : "https://api.github.com/users/0xB10C/orgs",
         "received_events_url" : "https://api.github.com/users/0xB10C/received_events",
         "repos_url" : "https://api.github.com/users/0xB10C/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/0xB10C/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/0xB10C/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/0xB10C"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->\nð This pull request conflicts with the target branch and [needs rebase](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#rebasing-changes).\n",
      "created_at" : "2024-03-11T14:34:18Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28998#issuecomment-1988588668",
      "id" : 1988588668,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28998",
      "node_id" : "IC_kwDOABII5852h3R8",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1988588668/reactions"
      },
      "updated_at" : "2024-03-11T14:34:18Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1988588668",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28998#discussion_r1521458993"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28998"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1521458993"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Resolving this with the rebase on-top of #29007 as this code was removed in 2cc8ca19f4185490f30a49516c890b2289fbab71. The addresses are now added in [seed_addrman()](https://github.com/bitcoin/bitcoin/pull/29007/commits/2cc8ca19f4185490f30a49516c890b2289fbab71#diff-355d4500a3163e554fc3c3051b21b6bc9a97bcb35b146bff17d5fc1b4e4fd650R44) and ([currently](https://github.com/bitcoin/bitcoin/pull/29007/commits/2cc8ca19f4185490f30a49516c890b2289fbab71#r1521452867)) can't produce a collision.",
      "commit_id" : "99954f914f031c80aa53daa367fc049c4c55bdf3",
      "created_at" : "2024-03-12T13:23:17Z",
      "diff_hunk" : "@@ -495,11 +495,20 @@ def check_getrawaddrman_entries(expected):\n             # added. Incrementing the port changes the position in the new table bucket (bucket\n             # stays the same) and changes both the bucket and the position in the tried table.\n             while True:\n-                if node.addpeeraddress(address=table_info[\"entries\"][1][\"address\"], port=port, tried=table_name == \"tried\")[\"success\"]:\n+                result = node.addpeeraddress(address=table_info[\"entries\"][1][\"address\"], port=port, tried=table_name == \"tried\")\n+                if result[\"success\"]:\n                     table_info[\"entries\"][1][\"port\"] = port\n                     self.log.debug(f\"Added {table_info['entries'][1]['address']} to {table_name} table\")\n                     break\n                 else:\n+                    self.log.debug(f\"Failed to add {table_info['entries'][1]['address']} to {table_name} table\")\n+                    # When trying to add an address to the tried table, it's first added to the\n+                    # new table and then moved to the tried table. If the move to the tried table\n+                    # fails, the address still remains in the new table.\n+                    if table_name == \"tried\" and result[\"error\"] == \"faild-adding-to-tried\":\n+                        entry = table_info[\"entries\"][1]",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28998#discussion_r1521458993",
      "id" : 1521458993,
      "in_reply_to_id" : 1415708737,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585ar58x",
      "original_commit_id" : "cf54bc7aaace7f17d851b38415844b03b773e1a4",
      "original_line" : 509,
      "original_position" : 25,
      "original_start_line" : null,
      "path" : "test/functional/rpc_net.py",
      "position" : null,
      "pull_request_review_id" : 1931055070,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28998",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1521458993/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-03-12T13:23:17Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1521458993",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/19157360?v=4",
         "events_url" : "https://api.github.com/users/0xB10C/events{/privacy}",
         "followers_url" : "https://api.github.com/users/0xB10C/followers",
         "following_url" : "https://api.github.com/users/0xB10C/following{/other_user}",
         "gists_url" : "https://api.github.com/users/0xB10C/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/0xB10C",
         "id" : 19157360,
         "login" : "0xB10C",
         "node_id" : "MDQ6VXNlcjE5MTU3MzYw",
         "organizations_url" : "https://api.github.com/users/0xB10C/orgs",
         "received_events_url" : "https://api.github.com/users/0xB10C/received_events",
         "repos_url" : "https://api.github.com/users/0xB10C/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/0xB10C/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/0xB10C/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/0xB10C"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28998#discussion_r1521580711"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28998"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1521580711"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Done!",
      "commit_id" : "99954f914f031c80aa53daa367fc049c4c55bdf3",
      "created_at" : "2024-03-12T14:33:37Z",
      "diff_hunk" : "@@ -336,7 +336,7 @@ def test_addpeeraddress(self):\n \n         self.log.debug(\"Test that adding an already-present tried address to the new and tried tables fails\")\n         for value in [True, False]:\n-            assert_equal(node.addpeeraddress(address=\"1.2.3.4\", tried=value, port=8333), {\"success\": False})\n+            assert_equal(node.addpeeraddress(address=\"1.2.3.4\", tried=value, port=8333), {\"success\": False, \"error\": \"failed-adding-to-new\"})",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28998#discussion_r1521580711",
      "id" : 1521580711,
      "in_reply_to_id" : 1482129839,
      "line" : 369,
      "node_id" : "PRRC_kwDOABII585asXqn",
      "original_commit_id" : "4f251842dd33ac8b6e845ced948b2ccc79d1f8a8",
      "original_line" : 369,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "test/functional/rpc_net.py",
      "position" : 55,
      "pull_request_review_id" : 1931252352,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28998",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1521580711/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-03-12T14:33:37Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1521580711",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/19157360?v=4",
         "events_url" : "https://api.github.com/users/0xB10C/events{/privacy}",
         "followers_url" : "https://api.github.com/users/0xB10C/followers",
         "following_url" : "https://api.github.com/users/0xB10C/following{/other_user}",
         "gists_url" : "https://api.github.com/users/0xB10C/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/0xB10C",
         "id" : 19157360,
         "login" : "0xB10C",
         "node_id" : "MDQ6VXNlcjE5MTU3MzYw",
         "organizations_url" : "https://api.github.com/users/0xB10C/orgs",
         "received_events_url" : "https://api.github.com/users/0xB10C/received_events",
         "repos_url" : "https://api.github.com/users/0xB10C/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/0xB10C/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/0xB10C/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/0xB10C"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Rebased on #29007, which allows us to check the `failed-adding-to-tried` case. I've also incorporated https://github.com/bitcoin/bitcoin/pull/28998#pullrequestreview-1868852542, and, as I was touching it anyway, replaced the log-assertions `assert_debug_log` on `CheckAddrman: new X, tried Y, total Z started` with `getaddrmaninfo` and `getrawaddrman` calls (which weren't available when the test was added). I've kept the existing `getnodeaddresses` calls, as these re-run the addrman checks.\r\n\r\nAlso, as I'm touching it already, I've dropped the now unused (since 2cc8ca19f4185490f30a49516c890b2289fbab71) mocktime from `test_addpeeraddress()`. Since #29007, the test does not leak into `test_getrawaddrman()` anymore. \r\n\r\nThis is ready for review again.",
      "created_at" : "2024-03-12T14:47:00Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28998#issuecomment-1991824473",
      "id" : 1991824473,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28998",
      "node_id" : "IC_kwDOABII5852uNRZ",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1991824473/reactions"
      },
      "updated_at" : "2024-03-12T14:47:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1991824473",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/19157360?v=4",
         "events_url" : "https://api.github.com/users/0xB10C/events{/privacy}",
         "followers_url" : "https://api.github.com/users/0xB10C/followers",
         "following_url" : "https://api.github.com/users/0xB10C/following{/other_user}",
         "gists_url" : "https://api.github.com/users/0xB10C/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/0xB10C",
         "id" : 19157360,
         "login" : "0xB10C",
         "node_id" : "MDQ6VXNlcjE5MTU3MzYw",
         "organizations_url" : "https://api.github.com/users/0xB10C/orgs",
         "received_events_url" : "https://api.github.com/users/0xB10C/received_events",
         "repos_url" : "https://api.github.com/users/0xB10C/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/0xB10C/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/0xB10C/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/0xB10C"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Concept ACK\r\n\r\nI had this issue when writing #28869.",
      "created_at" : "2024-03-12T16:11:14Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28998#issuecomment-1992027727",
      "id" : 1992027727,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28998",
      "node_id" : "IC_kwDOABII5852u-5P",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1992027727/reactions"
      },
      "updated_at" : "2024-03-12T16:11:14Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1992027727",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/19480819?v=4",
         "events_url" : "https://api.github.com/users/brunoerg/events{/privacy}",
         "followers_url" : "https://api.github.com/users/brunoerg/followers",
         "following_url" : "https://api.github.com/users/brunoerg/following{/other_user}",
         "gists_url" : "https://api.github.com/users/brunoerg/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/brunoerg",
         "id" : 19480819,
         "login" : "brunoerg",
         "node_id" : "MDQ6VXNlcjE5NDgwODE5",
         "organizations_url" : "https://api.github.com/users/brunoerg/orgs",
         "received_events_url" : "https://api.github.com/users/brunoerg/received_events",
         "repos_url" : "https://api.github.com/users/brunoerg/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/brunoerg/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/brunoerg/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/brunoerg"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28998#discussion_r1525749459"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28998"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1525749459"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "edc8cb64: nice one!\r\nnit: small typo - s/produrces/produces",
      "commit_id" : "99954f914f031c80aa53daa367fc049c4c55bdf3",
      "created_at" : "2024-03-15T04:36:16Z",
      "diff_hunk" : "@@ -338,26 +340,52 @@ def test_addpeeraddress(self):\n         assert_raises_rpc_error(-1, \"JSON integer out of range\", self.nodes[0].addpeeraddress, address=\"1.2.3.4\", port=-1)\n         assert_raises_rpc_error(-1, \"JSON integer out of range\", self.nodes[0].addpeeraddress, address=\"1.2.3.4\", port=65536)\n \n+        self.log.debug(\"Test that adding a valid address to the new table succeeds\")\n+        assert_equal(node.addpeeraddress(address=\"1.0.0.0\", tried=False, port=8333), {\"success\": True})\n+        addrman = node.getrawaddrman()\n+        assert_equal(len(list(addrman[\"tried\"].values())), 0)\n+        new_table = list(addrman[\"new\"].values())\n+        assert_equal(len(new_table), 1)\n+        assert_equal(new_table[0][\"address\"], \"1.0.0.0\")\n+        assert_equal(new_table[0][\"port\"], 8333)\n+\n+        self.log.debug(\"Test that adding an already-present new address to the new and tried tables fails\")\n+        for value in [True, False]:\n+            assert_equal(node.addpeeraddress(address=\"1.0.0.0\", tried=value, port=8333), {\"success\": False, \"error\": \"failed-adding-to-new\"})\n+        assert_equal(len(node.getnodeaddresses(count=0)), 1)\n+\n         self.log.debug(\"Test that adding a valid address to the tried table succeeds\")\n         self.addr_time = int(time.time())\n         node.setmocktime(self.addr_time)\n         assert_equal(node.addpeeraddress(address=\"1.2.3.4\", tried=True, port=8333), {\"success\": True})\n-        with node.assert_debug_log(expected_msgs=[\"CheckAddrman: new 0, tried 1, total 1 started\"]):\n-            addrs = node.getnodeaddresses(count=0)  # getnodeaddresses re-runs the addrman checks\n-            assert_equal(len(addrs), 1)\n-            assert_equal(addrs[0][\"address\"], \"1.2.3.4\")\n-            assert_equal(addrs[0][\"port\"], 8333)\n+        addrman = node.getrawaddrman()\n+        assert_equal(len(list(addrman[\"new\"].values())), 1)\n+        tried_table = list(addrman[\"tried\"].values())\n+        assert_equal(len(tried_table), 1)\n+        assert_equal(tried_table[0][\"address\"], \"1.2.3.4\")\n+        assert_equal(tried_table[0][\"port\"], 8333)\n+        node.getnodeaddresses(count=0)  # getnodeaddresses re-runs the addrman checks\n \n         self.log.debug(\"Test that adding an already-present tried address to the new and tried tables fails\")\n         for value in [True, False]:\n-            assert_equal(node.addpeeraddress(address=\"1.2.3.4\", tried=value, port=8333), {\"success\": False})\n-        assert_equal(len(node.getnodeaddresses(count=0)), 1)\n-\n-        self.log.debug(\"Test that adding a second address, this time to the new table, succeeds\")\n+            assert_equal(node.addpeeraddress(address=\"1.2.3.4\", tried=value, port=8333), {\"success\": False, \"error\": \"failed-adding-to-new\"})\n+        assert_equal(len(node.getnodeaddresses(count=0)), 2)\n+\n+        self.log.debug(\"Test that adding an address, which collides with the address in tried table, fails\")\n+        colliding_address = \"1.2.5.45\"  # grinded address that produrces a tried-table collision",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28998#discussion_r1525749459",
      "id" : 1525749459,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585a8RbT",
      "original_commit_id" : "76536d834565f1cb14ae70e5bc243041950048ae",
      "original_line" : 373,
      "original_position" : 56,
      "original_start_line" : null,
      "path" : "test/functional/rpc_net.py",
      "position" : null,
      "pull_request_review_id" : 1938103584,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28998",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1525749459/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-03-19T15:21:14Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1525749459",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/44024636?v=4",
         "events_url" : "https://api.github.com/users/stratospher/events{/privacy}",
         "followers_url" : "https://api.github.com/users/stratospher/followers",
         "following_url" : "https://api.github.com/users/stratospher/following{/other_user}",
         "gists_url" : "https://api.github.com/users/stratospher/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/stratospher",
         "id" : 44024636,
         "login" : "stratospher",
         "node_id" : "MDQ6VXNlcjQ0MDI0NjM2",
         "organizations_url" : "https://api.github.com/users/stratospher/orgs",
         "received_events_url" : "https://api.github.com/users/stratospher/received_events",
         "repos_url" : "https://api.github.com/users/stratospher/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/stratospher/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/stratospher/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/stratospher"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Rebased with #29639 merged due to https://github.com/bitcoin/bitcoin/pull/29639#discussion_r1521951824.",
      "created_at" : "2024-03-19T14:40:06Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28998#issuecomment-2007363128",
      "id" : 2007363128,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28998",
      "node_id" : "IC_kwDOABII5853pe44",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2007363128/reactions"
      },
      "updated_at" : "2024-03-19T14:40:06Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2007363128",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/19157360?v=4",
         "events_url" : "https://api.github.com/users/0xB10C/events{/privacy}",
         "followers_url" : "https://api.github.com/users/0xB10C/followers",
         "following_url" : "https://api.github.com/users/0xB10C/following{/other_user}",
         "gists_url" : "https://api.github.com/users/0xB10C/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/0xB10C",
         "id" : 19157360,
         "login" : "0xB10C",
         "node_id" : "MDQ6VXNlcjE5MTU3MzYw",
         "organizations_url" : "https://api.github.com/users/0xB10C/orgs",
         "received_events_url" : "https://api.github.com/users/0xB10C/received_events",
         "repos_url" : "https://api.github.com/users/0xB10C/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/0xB10C/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/0xB10C/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/0xB10C"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28998#discussion_r1530587213"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28998"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1530587213"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "edc8cb64:\r\n```suggestion\r\n        assert_equal(len(addrman[\"new\"]), 1)\r\n```",
      "commit_id" : "99954f914f031c80aa53daa367fc049c4c55bdf3",
      "created_at" : "2024-03-19T15:12:30Z",
      "diff_hunk" : "@@ -340,26 +340,52 @@ def test_addpeeraddress(self):\n         assert_raises_rpc_error(-1, \"JSON integer out of range\", self.nodes[0].addpeeraddress, address=\"1.2.3.4\", port=-1)\n         assert_raises_rpc_error(-1, \"JSON integer out of range\", self.nodes[0].addpeeraddress, address=\"1.2.3.4\", port=65536)\n \n+        self.log.debug(\"Test that adding a valid address to the new table succeeds\")\n+        assert_equal(node.addpeeraddress(address=\"1.0.0.0\", tried=False, port=8333), {\"success\": True})\n+        addrman = node.getrawaddrman()\n+        assert_equal(len(list(addrman[\"tried\"].values())), 0)\n+        new_table = list(addrman[\"new\"].values())\n+        assert_equal(len(new_table), 1)\n+        assert_equal(new_table[0][\"address\"], \"1.0.0.0\")\n+        assert_equal(new_table[0][\"port\"], 8333)\n+\n+        self.log.debug(\"Test that adding an already-present new address to the new and tried tables fails\")\n+        for value in [True, False]:\n+            assert_equal(node.addpeeraddress(address=\"1.0.0.0\", tried=value, port=8333), {\"success\": False, \"error\": \"failed-adding-to-new\"})\n+        assert_equal(len(node.getnodeaddresses(count=0)), 1)\n+\n         self.log.debug(\"Test that adding a valid address to the tried table succeeds\")\n         self.addr_time = int(time.time())\n         node.setmocktime(self.addr_time)\n         assert_equal(node.addpeeraddress(address=\"1.2.3.4\", tried=True, port=8333), {\"success\": True})\n-        with node.assert_debug_log(expected_msgs=[\"CheckAddrman: new 0, tried 1, total 1 started\"]):\n-            addrs = node.getnodeaddresses(count=0)  # getnodeaddresses re-runs the addrman checks\n-            assert_equal(len(addrs), 1)\n-            assert_equal(addrs[0][\"address\"], \"1.2.3.4\")\n-            assert_equal(addrs[0][\"port\"], 8333)\n+        addrman = node.getrawaddrman()\n+        assert_equal(len(list(addrman[\"new\"].values())), 1)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28998#discussion_r1530587213",
      "id" : 1530587213,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585bOuhN",
      "original_commit_id" : "edc8cb64f9aae6939183de276828991243927917",
      "original_line" : 362,
      "original_position" : 28,
      "original_start_line" : null,
      "path" : "test/functional/rpc_net.py",
      "position" : null,
      "pull_request_review_id" : 1938103584,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28998",
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1530587213/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-03-19T15:21:14Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1530587213",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/44024636?v=4",
         "events_url" : "https://api.github.com/users/stratospher/events{/privacy}",
         "followers_url" : "https://api.github.com/users/stratospher/followers",
         "following_url" : "https://api.github.com/users/stratospher/following{/other_user}",
         "gists_url" : "https://api.github.com/users/stratospher/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/stratospher",
         "id" : 44024636,
         "login" : "stratospher",
         "node_id" : "MDQ6VXNlcjQ0MDI0NjM2",
         "organizations_url" : "https://api.github.com/users/stratospher/orgs",
         "received_events_url" : "https://api.github.com/users/stratospher/received_events",
         "repos_url" : "https://api.github.com/users/stratospher/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/stratospher/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/stratospher/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/stratospher"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28998#discussion_r1530589040"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28998"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1530589040"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "edc8cb64: why not?\r\n```suggestion\r\n        assert_equal(len(addrman[\"tried\"]), 0)\r\n```\r\n(left 1 more similar suggestion)",
      "commit_id" : "99954f914f031c80aa53daa367fc049c4c55bdf3",
      "created_at" : "2024-03-19T15:13:33Z",
      "diff_hunk" : "@@ -340,26 +340,52 @@ def test_addpeeraddress(self):\n         assert_raises_rpc_error(-1, \"JSON integer out of range\", self.nodes[0].addpeeraddress, address=\"1.2.3.4\", port=-1)\n         assert_raises_rpc_error(-1, \"JSON integer out of range\", self.nodes[0].addpeeraddress, address=\"1.2.3.4\", port=65536)\n \n+        self.log.debug(\"Test that adding a valid address to the new table succeeds\")\n+        assert_equal(node.addpeeraddress(address=\"1.0.0.0\", tried=False, port=8333), {\"success\": True})\n+        addrman = node.getrawaddrman()\n+        assert_equal(len(list(addrman[\"tried\"].values())), 0)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28998#discussion_r1530589040",
      "id" : 1530589040,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585bOu9w",
      "original_commit_id" : "edc8cb64f9aae6939183de276828991243927917",
      "original_line" : 346,
      "original_position" : 7,
      "original_start_line" : null,
      "path" : "test/functional/rpc_net.py",
      "position" : null,
      "pull_request_review_id" : 1938103584,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28998",
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1530589040/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-03-19T15:21:14Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1530589040",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/44024636?v=4",
         "events_url" : "https://api.github.com/users/stratospher/events{/privacy}",
         "followers_url" : "https://api.github.com/users/stratospher/followers",
         "following_url" : "https://api.github.com/users/stratospher/following{/other_user}",
         "gists_url" : "https://api.github.com/users/stratospher/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/stratospher",
         "id" : 44024636,
         "login" : "stratospher",
         "node_id" : "MDQ6VXNlcjQ0MDI0NjM2",
         "organizations_url" : "https://api.github.com/users/stratospher/orgs",
         "received_events_url" : "https://api.github.com/users/stratospher/received_events",
         "repos_url" : "https://api.github.com/users/stratospher/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/stratospher/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/stratospher/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/stratospher"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28998#discussion_r1530711460"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28998"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1530711460"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "In edc8cb64f9aae6939183de276828991243927917: Is it necessary the \"(and success is false)\"? Isn't it intuitive?",
      "commit_id" : "99954f914f031c80aa53daa367fc049c4c55bdf3",
      "created_at" : "2024-03-19T16:25:04Z",
      "diff_hunk" : "@@ -960,7 +960,8 @@ static RPCHelpMan addpeeraddress()\n         RPCResult{\n             RPCResult::Type::OBJ, \"\", \"\",\n             {\n-                {RPCResult::Type::BOOL, \"success\", \"whether the peer address was successfully added to the address manager\"},\n+                {RPCResult::Type::BOOL, \"success\", \"whether the peer address was successfully added to the address manager table\"},\n+                {RPCResult::Type::STR, \"error\", /*optional=*/true, \"error description, if the address could not be added (and success is false).\"},",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28998#discussion_r1530711460",
      "id" : 1530711460,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585bPM2k",
      "original_commit_id" : "edc8cb64f9aae6939183de276828991243927917",
      "original_line" : 964,
      "original_position" : 15,
      "original_start_line" : null,
      "path" : "src/rpc/net.cpp",
      "position" : null,
      "pull_request_review_id" : 1946772228,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28998",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1530711460/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-03-19T16:25:05Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1530711460",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/19480819?v=4",
         "events_url" : "https://api.github.com/users/brunoerg/events{/privacy}",
         "followers_url" : "https://api.github.com/users/brunoerg/followers",
         "following_url" : "https://api.github.com/users/brunoerg/following{/other_user}",
         "gists_url" : "https://api.github.com/users/brunoerg/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/brunoerg",
         "id" : 19480819,
         "login" : "brunoerg",
         "node_id" : "MDQ6VXNlcjE5NDgwODE5",
         "organizations_url" : "https://api.github.com/users/brunoerg/orgs",
         "received_events_url" : "https://api.github.com/users/brunoerg/received_events",
         "repos_url" : "https://api.github.com/users/brunoerg/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/brunoerg/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/brunoerg/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/brunoerg"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28998#discussion_r1530725492"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28998"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1530725492"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "dropping this.",
      "commit_id" : "99954f914f031c80aa53daa367fc049c4c55bdf3",
      "created_at" : "2024-03-19T16:34:48Z",
      "diff_hunk" : "@@ -960,7 +960,8 @@ static RPCHelpMan addpeeraddress()\n         RPCResult{\n             RPCResult::Type::OBJ, \"\", \"\",\n             {\n-                {RPCResult::Type::BOOL, \"success\", \"whether the peer address was successfully added to the address manager\"},\n+                {RPCResult::Type::BOOL, \"success\", \"whether the peer address was successfully added to the address manager table\"},\n+                {RPCResult::Type::STR, \"error\", /*optional=*/true, \"error description, if the address could not be added (and success is false).\"},",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28998#discussion_r1530725492",
      "id" : 1530725492,
      "in_reply_to_id" : 1530711460,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585bPQR0",
      "original_commit_id" : "edc8cb64f9aae6939183de276828991243927917",
      "original_line" : 964,
      "original_position" : 15,
      "original_start_line" : null,
      "path" : "src/rpc/net.cpp",
      "position" : null,
      "pull_request_review_id" : 1946795147,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28998",
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1530725492/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-03-19T16:34:48Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1530725492",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/19157360?v=4",
         "events_url" : "https://api.github.com/users/0xB10C/events{/privacy}",
         "followers_url" : "https://api.github.com/users/0xB10C/followers",
         "following_url" : "https://api.github.com/users/0xB10C/following{/other_user}",
         "gists_url" : "https://api.github.com/users/0xB10C/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/0xB10C",
         "id" : 19157360,
         "login" : "0xB10C",
         "node_id" : "MDQ6VXNlcjE5MTU3MzYw",
         "organizations_url" : "https://api.github.com/users/0xB10C/orgs",
         "received_events_url" : "https://api.github.com/users/0xB10C/received_events",
         "repos_url" : "https://api.github.com/users/0xB10C/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/0xB10C/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/0xB10C/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/0xB10C"
      }
   }
]
