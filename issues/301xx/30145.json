{
   "active_lock_reason" : null,
   "assignee" : null,
   "assignees" : [],
   "author_association" : "CONTRIBUTOR",
   "body" : "### Current behaviour\r\n\r\nWhen I run:\r\n`./verify.py pub 27.0-x86_64-linux-gnu` instead of downloading the version I told it, it downloads every version in the SHA256SUMS file starting with the first.\r\n\r\nThe `version_os` and (also `version_rc`) are completely ignored which causes wrong files to download when an -rcN is intended.\r\n\r\nWhen I attempt to work around and give it a 1 dash string such as\r\n`./verify.py pub 27.0-x86_64` it will start with bitcoin-27.0-x86_64-apple-darwin which is not useful if I only needed bitcoin-27.0-x86_64-linux-gnu.\r\n\r\nUpdate: it will also parse `\"27.0-aarch64\"` wrong. Setting `rc_version=\"aarch64\"` which causes no file found errors. But this is a valid string.\r\n\r\n### Expected behaviour\r\n\r\nI expected it to only download bitcoin-27.0-x86_64-linux-gnu.tar.gz when I run `./verify.py pub 27.0-x86_64-linux-gnu`.\r\nI expected `rc_version` to be set to the `-rcN` release candidate number as per the comments and documentation.\r\n\r\n### Steps to reproduce\r\n\r\nFollow the instructions in the README.md \r\n> If you only want to download the binaries for a certain platform, add the corresponding suffix, e.g.:\r\n\r\nBut instead of the examples, give it a platform suffix with any dashes and it will ignore the requested platform.\r\nOr give \"<version>-aarch64\" and aarch64 it will be interpreted as a release candidate number causing errors.\r\n\r\n### Relevant log output\r\n\r\n```\r\n./verify.py pub 27.0-x86_64-linux-gnu\r\n[INFO] got file https://bitcoincore.org/bin/bitcoin-core-27.0/SHA256SUMS.asc as SHA256SUMS.asc\r\n[WARNING] https://bitcoin.org failed to provide file (https://bitcoin.org/bin/bitcoin-core-27.0/SHA256SUMS.asc). Continuing based solely upon https://bitcoincore.org.\r\n[INFO] got file https://bitcoincore.org/bin/bitcoin-core-27.0/SHA256SUMS as SHA256SUMS\r\n[WARNING] https://bitcoin.org failed to provide file (https://bitcoin.org/bin/bitcoin-core-27.0/SHA256SUMS). Continuing based solely upon https://bitcoincore.org.\r\n[INFO] got 3 good signatures\r\n[INFO] GOOD SIGNATURE (untrusted): SigData('1E4AED62986CD25D', 'Wladimir J. van der Laan <laanwj@protonmail.com>', trusted=False, status='')\r\n[INFO] GOOD SIGNATURE (untrusted): SigData('17565732E08E5E41', 'Ava Chow <me@achow101.com>', trusted=False, status='')\r\n[INFO] GOOD SIGNATURE (untrusted): SigData('3152347D07DA627C', 'Stephan Oeste (it) <it@oeste.de>', trusted=False, status='')\r\n[WARNING] UNKNOWN SIGNATURE: SigData('410108112E7EA81F', 'hebasto@gmail.com', trusted=False, status='')\r\n[WARNING] UNKNOWN SIGNATURE: SigData('C2371D91CB716EA7', 'sebastian.falbesoner@gmail.com', trusted=False, status='')\r\n[WARNING] UNKNOWN SIGNATURE: SigData('E7E2984B6289C93A', 'pinheadmz@gmail.com', trusted=False, status='')\r\n[WARNING] UNKNOWN SIGNATURE: SigData('2EEB9F5CC09526C1', 'fanquake@gmail.com', trusted=False, status='')\r\n[WARNING] UNKNOWN SIGNATURE: SigData('F62711DBDCA8AE56', 'kvaciral@protonmail.com', trusted=False, status='')\r\n[WARNING] UNKNOWN SIGNATURE: SigData('57FF9BDBCC301009', '', trusted=False, status='')\r\n[WARNING] UNKNOWN SIGNATURE: SigData('8E4256593F177720', 'gugger@gmail.com', trusted=False, status='')\r\n[INFO] removing *-unsigned binaries (bitcoin-27.0-arm64-apple-darwin-unsigned.tar.gz, bitcoin-27.0-arm64-apple-darwin-unsigned.zip, bitcoin-27.0-x86_64-apple-darwin-unsigned.tar.gz, bitcoin-27.0-x86_64-apple-darwin-unsigned.zip, bitcoin-27.0-win64-setup-unsigned.exe, bitcoin-27.0-win64-unsigned.tar.gz) from verification since https://bitcoincore.org does not host *-unsigned binaries\r\n[INFO] removing *-debug binaries (bitcoin-27.0-aarch64-linux-gnu-debug.tar.gz, bitcoin-27.0-arm-linux-gnueabihf-debug.tar.gz, bitcoin-27.0-powerpc64-linux-gnu-debug.tar.gz, bitcoin-27.0-powerpc64le-linux-gnu-debug.tar.gz, bitcoin-27.0-riscv64-linux-gnu-debug.tar.gz, bitcoin-27.0-x86_64-linux-gnu-debug.tar.gz, bitcoin-27.0-win64-debug.zip) from verification since https://bitcoincore.org does not host *-debug binaries\r\n[INFO] removing *-codesignatures binaries (bitcoin-27.0-codesignatures-27.0.tar.gz) from verification since https://bitcoincore.org does not host *-codesignatures binaries\r\n[INFO] downloading bitcoin-27.0-aarch64-linux-gnu.tar.gz to /tmp/bitcoin_verify_binaries.27.0-x86_64-linux-gnu\r\n```\r\n\r\n```\r\namnesia@amnesia:~/.local/share/bitcoin-core$ ./verify.py pub 27.0-aarch64\r\n[ERROR] couldn't fetch file (https://bitcoincore.org/bin/bitcoin-core-27.0/test.aarch64/SHA256SUMS.asc). Have you specified the version number in the following format?\r\n<major>.<minor>[.<patch>][-rc[0-9]][-platform] (example: 22.0-x86_64 or 23.1-rc1-darwin)\r\nwget output:\r\n  --2024-05-21 12:28:08--  https://bitcoincore.org/bin/bitcoin-core-27.0/test.aarch64/SHA256SUMS.asc\r\n  Resolving bitcoincore.org (bitcoincore.org)... 198.251.83.116\r\n  Connecting to bitcoincore.org (bitcoincore.org)|198.251.83.116|:443... connected.\r\n  HTTP request sent, awaiting response... 404 Not Found\r\n  2024-05-21 12:28:14 ERROR 404: Not Found.\r\n```\r\n\r\n### How did you obtain Bitcoin Core\r\n\r\ngit clone\r\n\r\n### What version of Bitcoin Core are you using?\r\n\r\nmaster / 27.0\r\n\r\n### Operating system and version\r\n\r\nDebian 12\r\n\r\n### Machine specifications\r\n\r\nVM, 4GB RAM, virtIO SSD, wired",
   "closed_at" : "2024-06-26T09:28:56Z",
   "closed_by" : {
      "avatar_url" : "https://avatars.githubusercontent.com/u/863730?v=4",
      "events_url" : "https://api.github.com/users/fanquake/events{/privacy}",
      "followers_url" : "https://api.github.com/users/fanquake/followers",
      "following_url" : "https://api.github.com/users/fanquake/following{/other_user}",
      "gists_url" : "https://api.github.com/users/fanquake/gists{/gist_id}",
      "gravatar_id" : "",
      "html_url" : "https://github.com/fanquake",
      "id" : 863730,
      "login" : "fanquake",
      "node_id" : "MDQ6VXNlcjg2MzczMA==",
      "organizations_url" : "https://api.github.com/users/fanquake/orgs",
      "received_events_url" : "https://api.github.com/users/fanquake/received_events",
      "repos_url" : "https://api.github.com/users/fanquake/repos",
      "site_admin" : false,
      "starred_url" : "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
      "subscriptions_url" : "https://api.github.com/users/fanquake/subscriptions",
      "type" : "User",
      "url" : "https://api.github.com/users/fanquake"
   },
   "comments" : 1,
   "comments_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/30145/comments",
   "created_at" : "2024-05-21T11:28:12Z",
   "events_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/30145/events",
   "html_url" : "https://github.com/bitcoin/bitcoin/issues/30145",
   "id" : 2308069426,
   "labels" : [
      {
         "color" : "ffffee",
         "default" : false,
         "description" : null,
         "id" : 231994551,
         "name" : "Scripts and tools",
         "node_id" : "MDU6TGFiZWwyMzE5OTQ1NTE=",
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/labels/Scripts%20and%20tools"
      }
   ],
   "labels_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/30145/labels{/name}",
   "locked" : false,
   "milestone" : null,
   "node_id" : "I_kwDOABII586Jklgy",
   "number" : 30145,
   "performed_via_github_app" : null,
   "reactions" : {
      "+1" : 0,
      "-1" : 0,
      "confused" : 0,
      "eyes" : 0,
      "heart" : 0,
      "hooray" : 0,
      "laugh" : 0,
      "rocket" : 0,
      "total_count" : 0,
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/30145/reactions"
   },
   "repository_url" : "https://api.github.com/repos/bitcoin/bitcoin",
   "state" : "closed",
   "state_reason" : "completed",
   "timeline_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/30145/timeline",
   "title" : "bug: verify-binaries/verify.py incorrectly parses version string; gives error or downloads wrong files",
   "updated_at" : "2024-06-26T09:28:56Z",
   "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/30145",
   "user" : {
      "avatar_url" : "https://avatars.githubusercontent.com/u/73506583?v=4",
      "events_url" : "https://api.github.com/users/BenWestgate/events{/privacy}",
      "followers_url" : "https://api.github.com/users/BenWestgate/followers",
      "following_url" : "https://api.github.com/users/BenWestgate/following{/other_user}",
      "gists_url" : "https://api.github.com/users/BenWestgate/gists{/gist_id}",
      "gravatar_id" : "",
      "html_url" : "https://github.com/BenWestgate",
      "id" : 73506583,
      "login" : "BenWestgate",
      "node_id" : "MDQ6VXNlcjczNTA2NTgz",
      "organizations_url" : "https://api.github.com/users/BenWestgate/orgs",
      "received_events_url" : "https://api.github.com/users/BenWestgate/received_events",
      "repos_url" : "https://api.github.com/users/BenWestgate/repos",
      "site_admin" : false,
      "starred_url" : "https://api.github.com/users/BenWestgate/starred{/owner}{/repo}",
      "subscriptions_url" : "https://api.github.com/users/BenWestgate/subscriptions",
      "type" : "User",
      "url" : "https://api.github.com/users/BenWestgate"
   }
}
