[
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage\nFor detailed information about the code coverage, see the [test coverage report](https://corecheck.dev/bitcoin/bitcoin/pulls/30132).\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| ACK | [furszy](https://github.com/bitcoin/bitcoin/pull/30132#pullrequestreview-2088523996), [ryanofsky](https://github.com/bitcoin/bitcoin/pull/30132#pullrequestreview-2094875458), [theStack](https://github.com/bitcoin/bitcoin/pull/30132#pullrequestreview-2103309868) |\n| Concept ACK | [luke-jr](https://github.com/bitcoin/bitcoin/pull/30132#issuecomment-2127629483) |\n| Approach ACK | [stickies-v](https://github.com/bitcoin/bitcoin/pull/30132#issuecomment-2122786225) |\n\nIf your review is incorrectly listed, please react with ð to this comment and the bot will ignore it on the next update.\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#29641](https://github.com/bitcoin/bitcoin/pull/29641) (scripted-diff: Use LogInfo/LogDebug over LogPrintf/LogPrint by maflcko)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.\n",
      "created_at" : "2024-05-17T20:08:20Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/30132#issuecomment-2118312524",
      "id" : 2118312524,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/30132",
      "node_id" : "IC_kwDOABII585-QuJM",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2118312524/reactions"
      },
      "updated_at" : "2024-06-06T22:59:04Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2118312524",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Not sure what's wrong with the CI ( https://github.com/bitcoin/bitcoin/actions/runs/9133680294/job/25117694444?pr=30132#step:6:2 ) Maybe rebase again?",
      "created_at" : "2024-05-18T08:40:31Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/30132#issuecomment-2118706781",
      "id" : 2118706781,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/30132",
      "node_id" : "IC_kwDOABII585-SOZd",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2118706781/reactions"
      },
      "updated_at" : "2024-05-18T08:40:31Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2118706781",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/maflcko/events{/privacy}",
         "followers_url" : "https://api.github.com/users/maflcko/followers",
         "following_url" : "https://api.github.com/users/maflcko/following{/other_user}",
         "gists_url" : "https://api.github.com/users/maflcko/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/maflcko",
         "id" : 6399679,
         "login" : "maflcko",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/maflcko/orgs",
         "received_events_url" : "https://api.github.com/users/maflcko/received_events",
         "repos_url" : "https://api.github.com/users/maflcko/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/maflcko/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/maflcko/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/maflcko"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Concept ACK",
      "created_at" : "2024-05-20T10:22:30Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/30132#issuecomment-2120147856",
      "id" : 2120147856,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/30132",
      "node_id" : "IC_kwDOABII585-XuOQ",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2120147856/reactions"
      },
      "updated_at" : "2024-05-20T10:22:30Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2120147856",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/69010457?v=4",
         "events_url" : "https://api.github.com/users/stickies-v/events{/privacy}",
         "followers_url" : "https://api.github.com/users/stickies-v/followers",
         "following_url" : "https://api.github.com/users/stickies-v/following{/other_user}",
         "gists_url" : "https://api.github.com/users/stickies-v/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/stickies-v",
         "id" : 69010457,
         "login" : "stickies-v",
         "node_id" : "MDQ6VXNlcjY5MDEwNDU3",
         "organizations_url" : "https://api.github.com/users/stickies-v/orgs",
         "received_events_url" : "https://api.github.com/users/stickies-v/received_events",
         "repos_url" : "https://api.github.com/users/stickies-v/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/stickies-v/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/stickies-v/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/stickies-v"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/30132#discussion_r1606818901"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/30132"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1606818901"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "As discussed offline, I think this change means we're ignoring the GUI-based reindex from  https://github.com/bitcoin/bitcoin/pull/30132/files#diff-b1e19192258d83199d8adaa5ac31f067af98f63554bfdd679bd8e8073815e69dR1609, both for these optional indices but also for the block index ",
      "commit_id" : "991f50acad6809c83c0c44cf3c55fb9d2c0107e3",
      "created_at" : "2024-05-20T13:58:06Z",
      "diff_hunk" : "@@ -1639,17 +1639,17 @@ bool AppInitMain(NodeContext& node, interfaces::BlockAndHeaderTipInfo* tip_info)\n     // ********************************************************* Step 8: start indexers\n \n     if (args.GetBoolArg(\"-txindex\", DEFAULT_TXINDEX)) {\n-        g_txindex = std::make_unique<TxIndex>(interfaces::MakeChain(node), cache_sizes.tx_index, false, chainman.m_blockman.m_reindexing);\n+        g_txindex = std::make_unique<TxIndex>(interfaces::MakeChain(node), cache_sizes.tx_index, false, blockman_opts.reindex);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/30132#discussion_r1606818901",
      "id" : 1606818901,
      "line" : 1642,
      "node_id" : "PRRC_kwDOABII585fxhxV",
      "original_commit_id" : "991f50acad6809c83c0c44cf3c55fb9d2c0107e3",
      "original_line" : 1642,
      "original_position" : 14,
      "original_start_line" : null,
      "path" : "src/init.cpp",
      "position" : 14,
      "pull_request_review_id" : 2066287784,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/30132",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1606818901/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-05-20T13:58:06Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1606818901",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/69010457?v=4",
         "events_url" : "https://api.github.com/users/stickies-v/events{/privacy}",
         "followers_url" : "https://api.github.com/users/stickies-v/followers",
         "following_url" : "https://api.github.com/users/stickies-v/following{/other_user}",
         "gists_url" : "https://api.github.com/users/stickies-v/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/stickies-v",
         "id" : 69010457,
         "login" : "stickies-v",
         "node_id" : "MDQ6VXNlcjY5MDEwNDU3",
         "organizations_url" : "https://api.github.com/users/stickies-v/orgs",
         "received_events_url" : "https://api.github.com/users/stickies-v/received_events",
         "repos_url" : "https://api.github.com/users/stickies-v/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/stickies-v/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/stickies-v/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/stickies-v"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Updated 991f50acad6809c83c0c44cf3c55fb9d2c0107e3 -> 9de8b263dabd6dd2f86f1f0253c6ee3fac7a4407 ([preserveIndexOnRestart_0](https://github.com/TheCharlatan/bitcoin/tree/preserveIndexOnRestart_0) -> [preserveIndexOnRestart_1](https://github.com/TheCharlatan/bitcoin/tree/preserveIndexOnRestart_1), [compare](https://github.com/TheCharlatan/bitcoin/compare/preserveIndexOnRestart_0..preserveIndexOnRestart_1))\r\n\r\n* Addressed @stickies-v's [comment](https://github.com/bitcoin/bitcoin/pull/30132#discussion_r1606818901), fixing a bug introduced in b47bd959207e82555f07e028cc2246943d32d4c3: \"kernel: De-globalize fReindex\".\r\n",
      "created_at" : "2024-05-20T14:05:58Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/30132#issuecomment-2120534220",
      "id" : 2120534220,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/30132",
      "node_id" : "IC_kwDOABII585-ZMjM",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2120534220/reactions"
      },
      "updated_at" : "2024-05-20T14:05:58Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2120534220",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8421793?v=4",
         "events_url" : "https://api.github.com/users/TheCharlatan/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheCharlatan/followers",
         "following_url" : "https://api.github.com/users/TheCharlatan/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheCharlatan/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheCharlatan",
         "id" : 8421793,
         "login" : "TheCharlatan",
         "node_id" : "MDQ6VXNlcjg0MjE3OTM=",
         "organizations_url" : "https://api.github.com/users/TheCharlatan/orgs",
         "received_events_url" : "https://api.github.com/users/TheCharlatan/received_events",
         "repos_url" : "https://api.github.com/users/TheCharlatan/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheCharlatan/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheCharlatan/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheCharlatan"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> fixing a bug introduced in b47bd959207e82555f07e028cc2246943d32d4c3: \"kernel: De-globalize fReindex\".\r\n\r\n~~Is this true? That commit, which was part of #29817, should not have changed any previous behavior~~\r\n\r\nEDIT: Never mind, I see the problem now after reading f27290c39d63df36a1e1baa7f9c1609ebb65ca97 commit description. The bug happens because the BlockManager is destroyed each loop iteration in `AppInitMain` so the value of the `chainman.m_blockman.m_reindexing` variable gets reset.",
      "created_at" : "2024-05-20T15:58:09Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/30132#issuecomment-2120741121",
      "id" : 2120741121,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/30132",
      "node_id" : "IC_kwDOABII585-Z_EB",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2120741121/reactions"
      },
      "updated_at" : "2024-05-20T16:04:16Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2120741121",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Approach ACK. First 2 commits (0d04433149324616e838a30512bee9a04397855f) LGTM but the third one I'm going to need to spend a lot more time wrapping my head around the implications.",
      "created_at" : "2024-05-21T14:36:39Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/30132#issuecomment-2122786225",
      "id" : 2122786225,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/30132",
      "node_id" : "IC_kwDOABII585-hyWx",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2122786225/reactions"
      },
      "updated_at" : "2024-05-21T14:36:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2122786225",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/69010457?v=4",
         "events_url" : "https://api.github.com/users/stickies-v/events{/privacy}",
         "followers_url" : "https://api.github.com/users/stickies-v/followers",
         "following_url" : "https://api.github.com/users/stickies-v/following{/other_user}",
         "gists_url" : "https://api.github.com/users/stickies-v/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/stickies-v",
         "id" : 69010457,
         "login" : "stickies-v",
         "node_id" : "MDQ6VXNlcjY5MDEwNDU3",
         "organizations_url" : "https://api.github.com/users/stickies-v/orgs",
         "received_events_url" : "https://api.github.com/users/stickies-v/received_events",
         "repos_url" : "https://api.github.com/users/stickies-v/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/stickies-v/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/stickies-v/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/stickies-v"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Updated 9de8b263dabd6dd2f86f1f0253c6ee3fac7a4407 -> dd290b3b58a1f9f9e182803866b8e2b9f72ecb3b ([preserveIndexOnRestart_1](https://github.com/TheCharlatan/bitcoin/tree/preserveIndexOnRestart_1) -> [preserveIndexOnRestart_2](https://github.com/TheCharlatan/bitcoin/tree/preserveIndexOnRestart_2), [compare](https://github.com/TheCharlatan/bitcoin/compare/preserveIndexOnRestart_1..preserveIndexOnRestart_2))\r\n\r\n* Added a commit for testing that the indexes are still there when continuing a reindex.",
      "created_at" : "2024-05-23T15:49:20Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/30132#issuecomment-2127473363",
      "id" : 2127473363,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/30132",
      "node_id" : "IC_kwDOABII585-zqrT",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2127473363/reactions"
      },
      "updated_at" : "2024-05-23T15:49:20Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2127473363",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8421793?v=4",
         "events_url" : "https://api.github.com/users/TheCharlatan/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheCharlatan/followers",
         "following_url" : "https://api.github.com/users/TheCharlatan/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheCharlatan/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheCharlatan",
         "id" : 8421793,
         "login" : "TheCharlatan",
         "node_id" : "MDQ6VXNlcjg0MjE3OTM=",
         "organizations_url" : "https://api.github.com/users/TheCharlatan/orgs",
         "received_events_url" : "https://api.github.com/users/TheCharlatan/received_events",
         "repos_url" : "https://api.github.com/users/TheCharlatan/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheCharlatan/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheCharlatan/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheCharlatan"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/30132#discussion_r1611957557"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/30132"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1611957557"
         }
      },
      "author_association" : "MEMBER",
      "body" : "thinking more about this, let's remove this timeout=3. It could fail on slow system or when running valgrind.",
      "commit_id" : "dd290b3b58a1f9f9e182803866b8e2b9f72ecb3b",
      "created_at" : "2024-05-23T16:01:30Z",
      "diff_hunk" : "@@ -73,13 +73,36 @@ def find_block(b, start):\n         # All blocks should be accepted and processed.\n         assert_equal(self.nodes[0].getblockcount(), 12)\n \n+    def continue_reindex_after_shutdown(self):\n+        node = self.nodes[0]\n+        self.generate(node, 1500)\n+        self.log.info(\"Wait until block filter index is synced..\")\n+        with node.busy_wait_for_debug_log([b'basic block filter index is enabled at height']):\n+            self.restart_node(0, ['-blockfilterindex'])\n+\n+        # Restart node with reindex and stop reindex as soon as it starts reindexing\n+        self.log.info(\"Restarting node while reindexing..\")\n+        with node.busy_wait_for_debug_log([b'initload thread start'], timeout=3):",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/30132#discussion_r1611957557",
      "id" : 1611957557,
      "line" : 85,
      "node_id" : "PRRC_kwDOABII585gFIU1",
      "original_commit_id" : "dd290b3b58a1f9f9e182803866b8e2b9f72ecb3b",
      "original_line" : 85,
      "original_position" : 13,
      "original_start_line" : null,
      "path" : "test/functional/feature_reindex.py",
      "position" : 13,
      "pull_request_review_id" : 2074413966,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/30132",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1611957557/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-05-23T16:01:42Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1611957557",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5377650?v=4",
         "events_url" : "https://api.github.com/users/furszy/events{/privacy}",
         "followers_url" : "https://api.github.com/users/furszy/followers",
         "following_url" : "https://api.github.com/users/furszy/following{/other_user}",
         "gists_url" : "https://api.github.com/users/furszy/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/furszy",
         "id" : 5377650,
         "login" : "furszy",
         "node_id" : "MDQ6VXNlcjUzNzc2NTA=",
         "organizations_url" : "https://api.github.com/users/furszy/orgs",
         "received_events_url" : "https://api.github.com/users/furszy/received_events",
         "repos_url" : "https://api.github.com/users/furszy/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/furszy/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/furszy/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/furszy"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/30132#discussion_r1611961304"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/30132"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1611961304"
         }
      },
      "author_association" : "MEMBER",
      "body" : "any reason to use the busy loop here?",
      "commit_id" : "dd290b3b58a1f9f9e182803866b8e2b9f72ecb3b",
      "created_at" : "2024-05-23T16:04:27Z",
      "diff_hunk" : "@@ -73,13 +73,36 @@ def find_block(b, start):\n         # All blocks should be accepted and processed.\n         assert_equal(self.nodes[0].getblockcount(), 12)\n \n+    def continue_reindex_after_shutdown(self):\n+        node = self.nodes[0]\n+        self.generate(node, 1500)\n+        self.log.info(\"Wait until block filter index is synced..\")\n+        with node.busy_wait_for_debug_log([b'basic block filter index is enabled at height']):",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/30132#discussion_r1611961304",
      "id" : 1611961304,
      "line" : 80,
      "node_id" : "PRRC_kwDOABII585gFJPY",
      "original_commit_id" : "dd290b3b58a1f9f9e182803866b8e2b9f72ecb3b",
      "original_line" : 80,
      "original_position" : 8,
      "original_start_line" : null,
      "path" : "test/functional/feature_reindex.py",
      "position" : 8,
      "pull_request_review_id" : 2074420367,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/30132",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1611961304/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-05-23T16:05:45Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1611961304",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/maflcko/events{/privacy}",
         "followers_url" : "https://api.github.com/users/maflcko/followers",
         "following_url" : "https://api.github.com/users/maflcko/following{/other_user}",
         "gists_url" : "https://api.github.com/users/maflcko/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/maflcko",
         "id" : 6399679,
         "login" : "maflcko",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/maflcko/orgs",
         "received_events_url" : "https://api.github.com/users/maflcko/received_events",
         "repos_url" : "https://api.github.com/users/maflcko/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/maflcko/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/maflcko/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/maflcko"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/30132#discussion_r1611961965"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/30132"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1611961965"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Any reason to put the stop under the busy loop here?",
      "commit_id" : "dd290b3b58a1f9f9e182803866b8e2b9f72ecb3b",
      "created_at" : "2024-05-23T16:05:03Z",
      "diff_hunk" : "@@ -73,13 +73,36 @@ def find_block(b, start):\n         # All blocks should be accepted and processed.\n         assert_equal(self.nodes[0].getblockcount(), 12)\n \n+    def continue_reindex_after_shutdown(self):\n+        node = self.nodes[0]\n+        self.generate(node, 1500)\n+        self.log.info(\"Wait until block filter index is synced..\")\n+        with node.busy_wait_for_debug_log([b'basic block filter index is enabled at height']):\n+            self.restart_node(0, ['-blockfilterindex'])\n+\n+        # Restart node with reindex and stop reindex as soon as it starts reindexing\n+        self.log.info(\"Restarting node while reindexing..\")\n+        with node.busy_wait_for_debug_log([b'initload thread start'], timeout=3):\n+            node.stop_node()",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/30132#discussion_r1611961965",
      "id" : 1611961965,
      "line" : 86,
      "node_id" : "PRRC_kwDOABII585gFJZt",
      "original_commit_id" : "dd290b3b58a1f9f9e182803866b8e2b9f72ecb3b",
      "original_line" : 86,
      "original_position" : 14,
      "original_start_line" : null,
      "path" : "test/functional/feature_reindex.py",
      "position" : 14,
      "pull_request_review_id" : 2074420367,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/30132",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1611961965/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-05-23T16:05:45Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1611961965",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/maflcko/events{/privacy}",
         "followers_url" : "https://api.github.com/users/maflcko/followers",
         "following_url" : "https://api.github.com/users/maflcko/following{/other_user}",
         "gists_url" : "https://api.github.com/users/maflcko/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/maflcko",
         "id" : 6399679,
         "login" : "maflcko",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/maflcko/orgs",
         "received_events_url" : "https://api.github.com/users/maflcko/received_events",
         "repos_url" : "https://api.github.com/users/maflcko/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/maflcko/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/maflcko/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/maflcko"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/30132#discussion_r1611962533"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/30132"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1611962533"
         }
      },
      "author_association" : "MEMBER",
      "body" : "nit: Should use named args for integral literal arguments",
      "commit_id" : "dd290b3b58a1f9f9e182803866b8e2b9f72ecb3b",
      "created_at" : "2024-05-23T16:05:31Z",
      "diff_hunk" : "@@ -73,13 +73,36 @@ def find_block(b, start):\n         # All blocks should be accepted and processed.\n         assert_equal(self.nodes[0].getblockcount(), 12)\n \n+    def continue_reindex_after_shutdown(self):\n+        node = self.nodes[0]\n+        self.generate(node, 1500)\n+        self.log.info(\"Wait until block filter index is synced..\")\n+        with node.busy_wait_for_debug_log([b'basic block filter index is enabled at height']):\n+            self.restart_node(0, ['-blockfilterindex'])\n+\n+        # Restart node with reindex and stop reindex as soon as it starts reindexing\n+        self.log.info(\"Restarting node while reindexing..\")\n+        with node.busy_wait_for_debug_log([b'initload thread start'], timeout=3):\n+            node.stop_node()\n+            node.start(['-blockfilterindex', '-reindex'])\n+            node.wait_for_rpc_connection(False)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/30132#discussion_r1611962533",
      "id" : 1611962533,
      "line" : 88,
      "node_id" : "PRRC_kwDOABII585gFJil",
      "original_commit_id" : "dd290b3b58a1f9f9e182803866b8e2b9f72ecb3b",
      "original_line" : 88,
      "original_position" : 16,
      "original_start_line" : null,
      "path" : "test/functional/feature_reindex.py",
      "position" : 16,
      "pull_request_review_id" : 2074420367,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/30132",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1611962533/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-05-23T16:05:45Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1611962533",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/maflcko/events{/privacy}",
         "followers_url" : "https://api.github.com/users/maflcko/followers",
         "following_url" : "https://api.github.com/users/maflcko/following{/other_user}",
         "gists_url" : "https://api.github.com/users/maflcko/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/maflcko",
         "id" : 6399679,
         "login" : "maflcko",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/maflcko/orgs",
         "received_events_url" : "https://api.github.com/users/maflcko/received_events",
         "repos_url" : "https://api.github.com/users/maflcko/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/maflcko/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/maflcko/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/maflcko"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Concept ACK",
      "created_at" : "2024-05-23T16:50:45Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/30132#issuecomment-2127629483",
      "id" : 2127629483,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/30132",
      "node_id" : "IC_kwDOABII585-0Qyr",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2127629483/reactions"
      },
      "updated_at" : "2024-05-23T16:50:45Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2127629483",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "node_id" : "MDQ6VXNlcjEwOTU2NzU=",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Updated dd290b3b58a1f9f9e182803866b8e2b9f72ecb3b -> 891784ce73a1d911d33b125b66f3856fe6cda56b ([preserveIndexOnRestart_2](https://github.com/TheCharlatan/bitcoin/tree/preserveIndexOnRestart_2) -> [preserveIndexOnRestart_3](https://github.com/TheCharlatan/bitcoin/tree/preserveIndexOnRestart_3), [compare](https://github.com/TheCharlatan/bitcoin/compare/preserveIndexOnRestart_2..preserveIndexOnRestart_3))\r\n\r\n* Addressed @furszy's [comment](https://github.com/bitcoin/bitcoin/pull/30132#discussion_r1611957557), removed the timeout on the initload busy loop.\r\n* Addressed @maflcko's [comment](https://github.com/bitcoin/bitcoin/pull/30132#discussion_r1611961304), removed the busyloop waiting for the block filter index. I initially thought it might be useful to wait for the index to load completely, but I don't think this is strictly required for this test.\r\n* Addressed @maflcko's [comment](https://github.com/bitcoin/bitcoin/pull/30132#discussion_r1611961965), moved `stop_node` out of the busy loop.\r\n* Addressed @maflcko's [comment](https://github.com/bitcoin/bitcoin/pull/30132#discussion_r1611962533), using named args for literal arguments now.",
      "created_at" : "2024-05-24T07:37:50Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/30132#issuecomment-2128810392",
      "id" : 2128810392,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/30132",
      "node_id" : "IC_kwDOABII585-4xGY",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2128810392/reactions"
      },
      "updated_at" : "2024-05-24T07:37:50Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2128810392",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8421793?v=4",
         "events_url" : "https://api.github.com/users/TheCharlatan/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheCharlatan/followers",
         "following_url" : "https://api.github.com/users/TheCharlatan/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheCharlatan/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheCharlatan",
         "id" : 8421793,
         "login" : "TheCharlatan",
         "node_id" : "MDQ6VXNlcjg0MjE3OTM=",
         "organizations_url" : "https://api.github.com/users/TheCharlatan/orgs",
         "received_events_url" : "https://api.github.com/users/TheCharlatan/received_events",
         "repos_url" : "https://api.github.com/users/TheCharlatan/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheCharlatan/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheCharlatan/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheCharlatan"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--85328a0da195eb286784d51f73fa0af9-->\n\nð§ At least one of the CI tasks failed. Make sure to run all tests locally, according to the\ndocumentation.\n\nPossibly this is due to a silent merge conflict (the changes in this pull request being\nincompatible with the current code in the target branch). If so, make sure to rebase on the latest\ncommit of the target branch.\n\nLeave a comment here, if you need help tracking down a confusing failure.\n\n<sub>Debug: https://github.com/bitcoin/bitcoin/runs/25367317004</sub>",
      "created_at" : "2024-05-24T08:36:55Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/30132#issuecomment-2128940440",
      "id" : 2128940440,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/30132",
      "node_id" : "IC_kwDOABII585-5Q2Y",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2128940440/reactions"
      },
      "updated_at" : "2024-05-24T08:36:55Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2128940440",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Thanks for the reviews @maflcko,\r\n\r\n891784ce73a1d911d33b125b66f3856fe6cda56b -> eeea0818c1a20adc5225b98b185953d386c033e0 ([preserveIndexOnRestart_3](https://github.com/TheCharlatan/bitcoin/tree/preserveIndexOnRestart_3) -> [preserveIndexOnRestart_4](https://github.com/TheCharlatan/bitcoin/tree/preserveIndexOnRestart_4), [compare](https://github.com/TheCharlatan/bitcoin/compare/preserveIndexOnRestart_3..preserveIndexOnRestart_4))\r\n\r\n* Addressed @maflcko's [comment](https://github.com/bitcoin/bitcoin/pull/30132#discussion_r1613029047), removed redundant initial syncing of the blockfilterindex.\r\n* Addressed @maflcko's [comment](https://github.com/bitcoin/bitcoin/pull/30132#discussion_r1613028022), enforce using named argument.\r\n\r\n",
      "created_at" : "2024-05-24T12:46:53Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/30132#issuecomment-2129452748",
      "id" : 2129452748,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/30132",
      "node_id" : "IC_kwDOABII585-7N7M",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2129452748/reactions"
      },
      "updated_at" : "2024-05-24T12:46:53Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2129452748",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8421793?v=4",
         "events_url" : "https://api.github.com/users/TheCharlatan/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheCharlatan/followers",
         "following_url" : "https://api.github.com/users/TheCharlatan/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheCharlatan/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheCharlatan",
         "id" : 8421793,
         "login" : "TheCharlatan",
         "node_id" : "MDQ6VXNlcjg0MjE3OTM=",
         "organizations_url" : "https://api.github.com/users/TheCharlatan/orgs",
         "received_events_url" : "https://api.github.com/users/TheCharlatan/received_events",
         "repos_url" : "https://api.github.com/users/TheCharlatan/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheCharlatan/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheCharlatan/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheCharlatan"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Re https://github.com/bitcoin/bitcoin/pull/30132#pullrequestreview-2094875458\r\n\r\n> But I also think it was a mistake in https://github.com/bitcoin/bitcoin/pull/29817 to add the BlockManagerOpts::reindex option, and think it would be better to have a less confusing set of options. The following change built on top of this PR could provide a simpler alternative: https://github.com/bitcoin/bitcoin/commit/9c643e7ddd82523b84f65b614d3e6c1f640b23c7. Feel free to use any of these changes, or they could be a separate followup.\r\n\r\nRemoving the blockman option looks like a nice improvement, but I am not sure yet about the renaming. Going from `do_reindex` to `wipe_block_tree_db` back to `m_reindexing` seems a bit convoluted. I looked at adding a `do_reindex` argument to `ImportBlocks` instead so we don't have to set `m_reindexing` when loading the chainstate, but not sure if that is really better either.\r\n\r\nIn the commit message it also says:\r\n\r\n> Also the previous set of options did not allow rebuilding the block database without also rebuilding the chainstate database, when it should be possible to do those independently.\r\n\r\nThis might be nice too. I was thinking a bit if this would really be safe, and I think it should be if the assumption anyway is that the chainstate is pristine.",
      "created_at" : "2024-06-04T10:10:42Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/30132#issuecomment-2147147524",
      "id" : 2147147524,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/30132",
      "node_id" : "IC_kwDOABII585_-t8E",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2147147524/reactions"
      },
      "updated_at" : "2024-06-04T11:10:00Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2147147524",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8421793?v=4",
         "events_url" : "https://api.github.com/users/TheCharlatan/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheCharlatan/followers",
         "following_url" : "https://api.github.com/users/TheCharlatan/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheCharlatan/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheCharlatan",
         "id" : 8421793,
         "login" : "TheCharlatan",
         "node_id" : "MDQ6VXNlcjg0MjE3OTM=",
         "organizations_url" : "https://api.github.com/users/TheCharlatan/orgs",
         "received_events_url" : "https://api.github.com/users/TheCharlatan/received_events",
         "repos_url" : "https://api.github.com/users/TheCharlatan/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheCharlatan/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheCharlatan/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheCharlatan"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> The following change built on top of this PR could provide a simpler alternative: [9c643e7](https://github.com/bitcoin/bitcoin/commit/9c643e7ddd82523b84f65b614d3e6c1f640b23c7).\r\n\r\nI like this suggestion. I think the naming is more clear in terms of the actual effect each variable has. I also think not having two `reindex` options is an improvement, the flow is more clear to me now.\r\n\r\nI don't think `wipe_block_tree_db` (and a couple of other blockman options) should ultimately be a `ChainstateLoadOptions` member, but fixing that is probably beyond the scope of this PR (and I'm looking into doing that in a separate pull).",
      "created_at" : "2024-06-04T12:11:29Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/30132#issuecomment-2147379245",
      "id" : 2147379245,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/30132",
      "node_id" : "IC_kwDOABII585__mgt",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2147379245/reactions"
      },
      "updated_at" : "2024-06-04T12:11:29Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2147379245",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/69010457?v=4",
         "events_url" : "https://api.github.com/users/stickies-v/events{/privacy}",
         "followers_url" : "https://api.github.com/users/stickies-v/followers",
         "following_url" : "https://api.github.com/users/stickies-v/following{/other_user}",
         "gists_url" : "https://api.github.com/users/stickies-v/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/stickies-v",
         "id" : 69010457,
         "login" : "stickies-v",
         "node_id" : "MDQ6VXNlcjY5MDEwNDU3",
         "organizations_url" : "https://api.github.com/users/stickies-v/orgs",
         "received_events_url" : "https://api.github.com/users/stickies-v/received_events",
         "repos_url" : "https://api.github.com/users/stickies-v/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/stickies-v/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/stickies-v/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/stickies-v"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> Removing the blockman option looks like a nice improvement, but I am not sure yet about the renaming. Going from `do_reindex` to `wipe_block_tree_db` back to `m_reindexing` seems a bit convoluted.\r\n\r\nThat's a good point. One possible way to address it could be to rename `m_reindexing` as well like 38cc045b6966dda009332695ed55c86bd5a9fea3. If we move away from having multiple variables called \"reindex\" and instead name variables individually based on what they do, I think it would be an improvement overall.\r\n\r\nThe renames suggested in 9c643e7ddd82523b84f65b614d3e6c1f640b23c7 and 38cc045b6966dda009332695ed55c86bd5a9fea3 don't directly relate to this PR, so might make more sense as followups to avoid complicating things. On the other hand, if you took the portion of 9c643e7ddd82523b84f65b614d3e6c1f640b23c7 replacing `BlockManagerOpts::reindex` with `do_reindex` it would might make the third commit 9de8b263dabd6dd2f86f1f0253c6ee3fac7a4407 here easier to understand. Just feel free to ignore these suggestions for now or use any parts that seem useful.\r\n\r\n> Also the previous set of options did not allow rebuilding the block database without also rebuilding the chainstate database, when it should be possible to do those independently.\r\n\r\nLooking at the code more, I think setting `wipe_block_tree_db = true` and `wipe_chainstate_db = false` should probably work, even though we never do it. But if we add these options to the kernel API, the documentation could warn this combination is currently untested / unsupported. One problem with this combination is that it might not handle some reorgs, because `LoadExternalBlockFile` only currently scans block files and populates `CBlockIndex::nDataPos`. It doesn't currently scan undo files and populate `CBlockIndex::nUndoPos`, though it could.",
      "created_at" : "2024-06-04T14:39:36Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/30132#issuecomment-2147710137",
      "id" : 2147710137,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/30132",
      "node_id" : "IC_kwDOABII586AA3S5",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2147710137/reactions"
      },
      "updated_at" : "2024-06-04T14:39:36Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2147710137",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Thanks for the review and ACKs, I will address the left over nits here shortly, I think re-ACKing should be easy enough.",
      "created_at" : "2024-06-07T06:14:54Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/30132#issuecomment-2154154694",
      "id" : 2154154694,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/30132",
      "node_id" : "IC_kwDOABII586AZcrG",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2154154694/reactions"
      },
      "updated_at" : "2024-06-07T06:14:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2154154694",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8421793?v=4",
         "events_url" : "https://api.github.com/users/TheCharlatan/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheCharlatan/followers",
         "following_url" : "https://api.github.com/users/TheCharlatan/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheCharlatan/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheCharlatan",
         "id" : 8421793,
         "login" : "TheCharlatan",
         "node_id" : "MDQ6VXNlcjg0MjE3OTM=",
         "organizations_url" : "https://api.github.com/users/TheCharlatan/orgs",
         "received_events_url" : "https://api.github.com/users/TheCharlatan/received_events",
         "repos_url" : "https://api.github.com/users/TheCharlatan/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheCharlatan/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheCharlatan/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheCharlatan"
      }
   }
]
