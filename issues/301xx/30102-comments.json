[
   {
      "author_association" : "NONE",
      "body" : "Can reproduce. Been running a signet network whose miner stalled a few dozens of blocks after the block 10080 difficulty adjustment.\r\n\r\nThe miner (v26.1 script) is ran as a systemd service like this, and the nbits parameter was determined by running the calibrating utility set to 600s. Despite this, before block 10080 the miner used to mine a block every 2.5 min instead of 10. I don't quite understand how it works, honestly.\r\n\r\n```shell\r\nminer --cli=\"bitcoin-cli\" generate --address $rewards_addy --grind-cmd=\"bitcoin-util grind\" --nbits=1d02257e --ongoing\r\n```",
      "created_at" : "2024-05-15T22:33:42Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/30102#issuecomment-2113592794",
      "id" : 2113592794,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/30102",
      "node_id" : "IC_kwDOABII5859-t3a",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2113592794/reactions"
      },
      "updated_at" : "2024-05-15T22:36:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2113592794",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1456708?v=4",
         "events_url" : "https://api.github.com/users/1ma/events{/privacy}",
         "followers_url" : "https://api.github.com/users/1ma/followers",
         "following_url" : "https://api.github.com/users/1ma/following{/other_user}",
         "gists_url" : "https://api.github.com/users/1ma/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/1ma",
         "id" : 1456708,
         "login" : "1ma",
         "node_id" : "MDQ6VXNlcjE0NTY3MDg=",
         "organizations_url" : "https://api.github.com/users/1ma/orgs",
         "received_events_url" : "https://api.github.com/users/1ma/received_events",
         "repos_url" : "https://api.github.com/users/1ma/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/1ma/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/1ma/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/1ma"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Thanks for reporting.\n\nAbout the 2m30s interval, see #30091.",
      "created_at" : "2024-05-16T02:59:15Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/30102#issuecomment-2113923344",
      "id" : 2113923344,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/30102",
      "node_id" : "IC_kwDOABII5859_-kQ",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2113923344/reactions"
      },
      "updated_at" : "2024-05-16T02:59:15Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2113923344",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/78322931?v=4",
         "events_url" : "https://api.github.com/users/edilmedeiros/events{/privacy}",
         "followers_url" : "https://api.github.com/users/edilmedeiros/followers",
         "following_url" : "https://api.github.com/users/edilmedeiros/following{/other_user}",
         "gists_url" : "https://api.github.com/users/edilmedeiros/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/edilmedeiros",
         "id" : 78322931,
         "login" : "edilmedeiros",
         "node_id" : "MDQ6VXNlcjc4MzIyOTMx",
         "organizations_url" : "https://api.github.com/users/edilmedeiros/orgs",
         "received_events_url" : "https://api.github.com/users/edilmedeiros/received_events",
         "repos_url" : "https://api.github.com/users/edilmedeiros/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/edilmedeiros/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/edilmedeiros/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/edilmedeiros"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "Thanks for the pointer. A bit off-topic, but since there are not so many people yet who are familiar with operating a signet let me ask you a follow up question:\r\n\r\nI'm don't really understand why the signet miner has so much logic and is so opinionated. My initial idea was to keep the difficulty as low as possible then fire a cronjob every 10 minutes to insta-mine a block at the current timestamp, so the consensus algorithm would be tricked into thinking that is the real difficulty.\r\n\r\nI was never able to use the miner like this though, it seems to have a life of its own. No matter which `nbits` value I selected it mined a block every 2m30s (until it reached block 10080 and broke soon after at 10106). And if it stopped for some time it insta-mined blocks with a backdated timestamp until it catched up to the present.\r\n\r\nIs it possible to have a signet mining setup like that, that is not constantly raising the difficulty and wasting CPU?",
      "created_at" : "2024-05-16T18:31:33Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/30102#issuecomment-2115939051",
      "id" : 2115939051,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/30102",
      "node_id" : "IC_kwDOABII585-Hqrr",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2115939051/reactions"
      },
      "updated_at" : "2024-05-16T18:33:20Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2115939051",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1456708?v=4",
         "events_url" : "https://api.github.com/users/1ma/events{/privacy}",
         "followers_url" : "https://api.github.com/users/1ma/followers",
         "following_url" : "https://api.github.com/users/1ma/following{/other_user}",
         "gists_url" : "https://api.github.com/users/1ma/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/1ma",
         "id" : 1456708,
         "login" : "1ma",
         "node_id" : "MDQ6VXNlcjE0NTY3MDg=",
         "organizations_url" : "https://api.github.com/users/1ma/orgs",
         "received_events_url" : "https://api.github.com/users/1ma/received_events",
         "repos_url" : "https://api.github.com/users/1ma/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/1ma/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/1ma/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/1ma"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Yeah, I had some difficulty understanding its behavior and I believe I grasped after studying the miner source code. \r\n\r\nIt has an internal timer whose logic is capable of doing what you want. Instead of using the `calibrate` feature, go straight to using `--min-nbits --ongoing`. It will mine a block very fast and automatically wait for 10 minutes until it mines the next. That way, it keeps difficulty at minimum but can keep the network pace.\r\n\r\nSee https://edil.com.br/blog/creating-a-custom-bitcoin-signet.",
      "created_at" : "2024-05-16T19:27:43Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/30102#issuecomment-2116027691",
      "id" : 2116027691,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/30102",
      "node_id" : "IC_kwDOABII585-IAUr",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2116027691/reactions"
      },
      "updated_at" : "2024-05-16T19:28:48Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2116027691",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/78322931?v=4",
         "events_url" : "https://api.github.com/users/edilmedeiros/events{/privacy}",
         "followers_url" : "https://api.github.com/users/edilmedeiros/followers",
         "following_url" : "https://api.github.com/users/edilmedeiros/following{/other_user}",
         "gists_url" : "https://api.github.com/users/edilmedeiros/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/edilmedeiros",
         "id" : 78322931,
         "login" : "edilmedeiros",
         "node_id" : "MDQ6VXNlcjc4MzIyOTMx",
         "organizations_url" : "https://api.github.com/users/edilmedeiros/orgs",
         "received_events_url" : "https://api.github.com/users/edilmedeiros/received_events",
         "repos_url" : "https://api.github.com/users/edilmedeiros/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/edilmedeiros/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/edilmedeiros/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/edilmedeiros"
      }
   }
]
