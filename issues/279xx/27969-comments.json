[
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\nA summary of reviews will appear here.\n",
      "created_at" : "2023-06-25T22:06:33Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27969#issuecomment-1606283574",
      "id" : 1606283574,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27969",
      "node_id" : "IC_kwDOABII585fvfE2",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1606283574/reactions"
      },
      "updated_at" : "2023-06-25T22:06:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1606283574",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27969#discussion_r1241602260"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27969"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1241602260"
         }
      },
      "author_association" : "MEMBER",
      "body" : "missing test for larger than original fee rate, but not enough to be larger by incrementalrelayfee?",
      "commit_id" : "57877eb1bd9bf41a985861d8150da4d2c717d20e",
      "created_at" : "2023-06-26T06:01:11Z",
      "diff_hunk" : "@@ -755,5 +757,24 @@ def test_feerate_checks_replaced_outputs(self, rbf_node, peer_node):\n     self.clear_mempool()\n \n \n+def test_bumpfee_with_feerate_ignores_walletincrementalrelayfee(self, rbf_node, peer_node):\n+    self.log.info('Test that bumpfee with fee_rate ignores walletincrementalrelayfee')\n+    # Make sure there is enough balance\n+    peer_node.sendtoaddress(rbf_node.getnewaddress(), 2)\n+    self.generate(peer_node, 1)\n+\n+    dest_address = peer_node.getnewaddress(address_type=\"bech32\")\n+    tx = rbf_node.send(outputs=[{dest_address: 1}], fee_rate=2)\n+\n+    # Ensure you can not fee bump with a feerate below or equal to the original fee rate\n+    assert_raises_rpc_error(-8, \"Insufficient total fee\", rbf_node.bumpfee, tx[\"txid\"], {\"fee_rate\": 1})\n+    assert_raises_rpc_error(-8, \"Insufficient total fee\", rbf_node.bumpfee, tx[\"txid\"], {\"fee_rate\": 2})\n+",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27969#discussion_r1241602260",
      "id" : 1241602260,
      "line" : 772,
      "node_id" : "PRRC_kwDOABII585KAVjU",
      "original_commit_id" : "a2c495c761d500597d64ba444bb8882a55289d56",
      "original_line" : 772,
      "original_position" : 34,
      "original_start_line" : null,
      "path" : "test/functional/wallet_bumpfee.py",
      "position" : 34,
      "pull_request_review_id" : 1497625575,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27969",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1241602260/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-06-26T06:01:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1241602260",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27969#discussion_r1243410171"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27969"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1243410171"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Added the tests, Thanks",
      "commit_id" : "57877eb1bd9bf41a985861d8150da4d2c717d20e",
      "created_at" : "2023-06-27T09:17:11Z",
      "diff_hunk" : "@@ -755,5 +757,24 @@ def test_feerate_checks_replaced_outputs(self, rbf_node, peer_node):\n     self.clear_mempool()\n \n \n+def test_bumpfee_with_feerate_ignores_walletincrementalrelayfee(self, rbf_node, peer_node):\n+    self.log.info('Test that bumpfee with fee_rate ignores walletincrementalrelayfee')\n+    # Make sure there is enough balance\n+    peer_node.sendtoaddress(rbf_node.getnewaddress(), 2)\n+    self.generate(peer_node, 1)\n+\n+    dest_address = peer_node.getnewaddress(address_type=\"bech32\")\n+    tx = rbf_node.send(outputs=[{dest_address: 1}], fee_rate=2)\n+\n+    # Ensure you can not fee bump with a feerate below or equal to the original fee rate\n+    assert_raises_rpc_error(-8, \"Insufficient total fee\", rbf_node.bumpfee, tx[\"txid\"], {\"fee_rate\": 1})\n+    assert_raises_rpc_error(-8, \"Insufficient total fee\", rbf_node.bumpfee, tx[\"txid\"], {\"fee_rate\": 2})\n+",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27969#discussion_r1243410171",
      "id" : 1243410171,
      "in_reply_to_id" : 1241602260,
      "line" : 772,
      "node_id" : "PRRC_kwDOABII585KHO77",
      "original_commit_id" : "a2c495c761d500597d64ba444bb8882a55289d56",
      "original_line" : 772,
      "original_position" : 34,
      "original_start_line" : null,
      "path" : "test/functional/wallet_bumpfee.py",
      "position" : 34,
      "pull_request_review_id" : 1500353452,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27969",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1243410171/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-06-27T09:17:12Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1243410171",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/48946461?v=4",
         "events_url" : "https://api.github.com/users/ismaelsadeeq/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ismaelsadeeq/followers",
         "following_url" : "https://api.github.com/users/ismaelsadeeq/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ismaelsadeeq/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ismaelsadeeq",
         "id" : 48946461,
         "login" : "ismaelsadeeq",
         "node_id" : "MDQ6VXNlcjQ4OTQ2NDYx",
         "organizations_url" : "https://api.github.com/users/ismaelsadeeq/orgs",
         "received_events_url" : "https://api.github.com/users/ismaelsadeeq/received_events",
         "repos_url" : "https://api.github.com/users/ismaelsadeeq/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ismaelsadeeq/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ismaelsadeeq/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ismaelsadeeq"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> When using the `bumpfee` RPC and manually specifying `fee_rate`, there should be no requirement that the new fee must be at least the sum of the original fee and `incrementalFee` (maximum of `relayIncrementalFee` and `WALLET_INCREMENTAL_RELAY_FEE`).\r\n\r\nWhy? It's not immediately obvious to me that this check is unnecessary. Can you provide more detailed rationale for making it less restrictive?\r\n\r\n***\r\n\r\nf526546f045f378d8af96219e77e65612cbb3b9c \"test: remove assumption from wallet_bumpfee.py\" is basically reverted by fb730948aed21ed71ea3ea2f044b1c70de0e17fd \"test: use min_fee_rate instead of min_fee_rate_with_walletminrelayfee\". These test changes could just be included in 83ce45104fb4c3ab9d83aa2302f82d2ca6def477 \"bumpfee: ignore WALLET_INCREMENTAL_RELAY_FEE when user specifies fee rate\" directly.",
      "created_at" : "2023-09-26T15:34:25Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27969#issuecomment-1735790687",
      "id" : 1735790687,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27969",
      "node_id" : "IC_kwDOABII585ndhBf",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1735790687/reactions"
      },
      "updated_at" : "2023-09-26T15:35:09Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1735790687",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "node_id" : "MDQ6VXNlcjM3ODIyNzQ=",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "\r\n> Why? It's not immediately obvious to me that this check is unnecessary. Can you provide more detailed rationale for making it less restrictive?\r\n\r\nThis change to remove the restriction of the minimum fee bump of 5s/vb  was  to fix issue #26973. \r\nThe  5s/vb minimum fee bump requirement, introduced in PR #9615, is primarily for GUI users who couldn't specify their desired fee rates. For these users, bumping 10 times to move from 1sat/vb to 11 sat/vb  may be undesirable.\r\n\r\nHowever, in the `bumpfee` RPC, where users set precise fee rates, enforcing a 5s/vb minimum not necessary, since the users will provide the exact fee rate they wish to fee bump, either 1s/vb, 2s/vb 4s/vb or 20s/vb.\r\n",
      "created_at" : "2023-09-27T10:29:09Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27969#issuecomment-1737131689",
      "id" : 1737131689,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27969",
      "node_id" : "IC_kwDOABII585nioap",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1737131689/reactions"
      },
      "updated_at" : "2023-09-27T10:29:09Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1737131689",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/48946461?v=4",
         "events_url" : "https://api.github.com/users/ismaelsadeeq/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ismaelsadeeq/followers",
         "following_url" : "https://api.github.com/users/ismaelsadeeq/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ismaelsadeeq/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ismaelsadeeq",
         "id" : 48946461,
         "login" : "ismaelsadeeq",
         "node_id" : "MDQ6VXNlcjQ4OTQ2NDYx",
         "organizations_url" : "https://api.github.com/users/ismaelsadeeq/orgs",
         "received_events_url" : "https://api.github.com/users/ismaelsadeeq/received_events",
         "repos_url" : "https://api.github.com/users/ismaelsadeeq/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ismaelsadeeq/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ismaelsadeeq/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ismaelsadeeq"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "\r\n> [f526546](https://github.com/bitcoin/bitcoin/commit/f526546f045f378d8af96219e77e65612cbb3b9c) \"test: remove assumption from wallet_bumpfee.py\" is basically reverted by [fb73094](https://github.com/bitcoin/bitcoin/commit/fb730948aed21ed71ea3ea2f044b1c70de0e17fd) \"test: use min_fee_rate instead of min_fee_rate_with_walletminrelayfee\". These test changes could just be included in [83ce451](https://github.com/bitcoin/bitcoin/commit/83ce45104fb4c3ab9d83aa2302f82d2ca6def477) \"bumpfee: ignore WALLET_INCREMENTAL_RELAY_FEE when user specifies fee rate\" directly.\r\n\r\nThanks I have updated to 559d18fc707e1bfdded8b8ffbde917aaf6306fb8 with your suggestion.\r\n",
      "created_at" : "2023-09-27T10:30:35Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27969#issuecomment-1737133612",
      "id" : 1737133612,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27969",
      "node_id" : "IC_kwDOABII585nio4s",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1737133612/reactions"
      },
      "updated_at" : "2023-09-27T10:30:35Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1737133612",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/48946461?v=4",
         "events_url" : "https://api.github.com/users/ismaelsadeeq/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ismaelsadeeq/followers",
         "following_url" : "https://api.github.com/users/ismaelsadeeq/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ismaelsadeeq/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ismaelsadeeq",
         "id" : 48946461,
         "login" : "ismaelsadeeq",
         "node_id" : "MDQ6VXNlcjQ4OTQ2NDYx",
         "organizations_url" : "https://api.github.com/users/ismaelsadeeq/orgs",
         "received_events_url" : "https://api.github.com/users/ismaelsadeeq/received_events",
         "repos_url" : "https://api.github.com/users/ismaelsadeeq/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ismaelsadeeq/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ismaelsadeeq/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ismaelsadeeq"
      }
   }
]
