{
   "active_lock_reason" : null,
   "assignee" : null,
   "assignees" : [],
   "author_association" : "MEMBER",
   "body" : "Fixes #28469\r\n\r\nThis makes our afl++ harness essentially behave like libFuzzer, with the exception that the whole program does fully reset every 100000 iterations. 100000 is somewhat arbitrary and we could also go with `std::numeric_limits<unsigned in>::max()` but a smaller limit does allow for the occasional reset to counter act some amount of instability in the fuzzing loop (e.g. non-determinism, statefulness).\r\n\r\nIt's a bit of a shame to do this just for the targets whose initial state can't be forked (e.g. threads) because other targets do benefit from not having to redo the state setup. An alternative would be https://github.com/bitcoin/bitcoin/issues/28469#issuecomment-1717526774:\r\n```\r\nIf the goal is to be maximally performant, the fork would need to happen for each fuzz target specifically.\r\nI guess it can be achieved by wrapping __AFL_INIT(); into a helper function and then require all fuzz\r\ntarget initialize() to call it?\r\n```",
   "closed_at" : null,
   "closed_by" : null,
   "comments" : 3,
   "comments_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28480/comments",
   "created_at" : "2023-09-14T13:46:34Z",
   "draft" : false,
   "events_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28480/events",
   "html_url" : "https://github.com/bitcoin/bitcoin/pull/28480",
   "id" : 1896615625,
   "labels" : [
      {
         "color" : "d4c5f9",
         "default" : false,
         "description" : null,
         "id" : 62963516,
         "name" : "Tests",
         "node_id" : "MDU6TGFiZWw2Mjk2MzUxNg==",
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/labels/Tests"
      }
   ],
   "labels_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28480/labels{/name}",
   "locked" : false,
   "milestone" : null,
   "node_id" : "PR_kwDOABII585aWH6I",
   "number" : 28480,
   "performed_via_github_app" : null,
   "pull_request" : {
      "diff_url" : "https://github.com/bitcoin/bitcoin/pull/28480.diff",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28480",
      "merged_at" : null,
      "patch_url" : "https://github.com/bitcoin/bitcoin/pull/28480.patch",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28480"
   },
   "reactions" : {
      "+1" : 0,
      "-1" : 0,
      "confused" : 0,
      "eyes" : 0,
      "heart" : 0,
      "hooray" : 0,
      "laugh" : 0,
      "rocket" : 0,
      "total_count" : 0,
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28480/reactions"
   },
   "repository_url" : "https://api.github.com/repos/bitcoin/bitcoin",
   "state" : "open",
   "state_reason" : null,
   "timeline_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28480/timeline",
   "title" : "fuzz: Don't use afl++ deferred forkserver mode",
   "updated_at" : "2023-09-14T17:17:26Z",
   "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28480",
   "user" : {
      "avatar_url" : "https://avatars.githubusercontent.com/u/8077169?v=4",
      "events_url" : "https://api.github.com/users/dergoegge/events{/privacy}",
      "followers_url" : "https://api.github.com/users/dergoegge/followers",
      "following_url" : "https://api.github.com/users/dergoegge/following{/other_user}",
      "gists_url" : "https://api.github.com/users/dergoegge/gists{/gist_id}",
      "gravatar_id" : "",
      "html_url" : "https://github.com/dergoegge",
      "id" : 8077169,
      "login" : "dergoegge",
      "node_id" : "MDQ6VXNlcjgwNzcxNjk=",
      "organizations_url" : "https://api.github.com/users/dergoegge/orgs",
      "received_events_url" : "https://api.github.com/users/dergoegge/received_events",
      "repos_url" : "https://api.github.com/users/dergoegge/repos",
      "site_admin" : false,
      "starred_url" : "https://api.github.com/users/dergoegge/starred{/owner}{/repo}",
      "subscriptions_url" : "https://api.github.com/users/dergoegge/subscriptions",
      "type" : "User",
      "url" : "https://api.github.com/users/dergoegge"
   }
}
