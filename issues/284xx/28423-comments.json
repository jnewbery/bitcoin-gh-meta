[
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\nA summary of reviews will appear here.\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#28331](https://github.com/bitcoin/bitcoin/pull/28331) (BIP324 integration by sipa)\n* [#28248](https://github.com/bitcoin/bitcoin/pull/28248) (p2p: bugfixes, logic and logging improvements by jonatack)\n* [#27260](https://github.com/bitcoin/bitcoin/pull/27260) (Enhanced error messages for invalid network prefix during address parsing. by russeree)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.\n",
      "created_at" : "2023-09-06T19:58:49Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28423#issuecomment-1709015710",
      "id" : 1709015710,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28423",
      "node_id" : "IC_kwDOABII585l3YKe",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1709015710/reactions"
      },
      "updated_at" : "2023-09-07T01:14:35Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1709015710",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28423#discussion_r1317918689"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28423"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1317918689"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Would it make more sense to pull `MessageStartChars` alone into kernel/chainparams.h, and just add a `static_assert(sizeof(MessageStartChars) == MESSAGE_START_SIZE);` here?",
      "commit_id" : "8e2f988074e3ddabca8bb6d806e1d93aee4a6fe8",
      "created_at" : "2023-09-06T23:14:27Z",
      "diff_hunk" : "@@ -0,0 +1,46 @@\n+#include <serialize.h>\n+\n+#ifndef BITCOIN_MESSAGEHEADER_H\n+#define BITCOIN_MESSAGEHEADER_H\n+\n+#include <cstdint>\n+#include <string>\n+\n+\n+/** Message header.\n+ * (4) message start.\n+ * (12) command.\n+ * (4) size.\n+ * (4) checksum.\n+ */\n+class CMessageHeader\n+{\n+public:\n+    static constexpr size_t MESSAGE_START_SIZE = 4;\n+    static constexpr size_t COMMAND_SIZE = 12;\n+    static constexpr size_t MESSAGE_SIZE_SIZE = 4;\n+    static constexpr size_t CHECKSUM_SIZE = 4;\n+    static constexpr size_t MESSAGE_SIZE_OFFSET = MESSAGE_START_SIZE + COMMAND_SIZE;\n+    static constexpr size_t CHECKSUM_OFFSET = MESSAGE_SIZE_OFFSET + MESSAGE_SIZE_SIZE;\n+    static constexpr size_t HEADER_SIZE = MESSAGE_START_SIZE + COMMAND_SIZE + MESSAGE_SIZE_SIZE + CHECKSUM_SIZE;\n+    typedef unsigned char MessageStartChars[MESSAGE_START_SIZE];",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28423#discussion_r1317918689",
      "id" : 1317918689,
      "line" : 26,
      "node_id" : "PRRC_kwDOABII585Ojdfh",
      "original_commit_id" : "8e2f988074e3ddabca8bb6d806e1d93aee4a6fe8",
      "original_line" : 26,
      "original_position" : 26,
      "original_start_line" : null,
      "path" : "src/messageheader.h",
      "position" : 26,
      "pull_request_review_id" : 1614343028,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28423",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1317918689/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-09-06T23:14:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1317918689",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/127186?v=4",
         "events_url" : "https://api.github.com/users/ajtowns/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ajtowns/followers",
         "following_url" : "https://api.github.com/users/ajtowns/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ajtowns/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ajtowns",
         "id" : 127186,
         "login" : "ajtowns",
         "node_id" : "MDQ6VXNlcjEyNzE4Ng==",
         "organizations_url" : "https://api.github.com/users/ajtowns/orgs",
         "received_events_url" : "https://api.github.com/users/ajtowns/received_events",
         "repos_url" : "https://api.github.com/users/ajtowns/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ajtowns/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ajtowns/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ajtowns"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28423#discussion_r1318096043"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28423"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1318096043"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Yes, that works too and I went through such an iteration. I thought adding such logic might be a bit less desirable though than just straight up moving these simple definitions and keeping the lines that are actually changed to ~0, especially since the kernel code uses definitions to both `MessageStartChars` and its size.",
      "commit_id" : "d4cc87f9624f38e90698f320f427204d504e4d36",
      "created_at" : "2023-09-07T05:22:11Z",
      "diff_hunk" : "@@ -0,0 +1,46 @@\n+#include <serialize.h>\n+\n+#ifndef BITCOIN_MESSAGEHEADER_H\n+#define BITCOIN_MESSAGEHEADER_H\n+\n+#include <cstdint>\n+#include <string>\n+\n+\n+/** Message header.\n+ * (4) message start.\n+ * (12) command.\n+ * (4) size.\n+ * (4) checksum.\n+ */\n+class CMessageHeader\n+{\n+public:\n+    static constexpr size_t MESSAGE_START_SIZE = 4;\n+    static constexpr size_t COMMAND_SIZE = 12;\n+    static constexpr size_t MESSAGE_SIZE_SIZE = 4;\n+    static constexpr size_t CHECKSUM_SIZE = 4;\n+    static constexpr size_t MESSAGE_SIZE_OFFSET = MESSAGE_START_SIZE + COMMAND_SIZE;\n+    static constexpr size_t CHECKSUM_OFFSET = MESSAGE_SIZE_OFFSET + MESSAGE_SIZE_SIZE;\n+    static constexpr size_t HEADER_SIZE = MESSAGE_START_SIZE + COMMAND_SIZE + MESSAGE_SIZE_SIZE + CHECKSUM_SIZE;\n+    typedef unsigned char MessageStartChars[MESSAGE_START_SIZE];",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28423#discussion_r1318096043",
      "id" : 1318096043,
      "in_reply_to_id" : 1317918689,
      "line" : 29,
      "node_id" : "PRRC_kwDOABII585OkIyr",
      "original_commit_id" : "8e2f988074e3ddabca8bb6d806e1d93aee4a6fe8",
      "original_line" : 29,
      "original_position" : 26,
      "original_start_line" : null,
      "path" : "src/messageheader.h",
      "position" : 29,
      "pull_request_review_id" : 1614600090,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28423",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1318096043/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-09-07T05:22:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1318096043",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8421793?v=4",
         "events_url" : "https://api.github.com/users/TheCharlatan/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheCharlatan/followers",
         "following_url" : "https://api.github.com/users/TheCharlatan/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheCharlatan/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheCharlatan",
         "id" : 8421793,
         "login" : "TheCharlatan",
         "node_id" : "MDQ6VXNlcjg0MjE3OTM=",
         "organizations_url" : "https://api.github.com/users/TheCharlatan/orgs",
         "received_events_url" : "https://api.github.com/users/TheCharlatan/received_events",
         "repos_url" : "https://api.github.com/users/TheCharlatan/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheCharlatan/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheCharlatan/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheCharlatan"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "Ok.Approved in it...\r\n\r\nRegards\r\nPrince Johnso\r\n\r\nOn Thu, Sep 7, 2023, 10:55 AM Reproducibility Matters <\r\n***@***.***> wrote:\r\n\r\n> ***@***.**** commented on this pull request.\r\n> ------------------------------\r\n>\r\n> In src/messageheader.h\r\n> <https://github.com/bitcoin/bitcoin/pull/28423#discussion_r1318096043>:\r\n>\r\n> > + * (4) message start.\r\n> + * (12) command.\r\n> + * (4) size.\r\n> + * (4) checksum.\r\n> + */\r\n> +class CMessageHeader\r\n> +{\r\n> +public:\r\n> +    static constexpr size_t MESSAGE_START_SIZE = 4;\r\n> +    static constexpr size_t COMMAND_SIZE = 12;\r\n> +    static constexpr size_t MESSAGE_SIZE_SIZE = 4;\r\n> +    static constexpr size_t CHECKSUM_SIZE = 4;\r\n> +    static constexpr size_t MESSAGE_SIZE_OFFSET = MESSAGE_START_SIZE + COMMAND_SIZE;\r\n> +    static constexpr size_t CHECKSUM_OFFSET = MESSAGE_SIZE_OFFSET + MESSAGE_SIZE_SIZE;\r\n> +    static constexpr size_t HEADER_SIZE = MESSAGE_START_SIZE + COMMAND_SIZE + MESSAGE_SIZE_SIZE + CHECKSUM_SIZE;\r\n> +    typedef unsigned char MessageStartChars[MESSAGE_START_SIZE];\r\n>\r\n> Yes, that works too and I went through such an iteration. I thought adding\r\n> such logic might be a bit less desirable though than just straight up\r\n> moving these simple definitions and keeping the lines that are actually\r\n> changed to ~0, especially since the kernel code uses definitions to both\r\n> MessageStartChars and its size.\r\n>\r\n> â\r\n> Reply to this email directly, view it on GitHub\r\n> <https://github.com/bitcoin/bitcoin/pull/28423#discussion_r1318096043>,\r\n> or unsubscribe\r\n> <https://github.com/notifications/unsubscribe-auth/AJTHIURGYRRLS3E6SWXSZMLXZFLDXANCNFSM6AAAAAA4N3DJPA>\r\n> .\r\n> You are receiving this because you are subscribed to this thread.Message\r\n> ID: ***@***.***>\r\n>\r\n",
      "created_at" : "2023-09-07T05:57:56Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28423#issuecomment-1709522343",
      "id" : 1709522343,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28423",
      "node_id" : "IC_kwDOABII585l5T2n",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1709522343/reactions"
      },
      "updated_at" : "2023-09-07T05:57:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1709522343",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/40268882?v=4",
         "events_url" : "https://api.github.com/users/BlazerX98/events{/privacy}",
         "followers_url" : "https://api.github.com/users/BlazerX98/followers",
         "following_url" : "https://api.github.com/users/BlazerX98/following{/other_user}",
         "gists_url" : "https://api.github.com/users/BlazerX98/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/BlazerX98",
         "id" : 40268882,
         "login" : "BlazerX98",
         "node_id" : "MDQ6VXNlcjQwMjY4ODgy",
         "organizations_url" : "https://api.github.com/users/BlazerX98/orgs",
         "received_events_url" : "https://api.github.com/users/BlazerX98/received_events",
         "repos_url" : "https://api.github.com/users/BlazerX98/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/BlazerX98/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/BlazerX98/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/BlazerX98"
      }
   }
]
