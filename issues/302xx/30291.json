{
   "active_lock_reason" : null,
   "assignee" : null,
   "assignees" : [],
   "author_association" : "CONTRIBUTOR",
   "body" : "Adds argument `--resultsfile` to test_runner.py.\r\nEnables functional test results to be written to a (csv) file for processing by other applications (or for historical archiving).\r\nTest name, status, and duration are written to the file provided with the argument.\r\n\r\nSince `test_runner.py` is being touched, also fixes a misspelling (linter warning).   Can split into its own commit if desired.\r\n\r\n\r\n#### Notes\r\n - Total runtime of functional tests has seemed to have increased on my development machines over the past few months (more tests added, individual test runtime increase, etc.).  Was interested in recording test runtime data over time to detect trends.  Initially searched `doc/benchmarking.md`, existing PRs, and Issues, but didn't immediately see this type of capability or alternate solutions (please chime in if you know of one!).  Thought it would be beneficial to add this capability to `test_runner` to facilitate this type of data analysis (and potentially other use cases)\r\n - Saw https://github.com/bitcoin/bitcoin/blob/master/test/functional/README.md#benchmarking-with-perf, and this PR's higher level data seems complimentary.\r\n - Was on the fence as to whether to expand `print_results()` (i.e. take advantage of the same loop over `test_results`) or implement in a separate `write_results()` function.  Decided on the latter for now, but interested in reviewers' thoughts.\r\n\r\n\r\n#### Example 1: all tests pass\r\n```\r\n$ test/functional/test_runner.py --resultsfile functional_test_results.csv --cachedir=/mnt/tmp/cache --tmpdir=/mnt/tmp feature_blocksdir wallet_startup feature_config_args mempool_accept\r\nTemporary test directory at /mnt/tmp/test_runner_â¿_ð_20240614_201625\r\nTest results will be written to functional_test_results.csv\r\n...\r\n\r\n$ cat functional_test_results.csv \r\ntest,status,duration(seconds)\r\nfeature_blocksdir.py,Passed,1\r\nfeature_config_args.py,Passed,29\r\nmempool_accept.py,Passed,9\r\nwallet_startup.py,Passed,2\r\nALL,Passed,29\r\n```\r\n\r\n#### Example 2: one test failure\r\n```\r\n$ cat functional_test_results.csv \r\ntest,status,duration(seconds)\r\nfeature_blocksdir.py,Passed,1\r\nfeature_config_args.py,Passed,28\r\nwallet_startup.py,Passed,2\r\nmempool_accept.py,Failed,1\r\nALL,Failed,28\r\n```\r\n",
   "closed_at" : "2024-06-17T18:54:20Z",
   "closed_by" : {
      "avatar_url" : "https://avatars.githubusercontent.com/u/3782274?v=4",
      "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
      "followers_url" : "https://api.github.com/users/achow101/followers",
      "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
      "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
      "gravatar_id" : "",
      "html_url" : "https://github.com/achow101",
      "id" : 3782274,
      "login" : "achow101",
      "node_id" : "MDQ6VXNlcjM3ODIyNzQ=",
      "organizations_url" : "https://api.github.com/users/achow101/orgs",
      "received_events_url" : "https://api.github.com/users/achow101/received_events",
      "repos_url" : "https://api.github.com/users/achow101/repos",
      "site_admin" : false,
      "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
      "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
      "type" : "User",
      "url" : "https://api.github.com/users/achow101"
   },
   "comments" : 11,
   "comments_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/30291/comments",
   "created_at" : "2024-06-15T00:24:32Z",
   "draft" : false,
   "events_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/30291/events",
   "html_url" : "https://github.com/bitcoin/bitcoin/pull/30291",
   "id" : 2354292344,
   "labels" : [
      {
         "color" : "d4c5f9",
         "default" : false,
         "description" : null,
         "id" : 62963516,
         "name" : "Tests",
         "node_id" : "MDU6TGFiZWw2Mjk2MzUxNg==",
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/labels/Tests"
      }
   ],
   "labels_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/30291/labels{/name}",
   "locked" : false,
   "milestone" : null,
   "node_id" : "PR_kwDOABII585yiCck",
   "number" : 30291,
   "performed_via_github_app" : null,
   "pull_request" : {
      "diff_url" : "https://github.com/bitcoin/bitcoin/pull/30291.diff",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/30291",
      "merged_at" : "2024-06-17T18:54:20Z",
      "patch_url" : "https://github.com/bitcoin/bitcoin/pull/30291.patch",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/30291"
   },
   "reactions" : {
      "+1" : 1,
      "-1" : 0,
      "confused" : 0,
      "eyes" : 0,
      "heart" : 0,
      "hooray" : 0,
      "laugh" : 0,
      "rocket" : 0,
      "total_count" : 1,
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/30291/reactions"
   },
   "repository_url" : "https://api.github.com/repos/bitcoin/bitcoin",
   "state" : "closed",
   "state_reason" : null,
   "timeline_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/30291/timeline",
   "title" : "test: write functional test results to csv",
   "updated_at" : "2024-06-17T18:54:20Z",
   "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/30291",
   "user" : {
      "avatar_url" : "https://avatars.githubusercontent.com/u/106488469?v=4",
      "events_url" : "https://api.github.com/users/tdb3/events{/privacy}",
      "followers_url" : "https://api.github.com/users/tdb3/followers",
      "following_url" : "https://api.github.com/users/tdb3/following{/other_user}",
      "gists_url" : "https://api.github.com/users/tdb3/gists{/gist_id}",
      "gravatar_id" : "",
      "html_url" : "https://github.com/tdb3",
      "id" : 106488469,
      "login" : "tdb3",
      "node_id" : "U_kgDOBljilQ",
      "organizations_url" : "https://api.github.com/users/tdb3/orgs",
      "received_events_url" : "https://api.github.com/users/tdb3/received_events",
      "repos_url" : "https://api.github.com/users/tdb3/repos",
      "site_admin" : false,
      "starred_url" : "https://api.github.com/users/tdb3/starred{/owner}{/repo}",
      "subscriptions_url" : "https://api.github.com/users/tdb3/subscriptions",
      "type" : "User",
      "url" : "https://api.github.com/users/tdb3"
   }
}
