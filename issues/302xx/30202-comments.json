[
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage\nFor detailed information about the code coverage, see the [test coverage report](https://corecheck.dev/bitcoin/bitcoin/pulls/30202).\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| ACK | [theStack](https://github.com/bitcoin/bitcoin/pull/30202#pullrequestreview-2112137538) |\n| Stale ACK | [laanwj](https://github.com/bitcoin/bitcoin/pull/30202#issuecomment-2139605484), [tdb3](https://github.com/bitcoin/bitcoin/pull/30202#pullrequestreview-2092618199) |\n\nIf your review is incorrectly listed, please react with ð to this comment and the bot will ignore it on the next update.\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#29641](https://github.com/bitcoin/bitcoin/pull/29641) (scripted-diff: Use LogInfo/LogDebug over LogPrintf/LogPrint by maflcko)\n* [#29625](https://github.com/bitcoin/bitcoin/pull/29625) (Several randomness improvements by sipa)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.\n",
      "created_at" : "2024-05-30T13:40:48Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/30202#issuecomment-2139584101",
      "id" : 2139584101,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/30202",
      "node_id" : "IC_kwDOABII585_h3Zl",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2139584101/reactions"
      },
      "updated_at" : "2024-06-12T07:09:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2139584101",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Concept and code review (but untested, will use this to make a testing harness for #30043) ACK 77e34ded543e19ba27cab8d0cfc464af27f04bbf",
      "created_at" : "2024-05-30T13:51:27Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/30202#issuecomment-2139605484",
      "id" : 2139605484,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/30202",
      "node_id" : "IC_kwDOABII585_h8ns",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2139605484/reactions"
      },
      "updated_at" : "2024-05-30T13:51:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2139605484",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/30202#discussion_r1623665893"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/30202"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1623665893"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "I'm assuming changing `GetSAFamily()`'s return type was avoided to keep the PR scoped (and since the change doesn't seem necessary).\r\n\r\nSince `GetSAFamily()` returns `sa_family_t`, looks like this is a simple promotion from an `unsigned short` (`sa_family_t`) to `int`.  This seems fine (it aligns with the typical way `socket()` args are typically used).  ",
      "commit_id" : "77e34ded543e19ba27cab8d0cfc464af27f04bbf",
      "created_at" : "2024-06-02T22:49:14Z",
      "diff_hunk" : "@@ -3029,7 +3029,7 @@ bool CConnman::BindListenPort(const CService& addrBind, bilingual_str& strError,\n         return false;\n     }\n \n-    std::unique_ptr<Sock> sock = CreateSock(addrBind.GetSAFamily());\n+    std::unique_ptr<Sock> sock = CreateSock(addrBind.GetSAFamily(), SOCK_STREAM, IPPROTO_TCP);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/30202#discussion_r1623665893",
      "id" : 1623665893,
      "line" : 3032,
      "node_id" : "PRRC_kwDOABII585gxyzl",
      "original_commit_id" : "77e34ded543e19ba27cab8d0cfc464af27f04bbf",
      "original_line" : 3032,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "src/net.cpp",
      "position" : 5,
      "pull_request_review_id" : 2092618199,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/30202",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1623665893/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-06-02T23:22:40Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1623665893",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/106488469?v=4",
         "events_url" : "https://api.github.com/users/tdb3/events{/privacy}",
         "followers_url" : "https://api.github.com/users/tdb3/followers",
         "following_url" : "https://api.github.com/users/tdb3/following{/other_user}",
         "gists_url" : "https://api.github.com/users/tdb3/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/tdb3",
         "id" : 106488469,
         "login" : "tdb3",
         "node_id" : "U_kgDOBljilQ",
         "organizations_url" : "https://api.github.com/users/tdb3/orgs",
         "received_events_url" : "https://api.github.com/users/tdb3/received_events",
         "repos_url" : "https://api.github.com/users/tdb3/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/tdb3/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/tdb3/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/tdb3"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/30202#discussion_r1623667512"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/30202"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1623667512"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Seems ok to remove, since `protocol` is now an argument.",
      "commit_id" : "77e34ded543e19ba27cab8d0cfc464af27f04bbf",
      "created_at" : "2024-06-02T23:02:40Z",
      "diff_hunk" : "@@ -485,24 +485,23 @@ bool Socks5(const std::string& strDest, uint16_t port, const ProxyCredentials* a\n     }\n }\n \n-std::unique_ptr<Sock> CreateSockOS(sa_family_t address_family)\n+std::unique_ptr<Sock> CreateSockOS(int domain, int type, int protocol)\n {\n     // Not IPv4, IPv6 or UNIX\n-    if (address_family == AF_UNSPEC) return nullptr;\n-\n-    int protocol{IPPROTO_TCP};\n-#if HAVE_SOCKADDR_UN\n-    if (address_family == AF_UNIX) protocol = 0;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/30202#discussion_r1623667512",
      "id" : 1623667512,
      "line" : 495,
      "node_id" : "PRRC_kwDOABII585gxzM4",
      "original_commit_id" : "77e34ded543e19ba27cab8d0cfc464af27f04bbf",
      "original_line" : 495,
      "original_position" : 12,
      "original_start_line" : null,
      "path" : "src/netbase.cpp",
      "position" : 12,
      "pull_request_review_id" : 2092618199,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/30202",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1623667512/reactions"
      },
      "side" : "LEFT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-06-02T23:23:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1623667512",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/106488469?v=4",
         "events_url" : "https://api.github.com/users/tdb3/events{/privacy}",
         "followers_url" : "https://api.github.com/users/tdb3/followers",
         "following_url" : "https://api.github.com/users/tdb3/following{/other_user}",
         "gists_url" : "https://api.github.com/users/tdb3/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/tdb3",
         "id" : 106488469,
         "login" : "tdb3",
         "node_id" : "U_kgDOBljilQ",
         "organizations_url" : "https://api.github.com/users/tdb3/orgs",
         "received_events_url" : "https://api.github.com/users/tdb3/received_events",
         "repos_url" : "https://api.github.com/users/tdb3/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/tdb3/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/tdb3/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/tdb3"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/30202#discussion_r1623667994"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/30202"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1623667994"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Seems good to add this sanity check to prevent setting non-pertinent sockopts.\r\n\r\nnit: Might be worthwhile to mention in the PR description that in addition to extending arguments, some extra safety checks were put in place.",
      "commit_id" : "77e34ded543e19ba27cab8d0cfc464af27f04bbf",
      "created_at" : "2024-06-02T23:06:49Z",
      "diff_hunk" : "@@ -485,24 +485,23 @@ bool Socks5(const std::string& strDest, uint16_t port, const ProxyCredentials* a\n     }\n }\n \n-std::unique_ptr<Sock> CreateSockOS(sa_family_t address_family)\n+std::unique_ptr<Sock> CreateSockOS(int domain, int type, int protocol)\n {\n     // Not IPv4, IPv6 or UNIX\n-    if (address_family == AF_UNSPEC) return nullptr;\n-\n-    int protocol{IPPROTO_TCP};\n-#if HAVE_SOCKADDR_UN\n-    if (address_family == AF_UNIX) protocol = 0;\n-#endif\n+    if (domain == AF_UNSPEC) return nullptr;\n \n     // Create a socket in the specified address family.\n-    SOCKET hSocket = socket(address_family, SOCK_STREAM, protocol);\n+    SOCKET hSocket = socket(domain, type, protocol);\n     if (hSocket == INVALID_SOCKET) {\n         return nullptr;\n     }\n \n     auto sock = std::make_unique<Sock>(hSocket);\n \n+    if (domain != AF_INET && domain != AF_INET6 && domain != AF_UNIX) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/30202#discussion_r1623667994",
      "id" : 1623667994,
      "line" : 501,
      "node_id" : "PRRC_kwDOABII585gxzUa",
      "original_commit_id" : "77e34ded543e19ba27cab8d0cfc464af27f04bbf",
      "original_line" : 501,
      "original_position" : 25,
      "original_start_line" : null,
      "path" : "src/netbase.cpp",
      "position" : 25,
      "pull_request_review_id" : 2092618199,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/30202",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1623667994/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-06-02T23:23:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1623667994",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/106488469?v=4",
         "events_url" : "https://api.github.com/users/tdb3/events{/privacy}",
         "followers_url" : "https://api.github.com/users/tdb3/followers",
         "following_url" : "https://api.github.com/users/tdb3/following{/other_user}",
         "gists_url" : "https://api.github.com/users/tdb3/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/tdb3",
         "id" : 106488469,
         "login" : "tdb3",
         "node_id" : "U_kgDOBljilQ",
         "organizations_url" : "https://api.github.com/users/tdb3/orgs",
         "received_events_url" : "https://api.github.com/users/tdb3/received_events",
         "repos_url" : "https://api.github.com/users/tdb3/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/tdb3/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/tdb3/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/tdb3"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/30202#discussion_r1623668596"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/30202"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1623668596"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Since these are simple `int`s passed by value, seems ok to change from the previous const reference approach.",
      "commit_id" : "77e34ded543e19ba27cab8d0cfc464af27f04bbf",
      "created_at" : "2024-06-02T23:10:53Z",
      "diff_hunk" : "@@ -527,18 +526,21 @@ std::unique_ptr<Sock> CreateSockOS(sa_family_t address_family)\n     }\n \n #if HAVE_SOCKADDR_UN\n-    if (address_family == AF_UNIX) return sock;\n+    if (domain == AF_UNIX) return sock;\n #endif\n \n-    // Set the no-delay option (disable Nagle's algorithm) on the TCP socket.\n-    const int on{1};\n-    if (sock->SetSockOpt(IPPROTO_TCP, TCP_NODELAY, &on, sizeof(on)) == SOCKET_ERROR) {\n-        LogPrint(BCLog::NET, \"Unable to set TCP_NODELAY on a newly created socket, continuing anyway\\n\");\n+    if (protocol == IPPROTO_TCP) {\n+        // Set the no-delay option (disable Nagle's algorithm) on the TCP socket.\n+        const int on{1};\n+        if (sock->SetSockOpt(IPPROTO_TCP, TCP_NODELAY, &on, sizeof(on)) == SOCKET_ERROR) {\n+            LogPrint(BCLog::NET, \"Unable to set TCP_NODELAY on a newly created socket, continuing anyway\\n\");\n+        }\n     }\n+\n     return sock;\n }\n \n-std::function<std::unique_ptr<Sock>(const sa_family_t&)> CreateSock = CreateSockOS;\n+std::function<std::unique_ptr<Sock>(int, int, int)> CreateSock = CreateSockOS;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/30202#discussion_r1623668596",
      "id" : 1623668596,
      "line" : 543,
      "node_id" : "PRRC_kwDOABII585gxzd0",
      "original_commit_id" : "77e34ded543e19ba27cab8d0cfc464af27f04bbf",
      "original_line" : 543,
      "original_position" : 56,
      "original_start_line" : null,
      "path" : "src/netbase.cpp",
      "position" : 56,
      "pull_request_review_id" : 2092618199,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/30202",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1623668596/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-06-02T23:22:40Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1623668596",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/106488469?v=4",
         "events_url" : "https://api.github.com/users/tdb3/events{/privacy}",
         "followers_url" : "https://api.github.com/users/tdb3/followers",
         "following_url" : "https://api.github.com/users/tdb3/following{/other_user}",
         "gists_url" : "https://api.github.com/users/tdb3/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/tdb3",
         "id" : 106488469,
         "login" : "tdb3",
         "node_id" : "U_kgDOBljilQ",
         "organizations_url" : "https://api.github.com/users/tdb3/orgs",
         "received_events_url" : "https://api.github.com/users/tdb3/received_events",
         "repos_url" : "https://api.github.com/users/tdb3/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/tdb3/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/tdb3/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/tdb3"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/30202#discussion_r1624295221"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/30202"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1624295221"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Returning `sa_family_t` is slightly more self-documenting, imo, would prefer to keep it as-is.\r\nBut yes it's simply a type-def'd integer type not a real enum, i suppose because it's \"open\", as in, new OS headers could potentially define their own address family without having to update a central list.",
      "commit_id" : "5f549c35d9a75c7019fe8a96963b988df5498eed",
      "created_at" : "2024-06-03T11:58:21Z",
      "diff_hunk" : "@@ -3029,7 +3029,7 @@ bool CConnman::BindListenPort(const CService& addrBind, bilingual_str& strError,\n         return false;\n     }\n \n-    std::unique_ptr<Sock> sock = CreateSock(addrBind.GetSAFamily());\n+    std::unique_ptr<Sock> sock = CreateSock(addrBind.GetSAFamily(), SOCK_STREAM, IPPROTO_TCP);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/30202#discussion_r1624295221",
      "id" : 1624295221,
      "in_reply_to_id" : 1623665893,
      "line" : 3032,
      "node_id" : "PRRC_kwDOABII585g0Mc1",
      "original_commit_id" : "77e34ded543e19ba27cab8d0cfc464af27f04bbf",
      "original_line" : 3032,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "src/net.cpp",
      "position" : 5,
      "pull_request_review_id" : 2093618714,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/30202",
      "reactions" : {
         "+1" : 2,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 2,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1624295221/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-06-03T11:58:21Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1624295221",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/30202#discussion_r1634596430"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/30202"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1634596430"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "typo nit:\r\n```suggestion\r\n * @param[in] protocol The particular protocol to be used with the socket, third argument to the socket(2) syscall.\r\n```",
      "commit_id" : "5f549c35d9a75c7019fe8a96963b988df5498eed",
      "created_at" : "2024-06-11T10:20:34Z",
      "diff_hunk" : "@@ -262,16 +262,18 @@ CService LookupNumeric(const std::string& name, uint16_t portDefault = 0, DNSLoo\n CSubNet LookupSubNet(const std::string& subnet_str);\n \n /**\n- * Create a TCP or UNIX socket in the given address family.\n- * @param[in] address_family to use for the socket.\n+ * Create a real socket from the operating system.\n+ * @param[in] domain Communications domain, first argument to the socket(2) syscall.\n+ * @param[in] type Type of the socket, second argument to the socket(2) syscall.\n+ * @param[in] protocol The particular protocol to be used with the socke, third argument to the socket(2) syscall.",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/30202#discussion_r1634596430",
      "id" : 1634596430,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585hbfZO",
      "original_commit_id" : "77e34ded543e19ba27cab8d0cfc464af27f04bbf",
      "original_line" : 268,
      "original_position" : 9,
      "original_start_line" : null,
      "path" : "src/netbase.h",
      "position" : null,
      "pull_request_review_id" : 2110004373,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/30202",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1634596430/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-06-11T10:20:52Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1634596430",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/91535?v=4",
         "events_url" : "https://api.github.com/users/theStack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/theStack/followers",
         "following_url" : "https://api.github.com/users/theStack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/theStack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/theStack",
         "id" : 91535,
         "login" : "theStack",
         "node_id" : "MDQ6VXNlcjkxNTM1",
         "organizations_url" : "https://api.github.com/users/theStack/orgs",
         "received_events_url" : "https://api.github.com/users/theStack/received_events",
         "repos_url" : "https://api.github.com/users/theStack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/theStack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/theStack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/theStack"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/30202#discussion_r1635902059"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/30202"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1635902059"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Done",
      "commit_id" : "5f549c35d9a75c7019fe8a96963b988df5498eed",
      "created_at" : "2024-06-12T06:46:52Z",
      "diff_hunk" : "@@ -485,24 +485,23 @@ bool Socks5(const std::string& strDest, uint16_t port, const ProxyCredentials* a\n     }\n }\n \n-std::unique_ptr<Sock> CreateSockOS(sa_family_t address_family)\n+std::unique_ptr<Sock> CreateSockOS(int domain, int type, int protocol)\n {\n     // Not IPv4, IPv6 or UNIX\n-    if (address_family == AF_UNSPEC) return nullptr;\n-\n-    int protocol{IPPROTO_TCP};\n-#if HAVE_SOCKADDR_UN\n-    if (address_family == AF_UNIX) protocol = 0;\n-#endif\n+    if (domain == AF_UNSPEC) return nullptr;\n \n     // Create a socket in the specified address family.\n-    SOCKET hSocket = socket(address_family, SOCK_STREAM, protocol);\n+    SOCKET hSocket = socket(domain, type, protocol);\n     if (hSocket == INVALID_SOCKET) {\n         return nullptr;\n     }\n \n     auto sock = std::make_unique<Sock>(hSocket);\n \n+    if (domain != AF_INET && domain != AF_INET6 && domain != AF_UNIX) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/30202#discussion_r1635902059",
      "id" : 1635902059,
      "in_reply_to_id" : 1623667994,
      "line" : 501,
      "node_id" : "PRRC_kwDOABII585hgeJr",
      "original_commit_id" : "77e34ded543e19ba27cab8d0cfc464af27f04bbf",
      "original_line" : 501,
      "original_position" : 25,
      "original_start_line" : null,
      "path" : "src/netbase.cpp",
      "position" : 25,
      "pull_request_review_id" : 2112090192,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/30202",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1635902059/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-06-12T06:46:52Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1635902059",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "`77e34ded54...5f549c35d9`: fix typo in the comment: `s/socke/socket/`",
      "created_at" : "2024-06-12T06:49:54Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/30202#issuecomment-2162239639",
      "id" : 2162239639,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/30202",
      "node_id" : "IC_kwDOABII586A4SiX",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2162239639/reactions"
      },
      "updated_at" : "2024-06-12T06:49:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2162239639",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/30202#discussion_r1635907777"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/30202"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1635907777"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Oh, it is usually either `s`, `sock` or `socket`. `socke` is something new, that is extra genuine ;-)\r\n\r\nFixed, invalidating 3 ACKs but should be trivial to re-review.\r\n\r\nThanks!",
      "commit_id" : "5f549c35d9a75c7019fe8a96963b988df5498eed",
      "created_at" : "2024-06-12T06:51:54Z",
      "diff_hunk" : "@@ -262,16 +262,18 @@ CService LookupNumeric(const std::string& name, uint16_t portDefault = 0, DNSLoo\n CSubNet LookupSubNet(const std::string& subnet_str);\n \n /**\n- * Create a TCP or UNIX socket in the given address family.\n- * @param[in] address_family to use for the socket.\n+ * Create a real socket from the operating system.\n+ * @param[in] domain Communications domain, first argument to the socket(2) syscall.\n+ * @param[in] type Type of the socket, second argument to the socket(2) syscall.\n+ * @param[in] protocol The particular protocol to be used with the socke, third argument to the socket(2) syscall.",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/30202#discussion_r1635907777",
      "id" : 1635907777,
      "in_reply_to_id" : 1634596430,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585hgfjB",
      "original_commit_id" : "77e34ded543e19ba27cab8d0cfc464af27f04bbf",
      "original_line" : 268,
      "original_position" : 9,
      "original_start_line" : null,
      "path" : "src/netbase.h",
      "position" : null,
      "pull_request_review_id" : 2112099377,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/30202",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1635907777/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-06-12T06:51:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1635907777",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   }
]
