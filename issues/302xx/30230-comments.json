[
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage\nFor detailed information about the code coverage, see the [test coverage report](https://corecheck.dev/bitcoin/bitcoin/pulls/30230).\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| ACK | [dergoegge](https://github.com/bitcoin/bitcoin/pull/30230#pullrequestreview-2103980713) |\n\nIf your review is incorrectly listed, please react with ð to this comment and the bot will ignore it on the next update.\n",
      "created_at" : "2024-06-05T13:41:58Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/30230#issuecomment-2149983119",
      "id" : 2149983119,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/30230",
      "node_id" : "IC_kwDOABII586AJiOP",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2149983119/reactions"
      },
      "updated_at" : "2024-06-07T08:40:28Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2149983119",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/30230#discussion_r1627820274"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/30230"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1627820274"
         }
      },
      "author_association" : "MEMBER",
      "body" : "```suggestion\r\n// Copyright (c) The Bitcoin Core developers\r\n// Distributed under the MIT software license, see the accompanying\r\n// file COPYING or http://www.opensource.org/licenses/mit-license.php.\r\n```",
      "commit_id" : "193c748e44f8647a056121fc9cbb9c2efbcbfc49",
      "created_at" : "2024-06-05T13:47:04Z",
      "diff_hunk" : "@@ -0,0 +1,64 @@\n+// Copyright (c) 2020-2022 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// // file COPYING or http://www.opensource.org/licenses/mit-license.php.",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/30230#discussion_r1627820274",
      "id" : 1627820274,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585hBpDy",
      "original_commit_id" : "b9a754f24c8f7bc19e4d2df1c0ba8e70b826af34",
      "original_line" : 3,
      "original_position" : 3,
      "original_start_line" : 1,
      "path" : "src/test/fuzz/i2p.cpp",
      "position" : null,
      "pull_request_review_id" : 2099261814,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/30230",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1627820274/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : "RIGHT",
      "subject_type" : "line",
      "updated_at" : "2024-06-05T16:32:59Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1627820274",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8077169?v=4",
         "events_url" : "https://api.github.com/users/dergoegge/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dergoegge/followers",
         "following_url" : "https://api.github.com/users/dergoegge/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dergoegge/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dergoegge",
         "id" : 8077169,
         "login" : "dergoegge",
         "node_id" : "MDQ6VXNlcjgwNzcxNjk=",
         "organizations_url" : "https://api.github.com/users/dergoegge/orgs",
         "received_events_url" : "https://api.github.com/users/dergoegge/received_events",
         "repos_url" : "https://api.github.com/users/dergoegge/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dergoegge/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dergoegge/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dergoegge"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/30230#discussion_r1627954290"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/30230"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1627954290"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Why is it calling `Connect` without specifying `to`? ",
      "commit_id" : "b9a754f24c8f7bc19e4d2df1c0ba8e70b826af34",
      "created_at" : "2024-06-05T15:00:25Z",
      "diff_hunk" : "@@ -0,0 +1,64 @@\n+// Copyright (c) 2020-2022 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// // file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include <common/args.h>\n+#include <i2p.h>\n+#include <netaddress.h>\n+#include <netbase.h>\n+#include <test/fuzz/FuzzedDataProvider.h>\n+#include <test/fuzz/fuzz.h>\n+#include <test/fuzz/util.h>\n+#include <test/fuzz/util/net.h>\n+#include <test/util/setup_common.h>\n+#include <util/fs_helpers.h>\n+#include <util/threadinterrupt.h>\n+\n+void initialize_i2p()\n+{\n+    static const auto testing_setup = MakeNoLogFileContext<>();\n+}\n+\n+FUZZ_TARGET(i2p, .init = initialize_i2p)\n+{\n+    FuzzedDataProvider fuzzed_data_provider{buffer.data(), buffer.size()};\n+\n+    SetMockTime(ConsumeTime(fuzzed_data_provider));\n+\n+    // Mock CreateSock() to create FuzzedSock.\n+    auto CreateSockOrig = CreateSock;\n+    CreateSock = [&fuzzed_data_provider](const sa_family_t&) {\n+        return std::make_unique<FuzzedSock>(fuzzed_data_provider);\n+    };\n+\n+    const fs::path private_key_path = gArgs.GetDataDirNet() / \"fuzzed_i2p_private_key\";\n+    const CService addr{in6_addr(IN6ADDR_LOOPBACK_INIT), 7656};\n+    const Proxy sam_proxy{addr, false};\n+    CThreadInterrupt interrupt;\n+\n+    i2p::sam::Session session{private_key_path, sam_proxy, &interrupt};\n+    i2p::Connection conn;\n+\n+    if (session.Listen(conn)) {\n+        if (session.Accept(conn)) {\n+            try {\n+                (void)conn.sock->RecvUntilTerminator('\\n', 10ms, interrupt, i2p::sam::MAX_MSG_SIZE);\n+            } catch (const std::runtime_error&) {\n+            }\n+        }\n+    }\n+\n+    const CService to;\n+    bool proxy_error;\n+\n+    if (session.Connect(to, conn, proxy_error)) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/30230#discussion_r1627954290",
      "id" : 1627954290,
      "line" : 54,
      "node_id" : "PRRC_kwDOABII585hCJxy",
      "original_commit_id" : "b9a754f24c8f7bc19e4d2df1c0ba8e70b826af34",
      "original_line" : 54,
      "original_position" : 54,
      "original_start_line" : null,
      "path" : "src/test/fuzz/i2p.cpp",
      "position" : 54,
      "pull_request_review_id" : 2099482370,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/30230",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1627954290/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-06-05T15:00:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1627954290",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/19480819?v=4",
         "events_url" : "https://api.github.com/users/brunoerg/events{/privacy}",
         "followers_url" : "https://api.github.com/users/brunoerg/followers",
         "following_url" : "https://api.github.com/users/brunoerg/following{/other_user}",
         "gists_url" : "https://api.github.com/users/brunoerg/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/brunoerg",
         "id" : 19480819,
         "login" : "brunoerg",
         "node_id" : "MDQ6VXNlcjE5NDgwODE5",
         "organizations_url" : "https://api.github.com/users/brunoerg/orgs",
         "received_events_url" : "https://api.github.com/users/brunoerg/received_events",
         "repos_url" : "https://api.github.com/users/brunoerg/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/brunoerg/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/brunoerg/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/brunoerg"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--85328a0da195eb286784d51f73fa0af9-->\n\nð§ At least one of the CI tasks failed. Make sure to run all tests locally, according to the\ndocumentation.\n\nPossibly this is due to a silent merge conflict (the changes in this pull request being\nincompatible with the current code in the target branch). If so, make sure to rebase on the latest\ncommit of the target branch.\n\nLeave a comment here, if you need help tracking down a confusing failure.\n\n<sub>Debug: https://github.com/bitcoin/bitcoin/runs/25842896976</sub>",
      "created_at" : "2024-06-05T15:17:11Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/30230#issuecomment-2150333960",
      "id" : 2150333960,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/30230",
      "node_id" : "IC_kwDOABII586AK34I",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2150333960/reactions"
      },
      "updated_at" : "2024-06-05T15:17:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2150333960",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/30230#discussion_r1630144097"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/30230"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1630144097"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "SAM 3.1 doesn't use ports so there's a check in `Connect` that `to.GetPort()` equals 0. For the purposes of this fuzz test it doesn't seem to really matter whether `to` is specified. But I agree it's not best practice to have it be uninitialized. I think changing this to `if (session.Connect(CService{}, conn, proxy_error))` and getting rid of the declared variable is probably better.",
      "commit_id" : "193c748e44f8647a056121fc9cbb9c2efbcbfc49",
      "created_at" : "2024-06-06T19:52:17Z",
      "diff_hunk" : "@@ -0,0 +1,64 @@\n+// Copyright (c) 2020-2022 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// // file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include <common/args.h>\n+#include <i2p.h>\n+#include <netaddress.h>\n+#include <netbase.h>\n+#include <test/fuzz/FuzzedDataProvider.h>\n+#include <test/fuzz/fuzz.h>\n+#include <test/fuzz/util.h>\n+#include <test/fuzz/util/net.h>\n+#include <test/util/setup_common.h>\n+#include <util/fs_helpers.h>\n+#include <util/threadinterrupt.h>\n+\n+void initialize_i2p()\n+{\n+    static const auto testing_setup = MakeNoLogFileContext<>();\n+}\n+\n+FUZZ_TARGET(i2p, .init = initialize_i2p)\n+{\n+    FuzzedDataProvider fuzzed_data_provider{buffer.data(), buffer.size()};\n+\n+    SetMockTime(ConsumeTime(fuzzed_data_provider));\n+\n+    // Mock CreateSock() to create FuzzedSock.\n+    auto CreateSockOrig = CreateSock;\n+    CreateSock = [&fuzzed_data_provider](const sa_family_t&) {\n+        return std::make_unique<FuzzedSock>(fuzzed_data_provider);\n+    };\n+\n+    const fs::path private_key_path = gArgs.GetDataDirNet() / \"fuzzed_i2p_private_key\";\n+    const CService addr{in6_addr(IN6ADDR_LOOPBACK_INIT), 7656};\n+    const Proxy sam_proxy{addr, false};\n+    CThreadInterrupt interrupt;\n+\n+    i2p::sam::Session session{private_key_path, sam_proxy, &interrupt};\n+    i2p::Connection conn;\n+\n+    if (session.Listen(conn)) {\n+        if (session.Accept(conn)) {\n+            try {\n+                (void)conn.sock->RecvUntilTerminator('\\n', 10ms, interrupt, i2p::sam::MAX_MSG_SIZE);\n+            } catch (const std::runtime_error&) {\n+            }\n+        }\n+    }\n+\n+    const CService to;\n+    bool proxy_error;\n+\n+    if (session.Connect(to, conn, proxy_error)) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/30230#discussion_r1630144097",
      "id" : 1630144097,
      "in_reply_to_id" : 1627954290,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585hKgZh",
      "original_commit_id" : "b9a754f24c8f7bc19e4d2df1c0ba8e70b826af34",
      "original_line" : 54,
      "original_position" : 54,
      "original_start_line" : null,
      "path" : "src/test/fuzz/i2p.cpp",
      "position" : null,
      "pull_request_review_id" : 2103083900,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/30230",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1630144097/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-06-06T19:52:18Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1630144097",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/95179662?v=4",
         "events_url" : "https://api.github.com/users/marcofleon/events{/privacy}",
         "followers_url" : "https://api.github.com/users/marcofleon/followers",
         "following_url" : "https://api.github.com/users/marcofleon/following{/other_user}",
         "gists_url" : "https://api.github.com/users/marcofleon/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/marcofleon",
         "id" : 95179662,
         "login" : "marcofleon",
         "node_id" : "U_kgDOBaxTjg",
         "organizations_url" : "https://api.github.com/users/marcofleon/orgs",
         "received_events_url" : "https://api.github.com/users/marcofleon/received_events",
         "repos_url" : "https://api.github.com/users/marcofleon/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/marcofleon/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/marcofleon/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/marcofleon"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/30230#discussion_r1630167230"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/30230"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1630167230"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Good catch, thanks. Fixed.",
      "commit_id" : "193c748e44f8647a056121fc9cbb9c2efbcbfc49",
      "created_at" : "2024-06-06T20:09:54Z",
      "diff_hunk" : "@@ -0,0 +1,64 @@\n+// Copyright (c) 2020-2022 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// // file COPYING or http://www.opensource.org/licenses/mit-license.php.",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/30230#discussion_r1630167230",
      "id" : 1630167230,
      "in_reply_to_id" : 1627820274,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585hKmC-",
      "original_commit_id" : "b9a754f24c8f7bc19e4d2df1c0ba8e70b826af34",
      "original_line" : 3,
      "original_position" : 3,
      "original_start_line" : 1,
      "path" : "src/test/fuzz/i2p.cpp",
      "position" : null,
      "pull_request_review_id" : 2103115641,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/30230",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1630167230/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : "RIGHT",
      "subject_type" : "line",
      "updated_at" : "2024-06-06T20:09:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1630167230",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/95179662?v=4",
         "events_url" : "https://api.github.com/users/marcofleon/events{/privacy}",
         "followers_url" : "https://api.github.com/users/marcofleon/followers",
         "following_url" : "https://api.github.com/users/marcofleon/following{/other_user}",
         "gists_url" : "https://api.github.com/users/marcofleon/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/marcofleon",
         "id" : 95179662,
         "login" : "marcofleon",
         "node_id" : "U_kgDOBaxTjg",
         "organizations_url" : "https://api.github.com/users/marcofleon/orgs",
         "received_events_url" : "https://api.github.com/users/marcofleon/received_events",
         "repos_url" : "https://api.github.com/users/marcofleon/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/marcofleon/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/marcofleon/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/marcofleon"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> My only note: I think it would be worthwhile to point out in the PR description what changes you have made to the original harness and why they were necessary.\r\n\r\nDone. Thanks for all the help @dergoegge.\r\n",
      "created_at" : "2024-06-09T16:21:19Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/30230#issuecomment-2156686118",
      "id" : 2156686118,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/30230",
      "node_id" : "IC_kwDOABII586AjGsm",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2156686118/reactions"
      },
      "updated_at" : "2024-06-09T16:21:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2156686118",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/95179662?v=4",
         "events_url" : "https://api.github.com/users/marcofleon/events{/privacy}",
         "followers_url" : "https://api.github.com/users/marcofleon/followers",
         "following_url" : "https://api.github.com/users/marcofleon/following{/other_user}",
         "gists_url" : "https://api.github.com/users/marcofleon/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/marcofleon",
         "id" : 95179662,
         "login" : "marcofleon",
         "node_id" : "U_kgDOBaxTjg",
         "organizations_url" : "https://api.github.com/users/marcofleon/orgs",
         "received_events_url" : "https://api.github.com/users/marcofleon/received_events",
         "repos_url" : "https://api.github.com/users/marcofleon/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/marcofleon/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/marcofleon/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/marcofleon"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/30230#discussion_r1633234183"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/30230"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1633234183"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Does this mean that the time will be frozen for the duration of the test?\r\n\r\nFrom the OP:\r\n\r\n> GetTime is called at points in i2p\r\n\r\nWhere is `GetTime()` called in i2p?",
      "commit_id" : "193c748e44f8647a056121fc9cbb9c2efbcbfc49",
      "created_at" : "2024-06-10T13:16:04Z",
      "diff_hunk" : "@@ -0,0 +1,63 @@\n+// Copyright (c) The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include <common/args.h>\n+#include <i2p.h>\n+#include <netaddress.h>\n+#include <netbase.h>\n+#include <test/fuzz/FuzzedDataProvider.h>\n+#include <test/fuzz/fuzz.h>\n+#include <test/fuzz/util.h>\n+#include <test/fuzz/util/net.h>\n+#include <test/util/setup_common.h>\n+#include <util/fs_helpers.h>\n+#include <util/threadinterrupt.h>\n+\n+void initialize_i2p()\n+{\n+    static const auto testing_setup = MakeNoLogFileContext<>();\n+}\n+\n+FUZZ_TARGET(i2p, .init = initialize_i2p)\n+{\n+    FuzzedDataProvider fuzzed_data_provider{buffer.data(), buffer.size()};\n+\n+    SetMockTime(ConsumeTime(fuzzed_data_provider));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/30230#discussion_r1633234183",
      "id" : 1633234183,
      "line" : 26,
      "node_id" : "PRRC_kwDOABII585hWS0H",
      "original_commit_id" : "193c748e44f8647a056121fc9cbb9c2efbcbfc49",
      "original_line" : 26,
      "original_position" : 26,
      "original_start_line" : null,
      "path" : "src/test/fuzz/i2p.cpp",
      "position" : 26,
      "pull_request_review_id" : 2107776689,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/30230",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1633234183/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-06-10T13:42:32Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1633234183",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/30230#discussion_r1633272627"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/30230"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1633272627"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Can be simplified:\r\n\r\n```suggestion\r\n    CThreadInterrupt interrupt;\r\n\r\n    i2p::sam::Session session{private_key_path, Proxy{CService{}, false}, &interrupt};\r\n```\r\n",
      "commit_id" : "193c748e44f8647a056121fc9cbb9c2efbcbfc49",
      "created_at" : "2024-06-10T13:40:19Z",
      "diff_hunk" : "@@ -0,0 +1,63 @@\n+// Copyright (c) The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include <common/args.h>\n+#include <i2p.h>\n+#include <netaddress.h>\n+#include <netbase.h>\n+#include <test/fuzz/FuzzedDataProvider.h>\n+#include <test/fuzz/fuzz.h>\n+#include <test/fuzz/util.h>\n+#include <test/fuzz/util/net.h>\n+#include <test/util/setup_common.h>\n+#include <util/fs_helpers.h>\n+#include <util/threadinterrupt.h>\n+\n+void initialize_i2p()\n+{\n+    static const auto testing_setup = MakeNoLogFileContext<>();\n+}\n+\n+FUZZ_TARGET(i2p, .init = initialize_i2p)\n+{\n+    FuzzedDataProvider fuzzed_data_provider{buffer.data(), buffer.size()};\n+\n+    SetMockTime(ConsumeTime(fuzzed_data_provider));\n+\n+    // Mock CreateSock() to create FuzzedSock.\n+    auto CreateSockOrig = CreateSock;\n+    CreateSock = [&fuzzed_data_provider](const sa_family_t&) {\n+        return std::make_unique<FuzzedSock>(fuzzed_data_provider);\n+    };\n+\n+    const fs::path private_key_path = gArgs.GetDataDirNet() / \"fuzzed_i2p_private_key\";\n+    const CService addr{in6_addr(IN6ADDR_LOOPBACK_INIT), 7656};\n+    const Proxy sam_proxy{addr, false};\n+    CThreadInterrupt interrupt;\n+\n+    i2p::sam::Session session{private_key_path, sam_proxy, &interrupt};",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/30230#discussion_r1633272627",
      "id" : 1633272627,
      "line" : 39,
      "node_id" : "PRRC_kwDOABII585hWcMz",
      "original_commit_id" : "193c748e44f8647a056121fc9cbb9c2efbcbfc49",
      "original_line" : 39,
      "original_position" : 39,
      "original_start_line" : 35,
      "path" : "src/test/fuzz/i2p.cpp",
      "position" : 39,
      "pull_request_review_id" : 2107776689,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/30230",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1633272627/reactions"
      },
      "side" : "RIGHT",
      "start_line" : 35,
      "start_side" : "RIGHT",
      "subject_type" : "line",
      "updated_at" : "2024-06-10T13:42:32Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1633272627",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/30230#discussion_r1635006887"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/30230"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1635006887"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "> Where is GetTime() called in i2p?\r\n\r\nIt's used in `Sock` (e.g. `RecvUntilTerminator`).",
      "commit_id" : "193c748e44f8647a056121fc9cbb9c2efbcbfc49",
      "created_at" : "2024-06-11T14:36:43Z",
      "diff_hunk" : "@@ -0,0 +1,63 @@\n+// Copyright (c) The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include <common/args.h>\n+#include <i2p.h>\n+#include <netaddress.h>\n+#include <netbase.h>\n+#include <test/fuzz/FuzzedDataProvider.h>\n+#include <test/fuzz/fuzz.h>\n+#include <test/fuzz/util.h>\n+#include <test/fuzz/util/net.h>\n+#include <test/util/setup_common.h>\n+#include <util/fs_helpers.h>\n+#include <util/threadinterrupt.h>\n+\n+void initialize_i2p()\n+{\n+    static const auto testing_setup = MakeNoLogFileContext<>();\n+}\n+\n+FUZZ_TARGET(i2p, .init = initialize_i2p)\n+{\n+    FuzzedDataProvider fuzzed_data_provider{buffer.data(), buffer.size()};\n+\n+    SetMockTime(ConsumeTime(fuzzed_data_provider));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/30230#discussion_r1635006887",
      "id" : 1635006887,
      "in_reply_to_id" : 1633234183,
      "line" : 26,
      "node_id" : "PRRC_kwDOABII585hdDmn",
      "original_commit_id" : "193c748e44f8647a056121fc9cbb9c2efbcbfc49",
      "original_line" : 26,
      "original_position" : 26,
      "original_start_line" : null,
      "path" : "src/test/fuzz/i2p.cpp",
      "position" : 26,
      "pull_request_review_id" : 2110665938,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/30230",
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1635006887/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-06-11T14:36:43Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1635006887",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/19480819?v=4",
         "events_url" : "https://api.github.com/users/brunoerg/events{/privacy}",
         "followers_url" : "https://api.github.com/users/brunoerg/followers",
         "following_url" : "https://api.github.com/users/brunoerg/following{/other_user}",
         "gists_url" : "https://api.github.com/users/brunoerg/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/brunoerg",
         "id" : 19480819,
         "login" : "brunoerg",
         "node_id" : "MDQ6VXNlcjE5NDgwODE5",
         "organizations_url" : "https://api.github.com/users/brunoerg/orgs",
         "received_events_url" : "https://api.github.com/users/brunoerg/received_events",
         "repos_url" : "https://api.github.com/users/brunoerg/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/brunoerg/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/brunoerg/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/brunoerg"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/30230#discussion_r1635236868"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/30230"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1635236868"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Yes, `GetTime()` is also called in `SendComplete`.\r\n\r\n> Does this mean that the time will be frozen for the duration of the test?\r\n\r\nI believe so, unless I'm missing something. For each iteration, `g_mock_time` will be set to an integer within the range specified in `ConsumeTime`.",
      "commit_id" : "193c748e44f8647a056121fc9cbb9c2efbcbfc49",
      "created_at" : "2024-06-11T17:20:24Z",
      "diff_hunk" : "@@ -0,0 +1,63 @@\n+// Copyright (c) The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include <common/args.h>\n+#include <i2p.h>\n+#include <netaddress.h>\n+#include <netbase.h>\n+#include <test/fuzz/FuzzedDataProvider.h>\n+#include <test/fuzz/fuzz.h>\n+#include <test/fuzz/util.h>\n+#include <test/fuzz/util/net.h>\n+#include <test/util/setup_common.h>\n+#include <util/fs_helpers.h>\n+#include <util/threadinterrupt.h>\n+\n+void initialize_i2p()\n+{\n+    static const auto testing_setup = MakeNoLogFileContext<>();\n+}\n+\n+FUZZ_TARGET(i2p, .init = initialize_i2p)\n+{\n+    FuzzedDataProvider fuzzed_data_provider{buffer.data(), buffer.size()};\n+\n+    SetMockTime(ConsumeTime(fuzzed_data_provider));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/30230#discussion_r1635236868",
      "id" : 1635236868,
      "in_reply_to_id" : 1633234183,
      "line" : 26,
      "node_id" : "PRRC_kwDOABII585hd7wE",
      "original_commit_id" : "193c748e44f8647a056121fc9cbb9c2efbcbfc49",
      "original_line" : 26,
      "original_position" : 26,
      "original_start_line" : null,
      "path" : "src/test/fuzz/i2p.cpp",
      "position" : 26,
      "pull_request_review_id" : 2111041298,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/30230",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1635236868/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-06-11T17:20:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1635236868",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/95179662?v=4",
         "events_url" : "https://api.github.com/users/marcofleon/events{/privacy}",
         "followers_url" : "https://api.github.com/users/marcofleon/followers",
         "following_url" : "https://api.github.com/users/marcofleon/following{/other_user}",
         "gists_url" : "https://api.github.com/users/marcofleon/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/marcofleon",
         "id" : 95179662,
         "login" : "marcofleon",
         "node_id" : "U_kgDOBaxTjg",
         "organizations_url" : "https://api.github.com/users/marcofleon/orgs",
         "received_events_url" : "https://api.github.com/users/marcofleon/received_events",
         "repos_url" : "https://api.github.com/users/marcofleon/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/marcofleon/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/marcofleon/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/marcofleon"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/30230#discussion_r1635237667"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/30230"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1635237667"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "This doesn't seem to work when I test it. I think this results in an unspecifed IPv6 address, so in `Hello()`, the sock returned from `m_control_host.Connect()` is always invalid. \r\nhttps://github.com/bitcoin/bitcoin/blob/337f9d44c28b1d3563a0063a8805b418d506698d/src/netaddress.cpp#L425-L431\r\n\r\nAnother option would be to use `ConsumeService` here instead of explicitly setting `addr`. I haven't tested it yet but would probably work.",
      "commit_id" : "193c748e44f8647a056121fc9cbb9c2efbcbfc49",
      "created_at" : "2024-06-11T17:21:01Z",
      "diff_hunk" : "@@ -0,0 +1,63 @@\n+// Copyright (c) The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include <common/args.h>\n+#include <i2p.h>\n+#include <netaddress.h>\n+#include <netbase.h>\n+#include <test/fuzz/FuzzedDataProvider.h>\n+#include <test/fuzz/fuzz.h>\n+#include <test/fuzz/util.h>\n+#include <test/fuzz/util/net.h>\n+#include <test/util/setup_common.h>\n+#include <util/fs_helpers.h>\n+#include <util/threadinterrupt.h>\n+\n+void initialize_i2p()\n+{\n+    static const auto testing_setup = MakeNoLogFileContext<>();\n+}\n+\n+FUZZ_TARGET(i2p, .init = initialize_i2p)\n+{\n+    FuzzedDataProvider fuzzed_data_provider{buffer.data(), buffer.size()};\n+\n+    SetMockTime(ConsumeTime(fuzzed_data_provider));\n+\n+    // Mock CreateSock() to create FuzzedSock.\n+    auto CreateSockOrig = CreateSock;\n+    CreateSock = [&fuzzed_data_provider](const sa_family_t&) {\n+        return std::make_unique<FuzzedSock>(fuzzed_data_provider);\n+    };\n+\n+    const fs::path private_key_path = gArgs.GetDataDirNet() / \"fuzzed_i2p_private_key\";\n+    const CService addr{in6_addr(IN6ADDR_LOOPBACK_INIT), 7656};\n+    const Proxy sam_proxy{addr, false};\n+    CThreadInterrupt interrupt;\n+\n+    i2p::sam::Session session{private_key_path, sam_proxy, &interrupt};",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/30230#discussion_r1635237667",
      "id" : 1635237667,
      "in_reply_to_id" : 1633272627,
      "line" : 39,
      "node_id" : "PRRC_kwDOABII585hd78j",
      "original_commit_id" : "193c748e44f8647a056121fc9cbb9c2efbcbfc49",
      "original_line" : 39,
      "original_position" : 39,
      "original_start_line" : 35,
      "path" : "src/test/fuzz/i2p.cpp",
      "position" : 39,
      "pull_request_review_id" : 2111042337,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/30230",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1635237667/reactions"
      },
      "side" : "RIGHT",
      "start_line" : 35,
      "start_side" : "RIGHT",
      "subject_type" : "line",
      "updated_at" : "2024-06-11T17:23:43Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1635237667",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/95179662?v=4",
         "events_url" : "https://api.github.com/users/marcofleon/events{/privacy}",
         "followers_url" : "https://api.github.com/users/marcofleon/followers",
         "following_url" : "https://api.github.com/users/marcofleon/following{/other_user}",
         "gists_url" : "https://api.github.com/users/marcofleon/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/marcofleon",
         "id" : 95179662,
         "login" : "marcofleon",
         "node_id" : "U_kgDOBaxTjg",
         "organizations_url" : "https://api.github.com/users/marcofleon/orgs",
         "received_events_url" : "https://api.github.com/users/marcofleon/received_events",
         "repos_url" : "https://api.github.com/users/marcofleon/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/marcofleon/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/marcofleon/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/marcofleon"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/30230#discussion_r1635926463"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/30230"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1635926463"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Alright, I did not realize this.\r\n(can resolve this)",
      "commit_id" : "193c748e44f8647a056121fc9cbb9c2efbcbfc49",
      "created_at" : "2024-06-12T07:07:04Z",
      "diff_hunk" : "@@ -0,0 +1,63 @@\n+// Copyright (c) The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include <common/args.h>\n+#include <i2p.h>\n+#include <netaddress.h>\n+#include <netbase.h>\n+#include <test/fuzz/FuzzedDataProvider.h>\n+#include <test/fuzz/fuzz.h>\n+#include <test/fuzz/util.h>\n+#include <test/fuzz/util/net.h>\n+#include <test/util/setup_common.h>\n+#include <util/fs_helpers.h>\n+#include <util/threadinterrupt.h>\n+\n+void initialize_i2p()\n+{\n+    static const auto testing_setup = MakeNoLogFileContext<>();\n+}\n+\n+FUZZ_TARGET(i2p, .init = initialize_i2p)\n+{\n+    FuzzedDataProvider fuzzed_data_provider{buffer.data(), buffer.size()};\n+\n+    SetMockTime(ConsumeTime(fuzzed_data_provider));\n+\n+    // Mock CreateSock() to create FuzzedSock.\n+    auto CreateSockOrig = CreateSock;\n+    CreateSock = [&fuzzed_data_provider](const sa_family_t&) {\n+        return std::make_unique<FuzzedSock>(fuzzed_data_provider);\n+    };\n+\n+    const fs::path private_key_path = gArgs.GetDataDirNet() / \"fuzzed_i2p_private_key\";\n+    const CService addr{in6_addr(IN6ADDR_LOOPBACK_INIT), 7656};\n+    const Proxy sam_proxy{addr, false};\n+    CThreadInterrupt interrupt;\n+\n+    i2p::sam::Session session{private_key_path, sam_proxy, &interrupt};",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/30230#discussion_r1635926463",
      "id" : 1635926463,
      "in_reply_to_id" : 1633272627,
      "line" : 39,
      "node_id" : "PRRC_kwDOABII585hgkG_",
      "original_commit_id" : "193c748e44f8647a056121fc9cbb9c2efbcbfc49",
      "original_line" : 39,
      "original_position" : 39,
      "original_start_line" : 35,
      "path" : "src/test/fuzz/i2p.cpp",
      "position" : 39,
      "pull_request_review_id" : 2112131383,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/30230",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1635926463/reactions"
      },
      "side" : "RIGHT",
      "start_line" : 35,
      "start_side" : "RIGHT",
      "subject_type" : "line",
      "updated_at" : "2024-06-12T07:07:04Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1635926463",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/30230#discussion_r1635958429"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/30230"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1635958429"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "The frozen time will defeat `FUZZED_SOCKET_FAKE_LATENCY`:\r\n\r\nhttps://github.com/bitcoin/bitcoin/blob/91e0beede2859dea987ba6db746e95dca0ceb024/src/test/fuzz/util/net.cpp#L229-L231\r\n\r\n`RecvUntilTerminator()` and `SendComplete()` will never timeout. Is this acceptable trade off in order to have the fuzz test \"more stable\"? If it is \"unstable\" without freezing the time, does that mean that some of those methods actually timed out, resulting in a wider coverage? In this aspect, it seems that stable = only covering the non-timeout-codepath = narrower coverage = worse.\r\n\r\nWould it make sense to use mock time, but advance it a little in each `Recv()` or `Send()` method?",
      "commit_id" : "193c748e44f8647a056121fc9cbb9c2efbcbfc49",
      "created_at" : "2024-06-12T07:28:08Z",
      "diff_hunk" : "@@ -0,0 +1,63 @@\n+// Copyright (c) The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include <common/args.h>\n+#include <i2p.h>\n+#include <netaddress.h>\n+#include <netbase.h>\n+#include <test/fuzz/FuzzedDataProvider.h>\n+#include <test/fuzz/fuzz.h>\n+#include <test/fuzz/util.h>\n+#include <test/fuzz/util/net.h>\n+#include <test/util/setup_common.h>\n+#include <util/fs_helpers.h>\n+#include <util/threadinterrupt.h>\n+\n+void initialize_i2p()\n+{\n+    static const auto testing_setup = MakeNoLogFileContext<>();\n+}\n+\n+FUZZ_TARGET(i2p, .init = initialize_i2p)\n+{\n+    FuzzedDataProvider fuzzed_data_provider{buffer.data(), buffer.size()};\n+\n+    SetMockTime(ConsumeTime(fuzzed_data_provider));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/30230#discussion_r1635958429",
      "id" : 1635958429,
      "in_reply_to_id" : 1633234183,
      "line" : 26,
      "node_id" : "PRRC_kwDOABII585hgr6d",
      "original_commit_id" : "193c748e44f8647a056121fc9cbb9c2efbcbfc49",
      "original_line" : 26,
      "original_position" : 26,
      "original_start_line" : null,
      "path" : "src/test/fuzz/i2p.cpp",
      "position" : 26,
      "pull_request_review_id" : 2112180312,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/30230",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1635958429/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-06-12T07:28:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1635958429",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/30230#discussion_r1636394068"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/30230"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1636394068"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "I think it's an acceptable tradeoff, as using mock time makes the test more determinstic. I don't think timeouts are too critical a part of the I2P code, and this harness as is reaches almost all of the code paths in `i2p`. \r\n\r\nBut I see what you're saying in that advancing time would be a more accurate simulation. Maybe we leave this as a potential follow up on `FuzzedSock`?",
      "commit_id" : "193c748e44f8647a056121fc9cbb9c2efbcbfc49",
      "created_at" : "2024-06-12T12:45:48Z",
      "diff_hunk" : "@@ -0,0 +1,63 @@\n+// Copyright (c) The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include <common/args.h>\n+#include <i2p.h>\n+#include <netaddress.h>\n+#include <netbase.h>\n+#include <test/fuzz/FuzzedDataProvider.h>\n+#include <test/fuzz/fuzz.h>\n+#include <test/fuzz/util.h>\n+#include <test/fuzz/util/net.h>\n+#include <test/util/setup_common.h>\n+#include <util/fs_helpers.h>\n+#include <util/threadinterrupt.h>\n+\n+void initialize_i2p()\n+{\n+    static const auto testing_setup = MakeNoLogFileContext<>();\n+}\n+\n+FUZZ_TARGET(i2p, .init = initialize_i2p)\n+{\n+    FuzzedDataProvider fuzzed_data_provider{buffer.data(), buffer.size()};\n+\n+    SetMockTime(ConsumeTime(fuzzed_data_provider));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/30230#discussion_r1636394068",
      "id" : 1636394068,
      "in_reply_to_id" : 1633234183,
      "line" : 26,
      "node_id" : "PRRC_kwDOABII585hiWRU",
      "original_commit_id" : "193c748e44f8647a056121fc9cbb9c2efbcbfc49",
      "original_line" : 26,
      "original_position" : 26,
      "original_start_line" : null,
      "path" : "src/test/fuzz/i2p.cpp",
      "position" : 26,
      "pull_request_review_id" : 2112908818,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/30230",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1636394068/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-06-12T12:45:48Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1636394068",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/95179662?v=4",
         "events_url" : "https://api.github.com/users/marcofleon/events{/privacy}",
         "followers_url" : "https://api.github.com/users/marcofleon/followers",
         "following_url" : "https://api.github.com/users/marcofleon/following{/other_user}",
         "gists_url" : "https://api.github.com/users/marcofleon/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/marcofleon",
         "id" : 95179662,
         "login" : "marcofleon",
         "node_id" : "U_kgDOBaxTjg",
         "organizations_url" : "https://api.github.com/users/marcofleon/orgs",
         "received_events_url" : "https://api.github.com/users/marcofleon/received_events",
         "repos_url" : "https://api.github.com/users/marcofleon/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/marcofleon/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/marcofleon/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/marcofleon"
      }
   }
]
