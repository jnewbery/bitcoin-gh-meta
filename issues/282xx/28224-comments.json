[
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\nA summary of reviews will appear here.\n",
      "created_at" : "2023-08-05T20:29:32Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28224#issuecomment-1666598631",
      "id" : 1666598631,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28224",
      "node_id" : "IC_kwDOABII585jVkbn",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1666598631/reactions"
      },
      "updated_at" : "2023-08-05T20:29:32Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1666598631",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28224#discussion_r1341571120"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28224"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1341571120"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "In commit \"tests: Reset node context members on ~ChainTestingSetup\" (960112dbb1fb028b73b6e83932dd457f5a69ab5d)\r\n\r\nI think this change makes sense but the log message is misleading because in the Shutdown() function the kernel context is currently destroyed _before_ chainman, mempool, scheduler, not after:\r\n\r\nhttps://github.com/bitcoin/bitcoin/blob/d18a8f6f6969487021b8fd50391a2a8d1dc29844/src/init.cpp#L346-L350\r\n\r\nThe test code is more correct than the Shutdown() code because ~BasicTestingSetup runs after ~ChainTestingSetup, and the chainman and scheduler objects should be destroyed before kernel context because they might rely on it.\r\n\r\nIt'd be good to either clarify the log message in this commit to say mention this part of the change doesn't match Shutdown function, or update the Shutdown function to destroy the kernel context last like the test. (I could also update the Shutdown function in #28051 if you want this PR to be test-only)",
      "commit_id" : "960112dbb1fb028b73b6e83932dd457f5a69ab5d",
      "created_at" : "2023-09-29T16:21:02Z",
      "diff_hunk" : "@@ -144,6 +144,7 @@ BasicTestingSetup::BasicTestingSetup(const ChainType chainType, const std::vecto\n \n BasicTestingSetup::~BasicTestingSetup()\n {\n+    m_node.kernel.reset();",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28224#discussion_r1341571120",
      "id" : 1341571120,
      "line" : 147,
      "node_id" : "PRRC_kwDOABII585P9sAw",
      "original_commit_id" : "960112dbb1fb028b73b6e83932dd457f5a69ab5d",
      "original_line" : 147,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "src/test/util/setup_common.cpp",
      "position" : 4,
      "pull_request_review_id" : 1651118283,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28224",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1341571120/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-09-29T16:36:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1341571120",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   }
]
