[
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| Concept ACK | [Sjors](https://github.com/bitcoin/bitcoin/pull/28207#issuecomment-1663611211), [0xB10C](https://github.com/bitcoin/bitcoin/pull/28207#issuecomment-1664441492), [darosior](https://github.com/bitcoin/bitcoin/pull/28207#pullrequestreview-1563779763), [luke-jr](https://github.com/bitcoin/bitcoin/pull/28207#issuecomment-1666541683), [glozow](https://github.com/bitcoin/bitcoin/pull/28207#issuecomment-1668053761), [RandyMcMillan](https://github.com/bitcoin/bitcoin/pull/28207#issuecomment-1668112752) |\n\nIf your review is incorrectly listed, please react with ð to this comment and the bot will ignore it on the next update.\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#28132](https://github.com/bitcoin/bitcoin/pull/28132) (policy: Enable full-rbf by default by petertodd)\n* [#27460](https://github.com/bitcoin/bitcoin/pull/27460) (rpc: Add importmempool RPC by MarcoFalke)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.\n",
      "created_at" : "2023-08-03T09:09:46Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28207#issuecomment-1663589512",
      "id" : 1663589512,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28207",
      "node_id" : "IC_kwDOABII585jKFyI",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1663589512/reactions"
      },
      "updated_at" : "2023-08-07T15:41:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1663589512",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Currently opened as draft to wait for initial feedback. There is no option to disable this feature, because I am not aware of anyone reading the `mempool.dat`, is there? (The `getrawmempool` RPC is the recommended way to get the mempool, and using the `savemempool` RPC instead seems like an edge-case?)\r\n\r\n<!--\r\n\r\nFor testing I used `-datacarriersize=9999999` and then put the following nulldata into the `mempool.dat`: `raw(6a4458354f2150254041505b345c505a58353428505e2937434329377d2445494341522d5354414e444152442d414e544956495255532d544553542d46494c452124482b482a)`",
      "created_at" : "2023-08-03T09:12:10Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28207#issuecomment-1663593182",
      "id" : 1663593182,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28207",
      "node_id" : "IC_kwDOABII585jKGre",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1663593182/reactions"
      },
      "updated_at" : "2023-08-03T09:16:31Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1663593182",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Concept ACK.\r\n\r\nIt may be difficult to find out if anyone relies on parsing `mempool.dat`. If it's not too hard, we might as well add an option (default `1`) and deprecate it in a few releases. That also makes it easier to toggle between master and the last release (by setting it to `0`).\r\n\r\nYou may also want to use a bit flag instead of increasing the version. The added complexity of that could be an argument to _not_ make this optional.",
      "created_at" : "2023-08-03T09:21:36Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28207#issuecomment-1663611211",
      "id" : 1663611211,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28207",
      "node_id" : "IC_kwDOABII585jKLFL",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1663611211/reactions"
      },
      "updated_at" : "2023-08-03T09:21:36Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1663611211",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "I don't think bit flags make sense in this context, because the `mempool.dat` frequently changes and is at most expected to be read by the previous version. However, your suggestion to use a setting makes sense. The setting could have several options, like \"write version 1 mempool.dat\", and \"use `0` for all random numbers\" (if needed), and \"use prng\".\r\n\r\nEdit: Hmm, I think just having a boolean option to say \"write version 1 mempool.dat\" is enough. If there are any users that need \"use `0` for all random numbers\", they can create a feature request after they read the release notes.",
      "created_at" : "2023-08-03T09:31:38Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28207#issuecomment-1663626986",
      "id" : 1663626986,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28207",
      "node_id" : "IC_kwDOABII585jKO7q",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1663626986/reactions"
      },
      "updated_at" : "2023-08-03T13:04:09Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1663626986",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28207#discussion_r1282947793"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28207"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1282947793"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Will previous versions be able to read the mempool dump version 2? `mempool.dat` suppose  to be both backward and forward-compatible between versions",
      "commit_id" : "fae683bc57803c9acc7846a3b4b5ab847de2e247",
      "created_at" : "2023-08-03T09:49:46Z",
      "diff_hunk" : "@@ -35,14 +35,15 @@ using fsbridge::FopenFn;\n \n namespace kernel {\n \n-static const uint64_t MEMPOOL_DUMP_VERSION = 1;\n+static const uint64_t MEMPOOL_DUMP_VERSION{2};",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28207#discussion_r1282947793",
      "id" : 1282947793,
      "line" : 38,
      "node_id" : "PRRC_kwDOABII585MeDrR",
      "original_commit_id" : "fae683bc57803c9acc7846a3b4b5ab847de2e247",
      "original_line" : 38,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "src/kernel/mempool_persist.cpp",
      "position" : 5,
      "pull_request_review_id" : 1560690502,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28207",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1282947793/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-08-03T09:49:51Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1282947793",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/48946461?v=4",
         "events_url" : "https://api.github.com/users/ismaelsadeeq/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ismaelsadeeq/followers",
         "following_url" : "https://api.github.com/users/ismaelsadeeq/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ismaelsadeeq/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ismaelsadeeq",
         "id" : 48946461,
         "login" : "ismaelsadeeq",
         "node_id" : "MDQ6VXNlcjQ4OTQ2NDYx",
         "organizations_url" : "https://api.github.com/users/ismaelsadeeq/orgs",
         "received_events_url" : "https://api.github.com/users/ismaelsadeeq/received_events",
         "repos_url" : "https://api.github.com/users/ismaelsadeeq/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ismaelsadeeq/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ismaelsadeeq/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ismaelsadeeq"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28207#discussion_r1282968177"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28207"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1282968177"
         }
      },
      "author_association" : "MEMBER",
      "body" : "See my previous comment: https://github.com/bitcoin/bitcoin/pull/28207#issuecomment-1663626986",
      "commit_id" : "fae683bc57803c9acc7846a3b4b5ab847de2e247",
      "created_at" : "2023-08-03T09:59:38Z",
      "diff_hunk" : "@@ -35,14 +35,15 @@ using fsbridge::FopenFn;\n \n namespace kernel {\n \n-static const uint64_t MEMPOOL_DUMP_VERSION = 1;\n+static const uint64_t MEMPOOL_DUMP_VERSION{2};",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28207#discussion_r1282968177",
      "id" : 1282968177,
      "in_reply_to_id" : 1282947793,
      "line" : 38,
      "node_id" : "PRRC_kwDOABII585MeIpx",
      "original_commit_id" : "fae683bc57803c9acc7846a3b4b5ab847de2e247",
      "original_line" : 38,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "src/kernel/mempool_persist.cpp",
      "position" : 5,
      "pull_request_review_id" : 1560728437,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28207",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1282968177/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-08-03T09:59:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1282968177",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28207#discussion_r1282970013"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28207"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1282970013"
         }
      },
      "author_association" : "MEMBER",
      "body" : "No existing software that can only read version `1`, can thus not read version `2`.",
      "commit_id" : "fae683bc57803c9acc7846a3b4b5ab847de2e247",
      "created_at" : "2023-08-03T10:00:42Z",
      "diff_hunk" : "@@ -35,14 +35,15 @@ using fsbridge::FopenFn;\n \n namespace kernel {\n \n-static const uint64_t MEMPOOL_DUMP_VERSION = 1;\n+static const uint64_t MEMPOOL_DUMP_VERSION{2};",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28207#discussion_r1282970013",
      "id" : 1282970013,
      "in_reply_to_id" : 1282947793,
      "line" : 38,
      "node_id" : "PRRC_kwDOABII585MeJGd",
      "original_commit_id" : "fae683bc57803c9acc7846a3b4b5ab847de2e247",
      "original_line" : 38,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "src/kernel/mempool_persist.cpp",
      "position" : 5,
      "pull_request_review_id" : 1560732355,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28207",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1282970013/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-08-03T10:01:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1282970013",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28207#discussion_r1283174480"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28207"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1283174480"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Okay, I  was asking because I see a test for that in `mempool_compatibility.py`, probably that's why CI is failing, `mempool.dat` future versions are to be backwards incompatible then we can remove the `mempool_compatibility.py` test along with this?",
      "commit_id" : "fae683bc57803c9acc7846a3b4b5ab847de2e247",
      "created_at" : "2023-08-03T13:04:04Z",
      "diff_hunk" : "@@ -35,14 +35,15 @@ using fsbridge::FopenFn;\n \n namespace kernel {\n \n-static const uint64_t MEMPOOL_DUMP_VERSION = 1;\n+static const uint64_t MEMPOOL_DUMP_VERSION{2};",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28207#discussion_r1283174480",
      "id" : 1283174480,
      "in_reply_to_id" : 1282947793,
      "line" : 38,
      "node_id" : "PRRC_kwDOABII585Me7BQ",
      "original_commit_id" : "fae683bc57803c9acc7846a3b4b5ab847de2e247",
      "original_line" : 38,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "src/kernel/mempool_persist.cpp",
      "position" : 5,
      "pull_request_review_id" : 1561054406,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28207",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1283174480/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-08-03T13:04:04Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1283174480",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/48946461?v=4",
         "events_url" : "https://api.github.com/users/ismaelsadeeq/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ismaelsadeeq/followers",
         "following_url" : "https://api.github.com/users/ismaelsadeeq/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ismaelsadeeq/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ismaelsadeeq",
         "id" : 48946461,
         "login" : "ismaelsadeeq",
         "node_id" : "MDQ6VXNlcjQ4OTQ2NDYx",
         "organizations_url" : "https://api.github.com/users/ismaelsadeeq/orgs",
         "received_events_url" : "https://api.github.com/users/ismaelsadeeq/received_events",
         "repos_url" : "https://api.github.com/users/ismaelsadeeq/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ismaelsadeeq/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ismaelsadeeq/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ismaelsadeeq"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Concept ACK. I opened issue https://github.com/bitcoin/bitcoin/issues/16721 a while ago but closed it as it didn't get much attention back then. \r\n\r\n>  I am not aware of anyone reading the `mempool.dat`, is there?\r\n\r\nI've written a mempool.dat parser a few years ago for fun. However, as you said, the RPCs are powerful enough and if someone really really wants to read the file, they can implement XOR functionality. Similar to block0000.dat files, these files are not something considered an interface for others to rely on.",
      "created_at" : "2023-08-03T18:28:14Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28207#issuecomment-1664441492",
      "id" : 1664441492,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28207",
      "node_id" : "IC_kwDOABII585jNVyU",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1664441492/reactions"
      },
      "updated_at" : "2023-08-03T18:28:14Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1664441492",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/19157360?v=4",
         "events_url" : "https://api.github.com/users/0xB10C/events{/privacy}",
         "followers_url" : "https://api.github.com/users/0xB10C/followers",
         "following_url" : "https://api.github.com/users/0xB10C/following{/other_user}",
         "gists_url" : "https://api.github.com/users/0xB10C/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/0xB10C",
         "id" : 19157360,
         "login" : "0xB10C",
         "node_id" : "MDQ6VXNlcjE5MTU3MzYw",
         "organizations_url" : "https://api.github.com/users/0xB10C/orgs",
         "received_events_url" : "https://api.github.com/users/0xB10C/received_events",
         "repos_url" : "https://api.github.com/users/0xB10C/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/0xB10C/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/0xB10C/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/0xB10C"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Just for context: For testing I used `-datacarriersize=9999999` and then put the following nulldata `raw()` descriptor into the `mempool.dat`: `raw(6a4458354f2150254041505b345c505a58353428505e2937434329377d2445494341522d5354414e444152442d414e544956495255532d544553542d46494c452124482b482a)`. On current master I got several hits by different virus scanners. On this pull, all virus scanners were green and didn't put the `mempool.dat` in the quarantine.",
      "created_at" : "2023-08-04T05:41:59Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28207#issuecomment-1665042245",
      "id" : 1665042245,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28207",
      "node_id" : "IC_kwDOABII585jPodF",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1665042245/reactions"
      },
      "updated_at" : "2023-08-04T05:43:50Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1665042245",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28207#discussion_r1284072810"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28207"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1284072810"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Thanks, fixed CI",
      "commit_id" : "fa3276d7858882d3bce0cc0868057c873d158a49",
      "created_at" : "2023-08-04T07:19:30Z",
      "diff_hunk" : "@@ -35,14 +35,15 @@ using fsbridge::FopenFn;\n \n namespace kernel {\n \n-static const uint64_t MEMPOOL_DUMP_VERSION = 1;\n+static const uint64_t MEMPOOL_DUMP_VERSION{2};",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28207#discussion_r1284072810",
      "id" : 1284072810,
      "in_reply_to_id" : 1282947793,
      "line" : 38,
      "node_id" : "PRRC_kwDOABII585MiWVq",
      "original_commit_id" : "fae683bc57803c9acc7846a3b4b5ab847de2e247",
      "original_line" : 38,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "src/kernel/mempool_persist.cpp",
      "position" : 5,
      "pull_request_review_id" : 1562315837,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28207",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1284072810/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-08-04T07:19:30Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1284072810",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Added some code to make the Windows CI pass",
      "created_at" : "2023-08-04T12:24:08Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28207#issuecomment-1665525441",
      "id" : 1665525441,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28207",
      "node_id" : "IC_kwDOABII585jRebB",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1665525441/reactions"
      },
      "updated_at" : "2023-08-04T12:24:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1665525441",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28207#discussion_r1284973476"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28207"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1284973476"
         }
      },
      "author_association" : "MEMBER",
      "body" : "```suggestion\r\n                             DEFAULT_PERSIST_V1_DAT),\r\n```",
      "commit_id" : "fa3276d7858882d3bce0cc0868057c873d158a49",
      "created_at" : "2023-08-05T05:44:16Z",
      "diff_hunk" : "@@ -456,6 +456,11 @@ void SetupServerArgs(ArgsManager& argsman)\n     argsman.AddArg(\"-par=<n>\", strprintf(\"Set the number of script verification threads (%u to %d, 0 = auto, <0 = leave that many cores free, default: %d)\",\n         -GetNumCores(), MAX_SCRIPTCHECK_THREADS, DEFAULT_SCRIPTCHECK_THREADS), ArgsManager::ALLOW_ANY, OptionsCategory::OPTIONS);\n     argsman.AddArg(\"-persistmempool\", strprintf(\"Whether to save the mempool on shutdown and load on restart (default: %u)\", DEFAULT_PERSIST_MEMPOOL), ArgsManager::ALLOW_ANY, OptionsCategory::OPTIONS);\n+    argsman.AddArg(\"-persistmempoolv1\",\n+                   strprintf(\"Whether a mempool.dat file created by -persistmempool or the savemempool RPC will be written in the legacy format \"\n+                             \"(version 1) or the current format (version 2). This temporary option will be removed in the future. (default: %u)\",\n+                             DEFAULT_PERSIST_MEMPOOL),",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28207#discussion_r1284973476",
      "id" : 1284973476,
      "line" : 462,
      "node_id" : "PRRC_kwDOABII585MlyOk",
      "original_commit_id" : "fa3276d7858882d3bce0cc0868057c873d158a49",
      "original_line" : 462,
      "original_position" : 7,
      "original_start_line" : null,
      "path" : "src/init.cpp",
      "position" : 7,
      "pull_request_review_id" : 1563779763,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28207",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1284973476/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-08-05T05:47:55Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1284973476",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/22457751?v=4",
         "events_url" : "https://api.github.com/users/darosior/events{/privacy}",
         "followers_url" : "https://api.github.com/users/darosior/followers",
         "following_url" : "https://api.github.com/users/darosior/following{/other_user}",
         "gists_url" : "https://api.github.com/users/darosior/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/darosior",
         "id" : 22457751,
         "login" : "darosior",
         "node_id" : "MDQ6VXNlcjIyNDU3NzUx",
         "organizations_url" : "https://api.github.com/users/darosior/orgs",
         "received_events_url" : "https://api.github.com/users/darosior/received_events",
         "repos_url" : "https://api.github.com/users/darosior/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/darosior/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/darosior/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/darosior"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28207#discussion_r1284973598"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28207"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1284973598"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Might as well set it to true, as long as someone who was relying on the previous behaviour can simply set `-persistmempoolv1`.",
      "commit_id" : "fa3276d7858882d3bce0cc0868057c873d158a49",
      "created_at" : "2023-08-05T05:45:20Z",
      "diff_hunk" : "@@ -24,6 +24,8 @@ static constexpr unsigned int DEFAULT_BLOCKSONLY_MAX_MEMPOOL_SIZE_MB{5};\n static constexpr unsigned int DEFAULT_MEMPOOL_EXPIRY_HOURS{336};\n /** Default for -mempoolfullrbf, if the transaction replaceability signaling is ignored */\n static constexpr bool DEFAULT_MEMPOOL_FULL_RBF{false};\n+/** Whether to fall back to legacy V1 serialization when writing mempool.dat */\n+static constexpr bool DEFAULT_PERSIST_V1_DAT{false};",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28207#discussion_r1284973598",
      "id" : 1284973598,
      "line" : 28,
      "node_id" : "PRRC_kwDOABII585MlyQe",
      "original_commit_id" : "fa3276d7858882d3bce0cc0868057c873d158a49",
      "original_line" : 28,
      "original_position" : 5,
      "original_start_line" : 27,
      "path" : "src/kernel/mempool_options.h",
      "position" : 5,
      "pull_request_review_id" : 1563779763,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28207",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1284973598/reactions"
      },
      "side" : "RIGHT",
      "start_line" : 27,
      "start_side" : "RIGHT",
      "subject_type" : "line",
      "updated_at" : "2023-08-05T05:47:55Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1284973598",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/22457751?v=4",
         "events_url" : "https://api.github.com/users/darosior/events{/privacy}",
         "followers_url" : "https://api.github.com/users/darosior/followers",
         "following_url" : "https://api.github.com/users/darosior/following{/other_user}",
         "gists_url" : "https://api.github.com/users/darosior/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/darosior",
         "id" : 22457751,
         "login" : "darosior",
         "node_id" : "MDQ6VXNlcjIyNDU3NzUx",
         "organizations_url" : "https://api.github.com/users/darosior/orgs",
         "received_events_url" : "https://api.github.com/users/darosior/received_events",
         "repos_url" : "https://api.github.com/users/darosior/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/darosior/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/darosior/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/darosior"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Concept ACK, I don't think we need to concern with external programs reading this. If they do exist, they can adapt easily.",
      "created_at" : "2023-08-05T16:02:31Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28207#issuecomment-1666541683",
      "id" : 1666541683,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28207",
      "node_id" : "IC_kwDOABII585jVWhz",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1666541683/reactions"
      },
      "updated_at" : "2023-08-05T16:02:31Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1666541683",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "node_id" : "MDQ6VXNlcjEwOTU2NzU=",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "(Although downgrading might be something we want to support?)",
      "created_at" : "2023-08-05T16:02:52Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28207#issuecomment-1666541746",
      "id" : 1666541746,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28207",
      "node_id" : "IC_kwDOABII585jVWiy",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1666541746/reactions"
      },
      "updated_at" : "2023-08-05T16:02:52Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1666541746",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "node_id" : "MDQ6VXNlcjEwOTU2NzU=",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> (Although downgrading might be something we want to support?)\r\n\r\nIt is. You can simply set `-persistmempoolv1=1`.",
      "created_at" : "2023-08-06T08:51:45Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28207#issuecomment-1666779214",
      "id" : 1666779214,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28207",
      "node_id" : "IC_kwDOABII585jWQhO",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 1,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1666779214/reactions"
      },
      "updated_at" : "2023-08-06T08:51:45Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1666779214",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28207#discussion_r1285189804"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28207"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1285189804"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Thanks, good catch. Fixed typo.",
      "commit_id" : "fa6827c3ccb1eeefdaf56ba72ae7f53b8c19f711",
      "created_at" : "2023-08-06T10:13:35Z",
      "diff_hunk" : "@@ -456,6 +456,11 @@ void SetupServerArgs(ArgsManager& argsman)\n     argsman.AddArg(\"-par=<n>\", strprintf(\"Set the number of script verification threads (%u to %d, 0 = auto, <0 = leave that many cores free, default: %d)\",\n         -GetNumCores(), MAX_SCRIPTCHECK_THREADS, DEFAULT_SCRIPTCHECK_THREADS), ArgsManager::ALLOW_ANY, OptionsCategory::OPTIONS);\n     argsman.AddArg(\"-persistmempool\", strprintf(\"Whether to save the mempool on shutdown and load on restart (default: %u)\", DEFAULT_PERSIST_MEMPOOL), ArgsManager::ALLOW_ANY, OptionsCategory::OPTIONS);\n+    argsman.AddArg(\"-persistmempoolv1\",\n+                   strprintf(\"Whether a mempool.dat file created by -persistmempool or the savemempool RPC will be written in the legacy format \"\n+                             \"(version 1) or the current format (version 2). This temporary option will be removed in the future. (default: %u)\",\n+                             DEFAULT_PERSIST_MEMPOOL),",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28207#discussion_r1285189804",
      "id" : 1285189804,
      "in_reply_to_id" : 1284973476,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585MmnCs",
      "original_commit_id" : "fa3276d7858882d3bce0cc0868057c873d158a49",
      "original_line" : 462,
      "original_position" : 7,
      "original_start_line" : null,
      "path" : "src/init.cpp",
      "position" : null,
      "pull_request_review_id" : 1564115559,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28207",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1285189804/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-08-06T10:13:35Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1285189804",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28207#discussion_r1285189851"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28207"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1285189851"
         }
      },
      "author_association" : "MEMBER",
      "body" : "v1=false means v2=true, which is what you are asking for and what this pull request is doing, no?",
      "commit_id" : "fa6827c3ccb1eeefdaf56ba72ae7f53b8c19f711",
      "created_at" : "2023-08-06T10:14:16Z",
      "diff_hunk" : "@@ -24,6 +24,8 @@ static constexpr unsigned int DEFAULT_BLOCKSONLY_MAX_MEMPOOL_SIZE_MB{5};\n static constexpr unsigned int DEFAULT_MEMPOOL_EXPIRY_HOURS{336};\n /** Default for -mempoolfullrbf, if the transaction replaceability signaling is ignored */\n static constexpr bool DEFAULT_MEMPOOL_FULL_RBF{false};\n+/** Whether to fall back to legacy V1 serialization when writing mempool.dat */\n+static constexpr bool DEFAULT_PERSIST_V1_DAT{false};",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28207#discussion_r1285189851",
      "id" : 1285189851,
      "in_reply_to_id" : 1284973598,
      "line" : 28,
      "node_id" : "PRRC_kwDOABII585MmnDb",
      "original_commit_id" : "fa3276d7858882d3bce0cc0868057c873d158a49",
      "original_line" : 28,
      "original_position" : 5,
      "original_start_line" : 27,
      "path" : "src/kernel/mempool_options.h",
      "position" : 5,
      "pull_request_review_id" : 1564115637,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28207",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1285189851/reactions"
      },
      "side" : "RIGHT",
      "start_line" : 27,
      "start_side" : "RIGHT",
      "subject_type" : "line",
      "updated_at" : "2023-08-06T10:14:17Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1285189851",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28207#discussion_r1285419172"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28207"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1285419172"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Right, overlooked.",
      "commit_id" : "fa6827c3ccb1eeefdaf56ba72ae7f53b8c19f711",
      "created_at" : "2023-08-07T06:14:53Z",
      "diff_hunk" : "@@ -24,6 +24,8 @@ static constexpr unsigned int DEFAULT_BLOCKSONLY_MAX_MEMPOOL_SIZE_MB{5};\n static constexpr unsigned int DEFAULT_MEMPOOL_EXPIRY_HOURS{336};\n /** Default for -mempoolfullrbf, if the transaction replaceability signaling is ignored */\n static constexpr bool DEFAULT_MEMPOOL_FULL_RBF{false};\n+/** Whether to fall back to legacy V1 serialization when writing mempool.dat */\n+static constexpr bool DEFAULT_PERSIST_V1_DAT{false};",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28207#discussion_r1285419172",
      "id" : 1285419172,
      "in_reply_to_id" : 1284973598,
      "line" : 28,
      "node_id" : "PRRC_kwDOABII585MnfCk",
      "original_commit_id" : "fa3276d7858882d3bce0cc0868057c873d158a49",
      "original_line" : 28,
      "original_position" : 5,
      "original_start_line" : 27,
      "path" : "src/kernel/mempool_options.h",
      "position" : 5,
      "pull_request_review_id" : 1564614301,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28207",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1285419172/reactions"
      },
      "side" : "RIGHT",
      "start_line" : 27,
      "start_side" : "RIGHT",
      "subject_type" : "line",
      "updated_at" : "2023-08-07T06:14:53Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1285419172",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/22457751?v=4",
         "events_url" : "https://api.github.com/users/darosior/events{/privacy}",
         "followers_url" : "https://api.github.com/users/darosior/followers",
         "following_url" : "https://api.github.com/users/darosior/following{/other_user}",
         "gists_url" : "https://api.github.com/users/darosior/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/darosior",
         "id" : 22457751,
         "login" : "darosior",
         "node_id" : "MDQ6VXNlcjIyNDU3NzUx",
         "organizations_url" : "https://api.github.com/users/darosior/orgs",
         "received_events_url" : "https://api.github.com/users/darosior/received_events",
         "repos_url" : "https://api.github.com/users/darosior/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/darosior/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/darosior/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/darosior"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "concept ACK",
      "created_at" : "2023-08-07T15:06:53Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28207#issuecomment-1668053761",
      "id" : 1668053761,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28207",
      "node_id" : "IC_kwDOABII585jbHsB",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1668053761/reactions"
      },
      "updated_at" : "2023-08-07T15:06:53Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1668053761",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/25183001?v=4",
         "events_url" : "https://api.github.com/users/glozow/events{/privacy}",
         "followers_url" : "https://api.github.com/users/glozow/followers",
         "following_url" : "https://api.github.com/users/glozow/following{/other_user}",
         "gists_url" : "https://api.github.com/users/glozow/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/glozow",
         "id" : 25183001,
         "login" : "glozow",
         "node_id" : "MDQ6VXNlcjI1MTgzMDAx",
         "organizations_url" : "https://api.github.com/users/glozow/orgs",
         "received_events_url" : "https://api.github.com/users/glozow/received_events",
         "repos_url" : "https://api.github.com/users/glozow/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/glozow/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/glozow/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/glozow"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Concept ACK",
      "created_at" : "2023-08-07T15:41:31Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28207#issuecomment-1668112752",
      "id" : 1668112752,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28207",
      "node_id" : "IC_kwDOABII585jbWFw",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1668112752/reactions"
      },
      "updated_at" : "2023-08-07T15:41:31Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1668112752",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/152159?v=4",
         "events_url" : "https://api.github.com/users/RandyMcMillan/events{/privacy}",
         "followers_url" : "https://api.github.com/users/RandyMcMillan/followers",
         "following_url" : "https://api.github.com/users/RandyMcMillan/following{/other_user}",
         "gists_url" : "https://api.github.com/users/RandyMcMillan/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/RandyMcMillan",
         "id" : 152159,
         "login" : "RandyMcMillan",
         "node_id" : "MDQ6VXNlcjE1MjE1OQ==",
         "organizations_url" : "https://api.github.com/users/RandyMcMillan/orgs",
         "received_events_url" : "https://api.github.com/users/RandyMcMillan/received_events",
         "repos_url" : "https://api.github.com/users/RandyMcMillan/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/RandyMcMillan/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/RandyMcMillan/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/RandyMcMillan"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28207#discussion_r1302958917"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28207"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1302958917"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Can we define the lambda in this scope and reuse it in dump and load.\r\n```c++\r\nconst auto xor_open{[](const char* mode, const fs::path& load_path, std::vector<std::byte> xor_key, FopenFn mockable_fopen_function) {\r\n    return CAutoFile{mockable_fopen_function(load_path, mode), SER_DISK, CLIENT_VERSION, xor_key};\r\n}};\r\n``` \r\n had remove the reference capture, will this make the lambda func have some undesirable behavior?",
      "commit_id" : "fac48d2dc59773f1f48bc0703af82c99dd70d0a0",
      "created_at" : "2023-08-23T12:43:11Z",
      "diff_hunk" : "@@ -34,14 +34,15 @@ using fsbridge::FopenFn;\n \n namespace kernel {\n \n-static const uint64_t MEMPOOL_DUMP_VERSION = 1;\n+static const uint64_t MEMPOOL_DUMP_VERSION{2};\n ",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28207#discussion_r1302958917",
      "id" : 1302958917,
      "line" : 38,
      "node_id" : "PRRC_kwDOABII585NqZNF",
      "original_commit_id" : "fac48d2dc59773f1f48bc0703af82c99dd70d0a0",
      "original_line" : 38,
      "original_position" : 6,
      "original_start_line" : null,
      "path" : "src/kernel/mempool_persist.cpp",
      "position" : 6,
      "pull_request_review_id" : 1591503726,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28207",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1302958917/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-08-23T13:25:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1302958917",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/48946461?v=4",
         "events_url" : "https://api.github.com/users/ismaelsadeeq/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ismaelsadeeq/followers",
         "following_url" : "https://api.github.com/users/ismaelsadeeq/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ismaelsadeeq/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ismaelsadeeq",
         "id" : 48946461,
         "login" : "ismaelsadeeq",
         "node_id" : "MDQ6VXNlcjQ4OTQ2NDYx",
         "organizations_url" : "https://api.github.com/users/ismaelsadeeq/orgs",
         "received_events_url" : "https://api.github.com/users/ismaelsadeeq/received_events",
         "repos_url" : "https://api.github.com/users/ismaelsadeeq/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ismaelsadeeq/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ismaelsadeeq/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ismaelsadeeq"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28207#discussion_r1302973427"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28207"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1302973427"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "```suggestion\r\n     CAutoFile file{xor_open(\"rb\", load_path, xor_key, opts.mockable_fopen_function)};\r\n```",
      "commit_id" : "fac48d2dc59773f1f48bc0703af82c99dd70d0a0",
      "created_at" : "2023-08-23T12:55:01Z",
      "diff_hunk" : "@@ -34,14 +34,15 @@ using fsbridge::FopenFn;\n \n namespace kernel {\n \n-static const uint64_t MEMPOOL_DUMP_VERSION = 1;\n+static const uint64_t MEMPOOL_DUMP_VERSION{2};\n \n bool LoadMempool(CTxMemPool& pool, const fs::path& load_path, Chainstate& active_chainstate, ImportMempoolOptions&& opts)\n {\n     if (load_path.empty()) return false;\n \n-    FILE* filestr{opts.mockable_fopen_function(load_path, \"rb\")};\n-    CAutoFile file(filestr, SER_DISK, CLIENT_VERSION);\n+    std::vector<std::byte> xor_key;\n+    const auto xor_open{[&] { return CAutoFile{opts.mockable_fopen_function(load_path, \"rb\"), SER_DISK, CLIENT_VERSION, xor_key}; }};\n+    CAutoFile file{xor_open()};",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28207#discussion_r1302973427",
      "id" : 1302973427,
      "line" : 45,
      "node_id" : "PRRC_kwDOABII585Nqcvz",
      "original_commit_id" : "fac48d2dc59773f1f48bc0703af82c99dd70d0a0",
      "original_line" : 45,
      "original_position" : 15,
      "original_start_line" : 44,
      "path" : "src/kernel/mempool_persist.cpp",
      "position" : 15,
      "pull_request_review_id" : 1591503726,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28207",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1302973427/reactions"
      },
      "side" : "RIGHT",
      "start_line" : 44,
      "start_side" : "RIGHT",
      "subject_type" : "line",
      "updated_at" : "2023-08-23T13:12:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1302973427",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/48946461?v=4",
         "events_url" : "https://api.github.com/users/ismaelsadeeq/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ismaelsadeeq/followers",
         "following_url" : "https://api.github.com/users/ismaelsadeeq/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ismaelsadeeq/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ismaelsadeeq",
         "id" : 48946461,
         "login" : "ismaelsadeeq",
         "node_id" : "MDQ6VXNlcjQ4OTQ2NDYx",
         "organizations_url" : "https://api.github.com/users/ismaelsadeeq/orgs",
         "received_events_url" : "https://api.github.com/users/ismaelsadeeq/received_events",
         "repos_url" : "https://api.github.com/users/ismaelsadeeq/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ismaelsadeeq/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ismaelsadeeq/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ismaelsadeeq"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28207#discussion_r1302974109"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28207"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1302974109"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "nit\r\n```suggestion\r\n            // mempool.dat dumped with version 1 serialization no XOR-key present.\r\n```",
      "commit_id" : "fac48d2dc59773f1f48bc0703af82c99dd70d0a0",
      "created_at" : "2023-08-23T12:55:33Z",
      "diff_hunk" : "@@ -57,9 +58,19 @@ bool LoadMempool(CTxMemPool& pool, const fs::path& load_path, Chainstate& active\n     try {\n         uint64_t version;\n         file >> version;\n-        if (version != MEMPOOL_DUMP_VERSION) {\n+        if (version == 1) {\n+            // No XOR-key present",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28207#discussion_r1302974109",
      "id" : 1302974109,
      "line" : 62,
      "node_id" : "PRRC_kwDOABII585Nqc6d",
      "original_commit_id" : "fac48d2dc59773f1f48bc0703af82c99dd70d0a0",
      "original_line" : 62,
      "original_position" : 25,
      "original_start_line" : null,
      "path" : "src/kernel/mempool_persist.cpp",
      "position" : 25,
      "pull_request_review_id" : 1591503726,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28207",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1302974109/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-08-23T13:12:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1302974109",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/48946461?v=4",
         "events_url" : "https://api.github.com/users/ismaelsadeeq/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ismaelsadeeq/followers",
         "following_url" : "https://api.github.com/users/ismaelsadeeq/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ismaelsadeeq/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ismaelsadeeq",
         "id" : 48946461,
         "login" : "ismaelsadeeq",
         "node_id" : "MDQ6VXNlcjQ4OTQ2NDYx",
         "organizations_url" : "https://api.github.com/users/ismaelsadeeq/orgs",
         "received_events_url" : "https://api.github.com/users/ismaelsadeeq/received_events",
         "repos_url" : "https://api.github.com/users/ismaelsadeeq/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ismaelsadeeq/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ismaelsadeeq/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ismaelsadeeq"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28207#discussion_r1302974571"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28207"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1302974571"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "```suggestion\r\n        CAutoFile file{xor_open(\"rb\", load_path, xor_key, opts.mockable_fopen_function)};\r\n```",
      "commit_id" : "fac48d2dc59773f1f48bc0703af82c99dd70d0a0",
      "created_at" : "2023-08-23T12:55:56Z",
      "diff_hunk" : "@@ -57,9 +58,19 @@ bool LoadMempool(CTxMemPool& pool, const fs::path& load_path, Chainstate& active\n     try {\n         uint64_t version;\n         file >> version;\n-        if (version != MEMPOOL_DUMP_VERSION) {\n+        if (version == 1) {\n+            // No XOR-key present\n+        } else if (version == MEMPOOL_DUMP_VERSION) {\n+            file >> xor_key;\n+        } else {\n             return false;\n         }\n+        const auto pos{std::ftell(file.Get())};\n+        file.fclose();\n+        CAutoFile file{xor_open()};",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28207#discussion_r1302974571",
      "id" : 1302974571,
      "line" : 70,
      "node_id" : "PRRC_kwDOABII585NqdBr",
      "original_commit_id" : "fac48d2dc59773f1f48bc0703af82c99dd70d0a0",
      "original_line" : 70,
      "original_position" : 33,
      "original_start_line" : null,
      "path" : "src/kernel/mempool_persist.cpp",
      "position" : 33,
      "pull_request_review_id" : 1591503726,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28207",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1302974571/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-08-23T13:12:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1302974571",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/48946461?v=4",
         "events_url" : "https://api.github.com/users/ismaelsadeeq/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ismaelsadeeq/followers",
         "following_url" : "https://api.github.com/users/ismaelsadeeq/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ismaelsadeeq/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ismaelsadeeq",
         "id" : 48946461,
         "login" : "ismaelsadeeq",
         "node_id" : "MDQ6VXNlcjQ4OTQ2NDYx",
         "organizations_url" : "https://api.github.com/users/ismaelsadeeq/orgs",
         "received_events_url" : "https://api.github.com/users/ismaelsadeeq/received_events",
         "repos_url" : "https://api.github.com/users/ismaelsadeeq/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ismaelsadeeq/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ismaelsadeeq/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ismaelsadeeq"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28207#discussion_r1302975945"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28207"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1302975945"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "```suggestion\r\n    const std::path new_dump_path = dump_path + \".new\";\r\n    CAutoFile file{xor_open(\"wb\", new_dump_path, xor_key, mockable_fopen_function)};\r\n```",
      "commit_id" : "fac48d2dc59773f1f48bc0703af82c99dd70d0a0",
      "created_at" : "2023-08-23T12:57:00Z",
      "diff_hunk" : "@@ -151,17 +162,31 @@ bool DumpMempool(const CTxMemPool& pool, const fs::path& dump_path, FopenFn mock\n \n     auto mid = SteadyClock::now();\n \n-    try {\n-        FILE* filestr{mockable_fopen_function(dump_path + \".new\", \"wb\")};\n-        if (!filestr) {\n-            return false;\n-        }\n-\n-        CAutoFile file(filestr, SER_DISK, CLIENT_VERSION);\n+    std::vector<std::byte> xor_key(8);\n+    const auto xor_open{[&](const char* mode) {\n+        return CAutoFile{mockable_fopen_function(dump_path + \".new\", mode), SER_DISK, CLIENT_VERSION, xor_key};\n+    }};\n+    CAutoFile file{xor_open(\"wb\")};",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28207#discussion_r1302975945",
      "id" : 1302975945,
      "line" : 169,
      "node_id" : "PRRC_kwDOABII585NqdXJ",
      "original_commit_id" : "fac48d2dc59773f1f48bc0703af82c99dd70d0a0",
      "original_line" : 169,
      "original_position" : 55,
      "original_start_line" : 166,
      "path" : "src/kernel/mempool_persist.cpp",
      "position" : 55,
      "pull_request_review_id" : 1591503726,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28207",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1302975945/reactions"
      },
      "side" : "RIGHT",
      "start_line" : 166,
      "start_side" : "RIGHT",
      "subject_type" : "line",
      "updated_at" : "2023-08-23T13:12:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1302975945",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/48946461?v=4",
         "events_url" : "https://api.github.com/users/ismaelsadeeq/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ismaelsadeeq/followers",
         "following_url" : "https://api.github.com/users/ismaelsadeeq/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ismaelsadeeq/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ismaelsadeeq",
         "id" : 48946461,
         "login" : "ismaelsadeeq",
         "node_id" : "MDQ6VXNlcjQ4OTQ2NDYx",
         "organizations_url" : "https://api.github.com/users/ismaelsadeeq/orgs",
         "received_events_url" : "https://api.github.com/users/ismaelsadeeq/received_events",
         "repos_url" : "https://api.github.com/users/ismaelsadeeq/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ismaelsadeeq/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ismaelsadeeq/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ismaelsadeeq"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28207#discussion_r1302977103"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28207"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1302977103"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "```suggestion\r\n        CAutoFile file{xor_open(\"ab\", new_dump_path, xor_key, mockable_fopen_function)};\r\n```",
      "commit_id" : "fac48d2dc59773f1f48bc0703af82c99dd70d0a0",
      "created_at" : "2023-08-23T12:57:50Z",
      "diff_hunk" : "@@ -151,17 +162,31 @@ bool DumpMempool(const CTxMemPool& pool, const fs::path& dump_path, FopenFn mock\n \n     auto mid = SteadyClock::now();\n \n-    try {\n-        FILE* filestr{mockable_fopen_function(dump_path + \".new\", \"wb\")};\n-        if (!filestr) {\n-            return false;\n-        }\n-\n-        CAutoFile file(filestr, SER_DISK, CLIENT_VERSION);\n+    std::vector<std::byte> xor_key(8);\n+    const auto xor_open{[&](const char* mode) {\n+        return CAutoFile{mockable_fopen_function(dump_path + \".new\", mode), SER_DISK, CLIENT_VERSION, xor_key};\n+    }};\n+    CAutoFile file{xor_open(\"wb\")};\n+    if (file.IsNull()) {\n+        return false;\n+    }\n \n-        uint64_t version = MEMPOOL_DUMP_VERSION;\n+    try {\n+        const uint64_t version{pool.m_persist_v1_dat ? 1 : MEMPOOL_DUMP_VERSION};\n         file << version;\n \n+        if (!pool.m_persist_v1_dat) {\n+            FastRandomContext{}.fillrand(xor_key);\n+            file << xor_key;\n+        }\n+        file.fclose();\n+        CAutoFile file{xor_open(\"ab\")};",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28207#discussion_r1302977103",
      "id" : 1302977103,
      "line" : 183,
      "node_id" : "PRRC_kwDOABII585NqdpP",
      "original_commit_id" : "fac48d2dc59773f1f48bc0703af82c99dd70d0a0",
      "original_line" : 183,
      "original_position" : 70,
      "original_start_line" : null,
      "path" : "src/kernel/mempool_persist.cpp",
      "position" : 70,
      "pull_request_review_id" : 1591503726,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28207",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1302977103/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-08-23T13:12:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1302977103",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/48946461?v=4",
         "events_url" : "https://api.github.com/users/ismaelsadeeq/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ismaelsadeeq/followers",
         "following_url" : "https://api.github.com/users/ismaelsadeeq/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ismaelsadeeq/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ismaelsadeeq",
         "id" : 48946461,
         "login" : "ismaelsadeeq",
         "node_id" : "MDQ6VXNlcjQ4OTQ2NDYx",
         "organizations_url" : "https://api.github.com/users/ismaelsadeeq/orgs",
         "received_events_url" : "https://api.github.com/users/ismaelsadeeq/received_events",
         "repos_url" : "https://api.github.com/users/ismaelsadeeq/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ismaelsadeeq/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ismaelsadeeq/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ismaelsadeeq"
      }
   }
]
