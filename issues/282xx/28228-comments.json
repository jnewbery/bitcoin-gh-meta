[
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| Approach ACK | [stickies-v](https://github.com/bitcoin/bitcoin/pull/28228#pullrequestreview-1609859440) |\n\nIf your review is incorrectly listed, please react with ð to this comment and the bot will ignore it on the next update.\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nNo conflicts as of last run.\n",
      "created_at" : "2023-08-07T07:54:44Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28228#issuecomment-1667374859",
      "id" : 1667374859,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28228",
      "node_id" : "IC_kwDOABII585jYh8L",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1667374859/reactions"
      },
      "updated_at" : "2023-09-05T11:51:50Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1667374859",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28228#discussion_r1290782048"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28228"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1290782048"
         }
      },
      "author_association" : "MEMBER",
      "body" : "is this `time.h` include needed?",
      "commit_id" : "cfe93642b27cbd4770200b9a6e571e1388ba35dc",
      "created_at" : "2023-08-10T23:54:07Z",
      "diff_hunk" : "@@ -5,25 +5,35 @@\n #include <kernel/context.h>\n \n #include <crypto/sha256.h>\n+#include <kernel/checks.h>\n #include <key.h>\n #include <logging.h>\n #include <pubkey.h>\n #include <random.h>\n+#include <util/result.h>\n+#include <util/time.h>",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28228#discussion_r1290782048",
      "id" : 1290782048,
      "line" : 14,
      "node_id" : "PRRC_kwDOABII585M78Vg",
      "original_commit_id" : "fb248a88d41d6f001cf05a5fe3fc008ce7b3d599",
      "original_line" : 14,
      "original_position" : 10,
      "original_start_line" : null,
      "path" : "src/kernel/context.cpp",
      "position" : 10,
      "pull_request_review_id" : 1572867097,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28228",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1290782048/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-08-11T02:59:53Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1290782048",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5377650?v=4",
         "events_url" : "https://api.github.com/users/furszy/events{/privacy}",
         "followers_url" : "https://api.github.com/users/furszy/followers",
         "following_url" : "https://api.github.com/users/furszy/following{/other_user}",
         "gists_url" : "https://api.github.com/users/furszy/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/furszy",
         "id" : 5377650,
         "login" : "furszy",
         "node_id" : "MDQ6VXNlcjUzNzc2NTA=",
         "organizations_url" : "https://api.github.com/users/furszy/orgs",
         "received_events_url" : "https://api.github.com/users/furszy/received_events",
         "repos_url" : "https://api.github.com/users/furszy/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/furszy/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/furszy/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/furszy"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28228#discussion_r1290847697"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28228"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1290847697"
         }
      },
      "author_association" : "MEMBER",
      "body" : "This will trigger two error dialogs in the GUI, one after the other.\r\nMaybe better to concatenate the errors and call `InitError()` only once?",
      "commit_id" : "cfe93642b27cbd4770200b9a6e571e1388ba35dc",
      "created_at" : "2023-08-11T02:53:02Z",
      "diff_hunk" : "@@ -184,9 +184,13 @@ static bool AppInit(NodeContext& node)\n             return false;\n         }\n \n-        node.kernel = std::make_unique<kernel::Context>();\n-        if (!AppInitSanityChecks(*node.kernel))\n-        {\n+        auto result{kernel::Context::MakeContext()};\n+        if (!result) {\n+            InitError(util::ErrorString(result));\n+            return InitError(strprintf(_(\"Initialization kernel sanity check failed. %s is shutting down.\"), PACKAGE_NAME));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28228#discussion_r1290847697",
      "id" : 1290847697,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585M8MXR",
      "original_commit_id" : "fb248a88d41d6f001cf05a5fe3fc008ce7b3d599",
      "original_line" : 190,
      "original_position" : 10,
      "original_start_line" : 189,
      "path" : "src/bitcoind.cpp",
      "position" : null,
      "pull_request_review_id" : 1572867097,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28228",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1290847697/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : "RIGHT",
      "subject_type" : "line",
      "updated_at" : "2023-08-11T02:59:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1290847697",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5377650?v=4",
         "events_url" : "https://api.github.com/users/furszy/events{/privacy}",
         "followers_url" : "https://api.github.com/users/furszy/followers",
         "following_url" : "https://api.github.com/users/furszy/following{/other_user}",
         "gists_url" : "https://api.github.com/users/furszy/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/furszy",
         "id" : 5377650,
         "login" : "furszy",
         "node_id" : "MDQ6VXNlcjUzNzc2NTA=",
         "organizations_url" : "https://api.github.com/users/furszy/orgs",
         "received_events_url" : "https://api.github.com/users/furszy/received_events",
         "repos_url" : "https://api.github.com/users/furszy/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/furszy/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/furszy/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/furszy"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28228#discussion_r1290848071"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28228"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1290848071"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Isn't this logged in the caller as well?",
      "commit_id" : "cfe93642b27cbd4770200b9a6e571e1388ba35dc",
      "created_at" : "2023-08-11T02:54:00Z",
      "diff_hunk" : "@@ -5,25 +5,35 @@\n #include <kernel/context.h>\n \n #include <crypto/sha256.h>\n+#include <kernel/checks.h>\n #include <key.h>\n #include <logging.h>\n #include <pubkey.h>\n #include <random.h>\n+#include <util/result.h>\n+#include <util/time.h>\n \n #include <string>\n \n-\n namespace kernel {\n Context* g_context;\n \n-Context::Context()\n+util::Result<std::unique_ptr<Context>> Context::MakeContext()\n {\n     assert(!g_context);\n-    g_context = this;\n+    auto context{std::unique_ptr<Context>(new Context())};\n+    g_context = context.get();\n     std::string sha256_algo = SHA256AutoDetect();\n     LogPrintf(\"Using the '%s' SHA256 implementation\\n\", sha256_algo);\n     RandomInit();\n     ECC_Start();\n+\n+    if (auto res{SanityChecks(*context)}; !res) {\n+        LogPrintf(\"Kernel sanity check failed: %s\\n\", ErrorString(res).original);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28228#discussion_r1290848071",
      "id" : 1290848071,
      "line" : 32,
      "node_id" : "PRRC_kwDOABII585M8MdH",
      "original_commit_id" : "fb248a88d41d6f001cf05a5fe3fc008ce7b3d599",
      "original_line" : 32,
      "original_position" : 31,
      "original_start_line" : null,
      "path" : "src/kernel/context.cpp",
      "position" : 31,
      "pull_request_review_id" : 1572867097,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28228",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1290848071/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-08-11T02:59:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1290848071",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5377650?v=4",
         "events_url" : "https://api.github.com/users/furszy/events{/privacy}",
         "followers_url" : "https://api.github.com/users/furszy/followers",
         "following_url" : "https://api.github.com/users/furszy/following{/other_user}",
         "gists_url" : "https://api.github.com/users/furszy/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/furszy",
         "id" : 5377650,
         "login" : "furszy",
         "node_id" : "MDQ6VXNlcjUzNzc2NTA=",
         "organizations_url" : "https://api.github.com/users/furszy/orgs",
         "received_events_url" : "https://api.github.com/users/furszy/received_events",
         "repos_url" : "https://api.github.com/users/furszy/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/furszy/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/furszy/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/furszy"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28228#discussion_r1290849311"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28228"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1290849311"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Didn't know that this was possible, pretty nice.",
      "commit_id" : "cfe93642b27cbd4770200b9a6e571e1388ba35dc",
      "created_at" : "2023-08-11T02:57:25Z",
      "diff_hunk" : "@@ -5,25 +5,35 @@\n #include <kernel/context.h>\n \n #include <crypto/sha256.h>\n+#include <kernel/checks.h>\n #include <key.h>\n #include <logging.h>\n #include <pubkey.h>\n #include <random.h>\n+#include <util/result.h>\n+#include <util/time.h>\n \n #include <string>\n \n-\n namespace kernel {\n Context* g_context;\n \n-Context::Context()\n+util::Result<std::unique_ptr<Context>> Context::MakeContext()\n {\n     assert(!g_context);\n-    g_context = this;\n+    auto context{std::unique_ptr<Context>(new Context())};\n+    g_context = context.get();\n     std::string sha256_algo = SHA256AutoDetect();\n     LogPrintf(\"Using the '%s' SHA256 implementation\\n\", sha256_algo);\n     RandomInit();\n     ECC_Start();\n+\n+    if (auto res{SanityChecks(*context)}; !res) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28228#discussion_r1290849311",
      "id" : 1290849311,
      "line" : 31,
      "node_id" : "PRRC_kwDOABII585M8Mwf",
      "original_commit_id" : "fb248a88d41d6f001cf05a5fe3fc008ce7b3d599",
      "original_line" : 31,
      "original_position" : 30,
      "original_start_line" : null,
      "path" : "src/kernel/context.cpp",
      "position" : 30,
      "pull_request_review_id" : 1572867097,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28228",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1290849311/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-08-11T02:59:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1290849311",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5377650?v=4",
         "events_url" : "https://api.github.com/users/furszy/events{/privacy}",
         "followers_url" : "https://api.github.com/users/furszy/followers",
         "following_url" : "https://api.github.com/users/furszy/following{/other_user}",
         "gists_url" : "https://api.github.com/users/furszy/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/furszy",
         "id" : 5377650,
         "login" : "furszy",
         "node_id" : "MDQ6VXNlcjUzNzc2NTA=",
         "organizations_url" : "https://api.github.com/users/furszy/orgs",
         "received_events_url" : "https://api.github.com/users/furszy/received_events",
         "repos_url" : "https://api.github.com/users/furszy/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/furszy/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/furszy/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/furszy"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28228#discussion_r1291005941"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28228"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1291005941"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Yeah, I'll remove this line.",
      "commit_id" : "cfe93642b27cbd4770200b9a6e571e1388ba35dc",
      "created_at" : "2023-08-11T07:43:45Z",
      "diff_hunk" : "@@ -5,25 +5,35 @@\n #include <kernel/context.h>\n \n #include <crypto/sha256.h>\n+#include <kernel/checks.h>\n #include <key.h>\n #include <logging.h>\n #include <pubkey.h>\n #include <random.h>\n+#include <util/result.h>\n+#include <util/time.h>\n \n #include <string>\n \n-\n namespace kernel {\n Context* g_context;\n \n-Context::Context()\n+util::Result<std::unique_ptr<Context>> Context::MakeContext()\n {\n     assert(!g_context);\n-    g_context = this;\n+    auto context{std::unique_ptr<Context>(new Context())};\n+    g_context = context.get();\n     std::string sha256_algo = SHA256AutoDetect();\n     LogPrintf(\"Using the '%s' SHA256 implementation\\n\", sha256_algo);\n     RandomInit();\n     ECC_Start();\n+\n+    if (auto res{SanityChecks(*context)}; !res) {\n+        LogPrintf(\"Kernel sanity check failed: %s\\n\", ErrorString(res).original);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28228#discussion_r1291005941",
      "id" : 1291005941,
      "in_reply_to_id" : 1290848071,
      "line" : 32,
      "node_id" : "PRRC_kwDOABII585M8y_1",
      "original_commit_id" : "fb248a88d41d6f001cf05a5fe3fc008ce7b3d599",
      "original_line" : 32,
      "original_position" : 31,
      "original_start_line" : null,
      "path" : "src/kernel/context.cpp",
      "position" : 31,
      "pull_request_review_id" : 1573159976,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28228",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1291005941/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-08-11T07:43:45Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1291005941",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8421793?v=4",
         "events_url" : "https://api.github.com/users/TheCharlatan/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheCharlatan/followers",
         "following_url" : "https://api.github.com/users/TheCharlatan/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheCharlatan/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheCharlatan",
         "id" : 8421793,
         "login" : "TheCharlatan",
         "node_id" : "MDQ6VXNlcjg0MjE3OTM=",
         "organizations_url" : "https://api.github.com/users/TheCharlatan/orgs",
         "received_events_url" : "https://api.github.com/users/TheCharlatan/received_events",
         "repos_url" : "https://api.github.com/users/TheCharlatan/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheCharlatan/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheCharlatan/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheCharlatan"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Thank you for the review @furszy\r\n\r\nUpdated cfe93642b27cbd4770200b9a6e571e1388ba35dc -> 3c1c434ae0f1e9649949a1bb27ea14c1dbad06cc ([contextSanityChecks_0](https://github.com/TheCharlatan/bitcoin/tree/contextSanityChecks_0) -> [contextSanityChecks_1](https://github.com/TheCharlatan/bitcoin/tree/contextSanityChecks_1),  [compare](https://github.com/TheCharlatan/bitcoin/compare/contextSanityChecks_0..contextSanityChecks_1))\r\n\r\n* Addressed @furszy's [comment](https://github.com/bitcoin/bitcoin/pull/28228#discussion_r1290782048), cleaned up includes of `context.cpp/.h`.\r\n* Addressed @furszy's [comment](https://github.com/bitcoin/bitcoin/pull/28228#discussion_r1290847697), squashed the two log messages into one message. Also made sure that both the daemon and gui are still logging the same message.\r\n* Addressed @furszy's [comment](https://github.com/bitcoin/bitcoin/pull/28228#discussion_r1290848071), removed failure log statement in `MakeContext`.\r\n\r\n\r\n",
      "created_at" : "2023-08-11T09:32:12Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28228#issuecomment-1674459315",
      "id" : 1674459315,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28228",
      "node_id" : "IC_kwDOABII585jzjiz",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1674459315/reactions"
      },
      "updated_at" : "2023-08-11T09:32:12Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1674459315",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8421793?v=4",
         "events_url" : "https://api.github.com/users/TheCharlatan/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheCharlatan/followers",
         "following_url" : "https://api.github.com/users/TheCharlatan/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheCharlatan/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheCharlatan",
         "id" : 8421793,
         "login" : "TheCharlatan",
         "node_id" : "MDQ6VXNlcjg0MjE3OTM=",
         "organizations_url" : "https://api.github.com/users/TheCharlatan/orgs",
         "received_events_url" : "https://api.github.com/users/TheCharlatan/received_events",
         "repos_url" : "https://api.github.com/users/TheCharlatan/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheCharlatan/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheCharlatan/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheCharlatan"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Assuming I'm understanding the init order bug, please correct me if I'm not...\r\nIf `AppInitBasicSetup()` and  `AppInitBasicSetup()` and `AppInitParameterInteraction()` are relying on globals created by the kernel, perhaps it makes sense for them to require a kernel to be passed in, even if it's unused inside those functions for now?\r\n- It would document/force the correct creation order\r\n- Presumably when de-globalizing, these functions will need the kernel anyway.",
      "created_at" : "2023-08-11T13:48:58Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28228#issuecomment-1674826021",
      "id" : 1674826021,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28228",
      "node_id" : "IC_kwDOABII585j09El",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1674826021/reactions"
      },
      "updated_at" : "2023-08-11T13:53:26Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1674826021",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/417043?v=4",
         "events_url" : "https://api.github.com/users/theuni/events{/privacy}",
         "followers_url" : "https://api.github.com/users/theuni/followers",
         "following_url" : "https://api.github.com/users/theuni/following{/other_user}",
         "gists_url" : "https://api.github.com/users/theuni/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/theuni",
         "id" : 417043,
         "login" : "theuni",
         "node_id" : "MDQ6VXNlcjQxNzA0Mw==",
         "organizations_url" : "https://api.github.com/users/theuni/orgs",
         "received_events_url" : "https://api.github.com/users/theuni/received_events",
         "repos_url" : "https://api.github.com/users/theuni/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/theuni/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/theuni/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/theuni"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Re https://github.com/bitcoin/bitcoin/pull/28228#issuecomment-1674826021\r\n\r\n> Presumably when de-globalizing, these functions will need the kernel anyway.\r\n\r\nI am not sure how we could go about registering our signal handlers without the shutdown global.\r\n\r\n> It would document/force the correct creation order\r\n\r\nI originally wanted to to introduce this in a separate PR (fixing the order for gui initialization), but I think it makes more sense here, yes. ",
      "created_at" : "2023-08-11T15:54:41Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28228#issuecomment-1675009460",
      "id" : 1675009460,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28228",
      "node_id" : "IC_kwDOABII585j1p20",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1675009460/reactions"
      },
      "updated_at" : "2023-08-11T15:54:41Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1675009460",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8421793?v=4",
         "events_url" : "https://api.github.com/users/TheCharlatan/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheCharlatan/followers",
         "following_url" : "https://api.github.com/users/TheCharlatan/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheCharlatan/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheCharlatan",
         "id" : 8421793,
         "login" : "TheCharlatan",
         "node_id" : "MDQ6VXNlcjg0MjE3OTM=",
         "organizations_url" : "https://api.github.com/users/TheCharlatan/orgs",
         "received_events_url" : "https://api.github.com/users/TheCharlatan/received_events",
         "repos_url" : "https://api.github.com/users/TheCharlatan/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheCharlatan/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheCharlatan/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheCharlatan"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Thank you for the comments @theuni \r\n\r\nUpdated 3c1c434ae0f1e9649949a1bb27ea14c1dbad06cc -> 8275733e192baf81916bf8e218f5ddb24c5ddb74 ([contextSanityChecks_1](https://github.com/TheCharlatan/bitcoin/tree/contextSanityChecks_1) -> [contextSanityChecks_2](https://github.com/TheCharlatan/bitcoin/tree/contextSanityChecks_2),  [compare](https://github.com/TheCharlatan/bitcoin/compare/contextSanityChecks_1..contextSanityChecks_2))\r\n\r\n* Added check and precondition docs for the global kernel context.\r\n* Fixed initialization order for bitcoin-qt in `baseInitialize`\r\n\r\n\r\n",
      "created_at" : "2023-08-12T08:53:37Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28228#issuecomment-1675799551",
      "id" : 1675799551,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28228",
      "node_id" : "IC_kwDOABII585j4qv_",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1675799551/reactions"
      },
      "updated_at" : "2023-08-12T09:01:09Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1675799551",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8421793?v=4",
         "events_url" : "https://api.github.com/users/TheCharlatan/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheCharlatan/followers",
         "following_url" : "https://api.github.com/users/TheCharlatan/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheCharlatan/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheCharlatan",
         "id" : 8421793,
         "login" : "TheCharlatan",
         "node_id" : "MDQ6VXNlcjg0MjE3OTM=",
         "organizations_url" : "https://api.github.com/users/TheCharlatan/orgs",
         "received_events_url" : "https://api.github.com/users/TheCharlatan/received_events",
         "repos_url" : "https://api.github.com/users/TheCharlatan/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheCharlatan/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheCharlatan/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheCharlatan"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28228#discussion_r1315139898"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28228"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1315139898"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "nit: missing `#include <memory>`",
      "commit_id" : "8275733e192baf81916bf8e218f5ddb24c5ddb74",
      "created_at" : "2023-09-04T17:43:48Z",
      "diff_hunk" : "@@ -5,25 +5,34 @@\n #include <kernel/context.h>\n \n #include <crypto/sha256.h>\n+#include <kernel/checks.h>\n #include <key.h>\n #include <logging.h>\n-#include <pubkey.h>\n #include <random.h>\n+#include <util/result.h>\n \n+#include <cassert>\n #include <string>\n-\n+#include <utility>\n \n namespace kernel {\n Context* g_context;\n \n-Context::Context()\n+util::Result<std::unique_ptr<Context>> Context::MakeContext()",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28228#discussion_r1315139898",
      "id" : 1315139898,
      "line" : 21,
      "node_id" : "PRRC_kwDOABII585OY3E6",
      "original_commit_id" : "8275733e192baf81916bf8e218f5ddb24c5ddb74",
      "original_line" : 21,
      "original_position" : 20,
      "original_start_line" : null,
      "path" : "src/kernel/context.cpp",
      "position" : 20,
      "pull_request_review_id" : 1609859440,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28228",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1315139898/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-09-04T18:30:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1315139898",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/69010457?v=4",
         "events_url" : "https://api.github.com/users/stickies-v/events{/privacy}",
         "followers_url" : "https://api.github.com/users/stickies-v/followers",
         "following_url" : "https://api.github.com/users/stickies-v/following{/other_user}",
         "gists_url" : "https://api.github.com/users/stickies-v/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/stickies-v",
         "id" : 69010457,
         "login" : "stickies-v",
         "node_id" : "MDQ6VXNlcjY5MDEwNDU3",
         "organizations_url" : "https://api.github.com/users/stickies-v/orgs",
         "received_events_url" : "https://api.github.com/users/stickies-v/received_events",
         "repos_url" : "https://api.github.com/users/stickies-v/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/stickies-v/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/stickies-v/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/stickies-v"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28228#discussion_r1315140285"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28228"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1315140285"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Since we're now returning a `Result`, how about replacing this assertion with returning an `Error`?",
      "commit_id" : "8275733e192baf81916bf8e218f5ddb24c5ddb74",
      "created_at" : "2023-09-04T17:45:02Z",
      "diff_hunk" : "@@ -5,25 +5,34 @@\n #include <kernel/context.h>\n \n #include <crypto/sha256.h>\n+#include <kernel/checks.h>\n #include <key.h>\n #include <logging.h>\n-#include <pubkey.h>\n #include <random.h>\n+#include <util/result.h>\n \n+#include <cassert>\n #include <string>\n-\n+#include <utility>\n \n namespace kernel {\n Context* g_context;\n \n-Context::Context()\n+util::Result<std::unique_ptr<Context>> Context::MakeContext()\n {\n     assert(!g_context);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28228#discussion_r1315140285",
      "id" : 1315140285,
      "line" : 23,
      "node_id" : "PRRC_kwDOABII585OY3K9",
      "original_commit_id" : "8275733e192baf81916bf8e218f5ddb24c5ddb74",
      "original_line" : 23,
      "original_position" : 22,
      "original_start_line" : null,
      "path" : "src/kernel/context.cpp",
      "position" : 22,
      "pull_request_review_id" : 1609859440,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28228",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1315140285/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-09-04T18:30:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1315140285",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/69010457?v=4",
         "events_url" : "https://api.github.com/users/stickies-v/events{/privacy}",
         "followers_url" : "https://api.github.com/users/stickies-v/followers",
         "following_url" : "https://api.github.com/users/stickies-v/following{/other_user}",
         "gists_url" : "https://api.github.com/users/stickies-v/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/stickies-v",
         "id" : 69010457,
         "login" : "stickies-v",
         "node_id" : "MDQ6VXNlcjY5MDEwNDU3",
         "organizations_url" : "https://api.github.com/users/stickies-v/orgs",
         "received_events_url" : "https://api.github.com/users/stickies-v/received_events",
         "repos_url" : "https://api.github.com/users/stickies-v/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/stickies-v/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/stickies-v/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/stickies-v"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28228#discussion_r1315145534"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28228"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1315145534"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Could implement a `NodeContext::make_kernel()` method to avoid this duplication between here and `bitcoind.cpp`?",
      "commit_id" : "8275733e192baf81916bf8e218f5ddb24c5ddb74",
      "created_at" : "2023-09-04T18:01:31Z",
      "diff_hunk" : "@@ -93,11 +93,17 @@ class NodeImpl : public Node\n     uint32_t getLogCategories() override { return LogInstance().GetCategoryMask(); }\n     bool baseInitialize() override\n     {\n+        auto res{kernel::Context::MakeContext()};\n+        if (!res) {\n+            return InitError(strprintf(_(\"Initialization kernel sanity check failed: %s. %s is shutting down.\"),\n+                                       util::ErrorString(res), PACKAGE_NAME));\n+        }\n+        m_context->kernel = std::move(res.value());\n+",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28228#discussion_r1315145534",
      "id" : 1315145534,
      "line" : 102,
      "node_id" : "PRRC_kwDOABII585OY4c-",
      "original_commit_id" : "8275733e192baf81916bf8e218f5ddb24c5ddb74",
      "original_line" : 102,
      "original_position" : 10,
      "original_start_line" : 96,
      "path" : "src/node/interfaces.cpp",
      "position" : 10,
      "pull_request_review_id" : 1609859440,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28228",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1315145534/reactions"
      },
      "side" : "RIGHT",
      "start_line" : 96,
      "start_side" : "RIGHT",
      "subject_type" : "line",
      "updated_at" : "2023-09-04T18:30:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1315145534",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/69010457?v=4",
         "events_url" : "https://api.github.com/users/stickies-v/events{/privacy}",
         "followers_url" : "https://api.github.com/users/stickies-v/followers",
         "following_url" : "https://api.github.com/users/stickies-v/following{/other_user}",
         "gists_url" : "https://api.github.com/users/stickies-v/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/stickies-v",
         "id" : 69010457,
         "login" : "stickies-v",
         "node_id" : "MDQ6VXNlcjY5MDEwNDU3",
         "organizations_url" : "https://api.github.com/users/stickies-v/orgs",
         "received_events_url" : "https://api.github.com/users/stickies-v/received_events",
         "repos_url" : "https://api.github.com/users/stickies-v/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/stickies-v/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/stickies-v/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/stickies-v"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28228#discussion_r1315428857"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28228"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1315428857"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "It's already in the header.",
      "commit_id" : "8275733e192baf81916bf8e218f5ddb24c5ddb74",
      "created_at" : "2023-09-05T06:32:07Z",
      "diff_hunk" : "@@ -5,25 +5,34 @@\n #include <kernel/context.h>\n \n #include <crypto/sha256.h>\n+#include <kernel/checks.h>\n #include <key.h>\n #include <logging.h>\n-#include <pubkey.h>\n #include <random.h>\n+#include <util/result.h>\n \n+#include <cassert>\n #include <string>\n-\n+#include <utility>\n \n namespace kernel {\n Context* g_context;\n \n-Context::Context()\n+util::Result<std::unique_ptr<Context>> Context::MakeContext()",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28228#discussion_r1315428857",
      "id" : 1315428857,
      "in_reply_to_id" : 1315139898,
      "line" : 21,
      "node_id" : "PRRC_kwDOABII585OZ9n5",
      "original_commit_id" : "8275733e192baf81916bf8e218f5ddb24c5ddb74",
      "original_line" : 21,
      "original_position" : 20,
      "original_start_line" : null,
      "path" : "src/kernel/context.cpp",
      "position" : 20,
      "pull_request_review_id" : 1610305121,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28228",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1315428857/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-09-05T06:32:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1315428857",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8421793?v=4",
         "events_url" : "https://api.github.com/users/TheCharlatan/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheCharlatan/followers",
         "following_url" : "https://api.github.com/users/TheCharlatan/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheCharlatan/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheCharlatan",
         "id" : 8421793,
         "login" : "TheCharlatan",
         "node_id" : "MDQ6VXNlcjg0MjE3OTM=",
         "organizations_url" : "https://api.github.com/users/TheCharlatan/orgs",
         "received_events_url" : "https://api.github.com/users/TheCharlatan/received_events",
         "repos_url" : "https://api.github.com/users/TheCharlatan/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheCharlatan/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheCharlatan/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheCharlatan"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28228#discussion_r1315434762"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28228"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1315434762"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "The global context is removed in #28051, so not sure this is worth it.",
      "commit_id" : "8275733e192baf81916bf8e218f5ddb24c5ddb74",
      "created_at" : "2023-09-05T06:38:43Z",
      "diff_hunk" : "@@ -5,25 +5,34 @@\n #include <kernel/context.h>\n \n #include <crypto/sha256.h>\n+#include <kernel/checks.h>\n #include <key.h>\n #include <logging.h>\n-#include <pubkey.h>\n #include <random.h>\n+#include <util/result.h>\n \n+#include <cassert>\n #include <string>\n-\n+#include <utility>\n \n namespace kernel {\n Context* g_context;\n \n-Context::Context()\n+util::Result<std::unique_ptr<Context>> Context::MakeContext()\n {\n     assert(!g_context);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28228#discussion_r1315434762",
      "id" : 1315434762,
      "in_reply_to_id" : 1315140285,
      "line" : 23,
      "node_id" : "PRRC_kwDOABII585OZ_EK",
      "original_commit_id" : "8275733e192baf81916bf8e218f5ddb24c5ddb74",
      "original_line" : 23,
      "original_position" : 22,
      "original_start_line" : null,
      "path" : "src/kernel/context.cpp",
      "position" : 22,
      "pull_request_review_id" : 1610314441,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28228",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1315434762/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-09-05T06:38:44Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1315434762",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8421793?v=4",
         "events_url" : "https://api.github.com/users/TheCharlatan/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheCharlatan/followers",
         "following_url" : "https://api.github.com/users/TheCharlatan/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheCharlatan/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheCharlatan",
         "id" : 8421793,
         "login" : "TheCharlatan",
         "node_id" : "MDQ6VXNlcjg0MjE3OTM=",
         "organizations_url" : "https://api.github.com/users/TheCharlatan/orgs",
         "received_events_url" : "https://api.github.com/users/TheCharlatan/received_events",
         "repos_url" : "https://api.github.com/users/TheCharlatan/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheCharlatan/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheCharlatan/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheCharlatan"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28228#discussion_r1315525599"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28228"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1315525599"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "[\"Every .cpp and .h file should #include every header file it directly uses\"](https://github.com/bitcoin/bitcoin/blob/master/doc/developer-notes.md#source-code-organization). It's a nit, so only if you have to force push?",
      "commit_id" : "8275733e192baf81916bf8e218f5ddb24c5ddb74",
      "created_at" : "2023-09-05T08:01:11Z",
      "diff_hunk" : "@@ -5,25 +5,34 @@\n #include <kernel/context.h>\n \n #include <crypto/sha256.h>\n+#include <kernel/checks.h>\n #include <key.h>\n #include <logging.h>\n-#include <pubkey.h>\n #include <random.h>\n+#include <util/result.h>\n \n+#include <cassert>\n #include <string>\n-\n+#include <utility>\n \n namespace kernel {\n Context* g_context;\n \n-Context::Context()\n+util::Result<std::unique_ptr<Context>> Context::MakeContext()",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28228#discussion_r1315525599",
      "id" : 1315525599,
      "in_reply_to_id" : 1315139898,
      "line" : 21,
      "node_id" : "PRRC_kwDOABII585OaVPf",
      "original_commit_id" : "8275733e192baf81916bf8e218f5ddb24c5ddb74",
      "original_line" : 21,
      "original_position" : 20,
      "original_start_line" : null,
      "path" : "src/kernel/context.cpp",
      "position" : 20,
      "pull_request_review_id" : 1610459844,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28228",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1315525599/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-09-05T08:01:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1315525599",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/69010457?v=4",
         "events_url" : "https://api.github.com/users/stickies-v/events{/privacy}",
         "followers_url" : "https://api.github.com/users/stickies-v/followers",
         "following_url" : "https://api.github.com/users/stickies-v/following{/other_user}",
         "gists_url" : "https://api.github.com/users/stickies-v/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/stickies-v",
         "id" : 69010457,
         "login" : "stickies-v",
         "node_id" : "MDQ6VXNlcjY5MDEwNDU3",
         "organizations_url" : "https://api.github.com/users/stickies-v/orgs",
         "received_events_url" : "https://api.github.com/users/stickies-v/received_events",
         "repos_url" : "https://api.github.com/users/stickies-v/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/stickies-v/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/stickies-v/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/stickies-v"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28228#discussion_r1315525945"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28228"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1315525945"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Ah, wasn't aware. Makes sense, resolved.",
      "commit_id" : "8275733e192baf81916bf8e218f5ddb24c5ddb74",
      "created_at" : "2023-09-05T08:01:26Z",
      "diff_hunk" : "@@ -5,25 +5,34 @@\n #include <kernel/context.h>\n \n #include <crypto/sha256.h>\n+#include <kernel/checks.h>\n #include <key.h>\n #include <logging.h>\n-#include <pubkey.h>\n #include <random.h>\n+#include <util/result.h>\n \n+#include <cassert>\n #include <string>\n-\n+#include <utility>\n \n namespace kernel {\n Context* g_context;\n \n-Context::Context()\n+util::Result<std::unique_ptr<Context>> Context::MakeContext()\n {\n     assert(!g_context);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28228#discussion_r1315525945",
      "id" : 1315525945,
      "in_reply_to_id" : 1315140285,
      "line" : 23,
      "node_id" : "PRRC_kwDOABII585OaVU5",
      "original_commit_id" : "8275733e192baf81916bf8e218f5ddb24c5ddb74",
      "original_line" : 23,
      "original_position" : 22,
      "original_start_line" : null,
      "path" : "src/kernel/context.cpp",
      "position" : 22,
      "pull_request_review_id" : 1610460343,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28228",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1315525945/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-09-05T08:01:26Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1315525945",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/69010457?v=4",
         "events_url" : "https://api.github.com/users/stickies-v/events{/privacy}",
         "followers_url" : "https://api.github.com/users/stickies-v/followers",
         "following_url" : "https://api.github.com/users/stickies-v/following{/other_user}",
         "gists_url" : "https://api.github.com/users/stickies-v/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/stickies-v",
         "id" : 69010457,
         "login" : "stickies-v",
         "node_id" : "MDQ6VXNlcjY5MDEwNDU3",
         "organizations_url" : "https://api.github.com/users/stickies-v/orgs",
         "received_events_url" : "https://api.github.com/users/stickies-v/received_events",
         "repos_url" : "https://api.github.com/users/stickies-v/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/stickies-v/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/stickies-v/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/stickies-v"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28228#discussion_r1315541534"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28228"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1315541534"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "I remember some prior comments that adding helper methods directly to the `NodeContext` struct is undesirable. Could add a `init.h` helper function instead that takes a `NodeContext` as an argument?",
      "commit_id" : "8275733e192baf81916bf8e218f5ddb24c5ddb74",
      "created_at" : "2023-09-05T08:14:45Z",
      "diff_hunk" : "@@ -93,11 +93,17 @@ class NodeImpl : public Node\n     uint32_t getLogCategories() override { return LogInstance().GetCategoryMask(); }\n     bool baseInitialize() override\n     {\n+        auto res{kernel::Context::MakeContext()};\n+        if (!res) {\n+            return InitError(strprintf(_(\"Initialization kernel sanity check failed: %s. %s is shutting down.\"),\n+                                       util::ErrorString(res), PACKAGE_NAME));\n+        }\n+        m_context->kernel = std::move(res.value());\n+",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28228#discussion_r1315541534",
      "id" : 1315541534,
      "in_reply_to_id" : 1315145534,
      "line" : 102,
      "node_id" : "PRRC_kwDOABII585OaZIe",
      "original_commit_id" : "8275733e192baf81916bf8e218f5ddb24c5ddb74",
      "original_line" : 102,
      "original_position" : 10,
      "original_start_line" : 96,
      "path" : "src/node/interfaces.cpp",
      "position" : 10,
      "pull_request_review_id" : 1610484366,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28228",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1315541534/reactions"
      },
      "side" : "RIGHT",
      "start_line" : 96,
      "start_side" : "RIGHT",
      "subject_type" : "line",
      "updated_at" : "2023-09-05T08:14:46Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1315541534",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8421793?v=4",
         "events_url" : "https://api.github.com/users/TheCharlatan/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheCharlatan/followers",
         "following_url" : "https://api.github.com/users/TheCharlatan/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheCharlatan/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheCharlatan",
         "id" : 8421793,
         "login" : "TheCharlatan",
         "node_id" : "MDQ6VXNlcjg0MjE3OTM=",
         "organizations_url" : "https://api.github.com/users/TheCharlatan/orgs",
         "received_events_url" : "https://api.github.com/users/TheCharlatan/received_events",
         "repos_url" : "https://api.github.com/users/TheCharlatan/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheCharlatan/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheCharlatan/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheCharlatan"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Thank you for the comments @stickies-v \r\n\r\nRebased 8275733e192baf81916bf8e218f5ddb24c5ddb74 -> 14448df7241e449af454754ec412d2f6aadc874f ([contextSanityChecks_2](https://github.com/TheCharlatan/bitcoin/tree/contextSanityChecks_2) -> [contextSanityChecks_3](https://github.com/TheCharlatan/bitcoin/tree/contextSanityChecks_3),  [compare](https://github.com/TheCharlatan/bitcoin/compare/contextSanityChecks_2..contextSanityChecks_3))\r\n* Dropped the second commit in favor of #28051\r\n\r\nUpdated 14448df7241e449af454754ec412d2f6aadc874f -> d0daf3edf400f0400f827ac4a8e7ed7398826c1a ([contextSanityChecks_3](https://github.com/TheCharlatan/bitcoin/tree/contextSanityChecks_3) -> [contextSanityChecks_4](https://github.com/TheCharlatan/bitcoin/tree/contextSanityChecks_4),  [compare](https://github.com/TheCharlatan/bitcoin/compare/contextSanityChecks_3..contextSanityChecks_4))\r\n\r\n* Addressed @stickies-v's [comment](https://github.com/bitcoin/bitcoin/pull/28228#discussion_r1315145534), adding a helper function in `init.*` to create the kernel context.\r\n* Addressed @stickies-v's [comment](https://github.com/bitcoin/bitcoin/pull/28228#discussion_r1315139898), including missing header.",
      "created_at" : "2023-09-06T07:04:31Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28228#issuecomment-1707786083",
      "id" : 1707786083,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28228",
      "node_id" : "IC_kwDOABII585lyr9j",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1707786083/reactions"
      },
      "updated_at" : "2023-09-06T07:04:31Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1707786083",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8421793?v=4",
         "events_url" : "https://api.github.com/users/TheCharlatan/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheCharlatan/followers",
         "following_url" : "https://api.github.com/users/TheCharlatan/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheCharlatan/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheCharlatan",
         "id" : 8421793,
         "login" : "TheCharlatan",
         "node_id" : "MDQ6VXNlcjg0MjE3OTM=",
         "organizations_url" : "https://api.github.com/users/TheCharlatan/orgs",
         "received_events_url" : "https://api.github.com/users/TheCharlatan/received_events",
         "repos_url" : "https://api.github.com/users/TheCharlatan/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheCharlatan/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheCharlatan/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheCharlatan"
      }
   }
]
