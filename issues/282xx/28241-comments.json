[
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\nA summary of reviews will appear here.\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#27351](https://github.com/bitcoin/bitcoin/pull/27351) (wallet: add `seeds` argument to `importdescriptors` by apoelstra)\n* [#27260](https://github.com/bitcoin/bitcoin/pull/27260) (Enhanced error messages for invalid network prefix during address parsing. by russeree)\n* [#24539](https://github.com/bitcoin/bitcoin/pull/24539) (Add a \"tx output spender\" index by sstone)\n* [#10102](https://github.com/bitcoin/bitcoin/pull/10102) (Multiprocess bitcoin by ryanofsky)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.\n",
      "created_at" : "2023-08-09T09:13:58Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28241#issuecomment-1670962513",
      "id" : 1670962513,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28241",
      "node_id" : "IC_kwDOABII585jmN1R",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1670962513/reactions"
      },
      "updated_at" : "2023-09-20T16:54:05Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1670962513",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "I'd like to keep this based on #28122 but that requires some refactoring there. See https://github.com/bitcoin/bitcoin/pull/28122#issuecomment-1670943979.",
      "created_at" : "2023-08-09T09:15:51Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28241#issuecomment-1670965334",
      "id" : 1670965334,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28241",
      "node_id" : "IC_kwDOABII585jmOhW",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1670965334/reactions"
      },
      "updated_at" : "2023-08-09T09:15:51Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1670965334",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> I'd like to keep this based on #28122 but that requires some refactoring there. See [#28122 (comment)](https://github.com/bitcoin/bitcoin/pull/28122#issuecomment-1670943979).\r\n\r\nyou can also rebase on https://github.com/bitcoin/bitcoin/pull/27827 , which has everything, or just the receiving PR. Might be easier then to reason about which functions belong in which PRs if we can see it all together. I think the functions you need are introduced in the receiving PR (#28202)",
      "created_at" : "2023-08-09T09:39:12Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28241#issuecomment-1670999533",
      "id" : 1670999533,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28241",
      "node_id" : "IC_kwDOABII585jmW3t",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1670999533/reactions"
      },
      "updated_at" : "2023-08-09T09:39:12Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1670999533",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7444140?v=4",
         "events_url" : "https://api.github.com/users/josibake/events{/privacy}",
         "followers_url" : "https://api.github.com/users/josibake/followers",
         "following_url" : "https://api.github.com/users/josibake/following{/other_user}",
         "gists_url" : "https://api.github.com/users/josibake/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/josibake",
         "id" : 7444140,
         "login" : "josibake",
         "node_id" : "MDQ6VXNlcjc0NDQxNDA=",
         "organizations_url" : "https://api.github.com/users/josibake/orgs",
         "received_events_url" : "https://api.github.com/users/josibake/received_events",
         "repos_url" : "https://api.github.com/users/josibake/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/josibake/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/josibake/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/josibake"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "I'll take a stab at rebasing on the bigger thing. It makes sense to do that and then unrebase / debase(?) it later.",
      "created_at" : "2023-08-09T11:40:04Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28241#issuecomment-1671166932",
      "id" : 1671166932,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28241",
      "node_id" : "IC_kwDOABII585jm_vU",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1671166932/reactions"
      },
      "updated_at" : "2023-08-09T11:40:04Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1671166932",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "I ended up \"borrowing\" some code from the followup PRs, without having to rebase on them.\r\n\r\nThis code compiles and the index doesn't crash. That's about the extend of it though :-) For now.",
      "created_at" : "2023-08-09T14:57:33Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28241#issuecomment-1671573912",
      "id" : 1671573912,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28241",
      "node_id" : "IC_kwDOABII585jojGY",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1671573912/reactions"
      },
      "updated_at" : "2023-08-09T14:57:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1671573912",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "Hi, I have a little question about the motivation for making this index in Core. Afaiu, an implementation of electrum server (or any light client backend) could construct this index as easily, and I think it would be better separation of concerns to let them take responsibility for this instead of Core. Or maybe it's necessary for the consistency check you're mentioning? I'm not sure of what it is.",
      "created_at" : "2023-09-04T12:23:29Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28241#issuecomment-1705177519",
      "id" : 1705177519,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28241",
      "node_id" : "IC_kwDOABII585lovGv",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1705177519/reactions"
      },
      "updated_at" : "2023-09-04T12:23:48Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1705177519",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/11726747?v=4",
         "events_url" : "https://api.github.com/users/Sosthene00/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sosthene00/followers",
         "following_url" : "https://api.github.com/users/Sosthene00/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sosthene00/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sosthene00",
         "id" : 11726747,
         "login" : "Sosthene00",
         "node_id" : "MDQ6VXNlcjExNzI2NzQ3",
         "organizations_url" : "https://api.github.com/users/Sosthene00/orgs",
         "received_events_url" : "https://api.github.com/users/Sosthene00/received_events",
         "repos_url" : "https://api.github.com/users/Sosthene00/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sosthene00/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sosthene00/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sosthene00"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@Sosthene00 I find it useful to have this index for developing and reviewing the silent payment implementation. But as you say, it may not be worth merging eventually. I'm not sure about that yet.\r\n\r\nThere's also the possibility of building something like this on top of the Kernel, when that project is a bit further along.",
      "created_at" : "2023-09-04T14:39:54Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28241#issuecomment-1705381372",
      "id" : 1705381372,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28241",
      "node_id" : "IC_kwDOABII585lpg38",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1705381372/reactions"
      },
      "updated_at" : "2023-09-04T14:40:32Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1705381372",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->\nð This pull request conflicts with the target branch and [needs rebase](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#rebasing-changes).\n",
      "created_at" : "2023-09-07T16:04:21Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28241#issuecomment-1710417733",
      "id" : 1710417733,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28241",
      "node_id" : "IC_kwDOABII585l8udF",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1710417733/reactions"
      },
      "updated_at" : "2023-09-07T16:04:21Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1710417733",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Rebased to use `GetSilentPaymentsTweakDataFromTxInputs`. Otherwise still WIP.",
      "created_at" : "2023-09-19T14:49:43Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28241#issuecomment-1725798395",
      "id" : 1725798395,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28241",
      "node_id" : "IC_kwDOABII585m3Zf7",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1725798395/reactions"
      },
      "updated_at" : "2023-09-19T14:49:43Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1725798395",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Pushed a simple RPC method to get the tweaked public key for a given transaction. I'd like to sanity check it against some other implementation.\r\n\r\nSignet: [dacb55db5c506a34771bf8ac3664e2510c17e80ada81347300fb4223f2d6c545](https://mempool.space/signet/tx/dacb55db5c506a34771bf8ac3664e2510c17e80ada81347300fb4223f2d6c545)\r\n\r\n`getsilentpaymenttxdata` result: `03fc95cfeac43e9179c002d32a042626e5a2b289a8d7a4a0c88fbf81d570cef987`\r\n\r\n\r\n",
      "created_at" : "2023-09-19T16:20:50Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28241#issuecomment-1726028248",
      "id" : 1726028248,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28241",
      "node_id" : "IC_kwDOABII585m4RnY",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1726028248/reactions"
      },
      "updated_at" : "2023-09-19T16:20:50Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1726028248",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->\nð This pull request conflicts with the target branch and [needs rebase](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#rebasing-changes).\n",
      "created_at" : "2023-09-19T18:10:02Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28241#issuecomment-1726248570",
      "id" : 1726248570,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28241",
      "node_id" : "IC_kwDOABII585m5HZ6",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1726248570/reactions"
      },
      "updated_at" : "2023-09-19T18:10:02Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1726248570",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28241#discussion_r1331775156"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28241"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1331775156"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "I think this logic doesn't match the BIP, as it currently implements \"all outputs have to be taproot outputs\" rather than \"at least _one_ output has to be a taproot output\"? Could use `std::none_of` to achieve the latter (https://en.cppreference.com/w/cpp/algorithm/all_any_none_of).\r\n\r\nSomething like\r\n```\r\n    if (std::none_of(tx.vout.begin(), tx.vout.end(), [](const TxOut& txout) {\r\n            std::vector<std::vector<unsigned char>> solutions;\r\n            return Solver(vout.scriptPubKey, solutions) == TxoutType::WITNESS_V1_TAPROOT;\r\n        }) {\r\n        return false;\r\n    }\r\n```\r\n(untested)",
      "commit_id" : "8b63994eccf981e0d2cd907ed41b1633842d0a3f",
      "created_at" : "2023-09-20T15:03:39Z",
      "diff_hunk" : "@@ -0,0 +1,135 @@\n+#include <index/silentpaymentindex.h>\n+\n+#include <chainparams.h>\n+#include <coins.h>\n+#include <common/args.h>\n+#include <index/disktxpos.h>\n+#include <node/blockstorage.h>\n+#include <pubkey.h>\n+#include <primitives/transaction.h>\n+// TODO: move GetSilentPaymentsTweakDataFromTxInputs out of wallet?\n+#include <wallet/silentpayments.h>\n+#include <undo.h>\n+#include <validation.h>\n+\n+#include <dbwrapper.h>\n+#include <hash.h>\n+\n+constexpr uint8_t DB_SILENT_PAYMENT_INDEX{'s'};\n+\n+std::unique_ptr<SilentPaymentIndex> g_silent_payment_index;\n+\n+/** Access to the silent payment index database (indexes/silentpaymentindex/) */\n+class SilentPaymentIndex::DB : public BaseIndex::DB\n+{\n+public:\n+    explicit DB(size_t n_cache_size, bool f_memory = false, bool f_wipe = false);\n+\n+    bool WriteSilentPayments(const std::vector<std::pair<uint256, CPubKey>>& items);\n+};\n+\n+SilentPaymentIndex::DB::DB(size_t n_cache_size, bool f_memory, bool f_wipe) :\n+    BaseIndex::DB(gArgs.GetDataDirNet() / \"indexes\" / \"silentpaymentindex\", n_cache_size, f_memory, f_wipe)\n+{}\n+\n+bool SilentPaymentIndex::DB::WriteSilentPayments(const std::vector<std::pair<uint256, CPubKey>>& items)\n+{\n+    CDBBatch batch(*this);\n+    for (const auto& tuple : items) {\n+        batch.Write(std::make_pair(DB_SILENT_PAYMENT_INDEX, tuple.first), tuple.second);\n+    }\n+    return WriteBatch(batch);\n+}\n+\n+SilentPaymentIndex::SilentPaymentIndex(std::unique_ptr<interfaces::Chain> chain, size_t n_cache_size, bool f_memory, bool f_wipe)\n+    : BaseIndex(std::move(chain), \"silentpaymentindex\"), m_db(std::make_unique<SilentPaymentIndex::DB>(n_cache_size, f_memory, f_wipe))\n+{}\n+\n+SilentPaymentIndex::~SilentPaymentIndex() {}\n+\n+// TODO: it's more efficient to do this per block\n+bool SilentPaymentIndex::GetSilentPaymentKey(const CTransactionRef& tx, const CBlockIndex& blockindex, CPubKey& tweakedPubKeySum)\n+{\n+    if (tx->IsCoinBase()) {\n+        return false;\n+    }\n+\n+    for (auto& vout : tx->vout) {\n+        std::vector<std::vector<unsigned char>> solutions;\n+        TxoutType whichType = Solver(vout.scriptPubKey, solutions);\n+\n+        if (whichType != TxoutType::WITNESS_V1_TAPROOT) {\n+            return false;\n+        }\n+    }",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28241#discussion_r1331775156",
      "id" : 1331775156,
      "line" : 64,
      "node_id" : "PRRC_kwDOABII585PYUa0",
      "original_commit_id" : "0235ff2891ec9573d2bdc67d0a08ba47040fd173",
      "original_line" : 64,
      "original_position" : 64,
      "original_start_line" : 57,
      "path" : "src/index/silentpaymentindex.cpp",
      "position" : 64,
      "pull_request_review_id" : 1635872510,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28241",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1331775156/reactions"
      },
      "side" : "RIGHT",
      "start_line" : 57,
      "start_side" : "RIGHT",
      "subject_type" : "line",
      "updated_at" : "2023-09-20T15:03:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1331775156",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/91535?v=4",
         "events_url" : "https://api.github.com/users/theStack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/theStack/followers",
         "following_url" : "https://api.github.com/users/theStack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/theStack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/theStack",
         "id" : 91535,
         "login" : "theStack",
         "node_id" : "MDQ6VXNlcjkxNTM1",
         "organizations_url" : "https://api.github.com/users/theStack/orgs",
         "received_events_url" : "https://api.github.com/users/theStack/received_events",
         "repos_url" : "https://api.github.com/users/theStack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/theStack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/theStack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/theStack"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@fjahr since you've been working on indexes, do you have any feedback on indexer best practices I should follow? ",
      "created_at" : "2023-09-20T16:13:16Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28241#issuecomment-1728050950",
      "id" : 1728050950,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28241",
      "node_id" : "IC_kwDOABII585m__cG",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1728050950/reactions"
      },
      "updated_at" : "2023-09-20T16:13:16Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1728050950",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "The index (as generated by 46b32b63d57a62466a2b2181e28bab477dc8de95) is 54GB on mainnet and took about 2 hours to generate (of which much time was wasted looping through pre-taproot blocks). Something like #26966 could make it even faster.\r\n\r\nI'd like to compare the results in this mainnet index to another implementation, if someone can point me to one.",
      "created_at" : "2023-09-21T09:42:57Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28241#issuecomment-1729224452",
      "id" : 1729224452,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28241",
      "node_id" : "IC_kwDOABII585nEd8E",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1729224452/reactions"
      },
      "updated_at" : "2023-09-21T09:43:49Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1729224452",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@setavenger you mentioned using a light client in the tracking issue. Does that have an index or some other way to compare to this PR?",
      "created_at" : "2023-09-28T08:34:23Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28241#issuecomment-1738712806",
      "id" : 1738712806,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28241",
      "node_id" : "IC_kwDOABII585noqbm",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1738712806/reactions"
      },
      "updated_at" : "2023-09-28T08:34:23Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1738712806",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "> @setavenger you mentioned using a light client in the tracking issue. Does that have an index or some other way to compare to this PR?\r\n\r\nHmm I don't think it matches exactly what you are doing here. My backend was built as a \"light client\" itself and with the assumption that it would only index forward looking from a certain activation point. It does create an index but it's not running a full node which means there's a lot of networking happening to services that offer prevout information per transacton. I would be surprised if it would take less than two hours to index the entire chain. Plus I would probably get rate limited before even being able to index the entire chain.\r\n\r\nThat being said I was thinking of upgrading my backend to using a fullnode I could give an update then.",
      "created_at" : "2023-09-28T11:15:02Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28241#issuecomment-1738949322",
      "id" : 1738949322,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28241",
      "node_id" : "IC_kwDOABII585npkLK",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1738949322/reactions"
      },
      "updated_at" : "2023-09-28T11:15:02Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1738949322",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/34041358?v=4",
         "events_url" : "https://api.github.com/users/setavenger/events{/privacy}",
         "followers_url" : "https://api.github.com/users/setavenger/followers",
         "following_url" : "https://api.github.com/users/setavenger/following{/other_user}",
         "gists_url" : "https://api.github.com/users/setavenger/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/setavenger",
         "id" : 34041358,
         "login" : "setavenger",
         "node_id" : "MDQ6VXNlcjM0MDQxMzU4",
         "organizations_url" : "https://api.github.com/users/setavenger/orgs",
         "received_events_url" : "https://api.github.com/users/setavenger/received_events",
         "repos_url" : "https://api.github.com/users/setavenger/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/setavenger/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/setavenger/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/setavenger"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "I see. Even a few spot checks against what this index produces would be useful though.",
      "created_at" : "2023-09-28T13:33:28Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28241#issuecomment-1739195463",
      "id" : 1739195463,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28241",
      "node_id" : "IC_kwDOABII585nqgRH",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1739195463/reactions"
      },
      "updated_at" : "2023-09-28T13:33:28Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1739195463",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "Yeah, we could do that perhaps for selected blocks. I just have to get the handling of P2PKH inputs in order, then I should be able to index any block from the chain.",
      "created_at" : "2023-09-28T15:15:37Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28241#issuecomment-1739502295",
      "id" : 1739502295,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28241",
      "node_id" : "IC_kwDOABII585nrrLX",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1739502295/reactions"
      },
      "updated_at" : "2023-09-28T15:15:37Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1739502295",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/34041358?v=4",
         "events_url" : "https://api.github.com/users/setavenger/events{/privacy}",
         "followers_url" : "https://api.github.com/users/setavenger/followers",
         "following_url" : "https://api.github.com/users/setavenger/following{/other_user}",
         "gists_url" : "https://api.github.com/users/setavenger/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/setavenger",
         "id" : 34041358,
         "login" : "setavenger",
         "node_id" : "MDQ6VXNlcjM0MDQxMzU4",
         "organizations_url" : "https://api.github.com/users/setavenger/orgs",
         "received_events_url" : "https://api.github.com/users/setavenger/received_events",
         "repos_url" : "https://api.github.com/users/setavenger/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/setavenger/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/setavenger/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/setavenger"
      }
   }
]
