[
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| Concept ACK | [TheCharlatan](https://github.com/bitcoin/bitcoin/pull/28253#issuecomment-1674461756), [MarcoFalke](https://github.com/bitcoin/bitcoin/pull/28253#pullrequestreview-1591801776), [hebasto](https://github.com/bitcoin/bitcoin/pull/28253#issuecomment-1746929297), [theStack](https://github.com/bitcoin/bitcoin/pull/28253#issuecomment-1747744789) |\n\nIf your review is incorrectly listed, please react with ð to this comment and the bot will ignore it on the next update.\n",
      "created_at" : "2023-08-10T21:57:06Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28253#issuecomment-1673970765",
      "id" : 1673970765,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28253",
      "node_id" : "IC_kwDOABII585jxsRN",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 1,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 1,
         "total_count" : 2,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1673970765/reactions"
      },
      "updated_at" : "2023-10-04T22:39:50Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1673970765",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Concept ACK",
      "created_at" : "2023-08-11T09:34:23Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28253#issuecomment-1674461756",
      "id" : 1674461756,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28253",
      "node_id" : "IC_kwDOABII585jzkI8",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1674461756/reactions"
      },
      "updated_at" : "2023-08-11T09:34:23Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1674461756",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8421793?v=4",
         "events_url" : "https://api.github.com/users/TheCharlatan/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheCharlatan/followers",
         "following_url" : "https://api.github.com/users/TheCharlatan/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheCharlatan/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheCharlatan",
         "id" : 8421793,
         "login" : "TheCharlatan",
         "node_id" : "MDQ6VXNlcjg0MjE3OTM=",
         "organizations_url" : "https://api.github.com/users/TheCharlatan/orgs",
         "received_events_url" : "https://api.github.com/users/TheCharlatan/received_events",
         "repos_url" : "https://api.github.com/users/TheCharlatan/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheCharlatan/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheCharlatan/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheCharlatan"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "The CI uses the combine logs helper. Can you link to a CI output before and after?",
      "created_at" : "2023-08-14T15:55:21Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28253#issuecomment-1677604972",
      "id" : 1677604972,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28253",
      "node_id" : "IC_kwDOABII585j_jhs",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 1,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 1,
         "total_count" : 2,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1677604972/reactions"
      },
      "updated_at" : "2023-08-14T15:55:21Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1677604972",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> The CI uses the combine logs helper. Can you link to a CI output before and after?\r\n\r\nSure.\r\n\r\nBefore https://github.com/furszy/bitcoin-core/runs/15887889073. No information provided.\r\nAfter https://github.com/furszy/bitcoin-core/runs/15886179713. The abrupt shutdown reason is printed.\r\n\r\nThe commit causing the abrupt shutdown is the one shared in the PR description.",
      "created_at" : "2023-08-14T20:39:34Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28253#issuecomment-1678026846",
      "id" : 1678026846,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28253",
      "node_id" : "IC_kwDOABII585kBKhe",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 1,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1678026846/reactions"
      },
      "updated_at" : "2023-08-15T02:01:26Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1678026846",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5377650?v=4",
         "events_url" : "https://api.github.com/users/furszy/events{/privacy}",
         "followers_url" : "https://api.github.com/users/furszy/followers",
         "following_url" : "https://api.github.com/users/furszy/following{/other_user}",
         "gists_url" : "https://api.github.com/users/furszy/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/furszy",
         "id" : 5377650,
         "login" : "furszy",
         "node_id" : "MDQ6VXNlcjUzNzc2NTA=",
         "organizations_url" : "https://api.github.com/users/furszy/orgs",
         "received_events_url" : "https://api.github.com/users/furszy/received_events",
         "repos_url" : "https://api.github.com/users/furszy/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/furszy/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/furszy/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/furszy"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28253#discussion_r1294258580"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28253"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1294258580"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Why not append your message to this message?",
      "commit_id" : "2f19be69109ddc0baed8c9d2db0c8de791b5f6ad",
      "created_at" : "2023-08-15T07:01:51Z",
      "diff_hunk" : "@@ -232,6 +232,15 @@ def wait_for_rpc_connection(self):\n         poll_per_s = 4\n         for _ in range(poll_per_s * self.rpc_timeout):\n             if self.process.poll() is not None:\n+                if self.process.returncode != 0:\n+                    # Print any abrupt shutdown error, so it is visible from the console and the\n+                    # user doesn't have to go node by node checking which one failed.\n+                    with open(self.stderr.name, 'r', encoding='utf-8') as err_file:\n+                        print(\"************************\")\n+                        print(f\"'{self.datadir_path.name}' abruptly aborted with error:\\n\")\n+                        print(''.join(line for line in err_file if line.strip() and line[0] != \"*\"))\n+                        print(\"************************\")\n+\n                 raise FailedToStartError(self._node_msg(\n                     'bitcoind exited with status {} during initialization'.format(self.process.returncode)))",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28253#discussion_r1294258580",
      "id" : 1294258580,
      "line" : 245,
      "node_id" : "PRRC_kwDOABII585NJNGU",
      "original_commit_id" : "2f19be69109ddc0baed8c9d2db0c8de791b5f6ad",
      "original_line" : 245,
      "original_position" : 14,
      "original_start_line" : null,
      "path" : "test/functional/test_framework/test_node.py",
      "position" : 14,
      "pull_request_review_id" : 1578062646,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28253",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 1,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1294258580/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-08-15T07:03:06Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1294258580",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28253#discussion_r1294613398"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28253"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1294613398"
         }
      },
      "author_association" : "MEMBER",
      "body" : "The idea was to separate the stderr output from the exception being thrown here. Mainly to get a more readable print when a crash happens. The `FailedToStartError` exception message appears in-between two long stack traces.\r\n\r\nBut, either way is ok for me.",
      "commit_id" : "2f19be69109ddc0baed8c9d2db0c8de791b5f6ad",
      "created_at" : "2023-08-15T13:41:51Z",
      "diff_hunk" : "@@ -232,6 +232,15 @@ def wait_for_rpc_connection(self):\n         poll_per_s = 4\n         for _ in range(poll_per_s * self.rpc_timeout):\n             if self.process.poll() is not None:\n+                if self.process.returncode != 0:\n+                    # Print any abrupt shutdown error, so it is visible from the console and the\n+                    # user doesn't have to go node by node checking which one failed.\n+                    with open(self.stderr.name, 'r', encoding='utf-8') as err_file:\n+                        print(\"************************\")\n+                        print(f\"'{self.datadir_path.name}' abruptly aborted with error:\\n\")\n+                        print(''.join(line for line in err_file if line.strip() and line[0] != \"*\"))\n+                        print(\"************************\")\n+\n                 raise FailedToStartError(self._node_msg(\n                     'bitcoind exited with status {} during initialization'.format(self.process.returncode)))",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28253#discussion_r1294613398",
      "id" : 1294613398,
      "in_reply_to_id" : 1294258580,
      "line" : 245,
      "node_id" : "PRRC_kwDOABII585NKjuW",
      "original_commit_id" : "2f19be69109ddc0baed8c9d2db0c8de791b5f6ad",
      "original_line" : 245,
      "original_position" : 14,
      "original_start_line" : null,
      "path" : "test/functional/test_framework/test_node.py",
      "position" : 14,
      "pull_request_review_id" : 1578585402,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28253",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1294613398/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-08-15T13:42:43Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1294613398",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5377650?v=4",
         "events_url" : "https://api.github.com/users/furszy/events{/privacy}",
         "followers_url" : "https://api.github.com/users/furszy/followers",
         "following_url" : "https://api.github.com/users/furszy/following{/other_user}",
         "gists_url" : "https://api.github.com/users/furszy/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/furszy",
         "id" : 5377650,
         "login" : "furszy",
         "node_id" : "MDQ6VXNlcjUzNzc2NTA=",
         "organizations_url" : "https://api.github.com/users/furszy/orgs",
         "received_events_url" : "https://api.github.com/users/furszy/received_events",
         "repos_url" : "https://api.github.com/users/furszy/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/furszy/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/furszy/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/furszy"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28253#discussion_r1294617879"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28253"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1294617879"
         }
      },
      "author_association" : "MEMBER",
      "body" : "If you want to keep it, it would also be good to show an example output (CI and non-CI) when this is printed in a \"normal\" test (not create_cache)",
      "commit_id" : "2f19be69109ddc0baed8c9d2db0c8de791b5f6ad",
      "created_at" : "2023-08-15T13:45:18Z",
      "diff_hunk" : "@@ -232,6 +232,15 @@ def wait_for_rpc_connection(self):\n         poll_per_s = 4\n         for _ in range(poll_per_s * self.rpc_timeout):\n             if self.process.poll() is not None:\n+                if self.process.returncode != 0:\n+                    # Print any abrupt shutdown error, so it is visible from the console and the\n+                    # user doesn't have to go node by node checking which one failed.\n+                    with open(self.stderr.name, 'r', encoding='utf-8') as err_file:\n+                        print(\"************************\")\n+                        print(f\"'{self.datadir_path.name}' abruptly aborted with error:\\n\")\n+                        print(''.join(line for line in err_file if line.strip() and line[0] != \"*\"))\n+                        print(\"************************\")\n+\n                 raise FailedToStartError(self._node_msg(\n                     'bitcoind exited with status {} during initialization'.format(self.process.returncode)))",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28253#discussion_r1294617879",
      "id" : 1294617879,
      "in_reply_to_id" : 1294258580,
      "line" : 245,
      "node_id" : "PRRC_kwDOABII585NKk0X",
      "original_commit_id" : "2f19be69109ddc0baed8c9d2db0c8de791b5f6ad",
      "original_line" : 245,
      "original_position" : 14,
      "original_start_line" : null,
      "path" : "test/functional/test_framework/test_node.py",
      "position" : 14,
      "pull_request_review_id" : 1578592103,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28253",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1294617879/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-08-15T13:45:18Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1294617879",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28253#discussion_r1294638606"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28253"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1294638606"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Why might the output differ between CI and non-CI runs? The test framework redirect stderr to a file, and this file seems to remain untouched regardless of the execution environment.\r\n\r\nAlso, the `\"normal\" test (not create_cache)` tense isn't clear for me. Does it refer to running an individual test locally?",
      "commit_id" : "2f19be69109ddc0baed8c9d2db0c8de791b5f6ad",
      "created_at" : "2023-08-15T14:02:27Z",
      "diff_hunk" : "@@ -232,6 +232,15 @@ def wait_for_rpc_connection(self):\n         poll_per_s = 4\n         for _ in range(poll_per_s * self.rpc_timeout):\n             if self.process.poll() is not None:\n+                if self.process.returncode != 0:\n+                    # Print any abrupt shutdown error, so it is visible from the console and the\n+                    # user doesn't have to go node by node checking which one failed.\n+                    with open(self.stderr.name, 'r', encoding='utf-8') as err_file:\n+                        print(\"************************\")\n+                        print(f\"'{self.datadir_path.name}' abruptly aborted with error:\\n\")\n+                        print(''.join(line for line in err_file if line.strip() and line[0] != \"*\"))\n+                        print(\"************************\")\n+\n                 raise FailedToStartError(self._node_msg(\n                     'bitcoind exited with status {} during initialization'.format(self.process.returncode)))",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28253#discussion_r1294638606",
      "id" : 1294638606,
      "in_reply_to_id" : 1294258580,
      "line" : 245,
      "node_id" : "PRRC_kwDOABII585NKp4O",
      "original_commit_id" : "2f19be69109ddc0baed8c9d2db0c8de791b5f6ad",
      "original_line" : 245,
      "original_position" : 14,
      "original_start_line" : null,
      "path" : "test/functional/test_framework/test_node.py",
      "position" : 14,
      "pull_request_review_id" : 1578628427,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28253",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1294638606/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-08-15T14:13:24Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1294638606",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5377650?v=4",
         "events_url" : "https://api.github.com/users/furszy/events{/privacy}",
         "followers_url" : "https://api.github.com/users/furszy/followers",
         "following_url" : "https://api.github.com/users/furszy/following{/other_user}",
         "gists_url" : "https://api.github.com/users/furszy/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/furszy",
         "id" : 5377650,
         "login" : "furszy",
         "node_id" : "MDQ6VXNlcjUzNzc2NTA=",
         "organizations_url" : "https://api.github.com/users/furszy/orgs",
         "received_events_url" : "https://api.github.com/users/furszy/received_events",
         "repos_url" : "https://api.github.com/users/furszy/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/furszy/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/furszy/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/furszy"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28253#discussion_r1294654358"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28253"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1294654358"
         }
      },
      "author_association" : "MEMBER",
      "body" : "> Why might the output differ between CI and non-CI runs?\r\n\r\nI thought that the test_runner.py may be doing something with stderr, but it looks like it will get printed:\r\n\r\n```py\r\n                print(BOLD[1] + 'stdout:\\n' + BOLD[0] + stdout + '\\n')\r\n                print(BOLD[1] + 'stderr:\\n' + BOLD[0] + stderr + '\\n')\r\n                if combined_logs_len and os.path.isdir(testdir):\r\n                    # Print the final `combinedlogslen` lines of the combined logs\r\n```\r\n\r\n\r\n\r\n> Also, the `\"normal\" test (not create_cache)` tense isn't clear for me. Does it refer to running an individual test locally?\r\n\r\nYes, I mean any test that is not `create_cache.py`.\r\n\r\n\r\n\r\n> Mainly to get a more readable print when a crash happens. The `FailedToStartError` exception message appears in-between two long stack traces.\r\n\r\nLooking at my code block above, it looks like the error message would be easier to spot in the output if it was part of the combined output, as opposed to the python stack trace, no?\r\n\r\nYou can use newlines to aid reading and break long blocks.",
      "commit_id" : "2f19be69109ddc0baed8c9d2db0c8de791b5f6ad",
      "created_at" : "2023-08-15T14:15:18Z",
      "diff_hunk" : "@@ -232,6 +232,15 @@ def wait_for_rpc_connection(self):\n         poll_per_s = 4\n         for _ in range(poll_per_s * self.rpc_timeout):\n             if self.process.poll() is not None:\n+                if self.process.returncode != 0:\n+                    # Print any abrupt shutdown error, so it is visible from the console and the\n+                    # user doesn't have to go node by node checking which one failed.\n+                    with open(self.stderr.name, 'r', encoding='utf-8') as err_file:\n+                        print(\"************************\")\n+                        print(f\"'{self.datadir_path.name}' abruptly aborted with error:\\n\")\n+                        print(''.join(line for line in err_file if line.strip() and line[0] != \"*\"))\n+                        print(\"************************\")\n+\n                 raise FailedToStartError(self._node_msg(\n                     'bitcoind exited with status {} during initialization'.format(self.process.returncode)))",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28253#discussion_r1294654358",
      "id" : 1294654358,
      "in_reply_to_id" : 1294258580,
      "line" : 245,
      "node_id" : "PRRC_kwDOABII585NKtuW",
      "original_commit_id" : "2f19be69109ddc0baed8c9d2db0c8de791b5f6ad",
      "original_line" : 245,
      "original_position" : 14,
      "original_start_line" : null,
      "path" : "test/functional/test_framework/test_node.py",
      "position" : 14,
      "pull_request_review_id" : 1578653039,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28253",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1294654358/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-08-15T14:15:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1294654358",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28253#discussion_r1294678025"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28253"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1294678025"
         }
      },
      "author_association" : "MEMBER",
      "body" : "> > Why might the output differ between CI and non-CI runs?\r\n> \r\n> I thought that the test_runner.py may be doing something with stderr, but it looks like it will get printed:\r\n> \r\n> ```python\r\n>                 print(BOLD[1] + 'stdout:\\n' + BOLD[0] + stdout + '\\n')\r\n>                 print(BOLD[1] + 'stderr:\\n' + BOLD[0] + stderr + '\\n')\r\n>                 if combined_logs_len and os.path.isdir(testdir):\r\n>                     # Print the final `combinedlogslen` lines of the combined logs\r\n> ```\r\n\r\nIn a first glance, that doesn't seems to print the nodes' stderr. That seems to be related to the job stderr (the test run in a subprocess). And those aren't connected.\r\n\r\n>  > Also, the `\"normal\" test (not create_cache)` tense isn't clear for me. Does it refer to running an individual test locally?\r\n> \r\n> Yes, I mean any test that is not `create_cache.py`.\r\n\r\nOk. The result is pretty much the same. Just the stack trace is a bit longer.\r\n\r\n> > Mainly to get a more readable print when a crash happens. The `FailedToStartError` exception message appears in-between two long stack traces.\r\n> \r\n> Looking at my code block above, it looks like the error message would be easier to spot in the output if it was part of the combined output, as opposed to the python stack trace, no?\r\n> \r\n> You can use newlines to aid reading and break long blocks.\r\n\r\nAs far as I can see, we don't support combined output on single test cases. So, that would make us lose the crash cause on individual test runs?",
      "commit_id" : "2f19be69109ddc0baed8c9d2db0c8de791b5f6ad",
      "created_at" : "2023-08-15T14:32:46Z",
      "diff_hunk" : "@@ -232,6 +232,15 @@ def wait_for_rpc_connection(self):\n         poll_per_s = 4\n         for _ in range(poll_per_s * self.rpc_timeout):\n             if self.process.poll() is not None:\n+                if self.process.returncode != 0:\n+                    # Print any abrupt shutdown error, so it is visible from the console and the\n+                    # user doesn't have to go node by node checking which one failed.\n+                    with open(self.stderr.name, 'r', encoding='utf-8') as err_file:\n+                        print(\"************************\")\n+                        print(f\"'{self.datadir_path.name}' abruptly aborted with error:\\n\")\n+                        print(''.join(line for line in err_file if line.strip() and line[0] != \"*\"))\n+                        print(\"************************\")\n+\n                 raise FailedToStartError(self._node_msg(\n                     'bitcoind exited with status {} during initialization'.format(self.process.returncode)))",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28253#discussion_r1294678025",
      "id" : 1294678025,
      "in_reply_to_id" : 1294258580,
      "line" : 245,
      "node_id" : "PRRC_kwDOABII585NKzgJ",
      "original_commit_id" : "2f19be69109ddc0baed8c9d2db0c8de791b5f6ad",
      "original_line" : 245,
      "original_position" : 14,
      "original_start_line" : null,
      "path" : "test/functional/test_framework/test_node.py",
      "position" : 14,
      "pull_request_review_id" : 1578689713,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28253",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1294678025/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-08-15T14:32:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1294678025",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5377650?v=4",
         "events_url" : "https://api.github.com/users/furszy/events{/privacy}",
         "followers_url" : "https://api.github.com/users/furszy/followers",
         "following_url" : "https://api.github.com/users/furszy/following{/other_user}",
         "gists_url" : "https://api.github.com/users/furszy/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/furszy",
         "id" : 5377650,
         "login" : "furszy",
         "node_id" : "MDQ6VXNlcjUzNzc2NTA=",
         "organizations_url" : "https://api.github.com/users/furszy/orgs",
         "received_events_url" : "https://api.github.com/users/furszy/received_events",
         "repos_url" : "https://api.github.com/users/furszy/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/furszy/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/furszy/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/furszy"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28253#discussion_r1294687210"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28253"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1294687210"
         }
      },
      "author_association" : "MEMBER",
      "body" : "> In a first glance, that doesn't seems to print the nodes' stderr. That seems to be related to the job stderr (the test run in a subprocess). And those aren't connected.\r\n\r\nCurrently, you are reading the node's stderr and the printing it to stdout, so it *should* appear as `print(BOLD[1] + 'stdout:\\n' + BOLD[0] + stdout + '\\n')`.\r\n\r\n> Ok. The result is pretty much the same. Just the stack trace is a bit longer.\r\n\r\nThe difference should be that the output won't be shown in the CI tail if the test has produced enough output.\r\n\r\n> As far as I can see, we don't support combined output on single test cases. So, that would make us lose the crash cause on individual test runs?\r\n\r\ncombined output is *only* supported for single test files.",
      "commit_id" : "2f19be69109ddc0baed8c9d2db0c8de791b5f6ad",
      "created_at" : "2023-08-15T14:40:36Z",
      "diff_hunk" : "@@ -232,6 +232,15 @@ def wait_for_rpc_connection(self):\n         poll_per_s = 4\n         for _ in range(poll_per_s * self.rpc_timeout):\n             if self.process.poll() is not None:\n+                if self.process.returncode != 0:\n+                    # Print any abrupt shutdown error, so it is visible from the console and the\n+                    # user doesn't have to go node by node checking which one failed.\n+                    with open(self.stderr.name, 'r', encoding='utf-8') as err_file:\n+                        print(\"************************\")\n+                        print(f\"'{self.datadir_path.name}' abruptly aborted with error:\\n\")\n+                        print(''.join(line for line in err_file if line.strip() and line[0] != \"*\"))\n+                        print(\"************************\")\n+\n                 raise FailedToStartError(self._node_msg(\n                     'bitcoind exited with status {} during initialization'.format(self.process.returncode)))",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28253#discussion_r1294687210",
      "id" : 1294687210,
      "in_reply_to_id" : 1294258580,
      "line" : 245,
      "node_id" : "PRRC_kwDOABII585NK1vq",
      "original_commit_id" : "2f19be69109ddc0baed8c9d2db0c8de791b5f6ad",
      "original_line" : 245,
      "original_position" : 14,
      "original_start_line" : null,
      "path" : "test/functional/test_framework/test_node.py",
      "position" : 14,
      "pull_request_review_id" : 1578704190,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28253",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1294687210/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-08-15T14:40:36Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1294687210",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28253#discussion_r1296039055"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28253"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1296039055"
         }
      },
      "author_association" : "MEMBER",
      "body" : "> > In a first glance, that doesn't seems to print the nodes' stderr. That seems to be related to the job stderr (the test run in a subprocess). And those aren't connected.\r\n> \r\n> Currently, you are reading the node's stderr and the printing it to stdout, so it _should_ appear as `print(BOLD[1] + 'stdout:\\n' + BOLD[0] + stdout + '\\n')`.\r\n> \r\n> > Ok. The result is pretty much the same. Just the stack trace is a bit longer.\r\n> \r\n> The difference should be that the output won't be shown in the CI tail if the test has produced enough output.\r\n> \r\n> > As far as I can see, we don't support combined output on single test cases. So, that would make us lose the crash cause on individual test runs?\r\n> \r\n> combined output is _only_ supported for single test files.\r\n\r\nHmm, this made me struggle. it seems that we are mixing `test_runner.py` functionality and the per test case functionality.\r\n\r\nThe `print(BOLD[1] + 'stdout:\\n' + BOLD[0] + stdout + '\\n')` occurs only at the test_runner level. When the '-combinedlogslen' flag is provided.\r\nThen, for each test case, if we want to combine logs, we need to manually call to the `combine_logs.py` script.\r\n\r\nGuessing that this confusion arose because I was referring to running single test cases without the test runner, while you are thinking on running them with it.\r\nFor instance, calling `./wallet_migration.py` vs calling `./test_runner wallet_migration.py`.\r\n\r\nYet, I'm a bit confused about where we currently stand in the discussion. Could you please clarify the proposed changes?",
      "commit_id" : "36b6f308e4e7ec6135844bf72dd7979526a7dd2f",
      "created_at" : "2023-08-16T14:52:29Z",
      "diff_hunk" : "@@ -232,6 +232,15 @@ def wait_for_rpc_connection(self):\n         poll_per_s = 4\n         for _ in range(poll_per_s * self.rpc_timeout):\n             if self.process.poll() is not None:\n+                if self.process.returncode != 0:\n+                    # Print any abrupt shutdown error, so it is visible from the console and the\n+                    # user doesn't have to go node by node checking which one failed.\n+                    with open(self.stderr.name, 'r', encoding='utf-8') as err_file:\n+                        print(\"************************\")\n+                        print(f\"'{self.datadir_path.name}' abruptly aborted with error:\\n\")\n+                        print(''.join(line for line in err_file if line.strip() and line[0] != \"*\"))\n+                        print(\"************************\")\n+\n                 raise FailedToStartError(self._node_msg(\n                     'bitcoind exited with status {} during initialization'.format(self.process.returncode)))",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28253#discussion_r1296039055",
      "id" : 1296039055,
      "in_reply_to_id" : 1294258580,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585NP_yP",
      "original_commit_id" : "2f19be69109ddc0baed8c9d2db0c8de791b5f6ad",
      "original_line" : 245,
      "original_position" : 14,
      "original_start_line" : null,
      "path" : "test/functional/test_framework/test_node.py",
      "position" : null,
      "pull_request_review_id" : 1580821088,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28253",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1296039055/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-08-16T15:29:42Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1296039055",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5377650?v=4",
         "events_url" : "https://api.github.com/users/furszy/events{/privacy}",
         "followers_url" : "https://api.github.com/users/furszy/followers",
         "following_url" : "https://api.github.com/users/furszy/following{/other_user}",
         "gists_url" : "https://api.github.com/users/furszy/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/furszy",
         "id" : 5377650,
         "login" : "furszy",
         "node_id" : "MDQ6VXNlcjUzNzc2NTA=",
         "organizations_url" : "https://api.github.com/users/furszy/orgs",
         "received_events_url" : "https://api.github.com/users/furszy/received_events",
         "repos_url" : "https://api.github.com/users/furszy/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/furszy/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/furszy/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/furszy"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28253#discussion_r1296776262"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28253"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1296776262"
         }
      },
      "author_association" : "MEMBER",
      "body" : "> Yet, I'm a bit confused about where we currently stand in the discussion. Could you please clarify the proposed changes?\r\n\r\nNot sure myself (I haven't tested this yet, just looked at the code). However, I think overall the best UX would be  to append the stderr to this message, see https://github.com/bitcoin/bitcoin/pull/28253/files#r1294258580 (using `*` and `\\n` to format it nicely)",
      "commit_id" : "36b6f308e4e7ec6135844bf72dd7979526a7dd2f",
      "created_at" : "2023-08-17T07:17:39Z",
      "diff_hunk" : "@@ -232,6 +232,15 @@ def wait_for_rpc_connection(self):\n         poll_per_s = 4\n         for _ in range(poll_per_s * self.rpc_timeout):\n             if self.process.poll() is not None:\n+                if self.process.returncode != 0:\n+                    # Print any abrupt shutdown error, so it is visible from the console and the\n+                    # user doesn't have to go node by node checking which one failed.\n+                    with open(self.stderr.name, 'r', encoding='utf-8') as err_file:\n+                        print(\"************************\")\n+                        print(f\"'{self.datadir_path.name}' abruptly aborted with error:\\n\")\n+                        print(''.join(line for line in err_file if line.strip() and line[0] != \"*\"))\n+                        print(\"************************\")\n+\n                 raise FailedToStartError(self._node_msg(\n                     'bitcoind exited with status {} during initialization'.format(self.process.returncode)))",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28253#discussion_r1296776262",
      "id" : 1296776262,
      "in_reply_to_id" : 1294258580,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585NSzxG",
      "original_commit_id" : "2f19be69109ddc0baed8c9d2db0c8de791b5f6ad",
      "original_line" : 245,
      "original_position" : 14,
      "original_start_line" : null,
      "path" : "test/functional/test_framework/test_node.py",
      "position" : null,
      "pull_request_review_id" : 1581937980,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28253",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1296776262/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-08-17T07:17:51Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1296776262",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28253#discussion_r1303140441"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28253"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1303140441"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Ok. Pushed.\r\nThis is how the CI error will look now https://github.com/furszy/bitcoin-core/runs/16145060771.",
      "commit_id" : "36b6f308e4e7ec6135844bf72dd7979526a7dd2f",
      "created_at" : "2023-08-23T14:49:43Z",
      "diff_hunk" : "@@ -232,6 +232,15 @@ def wait_for_rpc_connection(self):\n         poll_per_s = 4\n         for _ in range(poll_per_s * self.rpc_timeout):\n             if self.process.poll() is not None:\n+                if self.process.returncode != 0:\n+                    # Print any abrupt shutdown error, so it is visible from the console and the\n+                    # user doesn't have to go node by node checking which one failed.\n+                    with open(self.stderr.name, 'r', encoding='utf-8') as err_file:\n+                        print(\"************************\")\n+                        print(f\"'{self.datadir_path.name}' abruptly aborted with error:\\n\")\n+                        print(''.join(line for line in err_file if line.strip() and line[0] != \"*\"))\n+                        print(\"************************\")\n+\n                 raise FailedToStartError(self._node_msg(\n                     'bitcoind exited with status {} during initialization'.format(self.process.returncode)))",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28253#discussion_r1303140441",
      "id" : 1303140441,
      "in_reply_to_id" : 1294258580,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585NrFhZ",
      "original_commit_id" : "2f19be69109ddc0baed8c9d2db0c8de791b5f6ad",
      "original_line" : 245,
      "original_position" : 14,
      "original_start_line" : null,
      "path" : "test/functional/test_framework/test_node.py",
      "position" : null,
      "pull_request_review_id" : 1591791412,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28253",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1303140441/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-08-23T14:49:43Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1303140441",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5377650?v=4",
         "events_url" : "https://api.github.com/users/furszy/events{/privacy}",
         "followers_url" : "https://api.github.com/users/furszy/followers",
         "following_url" : "https://api.github.com/users/furszy/following{/other_user}",
         "gists_url" : "https://api.github.com/users/furszy/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/furszy",
         "id" : 5377650,
         "login" : "furszy",
         "node_id" : "MDQ6VXNlcjUzNzc2NTA=",
         "organizations_url" : "https://api.github.com/users/furszy/orgs",
         "received_events_url" : "https://api.github.com/users/furszy/received_events",
         "repos_url" : "https://api.github.com/users/furszy/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/furszy/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/furszy/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/furszy"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28253#discussion_r1303146717"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28253"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1303146717"
         }
      },
      "author_association" : "MEMBER",
      "body" : "nit: Any reason for this check? Reading an empty stderr should be fine either way?",
      "commit_id" : "36b6f308e4e7ec6135844bf72dd7979526a7dd2f",
      "created_at" : "2023-08-23T14:54:01Z",
      "diff_hunk" : "@@ -232,8 +232,18 @@ def wait_for_rpc_connection(self):\n         poll_per_s = 4\n         for _ in range(poll_per_s * self.rpc_timeout):\n             if self.process.poll() is not None:\n+                str_error = \"\"\n+                if self.process.returncode != 0:",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28253#discussion_r1303146717",
      "id" : 1303146717,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585NrHDd",
      "original_commit_id" : "6ac03a511cf91626722b9871eb964c923f1e8fd2",
      "original_line" : 236,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "test/functional/test_framework/test_node.py",
      "position" : null,
      "pull_request_review_id" : 1591801776,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28253",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1303146717/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-08-23T14:55:13Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1303146717",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28253#discussion_r1303147815"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28253"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1303147815"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Are you sure `.name` is valid on all types? Wouldn't it be better to use `seek(0)` and `read().decode()`, like below?",
      "commit_id" : "36b6f308e4e7ec6135844bf72dd7979526a7dd2f",
      "created_at" : "2023-08-23T14:54:44Z",
      "diff_hunk" : "@@ -232,8 +232,18 @@ def wait_for_rpc_connection(self):\n         poll_per_s = 4\n         for _ in range(poll_per_s * self.rpc_timeout):\n             if self.process.poll() is not None:\n+                str_error = \"\"\n+                if self.process.returncode != 0:\n+                    # Print any abrupt shutdown error, so it is visible from the console and the\n+                    # user doesn't have to go node by node checking which one failed.\n+                    with open(self.stderr.name, 'r', encoding='utf-8') as err_file:",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28253#discussion_r1303147815",
      "id" : 1303147815,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585NrHUn",
      "original_commit_id" : "6ac03a511cf91626722b9871eb964c923f1e8fd2",
      "original_line" : 239,
      "original_position" : 8,
      "original_start_line" : null,
      "path" : "test/functional/test_framework/test_node.py",
      "position" : null,
      "pull_request_review_id" : 1591801776,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28253",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1303147815/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-08-23T14:55:13Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1303147815",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28253#discussion_r1303182533"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28253"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1303182533"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Sure. Pushed ðð¼.",
      "commit_id" : "36b6f308e4e7ec6135844bf72dd7979526a7dd2f",
      "created_at" : "2023-08-23T15:20:08Z",
      "diff_hunk" : "@@ -232,8 +232,18 @@ def wait_for_rpc_connection(self):\n         poll_per_s = 4\n         for _ in range(poll_per_s * self.rpc_timeout):\n             if self.process.poll() is not None:\n+                str_error = \"\"\n+                if self.process.returncode != 0:\n+                    # Print any abrupt shutdown error, so it is visible from the console and the\n+                    # user doesn't have to go node by node checking which one failed.\n+                    with open(self.stderr.name, 'r', encoding='utf-8') as err_file:",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28253#discussion_r1303182533",
      "id" : 1303182533,
      "in_reply_to_id" : 1303147815,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585NrPzF",
      "original_commit_id" : "6ac03a511cf91626722b9871eb964c923f1e8fd2",
      "original_line" : 239,
      "original_position" : 8,
      "original_start_line" : null,
      "path" : "test/functional/test_framework/test_node.py",
      "position" : null,
      "pull_request_review_id" : 1591857497,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28253",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1303182533/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-08-23T15:20:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1303182533",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5377650?v=4",
         "events_url" : "https://api.github.com/users/furszy/events{/privacy}",
         "followers_url" : "https://api.github.com/users/furszy/followers",
         "following_url" : "https://api.github.com/users/furszy/following{/other_user}",
         "gists_url" : "https://api.github.com/users/furszy/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/furszy",
         "id" : 5377650,
         "login" : "furszy",
         "node_id" : "MDQ6VXNlcjUzNzc2NTA=",
         "organizations_url" : "https://api.github.com/users/furszy/orgs",
         "received_events_url" : "https://api.github.com/users/furszy/received_events",
         "repos_url" : "https://api.github.com/users/furszy/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/furszy/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/furszy/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/furszy"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28253#discussion_r1303183438"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28253"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1303183438"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Merely to not print the \"********\\n\" string when there is no error. But just pushed a slightly different version only checking the stderr string instead of the return code.",
      "commit_id" : "36b6f308e4e7ec6135844bf72dd7979526a7dd2f",
      "created_at" : "2023-08-23T15:20:51Z",
      "diff_hunk" : "@@ -232,8 +232,18 @@ def wait_for_rpc_connection(self):\n         poll_per_s = 4\n         for _ in range(poll_per_s * self.rpc_timeout):\n             if self.process.poll() is not None:\n+                str_error = \"\"\n+                if self.process.returncode != 0:",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28253#discussion_r1303183438",
      "id" : 1303183438,
      "in_reply_to_id" : 1303146717,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585NrQBO",
      "original_commit_id" : "6ac03a511cf91626722b9871eb964c923f1e8fd2",
      "original_line" : 236,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "test/functional/test_framework/test_node.py",
      "position" : null,
      "pull_request_review_id" : 1591858884,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28253",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1303183438/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-08-23T15:21:59Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1303183438",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5377650?v=4",
         "events_url" : "https://api.github.com/users/furszy/events{/privacy}",
         "followers_url" : "https://api.github.com/users/furszy/followers",
         "following_url" : "https://api.github.com/users/furszy/following{/other_user}",
         "gists_url" : "https://api.github.com/users/furszy/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/furszy",
         "id" : 5377650,
         "login" : "furszy",
         "node_id" : "MDQ6VXNlcjUzNzc2NTA=",
         "organizations_url" : "https://api.github.com/users/furszy/orgs",
         "received_events_url" : "https://api.github.com/users/furszy/received_events",
         "repos_url" : "https://api.github.com/users/furszy/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/furszy/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/furszy/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/furszy"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Updated per feedback. Thanks.\r\n\r\nSame CI result as before: https://github.com/furszy/bitcoin-core/runs/16146994349.",
      "created_at" : "2023-08-23T16:06:57Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28253#issuecomment-1690236249",
      "id" : 1690236249,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28253",
      "node_id" : "IC_kwDOABII585kvvVZ",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1690236249/reactions"
      },
      "updated_at" : "2023-08-23T16:06:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1690236249",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5377650?v=4",
         "events_url" : "https://api.github.com/users/furszy/events{/privacy}",
         "followers_url" : "https://api.github.com/users/furszy/followers",
         "following_url" : "https://api.github.com/users/furszy/following{/other_user}",
         "gists_url" : "https://api.github.com/users/furszy/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/furszy",
         "id" : 5377650,
         "login" : "furszy",
         "node_id" : "MDQ6VXNlcjUzNzc2NTA=",
         "organizations_url" : "https://api.github.com/users/furszy/orgs",
         "received_events_url" : "https://api.github.com/users/furszy/received_events",
         "repos_url" : "https://api.github.com/users/furszy/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/furszy/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/furszy/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/furszy"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Concept ACK.",
      "created_at" : "2023-10-04T13:54:41Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28253#issuecomment-1746929297",
      "id" : 1746929297,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28253",
      "node_id" : "IC_kwDOABII585oIAaR",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1746929297/reactions"
      },
      "updated_at" : "2023-10-04T13:54:41Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1746929297",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/32963518?v=4",
         "events_url" : "https://api.github.com/users/hebasto/events{/privacy}",
         "followers_url" : "https://api.github.com/users/hebasto/followers",
         "following_url" : "https://api.github.com/users/hebasto/following{/other_user}",
         "gists_url" : "https://api.github.com/users/hebasto/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/hebasto",
         "id" : 32963518,
         "login" : "hebasto",
         "node_id" : "MDQ6VXNlcjMyOTYzNTE4",
         "organizations_url" : "https://api.github.com/users/hebasto/orgs",
         "received_events_url" : "https://api.github.com/users/hebasto/received_events",
         "repos_url" : "https://api.github.com/users/hebasto/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/hebasto/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/hebasto"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Concept ACK",
      "created_at" : "2023-10-04T22:39:47Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28253#issuecomment-1747744789",
      "id" : 1747744789,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28253",
      "node_id" : "IC_kwDOABII585oLHgV",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1747744789/reactions"
      },
      "updated_at" : "2023-10-04T22:39:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1747744789",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/91535?v=4",
         "events_url" : "https://api.github.com/users/theStack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/theStack/followers",
         "following_url" : "https://api.github.com/users/theStack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/theStack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/theStack",
         "id" : 91535,
         "login" : "theStack",
         "node_id" : "MDQ6VXNlcjkxNTM1",
         "organizations_url" : "https://api.github.com/users/theStack/orgs",
         "received_events_url" : "https://api.github.com/users/theStack/received_events",
         "repos_url" : "https://api.github.com/users/theStack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/theStack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/theStack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/theStack"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28253#discussion_r1346590986"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28253"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1346590986"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "This list comprehension results in a list of characters rather than a list of lines, and filters out _all_ `*` characters, rather than only lines starting with `*`. I assume what you intended would look more like this:\r\n```suggestion\r\n                err = ''.join(line.decode('utf-8') for line in self.stderr if not line.startswith(b\"*\"))\r\n```\r\n(On the other hand, do we need this `*` filter at all?)\r\n\r\nI tested with the following patch:\r\n```diff\r\ndiff --git a/src/init.cpp b/src/init.cpp\r\nindex 33389e695..e6509cc85 100644\r\n--- a/src/init.cpp\r\n+++ b/src/init.cpp\r\n@@ -1661,6 +1661,7 @@ bool AppInitMain(NodeContext& node, interfaces::BlockAndHeaderTipInfo* tip_info)\r\n     }\r\n \r\n     chainman.m_thread_load = std::thread(&util::TraceThread, \"initload\", [=, &chainman, &args, &node] {\r\n+        throw std::logic_error(\"I'm an ugly error.\\n*** This line should be skipped.\\nThis line should be visible. ***\");\r\n         // Import blocks\r\n         ImportBlocks(chainman, vImportFiles);\r\n         if (args.GetBoolArg(\"-stopafterblockimport\", DEFAULT_STOPAFTERBLOCKIMPORT)) {\r\n```",
      "commit_id" : "36b6f308e4e7ec6135844bf72dd7979526a7dd2f",
      "created_at" : "2023-10-04T23:37:55Z",
      "diff_hunk" : "@@ -232,8 +232,18 @@ def wait_for_rpc_connection(self):\n         poll_per_s = 4\n         for _ in range(poll_per_s * self.rpc_timeout):\n             if self.process.poll() is not None:\n+                # Attach abrupt shutdown error/s to the exception message\n+                str_error = ''\n+                self.stderr.seek(0)\n+                err = ''.join(line for line in self.stderr.read().decode('utf-8').strip() if line[0] != \"*\")",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28253#discussion_r1346590986",
      "id" : 1346590986,
      "line" : 238,
      "node_id" : "PRRC_kwDOABII585QQ1kK",
      "original_commit_id" : "36b6f308e4e7ec6135844bf72dd7979526a7dd2f",
      "original_line" : 238,
      "original_position" : 7,
      "original_start_line" : null,
      "path" : "test/functional/test_framework/test_node.py",
      "position" : 7,
      "pull_request_review_id" : 1658650221,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28253",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1346590986/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-10-04T23:37:55Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1346590986",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/91535?v=4",
         "events_url" : "https://api.github.com/users/theStack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/theStack/followers",
         "following_url" : "https://api.github.com/users/theStack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/theStack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/theStack",
         "id" : 91535,
         "login" : "theStack",
         "node_id" : "MDQ6VXNlcjkxNTM1",
         "organizations_url" : "https://api.github.com/users/theStack/orgs",
         "received_events_url" : "https://api.github.com/users/theStack/received_events",
         "repos_url" : "https://api.github.com/users/theStack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/theStack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/theStack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/theStack"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28253#discussion_r1346627619"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28253"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1346627619"
         }
      },
      "author_association" : "MEMBER",
      "body" : "> On the other hand, do we need this * filter at all?\r\n\r\nWe need it to present the crashed/aborted node's identification within the error message. Because the stderr message contain the * separator ([link](https://github.com/bitcoin/bitcoin/blob/5b4478418b24422885ae4d5c9a41a45455a72618/src/util/exception.cpp#L40)).\r\n\r\nIn other words, right now the format is:\r\n\r\n```\r\n****************\r\n<node_datadir> abruptly aborted with error:\r\n\r\n<error message>\r\n****************\r\n```\r\n\r\nAnd what you propose would looks like:\r\n\r\n```\r\n<node_datadir> abruptly aborted with error:\r\n****************\r\n<error message>\r\n****************\r\n```\r\n\r\nWhich I think that is harder to read.",
      "commit_id" : "2633152c1a53a5c961c83cbb97a91dab6c59fc43",
      "created_at" : "2023-10-05T00:31:29Z",
      "diff_hunk" : "@@ -232,8 +232,18 @@ def wait_for_rpc_connection(self):\n         poll_per_s = 4\n         for _ in range(poll_per_s * self.rpc_timeout):\n             if self.process.poll() is not None:\n+                # Attach abrupt shutdown error/s to the exception message\n+                str_error = ''\n+                self.stderr.seek(0)\n+                err = ''.join(line for line in self.stderr.read().decode('utf-8').strip() if line[0] != \"*\")",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28253#discussion_r1346627619",
      "id" : 1346627619,
      "in_reply_to_id" : 1346590986,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585QQ-gj",
      "original_commit_id" : "36b6f308e4e7ec6135844bf72dd7979526a7dd2f",
      "original_line" : 238,
      "original_position" : 7,
      "original_start_line" : null,
      "path" : "test/functional/test_framework/test_node.py",
      "position" : null,
      "pull_request_review_id" : 1658695774,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28253",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1346627619/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-10-05T00:41:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1346627619",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5377650?v=4",
         "events_url" : "https://api.github.com/users/furszy/events{/privacy}",
         "followers_url" : "https://api.github.com/users/furszy/followers",
         "following_url" : "https://api.github.com/users/furszy/following{/other_user}",
         "gists_url" : "https://api.github.com/users/furszy/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/furszy",
         "id" : 5377650,
         "login" : "furszy",
         "node_id" : "MDQ6VXNlcjUzNzc2NTA=",
         "organizations_url" : "https://api.github.com/users/furszy/orgs",
         "received_events_url" : "https://api.github.com/users/furszy/received_events",
         "repos_url" : "https://api.github.com/users/furszy/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/furszy/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/furszy/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/furszy"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Updated per feedback, thanks theStack!\r\n\r\nDiff is [minimal](https://github.com/bitcoin/bitcoin/compare/36b6f308e4e7ec6135844bf72dd7979526a7dd2f..9923c59478a765908318153881a6196757391064).",
      "created_at" : "2023-10-05T00:40:05Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28253#issuecomment-1747853560",
      "id" : 1747853560,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28253",
      "node_id" : "IC_kwDOABII585oLiD4",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1747853560/reactions"
      },
      "updated_at" : "2023-10-05T00:40:05Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1747853560",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5377650?v=4",
         "events_url" : "https://api.github.com/users/furszy/events{/privacy}",
         "followers_url" : "https://api.github.com/users/furszy/followers",
         "following_url" : "https://api.github.com/users/furszy/following{/other_user}",
         "gists_url" : "https://api.github.com/users/furszy/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/furszy",
         "id" : 5377650,
         "login" : "furszy",
         "node_id" : "MDQ6VXNlcjUzNzc2NTA=",
         "organizations_url" : "https://api.github.com/users/furszy/orgs",
         "received_events_url" : "https://api.github.com/users/furszy/received_events",
         "repos_url" : "https://api.github.com/users/furszy/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/furszy/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/furszy/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/furszy"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28253#discussion_r1347191418"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28253"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1347191418"
         }
      },
      "author_association" : "MEMBER",
      "body" : "nit: Is this needed? `_node_msg` already prints the node index. Also you could write `f\"'node{self.index}' ...` (shorter)",
      "commit_id" : "2633152c1a53a5c961c83cbb97a91dab6c59fc43",
      "created_at" : "2023-10-05T10:22:59Z",
      "diff_hunk" : "@@ -232,8 +232,18 @@ def wait_for_rpc_connection(self):\n         poll_per_s = 4\n         for _ in range(poll_per_s * self.rpc_timeout):\n             if self.process.poll() is not None:\n+                # Attach abrupt shutdown error/s to the exception message\n+                str_error = ''\n+                self.stderr.seek(0)\n+                err = ''.join(line.decode('utf-8') for line in self.stderr if not line.startswith(b\"*\"))\n+                if err != '':\n+                    str_error += \"\\n\\n************************\\n\"\n+                    str_error += f\"'{self.datadir_path.name}' abruptly aborted with error:\"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28253#discussion_r1347191418",
      "id" : 1347191418,
      "line" : 241,
      "node_id" : "PRRC_kwDOABII585QTIJ6",
      "original_commit_id" : "2633152c1a53a5c961c83cbb97a91dab6c59fc43",
      "original_line" : 241,
      "original_position" : 10,
      "original_start_line" : null,
      "path" : "test/functional/test_framework/test_node.py",
      "position" : 10,
      "pull_request_review_id" : 1659486066,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28253",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1347191418/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-10-05T10:23:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1347191418",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28253#discussion_r1347240678"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28253"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1347240678"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Okay I see, that makes sense.",
      "commit_id" : "2633152c1a53a5c961c83cbb97a91dab6c59fc43",
      "created_at" : "2023-10-05T11:05:30Z",
      "diff_hunk" : "@@ -232,8 +232,18 @@ def wait_for_rpc_connection(self):\n         poll_per_s = 4\n         for _ in range(poll_per_s * self.rpc_timeout):\n             if self.process.poll() is not None:\n+                # Attach abrupt shutdown error/s to the exception message\n+                str_error = ''\n+                self.stderr.seek(0)\n+                err = ''.join(line for line in self.stderr.read().decode('utf-8').strip() if line[0] != \"*\")",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28253#discussion_r1347240678",
      "id" : 1347240678,
      "in_reply_to_id" : 1346590986,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585QTULm",
      "original_commit_id" : "36b6f308e4e7ec6135844bf72dd7979526a7dd2f",
      "original_line" : 238,
      "original_position" : 7,
      "original_start_line" : null,
      "path" : "test/functional/test_framework/test_node.py",
      "position" : null,
      "pull_request_review_id" : 1659561633,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28253",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1347240678/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-10-05T11:05:30Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1347240678",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/91535?v=4",
         "events_url" : "https://api.github.com/users/theStack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/theStack/followers",
         "following_url" : "https://api.github.com/users/theStack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/theStack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/theStack",
         "id" : 91535,
         "login" : "theStack",
         "node_id" : "MDQ6VXNlcjkxNTM1",
         "organizations_url" : "https://api.github.com/users/theStack/orgs",
         "received_events_url" : "https://api.github.com/users/theStack/received_events",
         "repos_url" : "https://api.github.com/users/theStack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/theStack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/theStack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/theStack"
      }
   }
]
