{
   "active_lock_reason" : null,
   "assignee" : null,
   "assignees" : [],
   "author_association" : "MEMBER",
   "body" : "Broken out from #28201 \r\n\r\n---\r\n\r\nThe wallet returns an untweaked internal key for taproot outputs. If the output commits to a tree of scripts, this key needs to be tweaked with the merkle root. Even if the output does not commit to a tree of scripts, BIP341/342 recommend commiting to a hash of the public key.\r\n\r\nPreviously, this logic for applying the taptweak was implemented in the `CKey::SignSchnorr` method.\r\n\r\nThis PR moves this logic to its own method, `CKey::ApplyTapTweak` and refactors CKey::SignSchnorr` to use this new method.\r\n\r\nThe motivation is to be able to use the `::ApplyTapTweak` logic outside of signing, e.g. in silent payments when retrieving the private key. Outside of silent payments, having this method would support any future use cases where the tweaked key is needed outside of signing.\r\n\r\nNote: while this is mostly a move-only commit, it is not strictly a refactor. If signing with the `merkle_root` passed as an argument,`::SignSchnorr` will now require two calls to `secp256k1_keypair_create`. While this is not a big difference, its also not negligible.",
   "closed_at" : null,
   "closed_by" : null,
   "comments" : 1,
   "comments_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/30051/comments",
   "created_at" : "2024-05-06T11:00:17Z",
   "draft" : false,
   "events_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/30051/events",
   "html_url" : "https://github.com/bitcoin/bitcoin/pull/30051",
   "id" : 2280607389,
   "labels" : [],
   "labels_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/30051/labels{/name}",
   "locked" : false,
   "milestone" : null,
   "node_id" : "PR_kwDOABII585un22n",
   "number" : 30051,
   "performed_via_github_app" : null,
   "pull_request" : {
      "diff_url" : "https://github.com/bitcoin/bitcoin/pull/30051.diff",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/30051",
      "merged_at" : null,
      "patch_url" : "https://github.com/bitcoin/bitcoin/pull/30051.patch",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/30051"
   },
   "reactions" : {
      "+1" : 0,
      "-1" : 0,
      "confused" : 0,
      "eyes" : 0,
      "heart" : 0,
      "hooray" : 0,
      "laugh" : 0,
      "rocket" : 0,
      "total_count" : 0,
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/30051/reactions"
   },
   "repository_url" : "https://api.github.com/repos/bitcoin/bitcoin",
   "state" : "open",
   "state_reason" : null,
   "timeline_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/30051/timeline",
   "title" : "crypto, refactor: add method for applying the taptweak",
   "updated_at" : "2024-05-06T11:01:01Z",
   "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/30051",
   "user" : {
      "avatar_url" : "https://avatars.githubusercontent.com/u/7444140?v=4",
      "events_url" : "https://api.github.com/users/josibake/events{/privacy}",
      "followers_url" : "https://api.github.com/users/josibake/followers",
      "following_url" : "https://api.github.com/users/josibake/following{/other_user}",
      "gists_url" : "https://api.github.com/users/josibake/gists{/gist_id}",
      "gravatar_id" : "",
      "html_url" : "https://github.com/josibake",
      "id" : 7444140,
      "login" : "josibake",
      "node_id" : "MDQ6VXNlcjc0NDQxNDA=",
      "organizations_url" : "https://api.github.com/users/josibake/orgs",
      "received_events_url" : "https://api.github.com/users/josibake/received_events",
      "repos_url" : "https://api.github.com/users/josibake/repos",
      "site_admin" : false,
      "starred_url" : "https://api.github.com/users/josibake/starred{/owner}{/repo}",
      "subscriptions_url" : "https://api.github.com/users/josibake/subscriptions",
      "type" : "User",
      "url" : "https://api.github.com/users/josibake"
   }
}
