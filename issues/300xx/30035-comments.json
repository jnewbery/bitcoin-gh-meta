[
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage\nFor detailed information about the code coverage, see the [test coverage report](https://corecheck.dev/bitcoin/bitcoin/pulls/30035).\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| ACK | [tdb3](https://github.com/bitcoin/bitcoin/pull/30035#pullrequestreview-2039756843) |\n| Concept ACK | [edilmedeiros](https://github.com/bitcoin/bitcoin/pull/30035#issuecomment-2099144448) |\n\nIf your review is incorrectly listed, please react with ð to this comment and the bot will ignore it on the next update.\n",
      "created_at" : "2024-05-03T19:42:42Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/30035#issuecomment-2093659623",
      "id" : 2093659623,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/30035",
      "node_id" : "IC_kwDOABII5858yrXn",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2093659623/reactions"
      },
      "updated_at" : "2024-05-07T19:24:28Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2093659623",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/30035#discussion_r1590372865"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/30035"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1590372865"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "nit:  Probably outside the scope of this PR (this PR is adding tests, so business logic changes are extraneous), but at first glance, seems like these statements could be simplified, since `InsecureRandRange()` can return 0, the `std::string` constructor can handle 0 count, and string operator+ can handle empty string addition.  Maybe I'm missing something?\r\n\r\nFor example:\r\n\r\n```diff\r\ndiff --git a/src/test/base58_tests.cpp b/src/test/base58_tests.cpp\r\nindex 49ef9ff5b5..beb5ef3335 100644\r\n--- a/src/test/base58_tests.cpp\r\n+++ b/src/test/base58_tests.cpp\r\n@@ -92,8 +92,8 @@ BOOST_AUTO_TEST_CASE(base58_random_encode_decode_with_optional_spaces)\r\n         auto zeroes = InsecureRandBool() ? InsecureRandRange(len + 1) : 0;\r\n         auto data = Cat(std::vector<unsigned char>(zeroes, '\\000'), g_insecure_rand_ctx.randbytes(len - zeroes));\r\n \r\n-        auto leadingSpaces = InsecureRandBool() ? std::string(InsecureRandRange(10), ' ') : \"\";\r\n-        auto trailingSpaces = InsecureRandBool() ? std::string(InsecureRandRange(10), ' ') : \"\";\r\n+        auto leadingSpaces = std::string(InsecureRandRange(10), ' ');\r\n+        auto trailingSpaces = std::string(InsecureRandRange(10), ' ');\r\n         auto encoded = leadingSpaces + EncodeBase58Check(data) + trailingSpaces;\r\n \r\n         std::vector<unsigned char> decoded;\r\n```",
      "commit_id" : "9431bc94a19837a0b053fbbde9f5367543a7264e",
      "created_at" : "2024-05-05T17:51:53Z",
      "diff_hunk" : "@@ -81,19 +85,31 @@ BOOST_AUTO_TEST_CASE(base58_DecodeBase58)\n     BOOST_CHECK(!DecodeBase58Check(\"3vQB7B6MrGQZaxCuFg4oh\\0\" \"0IOl\"s, result, 100));\n }\n \n-BOOST_AUTO_TEST_CASE(base58_random_encode_decode)\n+BOOST_AUTO_TEST_CASE(base58_random_encode_decode_with_optional_spaces)\n {\n     for (int n = 0; n < 1000; ++n) {\n-        unsigned int len = 1 + InsecureRandBits(8);\n-        unsigned int zeroes = InsecureRandBool() ? InsecureRandRange(len + 1) : 0;\n+        auto len = 1 + InsecureRandBits(8);\n+        auto zeroes = InsecureRandBool() ? InsecureRandRange(len + 1) : 0;\n         auto data = Cat(std::vector<unsigned char>(zeroes, '\\000'), g_insecure_rand_ctx.randbytes(len - zeroes));\n-        auto encoded = EncodeBase58Check(data);\n+\n+        auto leadingSpaces = InsecureRandBool() ? std::string(InsecureRandRange(10), ' ') : \"\";\n+        auto trailingSpaces = InsecureRandBool() ? std::string(InsecureRandRange(10), ' ') : \"\";",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/30035#discussion_r1590372865",
      "id" : 1590372865,
      "line" : 96,
      "node_id" : "PRRC_kwDOABII585eyyoB",
      "original_commit_id" : "9431bc94a19837a0b053fbbde9f5367543a7264e",
      "original_line" : 96,
      "original_position" : 42,
      "original_start_line" : 95,
      "path" : "src/test/base58_tests.cpp",
      "position" : 42,
      "pull_request_review_id" : 2039756843,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/30035",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1590372865/reactions"
      },
      "side" : "RIGHT",
      "start_line" : 95,
      "start_side" : "RIGHT",
      "subject_type" : "line",
      "updated_at" : "2024-05-05T17:53:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1590372865",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/106488469?v=4",
         "events_url" : "https://api.github.com/users/tdb3/events{/privacy}",
         "followers_url" : "https://api.github.com/users/tdb3/followers",
         "following_url" : "https://api.github.com/users/tdb3/following{/other_user}",
         "gists_url" : "https://api.github.com/users/tdb3/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/tdb3",
         "id" : 106488469,
         "login" : "tdb3",
         "node_id" : "U_kgDOBljilQ",
         "organizations_url" : "https://api.github.com/users/tdb3/orgs",
         "received_events_url" : "https://api.github.com/users/tdb3/received_events",
         "repos_url" : "https://api.github.com/users/tdb3/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/tdb3/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/tdb3/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/tdb3"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/30035#discussion_r1590380169"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/30035"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1590380169"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Thanks for checking @tdb3, the results would be similar, but since I assumed the spaces are rare in reality, I gave it different odds.\r\nIn my impl the probability that we won't have any leading (or trailing) spaces was `50% + 50%*10%`, in your impl it's `10%`, so spaces would be in most samples.\r\nI'm fine with both.",
      "commit_id" : "9431bc94a19837a0b053fbbde9f5367543a7264e",
      "created_at" : "2024-05-05T18:23:54Z",
      "diff_hunk" : "@@ -81,19 +85,31 @@ BOOST_AUTO_TEST_CASE(base58_DecodeBase58)\n     BOOST_CHECK(!DecodeBase58Check(\"3vQB7B6MrGQZaxCuFg4oh\\0\" \"0IOl\"s, result, 100));\n }\n \n-BOOST_AUTO_TEST_CASE(base58_random_encode_decode)\n+BOOST_AUTO_TEST_CASE(base58_random_encode_decode_with_optional_spaces)\n {\n     for (int n = 0; n < 1000; ++n) {\n-        unsigned int len = 1 + InsecureRandBits(8);\n-        unsigned int zeroes = InsecureRandBool() ? InsecureRandRange(len + 1) : 0;\n+        auto len = 1 + InsecureRandBits(8);\n+        auto zeroes = InsecureRandBool() ? InsecureRandRange(len + 1) : 0;\n         auto data = Cat(std::vector<unsigned char>(zeroes, '\\000'), g_insecure_rand_ctx.randbytes(len - zeroes));\n-        auto encoded = EncodeBase58Check(data);\n+\n+        auto leadingSpaces = InsecureRandBool() ? std::string(InsecureRandRange(10), ' ') : \"\";\n+        auto trailingSpaces = InsecureRandBool() ? std::string(InsecureRandRange(10), ' ') : \"\";",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/30035#discussion_r1590380169",
      "id" : 1590380169,
      "in_reply_to_id" : 1590372865,
      "line" : 96,
      "node_id" : "PRRC_kwDOABII585ey0aJ",
      "original_commit_id" : "9431bc94a19837a0b053fbbde9f5367543a7264e",
      "original_line" : 96,
      "original_position" : 42,
      "original_start_line" : 95,
      "path" : "src/test/base58_tests.cpp",
      "position" : 42,
      "pull_request_review_id" : 2039765181,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/30035",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1590380169/reactions"
      },
      "side" : "RIGHT",
      "start_line" : 95,
      "start_side" : "RIGHT",
      "subject_type" : "line",
      "updated_at" : "2024-05-05T18:24:14Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1590380169",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1841944?v=4",
         "events_url" : "https://api.github.com/users/paplorinc/events{/privacy}",
         "followers_url" : "https://api.github.com/users/paplorinc/followers",
         "following_url" : "https://api.github.com/users/paplorinc/following{/other_user}",
         "gists_url" : "https://api.github.com/users/paplorinc/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/paplorinc",
         "id" : 1841944,
         "login" : "paplorinc",
         "node_id" : "MDQ6VXNlcjE4NDE5NDQ=",
         "organizations_url" : "https://api.github.com/users/paplorinc/orgs",
         "received_events_url" : "https://api.github.com/users/paplorinc/received_events",
         "repos_url" : "https://api.github.com/users/paplorinc/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/paplorinc/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/paplorinc/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/paplorinc"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/30035#discussion_r1590383244"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/30035"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1590383244"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Thanks, that's right (higher probability of no spaces over rand range alone). I don't have a preference, just an observation.",
      "commit_id" : "9431bc94a19837a0b053fbbde9f5367543a7264e",
      "created_at" : "2024-05-05T18:33:25Z",
      "diff_hunk" : "@@ -81,19 +85,31 @@ BOOST_AUTO_TEST_CASE(base58_DecodeBase58)\n     BOOST_CHECK(!DecodeBase58Check(\"3vQB7B6MrGQZaxCuFg4oh\\0\" \"0IOl\"s, result, 100));\n }\n \n-BOOST_AUTO_TEST_CASE(base58_random_encode_decode)\n+BOOST_AUTO_TEST_CASE(base58_random_encode_decode_with_optional_spaces)\n {\n     for (int n = 0; n < 1000; ++n) {\n-        unsigned int len = 1 + InsecureRandBits(8);\n-        unsigned int zeroes = InsecureRandBool() ? InsecureRandRange(len + 1) : 0;\n+        auto len = 1 + InsecureRandBits(8);\n+        auto zeroes = InsecureRandBool() ? InsecureRandRange(len + 1) : 0;\n         auto data = Cat(std::vector<unsigned char>(zeroes, '\\000'), g_insecure_rand_ctx.randbytes(len - zeroes));\n-        auto encoded = EncodeBase58Check(data);\n+\n+        auto leadingSpaces = InsecureRandBool() ? std::string(InsecureRandRange(10), ' ') : \"\";\n+        auto trailingSpaces = InsecureRandBool() ? std::string(InsecureRandRange(10), ' ') : \"\";",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/30035#discussion_r1590383244",
      "id" : 1590383244,
      "in_reply_to_id" : 1590372865,
      "line" : 96,
      "node_id" : "PRRC_kwDOABII585ey1KM",
      "original_commit_id" : "9431bc94a19837a0b053fbbde9f5367543a7264e",
      "original_line" : 96,
      "original_position" : 42,
      "original_start_line" : 95,
      "path" : "src/test/base58_tests.cpp",
      "position" : 42,
      "pull_request_review_id" : 2039767733,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/30035",
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1590383244/reactions"
      },
      "side" : "RIGHT",
      "start_line" : 95,
      "start_side" : "RIGHT",
      "subject_type" : "line",
      "updated_at" : "2024-05-05T18:33:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1590383244",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/106488469?v=4",
         "events_url" : "https://api.github.com/users/tdb3/events{/privacy}",
         "followers_url" : "https://api.github.com/users/tdb3/followers",
         "following_url" : "https://api.github.com/users/tdb3/following{/other_user}",
         "gists_url" : "https://api.github.com/users/tdb3/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/tdb3",
         "id" : 106488469,
         "login" : "tdb3",
         "node_id" : "U_kgDOBljilQ",
         "organizations_url" : "https://api.github.com/users/tdb3/orgs",
         "received_events_url" : "https://api.github.com/users/tdb3/received_events",
         "repos_url" : "https://api.github.com/users/tdb3/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/tdb3/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/tdb3/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/tdb3"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Concept ACK\r\n\r\nBuilt and ran the unit tests.\r\n\r\nThe new messages seem to be the opposite of what the tests do, tough.",
      "created_at" : "2024-05-07T19:24:26Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/30035#issuecomment-2099144448",
      "id" : 2099144448,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/30035",
      "node_id" : "IC_kwDOABII5859HmcA",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2099144448/reactions"
      },
      "updated_at" : "2024-05-07T19:24:26Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2099144448",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/78322931?v=4",
         "events_url" : "https://api.github.com/users/edilmedeiros/events{/privacy}",
         "followers_url" : "https://api.github.com/users/edilmedeiros/followers",
         "following_url" : "https://api.github.com/users/edilmedeiros/following{/other_user}",
         "gists_url" : "https://api.github.com/users/edilmedeiros/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/edilmedeiros",
         "id" : 78322931,
         "login" : "edilmedeiros",
         "node_id" : "MDQ6VXNlcjc4MzIyOTMx",
         "organizations_url" : "https://api.github.com/users/edilmedeiros/orgs",
         "received_events_url" : "https://api.github.com/users/edilmedeiros/received_events",
         "repos_url" : "https://api.github.com/users/edilmedeiros/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/edilmedeiros/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/edilmedeiros/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/edilmedeiros"
      }
   }
]
