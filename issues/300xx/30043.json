{
   "active_lock_reason" : null,
   "assignee" : null,
   "assignees" : [],
   "author_association" : "MEMBER",
   "body" : "Continues #30005. Closes #17012..\r\n\r\nThis PR replaces NAT-PMP port mapping with its successor PCP (Port Control Protocol) from [RFC6887](https://datatracker.ietf.org/doc/html/rfc6887).  This adds, in addition to the existing IPv4 port mapping, support for IPv6 pinholing-that is, opening a port on the firewall to make it reachable.\r\n\r\nPCP is a simple UDP-based protocol, and the implementation is self-contained, so this gets rid of lthe libnatpnp dependency without adding a new one. It should otherwise be a drop-in replacement, and as PCP (effectively NATPMP v2) was standardized in 2013, router support shouldn't be any different. \r\n\r\nFor now `-pcp`, like `-natpmp`, is disabled by default, though in the future (not in this PR) we could consider enable it by default to increase the number of connectable notes without adding significant attack surface.\r\n\r\nTo test:\r\n```bash\r\nbitcoind -regtest -pcp=1 -debug=net\r\n```\r\nThe option `-natpmp` is still accepted as an alias for `-pcp` (but gives a warning).\r\n\r\n## TODO\r\n\r\n- [ ] Default gateway discovery on Windows\r\n- [ ] Default gateway discovery on MacOS",
   "closed_at" : null,
   "closed_by" : null,
   "comments" : 2,
   "comments_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/30043/comments",
   "created_at" : "2024-05-05T18:35:03Z",
   "draft" : false,
   "events_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/30043/events",
   "html_url" : "https://github.com/bitcoin/bitcoin/pull/30043",
   "id" : 2279669012,
   "labels" : [
      {
         "color" : "006b75",
         "default" : false,
         "description" : null,
         "id" : 98298007,
         "name" : "P2P",
         "node_id" : "MDU6TGFiZWw5ODI5ODAwNw==",
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/labels/P2P"
      },
      {
         "color" : "cccccc",
         "default" : false,
         "description" : "",
         "id" : 5334691551,
         "name" : "CI failed",
         "node_id" : "LA_kwDOABII588AAAABPfju3w",
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/labels/CI%20failed"
      },
      {
         "color" : "0e8a16",
         "default" : false,
         "description" : "",
         "id" : 6861582155,
         "name" : "Needs CMake port",
         "node_id" : "LA_kwDOABII588AAAABmPtvSw",
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/labels/Needs%20CMake%20port"
      }
   ],
   "labels_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/30043/labels{/name}",
   "locked" : false,
   "milestone" : null,
   "node_id" : "PR_kwDOABII585ukuS9",
   "number" : 30043,
   "performed_via_github_app" : null,
   "pull_request" : {
      "diff_url" : "https://github.com/bitcoin/bitcoin/pull/30043.diff",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/30043",
      "merged_at" : null,
      "patch_url" : "https://github.com/bitcoin/bitcoin/pull/30043.patch",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/30043"
   },
   "reactions" : {
      "+1" : 0,
      "-1" : 0,
      "confused" : 0,
      "eyes" : 0,
      "heart" : 0,
      "hooray" : 0,
      "laugh" : 0,
      "rocket" : 0,
      "total_count" : 0,
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/30043/reactions"
   },
   "repository_url" : "https://api.github.com/repos/bitcoin/bitcoin",
   "state" : "open",
   "state_reason" : null,
   "timeline_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/30043/timeline",
   "title" : "net: Replace libnatpmp with built-in PCP implementation",
   "updated_at" : "2024-05-05T19:11:58Z",
   "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/30043",
   "user" : {
      "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=4",
      "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
      "followers_url" : "https://api.github.com/users/laanwj/followers",
      "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
      "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
      "gravatar_id" : "",
      "html_url" : "https://github.com/laanwj",
      "id" : 126646,
      "login" : "laanwj",
      "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
      "organizations_url" : "https://api.github.com/users/laanwj/orgs",
      "received_events_url" : "https://api.github.com/users/laanwj/received_events",
      "repos_url" : "https://api.github.com/users/laanwj/repos",
      "site_admin" : false,
      "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
      "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
      "type" : "User",
      "url" : "https://api.github.com/users/laanwj"
   }
}
