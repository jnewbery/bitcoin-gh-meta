[
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage\nFor detailed information about the code coverage, see the [test coverage report](https://corecheck.dev/bitcoin/bitcoin/pulls/30095).\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| ACK | [hebasto](https://github.com/bitcoin/bitcoin/pull/30095#pullrequestreview-2061691479), [theuni](https://github.com/bitcoin/bitcoin/pull/30095#pullrequestreview-2063982122) |\n| Concept ACK | [laanwj](https://github.com/bitcoin/bitcoin/pull/30095#issuecomment-2112065633) |\n\nIf your review is incorrectly listed, please react with ð to this comment and the bot will ignore it on the next update.\n",
      "created_at" : "2024-05-13T15:07:07Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/30095#issuecomment-2107913214",
      "id" : 2107913214,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/30095",
      "node_id" : "IC_kwDOABII5859pDP-",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2107913214/reactions"
      },
      "updated_at" : "2024-05-17T16:56:55Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2107913214",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "This came from the discussion in https://github.com/bitcoin/bitcoin/issues/29952",
      "created_at" : "2024-05-13T15:09:08Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/30095#issuecomment-2107925627",
      "id" : 2107925627,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/30095",
      "node_id" : "IC_kwDOABII5859pGR7",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2107925627/reactions"
      },
      "updated_at" : "2024-05-13T15:09:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2107925627",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--85328a0da195eb286784d51f73fa0af9-->\n\nð§ At least one of the CI tasks failed. Make sure to run all tests locally, according to the\ndocumentation.\n\nPossibly this is due to a silent merge conflict (the changes in this pull request being\nincompatible with the current code in the target branch). If so, make sure to rebase on the latest\ncommit of the target branch.\n\nLeave a comment here, if you need help tracking down a confusing failure.\n\n<sub>Debug: https://github.com/bitcoin/bitcoin/runs/24905574812</sub>",
      "created_at" : "2024-05-13T16:35:39Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/30095#issuecomment-2108165297",
      "id" : 2108165297,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/30095",
      "node_id" : "IC_kwDOABII5859qAyx",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2108165297/reactions"
      },
      "updated_at" : "2024-05-13T16:35:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2108165297",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "https://github.com/bitcoin/bitcoin/pull/30095/checks?check_run_id=24909710597\r\n```bash\r\n'./'util/threadnames.cpp\r\nIn file included from /usr/include/string.h:535,\r\n                 from /usr/include/c++/11/cstring:42,\r\n                 from util/threadnames.cpp:7:\r\nIn function âvoid* memcpy(void*, const void*, size_t)â,\r\n    inlined from âvoid SetInternalName(std::string)â at util/threadnames.cpp:50:16,\r\n    inlined from âvoid util::ThreadSetInternalName(std::string&&)â at util/threadnames.cpp:69:20:\r\n/usr/include/x86_64-linux-gnu/bits/string_fortified.h:29:33: error: âvoid* __builtin_memcpy(void*, const void*, long unsigned int)â forming offset [32, 143] is out of the bounds [0, 32] of object â<anonymous>â with type âstd::stringâ {aka âstd::__cxx11::basic_string<char>â} [-Werror=array-bounds]\r\n   29 |   return __builtin___memcpy_chk (__dest, __src, __len,\r\n      |          ~~~~~~~~~~~~~~~~~~~~~~~^~~~~~~~~~~~~~~~~~~~~~\r\n   30 |                                  __glibc_objsize0 (__dest));\r\n      |                                  ~~~~~~~~~~~~~~~~~~~~~~~~~~\r\nutil/threadnames.cpp: In function âvoid util::ThreadSetInternalName(std::string&&)â:\r\nutil/threadnames.cpp:69:20: note: â<anonymous>â declared here\r\n   69 |     SetInternalName(std::move(name));\r\n      |     ~~~~~~~~~~~~~~~^~~~~~~~~~~~~~~~~\r\nIn file included from /usr/include/string.h:535,\r\n                 from /usr/include/c++/11/cstring:42,\r\n                 from util/threadnames.cpp:7:\r\nIn function âvoid* memcpy(void*, const void*, size_t)â,\r\n    inlined from âvoid SetInternalName(std::string)â at util/threadnames.cpp:50:16,\r\n    inlined from âvoid util::ThreadRename(std::string&&)â at util/threadnames.cpp:64:20:\r\n/usr/include/x86_64-linux-gnu/bits/string_fortified.h:29:33: error: âvoid* __builtin_memcpy(void*, const void*, long unsigned int)â forming offset [32, 143] is out of the bounds [0, 32] of object â<anonymous>â with type âstd::stringâ {aka âstd::__cxx11::basic_string<char>â} [-Werror=array-bounds]\r\n   29 |   return __builtin___memcpy_chk (__dest, __src, __len,\r\n      |          ~~~~~~~~~~~~~~~~~~~~~~~^~~~~~~~~~~~~~~~~~~~~~\r\n   30 |                                  __glibc_objsize0 (__dest));\r\n      |                                  ~~~~~~~~~~~~~~~~~~~~~~~~~~\r\nutil/threadnames.cpp: In function âvoid util::ThreadRename(std::string&&)â:\r\nutil/threadnames.cpp:64:20: note: â<anonymous>â declared here\r\n   64 |     SetInternalName(std::move(name));\r\n      |     ~~~~~~~~~~~~~~~^~~~~~~~~~~~~~~~~\r\n```",
      "created_at" : "2024-05-14T02:53:23Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/30095#issuecomment-2109179605",
      "id" : 2109179605,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/30095",
      "node_id" : "IC_kwDOABII5859t4bV",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2109179605/reactions"
      },
      "updated_at" : "2024-05-14T02:53:23Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2109179605",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/863730?v=4",
         "events_url" : "https://api.github.com/users/fanquake/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fanquake/followers",
         "following_url" : "https://api.github.com/users/fanquake/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fanquake/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fanquake",
         "id" : 863730,
         "login" : "fanquake",
         "node_id" : "MDQ6VXNlcjg2MzczMA==",
         "organizations_url" : "https://api.github.com/users/fanquake/orgs",
         "received_events_url" : "https://api.github.com/users/fanquake/received_events",
         "repos_url" : "https://api.github.com/users/fanquake/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fanquake/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fanquake"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "`13f438a667...c5f9afd946`: fix the above and return `std::string` instead of `std::string_view` which internally has a pointer to the `thread_local` variable. This way the API can't the misused to store the reference to the `thread_local` longer than the thread's lifespan.",
      "created_at" : "2024-05-14T09:48:22Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/30095#issuecomment-2109763258",
      "id" : 2109763258,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/30095",
      "node_id" : "IC_kwDOABII5859wG66",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2109763258/reactions"
      },
      "updated_at" : "2024-05-14T09:48:22Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2109763258",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/30095#discussion_r1599831075"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/30095"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1599831075"
         }
      },
      "author_association" : "MEMBER",
      "body" : "This is being removed, but from the discussion in https://bugs.freebsd.org/bugzilla/show_bug.cgi?id=278701, [I see](https://bugs.freebsd.org/bugzilla/show_bug.cgi?id=278701#c3)\r\n> I started investigating this from here:\r\nhttps://groups.google.com/g/bsdmailinglist/c/22ncTZAbDp4/m/Dii_pII5AwAJ\r\n> I am not sure if that comment has merit. If that is an issue, it is different than the one from this bug report.\r\n\r\nSo if it's a different issue, unrelated to the one just fixed, or it's still unclear, why is the assumption this should be removed? At least, this change seems separate from what is being done here.",
      "commit_id" : "c5f9afd946efb4eb6b27b2d0316f2f787a9608c7",
      "created_at" : "2024-05-14T11:10:38Z",
      "diff_hunk" : "@@ -1049,11 +1049,6 @@ if test \"$use_thread_local\" = \"yes\" || test \"$use_thread_local\" = \"auto\"; then\n           dnl https://gist.github.com/jamesob/fe9a872051a88b2025b1aa37bfa98605\n           AC_MSG_RESULT([no])\n           ;;\n-        *freebsd*)\n-          dnl FreeBSD's implementation of thread_local is also buggy (per\n-          dnl https://groups.google.com/d/msg/bsdmailinglist/22ncTZAbDp4/Dii_pII5AwAJ)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/30095#discussion_r1599831075",
      "id" : 1599831075,
      "line" : 1054,
      "node_id" : "PRRC_kwDOABII585fW3wj",
      "original_commit_id" : "c5f9afd946efb4eb6b27b2d0316f2f787a9608c7",
      "original_line" : 1054,
      "original_position" : 6,
      "original_start_line" : null,
      "path" : "configure.ac",
      "position" : 6,
      "pull_request_review_id" : 2055030494,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/30095",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1599831075/reactions"
      },
      "side" : "LEFT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-05-14T11:10:38Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1599831075",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/863730?v=4",
         "events_url" : "https://api.github.com/users/fanquake/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fanquake/followers",
         "following_url" : "https://api.github.com/users/fanquake/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fanquake/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fanquake",
         "id" : 863730,
         "login" : "fanquake",
         "node_id" : "MDQ6VXNlcjg2MzczMA==",
         "organizations_url" : "https://api.github.com/users/fanquake/orgs",
         "received_events_url" : "https://api.github.com/users/fanquake/received_events",
         "repos_url" : "https://api.github.com/users/fanquake/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fanquake/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fanquake"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/30095#discussion_r1599981699"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/30095"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1599981699"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "My understanding is that it is safe to use `thread_local` on FreeBSD for variables that do not have a destructor even in the presence of the above bug (or bugs if they are two separate bugs).",
      "commit_id" : "c5f9afd946efb4eb6b27b2d0316f2f787a9608c7",
      "created_at" : "2024-05-14T12:55:19Z",
      "diff_hunk" : "@@ -1049,11 +1049,6 @@ if test \"$use_thread_local\" = \"yes\" || test \"$use_thread_local\" = \"auto\"; then\n           dnl https://gist.github.com/jamesob/fe9a872051a88b2025b1aa37bfa98605\n           AC_MSG_RESULT([no])\n           ;;\n-        *freebsd*)\n-          dnl FreeBSD's implementation of thread_local is also buggy (per\n-          dnl https://groups.google.com/d/msg/bsdmailinglist/22ncTZAbDp4/Dii_pII5AwAJ)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/30095#discussion_r1599981699",
      "id" : 1599981699,
      "in_reply_to_id" : 1599831075,
      "line" : 1054,
      "node_id" : "PRRC_kwDOABII585fXciD",
      "original_commit_id" : "c5f9afd946efb4eb6b27b2d0316f2f787a9608c7",
      "original_line" : 1054,
      "original_position" : 6,
      "original_start_line" : null,
      "path" : "configure.ac",
      "position" : 6,
      "pull_request_review_id" : 2055281072,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/30095",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1599981699/reactions"
      },
      "side" : "LEFT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-05-14T12:55:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1599981699",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/30095#discussion_r1600218912"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/30095"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1600218912"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Maybe add a comment to prevent future attempts to reintroduce `std::string`?",
      "commit_id" : "c5f9afd946efb4eb6b27b2d0316f2f787a9608c7",
      "created_at" : "2024-05-14T15:10:58Z",
      "diff_hunk" : "@@ -40,27 +41,31 @@ static void SetThreadName(const char* name)\n // global.\n #if defined(HAVE_THREAD_LOCAL)\n \n-static thread_local std::string g_thread_name;\n-const std::string& util::ThreadGetInternalName() { return g_thread_name; }\n+static thread_local char g_thread_name[128]{'\\0'};",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/30095#discussion_r1600218912",
      "id" : 1600218912,
      "line" : 44,
      "node_id" : "PRRC_kwDOABII585fYWcg",
      "original_commit_id" : "c5f9afd946efb4eb6b27b2d0316f2f787a9608c7",
      "original_line" : 44,
      "original_position" : 14,
      "original_start_line" : null,
      "path" : "src/util/threadnames.cpp",
      "position" : 14,
      "pull_request_review_id" : 2055708177,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/30095",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1600218912/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-05-14T15:11:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1600218912",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/32963518?v=4",
         "events_url" : "https://api.github.com/users/hebasto/events{/privacy}",
         "followers_url" : "https://api.github.com/users/hebasto/followers",
         "following_url" : "https://api.github.com/users/hebasto/following{/other_user}",
         "gists_url" : "https://api.github.com/users/hebasto/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/hebasto",
         "id" : 32963518,
         "login" : "hebasto",
         "node_id" : "MDQ6VXNlcjMyOTYzNTE4",
         "organizations_url" : "https://api.github.com/users/hebasto/orgs",
         "received_events_url" : "https://api.github.com/users/hebasto/received_events",
         "repos_url" : "https://api.github.com/users/hebasto/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/hebasto/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/hebasto"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/30095#discussion_r1600922285"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/30095"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1600922285"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Seems like a weird comment to add without specfic/obvious motivation, and doesn't prevent the same thing from happening elsewhere in the codebase?",
      "commit_id" : "c5f9afd946efb4eb6b27b2d0316f2f787a9608c7",
      "created_at" : "2024-05-15T04:23:48Z",
      "diff_hunk" : "@@ -40,27 +41,31 @@ static void SetThreadName(const char* name)\n // global.\n #if defined(HAVE_THREAD_LOCAL)\n \n-static thread_local std::string g_thread_name;\n-const std::string& util::ThreadGetInternalName() { return g_thread_name; }\n+static thread_local char g_thread_name[128]{'\\0'};",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/30095#discussion_r1600922285",
      "id" : 1600922285,
      "in_reply_to_id" : 1600218912,
      "line" : 44,
      "node_id" : "PRRC_kwDOABII585fbCKt",
      "original_commit_id" : "c5f9afd946efb4eb6b27b2d0316f2f787a9608c7",
      "original_line" : 44,
      "original_position" : 14,
      "original_start_line" : null,
      "path" : "src/util/threadnames.cpp",
      "position" : 14,
      "pull_request_review_id" : 2056860355,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/30095",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1600922285/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-05-15T04:23:48Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1600922285",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/863730?v=4",
         "events_url" : "https://api.github.com/users/fanquake/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fanquake/followers",
         "following_url" : "https://api.github.com/users/fanquake/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fanquake/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fanquake",
         "id" : 863730,
         "login" : "fanquake",
         "node_id" : "MDQ6VXNlcjg2MzczMA==",
         "organizations_url" : "https://api.github.com/users/fanquake/orgs",
         "received_events_url" : "https://api.github.com/users/fanquake/received_events",
         "repos_url" : "https://api.github.com/users/fanquake/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fanquake/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fanquake"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> My understanding is that it is safe to use thread_local on FreeBSD for variables that do not have a destructor \r\n\r\nSo if we are moving forward with this assumption, what is preventing these kinds of variables being reintroduced (elsewhere) into the codebase? I'd rather `thread_local` be safe to use (in all circumstance) on a platform, or we just not use it. \r\n\r\nThis change feels a bit odd/forced because it's basically opting back into `thread_local`, but only certain usage/uncertain assumptions, and there's nothing to prevent regressions. Putting us into this middle-ground doesn't seem so productive, especially given there's currently no real need.",
      "created_at" : "2024-05-15T05:23:03Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/30095#issuecomment-2111609858",
      "id" : 2111609858,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/30095",
      "node_id" : "IC_kwDOABII58593JwC",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2111609858/reactions"
      },
      "updated_at" : "2024-05-15T05:23:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2111609858",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/863730?v=4",
         "events_url" : "https://api.github.com/users/fanquake/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fanquake/followers",
         "following_url" : "https://api.github.com/users/fanquake/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fanquake/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fanquake",
         "id" : 863730,
         "login" : "fanquake",
         "node_id" : "MDQ6VXNlcjg2MzczMA==",
         "organizations_url" : "https://api.github.com/users/fanquake/orgs",
         "received_events_url" : "https://api.github.com/users/fanquake/received_events",
         "repos_url" : "https://api.github.com/users/fanquake/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fanquake/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fanquake"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Concept ACK as i said here: https://github.com/bitcoin/bitcoin/issues/29952#issuecomment-2091354481\r\n\r\n> I'd rather thread_local be safe to use (in all circumstance) on a platform, or we just not use it.\r\n\r\nSure, that'd be ideal, but handling destructors with TLS is *very hard* and easy to get wrong. It's not something we want to rely on.\r\n\r\nIdeally we'd get rid of thread-local usage completely. But we've considered alternative solutions, and tracking some data until a thread disappears is hard to do also manually. i have a PR somewhere that keeps track of the thread names in a mutex-protected map, but it leaks (as well as is less efficient).\r\n\r\nThis should be the only place we really need is. So i think doing something special is fine here.\r\n\r\nWe should avoid any further TLS usage being introduced. But here it's warranted, imo.",
      "created_at" : "2024-05-15T09:51:16Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/30095#issuecomment-2112065633",
      "id" : 2112065633,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/30095",
      "node_id" : "IC_kwDOABII585945Bh",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2112065633/reactions"
      },
      "updated_at" : "2024-05-15T09:57:36Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2112065633",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/30095#discussion_r1603033599"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/30095"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1603033599"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Adding a comment would make sense. Storing a POD data structure in thread-local data instead of a C++ object that allocates on the heap is simpler and more widely supported. But this may not be obvious to someone coming across this code for the first time (and not aware of the long history here).\r\nPlease also mention that this should be the only use of thread-local data in the program.",
      "commit_id" : "d35ba1b3f16071b8fe9b36398ba15352dbf2a54d",
      "created_at" : "2024-05-16T09:59:45Z",
      "diff_hunk" : "@@ -40,27 +41,31 @@ static void SetThreadName(const char* name)\n // global.\n #if defined(HAVE_THREAD_LOCAL)\n \n-static thread_local std::string g_thread_name;\n-const std::string& util::ThreadGetInternalName() { return g_thread_name; }\n+static thread_local char g_thread_name[128]{'\\0'};",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/30095#discussion_r1603033599",
      "id" : 1603033599,
      "in_reply_to_id" : 1600218912,
      "line" : 50,
      "node_id" : "PRRC_kwDOABII585fjFn_",
      "original_commit_id" : "c5f9afd946efb4eb6b27b2d0316f2f787a9608c7",
      "original_line" : 50,
      "original_position" : 14,
      "original_start_line" : null,
      "path" : "src/util/threadnames.cpp",
      "position" : 20,
      "pull_request_review_id" : 2060241090,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/30095",
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1603033599/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-05-16T10:02:31Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1603033599",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/30095#discussion_r1603675011"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/30095"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1603675011"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Added a comment.",
      "commit_id" : "d35ba1b3f16071b8fe9b36398ba15352dbf2a54d",
      "created_at" : "2024-05-16T16:17:38Z",
      "diff_hunk" : "@@ -40,27 +41,31 @@ static void SetThreadName(const char* name)\n // global.\n #if defined(HAVE_THREAD_LOCAL)\n \n-static thread_local std::string g_thread_name;\n-const std::string& util::ThreadGetInternalName() { return g_thread_name; }\n+static thread_local char g_thread_name[128]{'\\0'};",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/30095#discussion_r1603675011",
      "id" : 1603675011,
      "in_reply_to_id" : 1600218912,
      "line" : 50,
      "node_id" : "PRRC_kwDOABII585fliOD",
      "original_commit_id" : "c5f9afd946efb4eb6b27b2d0316f2f787a9608c7",
      "original_line" : 50,
      "original_position" : 14,
      "original_start_line" : null,
      "path" : "src/util/threadnames.cpp",
      "position" : 20,
      "pull_request_review_id" : 2061290250,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/30095",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1603675011/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-05-16T16:17:38Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1603675011",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "`c5f9afd946...d35ba1b3f1`: add a comment as suggested above",
      "created_at" : "2024-05-16T16:17:56Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/30095#issuecomment-2115666825",
      "id" : 2115666825,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/30095",
      "node_id" : "IC_kwDOABII585-GoOJ",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2115666825/reactions"
      },
      "updated_at" : "2024-05-16T16:17:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2115666825",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/30095#discussion_r1605655974"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/30095"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1605655974"
         }
      },
      "author_association" : "MEMBER",
      "body" : "If we are outlawing thread_local usage, then at the same time, this commit should remove other comments from our codebase suggesting further thread_local usage. i.e [ * If thread-safety is needed, the global could be made thread_local (given](https://github.com/bitcoin/bitcoin/blob/058af75874ffa2b4064e3d6d30cc50f0ec754ba8/src/test/util/random.h#L17)",
      "commit_id" : "d35ba1b3f16071b8fe9b36398ba15352dbf2a54d",
      "created_at" : "2024-05-18T02:17:31Z",
      "diff_hunk" : "@@ -40,27 +41,37 @@ static void SetThreadName(const char* name)\n // global.\n #if defined(HAVE_THREAD_LOCAL)\n \n-static thread_local std::string g_thread_name;\n-const std::string& util::ThreadGetInternalName() { return g_thread_name; }\n+/**\n+ * The name of the thread. We use char array instead of std::string to avoid\n+ * complications with running a destructor when the thread exits. Avoid adding\n+ * other thread_local variables.",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/30095#discussion_r1605655974",
      "id" : 1605655974,
      "line" : 47,
      "node_id" : "PRRC_kwDOABII585ftF2m",
      "original_commit_id" : "d35ba1b3f16071b8fe9b36398ba15352dbf2a54d",
      "original_line" : 47,
      "original_position" : 17,
      "original_start_line" : null,
      "path" : "src/util/threadnames.cpp",
      "position" : 17,
      "pull_request_review_id" : 2064592660,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/30095",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1605655974/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-05-18T02:17:31Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1605655974",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/863730?v=4",
         "events_url" : "https://api.github.com/users/fanquake/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fanquake/followers",
         "following_url" : "https://api.github.com/users/fanquake/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fanquake/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fanquake",
         "id" : 863730,
         "login" : "fanquake",
         "node_id" : "MDQ6VXNlcjg2MzczMA==",
         "organizations_url" : "https://api.github.com/users/fanquake/orgs",
         "received_events_url" : "https://api.github.com/users/fanquake/received_events",
         "repos_url" : "https://api.github.com/users/fanquake/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fanquake/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fanquake"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/30095#discussion_r1605695254"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/30095"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1605695254"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Agree! i mean in a hypothetical future (say, C++30) when every compiler and OS finally implements thread-local storage correctly including destructors, it could be reconsidered, but i think a \"no-thread-local\" policy makes sense until then.\r\n\r\nTBH in general i don't really like comments that suggest TODOs. It's better to keep track of those things in issues where discussion and context is visible.",
      "commit_id" : "d35ba1b3f16071b8fe9b36398ba15352dbf2a54d",
      "created_at" : "2024-05-18T07:40:52Z",
      "diff_hunk" : "@@ -40,27 +41,37 @@ static void SetThreadName(const char* name)\n // global.\n #if defined(HAVE_THREAD_LOCAL)\n \n-static thread_local std::string g_thread_name;\n-const std::string& util::ThreadGetInternalName() { return g_thread_name; }\n+/**\n+ * The name of the thread. We use char array instead of std::string to avoid\n+ * complications with running a destructor when the thread exits. Avoid adding\n+ * other thread_local variables.",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/30095#discussion_r1605695254",
      "id" : 1605695254,
      "in_reply_to_id" : 1605655974,
      "line" : 47,
      "node_id" : "PRRC_kwDOABII585ftPcW",
      "original_commit_id" : "d35ba1b3f16071b8fe9b36398ba15352dbf2a54d",
      "original_line" : 47,
      "original_position" : 17,
      "original_start_line" : null,
      "path" : "src/util/threadnames.cpp",
      "position" : 17,
      "pull_request_review_id" : 2064632827,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/30095",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1605695254/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-05-18T07:40:52Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1605695254",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Code review ACK d35ba1b3f16071b8fe9b36398ba15352dbf2a54d",
      "created_at" : "2024-05-18T07:43:37Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/30095#issuecomment-2118681020",
      "id" : 2118681020,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/30095",
      "node_id" : "IC_kwDOABII585-SIG8",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2118681020/reactions"
      },
      "updated_at" : "2024-05-18T07:43:37Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2118681020",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/30095#discussion_r1607953823"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/30095"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1607953823"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I'm going to do this in #30137.",
      "commit_id" : "d35ba1b3f16071b8fe9b36398ba15352dbf2a54d",
      "created_at" : "2024-05-21T09:19:47Z",
      "diff_hunk" : "@@ -40,27 +41,37 @@ static void SetThreadName(const char* name)\n // global.\n #if defined(HAVE_THREAD_LOCAL)\n \n-static thread_local std::string g_thread_name;\n-const std::string& util::ThreadGetInternalName() { return g_thread_name; }\n+/**\n+ * The name of the thread. We use char array instead of std::string to avoid\n+ * complications with running a destructor when the thread exits. Avoid adding\n+ * other thread_local variables.",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/30095#discussion_r1607953823",
      "id" : 1607953823,
      "in_reply_to_id" : 1605655974,
      "line" : 47,
      "node_id" : "PRRC_kwDOABII585f122f",
      "original_commit_id" : "d35ba1b3f16071b8fe9b36398ba15352dbf2a54d",
      "original_line" : 47,
      "original_position" : 17,
      "original_start_line" : null,
      "path" : "src/util/threadnames.cpp",
      "position" : 17,
      "pull_request_review_id" : 2068040203,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/30095",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1607953823/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-05-21T09:19:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1607953823",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/863730?v=4",
         "events_url" : "https://api.github.com/users/fanquake/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fanquake/followers",
         "following_url" : "https://api.github.com/users/fanquake/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fanquake/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fanquake",
         "id" : 863730,
         "login" : "fanquake",
         "node_id" : "MDQ6VXNlcjg2MzczMA==",
         "organizations_url" : "https://api.github.com/users/fanquake/orgs",
         "received_events_url" : "https://api.github.com/users/fanquake/received_events",
         "repos_url" : "https://api.github.com/users/fanquake/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fanquake/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fanquake"
      }
   }
]
