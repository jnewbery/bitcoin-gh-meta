[
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage\nFor detailed information about the code coverage, see the [test coverage report](https://corecheck.dev/bitcoin/bitcoin/pulls/30072).\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| ACK | [glozow](https://github.com/bitcoin/bitcoin/pull/30072#issuecomment-2127548244) |\n| Stale ACK | [sdaftuar](https://github.com/bitcoin/bitcoin/pull/30072#issuecomment-2127160378), [ismaelsadeeq](https://github.com/bitcoin/bitcoin/pull/30072#pullrequestreview-2074136766), [theStack](https://github.com/bitcoin/bitcoin/pull/30072#pullrequestreview-2074156905) |\n\nIf your review is incorrectly listed, please react with ð to this comment and the bot will ignore it on the next update.\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#29873](https://github.com/bitcoin/bitcoin/pull/29873) (policy: restrict all TRUC (v3) transactions to 10kvB by glozow)\n* [#29680](https://github.com/bitcoin/bitcoin/pull/29680) (wallet: fix unrelated parent conflict doesn't cause child tx to be marked as conflict by Eunovo)\n* [#28984](https://github.com/bitcoin/bitcoin/pull/28984) (Cluster size 2 package rbf by instagibbs)\n* [#26593](https://github.com/bitcoin/bitcoin/pull/26593) (tracing: Only prepare tracepoint arguments when actually tracing by 0xB10C)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.\n",
      "created_at" : "2024-05-09T13:58:22Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/30072#issuecomment-2102717140",
      "id" : 2102717140,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/30072",
      "node_id" : "IC_kwDOABII5859VOrU",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2102717140/reactions"
      },
      "updated_at" : "2024-05-23T16:14:58Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2102717140",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "suggested by @glozow , can close if this ends up not being helpful",
      "created_at" : "2024-05-09T13:58:36Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/30072#issuecomment-2102717549",
      "id" : 2102717549,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/30072",
      "node_id" : "IC_kwDOABII5859VOxt",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2102717549/reactions"
      },
      "updated_at" : "2024-05-09T13:58:36Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2102717549",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5767891?v=4",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "node_id" : "MDQ6VXNlcjU3Njc4OTE=",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/30072#discussion_r1595521008"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/30072"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1595521008"
         }
      },
      "author_association" : "MEMBER",
      "body" : "```suggestion\r\n    CAmount m_total_modified_fees{0};\r\n    /** Aggregated virtual size of all transactions, used to calculate package feerate. */\r\n    int64_t m_total_vsize{0};\r\n```",
      "commit_id" : "ff7c71f210573bd94d365c03d766092119c38fc4",
      "created_at" : "2024-05-09T14:21:50Z",
      "diff_hunk" : "@@ -708,9 +706,42 @@ class MemPoolAccept\n \n     Chainstate& m_active_chainstate;\n \n+    // Fields below are per *sub*package state and must be reset prior to subsequent\n+    // AcceptSingleTransaction and AcceptMultipleTransactions invocations\n+\n+    /** Aggregated modified fees of all transactions, used to calculate package feerate. */\n+    CAmount m_total_modified_fees;\n+    /** Aggregated virtual size of all transactions, used to calculate package feerate. */\n+    int64_t m_total_vsize;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/30072#discussion_r1595521008",
      "id" : 1595521008,
      "line" : 715,
      "node_id" : "PRRC_kwDOABII585fGbfw",
      "original_commit_id" : "ff7c71f210573bd94d365c03d766092119c38fc4",
      "original_line" : 715,
      "original_position" : 102,
      "original_start_line" : 713,
      "path" : "src/validation.cpp",
      "position" : 102,
      "pull_request_review_id" : 2048080004,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/30072",
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1595521008/reactions"
      },
      "side" : "RIGHT",
      "start_line" : 713,
      "start_side" : "RIGHT",
      "subject_type" : "line",
      "updated_at" : "2024-05-09T15:57:20Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1595521008",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/25183001?v=4",
         "events_url" : "https://api.github.com/users/glozow/events{/privacy}",
         "followers_url" : "https://api.github.com/users/glozow/followers",
         "following_url" : "https://api.github.com/users/glozow/following{/other_user}",
         "gists_url" : "https://api.github.com/users/glozow/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/glozow",
         "id" : 25183001,
         "login" : "glozow",
         "node_id" : "MDQ6VXNlcjI1MTgzMDAx",
         "organizations_url" : "https://api.github.com/users/glozow/orgs",
         "received_events_url" : "https://api.github.com/users/glozow/received_events",
         "repos_url" : "https://api.github.com/users/glozow/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/glozow/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/glozow/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/glozow"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/30072#discussion_r1595524133"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/30072"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1595524133"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Worth commenting that even though clearing happens in `ClearSubPackageState`, this is cleared so that we don't process the vector over and over again for each tx in the package.\r\n\r\nfwiw here's a test for it, doing an RBF (but not package RBF) within package eval: https://github.com/glozow/bitcoin/blob/2024-05-review-30072/src/test/txpackage_tests.cpp#L940-L996",
      "commit_id" : "ff7c71f210573bd94d365c03d766092119c38fc4",
      "created_at" : "2024-05-09T14:24:16Z",
      "diff_hunk" : "@@ -1179,9 +1217,10 @@ bool MemPoolAccept::Finalize(const ATMPArgs& args, Workspace& ws)\n                 entry->GetTxSize(),\n                 entry->GetFee()\n         );\n-        ws.m_replaced_transactions.push_back(it->GetSharedTx());\n+        m_replaced_transactions.push_back(it->GetSharedTx());\n     }\n-    m_pool.RemoveStaged(ws.m_all_conflicting, false, MemPoolRemovalReason::REPLACED);\n+    m_pool.RemoveStaged(m_all_conflicts, false, MemPoolRemovalReason::REPLACED);\n+    m_all_conflicts.clear();",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/30072#discussion_r1595524133",
      "id" : 1595524133,
      "line" : 1223,
      "node_id" : "PRRC_kwDOABII585fGcQl",
      "original_commit_id" : "ff7c71f210573bd94d365c03d766092119c38fc4",
      "original_line" : 1223,
      "original_position" : 249,
      "original_start_line" : null,
      "path" : "src/validation.cpp",
      "position" : 249,
      "pull_request_review_id" : 2048080004,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/30072",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1595524133/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-05-09T15:57:20Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1595524133",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/25183001?v=4",
         "events_url" : "https://api.github.com/users/glozow/events{/privacy}",
         "followers_url" : "https://api.github.com/users/glozow/followers",
         "following_url" : "https://api.github.com/users/glozow/following{/other_user}",
         "gists_url" : "https://api.github.com/users/glozow/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/glozow",
         "id" : 25183001,
         "login" : "glozow",
         "node_id" : "MDQ6VXNlcjI1MTgzMDAx",
         "organizations_url" : "https://api.github.com/users/glozow/orgs",
         "received_events_url" : "https://api.github.com/users/glozow/received_events",
         "repos_url" : "https://api.github.com/users/glozow/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/glozow/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/glozow/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/glozow"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/30072#discussion_r1595529719"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/30072"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1595529719"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Don't think the other transactions help\r\n```suggestion\r\n        # ...or if it's submitted with other transactions\r\n```",
      "commit_id" : "ff7c71f210573bd94d365c03d766092119c38fc4",
      "created_at" : "2024-05-09T14:28:21Z",
      "diff_hunk" : "@@ -55,14 +55,23 @@ def run_test(self):\n         assert_raises_rpc_error(-26, \"too-long-mempool-chain, too many descendants\", self.chain_tx, [chain[0], second_chain])\n         # ...especially if its > 40k weight\n         assert_raises_rpc_error(-26, \"too-long-mempool-chain, too many descendants\", self.chain_tx, [chain[0]], num_outputs=350)\n+        # ...even if it's submitted with other transactions",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/30072#discussion_r1595529719",
      "id" : 1595529719,
      "line" : 58,
      "node_id" : "PRRC_kwDOABII585fGdn3",
      "original_commit_id" : "ff7c71f210573bd94d365c03d766092119c38fc4",
      "original_line" : 58,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "test/functional/mempool_package_onemore.py",
      "position" : 4,
      "pull_request_review_id" : 2048080004,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/30072",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1595529719/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-05-09T15:57:20Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1595529719",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/25183001?v=4",
         "events_url" : "https://api.github.com/users/glozow/events{/privacy}",
         "followers_url" : "https://api.github.com/users/glozow/followers",
         "following_url" : "https://api.github.com/users/glozow/following{/other_user}",
         "gists_url" : "https://api.github.com/users/glozow/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/glozow",
         "id" : 25183001,
         "login" : "glozow",
         "node_id" : "MDQ6VXNlcjI1MTgzMDAx",
         "organizations_url" : "https://api.github.com/users/glozow/orgs",
         "received_events_url" : "https://api.github.com/users/glozow/received_events",
         "repos_url" : "https://api.github.com/users/glozow/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/glozow/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/glozow/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/glozow"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/30072#discussion_r1595684897"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/30072"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1595684897"
         }
      },
      "author_association" : "MEMBER",
      "body" : "done",
      "commit_id" : "6a39183b53a41bb282ebf8373d0e11691d97d365",
      "created_at" : "2024-05-09T16:24:15Z",
      "diff_hunk" : "@@ -708,9 +706,42 @@ class MemPoolAccept\n \n     Chainstate& m_active_chainstate;\n \n+    // Fields below are per *sub*package state and must be reset prior to subsequent\n+    // AcceptSingleTransaction and AcceptMultipleTransactions invocations\n+\n+    /** Aggregated modified fees of all transactions, used to calculate package feerate. */\n+    CAmount m_total_modified_fees;\n+    /** Aggregated virtual size of all transactions, used to calculate package feerate. */\n+    int64_t m_total_vsize;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/30072#discussion_r1595684897",
      "id" : 1595684897,
      "in_reply_to_id" : 1595521008,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585fHDgh",
      "original_commit_id" : "ff7c71f210573bd94d365c03d766092119c38fc4",
      "original_line" : 715,
      "original_position" : 102,
      "original_start_line" : 713,
      "path" : "src/validation.cpp",
      "position" : null,
      "pull_request_review_id" : 2048348120,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/30072",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1595684897/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : "RIGHT",
      "subject_type" : "line",
      "updated_at" : "2024-05-09T16:24:15Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1595684897",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5767891?v=4",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "node_id" : "MDQ6VXNlcjU3Njc4OTE=",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/30072#discussion_r1595685042"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/30072"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1595685042"
         }
      },
      "author_association" : "MEMBER",
      "body" : "added comment",
      "commit_id" : "6a39183b53a41bb282ebf8373d0e11691d97d365",
      "created_at" : "2024-05-09T16:24:22Z",
      "diff_hunk" : "@@ -1179,9 +1217,10 @@ bool MemPoolAccept::Finalize(const ATMPArgs& args, Workspace& ws)\n                 entry->GetTxSize(),\n                 entry->GetFee()\n         );\n-        ws.m_replaced_transactions.push_back(it->GetSharedTx());\n+        m_replaced_transactions.push_back(it->GetSharedTx());\n     }\n-    m_pool.RemoveStaged(ws.m_all_conflicting, false, MemPoolRemovalReason::REPLACED);\n+    m_pool.RemoveStaged(m_all_conflicts, false, MemPoolRemovalReason::REPLACED);\n+    m_all_conflicts.clear();",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/30072#discussion_r1595685042",
      "id" : 1595685042,
      "in_reply_to_id" : 1595524133,
      "line" : 1225,
      "node_id" : "PRRC_kwDOABII585fHDiy",
      "original_commit_id" : "ff7c71f210573bd94d365c03d766092119c38fc4",
      "original_line" : 1225,
      "original_position" : 249,
      "original_start_line" : null,
      "path" : "src/validation.cpp",
      "position" : 251,
      "pull_request_review_id" : 2048348337,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/30072",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1595685042/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-05-09T16:24:23Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1595685042",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5767891?v=4",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "node_id" : "MDQ6VXNlcjU3Njc4OTE=",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/30072#discussion_r1595685102"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/30072"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1595685102"
         }
      },
      "author_association" : "MEMBER",
      "body" : "done",
      "commit_id" : "6a39183b53a41bb282ebf8373d0e11691d97d365",
      "created_at" : "2024-05-09T16:24:26Z",
      "diff_hunk" : "@@ -55,14 +55,23 @@ def run_test(self):\n         assert_raises_rpc_error(-26, \"too-long-mempool-chain, too many descendants\", self.chain_tx, [chain[0], second_chain])\n         # ...especially if its > 40k weight\n         assert_raises_rpc_error(-26, \"too-long-mempool-chain, too many descendants\", self.chain_tx, [chain[0]], num_outputs=350)\n+        # ...even if it's submitted with other transactions",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/30072#discussion_r1595685102",
      "id" : 1595685102,
      "in_reply_to_id" : 1595529719,
      "line" : 58,
      "node_id" : "PRRC_kwDOABII585fHDju",
      "original_commit_id" : "ff7c71f210573bd94d365c03d766092119c38fc4",
      "original_line" : 58,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "test/functional/mempool_package_onemore.py",
      "position" : 12,
      "pull_request_review_id" : 2048348434,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/30072",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1595685102/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-05-09T16:24:26Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1595685102",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5767891?v=4",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "node_id" : "MDQ6VXNlcjU3Njc4OTE=",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/30072#discussion_r1595701850"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/30072"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1595701850"
         }
      },
      "author_association" : "MEMBER",
      "body" : "fwiw that test is a single tx rbf, so even without this line it should pass. With package RBF it might result in multiple `RemoveStaged` calls on same conflicts, though I'm unsure what exactly that would do.\r\n\r\nedit: I suppose it would result in every tx in subpackage reporting the whole set of `m_all_conflicts` during package rbf multiple times",
      "commit_id" : "6a39183b53a41bb282ebf8373d0e11691d97d365",
      "created_at" : "2024-05-09T16:39:35Z",
      "diff_hunk" : "@@ -1179,9 +1217,10 @@ bool MemPoolAccept::Finalize(const ATMPArgs& args, Workspace& ws)\n                 entry->GetTxSize(),\n                 entry->GetFee()\n         );\n-        ws.m_replaced_transactions.push_back(it->GetSharedTx());\n+        m_replaced_transactions.push_back(it->GetSharedTx());\n     }\n-    m_pool.RemoveStaged(ws.m_all_conflicting, false, MemPoolRemovalReason::REPLACED);\n+    m_pool.RemoveStaged(m_all_conflicts, false, MemPoolRemovalReason::REPLACED);\n+    m_all_conflicts.clear();",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/30072#discussion_r1595701850",
      "id" : 1595701850,
      "in_reply_to_id" : 1595524133,
      "line" : 1225,
      "node_id" : "PRRC_kwDOABII585fHHpa",
      "original_commit_id" : "ff7c71f210573bd94d365c03d766092119c38fc4",
      "original_line" : 1225,
      "original_position" : 249,
      "original_start_line" : null,
      "path" : "src/validation.cpp",
      "position" : 251,
      "pull_request_review_id" : 2048375125,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/30072",
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1595701850/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-05-09T16:46:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1595701850",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5767891?v=4",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "node_id" : "MDQ6VXNlcjU3Njc4OTE=",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/30072#discussion_r1595707676"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/30072"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1595707676"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Oh yes I was confused. Then I wonder why this is needed...?",
      "commit_id" : "6a39183b53a41bb282ebf8373d0e11691d97d365",
      "created_at" : "2024-05-09T16:45:04Z",
      "diff_hunk" : "@@ -1179,9 +1217,10 @@ bool MemPoolAccept::Finalize(const ATMPArgs& args, Workspace& ws)\n                 entry->GetTxSize(),\n                 entry->GetFee()\n         );\n-        ws.m_replaced_transactions.push_back(it->GetSharedTx());\n+        m_replaced_transactions.push_back(it->GetSharedTx());\n     }\n-    m_pool.RemoveStaged(ws.m_all_conflicting, false, MemPoolRemovalReason::REPLACED);\n+    m_pool.RemoveStaged(m_all_conflicts, false, MemPoolRemovalReason::REPLACED);\n+    m_all_conflicts.clear();",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/30072#discussion_r1595707676",
      "id" : 1595707676,
      "in_reply_to_id" : 1595524133,
      "line" : 1225,
      "node_id" : "PRRC_kwDOABII585fHJEc",
      "original_commit_id" : "ff7c71f210573bd94d365c03d766092119c38fc4",
      "original_line" : 1225,
      "original_position" : 249,
      "original_start_line" : null,
      "path" : "src/validation.cpp",
      "position" : 251,
      "pull_request_review_id" : 2048384427,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/30072",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1595707676/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-05-09T16:45:04Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1595707676",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/25183001?v=4",
         "events_url" : "https://api.github.com/users/glozow/events{/privacy}",
         "followers_url" : "https://api.github.com/users/glozow/followers",
         "following_url" : "https://api.github.com/users/glozow/following{/other_user}",
         "gists_url" : "https://api.github.com/users/glozow/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/glozow",
         "id" : 25183001,
         "login" : "glozow",
         "node_id" : "MDQ6VXNlcjI1MTgzMDAx",
         "organizations_url" : "https://api.github.com/users/glozow/orgs",
         "received_events_url" : "https://api.github.com/users/glozow/received_events",
         "repos_url" : "https://api.github.com/users/glozow/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/glozow/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/glozow/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/glozow"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/30072#discussion_r1595720234"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/30072"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1595720234"
         }
      },
      "author_association" : "MEMBER",
      "body" : "In package RBF contexts, the 2nd time `Finalize()` is called in a subpackage, the child tx, it will try and enumerate the `m_all_conflicts` list again, but those transactions were already removed, so we would crash. ",
      "commit_id" : "6a39183b53a41bb282ebf8373d0e11691d97d365",
      "created_at" : "2024-05-09T16:56:17Z",
      "diff_hunk" : "@@ -1179,9 +1217,10 @@ bool MemPoolAccept::Finalize(const ATMPArgs& args, Workspace& ws)\n                 entry->GetTxSize(),\n                 entry->GetFee()\n         );\n-        ws.m_replaced_transactions.push_back(it->GetSharedTx());\n+        m_replaced_transactions.push_back(it->GetSharedTx());\n     }\n-    m_pool.RemoveStaged(ws.m_all_conflicting, false, MemPoolRemovalReason::REPLACED);\n+    m_pool.RemoveStaged(m_all_conflicts, false, MemPoolRemovalReason::REPLACED);\n+    m_all_conflicts.clear();",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/30072#discussion_r1595720234",
      "id" : 1595720234,
      "in_reply_to_id" : 1595524133,
      "line" : 1225,
      "node_id" : "PRRC_kwDOABII585fHMIq",
      "original_commit_id" : "ff7c71f210573bd94d365c03d766092119c38fc4",
      "original_line" : 1225,
      "original_position" : 249,
      "original_start_line" : null,
      "path" : "src/validation.cpp",
      "position" : 251,
      "pull_request_review_id" : 2048404192,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/30072",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1595720234/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-05-09T16:56:17Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1595720234",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5767891?v=4",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "node_id" : "MDQ6VXNlcjU3Njc4OTE=",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/30072#discussion_r1595723053"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/30072"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1595723053"
         }
      },
      "author_association" : "MEMBER",
      "body" : "elaborated on the comment a bit more",
      "commit_id" : "6a39183b53a41bb282ebf8373d0e11691d97d365",
      "created_at" : "2024-05-09T16:58:59Z",
      "diff_hunk" : "@@ -1179,9 +1217,10 @@ bool MemPoolAccept::Finalize(const ATMPArgs& args, Workspace& ws)\n                 entry->GetTxSize(),\n                 entry->GetFee()\n         );\n-        ws.m_replaced_transactions.push_back(it->GetSharedTx());\n+        m_replaced_transactions.push_back(it->GetSharedTx());\n     }\n-    m_pool.RemoveStaged(ws.m_all_conflicting, false, MemPoolRemovalReason::REPLACED);\n+    m_pool.RemoveStaged(m_all_conflicts, false, MemPoolRemovalReason::REPLACED);\n+    m_all_conflicts.clear();",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/30072#discussion_r1595723053",
      "id" : 1595723053,
      "in_reply_to_id" : 1595524133,
      "line" : 1225,
      "node_id" : "PRRC_kwDOABII585fHM0t",
      "original_commit_id" : "ff7c71f210573bd94d365c03d766092119c38fc4",
      "original_line" : 1225,
      "original_position" : 249,
      "original_start_line" : null,
      "path" : "src/validation.cpp",
      "position" : 251,
      "pull_request_review_id" : 2048409624,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/30072",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1595723053/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-05-09T16:59:00Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1595723053",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5767891?v=4",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "node_id" : "MDQ6VXNlcjU3Njc4OTE=",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/30072#discussion_r1596704440"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/30072"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1596704440"
         }
      },
      "author_association" : "MEMBER",
      "body" : "nitty nit (nonblocking)\r\n```suggestion\r\n    // Don't attempt to process the same conflicts repeatedly during subpackage evaluation:\r\n```",
      "commit_id" : "6a39183b53a41bb282ebf8373d0e11691d97d365",
      "created_at" : "2024-05-10T12:41:05Z",
      "diff_hunk" : "@@ -1179,9 +1217,12 @@ bool MemPoolAccept::Finalize(const ATMPArgs& args, Workspace& ws)\n                 entry->GetTxSize(),\n                 entry->GetFee()\n         );\n-        ws.m_replaced_transactions.push_back(it->GetSharedTx());\n+        m_replaced_transactions.push_back(it->GetSharedTx());\n     }\n-    m_pool.RemoveStaged(ws.m_all_conflicting, false, MemPoolRemovalReason::REPLACED);\n+    m_pool.RemoveStaged(m_all_conflicts, false, MemPoolRemovalReason::REPLACED);\n+    // Don't attempt process same conflicts repeatedly during subpackage evaluation:",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/30072#discussion_r1596704440",
      "id" : 1596704440,
      "line" : 1223,
      "node_id" : "PRRC_kwDOABII585fK8a4",
      "original_commit_id" : "6a39183b53a41bb282ebf8373d0e11691d97d365",
      "original_line" : 1223,
      "original_position" : 249,
      "original_start_line" : null,
      "path" : "src/validation.cpp",
      "position" : 249,
      "pull_request_review_id" : 2049995289,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/30072",
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1596704440/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-05-10T12:41:43Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1596704440",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/25183001?v=4",
         "events_url" : "https://api.github.com/users/glozow/events{/privacy}",
         "followers_url" : "https://api.github.com/users/glozow/followers",
         "following_url" : "https://api.github.com/users/glozow/following{/other_user}",
         "gists_url" : "https://api.github.com/users/glozow/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/glozow",
         "id" : 25183001,
         "login" : "glozow",
         "node_id" : "MDQ6VXNlcjI1MTgzMDAx",
         "organizations_url" : "https://api.github.com/users/glozow/orgs",
         "received_events_url" : "https://api.github.com/users/glozow/received_events",
         "repos_url" : "https://api.github.com/users/glozow/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/glozow/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/glozow/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/glozow"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/30072#discussion_r1596780968"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/30072"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1596780968"
         }
      },
      "author_association" : "MEMBER",
      "body" : "will fix if touching again",
      "commit_id" : "6a39183b53a41bb282ebf8373d0e11691d97d365",
      "created_at" : "2024-05-10T13:51:01Z",
      "diff_hunk" : "@@ -1179,9 +1217,12 @@ bool MemPoolAccept::Finalize(const ATMPArgs& args, Workspace& ws)\n                 entry->GetTxSize(),\n                 entry->GetFee()\n         );\n-        ws.m_replaced_transactions.push_back(it->GetSharedTx());\n+        m_replaced_transactions.push_back(it->GetSharedTx());\n     }\n-    m_pool.RemoveStaged(ws.m_all_conflicting, false, MemPoolRemovalReason::REPLACED);\n+    m_pool.RemoveStaged(m_all_conflicts, false, MemPoolRemovalReason::REPLACED);\n+    // Don't attempt process same conflicts repeatedly during subpackage evaluation:",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/30072#discussion_r1596780968",
      "id" : 1596780968,
      "in_reply_to_id" : 1596704440,
      "line" : 1223,
      "node_id" : "PRRC_kwDOABII585fLPGo",
      "original_commit_id" : "6a39183b53a41bb282ebf8373d0e11691d97d365",
      "original_line" : 1223,
      "original_position" : 249,
      "original_start_line" : null,
      "path" : "src/validation.cpp",
      "position" : 249,
      "pull_request_review_id" : 2050123194,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/30072",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1596780968/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-05-10T13:51:01Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1596780968",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5767891?v=4",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "node_id" : "MDQ6VXNlcjU3Njc4OTE=",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->\nð This pull request conflicts with the target branch and [needs rebase](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#rebasing-changes).\n",
      "created_at" : "2024-05-15T01:24:38Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/30072#issuecomment-2111414789",
      "id" : 2111414789,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/30072",
      "node_id" : "IC_kwDOABII58592aIF",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2111414789/reactions"
      },
      "updated_at" : "2024-05-15T01:24:38Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2111414789",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "rebased due to merge conflict",
      "created_at" : "2024-05-15T12:04:50Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/30072#issuecomment-2112349111",
      "id" : 2112349111,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/30072",
      "node_id" : "IC_kwDOABII58595-O3",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2112349111/reactions"
      },
      "updated_at" : "2024-05-15T12:04:50Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2112349111",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5767891?v=4",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "node_id" : "MDQ6VXNlcjU3Njc4OTE=",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "reACK 186a00e644 via range-diff",
      "created_at" : "2024-05-15T12:47:51Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/30072#issuecomment-2112430969",
      "id" : 2112430969,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/30072",
      "node_id" : "IC_kwDOABII58596SN5",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2112430969/reactions"
      },
      "updated_at" : "2024-05-15T12:47:51Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2112430969",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/25183001?v=4",
         "events_url" : "https://api.github.com/users/glozow/events{/privacy}",
         "followers_url" : "https://api.github.com/users/glozow/followers",
         "following_url" : "https://api.github.com/users/glozow/following{/other_user}",
         "gists_url" : "https://api.github.com/users/glozow/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/glozow",
         "id" : 25183001,
         "login" : "glozow",
         "node_id" : "MDQ6VXNlcjI1MTgzMDAx",
         "organizations_url" : "https://api.github.com/users/glozow/orgs",
         "received_events_url" : "https://api.github.com/users/glozow/received_events",
         "repos_url" : "https://api.github.com/users/glozow/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/glozow/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/glozow/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/glozow"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "re-ACK 186a00e64490bb5b7b3c544346ae047ad1a66696",
      "created_at" : "2024-05-15T17:18:28Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/30072#issuecomment-2113066401",
      "id" : 2113066401,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/30072",
      "node_id" : "IC_kwDOABII58598tWh",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2113066401/reactions"
      },
      "updated_at" : "2024-05-15T17:18:28Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2113066401",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/48946461?v=4",
         "events_url" : "https://api.github.com/users/ismaelsadeeq/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ismaelsadeeq/followers",
         "following_url" : "https://api.github.com/users/ismaelsadeeq/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ismaelsadeeq/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ismaelsadeeq",
         "id" : 48946461,
         "login" : "ismaelsadeeq",
         "node_id" : "MDQ6VXNlcjQ4OTQ2NDYx",
         "organizations_url" : "https://api.github.com/users/ismaelsadeeq/orgs",
         "received_events_url" : "https://api.github.com/users/ismaelsadeeq/received_events",
         "repos_url" : "https://api.github.com/users/ismaelsadeeq/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ismaelsadeeq/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ismaelsadeeq/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ismaelsadeeq"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/30072#discussion_r1603902055"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/30072"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1603902055"
         }
      },
      "author_association" : "MEMBER",
      "body" : "`m_package_feerates` is experiencing mission creep here. Really this is asking \"was I called in AcceptSingleTransaction\"?\r\n\r\nShould we bikeshed this to make it clearer @glozow ?",
      "commit_id" : "186a00e64490bb5b7b3c544346ae047ad1a66696",
      "created_at" : "2024-05-16T19:01:32Z",
      "diff_hunk" : "@@ -996,7 +996,7 @@ bool MemPoolAccept::PreChecks(ATMPArgs& args, Workspace& ws)\n     // already calculated.\n     if (const auto err{SingleV3Checks(ws.m_ptx, ws.m_ancestors, ws.m_conflicts, ws.m_vsize)}) {\n         // Disabled within package validation.\n-        if (err->second != nullptr && args.m_allow_replacement) {\n+        if (err->second != nullptr && args.m_allow_replacement && !args.m_package_feerates) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/30072#discussion_r1603902055",
      "id" : 1603902055,
      "line" : 1021,
      "node_id" : "PRRC_kwDOABII585fmZpn",
      "original_commit_id" : "9eb9c030a0a335b424575e60e44806476c32e684",
      "original_line" : 999,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "src/validation.cpp",
      "position" : 171,
      "pull_request_review_id" : 2061658269,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/30072",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1603902055/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-05-16T19:01:32Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1603902055",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5767891?v=4",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "node_id" : "MDQ6VXNlcjU3Njc4OTE=",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/30072#discussion_r1603916879"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/30072"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1603916879"
         }
      },
      "author_association" : "MEMBER",
      "body" : "In 90b60a16731ac756dce44c29f57d111f4dffba75\r\n\r\nnit (not-blocking):\r\n\r\n```suggestion\r\n        /** Whether CPFP and RBF carveouts are granted. */\r\n```",
      "commit_id" : "2fd34ba504957331f5a08614b6e1f8317260f04d",
      "created_at" : "2024-05-16T19:12:36Z",
      "diff_hunk" : "@@ -476,6 +476,9 @@ class MemPoolAccept\n          */\n         const std::optional<CFeeRate> m_client_maxfeerate;\n \n+        /** Whether CPFP carveout and RBF carveout are granted. */",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/30072#discussion_r1603916879",
      "id" : 1603916879,
      "line" : 481,
      "node_id" : "PRRC_kwDOABII585fmdRP",
      "original_commit_id" : "90b60a16731ac756dce44c29f57d111f4dffba75",
      "original_line" : 481,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "src/validation.cpp",
      "position" : 20,
      "pull_request_review_id" : 2061682943,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/30072",
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1603916879/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-05-23T18:36:55Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1603916879",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6665628?v=4",
         "events_url" : "https://api.github.com/users/sr-gi/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sr-gi/followers",
         "following_url" : "https://api.github.com/users/sr-gi/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sr-gi/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sr-gi",
         "id" : 6665628,
         "login" : "sr-gi",
         "node_id" : "MDQ6VXNlcjY2NjU2Mjg=",
         "organizations_url" : "https://api.github.com/users/sr-gi/orgs",
         "received_events_url" : "https://api.github.com/users/sr-gi/received_events",
         "repos_url" : "https://api.github.com/users/sr-gi/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sr-gi/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sr-gi/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sr-gi"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/30072#discussion_r1603924191"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/30072"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1603924191"
         }
      },
      "author_association" : "MEMBER",
      "body" : "In 90b60a16731ac756dce44c29f57d111f4dffba75\r\n\r\nI think this comment is not accurate (it was not all that accurate before that PR either). At this point, `CalculateMemPoolAncestors` has only been called once. The only case in which this caching applies is in the last else case of this context. I think this should be reworded",
      "commit_id" : "2fd34ba504957331f5a08614b6e1f8317260f04d",
      "created_at" : "2024-05-16T19:20:14Z",
      "diff_hunk" : "@@ -948,6 +957,13 @@ bool MemPoolAccept::PreChecks(ATMPArgs& args, Workspace& ws)\n         ws.m_ancestors = std::move(*ancestors);\n     } else {\n         // If CalculateMemPoolAncestors fails second time, we want the original error string.",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/30072#discussion_r1603924191",
      "id" : 1603924191,
      "line" : 994,
      "node_id" : "PRRC_kwDOABII585fmfDf",
      "original_commit_id" : "90b60a16731ac756dce44c29f57d111f4dffba75",
      "original_line" : 994,
      "original_position" : 74,
      "original_start_line" : null,
      "path" : "src/validation.cpp",
      "position" : 193,
      "pull_request_review_id" : 2061682943,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/30072",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1603924191/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-05-23T18:36:55Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1603924191",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6665628?v=4",
         "events_url" : "https://api.github.com/users/sr-gi/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sr-gi/followers",
         "following_url" : "https://api.github.com/users/sr-gi/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sr-gi/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sr-gi",
         "id" : 6665628,
         "login" : "sr-gi",
         "node_id" : "MDQ6VXNlcjY2NjU2Mjg=",
         "organizations_url" : "https://api.github.com/users/sr-gi/orgs",
         "received_events_url" : "https://api.github.com/users/sr-gi/received_events",
         "repos_url" : "https://api.github.com/users/sr-gi/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sr-gi/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sr-gi/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sr-gi"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/30072#discussion_r1603949576"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/30072"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1603949576"
         }
      },
      "author_association" : "MEMBER",
      "body" : "In 90b60a16731ac756dce44c29f57d111f4dffba75\r\n\r\nIf we are removing `txns.size() > 1` because it is a truism, we should at least assume it to make sure we are not overlooking it",
      "commit_id" : "2fd34ba504957331f5a08614b6e1f8317260f04d",
      "created_at" : "2024-05-16T19:45:13Z",
      "diff_hunk" : "@@ -1418,11 +1433,8 @@ PackageMempoolAcceptResult MemPoolAccept::AcceptMultipleTransactions(const std::\n             MempoolAcceptResult::FeeFailure(placeholder_state, CFeeRate(m_total_modified_fees, m_total_vsize), all_package_wtxids)}});\n     }\n \n-    // Apply package mempool ancestor/descendant limits. Skip if there is only one transaction,\n-    // because it's unnecessary. Also, CPFP carve out can increase the limit for individual\n-    // transactions, but this exemption is not extended to packages in CheckPackageLimits().\n-    std::string err_string;\n-    if (txns.size() > 1 && !PackageMempoolChecks(txns, m_total_vsize, package_state)) {\n+    // Apply package mempool ancestor/descendant limits.\n+    if (!PackageMempoolChecks(txns, m_total_vsize, package_state)) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/30072#discussion_r1603949576",
      "id" : 1603949576,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585fmlQI",
      "original_commit_id" : "90b60a16731ac756dce44c29f57d111f4dffba75",
      "original_line" : 1437,
      "original_position" : 103,
      "original_start_line" : null,
      "path" : "src/validation.cpp",
      "position" : null,
      "pull_request_review_id" : 2061682943,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/30072",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1603949576/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-05-23T18:36:55Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1603949576",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6665628?v=4",
         "events_url" : "https://api.github.com/users/sr-gi/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sr-gi/followers",
         "following_url" : "https://api.github.com/users/sr-gi/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sr-gi/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sr-gi",
         "id" : 6665628,
         "login" : "sr-gi",
         "node_id" : "MDQ6VXNlcjY2NjU2Mjg=",
         "organizations_url" : "https://api.github.com/users/sr-gi/orgs",
         "received_events_url" : "https://api.github.com/users/sr-gi/received_events",
         "repos_url" : "https://api.github.com/users/sr-gi/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sr-gi/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sr-gi/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sr-gi"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/30072#discussion_r1603952684"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/30072"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1603952684"
         }
      },
      "author_association" : "MEMBER",
      "body" : "In 90b60a16731ac756dce44c29f57d111f4dffba75\r\n\r\nI see `:%s/even/or` was applied a few lines above, but this suggestion seems not to have been covered. Was it applied to the above line by mistake?",
      "commit_id" : "2fd34ba504957331f5a08614b6e1f8317260f04d",
      "created_at" : "2024-05-16T19:48:45Z",
      "diff_hunk" : "@@ -55,14 +55,23 @@ def run_test(self):\n         assert_raises_rpc_error(-26, \"too-long-mempool-chain, too many descendants\", self.chain_tx, [chain[0], second_chain])\n         # ...especially if its > 40k weight\n         assert_raises_rpc_error(-26, \"too-long-mempool-chain, too many descendants\", self.chain_tx, [chain[0]], num_outputs=350)\n+        # ...even if it's submitted with other transactions",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/30072#discussion_r1603952684",
      "id" : 1603952684,
      "in_reply_to_id" : 1595529719,
      "line" : 57,
      "node_id" : "PRRC_kwDOABII585fmmAs",
      "original_commit_id" : "ff7c71f210573bd94d365c03d766092119c38fc4",
      "original_line" : 57,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "test/functional/mempool_package_onemore.py",
      "position" : 12,
      "pull_request_review_id" : 2061682943,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/30072",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1603952684/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-05-23T18:36:55Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1603952684",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6665628?v=4",
         "events_url" : "https://api.github.com/users/sr-gi/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sr-gi/followers",
         "following_url" : "https://api.github.com/users/sr-gi/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sr-gi/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sr-gi",
         "id" : 6665628,
         "login" : "sr-gi",
         "node_id" : "MDQ6VXNlcjY2NjU2Mjg=",
         "organizations_url" : "https://api.github.com/users/sr-gi/orgs",
         "received_events_url" : "https://api.github.com/users/sr-gi/received_events",
         "repos_url" : "https://api.github.com/users/sr-gi/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sr-gi/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sr-gi/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sr-gi"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/30072#discussion_r1604604969"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/30072"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1604604969"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Agree there's room for improvement clarity-wise.\r\n\r\nPerhaps a good approach is to have each flag control 1 part of the validation logic (even if 1 flag implies another flag)\r\n- whether you call `LimitMempoolSize()` within `Finalize()`\r\n- whether all conflicts should be rejected immediately\r\n- whether `CheckFeeRate` should be skipped in `PreChecks`\r\n- whether sibling eviction can be considered\r\n- whether package RBF can be considered\r\n\r\nThe `ATMPArgs` constructors should decide the flags based on where they are created and we can add a sanity checking function within each ctor to assert that package RBF implies package feerates, package feerates implies package submission, etc.",
      "commit_id" : "6fcd3cc016eaf07e47c5c448482ff844855a247b",
      "created_at" : "2024-05-17T09:09:38Z",
      "diff_hunk" : "@@ -996,7 +996,7 @@ bool MemPoolAccept::PreChecks(ATMPArgs& args, Workspace& ws)\n     // already calculated.\n     if (const auto err{SingleV3Checks(ws.m_ptx, ws.m_ancestors, ws.m_conflicts, ws.m_vsize)}) {\n         // Disabled within package validation.\n-        if (err->second != nullptr && args.m_allow_replacement) {\n+        if (err->second != nullptr && args.m_allow_replacement && !args.m_package_feerates) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/30072#discussion_r1604604969",
      "id" : 1604604969,
      "in_reply_to_id" : 1603902055,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585fpFQp",
      "original_commit_id" : "9eb9c030a0a335b424575e60e44806476c32e684",
      "original_line" : 999,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "src/validation.cpp",
      "position" : null,
      "pull_request_review_id" : 2062745322,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/30072",
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1604604969/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-05-17T09:09:38Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1604604969",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/25183001?v=4",
         "events_url" : "https://api.github.com/users/glozow/events{/privacy}",
         "followers_url" : "https://api.github.com/users/glozow/followers",
         "following_url" : "https://api.github.com/users/glozow/following{/other_user}",
         "gists_url" : "https://api.github.com/users/glozow/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/glozow",
         "id" : 25183001,
         "login" : "glozow",
         "node_id" : "MDQ6VXNlcjI1MTgzMDAx",
         "organizations_url" : "https://api.github.com/users/glozow/orgs",
         "received_events_url" : "https://api.github.com/users/glozow/received_events",
         "repos_url" : "https://api.github.com/users/glozow/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/glozow/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/glozow/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/glozow"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/30072#discussion_r1606835018"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/30072"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1606835018"
         }
      },
      "author_association" : "MEMBER",
      "body" : "done",
      "commit_id" : "6fcd3cc016eaf07e47c5c448482ff844855a247b",
      "created_at" : "2024-05-20T14:11:08Z",
      "diff_hunk" : "@@ -1179,9 +1217,12 @@ bool MemPoolAccept::Finalize(const ATMPArgs& args, Workspace& ws)\n                 entry->GetTxSize(),\n                 entry->GetFee()\n         );\n-        ws.m_replaced_transactions.push_back(it->GetSharedTx());\n+        m_replaced_transactions.push_back(it->GetSharedTx());\n     }\n-    m_pool.RemoveStaged(ws.m_all_conflicting, false, MemPoolRemovalReason::REPLACED);\n+    m_pool.RemoveStaged(m_all_conflicts, false, MemPoolRemovalReason::REPLACED);\n+    // Don't attempt process same conflicts repeatedly during subpackage evaluation:",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/30072#discussion_r1606835018",
      "id" : 1606835018,
      "in_reply_to_id" : 1596704440,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585fxltK",
      "original_commit_id" : "6a39183b53a41bb282ebf8373d0e11691d97d365",
      "original_line" : 1223,
      "original_position" : 249,
      "original_start_line" : null,
      "path" : "src/validation.cpp",
      "position" : null,
      "pull_request_review_id" : 2066314591,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/30072",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1606835018/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-05-20T14:11:09Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1606835018",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5767891?v=4",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "node_id" : "MDQ6VXNlcjU3Njc4OTE=",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/30072#discussion_r1606836006"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/30072"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1606836006"
         }
      },
      "author_association" : "MEMBER",
      "body" : "added an explicit `m_allow_sibling_eviction` ATMPArg and had it being true imply `m_allow_replacements`.",
      "commit_id" : "6fcd3cc016eaf07e47c5c448482ff844855a247b",
      "created_at" : "2024-05-20T14:11:54Z",
      "diff_hunk" : "@@ -996,7 +996,7 @@ bool MemPoolAccept::PreChecks(ATMPArgs& args, Workspace& ws)\n     // already calculated.\n     if (const auto err{SingleV3Checks(ws.m_ptx, ws.m_ancestors, ws.m_conflicts, ws.m_vsize)}) {\n         // Disabled within package validation.\n-        if (err->second != nullptr && args.m_allow_replacement) {\n+        if (err->second != nullptr && args.m_allow_replacement && !args.m_package_feerates) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/30072#discussion_r1606836006",
      "id" : 1606836006,
      "in_reply_to_id" : 1603902055,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585fxl8m",
      "original_commit_id" : "9eb9c030a0a335b424575e60e44806476c32e684",
      "original_line" : 999,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "src/validation.cpp",
      "position" : null,
      "pull_request_review_id" : 2066316217,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/30072",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1606836006/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-05-20T14:11:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1606836006",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5767891?v=4",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "node_id" : "MDQ6VXNlcjU3Njc4OTE=",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/30072#discussion_r1606840132"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/30072"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1606840132"
         }
      },
      "author_association" : "MEMBER",
      "body" : "@sr-gi I reverted the logic change here to reduce review surface, just shortening the comment here instead.",
      "commit_id" : "6fcd3cc016eaf07e47c5c448482ff844855a247b",
      "created_at" : "2024-05-20T14:15:23Z",
      "diff_hunk" : "@@ -1431,9 +1446,7 @@ PackageMempoolAcceptResult MemPoolAccept::AcceptMultipleTransactions(const std::\n     }\n \n     // Apply package mempool ancestor/descendant limits. Skip if there is only one transaction,\n-    // because it's unnecessary. Also, CPFP carve out can increase the limit for individual\n-    // transactions, but this exemption is not extended to packages in CheckPackageLimits().\n-    std::string err_string;\n+    // because it's unnecessary.",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/30072#discussion_r1606840132",
      "id" : 1606840132,
      "line" : 1476,
      "node_id" : "PRRC_kwDOABII585fxm9E",
      "original_commit_id" : "868c3e77e01df8cfdc00a7599f16d0adf019aee7",
      "original_line" : 1449,
      "original_position" : 100,
      "original_start_line" : null,
      "path" : "src/validation.cpp",
      "position" : 351,
      "pull_request_review_id" : 2066323248,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/30072",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1606840132/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-05-20T14:15:24Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1606840132",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5767891?v=4",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "node_id" : "MDQ6VXNlcjU3Njc4OTE=",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "win64 test failure is minisketch https://github.com/bitcoin/bitcoin/pull/30072/checks?check_run_id=25181774728",
      "created_at" : "2024-05-20T15:25:41Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/30072#issuecomment-2120685605",
      "id" : 2120685605,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/30072",
      "node_id" : "IC_kwDOABII585-Zxgl",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2120685605/reactions"
      },
      "updated_at" : "2024-05-20T15:25:41Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2120685605",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5767891?v=4",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "node_id" : "MDQ6VXNlcjU3Njc4OTE=",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/30072#discussion_r1608351999"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/30072"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1608351999"
         }
      },
      "author_association" : "MEMBER",
      "body" : "07bb2736c17dd50b6ec3d4770001f8e6f0c8710a: would be good to put the sanity checks here\r\n\r\n```\r\n            // If we are using package feerates, we must be doing package submission.\r\n            // It also means carveouts and sibling eviction are not permitted.\r\n            if (m_package_feerates) {\r\n                Assume(m_package_submission);\r\n                Assume(!m_allow_carveouts);\r\n                Assume(!m_allow_sibling_eviction);\r\n            }\r\n            if (m_allow_sibling_evction) Assume(m_allow_replacement);\r\n```",
      "commit_id" : "a84b57462cd3dfcd059783696aacd796ef1793d4",
      "created_at" : "2024-05-21T13:37:23Z",
      "diff_hunk" : "@@ -555,6 +562,7 @@ class MemPoolAccept\n               m_coins_to_uncache{coins_to_uncache},\n               m_test_accept{test_accept},\n               m_allow_replacement{allow_replacement},\n+              m_allow_sibling_eviction{allow_sibling_eviction},\n               m_package_submission{package_submission},\n               m_package_feerates{package_feerates},\n               m_client_maxfeerate{client_maxfeerate}",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/30072#discussion_r1608351999",
      "id" : 1608351999,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585f3YD_",
      "original_commit_id" : "07bb2736c17dd50b6ec3d4770001f8e6f0c8710a",
      "original_line" : 568,
      "original_position" : 61,
      "original_start_line" : null,
      "path" : "src/validation.cpp",
      "position" : null,
      "pull_request_review_id" : 2068674969,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/30072",
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1608351999/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-05-21T14:03:42Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1608351999",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/25183001?v=4",
         "events_url" : "https://api.github.com/users/glozow/events{/privacy}",
         "followers_url" : "https://api.github.com/users/glozow/followers",
         "following_url" : "https://api.github.com/users/glozow/following{/other_user}",
         "gists_url" : "https://api.github.com/users/glozow/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/glozow",
         "id" : 25183001,
         "login" : "glozow",
         "node_id" : "MDQ6VXNlcjI1MTgzMDAx",
         "organizations_url" : "https://api.github.com/users/glozow/orgs",
         "received_events_url" : "https://api.github.com/users/glozow/received_events",
         "repos_url" : "https://api.github.com/users/glozow/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/glozow/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/glozow/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/glozow"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/30072#discussion_r1608552045"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/30072"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1608552045"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "spelling nit:\r\n```suggestion\r\n        /** When true, the transaction or package will not be submitted to the mempool. */\r\n```",
      "commit_id" : "a84b57462cd3dfcd059783696aacd796ef1793d4",
      "created_at" : "2024-05-21T15:42:29Z",
      "diff_hunk" : "@@ -456,6 +456,7 @@ class MemPoolAccept\n          * the mempool.\n          */\n         std::vector<COutPoint>& m_coins_to_uncache;\n+        /** When true, the transaction or package will not be submited to the mempool. */",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/30072#discussion_r1608552045",
      "id" : 1608552045,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585f4I5t",
      "original_commit_id" : "3be46d01b977bcbaa86965db59fb04d1347742e3",
      "original_line" : 459,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "src/validation.cpp",
      "position" : null,
      "pull_request_review_id" : 2068992752,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/30072",
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1608552045/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-05-21T16:56:37Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1608552045",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/91535?v=4",
         "events_url" : "https://api.github.com/users/theStack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/theStack/followers",
         "following_url" : "https://api.github.com/users/theStack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/theStack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/theStack",
         "id" : 91535,
         "login" : "theStack",
         "node_id" : "MDQ6VXNlcjkxNTM1",
         "organizations_url" : "https://api.github.com/users/theStack/orgs",
         "received_events_url" : "https://api.github.com/users/theStack/received_events",
         "repos_url" : "https://api.github.com/users/theStack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/theStack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/theStack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/theStack"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/30072#discussion_r1610060323"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/30072"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1610060323"
         }
      },
      "author_association" : "MEMBER",
      "body" : "fixed, thanks",
      "commit_id" : "a84b57462cd3dfcd059783696aacd796ef1793d4",
      "created_at" : "2024-05-22T14:13:48Z",
      "diff_hunk" : "@@ -456,6 +456,7 @@ class MemPoolAccept\n          * the mempool.\n          */\n         std::vector<COutPoint>& m_coins_to_uncache;\n+        /** When true, the transaction or package will not be submited to the mempool. */",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/30072#discussion_r1610060323",
      "id" : 1610060323,
      "in_reply_to_id" : 1608552045,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585f95Ij",
      "original_commit_id" : "3be46d01b977bcbaa86965db59fb04d1347742e3",
      "original_line" : 459,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "src/validation.cpp",
      "position" : null,
      "pull_request_review_id" : 2071378048,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/30072",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1610060323/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-05-22T14:13:48Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1610060323",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5767891?v=4",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "node_id" : "MDQ6VXNlcjU3Njc4OTE=",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/30072#discussion_r1610060814"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/30072"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1610060814"
         }
      },
      "author_association" : "MEMBER",
      "body" : "took, thanks",
      "commit_id" : "a84b57462cd3dfcd059783696aacd796ef1793d4",
      "created_at" : "2024-05-22T14:14:06Z",
      "diff_hunk" : "@@ -555,6 +562,7 @@ class MemPoolAccept\n               m_coins_to_uncache{coins_to_uncache},\n               m_test_accept{test_accept},\n               m_allow_replacement{allow_replacement},\n+              m_allow_sibling_eviction{allow_sibling_eviction},\n               m_package_submission{package_submission},\n               m_package_feerates{package_feerates},\n               m_client_maxfeerate{client_maxfeerate}",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/30072#discussion_r1610060814",
      "id" : 1610060814,
      "in_reply_to_id" : 1608351999,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585f95QO",
      "original_commit_id" : "07bb2736c17dd50b6ec3d4770001f8e6f0c8710a",
      "original_line" : 568,
      "original_position" : 61,
      "original_start_line" : null,
      "path" : "src/validation.cpp",
      "position" : null,
      "pull_request_review_id" : 2071378890,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/30072",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1610060814/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-05-22T14:14:06Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1610060814",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5767891?v=4",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "node_id" : "MDQ6VXNlcjU3Njc4OTE=",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/30072#discussion_r1610179097"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/30072"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1610179097"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Kind of unrelated, and more like a \"I wish my c++ skills were better\" nit: I wonder if there is a way to do the introduced sanity checks already at compile-time, since these flags are all constant for each of the `ATMPArgs` instances (probably not, or at least not without significant changes in structure...).",
      "commit_id" : "a84b57462cd3dfcd059783696aacd796ef1793d4",
      "created_at" : "2024-05-22T15:10:08Z",
      "diff_hunk" : "@@ -576,6 +576,14 @@ class MemPoolAccept\n               m_client_maxfeerate{client_maxfeerate},\n               m_allow_carveouts{allow_carveouts}\n         {\n+            // If we are using package feerates, we must be doing package submission.\n+            // It also means carveouts and sibling eviction are not permitted.\n+            if (m_package_feerates) {\n+                Assume(m_package_submission);\n+                Assume(!m_allow_carveouts);\n+                Assume(!m_allow_sibling_eviction);\n+            }\n+            if (m_allow_sibling_eviction) Assume(m_allow_replacement);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/30072#discussion_r1610179097",
      "id" : 1610179097,
      "line" : 586,
      "node_id" : "PRRC_kwDOABII585f-WIZ",
      "original_commit_id" : "a84b57462cd3dfcd059783696aacd796ef1793d4",
      "original_line" : 586,
      "original_position" : 11,
      "original_start_line" : 579,
      "path" : "src/validation.cpp",
      "position" : 11,
      "pull_request_review_id" : 2071579370,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/30072",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1610179097/reactions"
      },
      "side" : "RIGHT",
      "start_line" : 579,
      "start_side" : "RIGHT",
      "subject_type" : "line",
      "updated_at" : "2024-05-22T15:11:31Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1610179097",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/91535?v=4",
         "events_url" : "https://api.github.com/users/theStack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/theStack/followers",
         "following_url" : "https://api.github.com/users/theStack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/theStack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/theStack",
         "id" : 91535,
         "login" : "theStack",
         "node_id" : "MDQ6VXNlcjkxNTM1",
         "organizations_url" : "https://api.github.com/users/theStack/orgs",
         "received_events_url" : "https://api.github.com/users/theStack/received_events",
         "repos_url" : "https://api.github.com/users/theStack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/theStack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/theStack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/theStack"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/30072#discussion_r1610484226"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/30072"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1610484226"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Do you think it might make sense to explicitly group these variables into a single struct that makes it clear we have one grouping of per-subpackage state?  All these variables that are at the same scope level as other things that don't get reset seems maybe a bit messy...",
      "commit_id" : "7689438a515ec5b0d6ad4dd74e532b7bc620b86a",
      "created_at" : "2024-05-22T18:45:17Z",
      "diff_hunk" : "@@ -726,9 +715,42 @@ class MemPoolAccept\n \n     Chainstate& m_active_chainstate;\n \n+    // Fields below are per *sub*package state and must be reset prior to subsequent\n+    // AcceptSingleTransaction and AcceptMultipleTransactions invocations\n+\n+    /** Aggregated modified fees of all transactions, used to calculate package feerate. */\n+    CAmount m_total_modified_fees{0};\n+    /** Aggregated virtual size of all transactions, used to calculate package feerate. */\n+    int64_t m_total_vsize{0};\n+\n+    // RBF-related members\n     /** Whether the transaction(s) would replace any mempool transactions and/or evict any siblings.\n      * If so, RBF rules apply. */\n     bool m_rbf{false};\n+    /** All directly conflicting mempool transactions and their descendants. */\n+    CTxMemPool::setEntries m_all_conflicts;\n+    /** Mempool transactions that were replaced. */\n+    std::list<CTransactionRef> m_replaced_transactions;\n+\n+    /** Total modified fees of mempool transactions being replaced. */\n+    CAmount m_conflicting_fees{0};\n+    /** Total size (in virtual bytes) of mempool transactions being replaced. */\n+    size_t m_conflicting_size{0};\n+\n+    /** Re-set sub-package state to not leak between evaluations */\n+    void ClearSubPackageState() EXCLUSIVE_LOCKS_REQUIRED(cs_main, m_pool.cs)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/30072#discussion_r1610484226",
      "id" : 1610484226,
      "line" : 752,
      "node_id" : "PRRC_kwDOABII585f_goC",
      "original_commit_id" : "d7907ae74090b63a88a93a8665c1b3bc54c61ec0",
      "original_line" : 752,
      "original_position" : 57,
      "original_start_line" : null,
      "path" : "src/validation.cpp",
      "position" : 171,
      "pull_request_review_id" : 2072094120,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/30072",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1610484226/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-05-22T18:45:17Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1610484226",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7463573?v=4",
         "events_url" : "https://api.github.com/users/sdaftuar/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sdaftuar/followers",
         "following_url" : "https://api.github.com/users/sdaftuar/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sdaftuar/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sdaftuar",
         "id" : 7463573,
         "login" : "sdaftuar",
         "node_id" : "MDQ6VXNlcjc0NjM1NzM=",
         "organizations_url" : "https://api.github.com/users/sdaftuar/orgs",
         "received_events_url" : "https://api.github.com/users/sdaftuar/received_events",
         "repos_url" : "https://api.github.com/users/sdaftuar/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sdaftuar/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sdaftuar/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sdaftuar"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "utACK a84b57462cd3dfcd059783696aacd796ef1793d4\r\n\r\nLeft one nit/question for you, but looks good to me regardless.",
      "created_at" : "2024-05-22T18:52:47Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/30072#issuecomment-2125532662",
      "id" : 2125532662,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/30072",
      "node_id" : "IC_kwDOABII585-sQ32",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2125532662/reactions"
      },
      "updated_at" : "2024-05-22T18:52:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2125532662",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7463573?v=4",
         "events_url" : "https://api.github.com/users/sdaftuar/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sdaftuar/followers",
         "following_url" : "https://api.github.com/users/sdaftuar/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sdaftuar/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sdaftuar",
         "id" : 7463573,
         "login" : "sdaftuar",
         "node_id" : "MDQ6VXNlcjc0NjM1NzM=",
         "organizations_url" : "https://api.github.com/users/sdaftuar/orgs",
         "received_events_url" : "https://api.github.com/users/sdaftuar/received_events",
         "repos_url" : "https://api.github.com/users/sdaftuar/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sdaftuar/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sdaftuar/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sdaftuar"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/30072#discussion_r1610546508"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/30072"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1610546508"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Probably worth doing now to make it more clear over time. Let me know what you think.",
      "commit_id" : "7689438a515ec5b0d6ad4dd74e532b7bc620b86a",
      "created_at" : "2024-05-22T19:34:52Z",
      "diff_hunk" : "@@ -726,9 +715,42 @@ class MemPoolAccept\n \n     Chainstate& m_active_chainstate;\n \n+    // Fields below are per *sub*package state and must be reset prior to subsequent\n+    // AcceptSingleTransaction and AcceptMultipleTransactions invocations\n+\n+    /** Aggregated modified fees of all transactions, used to calculate package feerate. */\n+    CAmount m_total_modified_fees{0};\n+    /** Aggregated virtual size of all transactions, used to calculate package feerate. */\n+    int64_t m_total_vsize{0};\n+\n+    // RBF-related members\n     /** Whether the transaction(s) would replace any mempool transactions and/or evict any siblings.\n      * If so, RBF rules apply. */\n     bool m_rbf{false};\n+    /** All directly conflicting mempool transactions and their descendants. */\n+    CTxMemPool::setEntries m_all_conflicts;\n+    /** Mempool transactions that were replaced. */\n+    std::list<CTransactionRef> m_replaced_transactions;\n+\n+    /** Total modified fees of mempool transactions being replaced. */\n+    CAmount m_conflicting_fees{0};\n+    /** Total size (in virtual bytes) of mempool transactions being replaced. */\n+    size_t m_conflicting_size{0};\n+\n+    /** Re-set sub-package state to not leak between evaluations */\n+    void ClearSubPackageState() EXCLUSIVE_LOCKS_REQUIRED(cs_main, m_pool.cs)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/30072#discussion_r1610546508",
      "id" : 1610546508,
      "in_reply_to_id" : 1610484226,
      "line" : 752,
      "node_id" : "PRRC_kwDOABII585f_v1M",
      "original_commit_id" : "d7907ae74090b63a88a93a8665c1b3bc54c61ec0",
      "original_line" : 752,
      "original_position" : 57,
      "original_start_line" : null,
      "path" : "src/validation.cpp",
      "position" : 171,
      "pull_request_review_id" : 2072194617,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/30072",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1610546508/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-05-22T19:34:52Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1610546508",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5767891?v=4",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "node_id" : "MDQ6VXNlcjU3Njc4OTE=",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/30072#discussion_r1610556549"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/30072"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1610556549"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Seems more readable to me, thanks.",
      "commit_id" : "7689438a515ec5b0d6ad4dd74e532b7bc620b86a",
      "created_at" : "2024-05-22T19:43:27Z",
      "diff_hunk" : "@@ -726,9 +715,42 @@ class MemPoolAccept\n \n     Chainstate& m_active_chainstate;\n \n+    // Fields below are per *sub*package state and must be reset prior to subsequent\n+    // AcceptSingleTransaction and AcceptMultipleTransactions invocations\n+\n+    /** Aggregated modified fees of all transactions, used to calculate package feerate. */\n+    CAmount m_total_modified_fees{0};\n+    /** Aggregated virtual size of all transactions, used to calculate package feerate. */\n+    int64_t m_total_vsize{0};\n+\n+    // RBF-related members\n     /** Whether the transaction(s) would replace any mempool transactions and/or evict any siblings.\n      * If so, RBF rules apply. */\n     bool m_rbf{false};\n+    /** All directly conflicting mempool transactions and their descendants. */\n+    CTxMemPool::setEntries m_all_conflicts;\n+    /** Mempool transactions that were replaced. */\n+    std::list<CTransactionRef> m_replaced_transactions;\n+\n+    /** Total modified fees of mempool transactions being replaced. */\n+    CAmount m_conflicting_fees{0};\n+    /** Total size (in virtual bytes) of mempool transactions being replaced. */\n+    size_t m_conflicting_size{0};\n+\n+    /** Re-set sub-package state to not leak between evaluations */\n+    void ClearSubPackageState() EXCLUSIVE_LOCKS_REQUIRED(cs_main, m_pool.cs)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/30072#discussion_r1610556549",
      "id" : 1610556549,
      "in_reply_to_id" : 1610484226,
      "line" : 752,
      "node_id" : "PRRC_kwDOABII585f_ySF",
      "original_commit_id" : "d7907ae74090b63a88a93a8665c1b3bc54c61ec0",
      "original_line" : 752,
      "original_position" : 57,
      "original_start_line" : null,
      "path" : "src/validation.cpp",
      "position" : 171,
      "pull_request_review_id" : 2072211317,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/30072",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1610556549/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-05-22T19:43:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1610556549",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7463573?v=4",
         "events_url" : "https://api.github.com/users/sdaftuar/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sdaftuar/followers",
         "following_url" : "https://api.github.com/users/sdaftuar/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sdaftuar/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sdaftuar",
         "id" : 7463573,
         "login" : "sdaftuar",
         "node_id" : "MDQ6VXNlcjc0NjM1NzM=",
         "organizations_url" : "https://api.github.com/users/sdaftuar/orgs",
         "received_events_url" : "https://api.github.com/users/sdaftuar/received_events",
         "repos_url" : "https://api.github.com/users/sdaftuar/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sdaftuar/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sdaftuar/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sdaftuar"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/30072#discussion_r1611599378"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/30072"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1611599378"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Looks like the commit message for commit 6b3373248656ef45d73262aa6dba3aec5866f7ca should be updated now, sorry!",
      "commit_id" : "63cfa4ce88cac26abcacf3b243916e722ab17d75",
      "created_at" : "2024-05-23T12:23:33Z",
      "diff_hunk" : "@@ -726,9 +715,42 @@ class MemPoolAccept\n \n     Chainstate& m_active_chainstate;\n \n+    // Fields below are per *sub*package state and must be reset prior to subsequent\n+    // AcceptSingleTransaction and AcceptMultipleTransactions invocations\n+\n+    /** Aggregated modified fees of all transactions, used to calculate package feerate. */\n+    CAmount m_total_modified_fees{0};\n+    /** Aggregated virtual size of all transactions, used to calculate package feerate. */\n+    int64_t m_total_vsize{0};\n+\n+    // RBF-related members\n     /** Whether the transaction(s) would replace any mempool transactions and/or evict any siblings.\n      * If so, RBF rules apply. */\n     bool m_rbf{false};\n+    /** All directly conflicting mempool transactions and their descendants. */\n+    CTxMemPool::setEntries m_all_conflicts;\n+    /** Mempool transactions that were replaced. */\n+    std::list<CTransactionRef> m_replaced_transactions;\n+\n+    /** Total modified fees of mempool transactions being replaced. */\n+    CAmount m_conflicting_fees{0};\n+    /** Total size (in virtual bytes) of mempool transactions being replaced. */\n+    size_t m_conflicting_size{0};\n+\n+    /** Re-set sub-package state to not leak between evaluations */\n+    void ClearSubPackageState() EXCLUSIVE_LOCKS_REQUIRED(cs_main, m_pool.cs)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/30072#discussion_r1611599378",
      "id" : 1611599378,
      "in_reply_to_id" : 1610484226,
      "line" : 752,
      "node_id" : "PRRC_kwDOABII585gDw4S",
      "original_commit_id" : "d7907ae74090b63a88a93a8665c1b3bc54c61ec0",
      "original_line" : 752,
      "original_position" : 57,
      "original_start_line" : null,
      "path" : "src/validation.cpp",
      "position" : 171,
      "pull_request_review_id" : 2073812677,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/30072",
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1611599378/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-05-23T12:23:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1611599378",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7463573?v=4",
         "events_url" : "https://api.github.com/users/sdaftuar/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sdaftuar/followers",
         "following_url" : "https://api.github.com/users/sdaftuar/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sdaftuar/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sdaftuar",
         "id" : 7463573,
         "login" : "sdaftuar",
         "node_id" : "MDQ6VXNlcjc0NjM1NzM=",
         "organizations_url" : "https://api.github.com/users/sdaftuar/orgs",
         "received_events_url" : "https://api.github.com/users/sdaftuar/received_events",
         "repos_url" : "https://api.github.com/users/sdaftuar/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sdaftuar/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sdaftuar/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sdaftuar"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/30072#discussion_r1611638058"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/30072"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1611638058"
         }
      },
      "author_association" : "MEMBER",
      "body" : "touched up the commit message",
      "commit_id" : "63cfa4ce88cac26abcacf3b243916e722ab17d75",
      "created_at" : "2024-05-23T12:50:40Z",
      "diff_hunk" : "@@ -726,9 +715,42 @@ class MemPoolAccept\n \n     Chainstate& m_active_chainstate;\n \n+    // Fields below are per *sub*package state and must be reset prior to subsequent\n+    // AcceptSingleTransaction and AcceptMultipleTransactions invocations\n+\n+    /** Aggregated modified fees of all transactions, used to calculate package feerate. */\n+    CAmount m_total_modified_fees{0};\n+    /** Aggregated virtual size of all transactions, used to calculate package feerate. */\n+    int64_t m_total_vsize{0};\n+\n+    // RBF-related members\n     /** Whether the transaction(s) would replace any mempool transactions and/or evict any siblings.\n      * If so, RBF rules apply. */\n     bool m_rbf{false};\n+    /** All directly conflicting mempool transactions and their descendants. */\n+    CTxMemPool::setEntries m_all_conflicts;\n+    /** Mempool transactions that were replaced. */\n+    std::list<CTransactionRef> m_replaced_transactions;\n+\n+    /** Total modified fees of mempool transactions being replaced. */\n+    CAmount m_conflicting_fees{0};\n+    /** Total size (in virtual bytes) of mempool transactions being replaced. */\n+    size_t m_conflicting_size{0};\n+\n+    /** Re-set sub-package state to not leak between evaluations */\n+    void ClearSubPackageState() EXCLUSIVE_LOCKS_REQUIRED(cs_main, m_pool.cs)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/30072#discussion_r1611638058",
      "id" : 1611638058,
      "in_reply_to_id" : 1610484226,
      "line" : 752,
      "node_id" : "PRRC_kwDOABII585gD6Uq",
      "original_commit_id" : "d7907ae74090b63a88a93a8665c1b3bc54c61ec0",
      "original_line" : 752,
      "original_position" : 57,
      "original_start_line" : null,
      "path" : "src/validation.cpp",
      "position" : 171,
      "pull_request_review_id" : 2073876320,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/30072",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1611638058/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-05-23T12:50:40Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1611638058",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5767891?v=4",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "node_id" : "MDQ6VXNlcjU3Njc4OTE=",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "ACK 63cfa4ce88cac26abcacf3b243916e722ab17d75",
      "created_at" : "2024-05-23T13:48:47Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/30072#issuecomment-2127160378",
      "id" : 2127160378,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/30072",
      "node_id" : "IC_kwDOABII585-yeQ6",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2127160378/reactions"
      },
      "updated_at" : "2024-05-23T13:48:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2127160378",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7463573?v=4",
         "events_url" : "https://api.github.com/users/sdaftuar/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sdaftuar/followers",
         "following_url" : "https://api.github.com/users/sdaftuar/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sdaftuar/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sdaftuar",
         "id" : 7463573,
         "login" : "sdaftuar",
         "node_id" : "MDQ6VXNlcjc0NjM1NzM=",
         "organizations_url" : "https://api.github.com/users/sdaftuar/orgs",
         "received_events_url" : "https://api.github.com/users/sdaftuar/received_events",
         "repos_url" : "https://api.github.com/users/sdaftuar/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sdaftuar/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sdaftuar/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sdaftuar"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/30072#discussion_r1611833441"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/30072"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1611833441"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Is there a reason for `struct` (seems like a C thing?)\r\n```suggestion\r\n    SubPackageState m_subpackage;\r\n```",
      "commit_id" : "63cfa4ce88cac26abcacf3b243916e722ab17d75",
      "created_at" : "2024-05-23T14:44:56Z",
      "diff_hunk" : "@@ -708,9 +723,39 @@ class MemPoolAccept\n \n     Chainstate& m_active_chainstate;\n \n-    /** Whether the transaction(s) would replace any mempool transactions and/or evict any siblings.\n-     * If so, RBF rules apply. */\n-    bool m_rbf{false};\n+    // Fields below are per *sub*package state and must be reset prior to subsequent\n+    // AcceptSingleTransaction and AcceptMultipleTransactions invocations\n+    struct SubPackageState {\n+        /** Aggregated modified fees of all transactions, used to calculate package feerate. */\n+        CAmount m_total_modified_fees{0};\n+        /** Aggregated virtual size of all transactions, used to calculate package feerate. */\n+        int64_t m_total_vsize{0};\n+\n+        // RBF-related members\n+        /** Whether the transaction(s) would replace any mempool transactions and/or evict any siblings.\n+         * If so, RBF rules apply. */\n+        bool m_rbf{false};\n+        /** All directly conflicting mempool transactions and their descendants. */\n+        CTxMemPool::setEntries m_all_conflicts;\n+        /** Mempool transactions that were replaced. */\n+        std::list<CTransactionRef> m_replaced_transactions;\n+\n+        /** Total modified fees of mempool transactions being replaced. */\n+        CAmount m_conflicting_fees{0};\n+        /** Total size (in virtual bytes) of mempool transactions being replaced. */\n+        size_t m_conflicting_size{0};\n+    };\n+\n+    struct SubPackageState m_subpackage;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/30072#discussion_r1611833441",
      "id" : 1611833441,
      "line" : 749,
      "node_id" : "PRRC_kwDOABII585gEqBh",
      "original_commit_id" : "63cfa4ce88cac26abcacf3b243916e722ab17d75",
      "original_line" : 749,
      "original_position" : 168,
      "original_start_line" : null,
      "path" : "src/validation.cpp",
      "position" : 168,
      "pull_request_review_id" : 2074201852,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/30072",
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1611833441/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-05-23T14:51:12Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1611833441",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/25183001?v=4",
         "events_url" : "https://api.github.com/users/glozow/events{/privacy}",
         "followers_url" : "https://api.github.com/users/glozow/followers",
         "following_url" : "https://api.github.com/users/glozow/following{/other_user}",
         "gists_url" : "https://api.github.com/users/glozow/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/glozow",
         "id" : 25183001,
         "login" : "glozow",
         "node_id" : "MDQ6VXNlcjI1MTgzMDAx",
         "organizations_url" : "https://api.github.com/users/glozow/orgs",
         "received_events_url" : "https://api.github.com/users/glozow/received_events",
         "repos_url" : "https://api.github.com/users/glozow/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/glozow/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/glozow/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/glozow"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/30072#discussion_r1611842178"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/30072"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1611842178"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Seems this will need to be deleted immediately in the next PR?",
      "commit_id" : "63cfa4ce88cac26abcacf3b243916e722ab17d75",
      "created_at" : "2024-05-23T14:50:25Z",
      "diff_hunk" : "@@ -1380,6 +1438,7 @@ PackageMempoolAcceptResult MemPoolAccept::AcceptMultipleTransactions(const std::\n         // replacements, we don't need to track the coins spent. Note that this logic will need to be\n         // updated if package replace-by-fee is allowed in the future.\n         assert(!args.m_allow_replacement);\n+        assert(!m_subpackage.m_rbf);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/30072#discussion_r1611842178",
      "id" : 1611842178,
      "line" : 1441,
      "node_id" : "PRRC_kwDOABII585gEsKC",
      "original_commit_id" : "63cfa4ce88cac26abcacf3b243916e722ab17d75",
      "original_line" : 1441,
      "original_position" : 346,
      "original_start_line" : null,
      "path" : "src/validation.cpp",
      "position" : 346,
      "pull_request_review_id" : 2074201852,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/30072",
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1611842178/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-05-23T14:51:12Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1611842178",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/25183001?v=4",
         "events_url" : "https://api.github.com/users/glozow/events{/privacy}",
         "followers_url" : "https://api.github.com/users/glozow/followers",
         "following_url" : "https://api.github.com/users/glozow/following{/other_user}",
         "gists_url" : "https://api.github.com/users/glozow/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/glozow",
         "id" : 25183001,
         "login" : "glozow",
         "node_id" : "MDQ6VXNlcjI1MTgzMDAx",
         "organizations_url" : "https://api.github.com/users/glozow/orgs",
         "received_events_url" : "https://api.github.com/users/glozow/received_events",
         "repos_url" : "https://api.github.com/users/glozow/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/glozow/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/glozow/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/glozow"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/30072#discussion_r1611850452"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/30072"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1611850452"
         }
      },
      "author_association" : "MEMBER",
      "body" : "old habits!",
      "commit_id" : "63cfa4ce88cac26abcacf3b243916e722ab17d75",
      "created_at" : "2024-05-23T14:54:58Z",
      "diff_hunk" : "@@ -708,9 +723,39 @@ class MemPoolAccept\n \n     Chainstate& m_active_chainstate;\n \n-    /** Whether the transaction(s) would replace any mempool transactions and/or evict any siblings.\n-     * If so, RBF rules apply. */\n-    bool m_rbf{false};\n+    // Fields below are per *sub*package state and must be reset prior to subsequent\n+    // AcceptSingleTransaction and AcceptMultipleTransactions invocations\n+    struct SubPackageState {\n+        /** Aggregated modified fees of all transactions, used to calculate package feerate. */\n+        CAmount m_total_modified_fees{0};\n+        /** Aggregated virtual size of all transactions, used to calculate package feerate. */\n+        int64_t m_total_vsize{0};\n+\n+        // RBF-related members\n+        /** Whether the transaction(s) would replace any mempool transactions and/or evict any siblings.\n+         * If so, RBF rules apply. */\n+        bool m_rbf{false};\n+        /** All directly conflicting mempool transactions and their descendants. */\n+        CTxMemPool::setEntries m_all_conflicts;\n+        /** Mempool transactions that were replaced. */\n+        std::list<CTransactionRef> m_replaced_transactions;\n+\n+        /** Total modified fees of mempool transactions being replaced. */\n+        CAmount m_conflicting_fees{0};\n+        /** Total size (in virtual bytes) of mempool transactions being replaced. */\n+        size_t m_conflicting_size{0};\n+    };\n+\n+    struct SubPackageState m_subpackage;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/30072#discussion_r1611850452",
      "id" : 1611850452,
      "in_reply_to_id" : 1611833441,
      "line" : 749,
      "node_id" : "PRRC_kwDOABII585gEuLU",
      "original_commit_id" : "63cfa4ce88cac26abcacf3b243916e722ab17d75",
      "original_line" : 749,
      "original_position" : 168,
      "original_start_line" : null,
      "path" : "src/validation.cpp",
      "position" : 168,
      "pull_request_review_id" : 2074231602,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/30072",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1611850452/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-05-23T14:54:59Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1611850452",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5767891?v=4",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "node_id" : "MDQ6VXNlcjU3Njc4OTE=",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "sadly, forced to rebased post https://github.com/bitcoin/bitcoin/pull/29873\r\n\r\nShould be pretty trivial to review with something like:\r\n`git range-diff master 63cfa4c 2fd34ba504957331f5a08614b6e1f8317260f04d`",
      "created_at" : "2024-05-23T16:11:22Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/30072#issuecomment-2127536164",
      "id" : 2127536164,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/30072",
      "node_id" : "IC_kwDOABII585-z6Ak",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2127536164/reactions"
      },
      "updated_at" : "2024-05-23T16:11:22Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2127536164",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5767891?v=4",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "node_id" : "MDQ6VXNlcjU3Njc4OTE=",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "reACK 2fd34ba504957331f5a08614b6e1f8317260f04d via range-diff",
      "created_at" : "2024-05-23T16:14:54Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/30072#issuecomment-2127548244",
      "id" : 2127548244,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/30072",
      "node_id" : "IC_kwDOABII585-z89U",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2127548244/reactions"
      },
      "updated_at" : "2024-05-23T16:14:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2127548244",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/25183001?v=4",
         "events_url" : "https://api.github.com/users/glozow/events{/privacy}",
         "followers_url" : "https://api.github.com/users/glozow/followers",
         "following_url" : "https://api.github.com/users/glozow/following{/other_user}",
         "gists_url" : "https://api.github.com/users/glozow/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/glozow",
         "id" : 25183001,
         "login" : "glozow",
         "node_id" : "MDQ6VXNlcjI1MTgzMDAx",
         "organizations_url" : "https://api.github.com/users/glozow/orgs",
         "received_events_url" : "https://api.github.com/users/glozow/received_events",
         "repos_url" : "https://api.github.com/users/glozow/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/glozow/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/glozow/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/glozow"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/30072#discussion_r1612056701"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/30072"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1612056701"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "I thought sibling eviction was relevant in a TRUC Transaction constellation when there already exist an unconfirmed parent and unconfirmed child, and now a newly submitted transaction is a child of the same parent, but spends a different output than the original child, i.e. not actually in conflict with the original child except for the topological restrictions affecting TRUC Transactions.\r\n\r\nIf I got all that right, I would posit that \"This only occurs in single transaction package settings.\" is a bit confusing, unless Iâm the only person for whom itâs not obvious that \"single transaction package settings\" is exclusively describing the replacement transaction.",
      "commit_id" : "2fd34ba504957331f5a08614b6e1f8317260f04d",
      "created_at" : "2024-05-23T17:15:12Z",
      "diff_hunk" : "@@ -457,10 +457,12 @@ class MemPoolAccept\n         std::vector<COutPoint>& m_coins_to_uncache;\n         /** When true, the transaction or package will not be submitted to the mempool. */\n         const bool m_test_accept;\n-        /** Whether we allow transactions to replace mempool transactions by BIP125 rules. If false,\n+        /** Whether we allow transactions to replace mempool transactions. If false,\n          * any transaction spending the same inputs as a transaction in the mempool is considered\n          * a conflict. */\n         const bool m_allow_replacement;\n+        /** When true, allow sibling eviction. This only occurs in single transaction package settings. */\n+        const bool m_allow_sibling_eviction;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/30072#discussion_r1612056701",
      "id" : 1612056701,
      "line" : 465,
      "node_id" : "PRRC_kwDOABII585gFgh9",
      "original_commit_id" : "69f7ab05bafec1cf06fd7a58351f78e32bbfa2cf",
      "original_line" : 465,
      "original_position" : 10,
      "original_start_line" : 464,
      "path" : "src/validation.cpp",
      "position" : 12,
      "pull_request_review_id" : 2074593991,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/30072",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1612056701/reactions"
      },
      "side" : "RIGHT",
      "start_line" : 464,
      "start_side" : "RIGHT",
      "subject_type" : "line",
      "updated_at" : "2024-05-23T17:28:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1612056701",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/4060799?v=4",
         "events_url" : "https://api.github.com/users/murchandamus/events{/privacy}",
         "followers_url" : "https://api.github.com/users/murchandamus/followers",
         "following_url" : "https://api.github.com/users/murchandamus/following{/other_user}",
         "gists_url" : "https://api.github.com/users/murchandamus/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/murchandamus",
         "id" : 4060799,
         "login" : "murchandamus",
         "node_id" : "MDQ6VXNlcjQwNjA3OTk=",
         "organizations_url" : "https://api.github.com/users/murchandamus/orgs",
         "received_events_url" : "https://api.github.com/users/murchandamus/received_events",
         "repos_url" : "https://api.github.com/users/murchandamus/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/murchandamus/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/murchandamus/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/murchandamus"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/30072#discussion_r1612073178"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/30072"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1612073178"
         }
      },
      "author_association" : "MEMBER",
      "body" : "\"single transaction subpackage\"?",
      "commit_id" : "2fd34ba504957331f5a08614b6e1f8317260f04d",
      "created_at" : "2024-05-23T17:29:54Z",
      "diff_hunk" : "@@ -457,10 +457,12 @@ class MemPoolAccept\n         std::vector<COutPoint>& m_coins_to_uncache;\n         /** When true, the transaction or package will not be submitted to the mempool. */\n         const bool m_test_accept;\n-        /** Whether we allow transactions to replace mempool transactions by BIP125 rules. If false,\n+        /** Whether we allow transactions to replace mempool transactions. If false,\n          * any transaction spending the same inputs as a transaction in the mempool is considered\n          * a conflict. */\n         const bool m_allow_replacement;\n+        /** When true, allow sibling eviction. This only occurs in single transaction package settings. */\n+        const bool m_allow_sibling_eviction;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/30072#discussion_r1612073178",
      "id" : 1612073178,
      "in_reply_to_id" : 1612056701,
      "line" : 465,
      "node_id" : "PRRC_kwDOABII585gFkja",
      "original_commit_id" : "69f7ab05bafec1cf06fd7a58351f78e32bbfa2cf",
      "original_line" : 465,
      "original_position" : 10,
      "original_start_line" : 464,
      "path" : "src/validation.cpp",
      "position" : 12,
      "pull_request_review_id" : 2074620941,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/30072",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1612073178/reactions"
      },
      "side" : "RIGHT",
      "start_line" : 464,
      "start_side" : "RIGHT",
      "subject_type" : "line",
      "updated_at" : "2024-05-23T17:29:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1612073178",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5767891?v=4",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "node_id" : "MDQ6VXNlcjU3Njc4OTE=",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/30072#discussion_r1612127074"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/30072"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1612127074"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Is there any case in which `m_allow_sibling_eviction` is not shadowing `m_allow_replacement`? All the uses I see, they have the same value, or if one is set, the other is assumed.\r\n\r\nIs that just the case now, and may it be different in a follow-up? Otherwise, what is the point of having two flags?",
      "commit_id" : "2fd34ba504957331f5a08614b6e1f8317260f04d",
      "created_at" : "2024-05-23T18:13:21Z",
      "diff_hunk" : "@@ -981,8 +989,11 @@ bool MemPoolAccept::PreChecks(ATMPArgs& args, Workspace& ws)\n     // check using the full ancestor set here because it's more convenient to use what we have\n     // already calculated.\n     if (const auto err{SingleV3Checks(ws.m_ptx, ws.m_ancestors, ws.m_conflicts, ws.m_vsize)}) {\n-        // Disabled within package validation.\n-        if (err->second != nullptr && args.m_allow_replacement) {\n+        // Single transaction contexts only.\n+        if (args.m_allow_sibling_eviction && err->second != nullptr) {\n+            // We should only be considering where replacement is considered valid as well.\n+            Assume(args.m_allow_replacement);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/30072#discussion_r1612127074",
      "id" : 1612127074,
      "line" : 1037,
      "node_id" : "PRRC_kwDOABII585gFxti",
      "original_commit_id" : "69f7ab05bafec1cf06fd7a58351f78e32bbfa2cf",
      "original_line" : 995,
      "original_position" : 71,
      "original_start_line" : null,
      "path" : "src/validation.cpp",
      "position" : 221,
      "pull_request_review_id" : 2061682943,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/30072",
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1612127074/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-05-23T18:36:55Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1612127074",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6665628?v=4",
         "events_url" : "https://api.github.com/users/sr-gi/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sr-gi/followers",
         "following_url" : "https://api.github.com/users/sr-gi/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sr-gi/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sr-gi",
         "id" : 6665628,
         "login" : "sr-gi",
         "node_id" : "MDQ6VXNlcjY2NjU2Mjg=",
         "organizations_url" : "https://api.github.com/users/sr-gi/orgs",
         "received_events_url" : "https://api.github.com/users/sr-gi/received_events",
         "repos_url" : "https://api.github.com/users/sr-gi/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sr-gi/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sr-gi/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sr-gi"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/30072#discussion_r1612164710"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/30072"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1612164710"
         }
      },
      "author_association" : "MEMBER",
      "body" : "In package RBF this changes: https://github.com/bitcoin/bitcoin/pull/28984/commits/f93b602e74e101f4fed51f6d43b4930fcd7b0530#diff-97c3a52bc5fad452d82670a7fd291800bae20c7bc35bb82686c2c0a4ea7b5b98R528\r\n\r\nWe don't want sibling eviction attempts to happen during package rbf logic",
      "commit_id" : "2fd34ba504957331f5a08614b6e1f8317260f04d",
      "created_at" : "2024-05-23T18:49:02Z",
      "diff_hunk" : "@@ -981,8 +989,11 @@ bool MemPoolAccept::PreChecks(ATMPArgs& args, Workspace& ws)\n     // check using the full ancestor set here because it's more convenient to use what we have\n     // already calculated.\n     if (const auto err{SingleV3Checks(ws.m_ptx, ws.m_ancestors, ws.m_conflicts, ws.m_vsize)}) {\n-        // Disabled within package validation.\n-        if (err->second != nullptr && args.m_allow_replacement) {\n+        // Single transaction contexts only.\n+        if (args.m_allow_sibling_eviction && err->second != nullptr) {\n+            // We should only be considering where replacement is considered valid as well.\n+            Assume(args.m_allow_replacement);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/30072#discussion_r1612164710",
      "id" : 1612164710,
      "in_reply_to_id" : 1612127074,
      "line" : 1037,
      "node_id" : "PRRC_kwDOABII585gF65m",
      "original_commit_id" : "69f7ab05bafec1cf06fd7a58351f78e32bbfa2cf",
      "original_line" : 995,
      "original_position" : 71,
      "original_start_line" : null,
      "path" : "src/validation.cpp",
      "position" : 221,
      "pull_request_review_id" : 2074766642,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/30072",
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1612164710/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-05-23T18:49:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1612164710",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5767891?v=4",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "node_id" : "MDQ6VXNlcjU3Njc4OTE=",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/30072#discussion_r1612164921"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/30072"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1612164921"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I reverted that change based on your feedback already :)",
      "commit_id" : "2fd34ba504957331f5a08614b6e1f8317260f04d",
      "created_at" : "2024-05-23T18:49:14Z",
      "diff_hunk" : "@@ -1418,11 +1433,8 @@ PackageMempoolAcceptResult MemPoolAccept::AcceptMultipleTransactions(const std::\n             MempoolAcceptResult::FeeFailure(placeholder_state, CFeeRate(m_total_modified_fees, m_total_vsize), all_package_wtxids)}});\n     }\n \n-    // Apply package mempool ancestor/descendant limits. Skip if there is only one transaction,\n-    // because it's unnecessary. Also, CPFP carve out can increase the limit for individual\n-    // transactions, but this exemption is not extended to packages in CheckPackageLimits().\n-    std::string err_string;\n-    if (txns.size() > 1 && !PackageMempoolChecks(txns, m_total_vsize, package_state)) {\n+    // Apply package mempool ancestor/descendant limits.\n+    if (!PackageMempoolChecks(txns, m_total_vsize, package_state)) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/30072#discussion_r1612164921",
      "id" : 1612164921,
      "in_reply_to_id" : 1603949576,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585gF685",
      "original_commit_id" : "90b60a16731ac756dce44c29f57d111f4dffba75",
      "original_line" : 1437,
      "original_position" : 103,
      "original_start_line" : null,
      "path" : "src/validation.cpp",
      "position" : null,
      "pull_request_review_id" : 2074766937,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/30072",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1612164921/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-05-23T18:49:14Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1612164921",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5767891?v=4",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "node_id" : "MDQ6VXNlcjU3Njc4OTE=",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/30072#discussion_r1612164986"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/30072"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1612164986"
         }
      },
      "author_association" : "MEMBER",
      "body" : "My reading of it is if it fails *below* for a second time, we will want to have cached the first error string.\r\n\r\neither way, this PR hopefully doesn't make this confusion worse than status quo?",
      "commit_id" : "2fd34ba504957331f5a08614b6e1f8317260f04d",
      "created_at" : "2024-05-23T18:49:19Z",
      "diff_hunk" : "@@ -948,6 +957,13 @@ bool MemPoolAccept::PreChecks(ATMPArgs& args, Workspace& ws)\n         ws.m_ancestors = std::move(*ancestors);\n     } else {\n         // If CalculateMemPoolAncestors fails second time, we want the original error string.",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/30072#discussion_r1612164986",
      "id" : 1612164986,
      "in_reply_to_id" : 1603924191,
      "line" : 994,
      "node_id" : "PRRC_kwDOABII585gF696",
      "original_commit_id" : "90b60a16731ac756dce44c29f57d111f4dffba75",
      "original_line" : 994,
      "original_position" : 74,
      "original_start_line" : null,
      "path" : "src/validation.cpp",
      "position" : 193,
      "pull_request_review_id" : 2074767069,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/30072",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1612164986/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-05-23T18:49:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1612164986",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5767891?v=4",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "node_id" : "MDQ6VXNlcjU3Njc4OTE=",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/30072#discussion_r1612165294"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/30072"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1612165294"
         }
      },
      "author_association" : "MEMBER",
      "body" : "will touch if I have to retouch the PR",
      "commit_id" : "2fd34ba504957331f5a08614b6e1f8317260f04d",
      "created_at" : "2024-05-23T18:49:34Z",
      "diff_hunk" : "@@ -476,6 +476,9 @@ class MemPoolAccept\n          */\n         const std::optional<CFeeRate> m_client_maxfeerate;\n \n+        /** Whether CPFP carveout and RBF carveout are granted. */",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/30072#discussion_r1612165294",
      "id" : 1612165294,
      "in_reply_to_id" : 1603916879,
      "line" : 481,
      "node_id" : "PRRC_kwDOABII585gF7Cu",
      "original_commit_id" : "90b60a16731ac756dce44c29f57d111f4dffba75",
      "original_line" : 481,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "src/validation.cpp",
      "position" : 20,
      "pull_request_review_id" : 2074767511,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/30072",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1612165294/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-05-23T18:49:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1612165294",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5767891?v=4",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "node_id" : "MDQ6VXNlcjU3Njc4OTE=",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/30072#discussion_r1612181309"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/30072"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1612181309"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Yeah, I don't think it makes it worse",
      "commit_id" : "2fd34ba504957331f5a08614b6e1f8317260f04d",
      "created_at" : "2024-05-23T19:05:17Z",
      "diff_hunk" : "@@ -948,6 +957,13 @@ bool MemPoolAccept::PreChecks(ATMPArgs& args, Workspace& ws)\n         ws.m_ancestors = std::move(*ancestors);\n     } else {\n         // If CalculateMemPoolAncestors fails second time, we want the original error string.",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/30072#discussion_r1612181309",
      "id" : 1612181309,
      "in_reply_to_id" : 1603924191,
      "line" : 994,
      "node_id" : "PRRC_kwDOABII585gF-89",
      "original_commit_id" : "90b60a16731ac756dce44c29f57d111f4dffba75",
      "original_line" : 994,
      "original_position" : 74,
      "original_start_line" : null,
      "path" : "src/validation.cpp",
      "position" : 193,
      "pull_request_review_id" : 2074794949,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/30072",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1612181309/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-05-23T19:05:17Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1612181309",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6665628?v=4",
         "events_url" : "https://api.github.com/users/sr-gi/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sr-gi/followers",
         "following_url" : "https://api.github.com/users/sr-gi/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sr-gi/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sr-gi",
         "id" : 6665628,
         "login" : "sr-gi",
         "node_id" : "MDQ6VXNlcjY2NjU2Mjg=",
         "organizations_url" : "https://api.github.com/users/sr-gi/orgs",
         "received_events_url" : "https://api.github.com/users/sr-gi/received_events",
         "repos_url" : "https://api.github.com/users/sr-gi/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sr-gi/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sr-gi/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sr-gi"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/30072#discussion_r1612181759"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/30072"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1612181759"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Oh sorry, this was left on my first pass, which I never submitted ð ",
      "commit_id" : "2fd34ba504957331f5a08614b6e1f8317260f04d",
      "created_at" : "2024-05-23T19:05:42Z",
      "diff_hunk" : "@@ -1418,11 +1433,8 @@ PackageMempoolAcceptResult MemPoolAccept::AcceptMultipleTransactions(const std::\n             MempoolAcceptResult::FeeFailure(placeholder_state, CFeeRate(m_total_modified_fees, m_total_vsize), all_package_wtxids)}});\n     }\n \n-    // Apply package mempool ancestor/descendant limits. Skip if there is only one transaction,\n-    // because it's unnecessary. Also, CPFP carve out can increase the limit for individual\n-    // transactions, but this exemption is not extended to packages in CheckPackageLimits().\n-    std::string err_string;\n-    if (txns.size() > 1 && !PackageMempoolChecks(txns, m_total_vsize, package_state)) {\n+    // Apply package mempool ancestor/descendant limits.\n+    if (!PackageMempoolChecks(txns, m_total_vsize, package_state)) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/30072#discussion_r1612181759",
      "id" : 1612181759,
      "in_reply_to_id" : 1603949576,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585gF_D_",
      "original_commit_id" : "90b60a16731ac756dce44c29f57d111f4dffba75",
      "original_line" : 1437,
      "original_position" : 103,
      "original_start_line" : null,
      "path" : "src/validation.cpp",
      "position" : null,
      "pull_request_review_id" : 2074795675,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/30072",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1612181759/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-05-23T19:05:42Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1612181759",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6665628?v=4",
         "events_url" : "https://api.github.com/users/sr-gi/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sr-gi/followers",
         "following_url" : "https://api.github.com/users/sr-gi/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sr-gi/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sr-gi",
         "id" : 6665628,
         "login" : "sr-gi",
         "node_id" : "MDQ6VXNlcjY2NjU2Mjg=",
         "organizations_url" : "https://api.github.com/users/sr-gi/orgs",
         "received_events_url" : "https://api.github.com/users/sr-gi/received_events",
         "repos_url" : "https://api.github.com/users/sr-gi/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sr-gi/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sr-gi/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sr-gi"
      }
   }
]
