[
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage\nFor detailed information about the code coverage, see the [test coverage report](https://corecheck.dev/bitcoin/bitcoin/pulls/28846).\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| Concept ACK | [hebasto](https://github.com/bitcoin/bitcoin/pull/28846#issuecomment-1806128909) |\n\nIf your review is incorrectly listed, please react with ð to this comment and the bot will ignore it on the next update.\n",
      "created_at" : "2023-11-10T17:15:56Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28846#issuecomment-1806113497",
      "id" : 1806113497,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28846",
      "node_id" : "IC_kwDOABII585rpxrZ",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1806113497/reactions"
      },
      "updated_at" : "2023-11-10T17:21:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1806113497",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Concept ACK.",
      "created_at" : "2023-11-10T17:21:05Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28846#issuecomment-1806128909",
      "id" : 1806128909,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28846",
      "node_id" : "IC_kwDOABII585rp1cN",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1806128909/reactions"
      },
      "updated_at" : "2023-11-10T17:21:05Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1806128909",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/32963518?v=4",
         "events_url" : "https://api.github.com/users/hebasto/events{/privacy}",
         "followers_url" : "https://api.github.com/users/hebasto/followers",
         "following_url" : "https://api.github.com/users/hebasto/following{/other_user}",
         "gists_url" : "https://api.github.com/users/hebasto/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/hebasto",
         "id" : 32963518,
         "login" : "hebasto",
         "node_id" : "MDQ6VXNlcjMyOTYzNTE4",
         "organizations_url" : "https://api.github.com/users/hebasto/orgs",
         "received_events_url" : "https://api.github.com/users/hebasto/received_events",
         "repos_url" : "https://api.github.com/users/hebasto/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/hebasto/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/hebasto"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28846#discussion_r1399057303"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28846"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1399057303"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "In commit \"depends: always install libmultiprocess to /lib\" (156366f10aa38c612e26a1f93d8503786f3d3a34)\r\n\r\nThanks for this fix. It seems like a regression after https://github.com/chaincodelabs/libmultiprocess/pull/79#discussion_r1399049836\r\n\r\nWould suggest a comment here like \"# Hardcode library install path to \"lib\" to match the  PKG_CONFIG_PATH setting in depends/config.site.in which also hardcodes \"lib\". Without this setting, cmake by default would use the OS library directory, which might be \"lib64\" or something else, not \"lib\", on multiarch systems.\"\r\n\r\nWould also suggest dropping trailing slash in \"lib/\" since it doesn't seem like directories are normally represented with a trailing slash in https://cmake.org/cmake/help/latest/module/GNUInstallDirs.html",
      "commit_id" : "c3a962be10a98192a93518b0222c21fc7f115404",
      "created_at" : "2023-11-20T11:25:54Z",
      "diff_hunk" : "@@ -9,6 +9,7 @@ $(package)_dependencies += native_capnp\n endif\n \n define $(package)_set_vars :=\n+$(package)_config_opts += -DCMAKE_INSTALL_LIBDIR=lib/",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28846#discussion_r1399057303",
      "id" : 1399057303,
      "line" : 12,
      "node_id" : "PRRC_kwDOABII585TY-uX",
      "original_commit_id" : "156366f10aa38c612e26a1f93d8503786f3d3a34",
      "original_line" : 12,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "depends/packages/libmultiprocess.mk",
      "position" : 4,
      "pull_request_review_id" : 1739571746,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28846",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1399057303/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-11-20T12:30:18Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1399057303",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28846#discussion_r1399123100"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28846"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1399123100"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "In commit \"depends: build libmultiprocess with position independant code\" (c3a962be10a98192a93518b0222c21fc7f115404)\r\n\r\nI don't think I really understand what's going on here, but this seems like a reasonable change given that `--with-pic` seems to be used on so many other depends builds [^1]. I guess it is a little unclear why in the other depends builds, the `--with-pic` option seems to be selectively applied for individual platforms like linux, freebsd, netbsd, openbsd (and never darwin), while this PIC option apples to all platforms. But maybe always setting the option for cmake is fine.\r\n\r\n[^1]: I asked chatgpt to explain the link error https://chat.openai.com/share/6d5445a7-14ac-493b-a41a-d2b23899caa6 I but didn't have enough details about the build to be able to narrow down specifically what is happening.\r\n\r\nI guess I have 3 questions:\r\n\r\n1. Is this workaround still needed if you add `--disable-shared` to the capnp build for this platform like we are already doing the for the android platform? Maybe we should just be building capnp with `--disable-shared` unconditionally?\r\n\r\nhttps://github.com/bitcoin/bitcoin/blob/d752349029ec7a76f1fd440db2ec2e458d0f3c99/depends/packages/capnp.mk#L14\r\n\r\n2. Opposite question: is the android `--disable-shared` workaround needed anymore if  ` -DCMAKE_POSITION_INDEPENDENT_CODE=ON` is used here? Maybe we could partially revert #25322 after this?\r\n\r\n3. Is this workaround still needed with #28856? That PR seems to drop the android workaround, so maybe switching both of these libraries to cmake would just fix the problem automatically.",
      "commit_id" : "c3a962be10a98192a93518b0222c21fc7f115404",
      "created_at" : "2023-11-20T12:18:15Z",
      "diff_hunk" : "@@ -10,6 +10,7 @@ endif\n \n define $(package)_set_vars :=\n $(package)_config_opts += -DCMAKE_INSTALL_LIBDIR=lib/\n+$(package)_config_opts += -DCMAKE_POSITION_INDEPENDENT_CODE=ON",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28846#discussion_r1399123100",
      "id" : 1399123100,
      "line" : 13,
      "node_id" : "PRRC_kwDOABII585TZOyc",
      "original_commit_id" : "c3a962be10a98192a93518b0222c21fc7f115404",
      "original_line" : 13,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "depends/packages/libmultiprocess.mk",
      "position" : 4,
      "pull_request_review_id" : 1739571746,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28846",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1399123100/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-11-20T12:26:38Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1399123100",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   }
]
