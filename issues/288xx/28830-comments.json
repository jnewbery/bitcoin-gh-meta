[
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage\nFor detailed information about the code coverage, see the [test coverage report](https://corecheck.dev/bitcoin/bitcoin/pulls/28830).\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| ACK | [ryanofsky](https://github.com/bitcoin/bitcoin/pull/28830#pullrequestreview-2058693860) |\n| Stale ACK | [glozow](https://github.com/bitcoin/bitcoin/pull/28830#pullrequestreview-2052565010), [stickies-v](https://github.com/bitcoin/bitcoin/pull/28830#issuecomment-2112454690) |\n\nIf your review is incorrectly listed, please react with ð to this comment and the bot will ignore it on the next update.\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#30058](https://github.com/bitcoin/bitcoin/pull/30058) (Encapsulate warnings in generalized node::Warnings and remove globals by stickies-v)\n* [#29641](https://github.com/bitcoin/bitcoin/pull/29641) (scripted-diff: Use LogInfo/LogDebug over LogPrintf/LogPrint by maflcko)\n* [#29086](https://github.com/bitcoin/bitcoin/pull/29086) (refactor: Simply include CTxMemPool::Options in CTxMemPool directly rather than duplicating definition by luke-jr)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.\n",
      "created_at" : "2023-11-09T11:24:04Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28830#issuecomment-1803649349",
      "id" : 1803649349,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28830",
      "node_id" : "IC_kwDOABII585rgYFF",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1803649349/reactions"
      },
      "updated_at" : "2024-05-15T18:08:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1803649349",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->\nð This pull request conflicts with the target branch and [needs rebase](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#rebasing-changes).\n",
      "created_at" : "2023-12-01T21:12:58Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28830#issuecomment-1836784064",
      "id" : 1836784064,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28830",
      "node_id" : "IC_kwDOABII585texnA",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1836784064/reactions"
      },
      "updated_at" : "2023-12-01T21:12:58Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1836784064",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28830#discussion_r1415372320"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28830"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1415372320"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "I don't think this actually does anything? (+[here](https://github.com/bitcoin/bitcoin/pull/28830/files#diff-07fe07ecfff4dd7c233a453006567140ff20d226fd73a20406df14982b1e415bR132))",
      "commit_id" : "3aa41a31690da2ae22b6a15a9a5de0de78a01757",
      "created_at" : "2023-12-05T11:04:45Z",
      "diff_hunk" : "@@ -125,7 +125,9 @@ CTxMemPool MakeMempool(FuzzedDataProvider& fuzzed_data_provider, const NodeConte\n     mempool_opts.require_standard = fuzzed_data_provider.ConsumeBool();\n \n     // ...and construct a CTxMemPool from it\n-    return CTxMemPool{mempool_opts};\n+    std::optional<bilingual_str> error{};\n+    return CTxMemPool{mempool_opts, error};\n+    Assert(!error);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28830#discussion_r1415372320",
      "id" : 1415372320,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585UXN4g",
      "original_commit_id" : "29818f5f839bb0a08980da6f6dbb980ef7754652",
      "original_line" : 130,
      "original_position" : 7,
      "original_start_line" : null,
      "path" : "src/test/fuzz/package_eval.cpp",
      "position" : null,
      "pull_request_review_id" : 1764747210,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28830",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1415372320/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-12-05T13:33:52Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1415372320",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/69010457?v=4",
         "events_url" : "https://api.github.com/users/stickies-v/events{/privacy}",
         "followers_url" : "https://api.github.com/users/stickies-v/followers",
         "following_url" : "https://api.github.com/users/stickies-v/following{/other_user}",
         "gists_url" : "https://api.github.com/users/stickies-v/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/stickies-v",
         "id" : 69010457,
         "login" : "stickies-v",
         "node_id" : "MDQ6VXNlcjY5MDEwNDU3",
         "organizations_url" : "https://api.github.com/users/stickies-v/orgs",
         "received_events_url" : "https://api.github.com/users/stickies-v/received_events",
         "repos_url" : "https://api.github.com/users/stickies-v/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/stickies-v/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/stickies-v/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/stickies-v"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28830#discussion_r1415619542"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28830"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1415619542"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "I think this approach is less safe than it has to be, it's pretty easy to not handle the `error`. Would it make more sense to make the ctor private and add a `util::Result<CTxMemPool> Make(const Options& opts)` factory method?",
      "commit_id" : "3aa41a31690da2ae22b6a15a9a5de0de78a01757",
      "created_at" : "2023-12-05T13:32:14Z",
      "diff_hunk" : "@@ -400,8 +400,8 @@ void CTxMemPoolEntry::UpdateAncestorState(int32_t modifySize, CAmount modifyFee,\n     assert(int(nSigOpCostWithAncestors) >= 0);\n }\n \n-CTxMemPool::CTxMemPool(const Options& opts)\n-    : m_check_ratio{opts.check_ratio},\n+CTxMemPool::CTxMemPool(const Options& opts, std::optional<bilingual_str>& error)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28830#discussion_r1415619542",
      "id" : 1415619542,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585UYKPW",
      "original_commit_id" : "29818f5f839bb0a08980da6f6dbb980ef7754652",
      "original_line" : 403,
      "original_position" : 6,
      "original_start_line" : null,
      "path" : "src/txmempool.cpp",
      "position" : null,
      "pull_request_review_id" : 1764747210,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28830",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1415619542/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-12-05T14:08:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1415619542",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/69010457?v=4",
         "events_url" : "https://api.github.com/users/stickies-v/events{/privacy}",
         "followers_url" : "https://api.github.com/users/stickies-v/followers",
         "following_url" : "https://api.github.com/users/stickies-v/following{/other_user}",
         "gists_url" : "https://api.github.com/users/stickies-v/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/stickies-v",
         "id" : 69010457,
         "login" : "stickies-v",
         "node_id" : "MDQ6VXNlcjY5MDEwNDU3",
         "organizations_url" : "https://api.github.com/users/stickies-v/orgs",
         "received_events_url" : "https://api.github.com/users/stickies-v/received_events",
         "repos_url" : "https://api.github.com/users/stickies-v/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/stickies-v/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/stickies-v/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/stickies-v"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28830#discussion_r1415634415"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28830"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1415634415"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Funny that compilers compile this code",
      "commit_id" : "3aa41a31690da2ae22b6a15a9a5de0de78a01757",
      "created_at" : "2023-12-05T13:42:52Z",
      "diff_hunk" : "@@ -125,7 +125,9 @@ CTxMemPool MakeMempool(FuzzedDataProvider& fuzzed_data_provider, const NodeConte\n     mempool_opts.require_standard = fuzzed_data_provider.ConsumeBool();\n \n     // ...and construct a CTxMemPool from it\n-    return CTxMemPool{mempool_opts};\n+    std::optional<bilingual_str> error{};\n+    return CTxMemPool{mempool_opts, error};\n+    Assert(!error);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28830#discussion_r1415634415",
      "id" : 1415634415,
      "in_reply_to_id" : 1415372320,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585UYN3v",
      "original_commit_id" : "29818f5f839bb0a08980da6f6dbb980ef7754652",
      "original_line" : 130,
      "original_position" : 7,
      "original_start_line" : null,
      "path" : "src/test/fuzz/package_eval.cpp",
      "position" : null,
      "pull_request_review_id" : 1765113948,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28830",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1415634415/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-12-05T13:42:53Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1415634415",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/maflcko/events{/privacy}",
         "followers_url" : "https://api.github.com/users/maflcko/followers",
         "following_url" : "https://api.github.com/users/maflcko/following{/other_user}",
         "gists_url" : "https://api.github.com/users/maflcko/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/maflcko",
         "id" : 6399679,
         "login" : "maflcko",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/maflcko/orgs",
         "received_events_url" : "https://api.github.com/users/maflcko/received_events",
         "repos_url" : "https://api.github.com/users/maflcko/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/maflcko/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/maflcko/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/maflcko"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28830#discussion_r1415690508"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28830"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1415690508"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Clang has an `-Wunreachable-code`. Maybe someone can integrate this into the build system by default?\r\n\r\nEdit: https://github.com/bitcoin/bitcoin/pull/28999 ",
      "commit_id" : "3aa41a31690da2ae22b6a15a9a5de0de78a01757",
      "created_at" : "2023-12-05T14:19:47Z",
      "diff_hunk" : "@@ -125,7 +125,9 @@ CTxMemPool MakeMempool(FuzzedDataProvider& fuzzed_data_provider, const NodeConte\n     mempool_opts.require_standard = fuzzed_data_provider.ConsumeBool();\n \n     // ...and construct a CTxMemPool from it\n-    return CTxMemPool{mempool_opts};\n+    std::optional<bilingual_str> error{};\n+    return CTxMemPool{mempool_opts, error};\n+    Assert(!error);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28830#discussion_r1415690508",
      "id" : 1415690508,
      "in_reply_to_id" : 1415372320,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585UYbkM",
      "original_commit_id" : "29818f5f839bb0a08980da6f6dbb980ef7754652",
      "original_line" : 130,
      "original_position" : 7,
      "original_start_line" : null,
      "path" : "src/test/fuzz/package_eval.cpp",
      "position" : null,
      "pull_request_review_id" : 1765204674,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28830",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1415690508/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-12-05T14:42:28Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1415690508",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/maflcko/events{/privacy}",
         "followers_url" : "https://api.github.com/users/maflcko/followers",
         "following_url" : "https://api.github.com/users/maflcko/following{/other_user}",
         "gists_url" : "https://api.github.com/users/maflcko/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/maflcko",
         "id" : 6399679,
         "login" : "maflcko",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/maflcko/orgs",
         "received_events_url" : "https://api.github.com/users/maflcko/received_events",
         "repos_url" : "https://api.github.com/users/maflcko/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/maflcko/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/maflcko/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/maflcko"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Rebased 29818f5f839bb0a08980da6f6dbb980ef7754652 -> 1d18cc6cb30a875c4b6bea946a8c19d42e76dbcf ([mempoolArgs_0](https://github.com/TheCharlatan/bitcoin/tree/mempoolArgs_0) -> [mempoolArgs_1](https://github.com/TheCharlatan/bitcoin/tree/mempoolArgs_1),  [compare](https://github.com/TheCharlatan/bitcoin/compare/mempoolArgs_0..mempoolArgs_1))\r\n\r\nUpdated 1d18cc6cb30a875c4b6bea946a8c19d42e76dbcf -> 3aa41a31690da2ae22b6a15a9a5de0de78a01757 ([mempoolArgs_1](https://github.com/TheCharlatan/bitcoin/tree/mempoolArgs_1) -> [mempoolArgs_2](https://github.com/TheCharlatan/bitcoin/tree/mempoolArgs_2),  [compare](https://github.com/TheCharlatan/bitcoin/compare/mempoolArgs_1..mempoolArgs_2)) \r\n* Addressed @stickies-v's [comment](https://github.com/bitcoin/bitcoin/pull/28830#discussion_r1415619542), using the `Result` type and a factory method instead of error string parameters.\r\n",
      "created_at" : "2023-12-05T22:38:50Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28830#issuecomment-1841742823",
      "id" : 1841742823,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28830",
      "node_id" : "IC_kwDOABII585txsPn",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1841742823/reactions"
      },
      "updated_at" : "2023-12-05T22:38:50Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1841742823",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8421793?v=4",
         "events_url" : "https://api.github.com/users/TheCharlatan/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheCharlatan/followers",
         "following_url" : "https://api.github.com/users/TheCharlatan/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheCharlatan/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheCharlatan",
         "id" : 8421793,
         "login" : "TheCharlatan",
         "node_id" : "MDQ6VXNlcjg0MjE3OTM=",
         "organizations_url" : "https://api.github.com/users/TheCharlatan/orgs",
         "received_events_url" : "https://api.github.com/users/TheCharlatan/received_events",
         "repos_url" : "https://api.github.com/users/TheCharlatan/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheCharlatan/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheCharlatan/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheCharlatan"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28830#discussion_r1416362699"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28830"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1416362699"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Uff, embarassing.",
      "commit_id" : "3aa41a31690da2ae22b6a15a9a5de0de78a01757",
      "created_at" : "2023-12-05T22:41:50Z",
      "diff_hunk" : "@@ -125,7 +125,9 @@ CTxMemPool MakeMempool(FuzzedDataProvider& fuzzed_data_provider, const NodeConte\n     mempool_opts.require_standard = fuzzed_data_provider.ConsumeBool();\n \n     // ...and construct a CTxMemPool from it\n-    return CTxMemPool{mempool_opts};\n+    std::optional<bilingual_str> error{};\n+    return CTxMemPool{mempool_opts, error};\n+    Assert(!error);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28830#discussion_r1416362699",
      "id" : 1416362699,
      "in_reply_to_id" : 1415372320,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585Ua_rL",
      "original_commit_id" : "29818f5f839bb0a08980da6f6dbb980ef7754652",
      "original_line" : 130,
      "original_position" : 7,
      "original_start_line" : null,
      "path" : "src/test/fuzz/package_eval.cpp",
      "position" : null,
      "pull_request_review_id" : 1766241970,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28830",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1416362699/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-12-05T22:41:50Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1416362699",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8421793?v=4",
         "events_url" : "https://api.github.com/users/TheCharlatan/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheCharlatan/followers",
         "following_url" : "https://api.github.com/users/TheCharlatan/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheCharlatan/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheCharlatan",
         "id" : 8421793,
         "login" : "TheCharlatan",
         "node_id" : "MDQ6VXNlcjg0MjE3OTM=",
         "organizations_url" : "https://api.github.com/users/TheCharlatan/orgs",
         "received_events_url" : "https://api.github.com/users/TheCharlatan/received_events",
         "repos_url" : "https://api.github.com/users/TheCharlatan/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheCharlatan/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheCharlatan/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheCharlatan"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28830#discussion_r1422813069"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28830"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1422813069"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "nit\r\n```suggestion\r\n    MockedTxPool& tx_pool = *static_cast<MockedTxPool*>(tx_pool_.get());\r\n```",
      "commit_id" : "3aa41a31690da2ae22b6a15a9a5de0de78a01757",
      "created_at" : "2023-12-11T17:00:54Z",
      "diff_hunk" : "@@ -147,8 +147,8 @@ FUZZ_TARGET(tx_package_eval, .init = initialize_tx_pool)\n     auto outpoints_updater = std::make_shared<OutpointsUpdater>(mempool_outpoints);\n     RegisterSharedValidationInterface(outpoints_updater);\n \n-    CTxMemPool tx_pool_{MakeMempool(fuzzed_data_provider, node)};\n-    MockedTxPool& tx_pool = *static_cast<MockedTxPool*>(&tx_pool_);\n+    auto tx_pool_{Assert(MakeMempool(fuzzed_data_provider, node))};\n+    MockedTxPool& tx_pool = *static_cast<MockedTxPool*>(&*tx_pool_);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28830#discussion_r1422813069",
      "id" : 1422813069,
      "line" : 151,
      "node_id" : "PRRC_kwDOABII585UzmeN",
      "original_commit_id" : "3aa41a31690da2ae22b6a15a9a5de0de78a01757",
      "original_line" : 151,
      "original_position" : 25,
      "original_start_line" : null,
      "path" : "src/test/fuzz/package_eval.cpp",
      "position" : 25,
      "pull_request_review_id" : 1775679380,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28830",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1422813069/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-12-12T14:42:44Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1422813069",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/69010457?v=4",
         "events_url" : "https://api.github.com/users/stickies-v/events{/privacy}",
         "followers_url" : "https://api.github.com/users/stickies-v/followers",
         "following_url" : "https://api.github.com/users/stickies-v/following{/other_user}",
         "gists_url" : "https://api.github.com/users/stickies-v/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/stickies-v",
         "id" : 69010457,
         "login" : "stickies-v",
         "node_id" : "MDQ6VXNlcjY5MDEwNDU3",
         "organizations_url" : "https://api.github.com/users/stickies-v/orgs",
         "received_events_url" : "https://api.github.com/users/stickies-v/received_events",
         "repos_url" : "https://api.github.com/users/stickies-v/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/stickies-v/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/stickies-v/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/stickies-v"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28830#discussion_r1422850484"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28830"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1422850484"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "nit: could limit scope of `mempool`:\r\n\r\n<details>\r\n<summary>git diff on 3aa41a3169</summary>\r\n\r\n```diff\r\ndiff --git a/src/init.cpp b/src/init.cpp\r\nindex eb88a3fa73..1fa34b77e8 100644\r\n--- a/src/init.cpp\r\n+++ b/src/init.cpp\r\n@@ -1476,11 +1476,11 @@ bool AppInitMain(NodeContext& node, interfaces::BlockAndHeaderTipInfo* tip_info)\r\n     }\r\n \r\n     for (bool fLoaded = false; !fLoaded && !ShutdownRequested();) {\r\n-        auto mempool{CTxMemPool::Make(mempool_opts)};\r\n-        if (!mempool) {\r\n+        if (auto mempool{CTxMemPool::Make(mempool_opts)}) {\r\n+            node.mempool = std::move(mempool.value());\r\n+        } else {\r\n             return InitError(ErrorString(mempool));\r\n         }\r\n-        node.mempool = std::move(mempool.value());\r\n         LogPrintf(\"* Using %.1f MiB for in-memory UTXO set (plus up to %.1f MiB of unused mempool space)\\n\", cache_sizes.coins * (1.0 / 1024 / 1024), mempool_opts.max_size_bytes * (1.0 / 1024 / 1024));\r\n \r\n \r\n\r\n```\r\n</details>\r\n",
      "commit_id" : "3aa41a31690da2ae22b6a15a9a5de0de78a01757",
      "created_at" : "2023-12-11T17:27:52Z",
      "diff_hunk" : "@@ -1474,16 +1474,15 @@ bool AppInitMain(NodeContext& node, interfaces::BlockAndHeaderTipInfo* tip_info)\n     if (!result) {\n         return InitError(util::ErrorString(result));\n     }\n-    mempool_opts.check_ratio = std::clamp<int>(mempool_opts.check_ratio, 0, 1'000'000);\n-\n-    int64_t descendant_limit_bytes = mempool_opts.limits.descendant_size_vbytes * 40;\n-    if (mempool_opts.max_size_bytes < 0 || mempool_opts.max_size_bytes < descendant_limit_bytes) {\n-        return InitError(strprintf(_(\"-maxmempool must be at least %d MB\"), std::ceil(descendant_limit_bytes / 1'000'000.0)));\n-    }\n-    LogPrintf(\"* Using %.1f MiB for in-memory UTXO set (plus up to %.1f MiB of unused mempool space)\\n\", cache_sizes.coins * (1.0 / 1024 / 1024), mempool_opts.max_size_bytes * (1.0 / 1024 / 1024));\n \n     for (bool fLoaded = false; !fLoaded && !ShutdownRequested();) {\n-        node.mempool = std::make_unique<CTxMemPool>(mempool_opts);\n+        auto mempool{CTxMemPool::Make(mempool_opts)};\n+        if (!mempool) {\n+            return InitError(ErrorString(mempool));\n+        }",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28830#discussion_r1422850484",
      "id" : 1422850484,
      "line" : 1482,
      "node_id" : "PRRC_kwDOABII585Uzvm0",
      "original_commit_id" : "3aa41a31690da2ae22b6a15a9a5de0de78a01757",
      "original_line" : 1482,
      "original_position" : 17,
      "original_start_line" : 1479,
      "path" : "src/init.cpp",
      "position" : 17,
      "pull_request_review_id" : 1775679380,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28830",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1422850484/reactions"
      },
      "side" : "RIGHT",
      "start_line" : 1479,
      "start_side" : "RIGHT",
      "subject_type" : "line",
      "updated_at" : "2023-12-12T14:42:44Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1422850484",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/69010457?v=4",
         "events_url" : "https://api.github.com/users/stickies-v/events{/privacy}",
         "followers_url" : "https://api.github.com/users/stickies-v/followers",
         "following_url" : "https://api.github.com/users/stickies-v/following{/other_user}",
         "gists_url" : "https://api.github.com/users/stickies-v/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/stickies-v",
         "id" : 69010457,
         "login" : "stickies-v",
         "node_id" : "MDQ6VXNlcjY5MDEwNDU3",
         "organizations_url" : "https://api.github.com/users/stickies-v/orgs",
         "received_events_url" : "https://api.github.com/users/stickies-v/received_events",
         "repos_url" : "https://api.github.com/users/stickies-v/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/stickies-v/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/stickies-v/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/stickies-v"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28830#discussion_r1422862314"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28830"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1422862314"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "nit: is there a meaningful use for `Assert` here (and in most other places in this pull) since we already use `util::Result::value()` and there are no side effects?",
      "commit_id" : "3aa41a31690da2ae22b6a15a9a5de0de78a01757",
      "created_at" : "2023-12-11T17:35:16Z",
      "diff_hunk" : "@@ -109,7 +110,8 @@ FUZZ_TARGET(mini_miner, .init = initialize_miner)\n FUZZ_TARGET(mini_miner_selection, .init = initialize_miner)\n {\n     FuzzedDataProvider fuzzed_data_provider{buffer.data(), buffer.size()};\n-    CTxMemPool pool{CTxMemPool::Options{}};\n+    auto tx_pool{std::move(Assert(CTxMemPool::Make(CTxMemPool::Options{})).value())};",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28830#discussion_r1422862314",
      "id" : 1422862314,
      "line" : 113,
      "node_id" : "PRRC_kwDOABII585Uzyfq",
      "original_commit_id" : "3aa41a31690da2ae22b6a15a9a5de0de78a01757",
      "original_line" : 113,
      "original_position" : 15,
      "original_start_line" : null,
      "path" : "src/test/fuzz/mini_miner.cpp",
      "position" : 15,
      "pull_request_review_id" : 1775679380,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28830",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1422862314/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-12-12T14:42:44Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1422862314",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/69010457?v=4",
         "events_url" : "https://api.github.com/users/stickies-v/events{/privacy}",
         "followers_url" : "https://api.github.com/users/stickies-v/followers",
         "following_url" : "https://api.github.com/users/stickies-v/following{/other_user}",
         "gists_url" : "https://api.github.com/users/stickies-v/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/stickies-v",
         "id" : 69010457,
         "login" : "stickies-v",
         "node_id" : "MDQ6VXNlcjY5MDEwNDU3",
         "organizations_url" : "https://api.github.com/users/stickies-v/orgs",
         "received_events_url" : "https://api.github.com/users/stickies-v/received_events",
         "repos_url" : "https://api.github.com/users/stickies-v/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/stickies-v/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/stickies-v/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/stickies-v"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28830#discussion_r1423915340"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28830"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1423915340"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "nit: unnecessary newline?",
      "commit_id" : "3aa41a31690da2ae22b6a15a9a5de0de78a01757",
      "created_at" : "2023-12-12T12:22:20Z",
      "diff_hunk" : "@@ -428,12 +431,11 @@ class CTxMemPool\n                                                               const Limits& limits\n                                                               ) const EXCLUSIVE_LOCKS_REQUIRED(cs);\n \n+",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28830#discussion_r1423915340",
      "id" : 1423915340,
      "line" : 434,
      "node_id" : "PRRC_kwDOABII585U3zlM",
      "original_commit_id" : "3aa41a31690da2ae22b6a15a9a5de0de78a01757",
      "original_line" : 434,
      "original_position" : 17,
      "original_start_line" : null,
      "path" : "src/txmempool.h",
      "position" : 17,
      "pull_request_review_id" : 1775679380,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28830",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1423915340/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-12-12T14:42:44Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1423915340",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/69010457?v=4",
         "events_url" : "https://api.github.com/users/stickies-v/events{/privacy}",
         "followers_url" : "https://api.github.com/users/stickies-v/followers",
         "following_url" : "https://api.github.com/users/stickies-v/following{/other_user}",
         "gists_url" : "https://api.github.com/users/stickies-v/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/stickies-v",
         "id" : 69010457,
         "login" : "stickies-v",
         "node_id" : "MDQ6VXNlcjY5MDEwNDU3",
         "organizations_url" : "https://api.github.com/users/stickies-v/orgs",
         "received_events_url" : "https://api.github.com/users/stickies-v/received_events",
         "repos_url" : "https://api.github.com/users/stickies-v/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/stickies-v/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/stickies-v/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/stickies-v"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28830#discussion_r1423923859"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28830"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1423923859"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "nit: I'd intuitively expect `Make` to return a (wrapped) ` CTxMemPool`. Would it make sense to name this method `MakeUnique`?",
      "commit_id" : "3aa41a31690da2ae22b6a15a9a5de0de78a01757",
      "created_at" : "2023-12-12T12:29:48Z",
      "diff_hunk" : "@@ -452,7 +454,7 @@ class CTxMemPool\n      * accepting transactions becomes O(N^2) where N is the number of transactions\n      * in the pool.\n      */\n-    explicit CTxMemPool(const Options& opts);\n+    static util::Result<std::unique_ptr<CTxMemPool>> Make(const Options& opts);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28830#discussion_r1423923859",
      "id" : 1423923859,
      "line" : 457,
      "node_id" : "PRRC_kwDOABII585U31qT",
      "original_commit_id" : "3aa41a31690da2ae22b6a15a9a5de0de78a01757",
      "original_line" : 457,
      "original_position" : 32,
      "original_start_line" : null,
      "path" : "src/txmempool.h",
      "position" : 32,
      "pull_request_review_id" : 1775679380,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28830",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1423923859/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-12-12T14:42:44Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1423923859",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/69010457?v=4",
         "events_url" : "https://api.github.com/users/stickies-v/events{/privacy}",
         "followers_url" : "https://api.github.com/users/stickies-v/followers",
         "following_url" : "https://api.github.com/users/stickies-v/following{/other_user}",
         "gists_url" : "https://api.github.com/users/stickies-v/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/stickies-v",
         "id" : 69010457,
         "login" : "stickies-v",
         "node_id" : "MDQ6VXNlcjY5MDEwNDU3",
         "organizations_url" : "https://api.github.com/users/stickies-v/orgs",
         "received_events_url" : "https://api.github.com/users/stickies-v/received_events",
         "repos_url" : "https://api.github.com/users/stickies-v/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/stickies-v/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/stickies-v/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/stickies-v"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28830#discussion_r1424003014"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28830"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1424003014"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "nit: if we're okay dropping the `Assert`, would just one-line this ([+here ](https://github.com/bitcoin/bitcoin/pull/28830/files#diff-d324f8d2ac7811c1d9b47d79833154afa6e1e41261170573968ac2ebfde9f478R55-R56), [here](https://github.com/bitcoin/bitcoin/pull/28830/files#diff-77738eb901e87bd186e09ee7d817a0989f1a1a86d045bc2a8a4ffbe35f71145dR36-R37)). Otherwise, not a fan of using `mempool` (or `tx_pool`) as var names, when the difference with `pool` is one being a ptr to the other. `ppool` or `pool_ptr` (my preference) might be more clear?\r\n```suggestion\r\n    CTxMemPool& pool{*std::move(CTxMemPool::Make(MemPoolOptionsForTest(g_setup->m_node)).value())};\r\n```",
      "commit_id" : "3aa41a31690da2ae22b6a15a9a5de0de78a01757",
      "created_at" : "2023-12-12T13:35:50Z",
      "diff_hunk" : "@@ -38,7 +38,8 @@ FUZZ_TARGET(rbf, .init = initialize_rbf)\n         return;\n     }\n \n-    CTxMemPool pool{MemPoolOptionsForTest(g_setup->m_node)};\n+    auto mempool{std::move(Assert(CTxMemPool::Make(MemPoolOptionsForTest(g_setup->m_node))).value())};\n+    CTxMemPool& pool = *mempool;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28830#discussion_r1424003014",
      "id" : 1424003014,
      "line" : 42,
      "node_id" : "PRRC_kwDOABII585U4I_G",
      "original_commit_id" : "3aa41a31690da2ae22b6a15a9a5de0de78a01757",
      "original_line" : 42,
      "original_position" : 6,
      "original_start_line" : 41,
      "path" : "src/test/fuzz/rbf.cpp",
      "position" : 6,
      "pull_request_review_id" : 1775679380,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28830",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1424003014/reactions"
      },
      "side" : "RIGHT",
      "start_line" : 41,
      "start_side" : "RIGHT",
      "subject_type" : "line",
      "updated_at" : "2023-12-12T14:42:44Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1424003014",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/69010457?v=4",
         "events_url" : "https://api.github.com/users/stickies-v/events{/privacy}",
         "followers_url" : "https://api.github.com/users/stickies-v/followers",
         "following_url" : "https://api.github.com/users/stickies-v/following{/other_user}",
         "gists_url" : "https://api.github.com/users/stickies-v/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/stickies-v",
         "id" : 69010457,
         "login" : "stickies-v",
         "node_id" : "MDQ6VXNlcjY5MDEwNDU3",
         "organizations_url" : "https://api.github.com/users/stickies-v/orgs",
         "received_events_url" : "https://api.github.com/users/stickies-v/received_events",
         "repos_url" : "https://api.github.com/users/stickies-v/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/stickies-v/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/stickies-v/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/stickies-v"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28830#discussion_r1424090165"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28830"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1424090165"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Wdyt about this approach to fix the fuzzer (this impl requires rebase to use c++20 for `std::string::starts_with`)? This should be efficient without relying too much (but still somewhat) on the implementation of `CTxMemPool::Make`?\r\n\r\nAfter #25665 is merged, could have a `Make` return an enum failure value and avoid the errorstring checking. \r\n\r\n<details>\r\n<summary>git diff on 3aa41a3169</summary>\r\n\r\n```diff\r\ndiff --git a/src/test/fuzz/package_eval.cpp b/src/test/fuzz/package_eval.cpp\r\nindex ec708a5c53..7f8aecb1ae 100644\r\n--- a/src/test/fuzz/package_eval.cpp\r\n+++ b/src/test/fuzz/package_eval.cpp\r\n@@ -111,13 +111,15 @@ std::unique_ptr<CTxMemPool> MakeMempool(FuzzedDataProvider& fuzzed_data_provider\r\n     // Take the default options for tests...\r\n     CTxMemPool::Options mempool_opts{MemPoolOptionsForTest(node)};\r\n \r\n-\r\n     // ...override specific options for this specific fuzz suite\r\n     mempool_opts.limits.ancestor_count = fuzzed_data_provider.ConsumeIntegralInRange<unsigned>(0, 50);\r\n     mempool_opts.limits.ancestor_size_vbytes = fuzzed_data_provider.ConsumeIntegralInRange<unsigned>(0, 202) * 1'000;\r\n     mempool_opts.limits.descendant_count = fuzzed_data_provider.ConsumeIntegralInRange<unsigned>(0, 50);\r\n-    mempool_opts.limits.descendant_size_vbytes = fuzzed_data_provider.ConsumeIntegralInRange<unsigned>(0, 202) * 1'000;\r\n-    mempool_opts.max_size_bytes = fuzzed_data_provider.ConsumeIntegralInRange<unsigned>(0, 200) * 1'000'000;\r\n+    auto set_descendants_size = [&]() {\r\n+        mempool_opts.limits.descendant_size_vbytes = fuzzed_data_provider.ConsumeIntegralInRange<unsigned>(0, 202) * 1'000;\r\n+        mempool_opts.max_size_bytes = fuzzed_data_provider.ConsumeIntegralInRange<unsigned>(0, 200) * 1'000'000;\r\n+    };\r\n+    set_descendants_size();\r\n     mempool_opts.expiry = std::chrono::hours{fuzzed_data_provider.ConsumeIntegralInRange<unsigned>(0, 999)};\r\n     nBytesPerSigOp = fuzzed_data_provider.ConsumeIntegralInRange<unsigned>(1, 999);\r\n \r\n@@ -125,7 +127,15 @@ std::unique_ptr<CTxMemPool> MakeMempool(FuzzedDataProvider& fuzzed_data_provider\r\n     mempool_opts.require_standard = fuzzed_data_provider.ConsumeBool();\r\n \r\n     // ...and construct a CTxMemPool from it\r\n-    return std::move(Assert(CTxMemPool::Make(mempool_opts)).value());\r\n+    while (true) {\r\n+        if (auto res{CTxMemPool::Make(mempool_opts)}) {\r\n+            return std::move(res.value());\r\n+        } else {\r\n+            // Ensure this harness is updated when additional mempool construction failure paths are introduced\r\n+            assert(util::ErrorString(res).original.starts_with(\"-maxmempool must be at least\"));\r\n+            set_descendants_size();\r\n+        }\r\n+    }\r\n }\r\n \r\n FUZZ_TARGET(tx_package_eval, .init = initialize_tx_pool)\r\n\r\n```\r\n</details>",
      "commit_id" : "3aa41a31690da2ae22b6a15a9a5de0de78a01757",
      "created_at" : "2023-12-12T14:39:43Z",
      "diff_hunk" : "@@ -125,7 +125,7 @@ CTxMemPool MakeMempool(FuzzedDataProvider& fuzzed_data_provider, const NodeConte\n     mempool_opts.require_standard = fuzzed_data_provider.ConsumeBool();\n \n     // ...and construct a CTxMemPool from it\n-    return CTxMemPool{mempool_opts};\n+    return std::move(Assert(CTxMemPool::Make(mempool_opts)).value());",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28830#discussion_r1424090165",
      "id" : 1424090165,
      "line" : 128,
      "node_id" : "PRRC_kwDOABII585U4eQ1",
      "original_commit_id" : "3aa41a31690da2ae22b6a15a9a5de0de78a01757",
      "original_line" : 128,
      "original_position" : 14,
      "original_start_line" : null,
      "path" : "src/test/fuzz/package_eval.cpp",
      "position" : 14,
      "pull_request_review_id" : 1775679380,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28830",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1424090165/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-12-12T14:42:44Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1424090165",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/69010457?v=4",
         "events_url" : "https://api.github.com/users/stickies-v/events{/privacy}",
         "followers_url" : "https://api.github.com/users/stickies-v/followers",
         "following_url" : "https://api.github.com/users/stickies-v/following{/other_user}",
         "gists_url" : "https://api.github.com/users/stickies-v/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/stickies-v",
         "id" : 69010457,
         "login" : "stickies-v",
         "node_id" : "MDQ6VXNlcjY5MDEwNDU3",
         "organizations_url" : "https://api.github.com/users/stickies-v/orgs",
         "received_events_url" : "https://api.github.com/users/stickies-v/received_events",
         "repos_url" : "https://api.github.com/users/stickies-v/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/stickies-v/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/stickies-v/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/stickies-v"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28830#discussion_r1424611283"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28830"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1424611283"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Doesn't this leave an unsafe dangling reference if we don't have a variable capturing ownership of the `unique_ptr`?",
      "commit_id" : "3aa41a31690da2ae22b6a15a9a5de0de78a01757",
      "created_at" : "2023-12-12T21:49:28Z",
      "diff_hunk" : "@@ -38,7 +38,8 @@ FUZZ_TARGET(rbf, .init = initialize_rbf)\n         return;\n     }\n \n-    CTxMemPool pool{MemPoolOptionsForTest(g_setup->m_node)};\n+    auto mempool{std::move(Assert(CTxMemPool::Make(MemPoolOptionsForTest(g_setup->m_node))).value())};\n+    CTxMemPool& pool = *mempool;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28830#discussion_r1424611283",
      "id" : 1424611283,
      "in_reply_to_id" : 1424003014,
      "line" : 42,
      "node_id" : "PRRC_kwDOABII585U6dfT",
      "original_commit_id" : "3aa41a31690da2ae22b6a15a9a5de0de78a01757",
      "original_line" : 42,
      "original_position" : 6,
      "original_start_line" : 41,
      "path" : "src/test/fuzz/rbf.cpp",
      "position" : 6,
      "pull_request_review_id" : 1778493543,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28830",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1424611283/reactions"
      },
      "side" : "RIGHT",
      "start_line" : 41,
      "start_side" : "RIGHT",
      "subject_type" : "line",
      "updated_at" : "2023-12-12T21:49:28Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1424611283",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8421793?v=4",
         "events_url" : "https://api.github.com/users/TheCharlatan/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheCharlatan/followers",
         "following_url" : "https://api.github.com/users/TheCharlatan/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheCharlatan/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheCharlatan",
         "id" : 8421793,
         "login" : "TheCharlatan",
         "node_id" : "MDQ6VXNlcjg0MjE3OTM=",
         "organizations_url" : "https://api.github.com/users/TheCharlatan/orgs",
         "received_events_url" : "https://api.github.com/users/TheCharlatan/received_events",
         "repos_url" : "https://api.github.com/users/TheCharlatan/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheCharlatan/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheCharlatan/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheCharlatan"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28830#discussion_r1425077125"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28830"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1425077125"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Ah, you're right, that'd be bad. ",
      "commit_id" : "3aa41a31690da2ae22b6a15a9a5de0de78a01757",
      "created_at" : "2023-12-13T09:26:03Z",
      "diff_hunk" : "@@ -38,7 +38,8 @@ FUZZ_TARGET(rbf, .init = initialize_rbf)\n         return;\n     }\n \n-    CTxMemPool pool{MemPoolOptionsForTest(g_setup->m_node)};\n+    auto mempool{std::move(Assert(CTxMemPool::Make(MemPoolOptionsForTest(g_setup->m_node))).value())};\n+    CTxMemPool& pool = *mempool;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28830#discussion_r1425077125",
      "id" : 1425077125,
      "in_reply_to_id" : 1424003014,
      "line" : 42,
      "node_id" : "PRRC_kwDOABII585U8POF",
      "original_commit_id" : "3aa41a31690da2ae22b6a15a9a5de0de78a01757",
      "original_line" : 42,
      "original_position" : 6,
      "original_start_line" : 41,
      "path" : "src/test/fuzz/rbf.cpp",
      "position" : 6,
      "pull_request_review_id" : 1779197134,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28830",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1425077125/reactions"
      },
      "side" : "RIGHT",
      "start_line" : 41,
      "start_side" : "RIGHT",
      "subject_type" : "line",
      "updated_at" : "2023-12-13T09:26:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1425077125",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/69010457?v=4",
         "events_url" : "https://api.github.com/users/stickies-v/events{/privacy}",
         "followers_url" : "https://api.github.com/users/stickies-v/followers",
         "following_url" : "https://api.github.com/users/stickies-v/following{/other_user}",
         "gists_url" : "https://api.github.com/users/stickies-v/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/stickies-v",
         "id" : 69010457,
         "login" : "stickies-v",
         "node_id" : "MDQ6VXNlcjY5MDEwNDU3",
         "organizations_url" : "https://api.github.com/users/stickies-v/orgs",
         "received_events_url" : "https://api.github.com/users/stickies-v/received_events",
         "repos_url" : "https://api.github.com/users/stickies-v/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/stickies-v/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/stickies-v/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/stickies-v"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->\nð This pull request conflicts with the target branch and [needs rebase](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#rebasing-changes).\n",
      "created_at" : "2023-12-14T21:43:48Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28830#issuecomment-1856689854",
      "id" : 1856689854,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28830",
      "node_id" : "IC_kwDOABII585uqta-",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1856689854/reactions"
      },
      "updated_at" : "2023-12-14T21:43:48Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1856689854",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Rebased 3aa41a31690da2ae22b6a15a9a5de0de78a01757 -> 571fa4f4c5c9792457a8a6ec77da980ae2d239e7 ([mempoolArgs_2](https://github.com/TheCharlatan/bitcoin/tree/mempoolArgs_2) -> [mempoolArgs_3](https://github.com/TheCharlatan/bitcoin/tree/mempoolArgs_3),  [compare](https://github.com/TheCharlatan/bitcoin/compare/mempoolArgs_2..mempoolArgs_3))\r\n\r\nUpdated 571fa4f4c5c9792457a8a6ec77da980ae2d239e7 -> 364456f6598b135fcc0acab8a660658b4407f837 ([mempoolArgs_3](https://github.com/TheCharlatan/bitcoin/tree/mempoolArgs_3) -> [mempoolArgs_4](https://github.com/TheCharlatan/bitcoin/tree/mempoolArgs_4),  [compare](https://github.com/TheCharlatan/bitcoin/compare/mempoolArgs_3..mempoolArgs_4)) \r\n* Addressed @stickies-v's [comment](https://github.com/bitcoin/bitcoin/pull/28830#discussion_r1422813069), using `get()` to access underlying pointer\r\n* Addressed @stickies-v's [comment](https://github.com/bitcoin/bitcoin/pull/28830#discussion_r1422850484), limiting scope of `mempool` var in `init`.\r\n* Addressed @stickies-v's [comment](https://github.com/bitcoin/bitcoin/pull/28830#discussion_r1422862314), removed superfluous assertions.\r\n* Addressed @stickies-v's [comment](https://github.com/bitcoin/bitcoin/pull/28830#discussion_r1423915340), removed left over newline.\r\n* Addressed @stickies-v's [comment](https://github.com/bitcoin/bitcoin/pull/28830#discussion_r1423923859), renamed `Make` to `MakeUnique`.\r\n* Addressed @stickies-v's [comment](https://github.com/bitcoin/bitcoin/pull/28830#discussion_r1424003014), adjusted ownership holder variable naming to existing pattern.\r\n* Applied @stickies-v's [patch](https://github.com/bitcoin/bitcoin/pull/28830#discussion_r1424090165) in a separate commit for fixing the fuzz test. \r\n\r\nI'm still not quite happy with the fuzz test, which is why I left it in a separate commit. Maybe a better approach would be to let the fuzzer do its job and just return early in the fuzz test if `MakeUnique` fails?",
      "created_at" : "2023-12-15T09:32:13Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28830#issuecomment-1857559238",
      "id" : 1857559238,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28830",
      "node_id" : "IC_kwDOABII585uuBrG",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1857559238/reactions"
      },
      "updated_at" : "2023-12-15T09:32:13Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1857559238",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8421793?v=4",
         "events_url" : "https://api.github.com/users/TheCharlatan/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheCharlatan/followers",
         "following_url" : "https://api.github.com/users/TheCharlatan/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheCharlatan/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheCharlatan",
         "id" : 8421793,
         "login" : "TheCharlatan",
         "node_id" : "MDQ6VXNlcjg0MjE3OTM=",
         "organizations_url" : "https://api.github.com/users/TheCharlatan/orgs",
         "received_events_url" : "https://api.github.com/users/TheCharlatan/received_events",
         "repos_url" : "https://api.github.com/users/TheCharlatan/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheCharlatan/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheCharlatan/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheCharlatan"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28830#discussion_r1428034455"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28830"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1428034455"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Since we're resetting all constraints on every loop, is this not overly verbose? (+below)\r\n\r\n<details>\r\n<summary>git diff on 364456f659</summary>\r\n\r\n```diff\r\ndiff --git a/src/test/fuzz/tx_pool.cpp b/src/test/fuzz/tx_pool.cpp\r\nindex 1400fadea0..7ddc45c4b4 100644\r\n--- a/src/test/fuzz/tx_pool.cpp\r\n+++ b/src/test/fuzz/tx_pool.cpp\r\n@@ -200,17 +200,10 @@ FUZZ_TARGET(tx_pool_standard, .init = initialize_tx_pool)\r\n     // The sum of the values of all spendable outpoints\r\n     constexpr CAmount SUPPLY_TOTAL{COINBASE_MATURITY * 50 * COIN};\r\n \r\n-    SetMempoolConstraints(*node.args, fuzzed_data_provider);\r\n-    auto tx_pool_{MakeMempool(fuzzed_data_provider, node)};\r\n-    while (true) {\r\n-        if (tx_pool_) {\r\n-            break;\r\n-        } else {\r\n-            // Ensure this harness is updated when additional mempool construction failure paths are introduced\r\n-            assert(util::ErrorString(tx_pool_).original.starts_with(\"-maxmempool must be at least\"));\r\n-            SetMempoolConstraints(*node.args, fuzzed_data_provider);\r\n-            tx_pool_ =  MakeMempool(fuzzed_data_provider, node);\r\n-        }\r\n+    util::Result<std::unique_ptr<CTxMemPool>> tx_pool_;\r\n+    while (!tx_pool_) {\r\n+        SetMempoolConstraints(*node.args, fuzzed_data_provider);\r\n+        tx_pool_ = MakeMempool(fuzzed_data_provider, node);\r\n     }\r\n \r\n     MockedTxPool& tx_pool = *static_cast<MockedTxPool*>(tx_pool_.value().get());\r\n\r\n```\r\n</details>",
      "commit_id" : "364456f6598b135fcc0acab8a660658b4407f837",
      "created_at" : "2023-12-15T14:27:13Z",
      "diff_hunk" : "@@ -201,8 +201,19 @@ FUZZ_TARGET(tx_pool_standard, .init = initialize_tx_pool)\n     constexpr CAmount SUPPLY_TOTAL{COINBASE_MATURITY * 50 * COIN};\n \n     SetMempoolConstraints(*node.args, fuzzed_data_provider);\n-    CTxMemPool tx_pool_{MakeMempool(fuzzed_data_provider, node)};\n-    MockedTxPool& tx_pool = *static_cast<MockedTxPool*>(&tx_pool_);\n+    auto tx_pool_{MakeMempool(fuzzed_data_provider, node)};\n+    while (true) {\n+        if (tx_pool_) {\n+            break;\n+        } else {\n+            // Ensure this harness is updated when additional mempool construction failure paths are introduced\n+            assert(util::ErrorString(tx_pool_).original.starts_with(\"-maxmempool must be at least\"));\n+            SetMempoolConstraints(*node.args, fuzzed_data_provider);\n+            tx_pool_ =  MakeMempool(fuzzed_data_provider, node);\n+        }\n+    }\n+\n+    MockedTxPool& tx_pool = *static_cast<MockedTxPool*>(tx_pool_.value().get());",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28830#discussion_r1428034455",
      "id" : 1428034455,
      "line" : 216,
      "node_id" : "PRRC_kwDOABII585VHhOX",
      "original_commit_id" : "364456f6598b135fcc0acab8a660658b4407f837",
      "original_line" : 216,
      "original_position" : 36,
      "original_start_line" : 204,
      "path" : "src/test/fuzz/tx_pool.cpp",
      "position" : 36,
      "pull_request_review_id" : 1784191412,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28830",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1428034455/reactions"
      },
      "side" : "RIGHT",
      "start_line" : 204,
      "start_side" : "RIGHT",
      "subject_type" : "line",
      "updated_at" : "2023-12-15T14:27:13Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1428034455",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/69010457?v=4",
         "events_url" : "https://api.github.com/users/stickies-v/events{/privacy}",
         "followers_url" : "https://api.github.com/users/stickies-v/followers",
         "following_url" : "https://api.github.com/users/stickies-v/following{/other_user}",
         "gists_url" : "https://api.github.com/users/stickies-v/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/stickies-v",
         "id" : 69010457,
         "login" : "stickies-v",
         "node_id" : "MDQ6VXNlcjY5MDEwNDU3",
         "organizations_url" : "https://api.github.com/users/stickies-v/orgs",
         "received_events_url" : "https://api.github.com/users/stickies-v/received_events",
         "repos_url" : "https://api.github.com/users/stickies-v/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/stickies-v/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/stickies-v/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/stickies-v"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->\nð This pull request conflicts with the target branch and [needs rebase](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#rebasing-changes).\n",
      "created_at" : "2024-03-09T02:13:41Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28830#issuecomment-1986694379",
      "id" : 1986694379,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28830",
      "node_id" : "IC_kwDOABII5852aozr",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1986694379/reactions"
      },
      "updated_at" : "2024-03-09T02:13:41Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1986694379",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "This seems like an improvement, but I think the original suggestion of just adding a `std::string& error` output parameter to the CTxMemPool constructor (or a `util::Result<void>& result` output parameter) would provide a less rigid API than making the CTxMemPool constructor private and requiring every instance to be allocated on the heap and owned by a unique_ptr. This would also allow keeping the fuzz test behavior unchanged. The new fuzz test behavior is probably better, but maybe fuzz testing the max_size_bytes < descendant_limit_bytes case could find some bugs.\r\n\r\nI don't think this pr is so high priority, so it could be closed if it too much work to update. I'm also happy to review it with or without suggested changes if it is updated.\r\n\r\n(EDIT: Changed ~~`std::error& error`~~ to `std::string& error` above. That was just a confusing typo.)",
      "created_at" : "2024-04-16T17:30:35Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28830#issuecomment-2059591077",
      "id" : 2059591077,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28830",
      "node_id" : "IC_kwDOABII5856wt2l",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 1,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2059591077/reactions"
      },
      "updated_at" : "2024-04-24T18:32:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2059591077",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Reworked 364456f6598b135fcc0acab8a660658b4407f837 -> 30a1024b63105a97d04149e83ae2d8cf0830cf69 ([mempoolArgs_4](https://github.com/TheCharlatan/bitcoin/tree/mempoolArgs_4) -> [mempoolArgs_5](https://github.com/TheCharlatan/bitcoin/tree/mempoolArgs_5), [compare](https://github.com/TheCharlatan/bitcoin/compare/mempoolArgs_4..mempoolArgs_5))\r\n\r\n* Reworked this after @ryanofsky's [comment](https://github.com/bitcoin/bitcoin/pull/28830#issuecomment-2059591077). I agree that the better option here is to have an output parameter. Wasn't sure what `std::error& error` referred to, so just chose `util::Error`, but would be easy enough to use something else.",
      "created_at" : "2024-04-21T09:14:48Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28830#issuecomment-2067972727",
      "id" : 2067972727,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28830",
      "node_id" : "IC_kwDOABII5857QsJ3",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2067972727/reactions"
      },
      "updated_at" : "2024-04-21T09:14:48Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2067972727",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8421793?v=4",
         "events_url" : "https://api.github.com/users/TheCharlatan/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheCharlatan/followers",
         "following_url" : "https://api.github.com/users/TheCharlatan/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheCharlatan/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheCharlatan",
         "id" : 8421793,
         "login" : "TheCharlatan",
         "node_id" : "MDQ6VXNlcjg0MjE3OTM=",
         "organizations_url" : "https://api.github.com/users/TheCharlatan/orgs",
         "received_events_url" : "https://api.github.com/users/TheCharlatan/received_events",
         "repos_url" : "https://api.github.com/users/TheCharlatan/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheCharlatan/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheCharlatan/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheCharlatan"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28830#discussion_r1579587621"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28830"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1579587621"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "In commit \"[[refactor]] Check CTxMemPool options in constructor\" (30a1024b63105a97d04149e83ae2d8cf0830cf69)\r\n\r\nWould be good to add comment pointing out that error is currently ignored. (And maybe that this ensures mempool code passes fuzz tests even when max mempool size is unreasonably small.)",
      "commit_id" : "30a1024b63105a97d04149e83ae2d8cf0830cf69",
      "created_at" : "2024-04-25T14:35:08Z",
      "diff_hunk" : "@@ -127,7 +127,8 @@ CTxMemPool MakeMempool(FuzzedDataProvider& fuzzed_data_provider, const NodeConte\n     mempool_opts.require_standard = fuzzed_data_provider.ConsumeBool();\n \n     // ...and construct a CTxMemPool from it\n-    return CTxMemPool{mempool_opts};\n+    util::Error error{};\n+    return CTxMemPool{mempool_opts, error};",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28830#discussion_r1579587621",
      "id" : 1579587621,
      "line" : 131,
      "node_id" : "PRRC_kwDOABII585eJpgl",
      "original_commit_id" : "30a1024b63105a97d04149e83ae2d8cf0830cf69",
      "original_line" : 131,
      "original_position" : 6,
      "original_start_line" : null,
      "path" : "src/test/fuzz/package_eval.cpp",
      "position" : 6,
      "pull_request_review_id" : 2022700917,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28830",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1579587621/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-04-25T14:42:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1579587621",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Thanks for taking another look at @ryanofsky!\r\n\r\nUpdated 30a1024b63105a97d04149e83ae2d8cf0830cf69 -> d447bdcfb0e38353940e4a7fc89d09482d8d39c3 ([mempoolArgs_5](https://github.com/TheCharlatan/bitcoin/tree/mempoolArgs_5) -> [mempoolArgs_6](https://github.com/TheCharlatan/bitcoin/tree/mempoolArgs_6), [compare](https://github.com/TheCharlatan/bitcoin/compare/mempoolArgs_5..mempoolArgs_6))\r\n\r\n* Addressed @ryanofsky's [comment](https://github.com/bitcoin/bitcoin/pull/28830#pullrequestreview-2022700917), replacing `util::Error` with `bilingual_str`.\r\n* Addressed @ryanofsky's [comment](https://github.com/bitcoin/bitcoin/pull/28830#discussion_r1579587621), adding a comment explaining with the error in the package_eval fuzz test is ignored.",
      "created_at" : "2024-04-25T20:16:51Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28830#issuecomment-2078100935",
      "id" : 2078100935,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28830",
      "node_id" : "IC_kwDOABII58573U3H",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2078100935/reactions"
      },
      "updated_at" : "2024-04-25T20:16:51Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2078100935",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8421793?v=4",
         "events_url" : "https://api.github.com/users/TheCharlatan/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheCharlatan/followers",
         "following_url" : "https://api.github.com/users/TheCharlatan/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheCharlatan/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheCharlatan",
         "id" : 8421793,
         "login" : "TheCharlatan",
         "node_id" : "MDQ6VXNlcjg0MjE3OTM=",
         "organizations_url" : "https://api.github.com/users/TheCharlatan/orgs",
         "received_events_url" : "https://api.github.com/users/TheCharlatan/received_events",
         "repos_url" : "https://api.github.com/users/TheCharlatan/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheCharlatan/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheCharlatan/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheCharlatan"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28830#discussion_r1598392660"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28830"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1598392660"
         }
      },
      "author_association" : "MEMBER",
      "body" : "> The downside to this patch is that the log line may now be printed more than once in the for loop.\r\n\r\nQuestion: do we expect this to loop many times / under what circumstances? I tried adding logging to see what happens on my node, and I haven't seen it go more than once yet.",
      "commit_id" : "d447bdcfb0e38353940e4a7fc89d09482d8d39c3",
      "created_at" : "2024-05-13T12:30:09Z",
      "diff_hunk" : "@@ -1523,16 +1523,14 @@ bool AppInitMain(NodeContext& node, interfaces::BlockAndHeaderTipInfo* tip_info)\n     if (!result) {\n         return InitError(util::ErrorString(result));\n     }\n-    mempool_opts.check_ratio = std::clamp<int>(mempool_opts.check_ratio, 0, 1'000'000);\n-\n-    int64_t descendant_limit_bytes = mempool_opts.limits.descendant_size_vbytes * 40;\n-    if (mempool_opts.max_size_bytes < 0 || mempool_opts.max_size_bytes < descendant_limit_bytes) {\n-        return InitError(strprintf(_(\"-maxmempool must be at least %d MB\"), std::ceil(descendant_limit_bytes / 1'000'000.0)));\n-    }\n-    LogPrintf(\"* Using %.1f MiB for in-memory UTXO set (plus up to %.1f MiB of unused mempool space)\\n\", cache_sizes.coins * (1.0 / 1024 / 1024), mempool_opts.max_size_bytes * (1.0 / 1024 / 1024));\n \n     for (bool fLoaded = false; !fLoaded && !ShutdownRequested(node);) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28830#discussion_r1598392660",
      "id" : 1598392660,
      "line" : 1527,
      "node_id" : "PRRC_kwDOABII585fRYlU",
      "original_commit_id" : "d447bdcfb0e38353940e4a7fc89d09482d8d39c3",
      "original_line" : 1527,
      "original_position" : 12,
      "original_start_line" : null,
      "path" : "src/init.cpp",
      "position" : 12,
      "pull_request_review_id" : 2052565010,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28830",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1598392660/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-05-13T12:30:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1598392660",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/25183001?v=4",
         "events_url" : "https://api.github.com/users/glozow/events{/privacy}",
         "followers_url" : "https://api.github.com/users/glozow/followers",
         "following_url" : "https://api.github.com/users/glozow/following{/other_user}",
         "gists_url" : "https://api.github.com/users/glozow/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/glozow",
         "id" : 25183001,
         "login" : "glozow",
         "node_id" : "MDQ6VXNlcjI1MTgzMDAx",
         "organizations_url" : "https://api.github.com/users/glozow/orgs",
         "received_events_url" : "https://api.github.com/users/glozow/received_events",
         "repos_url" : "https://api.github.com/users/glozow/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/glozow/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/glozow/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/glozow"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28830#discussion_r1598423939"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28830"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1598423939"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "re: https://github.com/bitcoin/bitcoin/pull/28830#discussion_r1598392660\r\n\r\n> Question: do we expect this to loop many times / under what circumstances? I tried adding logging to see what happens on my node, and I haven't seen it go more than once yet.\r\n\r\nI think this is only intended to loop if there is an error loading, and the user is using a gui, and they are asked \"Do you want to rebuild the block database now?\" and they answer yes.",
      "commit_id" : "d447bdcfb0e38353940e4a7fc89d09482d8d39c3",
      "created_at" : "2024-05-13T12:49:58Z",
      "diff_hunk" : "@@ -1523,16 +1523,14 @@ bool AppInitMain(NodeContext& node, interfaces::BlockAndHeaderTipInfo* tip_info)\n     if (!result) {\n         return InitError(util::ErrorString(result));\n     }\n-    mempool_opts.check_ratio = std::clamp<int>(mempool_opts.check_ratio, 0, 1'000'000);\n-\n-    int64_t descendant_limit_bytes = mempool_opts.limits.descendant_size_vbytes * 40;\n-    if (mempool_opts.max_size_bytes < 0 || mempool_opts.max_size_bytes < descendant_limit_bytes) {\n-        return InitError(strprintf(_(\"-maxmempool must be at least %d MB\"), std::ceil(descendant_limit_bytes / 1'000'000.0)));\n-    }\n-    LogPrintf(\"* Using %.1f MiB for in-memory UTXO set (plus up to %.1f MiB of unused mempool space)\\n\", cache_sizes.coins * (1.0 / 1024 / 1024), mempool_opts.max_size_bytes * (1.0 / 1024 / 1024));\n \n     for (bool fLoaded = false; !fLoaded && !ShutdownRequested(node);) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28830#discussion_r1598423939",
      "id" : 1598423939,
      "in_reply_to_id" : 1598392660,
      "line" : 1527,
      "node_id" : "PRRC_kwDOABII585fRgOD",
      "original_commit_id" : "d447bdcfb0e38353940e4a7fc89d09482d8d39c3",
      "original_line" : 1527,
      "original_position" : 12,
      "original_start_line" : null,
      "path" : "src/init.cpp",
      "position" : 12,
      "pull_request_review_id" : 2052608144,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28830",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1598423939/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-05-13T12:49:58Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1598423939",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28830#discussion_r1598432185"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28830"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1598432185"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Thanks @ryanofsky! That would explain why I didn't see it loop.",
      "commit_id" : "d447bdcfb0e38353940e4a7fc89d09482d8d39c3",
      "created_at" : "2024-05-13T12:55:53Z",
      "diff_hunk" : "@@ -1523,16 +1523,14 @@ bool AppInitMain(NodeContext& node, interfaces::BlockAndHeaderTipInfo* tip_info)\n     if (!result) {\n         return InitError(util::ErrorString(result));\n     }\n-    mempool_opts.check_ratio = std::clamp<int>(mempool_opts.check_ratio, 0, 1'000'000);\n-\n-    int64_t descendant_limit_bytes = mempool_opts.limits.descendant_size_vbytes * 40;\n-    if (mempool_opts.max_size_bytes < 0 || mempool_opts.max_size_bytes < descendant_limit_bytes) {\n-        return InitError(strprintf(_(\"-maxmempool must be at least %d MB\"), std::ceil(descendant_limit_bytes / 1'000'000.0)));\n-    }\n-    LogPrintf(\"* Using %.1f MiB for in-memory UTXO set (plus up to %.1f MiB of unused mempool space)\\n\", cache_sizes.coins * (1.0 / 1024 / 1024), mempool_opts.max_size_bytes * (1.0 / 1024 / 1024));\n \n     for (bool fLoaded = false; !fLoaded && !ShutdownRequested(node);) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28830#discussion_r1598432185",
      "id" : 1598432185,
      "in_reply_to_id" : 1598392660,
      "line" : 1527,
      "node_id" : "PRRC_kwDOABII585fRiO5",
      "original_commit_id" : "d447bdcfb0e38353940e4a7fc89d09482d8d39c3",
      "original_line" : 1527,
      "original_position" : 12,
      "original_start_line" : null,
      "path" : "src/init.cpp",
      "position" : 12,
      "pull_request_review_id" : 2052621703,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28830",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1598432185/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-05-13T12:55:53Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1598432185",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/25183001?v=4",
         "events_url" : "https://api.github.com/users/glozow/events{/privacy}",
         "followers_url" : "https://api.github.com/users/glozow/followers",
         "following_url" : "https://api.github.com/users/glozow/following{/other_user}",
         "gists_url" : "https://api.github.com/users/glozow/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/glozow",
         "id" : 25183001,
         "login" : "glozow",
         "node_id" : "MDQ6VXNlcjI1MTgzMDAx",
         "organizations_url" : "https://api.github.com/users/glozow/orgs",
         "received_events_url" : "https://api.github.com/users/glozow/received_events",
         "repos_url" : "https://api.github.com/users/glozow/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/glozow/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/glozow/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/glozow"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28830#discussion_r1598447607"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28830"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1598447607"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "I'm not too concerned over the message being printed again, since there a whole bunch of log lines that get printed again too. The for loop should also only be executed once more, since if there is a failure on its second pass, the `reindex` option is true, making it return an `InitError`.",
      "commit_id" : "d447bdcfb0e38353940e4a7fc89d09482d8d39c3",
      "created_at" : "2024-05-13T13:06:43Z",
      "diff_hunk" : "@@ -1523,16 +1523,14 @@ bool AppInitMain(NodeContext& node, interfaces::BlockAndHeaderTipInfo* tip_info)\n     if (!result) {\n         return InitError(util::ErrorString(result));\n     }\n-    mempool_opts.check_ratio = std::clamp<int>(mempool_opts.check_ratio, 0, 1'000'000);\n-\n-    int64_t descendant_limit_bytes = mempool_opts.limits.descendant_size_vbytes * 40;\n-    if (mempool_opts.max_size_bytes < 0 || mempool_opts.max_size_bytes < descendant_limit_bytes) {\n-        return InitError(strprintf(_(\"-maxmempool must be at least %d MB\"), std::ceil(descendant_limit_bytes / 1'000'000.0)));\n-    }\n-    LogPrintf(\"* Using %.1f MiB for in-memory UTXO set (plus up to %.1f MiB of unused mempool space)\\n\", cache_sizes.coins * (1.0 / 1024 / 1024), mempool_opts.max_size_bytes * (1.0 / 1024 / 1024));\n \n     for (bool fLoaded = false; !fLoaded && !ShutdownRequested(node);) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28830#discussion_r1598447607",
      "id" : 1598447607,
      "in_reply_to_id" : 1598392660,
      "line" : 1527,
      "node_id" : "PRRC_kwDOABII585fRl_3",
      "original_commit_id" : "d447bdcfb0e38353940e4a7fc89d09482d8d39c3",
      "original_line" : 1527,
      "original_position" : 12,
      "original_start_line" : null,
      "path" : "src/init.cpp",
      "position" : 12,
      "pull_request_review_id" : 2052648437,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28830",
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1598447607/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-05-13T13:06:44Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1598447607",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8421793?v=4",
         "events_url" : "https://api.github.com/users/TheCharlatan/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheCharlatan/followers",
         "following_url" : "https://api.github.com/users/TheCharlatan/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheCharlatan/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheCharlatan",
         "id" : 8421793,
         "login" : "TheCharlatan",
         "node_id" : "MDQ6VXNlcjg0MjE3OTM=",
         "organizations_url" : "https://api.github.com/users/TheCharlatan/orgs",
         "received_events_url" : "https://api.github.com/users/TheCharlatan/received_events",
         "repos_url" : "https://api.github.com/users/TheCharlatan/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheCharlatan/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheCharlatan/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheCharlatan"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28830#discussion_r1598450015"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28830"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1598450015"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Thanks sgtm :+1: I didn't want to ignore the comment, but also wasn't sure how to test.",
      "commit_id" : "d447bdcfb0e38353940e4a7fc89d09482d8d39c3",
      "created_at" : "2024-05-13T13:08:35Z",
      "diff_hunk" : "@@ -1523,16 +1523,14 @@ bool AppInitMain(NodeContext& node, interfaces::BlockAndHeaderTipInfo* tip_info)\n     if (!result) {\n         return InitError(util::ErrorString(result));\n     }\n-    mempool_opts.check_ratio = std::clamp<int>(mempool_opts.check_ratio, 0, 1'000'000);\n-\n-    int64_t descendant_limit_bytes = mempool_opts.limits.descendant_size_vbytes * 40;\n-    if (mempool_opts.max_size_bytes < 0 || mempool_opts.max_size_bytes < descendant_limit_bytes) {\n-        return InitError(strprintf(_(\"-maxmempool must be at least %d MB\"), std::ceil(descendant_limit_bytes / 1'000'000.0)));\n-    }\n-    LogPrintf(\"* Using %.1f MiB for in-memory UTXO set (plus up to %.1f MiB of unused mempool space)\\n\", cache_sizes.coins * (1.0 / 1024 / 1024), mempool_opts.max_size_bytes * (1.0 / 1024 / 1024));\n \n     for (bool fLoaded = false; !fLoaded && !ShutdownRequested(node);) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28830#discussion_r1598450015",
      "id" : 1598450015,
      "in_reply_to_id" : 1598392660,
      "line" : 1527,
      "node_id" : "PRRC_kwDOABII585fRmlf",
      "original_commit_id" : "d447bdcfb0e38353940e4a7fc89d09482d8d39c3",
      "original_line" : 1527,
      "original_position" : 12,
      "original_start_line" : null,
      "path" : "src/init.cpp",
      "position" : 12,
      "pull_request_review_id" : 2052652612,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28830",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1598450015/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-05-13T13:08:35Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1598450015",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/25183001?v=4",
         "events_url" : "https://api.github.com/users/glozow/events{/privacy}",
         "followers_url" : "https://api.github.com/users/glozow/followers",
         "following_url" : "https://api.github.com/users/glozow/following{/other_user}",
         "gists_url" : "https://api.github.com/users/glozow/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/glozow",
         "id" : 25183001,
         "login" : "glozow",
         "node_id" : "MDQ6VXNlcjI1MTgzMDAx",
         "organizations_url" : "https://api.github.com/users/glozow/orgs",
         "received_events_url" : "https://api.github.com/users/glozow/received_events",
         "repos_url" : "https://api.github.com/users/glozow/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/glozow/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/glozow/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/glozow"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->\nð This pull request conflicts with the target branch and [needs rebase](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#rebasing-changes).\n",
      "created_at" : "2024-05-15T01:37:12Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28830#issuecomment-2111424708",
      "id" : 2111424708,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28830",
      "node_id" : "IC_kwDOABII58592cjE",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2111424708/reactions"
      },
      "updated_at" : "2024-05-15T01:37:12Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2111424708",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Rebased d447bdcfb0e38353940e4a7fc89d09482d8d39c3 -> dacdb7962c5fef8db26f6fa31facb606165d1d1e ([mempoolArgs_6](https://github.com/TheCharlatan/bitcoin/tree/mempoolArgs_6) -> [mempoolArgs_7](https://github.com/TheCharlatan/bitcoin/tree/mempoolArgs_7), [compare](https://github.com/TheCharlatan/bitcoin/compare/mempoolArgs_6..mempoolArgs_7))\r\n\r\n* Fixed conflict with https://github.com/bitcoin/bitcoin/pull/29086",
      "created_at" : "2024-05-15T09:20:27Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28830#issuecomment-2112006683",
      "id" : 2112006683,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28830",
      "node_id" : "IC_kwDOABII58594qob",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2112006683/reactions"
      },
      "updated_at" : "2024-05-15T09:20:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2112006683",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8421793?v=4",
         "events_url" : "https://api.github.com/users/TheCharlatan/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheCharlatan/followers",
         "following_url" : "https://api.github.com/users/TheCharlatan/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheCharlatan/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheCharlatan",
         "id" : 8421793,
         "login" : "TheCharlatan",
         "node_id" : "MDQ6VXNlcjg0MjE3OTM=",
         "organizations_url" : "https://api.github.com/users/TheCharlatan/orgs",
         "received_events_url" : "https://api.github.com/users/TheCharlatan/received_events",
         "repos_url" : "https://api.github.com/users/TheCharlatan/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheCharlatan/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheCharlatan/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheCharlatan"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28830#discussion_r1601391240"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28830"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1601391240"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "nit: perhaps move semantics would make sense here?\r\n```suggestion\r\n        node.mempool = std::make_unique<CTxMemPool>(std::move(mempool_opts), mempool_error);\r\n        if (!mempool_error.empty()) {\r\n            return InitError(mempool_error);\r\n        }\r\n        LogPrintf(\"* Using %.1f MiB for in-memory UTXO set (plus up to %.1f MiB of unused mempool space)\\n\", cache_sizes.coins * (1.0 / 1024 / 1024), node.mempool->m_opts.max_size_bytes * (1.0 / 1024 / 1024));\r\n```",
      "commit_id" : "dacdb7962c5fef8db26f6fa31facb606165d1d1e",
      "created_at" : "2024-05-15T10:36:55Z",
      "diff_hunk" : "@@ -1525,16 +1525,14 @@ bool AppInitMain(NodeContext& node, interfaces::BlockAndHeaderTipInfo* tip_info)\n     if (!result) {\n         return InitError(util::ErrorString(result));\n     }\n-    mempool_opts.check_ratio = std::clamp<int>(mempool_opts.check_ratio, 0, 1'000'000);\n-\n-    int64_t descendant_limit_bytes = mempool_opts.limits.descendant_size_vbytes * 40;\n-    if (mempool_opts.max_size_bytes < 0 || mempool_opts.max_size_bytes < descendant_limit_bytes) {\n-        return InitError(strprintf(_(\"-maxmempool must be at least %d MB\"), std::ceil(descendant_limit_bytes / 1'000'000.0)));\n-    }\n-    LogPrintf(\"* Using %.1f MiB for in-memory UTXO set (plus up to %.1f MiB of unused mempool space)\\n\", cache_sizes.coins * (1.0 / 1024 / 1024), mempool_opts.max_size_bytes * (1.0 / 1024 / 1024));\n \n     for (bool fLoaded = false; !fLoaded && !ShutdownRequested(node);) {\n-        node.mempool = std::make_unique<CTxMemPool>(mempool_opts);\n+        bilingual_str mempool_error;\n+        node.mempool = std::make_unique<CTxMemPool>(mempool_opts, mempool_error);\n+        if (!mempool_error.empty()) {\n+            return InitError(mempool_error);\n+        }\n+        LogPrintf(\"* Using %.1f MiB for in-memory UTXO set (plus up to %.1f MiB of unused mempool space)\\n\", cache_sizes.coins * (1.0 / 1024 / 1024), mempool_opts.max_size_bytes * (1.0 / 1024 / 1024));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28830#discussion_r1601391240",
      "id" : 1601391240,
      "line" : 1535,
      "node_id" : "PRRC_kwDOABII585fc0qI",
      "original_commit_id" : "dacdb7962c5fef8db26f6fa31facb606165d1d1e",
      "original_line" : 1535,
      "original_position" : 19,
      "original_start_line" : 1531,
      "path" : "src/init.cpp",
      "position" : 19,
      "pull_request_review_id" : 2057592650,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28830",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1601391240/reactions"
      },
      "side" : "RIGHT",
      "start_line" : 1531,
      "start_side" : "RIGHT",
      "subject_type" : "line",
      "updated_at" : "2024-05-15T11:31:01Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1601391240",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/69010457?v=4",
         "events_url" : "https://api.github.com/users/stickies-v/events{/privacy}",
         "followers_url" : "https://api.github.com/users/stickies-v/followers",
         "following_url" : "https://api.github.com/users/stickies-v/following{/other_user}",
         "gists_url" : "https://api.github.com/users/stickies-v/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/stickies-v",
         "id" : 69010457,
         "login" : "stickies-v",
         "node_id" : "MDQ6VXNlcjY5MDEwNDU3",
         "organizations_url" : "https://api.github.com/users/stickies-v/orgs",
         "received_events_url" : "https://api.github.com/users/stickies-v/received_events",
         "repos_url" : "https://api.github.com/users/stickies-v/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/stickies-v/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/stickies-v/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/stickies-v"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28830#discussion_r1601457942"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28830"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1601457942"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "nit: this approach has the potential risk that if additional error handling is added to the CTxMemPool ctor, the fuzzer would silently ignore it if this test is not also updated. Could avoid that by specifically silencing only this error?\r\n\r\n<details>\r\n<summary>git diff on dacdb7962c</summary>\r\n\r\n```diff\r\ndiff --git a/src/test/fuzz/package_eval.cpp b/src/test/fuzz/package_eval.cpp\r\nindex eefa566d31..1a95ff4ab6 100644\r\n--- a/src/test/fuzz/package_eval.cpp\r\n+++ b/src/test/fuzz/package_eval.cpp\r\n@@ -107,7 +107,7 @@ void MockTime(FuzzedDataProvider& fuzzed_data_provider, const Chainstate& chains\r\n     SetMockTime(time);\r\n }\r\n \r\n-CTxMemPool MakeMempool(FuzzedDataProvider& fuzzed_data_provider, const NodeContext& node)\r\n+std::unique_ptr<CTxMemPool> MakeMempool(FuzzedDataProvider& fuzzed_data_provider, const NodeContext& node)\r\n {\r\n     // Take the default options for tests...\r\n     CTxMemPool::Options mempool_opts{MemPoolOptionsForTest(node)};\r\n@@ -126,11 +126,13 @@ CTxMemPool MakeMempool(FuzzedDataProvider& fuzzed_data_provider, const NodeConte\r\n     mempool_opts.check_ratio = 1;\r\n     mempool_opts.require_standard = fuzzed_data_provider.ConsumeBool();\r\n \r\n-    // ... ignore the error since it might be beneficial to fuzz even when the\r\n-    // mempool size is unreasonably small\r\n     bilingual_str error;\r\n     // ...and construct a CTxMemPool from it\r\n-    return CTxMemPool{mempool_opts, error};\r\n+    auto mempool{std::make_unique<CTxMemPool>(std::move(mempool_opts), error)};\r\n+    // ... ignore the error since it might be beneficial to fuzz even when the\r\n+    // mempool size is unreasonably small\r\n+    assert(error.empty() || error.original.starts_with(\"-maxmempool must be at least\"));\r\n+    return mempool;\r\n }\r\n \r\n FUZZ_TARGET(tx_package_eval, .init = initialize_tx_pool)\r\n@@ -152,8 +154,8 @@ FUZZ_TARGET(tx_package_eval, .init = initialize_tx_pool)\r\n     auto outpoints_updater = std::make_shared<OutpointsUpdater>(mempool_outpoints);\r\n     node.validation_signals->RegisterSharedValidationInterface(outpoints_updater);\r\n \r\n-    CTxMemPool tx_pool_{MakeMempool(fuzzed_data_provider, node)};\r\n-    MockedTxPool& tx_pool = *static_cast<MockedTxPool*>(&tx_pool_);\r\n+    auto tx_pool_{MakeMempool(fuzzed_data_provider, node)};\r\n+    MockedTxPool& tx_pool = *static_cast<MockedTxPool*>(tx_pool_.get());\r\n \r\n     chainstate.SetMempool(&tx_pool);\r\n \r\n\r\n```\r\n</details>",
      "commit_id" : "dacdb7962c5fef8db26f6fa31facb606165d1d1e",
      "created_at" : "2024-05-15T11:28:53Z",
      "diff_hunk" : "@@ -126,8 +126,11 @@ CTxMemPool MakeMempool(FuzzedDataProvider& fuzzed_data_provider, const NodeConte\n     mempool_opts.check_ratio = 1;\n     mempool_opts.require_standard = fuzzed_data_provider.ConsumeBool();\n \n+    // ... ignore the error since it might be beneficial to fuzz even when the\n+    // mempool size is unreasonably small",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28830#discussion_r1601457942",
      "id" : 1601457942,
      "line" : 130,
      "node_id" : "PRRC_kwDOABII585fdE8W",
      "original_commit_id" : "dacdb7962c5fef8db26f6fa31facb606165d1d1e",
      "original_line" : 130,
      "original_position" : 5,
      "original_start_line" : 129,
      "path" : "src/test/fuzz/package_eval.cpp",
      "position" : 5,
      "pull_request_review_id" : 2057592650,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28830",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1601457942/reactions"
      },
      "side" : "RIGHT",
      "start_line" : 129,
      "start_side" : "RIGHT",
      "subject_type" : "line",
      "updated_at" : "2024-05-15T11:31:01Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1601457942",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/69010457?v=4",
         "events_url" : "https://api.github.com/users/stickies-v/events{/privacy}",
         "followers_url" : "https://api.github.com/users/stickies-v/followers",
         "following_url" : "https://api.github.com/users/stickies-v/following{/other_user}",
         "gists_url" : "https://api.github.com/users/stickies-v/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/stickies-v",
         "id" : 69010457,
         "login" : "stickies-v",
         "node_id" : "MDQ6VXNlcjY5MDEwNDU3",
         "organizations_url" : "https://api.github.com/users/stickies-v/orgs",
         "received_events_url" : "https://api.github.com/users/stickies-v/received_events",
         "repos_url" : "https://api.github.com/users/stickies-v/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/stickies-v/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/stickies-v/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/stickies-v"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28830#discussion_r1601479946"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28830"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1601479946"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Not sure about this if it gets moved again when the for loop iterates.",
      "commit_id" : "dacdb7962c5fef8db26f6fa31facb606165d1d1e",
      "created_at" : "2024-05-15T11:43:42Z",
      "diff_hunk" : "@@ -1525,16 +1525,14 @@ bool AppInitMain(NodeContext& node, interfaces::BlockAndHeaderTipInfo* tip_info)\n     if (!result) {\n         return InitError(util::ErrorString(result));\n     }\n-    mempool_opts.check_ratio = std::clamp<int>(mempool_opts.check_ratio, 0, 1'000'000);\n-\n-    int64_t descendant_limit_bytes = mempool_opts.limits.descendant_size_vbytes * 40;\n-    if (mempool_opts.max_size_bytes < 0 || mempool_opts.max_size_bytes < descendant_limit_bytes) {\n-        return InitError(strprintf(_(\"-maxmempool must be at least %d MB\"), std::ceil(descendant_limit_bytes / 1'000'000.0)));\n-    }\n-    LogPrintf(\"* Using %.1f MiB for in-memory UTXO set (plus up to %.1f MiB of unused mempool space)\\n\", cache_sizes.coins * (1.0 / 1024 / 1024), mempool_opts.max_size_bytes * (1.0 / 1024 / 1024));\n \n     for (bool fLoaded = false; !fLoaded && !ShutdownRequested(node);) {\n-        node.mempool = std::make_unique<CTxMemPool>(mempool_opts);\n+        bilingual_str mempool_error;\n+        node.mempool = std::make_unique<CTxMemPool>(mempool_opts, mempool_error);\n+        if (!mempool_error.empty()) {\n+            return InitError(mempool_error);\n+        }\n+        LogPrintf(\"* Using %.1f MiB for in-memory UTXO set (plus up to %.1f MiB of unused mempool space)\\n\", cache_sizes.coins * (1.0 / 1024 / 1024), mempool_opts.max_size_bytes * (1.0 / 1024 / 1024));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28830#discussion_r1601479946",
      "id" : 1601479946,
      "in_reply_to_id" : 1601391240,
      "line" : 1535,
      "node_id" : "PRRC_kwDOABII585fdKUK",
      "original_commit_id" : "dacdb7962c5fef8db26f6fa31facb606165d1d1e",
      "original_line" : 1535,
      "original_position" : 19,
      "original_start_line" : 1531,
      "path" : "src/init.cpp",
      "position" : 19,
      "pull_request_review_id" : 2057746730,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28830",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1601479946/reactions"
      },
      "side" : "RIGHT",
      "start_line" : 1531,
      "start_side" : "RIGHT",
      "subject_type" : "line",
      "updated_at" : "2024-05-15T11:43:42Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1601479946",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8421793?v=4",
         "events_url" : "https://api.github.com/users/TheCharlatan/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheCharlatan/followers",
         "following_url" : "https://api.github.com/users/TheCharlatan/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheCharlatan/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheCharlatan",
         "id" : 8421793,
         "login" : "TheCharlatan",
         "node_id" : "MDQ6VXNlcjg0MjE3OTM=",
         "organizations_url" : "https://api.github.com/users/TheCharlatan/orgs",
         "received_events_url" : "https://api.github.com/users/TheCharlatan/received_events",
         "repos_url" : "https://api.github.com/users/TheCharlatan/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheCharlatan/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheCharlatan/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheCharlatan"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Re https://github.com/bitcoin/bitcoin/pull/28830#pullrequestreview-2057592650\r\n\r\n> nit: some IWYU fixes, mostly because of the newly introduced bilingual_str and Assert usage:\r\n\r\nA bunch of these were broken before this PR, so I wasn't sure if they make sense to repair here. For test files I stopped asking for repairing them when reviewing other PRs, it just feels too Sisyphean if they are not consistently checked by other reviewers anyway. I wish we'd start enforcing this properly though.",
      "created_at" : "2024-05-15T12:17:50Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28830#issuecomment-2112374433",
      "id" : 2112374433,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28830",
      "node_id" : "IC_kwDOABII58596Eah",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2112374433/reactions"
      },
      "updated_at" : "2024-05-15T12:17:50Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2112374433",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8421793?v=4",
         "events_url" : "https://api.github.com/users/TheCharlatan/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheCharlatan/followers",
         "following_url" : "https://api.github.com/users/TheCharlatan/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheCharlatan/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheCharlatan",
         "id" : 8421793,
         "login" : "TheCharlatan",
         "node_id" : "MDQ6VXNlcjg0MjE3OTM=",
         "organizations_url" : "https://api.github.com/users/TheCharlatan/orgs",
         "received_events_url" : "https://api.github.com/users/TheCharlatan/received_events",
         "repos_url" : "https://api.github.com/users/TheCharlatan/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheCharlatan/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheCharlatan/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheCharlatan"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Thank you for the review @stickies-v,\r\n\r\nUpdated dacdb7962c5fef8db26f6fa31facb606165d1d1e -> 27af3910e5fa9915d4913b82443db216d1b1d61b ([mempoolArgs_7](https://github.com/TheCharlatan/bitcoin/tree/mempoolArgs_7) -> [mempoolArgs_8](https://github.com/TheCharlatan/bitcoin/tree/mempoolArgs_8), [compare](https://github.com/TheCharlatan/bitcoin/compare/mempoolArgs_7..mempoolArgs_8))\r\n\r\n* Addressed @stickies-v's [comment](https://github.com/bitcoin/bitcoin/pull/28830#discussion_r1601457942), checking specific error message in fuzz test.\r\n* Addressed @stickies-v's [comment](https://github.com/bitcoin/bitcoin/pull/28830#pullrequestreview-2057592650), cleaned up some includes.",
      "created_at" : "2024-05-15T12:45:28Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28830#issuecomment-2112426141",
      "id" : 2112426141,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28830",
      "node_id" : "IC_kwDOABII58596RCd",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2112426141/reactions"
      },
      "updated_at" : "2024-05-15T12:45:28Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2112426141",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8421793?v=4",
         "events_url" : "https://api.github.com/users/TheCharlatan/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheCharlatan/followers",
         "following_url" : "https://api.github.com/users/TheCharlatan/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheCharlatan/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheCharlatan",
         "id" : 8421793,
         "login" : "TheCharlatan",
         "node_id" : "MDQ6VXNlcjg0MjE3OTM=",
         "organizations_url" : "https://api.github.com/users/TheCharlatan/orgs",
         "received_events_url" : "https://api.github.com/users/TheCharlatan/received_events",
         "repos_url" : "https://api.github.com/users/TheCharlatan/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheCharlatan/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheCharlatan/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheCharlatan"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28830#discussion_r1601589963"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28830"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1601589963"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Oops no you're absolutely right, I didn't see the for-loop.",
      "commit_id" : "27af3910e5fa9915d4913b82443db216d1b1d61b",
      "created_at" : "2024-05-15T12:52:32Z",
      "diff_hunk" : "@@ -1525,16 +1525,14 @@ bool AppInitMain(NodeContext& node, interfaces::BlockAndHeaderTipInfo* tip_info)\n     if (!result) {\n         return InitError(util::ErrorString(result));\n     }\n-    mempool_opts.check_ratio = std::clamp<int>(mempool_opts.check_ratio, 0, 1'000'000);\n-\n-    int64_t descendant_limit_bytes = mempool_opts.limits.descendant_size_vbytes * 40;\n-    if (mempool_opts.max_size_bytes < 0 || mempool_opts.max_size_bytes < descendant_limit_bytes) {\n-        return InitError(strprintf(_(\"-maxmempool must be at least %d MB\"), std::ceil(descendant_limit_bytes / 1'000'000.0)));\n-    }\n-    LogPrintf(\"* Using %.1f MiB for in-memory UTXO set (plus up to %.1f MiB of unused mempool space)\\n\", cache_sizes.coins * (1.0 / 1024 / 1024), mempool_opts.max_size_bytes * (1.0 / 1024 / 1024));\n \n     for (bool fLoaded = false; !fLoaded && !ShutdownRequested(node);) {\n-        node.mempool = std::make_unique<CTxMemPool>(mempool_opts);\n+        bilingual_str mempool_error;\n+        node.mempool = std::make_unique<CTxMemPool>(mempool_opts, mempool_error);\n+        if (!mempool_error.empty()) {\n+            return InitError(mempool_error);\n+        }\n+        LogPrintf(\"* Using %.1f MiB for in-memory UTXO set (plus up to %.1f MiB of unused mempool space)\\n\", cache_sizes.coins * (1.0 / 1024 / 1024), mempool_opts.max_size_bytes * (1.0 / 1024 / 1024));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28830#discussion_r1601589963",
      "id" : 1601589963,
      "in_reply_to_id" : 1601391240,
      "line" : 1535,
      "node_id" : "PRRC_kwDOABII585fdlLL",
      "original_commit_id" : "dacdb7962c5fef8db26f6fa31facb606165d1d1e",
      "original_line" : 1535,
      "original_position" : 19,
      "original_start_line" : 1531,
      "path" : "src/init.cpp",
      "position" : 19,
      "pull_request_review_id" : 2057924783,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28830",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1601589963/reactions"
      },
      "side" : "RIGHT",
      "start_line" : 1531,
      "start_side" : "RIGHT",
      "subject_type" : "line",
      "updated_at" : "2024-05-15T12:52:32Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1601589963",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/69010457?v=4",
         "events_url" : "https://api.github.com/users/stickies-v/events{/privacy}",
         "followers_url" : "https://api.github.com/users/stickies-v/followers",
         "following_url" : "https://api.github.com/users/stickies-v/following{/other_user}",
         "gists_url" : "https://api.github.com/users/stickies-v/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/stickies-v",
         "id" : 69010457,
         "login" : "stickies-v",
         "node_id" : "MDQ6VXNlcjY5MDEwNDU3",
         "organizations_url" : "https://api.github.com/users/stickies-v/orgs",
         "received_events_url" : "https://api.github.com/users/stickies-v/received_events",
         "repos_url" : "https://api.github.com/users/stickies-v/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/stickies-v/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/stickies-v/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/stickies-v"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "re-ACK 27af3910e5fa9915d4913b82443db216d1b1d61b",
      "created_at" : "2024-05-15T12:59:45Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28830#issuecomment-2112454690",
      "id" : 2112454690,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28830",
      "node_id" : "IC_kwDOABII58596YAi",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2112454690/reactions"
      },
      "updated_at" : "2024-05-15T12:59:45Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2112454690",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/69010457?v=4",
         "events_url" : "https://api.github.com/users/stickies-v/events{/privacy}",
         "followers_url" : "https://api.github.com/users/stickies-v/followers",
         "following_url" : "https://api.github.com/users/stickies-v/following{/other_user}",
         "gists_url" : "https://api.github.com/users/stickies-v/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/stickies-v",
         "id" : 69010457,
         "login" : "stickies-v",
         "node_id" : "MDQ6VXNlcjY5MDEwNDU3",
         "organizations_url" : "https://api.github.com/users/stickies-v/orgs",
         "received_events_url" : "https://api.github.com/users/stickies-v/received_events",
         "repos_url" : "https://api.github.com/users/stickies-v/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/stickies-v/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/stickies-v/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/stickies-v"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28830#discussion_r1601650396"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28830"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1601650396"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "In commit \"[[refactor]] Check CTxMemPool options in constructor\" (27af3910e5fa9915d4913b82443db216d1b1d61b)\r\n\r\nI think it would be clearer to avoid using && and std::move, since using these doesn't actually make things more efficient. In 27af3910e5fa9915d4913b82443db216d1b1d61b, one copy and one move of the option struct will happen. The copy happens when calling the CTxMemPool constructor (since the parameter type is a value parameter), the move happens when returning from SetOptionLimits.\r\n\r\nBut you could get the same result just using plain references and values:\r\n\r\n```diff\r\n--- a/src/txmempool.cpp\r\n+++ b/src/txmempool.cpp\r\n@@ -397,19 +397,20 @@ void CTxMemPoolEntry::UpdateAncestorState(int32_t modifySize, CAmount modifyFee,\r\n     assert(int(nSigOpCostWithAncestors) >= 0);\r\n }\r\n \r\n-static CTxMemPool::Options SetOptionLimits(CTxMemPool::Options&& opts)\r\n+//! Clamp option values and return error if options are not valid.\r\n+static CTxMemPool::Options NormalizeOptions(CTxMemPool::Options opts, bilingual_str& error)\r\n {\r\n     opts.check_ratio = std::clamp<int>(opts.check_ratio, 0, 1'000'000);\r\n+    int64_t descendant_limit_bytes = opts.limits.descendant_size_vbytes * 40;\r\n+    if (opts.max_size_bytes < 0 || opts.max_size_bytes < descendant_limit_bytes) {\r\n+        error = strprintf(_(\"-maxmempool must be at least %d MB\"), std::ceil(descendant_limit_bytes / 1'000'000.0));\r\n+    }\r\n     return opts;\r\n }\r\n \r\n-CTxMemPool::CTxMemPool(Options opts, bilingual_str& error)\r\n-    : m_opts{SetOptionLimits(std::move(opts))}\r\n+CTxMemPool::CTxMemPool(const Options& opts, bilingual_str& error)\r\n+    : m_opts{NormalizeOptions(opts, error)}\r\n {\r\n-    int64_t descendant_limit_bytes = m_opts.limits.descendant_size_vbytes * 40;\r\n-    if (m_opts.max_size_bytes < 0 || m_opts.max_size_bytes < descendant_limit_bytes) {\r\n-        error = strprintf(_(\"-maxmempool must be at least %d MB\"), std::ceil(descendant_limit_bytes / 1'000'000.0));\r\n-    }\r\n }\r\n \r\n bool CTxMemPool::isSpent(const COutPoint& outpoint) const\r\n```\r\n\r\nThis avoids need for std::move and &&, keeps the `CTxMemPool` constructor parameter unchanged, still does one copy and one move when calling and returning from NormalizeOptions. This also keeps error checking and clamping in the same function, which could be helpful if more options are added, because if clamping happens in one function and error checking happens in another function it could make the checking less flexible or require duplicate code.",
      "commit_id" : "27af3910e5fa9915d4913b82443db216d1b1d61b",
      "created_at" : "2024-05-15T13:27:44Z",
      "diff_hunk" : "@@ -395,9 +397,19 @@ void CTxMemPoolEntry::UpdateAncestorState(int32_t modifySize, CAmount modifyFee,\n     assert(int(nSigOpCostWithAncestors) >= 0);\n }\n \n-CTxMemPool::CTxMemPool(const Options& opts)\n-    : m_opts{opts}\n+static CTxMemPool::Options SetOptionLimits(CTxMemPool::Options&& opts)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28830#discussion_r1601650396",
      "id" : 1601650396,
      "line" : 400,
      "node_id" : "PRRC_kwDOABII585fdz7c",
      "original_commit_id" : "27af3910e5fa9915d4913b82443db216d1b1d61b",
      "original_line" : 400,
      "original_position" : 22,
      "original_start_line" : null,
      "path" : "src/txmempool.cpp",
      "position" : 22,
      "pull_request_review_id" : 2058024841,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28830",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1601650396/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-05-15T13:51:36Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1601650396",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28830#discussion_r1601722461"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28830"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1601722461"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "I was just re-using the pattern used for the `ChainstateManager` construction, but I like this more. Taking.",
      "commit_id" : "33f2a708e392edb2501f555efef34a558da9d717",
      "created_at" : "2024-05-15T14:07:29Z",
      "diff_hunk" : "@@ -395,9 +397,19 @@ void CTxMemPoolEntry::UpdateAncestorState(int32_t modifySize, CAmount modifyFee,\n     assert(int(nSigOpCostWithAncestors) >= 0);\n }\n \n-CTxMemPool::CTxMemPool(const Options& opts)\n-    : m_opts{opts}\n+static CTxMemPool::Options SetOptionLimits(CTxMemPool::Options&& opts)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28830#discussion_r1601722461",
      "id" : 1601722461,
      "in_reply_to_id" : 1601650396,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585feFhd",
      "original_commit_id" : "27af3910e5fa9915d4913b82443db216d1b1d61b",
      "original_line" : 400,
      "original_position" : 22,
      "original_start_line" : null,
      "path" : "src/txmempool.cpp",
      "position" : null,
      "pull_request_review_id" : 2058146029,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28830",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1601722461/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-05-15T14:07:29Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1601722461",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8421793?v=4",
         "events_url" : "https://api.github.com/users/TheCharlatan/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheCharlatan/followers",
         "following_url" : "https://api.github.com/users/TheCharlatan/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheCharlatan/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheCharlatan",
         "id" : 8421793,
         "login" : "TheCharlatan",
         "node_id" : "MDQ6VXNlcjg0MjE3OTM=",
         "organizations_url" : "https://api.github.com/users/TheCharlatan/orgs",
         "received_events_url" : "https://api.github.com/users/TheCharlatan/received_events",
         "repos_url" : "https://api.github.com/users/TheCharlatan/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheCharlatan/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheCharlatan/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheCharlatan"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Thanks for the reviews, going to take @ryanofsky's suggestion, hope it is not much work to review again\r\n\r\nUpdated 27af3910e5fa9915d4913b82443db216d1b1d61b -> 33f2a708e392edb2501f555efef34a558da9d717 ([mempoolArgs_8](https://github.com/TheCharlatan/bitcoin/tree/mempoolArgs_8) -> [mempoolArgs_9](https://github.com/TheCharlatan/bitcoin/tree/mempoolArgs_9), [compare](https://github.com/TheCharlatan/bitcoin/compare/mempoolArgs_8..mempoolArgs_9))\r\n* Addressed @ryanofsky's [comment](https://github.com/bitcoin/bitcoin/pull/28830#discussion_r1601650396), slightly changing the mechanics of the mempool constructor for better clarity.\r\n\r\n",
      "created_at" : "2024-05-15T14:09:47Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28830#issuecomment-2112657721",
      "id" : 2112657721,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28830",
      "node_id" : "IC_kwDOABII58597Jk5",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2112657721/reactions"
      },
      "updated_at" : "2024-05-15T14:09:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2112657721",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8421793?v=4",
         "events_url" : "https://api.github.com/users/TheCharlatan/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheCharlatan/followers",
         "following_url" : "https://api.github.com/users/TheCharlatan/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheCharlatan/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheCharlatan",
         "id" : 8421793,
         "login" : "TheCharlatan",
         "node_id" : "MDQ6VXNlcjg0MjE3OTM=",
         "organizations_url" : "https://api.github.com/users/TheCharlatan/orgs",
         "received_events_url" : "https://api.github.com/users/TheCharlatan/received_events",
         "repos_url" : "https://api.github.com/users/TheCharlatan/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheCharlatan/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheCharlatan/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheCharlatan"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28830#discussion_r1601790030"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28830"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1601790030"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "re: https://github.com/bitcoin/bitcoin/pull/28830#discussion_r1601722461\r\n\r\n> I was just re-using the pattern used for the `ChainstateManager` construction, but I like this more. Taking.\r\n\r\nOh, that's interesting. Looking at that, I can see how it's better than what I suggested because it allows callers to potentially move options without copying them at all. Current init code does copy the options because it is looping, but we don't need to require other callers to copy as well.\r\n\r\nSo you might want to keep this code like it is, though I would still suggest combining error checking and clamping into the same function.\r\n\r\nYou could also consider using the name `Flatten` to be consistent with other code. And you could also change the return type to `Options&&` instead of `Options` to be consistent with Flatten avoid an unnecessary move:\r\n\r\nhttps://github.com/bitcoin/bitcoin/blob/33303b2b296cdb21b6ade3e95663e9ed58c08753/src/validation.cpp#L6029\r\n\r\nWhichever approach you like seems good to me, and the PR also seems fine in its current form.",
      "commit_id" : "33f2a708e392edb2501f555efef34a558da9d717",
      "created_at" : "2024-05-15T14:47:28Z",
      "diff_hunk" : "@@ -395,9 +397,19 @@ void CTxMemPoolEntry::UpdateAncestorState(int32_t modifySize, CAmount modifyFee,\n     assert(int(nSigOpCostWithAncestors) >= 0);\n }\n \n-CTxMemPool::CTxMemPool(const Options& opts)\n-    : m_opts{opts}\n+static CTxMemPool::Options SetOptionLimits(CTxMemPool::Options&& opts)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28830#discussion_r1601790030",
      "id" : 1601790030,
      "in_reply_to_id" : 1601650396,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585feWBO",
      "original_commit_id" : "27af3910e5fa9915d4913b82443db216d1b1d61b",
      "original_line" : 400,
      "original_position" : 22,
      "original_start_line" : null,
      "path" : "src/txmempool.cpp",
      "position" : null,
      "pull_request_review_id" : 2058257502,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28830",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1601790030/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-05-15T14:47:40Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1601790030",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28830#discussion_r1601827728"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28830"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1601827728"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : ">  Flatten avoid an unnecessary move:\r\n\r\nWhat do you mean with this? ",
      "commit_id" : "33f2a708e392edb2501f555efef34a558da9d717",
      "created_at" : "2024-05-15T15:11:50Z",
      "diff_hunk" : "@@ -395,9 +397,19 @@ void CTxMemPoolEntry::UpdateAncestorState(int32_t modifySize, CAmount modifyFee,\n     assert(int(nSigOpCostWithAncestors) >= 0);\n }\n \n-CTxMemPool::CTxMemPool(const Options& opts)\n-    : m_opts{opts}\n+static CTxMemPool::Options SetOptionLimits(CTxMemPool::Options&& opts)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28830#discussion_r1601827728",
      "id" : 1601827728,
      "in_reply_to_id" : 1601650396,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585fefOQ",
      "original_commit_id" : "27af3910e5fa9915d4913b82443db216d1b1d61b",
      "original_line" : 400,
      "original_position" : 22,
      "original_start_line" : null,
      "path" : "src/txmempool.cpp",
      "position" : null,
      "pull_request_review_id" : 2058319644,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28830",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1601827728/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-05-15T15:11:50Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1601827728",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8421793?v=4",
         "events_url" : "https://api.github.com/users/TheCharlatan/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheCharlatan/followers",
         "following_url" : "https://api.github.com/users/TheCharlatan/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheCharlatan/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheCharlatan",
         "id" : 8421793,
         "login" : "TheCharlatan",
         "node_id" : "MDQ6VXNlcjg0MjE3OTM=",
         "organizations_url" : "https://api.github.com/users/TheCharlatan/orgs",
         "received_events_url" : "https://api.github.com/users/TheCharlatan/received_events",
         "repos_url" : "https://api.github.com/users/TheCharlatan/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheCharlatan/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheCharlatan/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheCharlatan"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28830#discussion_r1602025691"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28830"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1602025691"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "> > Flatten avoid an unnecessary move:\r\n\r\n> What do you mean with this?\r\n\r\nI was suggesting returning `Options&&` instead of `Options` to be consistent with the validation.cpp flatten code, and to avoid two moves potentially happening on return: One move on the `return opts;` statement which the compiler can't elide because `opts` is not a local variable, and another move after the function returns to initialize `m_opts` member.\r\n\r\nIn practice, however, it looks like only one move will happen, because even though the compiler can't apply NRVO when returning `opts` it _can_ use RVO to initialize `m_opts` in-place. So in practice returning either `Options` or `Options&&` should be equivalent, and I could see reasons for choosing either approach.\r\n\r\nI think I still might opt to copy the validation.cpp flatten name and types so the pattern is the same both places, while also adding a `string& error` output parameter so error checking can happen alongside flattening. But any approach you want to take seems fine to me. And thanks for asking what was wrong with returning an `Options` value, because I was incorrectly assuming it was less efficient than it really is.",
      "commit_id" : "33f2a708e392edb2501f555efef34a558da9d717",
      "created_at" : "2024-05-15T17:42:37Z",
      "diff_hunk" : "@@ -395,9 +397,19 @@ void CTxMemPoolEntry::UpdateAncestorState(int32_t modifySize, CAmount modifyFee,\n     assert(int(nSigOpCostWithAncestors) >= 0);\n }\n \n-CTxMemPool::CTxMemPool(const Options& opts)\n-    : m_opts{opts}\n+static CTxMemPool::Options SetOptionLimits(CTxMemPool::Options&& opts)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28830#discussion_r1602025691",
      "id" : 1602025691,
      "in_reply_to_id" : 1601650396,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585ffPjb",
      "original_commit_id" : "27af3910e5fa9915d4913b82443db216d1b1d61b",
      "original_line" : 400,
      "original_position" : 22,
      "original_start_line" : null,
      "path" : "src/txmempool.cpp",
      "position" : null,
      "pull_request_review_id" : 2058646578,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28830",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1602025691/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-05-15T17:42:37Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1602025691",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Sorry for the many pushes, but I think it's important to get this consistent.\r\n\r\nUpdated 33f2a708e392edb2501f555efef34a558da9d717 -> 856c8563ca342303a83977146df22768bb6e2c7e ([mempoolArgs_9](https://github.com/TheCharlatan/bitcoin/tree/mempoolArgs_9) -> [mempoolArgs_10](https://github.com/TheCharlatan/bitcoin/tree/mempoolArgs_10), [compare](https://github.com/TheCharlatan/bitcoin/compare/mempoolArgs_9..mempoolArgs_10))\r\n\r\n* Changed the constructor to be more like the `ChainstateManager`.\r\n",
      "created_at" : "2024-05-15T18:02:15Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28830#issuecomment-2113137626",
      "id" : 2113137626,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28830",
      "node_id" : "IC_kwDOABII58598-va",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2113137626/reactions"
      },
      "updated_at" : "2024-05-15T18:02:15Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2113137626",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8421793?v=4",
         "events_url" : "https://api.github.com/users/TheCharlatan/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheCharlatan/followers",
         "following_url" : "https://api.github.com/users/TheCharlatan/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheCharlatan/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheCharlatan",
         "id" : 8421793,
         "login" : "TheCharlatan",
         "node_id" : "MDQ6VXNlcjg0MjE3OTM=",
         "organizations_url" : "https://api.github.com/users/TheCharlatan/orgs",
         "received_events_url" : "https://api.github.com/users/TheCharlatan/received_events",
         "repos_url" : "https://api.github.com/users/TheCharlatan/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheCharlatan/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheCharlatan/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheCharlatan"
      }
   }
]
