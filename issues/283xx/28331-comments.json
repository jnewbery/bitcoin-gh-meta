[
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| Concept ACK | [theStack](https://github.com/bitcoin/bitcoin/pull/28331#pullrequestreview-1620466774) |\n| Approach ACK | [jonatack](https://github.com/bitcoin/bitcoin/pull/28331#pullrequestreview-1625394283) |\n\nIf your review is incorrectly listed, please react with ð to this comment and the bot will ignore it on the next update.\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#bitcoin-core/gui/754](https://github.com/bitcoin-core/gui/pull/754) (Add BIP324 \"Transport\" label to peer details by hebasto)\n* [#28463](https://github.com/bitcoin/bitcoin/pull/28463) (p2p: Increase inbound capacity for block-relay only connections by mzumsande)\n* [#28453](https://github.com/bitcoin/bitcoin/pull/28453) (wallet: Receive silent payment transactions by achow101)\n* [#28452](https://github.com/bitcoin/bitcoin/pull/28452) (Do not use std::vector = {} to release memory by sipa)\n* [#28423](https://github.com/bitcoin/bitcoin/pull/28423) (kernel: Remove protocol.h/netaddress.h/compat.h from kernel headers by TheCharlatan)\n* [#28248](https://github.com/bitcoin/bitcoin/pull/28248) (p2p: peer connection bug fixes, logic and logging improvements by jonatack)\n* [#28155](https://github.com/bitcoin/bitcoin/pull/28155) (Improves addnode / m_added_nodes logic by sr-gi)\n* [#27596](https://github.com/bitcoin/bitcoin/pull/27596) (assumeutxo (2) by jamesob)\n* [#27114](https://github.com/bitcoin/bitcoin/pull/27114) (p2p: Allow whitelisting outgoing connections by brunoerg)\n* [#27052](https://github.com/bitcoin/bitcoin/pull/27052) (test: rpc: add last block announcement time to getpeerinfo result by LarryRuane)\n* [#26863](https://github.com/bitcoin/bitcoin/pull/26863) (test: merge banning test from p2p_disconnect_ban to rpc_setban by brunoerg)\n* [#26728](https://github.com/bitcoin/bitcoin/pull/26728) (wallet: Have the wallet store the key for automatically generated descriptors by achow101)\n* [#26621](https://github.com/bitcoin/bitcoin/pull/26621) (refactor: Continue moving application data from CNode to Peer by dergoegge)\n* [#26366](https://github.com/bitcoin/bitcoin/pull/26366) (rpc, test: `addnode` improv + add test coverage for invalid command by brunoerg)\n* [#26114](https://github.com/bitcoin/bitcoin/pull/26114) (net: Make AddrFetch connections to fixed seeds by mzumsande)\n* [#25907](https://github.com/bitcoin/bitcoin/pull/25907) (wallet: rpc to add automatically generated descriptors by achow101)\n* [#22341](https://github.com/bitcoin/bitcoin/pull/22341) (rpc: add getxpub by Sjors)\n* [#20892](https://github.com/bitcoin/bitcoin/pull/20892) (tests: Run both descriptor and legacy tests within a single test invocation by achow101)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.\n",
      "created_at" : "2023-08-24T00:25:18Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28331#issuecomment-1690809934",
      "id" : 1690809934,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28331",
      "node_id" : "IC_kwDOABII585kx7ZO",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1690809934/reactions"
      },
      "updated_at" : "2023-09-14T10:33:45Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1690809934",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Not needed for testing here, but it would still be cool to have a lock icon in the peers tab in the GUI, and reveal the session id if you click on it. cc @hebasto \r\n\r\nTested a manual connection between macOS and Ubuntu, found matching session ids, pfew - no man in the middle attack on my local network :-)\r\n\r\nMy DNS seed hasn't discovered any peers yet announcing the service flag, that could take a while. https://github.com/sipa/bitcoin-seeder/pull/102",
      "created_at" : "2023-08-25T11:53:39Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28331#issuecomment-1693239025",
      "id" : 1693239025,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28331",
      "node_id" : "IC_kwDOABII585k7Mbx",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 1,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1693239025/reactions"
      },
      "updated_at" : "2023-08-25T12:21:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1693239025",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@Sjors Re https://github.com/bitcoin/bitcoin/pull/28196#issuecomment-1689980940:\r\n\r\nI've changed a net debug-level log message to say \"trying v2 connection ... lastseen=...hrs\\n\"",
      "created_at" : "2023-08-29T14:07:03Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28331#issuecomment-1697514804",
      "id" : 1697514804,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28331",
      "node_id" : "IC_kwDOABII585lLgU0",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1697514804/reactions"
      },
      "updated_at" : "2023-08-29T14:07:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1697514804",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> I've changed a net debug-level log message to say \"trying v2 connection ... lastseen=...hrs\\n\"\r\n\r\nNice! Though I'm not seeing that in your latest push f770273b3842e45a612cb8bb81d46e3d0883230a.",
      "created_at" : "2023-08-30T14:09:43Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28331#issuecomment-1699262624",
      "id" : 1699262624,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28331",
      "node_id" : "IC_kwDOABII585lSLCg",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1699262624/reactions"
      },
      "updated_at" : "2023-08-30T14:09:43Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1699262624",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@Sjors https://github.com/bitcoin/bitcoin/blob/f770273b3842e45a612cb8bb81d46e3d0883230a/src/net.cpp#L470",
      "created_at" : "2023-08-30T17:10:29Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28331#issuecomment-1699553968",
      "id" : 1699553968,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28331",
      "node_id" : "IC_kwDOABII585lTSKw",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1699553968/reactions"
      },
      "updated_at" : "2023-08-30T17:10:29Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1699553968",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Oh sorry, I lazy grepped for \"v2 connection\". ",
      "created_at" : "2023-08-31T08:01:18Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28331#issuecomment-1700553281",
      "id" : 1700553281,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28331",
      "node_id" : "IC_kwDOABII585lXGJB",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1700553281/reactions"
      },
      "updated_at" : "2023-08-31T08:01:18Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1700553281",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Marked as ready for review.",
      "created_at" : "2023-09-10T15:20:07Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28331#issuecomment-1712841353",
      "id" : 1712841353,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28331",
      "node_id" : "IC_kwDOABII585mF-KJ",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1712841353/reactions"
      },
      "updated_at" : "2023-09-10T15:20:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1712841353",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->\nð This pull request conflicts with the target branch and [needs rebase](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#rebasing-changes).\n",
      "created_at" : "2023-09-11T09:23:20Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28331#issuecomment-1713504110",
      "id" : 1713504110,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28331",
      "node_id" : "IC_kwDOABII585mIf9u",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1713504110/reactions"
      },
      "updated_at" : "2023-09-11T09:23:20Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1713504110",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> ... it would still be cool to have a lock icon in the peers tab in the GUI...\r\n\r\nSee https://github.com/bitcoin-core/gui/pull/754 (however, not a lock icon).",
      "created_at" : "2023-09-11T11:19:03Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28331#issuecomment-1713679095",
      "id" : 1713679095,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28331",
      "node_id" : "IC_kwDOABII585mJKr3",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1713679095/reactions"
      },
      "updated_at" : "2023-09-11T11:19:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1713679095",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/32963518?v=4",
         "events_url" : "https://api.github.com/users/hebasto/events{/privacy}",
         "followers_url" : "https://api.github.com/users/hebasto/followers",
         "following_url" : "https://api.github.com/users/hebasto/following{/other_user}",
         "gists_url" : "https://api.github.com/users/hebasto/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/hebasto",
         "id" : 32963518,
         "login" : "hebasto",
         "node_id" : "MDQ6VXNlcjMyOTYzNTE4",
         "organizations_url" : "https://api.github.com/users/hebasto/orgs",
         "received_events_url" : "https://api.github.com/users/hebasto/received_events",
         "repos_url" : "https://api.github.com/users/hebasto/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/hebasto/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/hebasto"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28331#discussion_r1321845616"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28331"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1321845616"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "in commit 1768aff56d6feedcb22b21df12e8926924fdac6a: this flag should also be added to the `ALL_SERVICE_FLAGS` array in `test/util/net.h`, I guess (used by fuzz tests):\r\nhttps://github.com/bitcoin/bitcoin/blob/8f7b9eb8711fdb32e8bdb59d2a7462a46c7a8086/src/test/util/net.h#L61-L68",
      "commit_id" : "018594ef44dc57e828a9a38c9643f85fb6c2a1e4",
      "created_at" : "2023-09-11T17:12:07Z",
      "diff_hunk" : "@@ -291,6 +291,9 @@ enum ServiceFlags : uint64_t {\n     // See BIP159 for details on how this is implemented.\n     NODE_NETWORK_LIMITED = (1 << 10),\n \n+    // NODE_P2P_V2 means the node supports BIP324 transport\n+    NODE_P2P_V2 = (1 << 11),",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28331#discussion_r1321845616",
      "id" : 1321845616,
      "line" : 295,
      "node_id" : "PRRC_kwDOABII585OycNw",
      "original_commit_id" : "1768aff56d6feedcb22b21df12e8926924fdac6a",
      "original_line" : 295,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "src/protocol.h",
      "position" : 5,
      "pull_request_review_id" : 1620466774,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28331",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1321845616/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-09-11T17:21:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1321845616",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/91535?v=4",
         "events_url" : "https://api.github.com/users/theStack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/theStack/followers",
         "following_url" : "https://api.github.com/users/theStack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/theStack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/theStack",
         "id" : 91535,
         "login" : "theStack",
         "node_id" : "MDQ6VXNlcjkxNTM1",
         "organizations_url" : "https://api.github.com/users/theStack/orgs",
         "received_events_url" : "https://api.github.com/users/theStack/received_events",
         "repos_url" : "https://api.github.com/users/theStack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/theStack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/theStack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/theStack"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28331#discussion_r1321852444"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28331"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1321852444"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "in commit be8a5dcddd36be8a5f137baf3ebd32d590a0747d: Somewhere around here it might make sense to verify that v2 is indeed used by checking the new `getpeerinfo` fields (\"transport_protocol_type\" and \"session_id\") for nodes 0 and 1.",
      "commit_id" : "018594ef44dc57e828a9a38c9643f85fb6c2a1e4",
      "created_at" : "2023-09-11T17:19:13Z",
      "diff_hunk" : "@@ -0,0 +1,91 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2022 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\"\"\"\n+Test BIP324 v2 transport\n+\"\"\"\n+\n+from test_framework.test_framework import BitcoinTestFramework\n+from test_framework.util import assert_equal\n+\n+class P2PV2Test(BitcoinTestFramework):\n+    def set_test_params(self):\n+        self.setup_clean_chain = True\n+        self.num_nodes = 5\n+        self.extra_args = [[\"-v2transport=1\"], [\"-v2transport=1\"], [\"-v2transport=0\"], [\"-v2transport=0\"], [\"-v2transport=0\"]]\n+\n+    def run_test(self):\n+        sending_handshake = \"start sending v2 handshake to peer\"\n+        downgrading_to_v1 = \"retrying with v1 transport protocol for peer\"\n+        self.disconnect_nodes(0, 1)\n+        self.disconnect_nodes(1, 2)\n+        self.disconnect_nodes(2, 3)\n+        self.disconnect_nodes(3, 4)\n+\n+        # V2 nodes can sync with V2 nodes\n+        assert_equal(self.nodes[0].getblockcount(), 0)\n+        assert_equal(self.nodes[1].getblockcount(), 0)\n+        self.nodes[0].generatetoaddress(5, \"bcrt1q0yq2azut8gn2xu3y2g0xucf8pny6w8uxmyf220\", invalid_call=False)\n+        assert_equal(self.nodes[0].getblockcount(), 5)\n+        assert_equal(self.nodes[1].getblockcount(), 0)\n+        with self.nodes[0].assert_debug_log(expected_msgs=[sending_handshake],\n+                                            unexpected_msgs=[downgrading_to_v1]):\n+            self.connect_nodes(0, 1, True)\n+        # sync_all() verifies that the block tips match\n+        self.sync_all(self.nodes[0:2])",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28331#discussion_r1321852444",
      "id" : 1321852444,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585Oyd4c",
      "original_commit_id" : "be8a5dcddd36be8a5f137baf3ebd32d590a0747d",
      "original_line" : 36,
      "original_position" : 36,
      "original_start_line" : 35,
      "path" : "test/functional/p2p_v2.py",
      "position" : null,
      "pull_request_review_id" : 1620466774,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28331",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1321852444/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : "RIGHT",
      "subject_type" : "line",
      "updated_at" : "2023-09-11T17:21:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1321852444",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/91535?v=4",
         "events_url" : "https://api.github.com/users/theStack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/theStack/followers",
         "following_url" : "https://api.github.com/users/theStack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/theStack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/theStack",
         "id" : 91535,
         "login" : "theStack",
         "node_id" : "MDQ6VXNlcjkxNTM1",
         "organizations_url" : "https://api.github.com/users/theStack/orgs",
         "received_events_url" : "https://api.github.com/users/theStack/received_events",
         "repos_url" : "https://api.github.com/users/theStack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/theStack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/theStack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/theStack"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28331#discussion_r1322583238"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28331"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1322583238"
         }
      },
      "author_association" : "MEMBER",
      "body" : "nit: Not really a fan of hard-coding default value in the code syntax. If the default was changed, this would require changing the code syntax. It would be better to hard-code the default value itself. Even best would be to not hard-code anything anywhere, which should be possible with `self.Arg<bool>(2)`, or similar.",
      "commit_id" : "018594ef44dc57e828a9a38c9643f85fb6c2a1e4",
      "created_at" : "2023-09-12T07:39:36Z",
      "diff_hunk" : "@@ -309,17 +320,21 @@ static RPCHelpMan addnode()\n     CConnman& connman = EnsureConnman(node);\n \n     std::string strNode = request.params[0].get_str();\n+    bool use_p2p_v2 = !request.params[2].isNull() && request.params[2].get_bool();",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28331#discussion_r1322583238",
      "id" : 1322583238,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585O1QTG",
      "original_commit_id" : "2aabbdf4de01ef1a3fb0c1bb86ef163c9fba587b",
      "original_line" : 323,
      "original_position" : 50,
      "original_start_line" : null,
      "path" : "src/rpc/net.cpp",
      "position" : null,
      "pull_request_review_id" : 1621530741,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28331",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1322583238/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-09-12T08:02:43Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1322583238",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28331#discussion_r1322591734"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28331"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1322591734"
         }
      },
      "author_association" : "MEMBER",
      "body" : "```suggestion\r\n    const bool use_p2p_v2(addrConnect.nServices & GetLocalServices() & NODE_P2P_V2);\r\n```\r\n\r\nnit: Can be written shorter",
      "commit_id" : "018594ef44dc57e828a9a38c9643f85fb6c2a1e4",
      "created_at" : "2023-09-12T07:46:51Z",
      "diff_hunk" : "@@ -465,7 +465,11 @@ CNode* CConnman::ConnectNode(CAddress addrConnect, const char *pszDest, bool fCo\n         }\n     }\n \n-    LogPrintLevel(BCLog::NET, BCLog::Level::Debug, \"trying connection %s lastseen=%.1fhrs\\n\",\n+    // Use v2 transport when both us and them signal NODE_P2P_V2.\n+    const bool use_p2p_v2 = !!(addrConnect.nServices & GetLocalServices() & NODE_P2P_V2);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28331#discussion_r1322591734",
      "id" : 1322591734,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585O1SX2",
      "original_commit_id" : "2aabbdf4de01ef1a3fb0c1bb86ef163c9fba587b",
      "original_line" : 469,
      "original_position" : 6,
      "original_start_line" : null,
      "path" : "src/net.cpp",
      "position" : null,
      "pull_request_review_id" : 1621530741,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28331",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1322591734/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-09-12T08:02:43Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1322591734",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28331#discussion_r1322592221"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28331"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1322592221"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Same",
      "commit_id" : "018594ef44dc57e828a9a38c9643f85fb6c2a1e4",
      "created_at" : "2023-09-12T07:47:13Z",
      "diff_hunk" : "@@ -1822,6 +1894,10 @@ void CConnman::CreateNodeFromAcceptedSocket(std::unique_ptr<Sock>&& sock,\n     }\n \n     const bool inbound_onion = std::find(m_onion_binds.begin(), m_onion_binds.end(), addr_bind) != m_onion_binds.end();\n+    // The V2Transport transparently falls back to V1 behavior when an incoming V1 connection is\n+    // detected, so use it whenever we signal NODE_P2P_V2.\n+    const bool use_p2p_v2 = !!(nodeServices & NODE_P2P_V2);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28331#discussion_r1322592221",
      "id" : 1322592221,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585O1Sfd",
      "original_commit_id" : "2aabbdf4de01ef1a3fb0c1bb86ef163c9fba587b",
      "original_line" : 1899,
      "original_position" : 198,
      "original_start_line" : null,
      "path" : "src/net.cpp",
      "position" : null,
      "pull_request_review_id" : 1621530741,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28331",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1322592221/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-09-12T08:02:43Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1322592221",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28331#discussion_r1322606364"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28331"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1322606364"
         }
      },
      "author_association" : "MEMBER",
      "body" : "q in be8a5dcddd36be8a5f137baf3ebd32d590a0747d: Is it required to re-write the logic here? Seems a smaller diff would be to  replace `24` and `32`?",
      "commit_id" : "018594ef44dc57e828a9a38c9643f85fb6c2a1e4",
      "created_at" : "2023-09-12T07:55:29Z",
      "diff_hunk" : "@@ -581,26 +586,50 @@ def restart_node(self, i, extra_args=None):\n     def wait_for_node_exit(self, i, timeout):\n         self.nodes[i].process.wait(timeout)\n \n-    def connect_nodes(self, a, b):\n+    def connect_nodes(self, a, b, peer_advertises_v2=None):\n         from_connection = self.nodes[a]\n         to_connection = self.nodes[b]\n         from_num_peers = 1 + len(from_connection.getpeerinfo())\n         to_num_peers = 1 + len(to_connection.getpeerinfo())\n         ip_port = \"127.0.0.1:\" + str(p2p_port(b))\n-        from_connection.addnode(ip_port, \"onetry\")\n+\n+        if peer_advertises_v2 is None:\n+            peer_advertises_v2 = self.options.v2transport\n+\n+        if peer_advertises_v2:\n+            from_connection.addnode(ip_port, \"onetry\", True)\n+        else:\n+            # skip the optional third argument (default false) for\n+            # compatibility with older clients\n+            from_connection.addnode(ip_port, \"onetry\")\n+\n+        min_verack_msg_bytes = 21 if peer_advertises_v2 else 24\n         # poll until version handshake complete to avoid race conditions\n         # with transaction relaying\n         # See comments in net_processing:\n         # * Must have a version message before anything else\n         # * Must have a verack message before anything else\n-        self.wait_until(lambda: sum(peer['version'] != 0 for peer in from_connection.getpeerinfo()) == from_num_peers)\n-        self.wait_until(lambda: sum(peer['version'] != 0 for peer in to_connection.getpeerinfo()) == to_num_peers)\n-        self.wait_until(lambda: sum(peer['bytesrecv_per_msg'].pop('verack', 0) == 24 for peer in from_connection.getpeerinfo()) == from_num_peers)\n-        self.wait_until(lambda: sum(peer['bytesrecv_per_msg'].pop('verack', 0) == 24 for peer in to_connection.getpeerinfo()) == to_num_peers)\n-        # The message bytes are counted before processing the message, so make\n-        # sure it was fully processed by waiting for a ping.\n-        self.wait_until(lambda: sum(peer[\"bytesrecv_per_msg\"].pop(\"pong\", 0) >= 32 for peer in from_connection.getpeerinfo()) == from_num_peers)\n-        self.wait_until(lambda: sum(peer[\"bytesrecv_per_msg\"].pop(\"pong\", 0) >= 32 for peer in to_connection.getpeerinfo()) == to_num_peers)\n+        # * The message bytes are counted before processing the message, so make\n+        #   sure it was fully processed by waiting for a ping.\n+\n+        def check_initiator_handshake():\n+            peerinfo = from_connection.getpeerinfo()\n+            if len(peerinfo) != from_num_peers:\n+                return False\n+\n+            responder = list(filter(lambda x: x[\"addr\"] == ip_port, peerinfo))[0]\n+            return responder['version'] != 0 and responder['bytesrecv_per_msg'].pop('verack', 0) >= min_verack_msg_bytes and responder['bytesrecv_per_msg'].pop(\"pong\", 0) >= 29\n+\n+        def check_responder_handshake():\n+            peerinfo = to_connection.getpeerinfo()\n+            if len(peerinfo) != to_num_peers:\n+                return False\n+\n+            initiator = list(filter(lambda x: x[\"addrbind\"] == ip_port, peerinfo))[0]\n+            return initiator['version'] != 0 and initiator['bytesrecv_per_msg'].pop('verack', 0) >= min_verack_msg_bytes and initiator['bytesrecv_per_msg'].pop(\"pong\", 0) >= 29\n+\n+        self.wait_until(check_initiator_handshake)\n+        self.wait_until(check_responder_handshake)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28331#discussion_r1322606364",
      "id" : 1322606364,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585O1V8c",
      "original_commit_id" : "2aabbdf4de01ef1a3fb0c1bb86ef163c9fba587b",
      "original_line" : 632,
      "original_position" : 85,
      "original_start_line" : 612,
      "path" : "test/functional/test_framework/test_framework.py",
      "position" : null,
      "pull_request_review_id" : 1621530741,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28331",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1322606364/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : "RIGHT",
      "subject_type" : "line",
      "updated_at" : "2023-09-12T08:02:43Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1322606364",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28331#discussion_r1322610190"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28331"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1322610190"
         }
      },
      "author_association" : "MEMBER",
      "body" : "```suggestion\r\n        assert \"P2P_V2\" in network_info[\"localservicesnames\"]\r\n            \r\n```\r\n\r\nnit: Can be written shorter? Also, the full test can be removed and the two checks can be added to the p2p_v2.py test? This avoids having to spin up a node twice to call a single RPC each time.",
      "commit_id" : "018594ef44dc57e828a9a38c9643f85fb6c2a1e4",
      "created_at" : "2023-09-12T07:58:42Z",
      "diff_hunk" : "@@ -0,0 +1,32 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2021 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\"\"\"\n+Test v2 transport\n+\"\"\"\n+\n+from test_framework.messages import NODE_P2P_V2\n+from test_framework.test_framework import BitcoinTestFramework\n+from test_framework.util import assert_equal\n+\n+class V2TransportTest(BitcoinTestFramework):\n+    def set_test_params(self):\n+        self.setup_clean_chain=True\n+        self.num_nodes = 1\n+        self.extra_args = [[\"-v2transport=0\"]]\n+\n+    def run_test(self):\n+        network_info = self.nodes[0].getnetworkinfo()\n+        assert_equal(int(network_info[\"localservices\"], 16) & NODE_P2P_V2, 0)\n+        if \"P2P_V2\" in network_info[\"localservicesnames\"]:\n+            raise AssertionError(\"Did not expect P2P_V2 to be signaled for a v1 node\")",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28331#discussion_r1322610190",
      "id" : 1322610190,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585O1W4O",
      "original_commit_id" : "2aabbdf4de01ef1a3fb0c1bb86ef163c9fba587b",
      "original_line" : 23,
      "original_position" : 23,
      "original_start_line" : 22,
      "path" : "test/functional/p2p_v2_transport.py",
      "position" : null,
      "pull_request_review_id" : 1621530741,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28331",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1322610190/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : "RIGHT",
      "subject_type" : "line",
      "updated_at" : "2023-09-12T08:02:43Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1322610190",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28331#discussion_r1322611559"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28331"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1322611559"
         }
      },
      "author_association" : "MEMBER",
      "body" : "nit: The call is \"invalid\". `self.generate...` would be more valid.",
      "commit_id" : "018594ef44dc57e828a9a38c9643f85fb6c2a1e4",
      "created_at" : "2023-09-12T07:59:52Z",
      "diff_hunk" : "@@ -0,0 +1,91 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2022 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\"\"\"\n+Test BIP324 v2 transport\n+\"\"\"\n+\n+from test_framework.test_framework import BitcoinTestFramework\n+from test_framework.util import assert_equal\n+\n+class P2PV2Test(BitcoinTestFramework):\n+    def set_test_params(self):\n+        self.setup_clean_chain = True\n+        self.num_nodes = 5\n+        self.extra_args = [[\"-v2transport=1\"], [\"-v2transport=1\"], [\"-v2transport=0\"], [\"-v2transport=0\"], [\"-v2transport=0\"]]\n+\n+    def run_test(self):\n+        sending_handshake = \"start sending v2 handshake to peer\"\n+        downgrading_to_v1 = \"retrying with v1 transport protocol for peer\"\n+        self.disconnect_nodes(0, 1)\n+        self.disconnect_nodes(1, 2)\n+        self.disconnect_nodes(2, 3)\n+        self.disconnect_nodes(3, 4)\n+\n+        # V2 nodes can sync with V2 nodes\n+        assert_equal(self.nodes[0].getblockcount(), 0)\n+        assert_equal(self.nodes[1].getblockcount(), 0)\n+        self.nodes[0].generatetoaddress(5, \"bcrt1q0yq2azut8gn2xu3y2g0xucf8pny6w8uxmyf220\", invalid_call=False)\n+        assert_equal(self.nodes[0].getblockcount(), 5)\n+        assert_equal(self.nodes[1].getblockcount(), 0)\n+        with self.nodes[0].assert_debug_log(expected_msgs=[sending_handshake],\n+                                            unexpected_msgs=[downgrading_to_v1]):\n+            self.connect_nodes(0, 1, True)\n+        # sync_all() verifies that the block tips match\n+        self.sync_all(self.nodes[0:2])\n+        assert_equal(self.nodes[1].getblockcount(), 5)\n+\n+        # V1 nodes can sync with each other\n+        assert_equal(self.nodes[2].getblockcount(), 0)\n+        assert_equal(self.nodes[3].getblockcount(), 0)\n+        self.nodes[2].generatetoaddress(8, \"bcrt1qyr5lnc2g8aa3qa9c4th9d46n5uu4y0m9nvq2cv\", invalid_call=False)\n+        assert_equal(self.nodes[2].getblockcount(), 8)\n+        assert_equal(self.nodes[3].getblockcount(), 0)\n+        with self.nodes[2].assert_debug_log(expected_msgs=[],\n+                                            unexpected_msgs=[sending_handshake, downgrading_to_v1]):\n+            self.connect_nodes(2, 3, False)\n+        self.sync_all(self.nodes[2:4])\n+        assert_equal(self.nodes[3].getblockcount(), 8)\n+        assert self.nodes[0].getbestblockhash() != self.nodes[2].getbestblockhash()\n+\n+        # V1 nodes can sync with V2 nodes\n+        self.disconnect_nodes(0, 1)\n+        self.disconnect_nodes(2, 3)\n+        with self.nodes[2].assert_debug_log(expected_msgs=[],\n+                                            unexpected_msgs=[sending_handshake, downgrading_to_v1]):\n+            self.connect_nodes(2, 1, True)\n+        self.sync_all(self.nodes[1:3])\n+        assert_equal(self.nodes[1].getblockcount(), 8)\n+        assert self.nodes[0].getbestblockhash() != self.nodes[1].getbestblockhash()\n+\n+        # V2 nodes can sync with V1 nodes\n+        self.disconnect_nodes(1, 2)\n+        with self.nodes[0].assert_debug_log(expected_msgs=[],\n+                                            unexpected_msgs=[sending_handshake, downgrading_to_v1]):\n+            self.connect_nodes(0, 3, False)\n+        self.sync_all([self.nodes[0], self.nodes[3]])\n+        assert_equal(self.nodes[0].getblockcount(), 8)\n+\n+        # V2 node mines another block and everyone gets it\n+        self.connect_nodes(0, 1, True)\n+        self.connect_nodes(1, 2, False)\n+        self.nodes[1].generatetoaddress(1, \"bcrt1q3zsxn3qx0cqyyxgv90k7j6786mpe543wc4vy2v\", invalid_call=False)\n+        self.sync_all(self.nodes[0:4])\n+        assert_equal(self.nodes[0].getblockcount(), 9) # sync_all() verifies tip hashes match\n+\n+        # V1 node mines another block and everyone gets it\n+        self.nodes[3].generatetoaddress(2, \"bcrt1q3zsxn3qx0cqyyxgv90k7j6786mpe543wc4vy2v\", invalid_call=False)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28331#discussion_r1322611559",
      "id" : 1322611559,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585O1XNn",
      "original_commit_id" : "2aabbdf4de01ef1a3fb0c1bb86ef163c9fba587b",
      "original_line" : 78,
      "original_position" : 78,
      "original_start_line" : null,
      "path" : "test/functional/p2p_v2.py",
      "position" : null,
      "pull_request_review_id" : 1621530741,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28331",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1322611559/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-09-12T08:04:24Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1322611559",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28331#discussion_r1322613818"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28331"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1322613818"
         }
      },
      "author_association" : "MEMBER",
      "body" : "```suggestion\r\n    def connect_nodes(self, a, b, *, peer_advertises_v2=None):\r\n```\r\n\r\noptional integral types should use named arguments",
      "commit_id" : "018594ef44dc57e828a9a38c9643f85fb6c2a1e4",
      "created_at" : "2023-09-12T08:01:44Z",
      "diff_hunk" : "@@ -581,26 +586,50 @@ def restart_node(self, i, extra_args=None):\n     def wait_for_node_exit(self, i, timeout):\n         self.nodes[i].process.wait(timeout)\n \n-    def connect_nodes(self, a, b):\n+    def connect_nodes(self, a, b, peer_advertises_v2=None):",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28331#discussion_r1322613818",
      "id" : 1322613818,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585O1Xw6",
      "original_commit_id" : "2aabbdf4de01ef1a3fb0c1bb86ef163c9fba587b",
      "original_line" : 589,
      "original_position" : 33,
      "original_start_line" : null,
      "path" : "test/functional/test_framework/test_framework.py",
      "position" : null,
      "pull_request_review_id" : 1621530741,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28331",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1322613818/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-09-12T08:02:43Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1322613818",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Couple things while testing this out:\r\n\r\n* Would be nice to have the transport type and session id also show in the GUI's peer info page\r\n* Could we log the connection version once the connection is established? Maybe once we receive their version message? The transport version can be figured out from the logs for outbound connections, but not for inbound.",
      "created_at" : "2023-09-13T18:41:21Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28331#issuecomment-1718137057",
      "id" : 1718137057,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28331",
      "node_id" : "IC_kwDOABII585maLDh",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1718137057/reactions"
      },
      "updated_at" : "2023-09-13T18:41:50Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1718137057",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "node_id" : "MDQ6VXNlcjM3ODIyNzQ=",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "(deleted my last comment, forgot to add `true` to the RPC call)",
      "created_at" : "2023-09-13T19:06:10Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28331#issuecomment-1718168633",
      "id" : 1718168633,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28331",
      "node_id" : "IC_kwDOABII585maSw5",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1718168633/reactions"
      },
      "updated_at" : "2023-09-13T19:06:10Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1718168633",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28331#discussion_r1324997532"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28331"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1324997532"
         }
      },
      "author_association" : "MEMBER",
      "body" : "1fa8efaff73bda19b7e8f2e27d24b08ccf0de764: we could add something like a `-addnodev2` cli arg and then use `.m_added_v2_nodes`?\r\n\r\nAlternatively can we look the node up in our known addresses and use whatever the service flag says?",
      "commit_id" : "018594ef44dc57e828a9a38c9643f85fb6c2a1e4",
      "created_at" : "2023-09-13T19:44:39Z",
      "diff_hunk" : "@@ -1077,7 +1081,11 @@ class CConnman\n         vWhitelistedRange = connOptions.vWhitelistedRange;\n         {\n             LOCK(m_added_nodes_mutex);\n-            m_added_nodes = connOptions.m_added_nodes;\n+\n+            for (const std::string& strAddedNode : connOptions.m_added_nodes) {\n+                // -addnode cli arg does not currently have a way to signal BIP324 support",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28331#discussion_r1324997532",
      "id" : 1324997532,
      "line" : 1123,
      "node_id" : "PRRC_kwDOABII585O-duc",
      "original_commit_id" : "1fa8efaff73bda19b7e8f2e27d24b08ccf0de764",
      "original_line" : 1123,
      "original_position" : 24,
      "original_start_line" : null,
      "path" : "src/net.h",
      "position" : 131,
      "pull_request_review_id" : 1625319787,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28331",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1324997532/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-09-13T20:12:55Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1324997532",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28331#discussion_r1325007449"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28331"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1325007449"
         }
      },
      "author_association" : "MEMBER",
      "body" : "8672b854fb7a81a400150ef09e99a06c829b68f8: can you add some documentation for what this class is?",
      "commit_id" : "018594ef44dc57e828a9a38c9643f85fb6c2a1e4",
      "created_at" : "2023-09-13T19:49:59Z",
      "diff_hunk" : "@@ -309,25 +309,33 @@ class CSemaphore\n     int value;\n \n public:\n-    explicit CSemaphore(int init) : value(init) {}\n+    explicit CSemaphore(int init) noexcept : value(init) {}",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28331#discussion_r1325007449",
      "id" : 1325007449,
      "line" : 316,
      "node_id" : "PRRC_kwDOABII585O-gJZ",
      "original_commit_id" : "8672b854fb7a81a400150ef09e99a06c829b68f8",
      "original_line" : 316,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "src/sync.h",
      "position" : 16,
      "pull_request_review_id" : 1625319787,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28331",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1325007449/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-09-13T20:12:55Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1325007449",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28331#discussion_r1325029773"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28331"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1325029773"
         }
      },
      "author_association" : "MEMBER",
      "body" : "2aabbdf4de01ef1a3fb0c1bb86ef163c9fba587b Nice! Only three tests fail when I enable this for _all_ tests:\r\n* p2p_node_network_limited.py\r\n* p2p_timeouts.py\r\n* rpc_net.py",
      "commit_id" : "018594ef44dc57e828a9a38c9643f85fb6c2a1e4",
      "created_at" : "2023-09-13T20:12:04Z",
      "diff_hunk" : "@@ -189,6 +189,8 @@ def parse_args(self):\n         parser.add_argument(\"--randomseed\", type=int,\n                             help=\"set a random seed for deterministically reproducing a previous test run\")\n         parser.add_argument(\"--timeout-factor\", dest=\"timeout_factor\", type=float, help=\"adjust test timeouts by a factor. Setting it to 0 disables all timeouts\")\n+        parser.add_argument(\"--v2transport\", dest=\"v2transport\", default=False, action=\"store_true\",",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28331#discussion_r1325029773",
      "id" : 1325029773,
      "line" : 192,
      "node_id" : "PRRC_kwDOABII585O-lmN",
      "original_commit_id" : "2aabbdf4de01ef1a3fb0c1bb86ef163c9fba587b",
      "original_line" : 192,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "test/functional/test_framework/test_framework.py",
      "position" : 4,
      "pull_request_review_id" : 1625319787,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28331",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1325029773/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-09-13T20:12:55Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1325029773",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28331#discussion_r1325042158"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28331"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1325042158"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Note that both the `AddNode()` and `RemoveAddedNode()` methods become one-liners with the change in [`7caaa9e` (#28248)](https://github.com/bitcoin/bitcoin/pull/28248/commits/7caaa9ecf4444116a0ef34f4b6e7f67b2f0f477c), if you'd like to pull it in before this change.",
      "commit_id" : "018594ef44dc57e828a9a38c9643f85fb6c2a1e4",
      "created_at" : "2023-09-13T20:25:35Z",
      "diff_hunk" : "@@ -3392,22 +3504,22 @@ std::vector<CAddress> CConnman::GetAddresses(CNode& requestor, size_t max_addres\n     return cache_entry.m_addrs_response_cache;\n }\n \n-bool CConnman::AddNode(const std::string& strNode)\n+bool CConnman::AddNode(const AddedNodeParams& added_node_params)\n {\n     LOCK(m_added_nodes_mutex);\n-    for (const std::string& it : m_added_nodes) {\n-        if (strNode == it) return false;\n+    for (const auto& it : m_added_nodes) {\n+        if (added_node_params.m_added_node == it.m_added_node) return false;\n     }\n \n-    m_added_nodes.push_back(strNode);\n+    m_added_nodes.push_back(added_node_params);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28331#discussion_r1325042158",
      "id" : 1325042158,
      "line" : 3503,
      "node_id" : "PRRC_kwDOABII585O-onu",
      "original_commit_id" : "2aabbdf4de01ef1a3fb0c1bb86ef163c9fba587b",
      "original_line" : 3503,
      "original_position" : 361,
      "original_start_line" : null,
      "path" : "src/net.cpp",
      "position" : 379,
      "pull_request_review_id" : 1625394283,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28331",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1325042158/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-09-13T20:30:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1325042158",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : ">    * Would be nice to have the transport type and session id also show in the GUI's peer info page\r\n\r\nhttps://github.com/bitcoin-core/gui/pull/754",
      "created_at" : "2023-09-13T22:22:08Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28331#issuecomment-1718391205",
      "id" : 1718391205,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28331",
      "node_id" : "IC_kwDOABII585mbJGl",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1718391205/reactions"
      },
      "updated_at" : "2023-09-13T22:22:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1718391205",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/32963518?v=4",
         "events_url" : "https://api.github.com/users/hebasto/events{/privacy}",
         "followers_url" : "https://api.github.com/users/hebasto/followers",
         "following_url" : "https://api.github.com/users/hebasto/following{/other_user}",
         "gists_url" : "https://api.github.com/users/hebasto/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/hebasto",
         "id" : 32963518,
         "login" : "hebasto",
         "node_id" : "MDQ6VXNlcjMyOTYzNTE4",
         "organizations_url" : "https://api.github.com/users/hebasto/orgs",
         "received_events_url" : "https://api.github.com/users/hebasto/received_events",
         "repos_url" : "https://api.github.com/users/hebasto/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/hebasto/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/hebasto"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> Would be nice to have the transport type and session id also show in the GUI's peer info page\r\n\r\nAm updating `-netinfo` for bip324 / v2 p2p as well.\r\n",
      "created_at" : "2023-09-13T22:26:46Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28331#issuecomment-1718394831",
      "id" : 1718394831,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28331",
      "node_id" : "IC_kwDOABII585mbJ_P",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1718394831/reactions"
      },
      "updated_at" : "2023-09-13T22:26:46Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1718394831",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28331#discussion_r1325141603"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28331"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1325141603"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Done.",
      "commit_id" : "018594ef44dc57e828a9a38c9643f85fb6c2a1e4",
      "created_at" : "2023-09-13T22:37:33Z",
      "diff_hunk" : "@@ -291,6 +291,9 @@ enum ServiceFlags : uint64_t {\n     // See BIP159 for details on how this is implemented.\n     NODE_NETWORK_LIMITED = (1 << 10),\n \n+    // NODE_P2P_V2 means the node supports BIP324 transport\n+    NODE_P2P_V2 = (1 << 11),",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28331#discussion_r1325141603",
      "id" : 1325141603,
      "in_reply_to_id" : 1321845616,
      "line" : 295,
      "node_id" : "PRRC_kwDOABII585O_A5j",
      "original_commit_id" : "1768aff56d6feedcb22b21df12e8926924fdac6a",
      "original_line" : 295,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "src/protocol.h",
      "position" : 5,
      "pull_request_review_id" : 1625548981,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28331",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1325141603/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-09-13T22:37:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1325141603",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28331#discussion_r1325141643"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28331"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1325141643"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Done.",
      "commit_id" : "018594ef44dc57e828a9a38c9643f85fb6c2a1e4",
      "created_at" : "2023-09-13T22:37:39Z",
      "diff_hunk" : "@@ -0,0 +1,91 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2022 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\"\"\"\n+Test BIP324 v2 transport\n+\"\"\"\n+\n+from test_framework.test_framework import BitcoinTestFramework\n+from test_framework.util import assert_equal\n+\n+class P2PV2Test(BitcoinTestFramework):\n+    def set_test_params(self):\n+        self.setup_clean_chain = True\n+        self.num_nodes = 5\n+        self.extra_args = [[\"-v2transport=1\"], [\"-v2transport=1\"], [\"-v2transport=0\"], [\"-v2transport=0\"], [\"-v2transport=0\"]]\n+\n+    def run_test(self):\n+        sending_handshake = \"start sending v2 handshake to peer\"\n+        downgrading_to_v1 = \"retrying with v1 transport protocol for peer\"\n+        self.disconnect_nodes(0, 1)\n+        self.disconnect_nodes(1, 2)\n+        self.disconnect_nodes(2, 3)\n+        self.disconnect_nodes(3, 4)\n+\n+        # V2 nodes can sync with V2 nodes\n+        assert_equal(self.nodes[0].getblockcount(), 0)\n+        assert_equal(self.nodes[1].getblockcount(), 0)\n+        self.nodes[0].generatetoaddress(5, \"bcrt1q0yq2azut8gn2xu3y2g0xucf8pny6w8uxmyf220\", invalid_call=False)\n+        assert_equal(self.nodes[0].getblockcount(), 5)\n+        assert_equal(self.nodes[1].getblockcount(), 0)\n+        with self.nodes[0].assert_debug_log(expected_msgs=[sending_handshake],\n+                                            unexpected_msgs=[downgrading_to_v1]):\n+            self.connect_nodes(0, 1, True)\n+        # sync_all() verifies that the block tips match\n+        self.sync_all(self.nodes[0:2])",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28331#discussion_r1325141643",
      "id" : 1325141643,
      "in_reply_to_id" : 1321852444,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585O_A6L",
      "original_commit_id" : "be8a5dcddd36be8a5f137baf3ebd32d590a0747d",
      "original_line" : 36,
      "original_position" : 36,
      "original_start_line" : 35,
      "path" : "test/functional/p2p_v2.py",
      "position" : null,
      "pull_request_review_id" : 1625549037,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28331",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1325141643/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : "RIGHT",
      "subject_type" : "line",
      "updated_at" : "2023-09-13T22:37:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1325141643",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28331#discussion_r1325141793"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28331"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1325141793"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Done, used `self.Arg<bool>(2)` (which needed adding an instantiation for).",
      "commit_id" : "018594ef44dc57e828a9a38c9643f85fb6c2a1e4",
      "created_at" : "2023-09-13T22:37:59Z",
      "diff_hunk" : "@@ -309,17 +320,21 @@ static RPCHelpMan addnode()\n     CConnman& connman = EnsureConnman(node);\n \n     std::string strNode = request.params[0].get_str();\n+    bool use_p2p_v2 = !request.params[2].isNull() && request.params[2].get_bool();",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28331#discussion_r1325141793",
      "id" : 1325141793,
      "in_reply_to_id" : 1322583238,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585O_A8h",
      "original_commit_id" : "2aabbdf4de01ef1a3fb0c1bb86ef163c9fba587b",
      "original_line" : 323,
      "original_position" : 50,
      "original_start_line" : null,
      "path" : "src/rpc/net.cpp",
      "position" : null,
      "pull_request_review_id" : 1625549246,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28331",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1325141793/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-09-13T22:37:59Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1325141793",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28331#discussion_r1325141840"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28331"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1325141840"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Done.",
      "commit_id" : "018594ef44dc57e828a9a38c9643f85fb6c2a1e4",
      "created_at" : "2023-09-13T22:38:05Z",
      "diff_hunk" : "@@ -465,7 +465,11 @@ CNode* CConnman::ConnectNode(CAddress addrConnect, const char *pszDest, bool fCo\n         }\n     }\n \n-    LogPrintLevel(BCLog::NET, BCLog::Level::Debug, \"trying connection %s lastseen=%.1fhrs\\n\",\n+    // Use v2 transport when both us and them signal NODE_P2P_V2.\n+    const bool use_p2p_v2 = !!(addrConnect.nServices & GetLocalServices() & NODE_P2P_V2);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28331#discussion_r1325141840",
      "id" : 1325141840,
      "in_reply_to_id" : 1322591734,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585O_A9Q",
      "original_commit_id" : "2aabbdf4de01ef1a3fb0c1bb86ef163c9fba587b",
      "original_line" : 469,
      "original_position" : 6,
      "original_start_line" : null,
      "path" : "src/net.cpp",
      "position" : null,
      "pull_request_review_id" : 1625549311,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28331",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1325141840/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-09-13T22:38:05Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1325141840",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28331#discussion_r1325141884"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28331"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1325141884"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Done.",
      "commit_id" : "018594ef44dc57e828a9a38c9643f85fb6c2a1e4",
      "created_at" : "2023-09-13T22:38:10Z",
      "diff_hunk" : "@@ -1822,6 +1894,10 @@ void CConnman::CreateNodeFromAcceptedSocket(std::unique_ptr<Sock>&& sock,\n     }\n \n     const bool inbound_onion = std::find(m_onion_binds.begin(), m_onion_binds.end(), addr_bind) != m_onion_binds.end();\n+    // The V2Transport transparently falls back to V1 behavior when an incoming V1 connection is\n+    // detected, so use it whenever we signal NODE_P2P_V2.\n+    const bool use_p2p_v2 = !!(nodeServices & NODE_P2P_V2);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28331#discussion_r1325141884",
      "id" : 1325141884,
      "in_reply_to_id" : 1322592221,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585O_A98",
      "original_commit_id" : "2aabbdf4de01ef1a3fb0c1bb86ef163c9fba587b",
      "original_line" : 1899,
      "original_position" : 198,
      "original_start_line" : null,
      "path" : "src/net.cpp",
      "position" : null,
      "pull_request_review_id" : 1625549372,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28331",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1325141884/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-09-13T22:38:10Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1325141884",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28331#discussion_r1325142059"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28331"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1325142059"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Apparently not needed, done.",
      "commit_id" : "018594ef44dc57e828a9a38c9643f85fb6c2a1e4",
      "created_at" : "2023-09-13T22:38:29Z",
      "diff_hunk" : "@@ -581,26 +586,50 @@ def restart_node(self, i, extra_args=None):\n     def wait_for_node_exit(self, i, timeout):\n         self.nodes[i].process.wait(timeout)\n \n-    def connect_nodes(self, a, b):\n+    def connect_nodes(self, a, b, peer_advertises_v2=None):\n         from_connection = self.nodes[a]\n         to_connection = self.nodes[b]\n         from_num_peers = 1 + len(from_connection.getpeerinfo())\n         to_num_peers = 1 + len(to_connection.getpeerinfo())\n         ip_port = \"127.0.0.1:\" + str(p2p_port(b))\n-        from_connection.addnode(ip_port, \"onetry\")\n+\n+        if peer_advertises_v2 is None:\n+            peer_advertises_v2 = self.options.v2transport\n+\n+        if peer_advertises_v2:\n+            from_connection.addnode(ip_port, \"onetry\", True)\n+        else:\n+            # skip the optional third argument (default false) for\n+            # compatibility with older clients\n+            from_connection.addnode(ip_port, \"onetry\")\n+\n+        min_verack_msg_bytes = 21 if peer_advertises_v2 else 24\n         # poll until version handshake complete to avoid race conditions\n         # with transaction relaying\n         # See comments in net_processing:\n         # * Must have a version message before anything else\n         # * Must have a verack message before anything else\n-        self.wait_until(lambda: sum(peer['version'] != 0 for peer in from_connection.getpeerinfo()) == from_num_peers)\n-        self.wait_until(lambda: sum(peer['version'] != 0 for peer in to_connection.getpeerinfo()) == to_num_peers)\n-        self.wait_until(lambda: sum(peer['bytesrecv_per_msg'].pop('verack', 0) == 24 for peer in from_connection.getpeerinfo()) == from_num_peers)\n-        self.wait_until(lambda: sum(peer['bytesrecv_per_msg'].pop('verack', 0) == 24 for peer in to_connection.getpeerinfo()) == to_num_peers)\n-        # The message bytes are counted before processing the message, so make\n-        # sure it was fully processed by waiting for a ping.\n-        self.wait_until(lambda: sum(peer[\"bytesrecv_per_msg\"].pop(\"pong\", 0) >= 32 for peer in from_connection.getpeerinfo()) == from_num_peers)\n-        self.wait_until(lambda: sum(peer[\"bytesrecv_per_msg\"].pop(\"pong\", 0) >= 32 for peer in to_connection.getpeerinfo()) == to_num_peers)\n+        # * The message bytes are counted before processing the message, so make\n+        #   sure it was fully processed by waiting for a ping.\n+\n+        def check_initiator_handshake():\n+            peerinfo = from_connection.getpeerinfo()\n+            if len(peerinfo) != from_num_peers:\n+                return False\n+\n+            responder = list(filter(lambda x: x[\"addr\"] == ip_port, peerinfo))[0]\n+            return responder['version'] != 0 and responder['bytesrecv_per_msg'].pop('verack', 0) >= min_verack_msg_bytes and responder['bytesrecv_per_msg'].pop(\"pong\", 0) >= 29\n+\n+        def check_responder_handshake():\n+            peerinfo = to_connection.getpeerinfo()\n+            if len(peerinfo) != to_num_peers:\n+                return False\n+\n+            initiator = list(filter(lambda x: x[\"addrbind\"] == ip_port, peerinfo))[0]\n+            return initiator['version'] != 0 and initiator['bytesrecv_per_msg'].pop('verack', 0) >= min_verack_msg_bytes and initiator['bytesrecv_per_msg'].pop(\"pong\", 0) >= 29\n+\n+        self.wait_until(check_initiator_handshake)\n+        self.wait_until(check_responder_handshake)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28331#discussion_r1325142059",
      "id" : 1325142059,
      "in_reply_to_id" : 1322606364,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585O_BAr",
      "original_commit_id" : "2aabbdf4de01ef1a3fb0c1bb86ef163c9fba587b",
      "original_line" : 632,
      "original_position" : 85,
      "original_start_line" : 612,
      "path" : "test/functional/test_framework/test_framework.py",
      "position" : null,
      "pull_request_review_id" : 1625549580,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28331",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1325142059/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : "RIGHT",
      "subject_type" : "line",
      "updated_at" : "2023-09-13T22:38:30Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1325142059",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28331#discussion_r1325142165"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28331"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1325142165"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Done, and done.",
      "commit_id" : "018594ef44dc57e828a9a38c9643f85fb6c2a1e4",
      "created_at" : "2023-09-13T22:38:40Z",
      "diff_hunk" : "@@ -0,0 +1,32 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2021 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\"\"\"\n+Test v2 transport\n+\"\"\"\n+\n+from test_framework.messages import NODE_P2P_V2\n+from test_framework.test_framework import BitcoinTestFramework\n+from test_framework.util import assert_equal\n+\n+class V2TransportTest(BitcoinTestFramework):\n+    def set_test_params(self):\n+        self.setup_clean_chain=True\n+        self.num_nodes = 1\n+        self.extra_args = [[\"-v2transport=0\"]]\n+\n+    def run_test(self):\n+        network_info = self.nodes[0].getnetworkinfo()\n+        assert_equal(int(network_info[\"localservices\"], 16) & NODE_P2P_V2, 0)\n+        if \"P2P_V2\" in network_info[\"localservicesnames\"]:\n+            raise AssertionError(\"Did not expect P2P_V2 to be signaled for a v1 node\")",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28331#discussion_r1325142165",
      "id" : 1325142165,
      "in_reply_to_id" : 1322610190,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585O_BCV",
      "original_commit_id" : "2aabbdf4de01ef1a3fb0c1bb86ef163c9fba587b",
      "original_line" : 23,
      "original_position" : 23,
      "original_start_line" : 22,
      "path" : "test/functional/p2p_v2_transport.py",
      "position" : null,
      "pull_request_review_id" : 1625549712,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28331",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1325142165/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : "RIGHT",
      "subject_type" : "line",
      "updated_at" : "2023-09-13T22:38:40Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1325142165",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28331#discussion_r1325142520"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28331"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1325142520"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I've stuck to `self.nodes[3].generate(2)` (and similarly elsewhere) because the synchronization is explicit and separate in the lines that follow.",
      "commit_id" : "018594ef44dc57e828a9a38c9643f85fb6c2a1e4",
      "created_at" : "2023-09-13T22:39:21Z",
      "diff_hunk" : "@@ -0,0 +1,91 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2022 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\"\"\"\n+Test BIP324 v2 transport\n+\"\"\"\n+\n+from test_framework.test_framework import BitcoinTestFramework\n+from test_framework.util import assert_equal\n+\n+class P2PV2Test(BitcoinTestFramework):\n+    def set_test_params(self):\n+        self.setup_clean_chain = True\n+        self.num_nodes = 5\n+        self.extra_args = [[\"-v2transport=1\"], [\"-v2transport=1\"], [\"-v2transport=0\"], [\"-v2transport=0\"], [\"-v2transport=0\"]]\n+\n+    def run_test(self):\n+        sending_handshake = \"start sending v2 handshake to peer\"\n+        downgrading_to_v1 = \"retrying with v1 transport protocol for peer\"\n+        self.disconnect_nodes(0, 1)\n+        self.disconnect_nodes(1, 2)\n+        self.disconnect_nodes(2, 3)\n+        self.disconnect_nodes(3, 4)\n+\n+        # V2 nodes can sync with V2 nodes\n+        assert_equal(self.nodes[0].getblockcount(), 0)\n+        assert_equal(self.nodes[1].getblockcount(), 0)\n+        self.nodes[0].generatetoaddress(5, \"bcrt1q0yq2azut8gn2xu3y2g0xucf8pny6w8uxmyf220\", invalid_call=False)\n+        assert_equal(self.nodes[0].getblockcount(), 5)\n+        assert_equal(self.nodes[1].getblockcount(), 0)\n+        with self.nodes[0].assert_debug_log(expected_msgs=[sending_handshake],\n+                                            unexpected_msgs=[downgrading_to_v1]):\n+            self.connect_nodes(0, 1, True)\n+        # sync_all() verifies that the block tips match\n+        self.sync_all(self.nodes[0:2])\n+        assert_equal(self.nodes[1].getblockcount(), 5)\n+\n+        # V1 nodes can sync with each other\n+        assert_equal(self.nodes[2].getblockcount(), 0)\n+        assert_equal(self.nodes[3].getblockcount(), 0)\n+        self.nodes[2].generatetoaddress(8, \"bcrt1qyr5lnc2g8aa3qa9c4th9d46n5uu4y0m9nvq2cv\", invalid_call=False)\n+        assert_equal(self.nodes[2].getblockcount(), 8)\n+        assert_equal(self.nodes[3].getblockcount(), 0)\n+        with self.nodes[2].assert_debug_log(expected_msgs=[],\n+                                            unexpected_msgs=[sending_handshake, downgrading_to_v1]):\n+            self.connect_nodes(2, 3, False)\n+        self.sync_all(self.nodes[2:4])\n+        assert_equal(self.nodes[3].getblockcount(), 8)\n+        assert self.nodes[0].getbestblockhash() != self.nodes[2].getbestblockhash()\n+\n+        # V1 nodes can sync with V2 nodes\n+        self.disconnect_nodes(0, 1)\n+        self.disconnect_nodes(2, 3)\n+        with self.nodes[2].assert_debug_log(expected_msgs=[],\n+                                            unexpected_msgs=[sending_handshake, downgrading_to_v1]):\n+            self.connect_nodes(2, 1, True)\n+        self.sync_all(self.nodes[1:3])\n+        assert_equal(self.nodes[1].getblockcount(), 8)\n+        assert self.nodes[0].getbestblockhash() != self.nodes[1].getbestblockhash()\n+\n+        # V2 nodes can sync with V1 nodes\n+        self.disconnect_nodes(1, 2)\n+        with self.nodes[0].assert_debug_log(expected_msgs=[],\n+                                            unexpected_msgs=[sending_handshake, downgrading_to_v1]):\n+            self.connect_nodes(0, 3, False)\n+        self.sync_all([self.nodes[0], self.nodes[3]])\n+        assert_equal(self.nodes[0].getblockcount(), 8)\n+\n+        # V2 node mines another block and everyone gets it\n+        self.connect_nodes(0, 1, True)\n+        self.connect_nodes(1, 2, False)\n+        self.nodes[1].generatetoaddress(1, \"bcrt1q3zsxn3qx0cqyyxgv90k7j6786mpe543wc4vy2v\", invalid_call=False)\n+        self.sync_all(self.nodes[0:4])\n+        assert_equal(self.nodes[0].getblockcount(), 9) # sync_all() verifies tip hashes match\n+\n+        # V1 node mines another block and everyone gets it\n+        self.nodes[3].generatetoaddress(2, \"bcrt1q3zsxn3qx0cqyyxgv90k7j6786mpe543wc4vy2v\", invalid_call=False)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28331#discussion_r1325142520",
      "id" : 1325142520,
      "in_reply_to_id" : 1322611559,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585O_BH4",
      "original_commit_id" : "2aabbdf4de01ef1a3fb0c1bb86ef163c9fba587b",
      "original_line" : 78,
      "original_position" : 78,
      "original_start_line" : null,
      "path" : "test/functional/p2p_v2.py",
      "position" : null,
      "pull_request_review_id" : 1625550211,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28331",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1325142520/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-09-13T22:39:22Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1325142520",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28331#discussion_r1325142582"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28331"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1325142582"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Fixed.",
      "commit_id" : "018594ef44dc57e828a9a38c9643f85fb6c2a1e4",
      "created_at" : "2023-09-13T22:39:28Z",
      "diff_hunk" : "@@ -581,26 +586,50 @@ def restart_node(self, i, extra_args=None):\n     def wait_for_node_exit(self, i, timeout):\n         self.nodes[i].process.wait(timeout)\n \n-    def connect_nodes(self, a, b):\n+    def connect_nodes(self, a, b, peer_advertises_v2=None):",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28331#discussion_r1325142582",
      "id" : 1325142582,
      "in_reply_to_id" : 1322613818,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585O_BI2",
      "original_commit_id" : "2aabbdf4de01ef1a3fb0c1bb86ef163c9fba587b",
      "original_line" : 589,
      "original_position" : 33,
      "original_start_line" : null,
      "path" : "test/functional/test_framework/test_framework.py",
      "position" : null,
      "pull_request_review_id" : 1625550291,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28331",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1325142582/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-09-13T22:39:28Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1325142582",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28331#discussion_r1325143334"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28331"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1325143334"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Possibly, but at this stage my goal is to get enough code in for basic tests and experimentation, and for that, an RPC suffices. Further on, we'll certainly want more convenient ways of interacting with this (perhaps we can treat it as a whitelist permission or so, too, but I don't want to bikeshed about that here).",
      "commit_id" : "018594ef44dc57e828a9a38c9643f85fb6c2a1e4",
      "created_at" : "2023-09-13T22:40:56Z",
      "diff_hunk" : "@@ -1077,7 +1081,11 @@ class CConnman\n         vWhitelistedRange = connOptions.vWhitelistedRange;\n         {\n             LOCK(m_added_nodes_mutex);\n-            m_added_nodes = connOptions.m_added_nodes;\n+\n+            for (const std::string& strAddedNode : connOptions.m_added_nodes) {\n+                // -addnode cli arg does not currently have a way to signal BIP324 support",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28331#discussion_r1325143334",
      "id" : 1325143334,
      "in_reply_to_id" : 1324997532,
      "line" : 1123,
      "node_id" : "PRRC_kwDOABII585O_BUm",
      "original_commit_id" : "1fa8efaff73bda19b7e8f2e27d24b08ccf0de764",
      "original_line" : 1123,
      "original_position" : 24,
      "original_start_line" : null,
      "path" : "src/net.h",
      "position" : 131,
      "pull_request_review_id" : 1625551374,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28331",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1325143334/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-09-13T22:40:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1325143334",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28331#discussion_r1325143444"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28331"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1325143444"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I've linked to the Wikipedia article about it.",
      "commit_id" : "018594ef44dc57e828a9a38c9643f85fb6c2a1e4",
      "created_at" : "2023-09-13T22:41:08Z",
      "diff_hunk" : "@@ -309,25 +309,33 @@ class CSemaphore\n     int value;\n \n public:\n-    explicit CSemaphore(int init) : value(init) {}\n+    explicit CSemaphore(int init) noexcept : value(init) {}",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28331#discussion_r1325143444",
      "id" : 1325143444,
      "in_reply_to_id" : 1325007449,
      "line" : 316,
      "node_id" : "PRRC_kwDOABII585O_BWU",
      "original_commit_id" : "8672b854fb7a81a400150ef09e99a06c829b68f8",
      "original_line" : 316,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "src/sync.h",
      "position" : 16,
      "pull_request_review_id" : 1625551523,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28331",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1325143444/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-09-13T22:41:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1325143444",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@achow101 \r\n\r\n> * Would be nice to have the transport type and session id also show in the GUI's peer info page\r\n\r\nhttps://github.com/bitcoin-core/gui/pull/754\r\n\r\n> * Could we log the connection version once the connection is established? Maybe once we receive their version message? The transport version can be figured out from the logs for outbound connections, but not for inbound.\r\n\r\nI've added logging on VERACK for both inbound and outbound (but only with -debug=net for inbound, because possible spam).\r\n\r\n@Sjors\r\n\r\n> I assume https://github.com/bitcoin/bitcoin/commit/55079fedeeca488f360d200b1d2d24c2f614bc73 will be replaced with whatever ends up merged in https://github.com/bitcoin/bitcoin/pull/28452?\r\n\r\nRebased on top of it.\r\n\r\n> Can you expand the description of https://github.com/bitcoin/bitcoin/commit/4cfbbceff35fcf22a232c66278c4ababd750d9bb a bit to explain under what circumstances PerformReconnections() is called and elaborate a bit on the various delays? Particuarly, if we tried a v2 connection and failed, how long do we wait before retrying with v1?\r\n\r\nIt should be pretty much immediately - the very next time a connection is attempted to be created.",
      "created_at" : "2023-09-13T22:43:38Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28331#issuecomment-1718407366",
      "id" : 1718407366,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28331",
      "node_id" : "IC_kwDOABII585mbNDG",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1718407366/reactions"
      },
      "updated_at" : "2023-09-13T22:43:38Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1718407366",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28331#discussion_r1325160737"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28331"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1325160737"
         }
      },
      "author_association" : "MEMBER",
      "body" : "It can wait indeed. It's just that I have some nodes that I'd like to connect by default.",
      "commit_id" : "018594ef44dc57e828a9a38c9643f85fb6c2a1e4",
      "created_at" : "2023-09-13T23:15:32Z",
      "diff_hunk" : "@@ -1077,7 +1081,11 @@ class CConnman\n         vWhitelistedRange = connOptions.vWhitelistedRange;\n         {\n             LOCK(m_added_nodes_mutex);\n-            m_added_nodes = connOptions.m_added_nodes;\n+\n+            for (const std::string& strAddedNode : connOptions.m_added_nodes) {\n+                // -addnode cli arg does not currently have a way to signal BIP324 support",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28331#discussion_r1325160737",
      "id" : 1325160737,
      "in_reply_to_id" : 1324997532,
      "line" : 1123,
      "node_id" : "PRRC_kwDOABII585O_Fkh",
      "original_commit_id" : "1fa8efaff73bda19b7e8f2e27d24b08ccf0de764",
      "original_line" : 1123,
      "original_position" : 24,
      "original_start_line" : null,
      "path" : "src/net.h",
      "position" : 131,
      "pull_request_review_id" : 1625577178,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28331",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1325160737/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-09-13T23:15:32Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1325160737",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28331#discussion_r1325161965"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28331"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1325161965"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Wouldn't this wait for 60 seconds? (context: https://github.com/bitcoin/bitcoin/pull/28331#issuecomment-1718407366)",
      "commit_id" : "018594ef44dc57e828a9a38c9643f85fb6c2a1e4",
      "created_at" : "2023-09-13T23:18:00Z",
      "diff_hunk" : "@@ -2834,6 +2883,8 @@ void CConnman::ThreadOpenAddedConnections()\n         // Retry every 60 seconds if a connection was attempted, otherwise two seconds\n         if (!interruptNet.sleep_for(std::chrono::seconds(tried ? 60 : 2)))\n             return;\n+        // See if any reconnections are desired.\n+        PerformReconnections();",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28331#discussion_r1325161965",
      "id" : 1325161965,
      "line" : 2921,
      "node_id" : "PRRC_kwDOABII585O_F3t",
      "original_commit_id" : "f2048453190df06282e515977cd805db709c7e60",
      "original_line" : 2887,
      "original_position" : 117,
      "original_start_line" : null,
      "path" : "src/net.cpp",
      "position" : 348,
      "pull_request_review_id" : 1625578789,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28331",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1325161965/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-09-13T23:18:01Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1325161965",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->\nð This pull request conflicts with the target branch and [needs rebase](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#rebasing-changes).\n",
      "created_at" : "2023-09-14T10:37:45Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28331#issuecomment-1719203363",
      "id" : 1719203363,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28331",
      "node_id" : "IC_kwDOABII585mePYj",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1719203363/reactions"
      },
      "updated_at" : "2023-09-14T10:37:45Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1719203363",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   }
]
