[
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| Concept ACK | [glozow](https://github.com/bitcoin/bitcoin/pull/28345#pullrequestreview-1599868092), [instagibbs](https://github.com/bitcoin/bitcoin/pull/28345#pullrequestreview-1603046561) |\n\nIf your review is incorrectly listed, please react with ð to this comment and the bot will ignore it on the next update.\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#26573](https://github.com/bitcoin/bitcoin/pull/26573) (Wallet: don't underestimate the fees when spending a Taproot output by darosior)\n* [#26567](https://github.com/bitcoin/bitcoin/pull/26567) (Wallet: estimate the size of signed inputs using descriptors by darosior)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.\n",
      "created_at" : "2023-08-26T21:46:23Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28345#issuecomment-1694507627",
      "id" : 1694507627,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28345",
      "node_id" : "IC_kwDOABII585lACJr",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1694507627/reactions"
      },
      "updated_at" : "2023-08-31T19:13:44Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1694507627",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "See also https://github.com/bitcoin-core/gui/issues/750",
      "created_at" : "2023-08-26T21:46:52Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28345#issuecomment-1694507704",
      "id" : 1694507704,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28345",
      "node_id" : "IC_kwDOABII585lACK4",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1694507704/reactions"
      },
      "updated_at" : "2023-08-26T21:46:52Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1694507704",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "node_id" : "MDQ6VXNlcjEwOTU2NzU=",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28345#discussion_r1308451245"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28345"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1308451245"
         }
      },
      "author_association" : "MEMBER",
      "body" : "in fef601e2a4d790781fee316c1a55ea48a134a0f1\r\nGiven that this function is only interested in the total size, why not just pass in a `int64_t total_vsize`?",
      "commit_id" : "94267128b28b6fb7019f23d2c85a0c765a3d0705",
      "created_at" : "2023-08-29T09:01:04Z",
      "diff_hunk" : "@@ -197,13 +197,15 @@ util::Result<CTxMemPool::setEntries> CTxMemPool::CalculateAncestorsAndCheckLimit\n }\n \n bool CTxMemPool::CheckPackageLimits(const Package& package,\n+                                    const std::vector<int64_t> &all_tx_vsizes,",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28345#discussion_r1308451245",
      "id" : 1308451245,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585N_WGt",
      "original_commit_id" : "fef601e2a4d790781fee316c1a55ea48a134a0f1",
      "original_line" : 200,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "src/txmempool.cpp",
      "position" : null,
      "pull_request_review_id" : 1599868092,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28345",
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1308451245/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-08-29T09:23:45Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1308451245",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/25183001?v=4",
         "events_url" : "https://api.github.com/users/glozow/events{/privacy}",
         "followers_url" : "https://api.github.com/users/glozow/followers",
         "following_url" : "https://api.github.com/users/glozow/following{/other_user}",
         "gists_url" : "https://api.github.com/users/glozow/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/glozow",
         "id" : 25183001,
         "login" : "glozow",
         "node_id" : "MDQ6VXNlcjI1MTgzMDAx",
         "organizations_url" : "https://api.github.com/users/glozow/orgs",
         "received_events_url" : "https://api.github.com/users/glozow/received_events",
         "repos_url" : "https://api.github.com/users/glozow/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/glozow/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/glozow/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/glozow"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28345#discussion_r1308453121"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28345"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1308453121"
         }
      },
      "author_association" : "MEMBER",
      "body" : "in fef601e2a4d790781fee316c1a55ea48a134a0f1\r\nnit: perhaps pass the vector of `workspaces` instead? It would follow the pattern of the other `MemPoolAccept` functions and be more extendable for future stuff.",
      "commit_id" : "94267128b28b6fb7019f23d2c85a0c765a3d0705",
      "created_at" : "2023-08-29T09:02:34Z",
      "diff_hunk" : "@@ -987,6 +988,7 @@ bool MemPoolAccept::ReplacementChecks(Workspace& ws)\n }\n \n bool MemPoolAccept::PackageMempoolChecks(const std::vector<CTransactionRef>& txns,\n+                                         const std::vector<int64_t> &all_tx_vsizes,",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28345#discussion_r1308453121",
      "id" : 1308453121,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585N_WkB",
      "original_commit_id" : "fef601e2a4d790781fee316c1a55ea48a134a0f1",
      "original_line" : 991,
      "original_position" : 12,
      "original_start_line" : null,
      "path" : "src/validation.cpp",
      "position" : null,
      "pull_request_review_id" : 1599868092,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28345",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1308453121/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-08-29T09:23:45Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1308453121",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/25183001?v=4",
         "events_url" : "https://api.github.com/users/glozow/events{/privacy}",
         "followers_url" : "https://api.github.com/users/glozow/followers",
         "following_url" : "https://api.github.com/users/glozow/following{/other_user}",
         "gists_url" : "https://api.github.com/users/glozow/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/glozow",
         "id" : 25183001,
         "login" : "glozow",
         "node_id" : "MDQ6VXNlcjI1MTgzMDAx",
         "organizations_url" : "https://api.github.com/users/glozow/orgs",
         "received_events_url" : "https://api.github.com/users/glozow/received_events",
         "repos_url" : "https://api.github.com/users/glozow/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/glozow/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/glozow/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/glozow"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28345#discussion_r1308461427"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28345"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1308461427"
         }
      },
      "author_association" : "MEMBER",
      "body" : "in 56f5d5ee85c3ad87c9862192412b7957e478363c\r\n\r\nNot sure if it's immediately clear what spammy would mean. Maybe something a bit more descriptive would be\r\n\r\n```suggestion\r\n// Calculates the BIP 141 virtual size, without consideration for sigops.\r\n```",
      "commit_id" : "94267128b28b6fb7019f23d2c85a0c765a3d0705",
      "created_at" : "2023-08-29T09:09:31Z",
      "diff_hunk" : "@@ -26,4 +27,10 @@ CMutableTransaction BuildSpendingTransaction(const CScript& scriptSig, const CSc\n // the second nValues[2] and nValues[3] outputs paid to a TxoutType::PUBKEYHASH.\n std::vector<CMutableTransaction> SetupDummyInputs(FillableSigningProvider& keystoreRet, CCoinsViewCache& coinsRet, const std::array<CAmount,4>& nValues);\n \n+// Assumes a non-spammy tx",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28345#discussion_r1308461427",
      "id" : 1308461427,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585N_Ylz",
      "original_commit_id" : "56f5d5ee85c3ad87c9862192412b7957e478363c",
      "original_line" : 30,
      "original_position" : 12,
      "original_start_line" : null,
      "path" : "src/test/util/transaction_utils.h",
      "position" : null,
      "pull_request_review_id" : 1599868092,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28345",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1308461427/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-08-29T09:23:45Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1308461427",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/25183001?v=4",
         "events_url" : "https://api.github.com/users/glozow/events{/privacy}",
         "followers_url" : "https://api.github.com/users/glozow/followers",
         "following_url" : "https://api.github.com/users/glozow/following{/other_user}",
         "gists_url" : "https://api.github.com/users/glozow/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/glozow",
         "id" : 25183001,
         "login" : "glozow",
         "node_id" : "MDQ6VXNlcjI1MTgzMDAx",
         "organizations_url" : "https://api.github.com/users/glozow/orgs",
         "received_events_url" : "https://api.github.com/users/glozow/received_events",
         "repos_url" : "https://api.github.com/users/glozow/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/glozow/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/glozow/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/glozow"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28345#discussion_r1308469336"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28345"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1308469336"
         }
      },
      "author_association" : "MEMBER",
      "body" : "in 9307e5c6fc1786e5fc734da1685e1cde52f4dd61\r\n\r\ngood catch, perhaps an error string like `package-exceeds-max-vsize` would help distinguish the two errors.",
      "commit_id" : "94267128b28b6fb7019f23d2c85a0c765a3d0705",
      "created_at" : "2023-08-29T09:16:03Z",
      "diff_hunk" : "@@ -1277,6 +1277,10 @@ PackageMempoolAcceptResult MemPoolAccept::AcceptMultipleTransactions(const std::\n     // package feerate (total modified fees / total virtual size) to check this requirement.\n     const auto m_total_vsize = std::accumulate(workspaces.cbegin(), workspaces.cend(), int64_t{0},\n         [](int64_t sum, auto& ws) { return sum + ws.m_vsize; });\n+    if (m_total_vsize > MAX_PACKAGE_SIZE * 1000) {\n+        package_state.Invalid(PackageValidationResult::PCKG_POLICY, \"package-too-large\");",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28345#discussion_r1308469336",
      "id" : 1308469336,
      "line" : 1283,
      "node_id" : "PRRC_kwDOABII585N_ahY",
      "original_commit_id" : "9307e5c6fc1786e5fc734da1685e1cde52f4dd61",
      "original_line" : 1283,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "src/validation.cpp",
      "position" : 30,
      "pull_request_review_id" : 1599868092,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28345",
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1308469336/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-08-29T09:23:45Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1308469336",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/25183001?v=4",
         "events_url" : "https://api.github.com/users/glozow/events{/privacy}",
         "followers_url" : "https://api.github.com/users/glozow/followers",
         "following_url" : "https://api.github.com/users/glozow/following{/other_user}",
         "gists_url" : "https://api.github.com/users/glozow/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/glozow",
         "id" : 25183001,
         "login" : "glozow",
         "node_id" : "MDQ6VXNlcjI1MTgzMDAx",
         "organizations_url" : "https://api.github.com/users/glozow/orgs",
         "received_events_url" : "https://api.github.com/users/glozow/received_events",
         "repos_url" : "https://api.github.com/users/glozow/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/glozow/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/glozow/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/glozow"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28345#discussion_r1308475194"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28345"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1308475194"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Perhaps the way to fix this is to overload `BroadcastTransaction()` to accept either a `CFeeRate`, `CAmount`, or nothing. After the test-accept of the transaction, you can query `MempoolAcceptResult::m_vsize` to check the feerate.",
      "commit_id" : "94267128b28b6fb7019f23d2c85a0c765a3d0705",
      "created_at" : "2023-08-29T09:20:40Z",
      "diff_hunk" : "@@ -84,7 +84,7 @@ static RPCHelpMan sendrawtransaction()\n                                                      DEFAULT_MAX_RAW_TX_FEE_RATE :\n                                                      CFeeRate(AmountFromValue(request.params[1]));\n \n-            int64_t virtual_size = GetVirtualTransactionSize(*tx);\n+            int64_t virtual_size = GetVirtualTransactionSize(*tx, 0, 0 /* BUG */);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28345#discussion_r1308475194",
      "id" : 1308475194,
      "line" : 87,
      "node_id" : "PRRC_kwDOABII585N_b86",
      "original_commit_id" : "fef601e2a4d790781fee316c1a55ea48a134a0f1",
      "original_line" : 87,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "src/rpc/mempool.cpp",
      "position" : 5,
      "pull_request_review_id" : 1599868092,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28345",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1308475194/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-08-29T09:23:45Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1308475194",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/25183001?v=4",
         "events_url" : "https://api.github.com/users/glozow/events{/privacy}",
         "followers_url" : "https://api.github.com/users/glozow/followers",
         "following_url" : "https://api.github.com/users/glozow/following{/other_user}",
         "gists_url" : "https://api.github.com/users/glozow/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/glozow",
         "id" : 25183001,
         "login" : "glozow",
         "node_id" : "MDQ6VXNlcjI1MTgzMDAx",
         "organizations_url" : "https://api.github.com/users/glozow/orgs",
         "received_events_url" : "https://api.github.com/users/glozow/received_events",
         "repos_url" : "https://api.github.com/users/glozow/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/glozow/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/glozow/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/glozow"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28345#discussion_r1310506664"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28345"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1310506664"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Alternative, move to wallet and rename to `GetWalletVirtualTransactionSize` with tests/assertions/comments saying why it's safe in one location instead of spread around? Would make grepping for the remaining bugs easier as well. e.g., anything like `GetVirtualTransactionSize(tx, 0, 0)` would be obviously a bug at that point",
      "commit_id" : "94267128b28b6fb7019f23d2c85a0c765a3d0705",
      "created_at" : "2023-08-30T16:03:59Z",
      "diff_hunk" : "@@ -158,11 +158,6 @@ int64_t GetVirtualTransactionSize(int64_t nWeight, int64_t nSigOpCost, unsigned\n int64_t GetVirtualTransactionSize(const CTransaction& tx, int64_t nSigOpCost, unsigned int bytes_per_sigop);\n int64_t GetVirtualTransactionInputSize(const CTxIn& tx, int64_t nSigOpCost, unsigned int bytes_per_sigop);\n \n-static inline int64_t GetVirtualTransactionSize(const CTransaction& tx)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28345#discussion_r1310506664",
      "id" : 1310506664,
      "line" : 161,
      "node_id" : "PRRC_kwDOABII585OHL6o",
      "original_commit_id" : "56f5d5ee85c3ad87c9862192412b7957e478363c",
      "original_line" : 161,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "src/policy/policy.h",
      "position" : 4,
      "pull_request_review_id" : 1603046561,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28345",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1310506664/reactions"
      },
      "side" : "LEFT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-08-30T16:28:18Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1310506664",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5767891?v=4",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "node_id" : "MDQ6VXNlcjU3Njc4OTE=",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28345#discussion_r1310510333"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28345"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1310510333"
         }
      },
      "author_association" : "MEMBER",
      "body" : "seems a bit scary with no actionable suggestion?",
      "commit_id" : "94267128b28b6fb7019f23d2c85a0c765a3d0705",
      "created_at" : "2023-08-30T16:06:50Z",
      "diff_hunk" : "@@ -29,6 +29,7 @@ class WalletModelTransaction\n     CTransactionRef& getWtx();\n     void setWtx(const CTransactionRef&);\n \n+    //! WARNING: Currently only safe for self-generated transactions due to bypassing sigop logic of GetVirtualTransactionSize",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28345#discussion_r1310510333",
      "id" : 1310510333,
      "line" : 32,
      "node_id" : "PRRC_kwDOABII585OHMz9",
      "original_commit_id" : "56f5d5ee85c3ad87c9862192412b7957e478363c",
      "original_line" : 32,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "src/qt/walletmodeltransaction.h",
      "position" : 4,
      "pull_request_review_id" : 1603046561,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28345",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1310510333/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-08-30T16:28:18Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1310510333",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5767891?v=4",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "node_id" : "MDQ6VXNlcjU3Njc4OTE=",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28345#discussion_r1310535106"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28345"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1310535106"
         }
      },
      "author_association" : "MEMBER",
      "body" : "> why not just pass in a int64_t total_vsize?\r\n\r\nIndeed, then you don't have to gather all the vsizes twice as well.",
      "commit_id" : "94267128b28b6fb7019f23d2c85a0c765a3d0705",
      "created_at" : "2023-08-30T16:26:03Z",
      "diff_hunk" : "@@ -197,13 +197,15 @@ util::Result<CTxMemPool::setEntries> CTxMemPool::CalculateAncestorsAndCheckLimit\n }\n \n bool CTxMemPool::CheckPackageLimits(const Package& package,\n+                                    const std::vector<int64_t> &all_tx_vsizes,",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28345#discussion_r1310535106",
      "id" : 1310535106,
      "in_reply_to_id" : 1308451245,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585OHS3C",
      "original_commit_id" : "fef601e2a4d790781fee316c1a55ea48a134a0f1",
      "original_line" : 200,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "src/txmempool.cpp",
      "position" : null,
      "pull_request_review_id" : 1603046561,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28345",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1310535106/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-08-30T16:28:18Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1310535106",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5767891?v=4",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "node_id" : "MDQ6VXNlcjU3Njc4OTE=",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28345#discussion_r1310542791"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28345"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1310542791"
         }
      },
      "author_association" : "MEMBER",
      "body" : "in general would be useful to note in a comment what that bug could possibly result in with respect to behavior, maybe a test case :)",
      "commit_id" : "94267128b28b6fb7019f23d2c85a0c765a3d0705",
      "created_at" : "2023-08-30T16:32:28Z",
      "diff_hunk" : "@@ -84,7 +84,7 @@ static RPCHelpMan sendrawtransaction()\n                                                      DEFAULT_MAX_RAW_TX_FEE_RATE :\n                                                      CFeeRate(AmountFromValue(request.params[1]));\n \n-            int64_t virtual_size = GetVirtualTransactionSize(*tx);\n+            int64_t virtual_size = GetVirtualTransactionSize(*tx, 0, 0 /* BUG */);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28345#discussion_r1310542791",
      "id" : 1310542791,
      "in_reply_to_id" : 1308475194,
      "line" : 87,
      "node_id" : "PRRC_kwDOABII585OHUvH",
      "original_commit_id" : "fef601e2a4d790781fee316c1a55ea48a134a0f1",
      "original_line" : 87,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "src/rpc/mempool.cpp",
      "position" : 5,
      "pull_request_review_id" : 1603098043,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28345",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1310542791/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-08-30T16:32:36Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1310542791",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5767891?v=4",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "node_id" : "MDQ6VXNlcjU3Njc4OTE=",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28345#discussion_r1313916525"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28345"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1313916525"
         }
      },
      "author_association" : "MEMBER",
      "body" : "*Should* they be distinguished?",
      "commit_id" : "94267128b28b6fb7019f23d2c85a0c765a3d0705",
      "created_at" : "2023-09-02T17:21:36Z",
      "diff_hunk" : "@@ -1277,6 +1277,10 @@ PackageMempoolAcceptResult MemPoolAccept::AcceptMultipleTransactions(const std::\n     // package feerate (total modified fees / total virtual size) to check this requirement.\n     const auto m_total_vsize = std::accumulate(workspaces.cbegin(), workspaces.cend(), int64_t{0},\n         [](int64_t sum, auto& ws) { return sum + ws.m_vsize; });\n+    if (m_total_vsize > MAX_PACKAGE_SIZE * 1000) {\n+        package_state.Invalid(PackageValidationResult::PCKG_POLICY, \"package-too-large\");",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28345#discussion_r1313916525",
      "id" : 1313916525,
      "in_reply_to_id" : 1308469336,
      "line" : 1283,
      "node_id" : "PRRC_kwDOABII585OUMZt",
      "original_commit_id" : "9307e5c6fc1786e5fc734da1685e1cde52f4dd61",
      "original_line" : 1283,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "src/validation.cpp",
      "position" : 30,
      "pull_request_review_id" : 1608349238,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28345",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1313916525/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-09-02T17:25:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1313916525",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "node_id" : "MDQ6VXNlcjEwOTU2NzU=",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28345#discussion_r1313917625"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28345"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1313917625"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Done",
      "commit_id" : "94267128b28b6fb7019f23d2c85a0c765a3d0705",
      "created_at" : "2023-09-02T17:24:49Z",
      "diff_hunk" : "@@ -197,13 +197,15 @@ util::Result<CTxMemPool::setEntries> CTxMemPool::CalculateAncestorsAndCheckLimit\n }\n \n bool CTxMemPool::CheckPackageLimits(const Package& package,\n+                                    const std::vector<int64_t> &all_tx_vsizes,",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28345#discussion_r1313917625",
      "id" : 1313917625,
      "in_reply_to_id" : 1308451245,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585OUMq5",
      "original_commit_id" : "fef601e2a4d790781fee316c1a55ea48a134a0f1",
      "original_line" : 200,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "src/txmempool.cpp",
      "position" : null,
      "pull_request_review_id" : 1608349631,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28345",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1313917625/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-09-02T17:24:49Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1313917625",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "node_id" : "MDQ6VXNlcjEwOTU2NzU=",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28345#discussion_r1313917702"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28345"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1313917702"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Done",
      "commit_id" : "94267128b28b6fb7019f23d2c85a0c765a3d0705",
      "created_at" : "2023-09-02T17:25:00Z",
      "diff_hunk" : "@@ -26,4 +27,10 @@ CMutableTransaction BuildSpendingTransaction(const CScript& scriptSig, const CSc\n // the second nValues[2] and nValues[3] outputs paid to a TxoutType::PUBKEYHASH.\n std::vector<CMutableTransaction> SetupDummyInputs(FillableSigningProvider& keystoreRet, CCoinsViewCache& coinsRet, const std::array<CAmount,4>& nValues);\n \n+// Assumes a non-spammy tx",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28345#discussion_r1313917702",
      "id" : 1313917702,
      "in_reply_to_id" : 1308461427,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585OUMsG",
      "original_commit_id" : "56f5d5ee85c3ad87c9862192412b7957e478363c",
      "original_line" : 30,
      "original_position" : 12,
      "original_start_line" : null,
      "path" : "src/test/util/transaction_utils.h",
      "position" : null,
      "pull_request_review_id" : 1608349649,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28345",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1313917702/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-09-02T17:25:00Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1313917702",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "node_id" : "MDQ6VXNlcjEwOTU2NzU=",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28345#discussion_r1313918608"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28345"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1313918608"
         }
      },
      "author_association" : "MEMBER",
      "body" : "@glozow Isn't that exactly the behaviour that we refactored out of (to checking locally here)?",
      "commit_id" : "94267128b28b6fb7019f23d2c85a0c765a3d0705",
      "created_at" : "2023-09-02T17:27:04Z",
      "diff_hunk" : "@@ -84,7 +84,7 @@ static RPCHelpMan sendrawtransaction()\n                                                      DEFAULT_MAX_RAW_TX_FEE_RATE :\n                                                      CFeeRate(AmountFromValue(request.params[1]));\n \n-            int64_t virtual_size = GetVirtualTransactionSize(*tx);\n+            int64_t virtual_size = GetVirtualTransactionSize(*tx, 0, 0 /* BUG */);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28345#discussion_r1313918608",
      "id" : 1313918608,
      "in_reply_to_id" : 1308475194,
      "line" : 87,
      "node_id" : "PRRC_kwDOABII585OUM6Q",
      "original_commit_id" : "fef601e2a4d790781fee316c1a55ea48a134a0f1",
      "original_line" : 87,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "src/rpc/mempool.cpp",
      "position" : 5,
      "pull_request_review_id" : 1608350314,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28345",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1313918608/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-09-02T17:27:04Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1313918608",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "node_id" : "MDQ6VXNlcjEwOTU2NzU=",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28345#discussion_r1313919734"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28345"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1313919734"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I don't see any obvious actionable solution (https://github.com/bitcoin-core/gui/issues/750). But this is currently only called where it is safe.",
      "commit_id" : "94267128b28b6fb7019f23d2c85a0c765a3d0705",
      "created_at" : "2023-09-02T17:28:30Z",
      "diff_hunk" : "@@ -29,6 +29,7 @@ class WalletModelTransaction\n     CTransactionRef& getWtx();\n     void setWtx(const CTransactionRef&);\n \n+    //! WARNING: Currently only safe for self-generated transactions due to bypassing sigop logic of GetVirtualTransactionSize",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28345#discussion_r1313919734",
      "id" : 1313919734,
      "in_reply_to_id" : 1310510333,
      "line" : 32,
      "node_id" : "PRRC_kwDOABII585OUNL2",
      "original_commit_id" : "56f5d5ee85c3ad87c9862192412b7957e478363c",
      "original_line" : 32,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "src/qt/walletmodeltransaction.h",
      "position" : 4,
      "pull_request_review_id" : 1608351213,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28345",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1313919734/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-09-02T17:28:30Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1313919734",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "node_id" : "MDQ6VXNlcjEwOTU2NzU=",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "`checkChainLimits` should probably get a warning-only-for-wallet-use comment too",
      "created_at" : "2023-09-02T18:31:20Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28345#issuecomment-1703907579",
      "id" : 1703907579,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28345",
      "node_id" : "IC_kwDOABII585lj5D7",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1703907579/reactions"
      },
      "updated_at" : "2023-09-02T18:31:20Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1703907579",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "node_id" : "MDQ6VXNlcjEwOTU2NzU=",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28345#discussion_r1315299002"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28345"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1315299002"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Ah, I see what you mean. Fixed.",
      "commit_id" : "6cd57e509c2f72ce4cd3abd71f18527c0a839695",
      "created_at" : "2023-09-05T02:23:26Z",
      "diff_hunk" : "@@ -84,7 +84,7 @@ static RPCHelpMan sendrawtransaction()\n                                                      DEFAULT_MAX_RAW_TX_FEE_RATE :\n                                                      CFeeRate(AmountFromValue(request.params[1]));\n \n-            int64_t virtual_size = GetVirtualTransactionSize(*tx);\n+            int64_t virtual_size = GetVirtualTransactionSize(*tx, 0, 0 /* BUG */);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28345#discussion_r1315299002",
      "id" : 1315299002,
      "in_reply_to_id" : 1308475194,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585OZd66",
      "original_commit_id" : "fef601e2a4d790781fee316c1a55ea48a134a0f1",
      "original_line" : 87,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "src/rpc/mempool.cpp",
      "position" : null,
      "pull_request_review_id" : 1610095473,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28345",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1315299002/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-09-05T02:23:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1315299002",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "node_id" : "MDQ6VXNlcjEwOTU2NzU=",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   }
]
