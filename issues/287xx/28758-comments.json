[
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage\nFor detailed information about the code coverage, see the [test coverage report](https://corecheck.dev/bitcoin/bitcoin/pulls/28758).\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\nA summary of reviews will appear here.\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#26711](https://github.com/bitcoin/bitcoin/pull/26711) (validate package transactions with their in-package ancestor sets by glozow)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.\n",
      "created_at" : "2023-10-31T09:14:26Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28758#issuecomment-1786805691",
      "id" : 1786805691,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28758",
      "node_id" : "IC_kwDOABII585qgH27",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1786805691/reactions"
      },
      "updated_at" : "2023-10-31T10:40:32Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1786805691",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28758#discussion_r1377326791"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28758"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1377326791"
         }
      },
      "author_association" : "MEMBER",
      "body" : "nit: `IsSorted` does not convey what is being checked for sortedness.\r\n\r\n```suggestion\r\nbool IsPackageSorted(const Package& txns);\r\n```",
      "commit_id" : "f60560bf39c031e0ba4b6e04baf3b6deb6cdc07f",
      "created_at" : "2023-10-31T09:54:21Z",
      "diff_hunk" : "@@ -49,13 +51,36 @@ using Package = std::vector<CTransactionRef>;\n \n class PackageValidationState : public ValidationState<PackageValidationResult> {};\n \n+/** If any direct dependencies exist between transactions (i.e. a child spending the output of a\n+ * parent), checks that all parents appear somewhere in the list before their respective children.\n+ * No other ordering is enforced. This function cannot detect indirect dependencies (e.g. a\n+ * transaction's grandparent if its parent is not present).\n+ * @returns true if sorted. False if any tx spends the output of a tx that appears later in txns.\n+ */\n+bool IsSorted(const Package& txns);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28758#discussion_r1377326791",
      "id" : 1377326791,
      "line" : 60,
      "node_id" : "PRRC_kwDOABII585SGFbH",
      "original_commit_id" : "f60560bf39c031e0ba4b6e04baf3b6deb6cdc07f",
      "original_line" : 60,
      "original_position" : 21,
      "original_start_line" : null,
      "path" : "src/policy/packages.h",
      "position" : 21,
      "pull_request_review_id" : 1705880534,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28758",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1377326791/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-10-31T09:54:21Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1377326791",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8077169?v=4",
         "events_url" : "https://api.github.com/users/dergoegge/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dergoegge/followers",
         "following_url" : "https://api.github.com/users/dergoegge/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dergoegge/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dergoegge",
         "id" : 8077169,
         "login" : "dergoegge",
         "node_id" : "MDQ6VXNlcjgwNzcxNjk=",
         "organizations_url" : "https://api.github.com/users/dergoegge/orgs",
         "received_events_url" : "https://api.github.com/users/dergoegge/received_events",
         "repos_url" : "https://api.github.com/users/dergoegge/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dergoegge/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dergoegge/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dergoegge"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28758#discussion_r1377493306"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28758"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1377493306"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Ok, renamed this to `IsTopoSortedPackage`, i.e. \"is a topologically sorted package\" to be more descriptive.",
      "commit_id" : "6432d249fa6dbd8bc154ceb9608b9cab9abdd044",
      "created_at" : "2023-10-31T12:14:07Z",
      "diff_hunk" : "@@ -49,13 +51,36 @@ using Package = std::vector<CTransactionRef>;\n \n class PackageValidationState : public ValidationState<PackageValidationResult> {};\n \n+/** If any direct dependencies exist between transactions (i.e. a child spending the output of a\n+ * parent), checks that all parents appear somewhere in the list before their respective children.\n+ * No other ordering is enforced. This function cannot detect indirect dependencies (e.g. a\n+ * transaction's grandparent if its parent is not present).\n+ * @returns true if sorted. False if any tx spends the output of a tx that appears later in txns.\n+ */\n+bool IsSorted(const Package& txns);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28758#discussion_r1377493306",
      "id" : 1377493306,
      "in_reply_to_id" : 1377326791,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585SGuE6",
      "original_commit_id" : "f60560bf39c031e0ba4b6e04baf3b6deb6cdc07f",
      "original_line" : 60,
      "original_position" : 21,
      "original_start_line" : null,
      "path" : "src/policy/packages.h",
      "position" : null,
      "pull_request_review_id" : 1706151209,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28758",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1377493306/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-10-31T12:14:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1377493306",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/25183001?v=4",
         "events_url" : "https://api.github.com/users/glozow/events{/privacy}",
         "followers_url" : "https://api.github.com/users/glozow/followers",
         "following_url" : "https://api.github.com/users/glozow/following{/other_user}",
         "gists_url" : "https://api.github.com/users/glozow/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/glozow",
         "id" : 25183001,
         "login" : "glozow",
         "node_id" : "MDQ6VXNlcjI1MTgzMDAx",
         "organizations_url" : "https://api.github.com/users/glozow/orgs",
         "received_events_url" : "https://api.github.com/users/glozow/received_events",
         "repos_url" : "https://api.github.com/users/glozow/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/glozow/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/glozow/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/glozow"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28758#discussion_r1377497946"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28758"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1377497946"
         }
      },
      "author_association" : "MEMBER",
      "body" : "can you do the same for `IsConsistent`? e.g. `IsPackageConsistent`",
      "commit_id" : "6432d249fa6dbd8bc154ceb9608b9cab9abdd044",
      "created_at" : "2023-10-31T12:18:23Z",
      "diff_hunk" : "@@ -49,13 +51,36 @@ using Package = std::vector<CTransactionRef>;\n \n class PackageValidationState : public ValidationState<PackageValidationResult> {};\n \n+/** If any direct dependencies exist between transactions (i.e. a child spending the output of a\n+ * parent), checks that all parents appear somewhere in the list before their respective children.\n+ * No other ordering is enforced. This function cannot detect indirect dependencies (e.g. a\n+ * transaction's grandparent if its parent is not present).\n+ * @returns true if sorted. False if any tx spends the output of a tx that appears later in txns.\n+ */\n+bool IsSorted(const Package& txns);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28758#discussion_r1377497946",
      "id" : 1377497946,
      "in_reply_to_id" : 1377326791,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585SGvNa",
      "original_commit_id" : "f60560bf39c031e0ba4b6e04baf3b6deb6cdc07f",
      "original_line" : 60,
      "original_position" : 21,
      "original_start_line" : null,
      "path" : "src/policy/packages.h",
      "position" : null,
      "pull_request_review_id" : 1706159997,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28758",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1377497946/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-10-31T12:18:23Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1377497946",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8077169?v=4",
         "events_url" : "https://api.github.com/users/dergoegge/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dergoegge/followers",
         "following_url" : "https://api.github.com/users/dergoegge/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dergoegge/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dergoegge",
         "id" : 8077169,
         "login" : "dergoegge",
         "node_id" : "MDQ6VXNlcjgwNzcxNjk=",
         "organizations_url" : "https://api.github.com/users/dergoegge/orgs",
         "received_events_url" : "https://api.github.com/users/dergoegge/received_events",
         "repos_url" : "https://api.github.com/users/dergoegge/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dergoegge/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dergoegge/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dergoegge"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28758#discussion_r1377697411"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28758"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1377697411"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Renamed to `IsConsistentPackage`",
      "commit_id" : "80cd897945193e03a4b0776537de219d12203373",
      "created_at" : "2023-10-31T14:38:19Z",
      "diff_hunk" : "@@ -49,13 +51,36 @@ using Package = std::vector<CTransactionRef>;\n \n class PackageValidationState : public ValidationState<PackageValidationResult> {};\n \n+/** If any direct dependencies exist between transactions (i.e. a child spending the output of a\n+ * parent), checks that all parents appear somewhere in the list before their respective children.\n+ * No other ordering is enforced. This function cannot detect indirect dependencies (e.g. a\n+ * transaction's grandparent if its parent is not present).\n+ * @returns true if sorted. False if any tx spends the output of a tx that appears later in txns.\n+ */\n+bool IsSorted(const Package& txns);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28758#discussion_r1377697411",
      "id" : 1377697411,
      "in_reply_to_id" : 1377326791,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585SHf6D",
      "original_commit_id" : "f60560bf39c031e0ba4b6e04baf3b6deb6cdc07f",
      "original_line" : 60,
      "original_position" : 21,
      "original_start_line" : null,
      "path" : "src/policy/packages.h",
      "position" : null,
      "pull_request_review_id" : 1706483972,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28758",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1377697411/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-10-31T14:38:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1377697411",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/25183001?v=4",
         "events_url" : "https://api.github.com/users/glozow/events{/privacy}",
         "followers_url" : "https://api.github.com/users/glozow/followers",
         "following_url" : "https://api.github.com/users/glozow/following{/other_user}",
         "gists_url" : "https://api.github.com/users/glozow/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/glozow",
         "id" : 25183001,
         "login" : "glozow",
         "node_id" : "MDQ6VXNlcjI1MTgzMDAx",
         "organizations_url" : "https://api.github.com/users/glozow/orgs",
         "received_events_url" : "https://api.github.com/users/glozow/received_events",
         "repos_url" : "https://api.github.com/users/glozow/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/glozow/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/glozow/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/glozow"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28758#discussion_r1378307864"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28758"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1378307864"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Could alternatively make these member functions of `Package` ?",
      "commit_id" : "80cd897945193e03a4b0776537de219d12203373",
      "created_at" : "2023-11-01T01:29:56Z",
      "diff_hunk" : "@@ -49,13 +51,36 @@ using Package = std::vector<CTransactionRef>;\n \n class PackageValidationState : public ValidationState<PackageValidationResult> {};\n \n+/** If any direct dependencies exist between transactions (i.e. a child spending the output of a\n+ * parent), checks that all parents appear somewhere in the list before their respective children.\n+ * No other ordering is enforced. This function cannot detect indirect dependencies (e.g. a\n+ * transaction's grandparent if its parent is not present).\n+ * @returns true if sorted. False if any tx spends the output of a tx that appears later in txns.\n+ */\n+bool IsSorted(const Package& txns);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28758#discussion_r1378307864",
      "id" : 1378307864,
      "in_reply_to_id" : 1377326791,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585SJ08Y",
      "original_commit_id" : "f60560bf39c031e0ba4b6e04baf3b6deb6cdc07f",
      "original_line" : 60,
      "original_position" : 21,
      "original_start_line" : null,
      "path" : "src/policy/packages.h",
      "position" : null,
      "pull_request_review_id" : 1707452030,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28758",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1378307864/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-11-01T01:29:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1378307864",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/127186?v=4",
         "events_url" : "https://api.github.com/users/ajtowns/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ajtowns/followers",
         "following_url" : "https://api.github.com/users/ajtowns/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ajtowns/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ajtowns",
         "id" : 127186,
         "login" : "ajtowns",
         "node_id" : "MDQ6VXNlcjEyNzE4Ng==",
         "organizations_url" : "https://api.github.com/users/ajtowns/orgs",
         "received_events_url" : "https://api.github.com/users/ajtowns/received_events",
         "repos_url" : "https://api.github.com/users/ajtowns/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ajtowns/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ajtowns/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ajtowns"
      }
   }
]
