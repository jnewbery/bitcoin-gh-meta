[
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| ACK | [0xB10C](https://github.com/bitcoin/bitcoin/pull/27511#issuecomment-1726665190) |\n| Concept ACK | [jonatack](https://github.com/bitcoin/bitcoin/pull/27511#issuecomment-1518117272) |\n| Stale ACK | [ryanofsky](https://github.com/bitcoin/bitcoin/pull/27511#pullrequestreview-1539500332), [mzumsande](https://github.com/bitcoin/bitcoin/pull/27511#issuecomment-1701828528), [amitiuttarwar](https://github.com/bitcoin/bitcoin/pull/27511#issuecomment-1703205592), [willcl-ark](https://github.com/bitcoin/bitcoin/pull/27511#pullrequestreview-1631498446), [brunoerg](https://github.com/bitcoin/bitcoin/pull/27511#pullrequestreview-1632991898) |\n\nIf your review is incorrectly listed, please react with ð to this comment and the bot will ignore it on the next update.\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#26988](https://github.com/bitcoin/bitcoin/pull/26988) (cli: rework -addrinfo cli to use addresses which arenât filtered for quality/recency by stratospher)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.\n",
      "created_at" : "2023-04-21T16:28:51Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27511#issuecomment-1518070845",
      "id" : 1518070845,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27511",
      "node_id" : "IC_kwDOABII585ae-w9",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 1,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1518070845/reactions"
      },
      "updated_at" : "2023-09-19T23:10:53Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1518070845",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "This PR is based on master from two months age. You may need to rebase it to current master for the (tidy) CI to be green.",
      "created_at" : "2023-04-21T17:00:33Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27511#issuecomment-1518103852",
      "id" : 1518103852,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27511",
      "node_id" : "IC_kwDOABII585afG0s",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1518103852/reactions"
      },
      "updated_at" : "2023-04-21T17:01:06Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1518103852",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Tested Concept ACK. It might be good to have the breakdown of pre/post `IsTerrible` filtering (RPC getnodeaddresses and CLI -addrinfo return post) -- see the large differences between them.\r\n\r\n<img width=\"517\" alt=\"Screenshot 2023-04-21 at 10 21 42\" src=\"https://user-images.githubusercontent.com/2415484/233697542-d345a8c2-bce2-4558-89d9-56afd4279305.png\">\r\n\r\n\r\n",
      "created_at" : "2023-04-21T17:13:38Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27511#issuecomment-1518117272",
      "id" : 1518117272,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27511",
      "node_id" : "IC_kwDOABII585afKGY",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1518117272/reactions"
      },
      "updated_at" : "2023-05-12T18:19:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1518117272",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27511#discussion_r1174005736"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27511"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1174005736"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Maybe a final \"totals\" field with the totals for each?",
      "commit_id" : "c505611f08a850acb97dea9cc03b36aa468929ca",
      "created_at" : "2023-04-21T17:17:33Z",
      "diff_hunk" : "@@ -966,6 +966,48 @@ static RPCHelpMan addpeeraddress()\n     };\n }\n \n+static RPCHelpMan getaddrmaninfo()\n+{\n+    return RPCHelpMan{\"getaddrmaninfo\",\n+                      \"\\nReturns the number of addresses in the `new` and `tried` tables and their sum for all networks. This RPC is for testing only.\\n\",\n+                      {},\n+                      RPCResult{\n+                              RPCResult::Type::OBJ_DYN, \"\", \"json object with network type as keys\",\n+                              {\n+                                      {RPCResult::Type::OBJ, \"network\", \"the network (\" + Join(GetNetworkNames(), \", \") + \")\",\n+                                       {\n+                                               {RPCResult::Type::NUM, \"new\", \"number of addresses in new table\"},\n+                                               {RPCResult::Type::NUM, \"tried\", \"number of addresses in tried table\"},\n+                                               {RPCResult::Type::NUM, \"total\", \"total number of addresses in both new/tried tables from a network\"},\n+                                       }},\n+                              }\n+                      },\n+                      RPCExamples{\n+                              HelpExampleCli(\"getaddrmaninfo\", \"\")\n+                              + HelpExampleRpc(\"getaddrmaninfo\", \"\")\n+                      },\n+                      [&](const RPCHelpMan& self, const JSONRPCRequest& request) -> UniValue\n+                      {\n+                          NodeContext& node = EnsureAnyNodeContext(request.context);\n+                          if (!node.addrman) {\n+                              throw JSONRPCError(RPC_CLIENT_P2P_DISABLED, \"Error: Address manager functionality missing or disabled\");\n+                          }\n+\n+                          UniValue ret(UniValue::VOBJ);\n+                          for (int n = 0; n < NET_MAX; ++n) {\n+                              enum Network network = static_cast<enum Network>(n);\n+                              if (network == NET_UNROUTABLE || network == NET_INTERNAL) continue;\n+                              UniValue obj(UniValue::VOBJ);\n+                              obj.pushKV(\"new\", node.addrman->Size(network, true));\n+                              obj.pushKV(\"tried\", node.addrman->Size(network, false));\n+                              obj.pushKV(\"total\", node.addrman->Size(network));\n+                              ret.pushKV(GetNetworkName(network), obj);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27511#discussion_r1174005736",
      "id" : 1174005736,
      "line" : 1004,
      "node_id" : "PRRC_kwDOABII585F-efo",
      "original_commit_id" : "c505611f08a850acb97dea9cc03b36aa468929ca",
      "original_line" : 1004,
      "original_position" : 39,
      "original_start_line" : null,
      "path" : "src/rpc/net.cpp",
      "position" : 39,
      "pull_request_review_id" : 1396138526,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27511",
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1174005736/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-04-21T17:17:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1174005736",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27511#discussion_r1181081666"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27511"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1181081666"
         }
      },
      "author_association" : "NONE",
      "body" : "Do you think we can add total to this test aswell?",
      "commit_id" : "c505611f08a850acb97dea9cc03b36aa468929ca",
      "created_at" : "2023-04-29T13:50:54Z",
      "diff_hunk" : "@@ -328,6 +329,19 @@ def test_addpeeraddress(self):\n             addrs = node.getnodeaddresses(count=0)  # getnodeaddresses re-runs the addrman checks\n             assert_equal(len(addrs), 2)\n \n+    def test_getaddrmaninfo(self):\n+        self.log.info(\"Test getaddrmaninfo\")\n+        node = self.nodes[1]\n+\n+        self.log.debug(\"Test that getaddrmaninfo is a hidden RPC\")\n+        # It is hidden from general help, but its detailed help may be called directly.\n+        assert \"getaddrmaninfo\" not in node.help()\n+        assert \"getaddrmaninfo\" in node.help(\"getaddrmaninfo\")\n+\n+        # current count of ipv4 addresses in addrman is {'new':1, 'tried':1}\n+        res = node.getaddrmaninfo()\n+        assert_equal(res[\"ipv4\"][\"new\"], 1)\n+        assert_equal(res[\"ipv4\"][\"tried\"], 1)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27511#discussion_r1181081666",
      "id" : 1181081666,
      "line" : 344,
      "node_id" : "PRRC_kwDOABII585GZeBC",
      "original_commit_id" : "c505611f08a850acb97dea9cc03b36aa468929ca",
      "original_line" : 344,
      "original_position" : 24,
      "original_start_line" : null,
      "path" : "test/functional/rpc_net.py",
      "position" : 24,
      "pull_request_review_id" : 1406986003,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27511",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1181081666/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-04-29T13:50:55Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1181081666",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/15950706?v=4",
         "events_url" : "https://api.github.com/users/kevkevinpal/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kevkevinpal/followers",
         "following_url" : "https://api.github.com/users/kevkevinpal/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kevkevinpal/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kevkevinpal",
         "id" : 15950706,
         "login" : "kevkevinpal",
         "node_id" : "MDQ6VXNlcjE1OTUwNzA2",
         "organizations_url" : "https://api.github.com/users/kevkevinpal/orgs",
         "received_events_url" : "https://api.github.com/users/kevkevinpal/received_events",
         "repos_url" : "https://api.github.com/users/kevkevinpal/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kevkevinpal/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kevkevinpal/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kevkevinpal"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> \"terrible\" is an internal property\r\n\r\nIt's used in RPC getnodeaddresses and CLI -addrinfo to return only non-IsTerrible peers to users. (I meant pre and post that filtering in the suggestion above).",
      "created_at" : "2023-05-12T18:24:18Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27511#issuecomment-1546119966",
      "id" : 1546119966,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27511",
      "node_id" : "IC_kwDOABII585cJ-se",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1546119966/reactions"
      },
      "updated_at" : "2023-05-12T18:25:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1546119966",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> It's used in RPC getnodeaddresses and CLI -addrinfo to return only non-IsTerrible peers to users. (I meant pre and post that filtering in the suggestion above).\r\n\r\nin my opinion unfortunately. I think this was mostly coincidental, because #13152 chose to reuse an addrman function used only for GETADDR answers before. Then #21595 used that output without any mentioning of that restriction, and the doc was only adjusted a year later in #24370. I think that ideally we never should have exposed the terrible filter in the first place.",
      "created_at" : "2023-05-12T18:39:24Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27511#issuecomment-1546135453",
      "id" : 1546135453,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27511",
      "node_id" : "IC_kwDOABII585cKCed",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1546135453/reactions"
      },
      "updated_at" : "2023-05-12T18:39:24Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1546135453",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/48763452?v=4",
         "events_url" : "https://api.github.com/users/mzumsande/events{/privacy}",
         "followers_url" : "https://api.github.com/users/mzumsande/followers",
         "following_url" : "https://api.github.com/users/mzumsande/following{/other_user}",
         "gists_url" : "https://api.github.com/users/mzumsande/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/mzumsande",
         "id" : 48763452,
         "login" : "mzumsande",
         "node_id" : "MDQ6VXNlcjQ4NzYzNDUy",
         "organizations_url" : "https://api.github.com/users/mzumsande/orgs",
         "received_events_url" : "https://api.github.com/users/mzumsande/received_events",
         "repos_url" : "https://api.github.com/users/mzumsande/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/mzumsande/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/mzumsande/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/mzumsande"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> I think that ideally we never should have exposed the terrible filter in the first place.\r\n\r\n@mzumsande do you want to propose some changes to remove its exposure?",
      "created_at" : "2023-05-15T10:30:55Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27511#issuecomment-1547603057",
      "id" : 1547603057,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27511",
      "node_id" : "IC_kwDOABII585cPoxx",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1547603057/reactions"
      },
      "updated_at" : "2023-05-15T10:30:55Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1547603057",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/863730?v=4",
         "events_url" : "https://api.github.com/users/fanquake/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fanquake/followers",
         "following_url" : "https://api.github.com/users/fanquake/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fanquake/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fanquake",
         "id" : 863730,
         "login" : "fanquake",
         "node_id" : "MDQ6VXNlcjg2MzczMA==",
         "organizations_url" : "https://api.github.com/users/fanquake/orgs",
         "received_events_url" : "https://api.github.com/users/fanquake/received_events",
         "repos_url" : "https://api.github.com/users/fanquake/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fanquake/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fanquake"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "The author and the numerous reviewers of #13152 were aware of the relationship to getaddr (see the PR description and review discussion), as well as mention of IsTerrible in https://github.com/bitcoin/bitcoin/pull/13152#pullrequestreview-121943454.\r\n\r\nI don't see it as unfortunate; as a frequent user of getnodeaddresses and -addrinfo it seems useful that the data doesn't include terrible/non-recent (and banned/discouraged) peers.\r\n\r\nBut guessing whether it was coincidental is beside the point. What is relevant is that changing those calls to return different data would break user space, including any tracking over time using that data.\r\n\r\nAdding data is fine, but let's not needlessly break user space.",
      "created_at" : "2023-05-15T12:41:45Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27511#issuecomment-1547789857",
      "id" : 1547789857,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27511",
      "node_id" : "IC_kwDOABII585cQWYh",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1547789857/reactions"
      },
      "updated_at" : "2023-05-15T12:41:45Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1547789857",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "@stratospher do you plan to repush after rebase to current master for the CI and perhaps with the totals?",
      "created_at" : "2023-05-15T12:50:27Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27511#issuecomment-1547801330",
      "id" : 1547801330,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27511",
      "node_id" : "IC_kwDOABII585cQZLy",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1547801330/reactions"
      },
      "updated_at" : "2023-05-15T12:50:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1547801330",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27511#discussion_r1193919304"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27511"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1193919304"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "done. liked the idea.",
      "commit_id" : "7d7ee5e0f4254495349ea68f3d0127c0c336fd12",
      "created_at" : "2023-05-15T14:23:29Z",
      "diff_hunk" : "@@ -966,6 +966,48 @@ static RPCHelpMan addpeeraddress()\n     };\n }\n \n+static RPCHelpMan getaddrmaninfo()\n+{\n+    return RPCHelpMan{\"getaddrmaninfo\",\n+                      \"\\nReturns the number of addresses in the `new` and `tried` tables and their sum for all networks. This RPC is for testing only.\\n\",\n+                      {},\n+                      RPCResult{\n+                              RPCResult::Type::OBJ_DYN, \"\", \"json object with network type as keys\",\n+                              {\n+                                      {RPCResult::Type::OBJ, \"network\", \"the network (\" + Join(GetNetworkNames(), \", \") + \")\",\n+                                       {\n+                                               {RPCResult::Type::NUM, \"new\", \"number of addresses in new table\"},\n+                                               {RPCResult::Type::NUM, \"tried\", \"number of addresses in tried table\"},\n+                                               {RPCResult::Type::NUM, \"total\", \"total number of addresses in both new/tried tables from a network\"},\n+                                       }},\n+                              }\n+                      },\n+                      RPCExamples{\n+                              HelpExampleCli(\"getaddrmaninfo\", \"\")\n+                              + HelpExampleRpc(\"getaddrmaninfo\", \"\")\n+                      },\n+                      [&](const RPCHelpMan& self, const JSONRPCRequest& request) -> UniValue\n+                      {\n+                          NodeContext& node = EnsureAnyNodeContext(request.context);\n+                          if (!node.addrman) {\n+                              throw JSONRPCError(RPC_CLIENT_P2P_DISABLED, \"Error: Address manager functionality missing or disabled\");\n+                          }\n+\n+                          UniValue ret(UniValue::VOBJ);\n+                          for (int n = 0; n < NET_MAX; ++n) {\n+                              enum Network network = static_cast<enum Network>(n);\n+                              if (network == NET_UNROUTABLE || network == NET_INTERNAL) continue;\n+                              UniValue obj(UniValue::VOBJ);\n+                              obj.pushKV(\"new\", node.addrman->Size(network, true));\n+                              obj.pushKV(\"tried\", node.addrman->Size(network, false));\n+                              obj.pushKV(\"total\", node.addrman->Size(network));\n+                              ret.pushKV(GetNetworkName(network), obj);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27511#discussion_r1193919304",
      "id" : 1193919304,
      "in_reply_to_id" : 1174005736,
      "line" : 1005,
      "node_id" : "PRRC_kwDOABII585HKcNI",
      "original_commit_id" : "c505611f08a850acb97dea9cc03b36aa468929ca",
      "original_line" : 1005,
      "original_position" : 39,
      "original_start_line" : null,
      "path" : "src/rpc/net.cpp",
      "position" : 39,
      "pull_request_review_id" : 1426688255,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27511",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1193919304/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-05-15T14:23:29Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1193919304",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/44024636?v=4",
         "events_url" : "https://api.github.com/users/stratospher/events{/privacy}",
         "followers_url" : "https://api.github.com/users/stratospher/followers",
         "following_url" : "https://api.github.com/users/stratospher/following{/other_user}",
         "gists_url" : "https://api.github.com/users/stratospher/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/stratospher",
         "id" : 44024636,
         "login" : "stratospher",
         "node_id" : "MDQ6VXNlcjQ0MDI0NjM2",
         "organizations_url" : "https://api.github.com/users/stratospher/orgs",
         "received_events_url" : "https://api.github.com/users/stratospher/received_events",
         "repos_url" : "https://api.github.com/users/stratospher/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/stratospher/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/stratospher/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/stratospher"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27511#discussion_r1193920890"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27511"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1193920890"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "yes! done now.",
      "commit_id" : "7d7ee5e0f4254495349ea68f3d0127c0c336fd12",
      "created_at" : "2023-05-15T14:24:39Z",
      "diff_hunk" : "@@ -328,6 +329,19 @@ def test_addpeeraddress(self):\n             addrs = node.getnodeaddresses(count=0)  # getnodeaddresses re-runs the addrman checks\n             assert_equal(len(addrs), 2)\n \n+    def test_getaddrmaninfo(self):\n+        self.log.info(\"Test getaddrmaninfo\")\n+        node = self.nodes[1]\n+\n+        self.log.debug(\"Test that getaddrmaninfo is a hidden RPC\")\n+        # It is hidden from general help, but its detailed help may be called directly.\n+        assert \"getaddrmaninfo\" not in node.help()\n+        assert \"getaddrmaninfo\" in node.help(\"getaddrmaninfo\")\n+\n+        # current count of ipv4 addresses in addrman is {'new':1, 'tried':1}\n+        res = node.getaddrmaninfo()\n+        assert_equal(res[\"ipv4\"][\"new\"], 1)\n+        assert_equal(res[\"ipv4\"][\"tried\"], 1)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27511#discussion_r1193920890",
      "id" : 1193920890,
      "in_reply_to_id" : 1181081666,
      "line" : 344,
      "node_id" : "PRRC_kwDOABII585HKcl6",
      "original_commit_id" : "c505611f08a850acb97dea9cc03b36aa468929ca",
      "original_line" : 344,
      "original_position" : 24,
      "original_start_line" : null,
      "path" : "test/functional/rpc_net.py",
      "position" : 24,
      "pull_request_review_id" : 1426690777,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27511",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1193920890/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-05-15T14:24:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1193920890",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/44024636?v=4",
         "events_url" : "https://api.github.com/users/stratospher/events{/privacy}",
         "followers_url" : "https://api.github.com/users/stratospher/followers",
         "following_url" : "https://api.github.com/users/stratospher/following{/other_user}",
         "gists_url" : "https://api.github.com/users/stratospher/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/stratospher",
         "id" : 44024636,
         "login" : "stratospher",
         "node_id" : "MDQ6VXNlcjQ0MDI0NjM2",
         "organizations_url" : "https://api.github.com/users/stratospher/orgs",
         "received_events_url" : "https://api.github.com/users/stratospher/received_events",
         "repos_url" : "https://api.github.com/users/stratospher/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/stratospher/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/stratospher/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/stratospher"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> @mzumsande do you want to propose some changes to remove its exposure?\r\n\r\nno, I don't want to spend time on discussions on whether some change breaks user space or not. I'd be happy to have an alternative way to query the actual, unfiltered numbers per network, which are much more relevant to _my_ use cases as a developer.\r\n\r\n> I don't see it as unfortunate; as a frequent user of getnodeaddresses and -addrinfo it seems useful that the data doesn't include terrible/non-recent (and banned/discouraged) peers.\r\n\r\nFor me, it makes no sense that these commands might withhold our very next outbound peer - which would be picked with no disadvantage over non-terrible peers if it, for example, just has an older timestamp.\r\nOr, when dealing with a `peers.dat` that is >30 days old, that these commands won't give any results at all anymore, even though the `peers.dat` is still perfectly useful and able to find peers (many nodes are reachable under the same address for way longer than a month).",
      "created_at" : "2023-05-15T14:31:43Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27511#issuecomment-1547987039",
      "id" : 1547987039,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27511",
      "node_id" : "IC_kwDOABII585cRGhf",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1547987039/reactions"
      },
      "updated_at" : "2023-05-15T14:31:43Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1547987039",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/48763452?v=4",
         "events_url" : "https://api.github.com/users/mzumsande/events{/privacy}",
         "followers_url" : "https://api.github.com/users/mzumsande/followers",
         "following_url" : "https://api.github.com/users/mzumsande/following{/other_user}",
         "gists_url" : "https://api.github.com/users/mzumsande/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/mzumsande",
         "id" : 48763452,
         "login" : "mzumsande",
         "node_id" : "MDQ6VXNlcjQ4NzYzNDUy",
         "organizations_url" : "https://api.github.com/users/mzumsande/orgs",
         "received_events_url" : "https://api.github.com/users/mzumsande/received_events",
         "repos_url" : "https://api.github.com/users/mzumsande/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/mzumsande/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/mzumsande/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/mzumsande"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> I'd be happy to have an alternative way to query the actual, unfiltered numbers per network\r\n\r\nI think that would be useful, too, perhaps by passing an argument to getnodeaddresses and -addrinfo, and/or returning both pre and post filter in -addrinfo.",
      "created_at" : "2023-05-15T15:34:05Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27511#issuecomment-1548091322",
      "id" : 1548091322,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27511",
      "node_id" : "IC_kwDOABII585cRf-6",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1548091322/reactions"
      },
      "updated_at" : "2023-05-15T15:34:22Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1548091322",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "so sorry for the delay and thank you for the suggestions! the CI is all green now. i've updated the PR to include:\r\n- addrman new/tried/total count for \"all networks\"\r\n- test coverage for \"all networks\" and for total (total refers to both new/tried table count)\r\n\r\nI'd want this RPC to be the alternative way to access the actual count of all addresses in the addrman.",
      "created_at" : "2023-05-15T16:28:17Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27511#issuecomment-1548177296",
      "id" : 1548177296,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27511",
      "node_id" : "IC_kwDOABII585cR0-Q",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1548177296/reactions"
      },
      "updated_at" : "2023-05-15T16:28:17Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1548177296",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/44024636?v=4",
         "events_url" : "https://api.github.com/users/stratospher/events{/privacy}",
         "followers_url" : "https://api.github.com/users/stratospher/followers",
         "following_url" : "https://api.github.com/users/stratospher/following{/other_user}",
         "gists_url" : "https://api.github.com/users/stratospher/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/stratospher",
         "id" : 44024636,
         "login" : "stratospher",
         "node_id" : "MDQ6VXNlcjQ0MDI0NjM2",
         "organizations_url" : "https://api.github.com/users/stratospher/orgs",
         "received_events_url" : "https://api.github.com/users/stratospher/received_events",
         "repos_url" : "https://api.github.com/users/stratospher/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/stratospher/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/stratospher/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/stratospher"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> no, I don't want to spend time on discussions on whether some change breaks user space or not.\r\n\r\n@mzumsande fair enough. I don't quite understand what \"user space\" means, when it has been used in comments here (and in other PRs), as we are not the Linux Kernel, but I assume it's a somewhat less direct way of saying backwards compatibility/continuity?\r\n\r\nIn any case, as far as I'm aware, we offer no special \"backwards compatiblity\", or other, guarantees for our CLI tools, and I don't really think we should. Doing so would put us in an awkward position, of having our RPCs backwards compatibility requirements, extended to those tools (consumers, which just happen to exist in this codebase).\r\n\r\nWe don't want to be in position where we can't change an RPC, to stop it doing something possibly incorrect/illogical, just because a CLI tool happens to call that RPC. These tools shouldn't get any special treatment, and, as far as I'm concerned, should just adapt to any RPC changes we might make, like every other consumer (internal or external) of that RPC.",
      "created_at" : "2023-05-16T16:43:27Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27511#issuecomment-1550017272",
      "id" : 1550017272,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27511",
      "node_id" : "IC_kwDOABII585cY2L4",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 4,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 4,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1550017272/reactions"
      },
      "updated_at" : "2023-05-16T16:43:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1550017272",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/863730?v=4",
         "events_url" : "https://api.github.com/users/fanquake/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fanquake/followers",
         "following_url" : "https://api.github.com/users/fanquake/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fanquake/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fanquake",
         "id" : 863730,
         "login" : "fanquake",
         "node_id" : "MDQ6VXNlcjg2MzczMA==",
         "organizations_url" : "https://api.github.com/users/fanquake/orgs",
         "received_events_url" : "https://api.github.com/users/fanquake/received_events",
         "repos_url" : "https://api.github.com/users/fanquake/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fanquake/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fanquake"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "The code change here seems very simple, but since this PR does add a new RPC it would be useful to have more concept ACKs to know whether this is appropriate to merge. I noticed a number of contributors added github reactions to some comments here, so perhaps more of the people following the discussion could add concept acks or mention any reservations",
      "created_at" : "2023-06-09T19:10:17Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27511#issuecomment-1585023314",
      "id" : 1585023314,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27511",
      "node_id" : "IC_kwDOABII585eeYlS",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1585023314/reactions"
      },
      "updated_at" : "2023-06-09T19:10:17Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1585023314",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27511#discussion_r1269601639"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27511"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1269601639"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "In commit \"rpc: Introduce getaddrmaninfo for count of addresses stored in new/tried table\" (332cf61a5cdf838a20117280dc2d24659a4b4a5c)\r\n\r\nIt seems inaccurate to say \"RPC is for testing only\" when PR description says \"This would be useful for users who want to see the distribution of addresses from different networks across new/tried table in the addrman\" which makes it sound like this is useful for troubleshooting or monitoring.\r\n\r\nIf the RPC is not intended just to test the software, I think it would also be nice if documentation gave a little hint of what the new and tried are tables so the functionality is discoverable.\r\n\r\nI asked ChatGPT to write a documentation for a `getaddrmaninfo` method and it went a little overboard but maybe the new/tried descriptions are useful:\r\n\r\n> `getaddrmaninfo` Method Documentation\r\n> \r\n> **Method Name:** getaddrmaninfo\r\n> \r\n> **Description:**\r\n> The `getaddrmaninfo` method is a custom JSON-RPC method available in bitcoind, which provides high-level information about the Address Manager (addrman) module. The Address Manager is responsible for managing and organizing the addresses of network nodes in the Bitcoin peer-to-peer network.\r\n> \r\n> **Parameters:**\r\n> None\r\n> \r\n> **Result:**\r\n> - **new_addresses:** An integer representing the current number of addresses stored in the \"new\" table of the Address Manager. These are addresses that have been recently discovered but have not yet been successfully connected to by the node.\r\n> \r\n> - **tried_addresses:** An integer representing the current number of addresses stored in the \"tried\" table of the Address Manager. These are addresses of known nodes that the node has successfully connected to in the past and are considered accessible peers.\r\n> \r\n> **Note:**\r\n> The Address Manager plays a crucial role in maintaining a healthy and well-connected peer-to-peer network. The \"new\" table stores potential new peers that are periodically tested for connectivity to increase the node's network reach. The \"tried\" table contains addresses of reliable and accessible peers with whom the node has established successful connections.\r\n> \r\n> **Usage:**\r\n> The `getaddrmaninfo` method allows users to monitor the state of the Address Manager. By calling this method, users can retrieve the current counts of addresses in the \"new\" and \"tried\" tables, providing valuable insights into the node's ongoing efforts to discover new peers and maintain connections to known reliable nodes.\r\n> \r\n> **Example Output:**\r\n> ```\r\n> {\r\n>   \"new_addresses\": 256,\r\n>   \"tried_addresses\": 1024\r\n> }\r\n> ```\r\n> \r\n> In this example, the node currently has 256 addresses in the \"new\" table and 1024 addresses in the \"tried\" table. These counts reflect the node's active efforts to discover new peers (new addresses) and the established connections with known reliable peers (tried addresses) in the Bitcoin network.\r\n\r\n",
      "commit_id" : "69abfd3db103182bbe9e800dc1aef0114369cb37",
      "created_at" : "2023-07-20T15:06:40Z",
      "diff_hunk" : "@@ -967,6 +967,53 @@ static RPCHelpMan addpeeraddress()\n     };\n }\n \n+static RPCHelpMan getaddrmaninfo()\n+{\n+    return RPCHelpMan{\"getaddrmaninfo\",\n+                      \"\\nReturns the number of addresses in the `new` and `tried` tables and their sum for all networks. This RPC is for testing only.\\n\",",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27511#discussion_r1269601639",
      "id" : 1269601639,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585LrJVn",
      "original_commit_id" : "332cf61a5cdf838a20117280dc2d24659a4b4a5c",
      "original_line" : 973,
      "original_position" : 7,
      "original_start_line" : null,
      "path" : "src/rpc/net.cpp",
      "position" : null,
      "pull_request_review_id" : 1539500332,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27511",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 1,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1269601639/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-07-20T15:17:05Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1269601639",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27511#discussion_r1269792567"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27511"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1269792567"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "\"RPC is for testing only\" was used since this is a hidden RPC.\r\n> I think it would also be nice if documentation gave a little hint of what the new and tried are tables so the functionality is discoverable.\r\n\r\nliked the ChatGPT documentation! will update the PR to use some of this.",
      "commit_id" : "69abfd3db103182bbe9e800dc1aef0114369cb37",
      "created_at" : "2023-07-20T17:57:29Z",
      "diff_hunk" : "@@ -967,6 +967,53 @@ static RPCHelpMan addpeeraddress()\n     };\n }\n \n+static RPCHelpMan getaddrmaninfo()\n+{\n+    return RPCHelpMan{\"getaddrmaninfo\",\n+                      \"\\nReturns the number of addresses in the `new` and `tried` tables and their sum for all networks. This RPC is for testing only.\\n\",",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27511#discussion_r1269792567",
      "id" : 1269792567,
      "in_reply_to_id" : 1269601639,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585Lr383",
      "original_commit_id" : "332cf61a5cdf838a20117280dc2d24659a4b4a5c",
      "original_line" : 973,
      "original_position" : 7,
      "original_start_line" : null,
      "path" : "src/rpc/net.cpp",
      "position" : null,
      "pull_request_review_id" : 1539801288,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27511",
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1269792567/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-07-20T17:57:29Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1269792567",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/44024636?v=4",
         "events_url" : "https://api.github.com/users/stratospher/events{/privacy}",
         "followers_url" : "https://api.github.com/users/stratospher/followers",
         "following_url" : "https://api.github.com/users/stratospher/following{/other_user}",
         "gists_url" : "https://api.github.com/users/stratospher/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/stratospher",
         "id" : 44024636,
         "login" : "stratospher",
         "node_id" : "MDQ6VXNlcjQ0MDI0NjM2",
         "organizations_url" : "https://api.github.com/users/stratospher/orgs",
         "received_events_url" : "https://api.github.com/users/stratospher/received_events",
         "repos_url" : "https://api.github.com/users/stratospher/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/stratospher/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/stratospher/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/stratospher"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "updated the PR to include better docs inspired from https://github.com/bitcoin/bitcoin/pull/27511#discussion_r1269601639. left  \"RPC is for testing only\" as it is since all hidden RPCs have that line in the help. `getaddrmaninfo`'s help looks like this now:\r\n\r\n```\r\nProvides high-level information about the node's address manager by returning the number of addresses in the `new` and `tried` tables and their sum for all networks.\r\nThis RPC is for testing only.\r\n\r\nResult:\r\n{                   (json object) json object with network type as keys\r\n  \"network\" : {     (json object) the network (ipv4, ipv6, onion, i2p, cjdns)\r\n    \"new\" : n,      (numeric) number of addresses in new table. The new table contains addresses of potential new peers that are periodically tested for connectivity to increase the node's network reach.\r\n    \"tried\" : n,    (numeric) number of addresses in tried table. The tried table contains addresses of peers with whom the node has successfully connected to in the past.\r\n    \"total\" : n     (numeric) total number of addresses in both new/tried tables from a network\r\n  },\r\n  ...\r\n}\r\n\r\nExamples:\r\n> bitcoin-cli getaddrmaninfo \r\n> curl --user myusername --data-binary '{\"jsonrpc\": \"1.0\", \"id\": \"curltest\", \"method\": \"getaddrmaninfo\", \"params\": []}' -H 'content-type: text/plain;' http://127.0.0.1:8332/\r\n```",
      "created_at" : "2023-07-24T10:32:12Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27511#issuecomment-1647650203",
      "id" : 1647650203,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27511",
      "node_id" : "IC_kwDOABII585iNSWb",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1647650203/reactions"
      },
      "updated_at" : "2023-07-24T10:32:12Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1647650203",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/44024636?v=4",
         "events_url" : "https://api.github.com/users/stratospher/events{/privacy}",
         "followers_url" : "https://api.github.com/users/stratospher/followers",
         "following_url" : "https://api.github.com/users/stratospher/following{/other_user}",
         "gists_url" : "https://api.github.com/users/stratospher/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/stratospher",
         "id" : 44024636,
         "login" : "stratospher",
         "node_id" : "MDQ6VXNlcjQ0MDI0NjM2",
         "organizations_url" : "https://api.github.com/users/stratospher/orgs",
         "received_events_url" : "https://api.github.com/users/stratospher/received_events",
         "repos_url" : "https://api.github.com/users/stratospher/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/stratospher/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/stratospher/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/stratospher"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27511#discussion_r1278512102"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27511"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1278512102"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "```suggestion\r\n                                               {RPCResult::Type::NUM, \"total\", \"total number of addresses in both new/tried tables\"},\r\n```\r\n\r\nhaving the clause \"from a network\" only on total field (vs also on new and tried) is confusing. a bit redundant anyways since these fields are all nested within the networks",
      "commit_id" : "69abfd3db103182bbe9e800dc1aef0114369cb37",
      "created_at" : "2023-07-30T05:46:06Z",
      "diff_hunk" : "@@ -967,6 +967,55 @@ static RPCHelpMan addpeeraddress()\n     };\n }\n \n+static RPCHelpMan getaddrmaninfo()\n+{\n+    return RPCHelpMan{\"getaddrmaninfo\",\n+                      \"\\nProvides high-level information about the node's address manager by returning the number of \"\n+                      \"addresses in the `new` and `tried` tables and their sum for all networks.\\n\"\n+                      \"This RPC is for testing only.\\n\",\n+                      {},\n+                      RPCResult{\n+                              RPCResult::Type::OBJ_DYN, \"\", \"json object with network type as keys\",\n+                              {\n+                                      {RPCResult::Type::OBJ, \"network\", \"the network (\" + Join(GetNetworkNames(), \", \") + \")\",\n+                                       {\n+                                               {RPCResult::Type::NUM, \"new\", \"number of addresses in new table. The new table contains addresses of potential new peers that are periodically tested for connectivity to increase the node's network reach.\"},\n+                                               {RPCResult::Type::NUM, \"tried\", \"number of addresses in tried table. The tried table contains addresses of peers with whom the node has successfully connected to in the past.\"},\n+                                               {RPCResult::Type::NUM, \"total\", \"total number of addresses in both new/tried tables from a network\"},",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27511#discussion_r1278512102",
      "id" : 1278512102,
      "line" : 984,
      "node_id" : "PRRC_kwDOABII585MNIvm",
      "original_commit_id" : "6265bf90b7a168b551784bfaad427a649d6bfe70",
      "original_line" : 984,
      "original_position" : 18,
      "original_start_line" : null,
      "path" : "src/rpc/net.cpp",
      "position" : 18,
      "pull_request_review_id" : 1553581120,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27511",
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1278512102/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-07-30T06:09:44Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1278512102",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1500952?v=4",
         "events_url" : "https://api.github.com/users/amitiuttarwar/events{/privacy}",
         "followers_url" : "https://api.github.com/users/amitiuttarwar/followers",
         "following_url" : "https://api.github.com/users/amitiuttarwar/following{/other_user}",
         "gists_url" : "https://api.github.com/users/amitiuttarwar/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/amitiuttarwar",
         "id" : 1500952,
         "login" : "amitiuttarwar",
         "node_id" : "MDQ6VXNlcjE1MDA5NTI=",
         "organizations_url" : "https://api.github.com/users/amitiuttarwar/orgs",
         "received_events_url" : "https://api.github.com/users/amitiuttarwar/received_events",
         "repos_url" : "https://api.github.com/users/amitiuttarwar/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/amitiuttarwar/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/amitiuttarwar/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/amitiuttarwar"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27511#discussion_r1278512304"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27511"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1278512304"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "```suggestion\r\n                                               {RPCResult::Type::NUM, \"new\", \"number of addresses in the new table, which represent potential peers.\"},\r\n```\r\n\r\nthe fact that they are periodically tested seems like an implementation detail of addrman and feels a little confusing here. ",
      "commit_id" : "69abfd3db103182bbe9e800dc1aef0114369cb37",
      "created_at" : "2023-07-30T05:49:09Z",
      "diff_hunk" : "@@ -967,6 +967,55 @@ static RPCHelpMan addpeeraddress()\n     };\n }\n \n+static RPCHelpMan getaddrmaninfo()\n+{\n+    return RPCHelpMan{\"getaddrmaninfo\",\n+                      \"\\nProvides high-level information about the node's address manager by returning the number of \"\n+                      \"addresses in the `new` and `tried` tables and their sum for all networks.\\n\"\n+                      \"This RPC is for testing only.\\n\",\n+                      {},\n+                      RPCResult{\n+                              RPCResult::Type::OBJ_DYN, \"\", \"json object with network type as keys\",\n+                              {\n+                                      {RPCResult::Type::OBJ, \"network\", \"the network (\" + Join(GetNetworkNames(), \", \") + \")\",\n+                                       {\n+                                               {RPCResult::Type::NUM, \"new\", \"number of addresses in new table. The new table contains addresses of potential new peers that are periodically tested for connectivity to increase the node's network reach.\"},",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27511#discussion_r1278512304",
      "id" : 1278512304,
      "line" : 982,
      "node_id" : "PRRC_kwDOABII585MNIyw",
      "original_commit_id" : "6265bf90b7a168b551784bfaad427a649d6bfe70",
      "original_line" : 982,
      "original_position" : 16,
      "original_start_line" : null,
      "path" : "src/rpc/net.cpp",
      "position" : 16,
      "pull_request_review_id" : 1553581120,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27511",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1278512304/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-07-30T06:09:44Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1278512304",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1500952?v=4",
         "events_url" : "https://api.github.com/users/amitiuttarwar/events{/privacy}",
         "followers_url" : "https://api.github.com/users/amitiuttarwar/followers",
         "following_url" : "https://api.github.com/users/amitiuttarwar/following{/other_user}",
         "gists_url" : "https://api.github.com/users/amitiuttarwar/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/amitiuttarwar",
         "id" : 1500952,
         "login" : "amitiuttarwar",
         "node_id" : "MDQ6VXNlcjE1MDA5NTI=",
         "organizations_url" : "https://api.github.com/users/amitiuttarwar/orgs",
         "received_events_url" : "https://api.github.com/users/amitiuttarwar/received_events",
         "repos_url" : "https://api.github.com/users/amitiuttarwar/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/amitiuttarwar/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/amitiuttarwar/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/amitiuttarwar"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27511#discussion_r1278512493"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27511"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1278512493"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "```suggestion\r\n                                               {RPCResult::Type::NUM, \"tried\", \"number of addresses in the tried table, which represent peers with whom the node has successfully connected to in the past.\"},\r\n```\r\n\r\nif you take the previous suggestion, I'd update this too for consistency  ",
      "commit_id" : "69abfd3db103182bbe9e800dc1aef0114369cb37",
      "created_at" : "2023-07-30T05:52:25Z",
      "diff_hunk" : "@@ -967,6 +967,55 @@ static RPCHelpMan addpeeraddress()\n     };\n }\n \n+static RPCHelpMan getaddrmaninfo()\n+{\n+    return RPCHelpMan{\"getaddrmaninfo\",\n+                      \"\\nProvides high-level information about the node's address manager by returning the number of \"\n+                      \"addresses in the `new` and `tried` tables and their sum for all networks.\\n\"\n+                      \"This RPC is for testing only.\\n\",\n+                      {},\n+                      RPCResult{\n+                              RPCResult::Type::OBJ_DYN, \"\", \"json object with network type as keys\",\n+                              {\n+                                      {RPCResult::Type::OBJ, \"network\", \"the network (\" + Join(GetNetworkNames(), \", \") + \")\",\n+                                       {\n+                                               {RPCResult::Type::NUM, \"new\", \"number of addresses in new table. The new table contains addresses of potential new peers that are periodically tested for connectivity to increase the node's network reach.\"},\n+                                               {RPCResult::Type::NUM, \"tried\", \"number of addresses in tried table. The tried table contains addresses of peers with whom the node has successfully connected to in the past.\"},",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27511#discussion_r1278512493",
      "id" : 1278512493,
      "line" : 983,
      "node_id" : "PRRC_kwDOABII585MNI1t",
      "original_commit_id" : "6265bf90b7a168b551784bfaad427a649d6bfe70",
      "original_line" : 983,
      "original_position" : 17,
      "original_start_line" : null,
      "path" : "src/rpc/net.cpp",
      "position" : 17,
      "pull_request_review_id" : 1553581120,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27511",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1278512493/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-07-30T06:09:44Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1278512493",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1500952?v=4",
         "events_url" : "https://api.github.com/users/amitiuttarwar/events{/privacy}",
         "followers_url" : "https://api.github.com/users/amitiuttarwar/followers",
         "following_url" : "https://api.github.com/users/amitiuttarwar/following{/other_user}",
         "gists_url" : "https://api.github.com/users/amitiuttarwar/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/amitiuttarwar",
         "id" : 1500952,
         "login" : "amitiuttarwar",
         "node_id" : "MDQ6VXNlcjE1MDA5NTI=",
         "organizations_url" : "https://api.github.com/users/amitiuttarwar/orgs",
         "received_events_url" : "https://api.github.com/users/amitiuttarwar/received_events",
         "repos_url" : "https://api.github.com/users/amitiuttarwar/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/amitiuttarwar/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/amitiuttarwar/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/amitiuttarwar"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27511#discussion_r1278512805"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27511"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1278512805"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "could also check that the values for other networks are 0",
      "commit_id" : "69abfd3db103182bbe9e800dc1aef0114369cb37",
      "created_at" : "2023-07-30T05:56:17Z",
      "diff_hunk" : "@@ -328,6 +329,23 @@ def test_addpeeraddress(self):\n             addrs = node.getnodeaddresses(count=0)  # getnodeaddresses re-runs the addrman checks\n             assert_equal(len(addrs), 2)\n \n+    def test_getaddrmaninfo(self):\n+        self.log.info(\"Test getaddrmaninfo\")\n+        node = self.nodes[1]\n+\n+        self.log.debug(\"Test that getaddrmaninfo is a hidden RPC\")\n+        # It is hidden from general help, but its detailed help may be called directly.\n+        assert \"getaddrmaninfo\" not in node.help()\n+        assert \"getaddrmaninfo\" in node.help(\"getaddrmaninfo\")\n+\n+        # current count of ipv4 addresses in addrman is {'new':1, 'tried':1}\n+        res = node.getaddrmaninfo()\n+        assert_equal(res[\"ipv4\"][\"new\"], 1)\n+        assert_equal(res[\"ipv4\"][\"tried\"], 1)\n+        assert_equal(res[\"ipv4\"][\"total\"], 2)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27511#discussion_r1278512805",
      "id" : 1278512805,
      "line" : 345,
      "node_id" : "PRRC_kwDOABII585MNI6l",
      "original_commit_id" : "69abfd3db103182bbe9e800dc1aef0114369cb37",
      "original_line" : 345,
      "original_position" : 25,
      "original_start_line" : null,
      "path" : "test/functional/rpc_net.py",
      "position" : 25,
      "pull_request_review_id" : 1553581120,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27511",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1278512805/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-07-30T06:09:44Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1278512805",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1500952?v=4",
         "events_url" : "https://api.github.com/users/amitiuttarwar/events{/privacy}",
         "followers_url" : "https://api.github.com/users/amitiuttarwar/followers",
         "following_url" : "https://api.github.com/users/amitiuttarwar/following{/other_user}",
         "gists_url" : "https://api.github.com/users/amitiuttarwar/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/amitiuttarwar",
         "id" : 1500952,
         "login" : "amitiuttarwar",
         "node_id" : "MDQ6VXNlcjE1MDA5NTI=",
         "organizations_url" : "https://api.github.com/users/amitiuttarwar/orgs",
         "received_events_url" : "https://api.github.com/users/amitiuttarwar/received_events",
         "repos_url" : "https://api.github.com/users/amitiuttarwar/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/amitiuttarwar/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/amitiuttarwar/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/amitiuttarwar"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "tested ACK 69abfd3db1\r\n\r\nall my feedback is very optional, code looks fine as is. I saw the previous review comments & update around wording suggestions & don't think it's worth much churn just for that, but left my language thoughts just for consideration.\r\n\r\nagreed that it makes most sense to return just the totals here, and that generall the `IsTerrible` info is an internal implementation detail that would ideally not be exposed to the users.\r\n\r\nI considered the approach of the RPC endpoint exclusively returning results for networks that pass the `IsReachable` test, but it is possible for addrman to have addresses for currently unreachable networks based on previous configurations, so checking all networks seems better.\r\n\r\nthat said, a reasonable possibility would be to remove the results for networks where the total is 0. ",
      "created_at" : "2023-07-30T06:09:24Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27511#issuecomment-1657054147",
      "id" : 1657054147,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27511",
      "node_id" : "IC_kwDOABII585ixKPD",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1657054147/reactions"
      },
      "updated_at" : "2023-07-30T06:09:24Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1657054147",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1500952?v=4",
         "events_url" : "https://api.github.com/users/amitiuttarwar/events{/privacy}",
         "followers_url" : "https://api.github.com/users/amitiuttarwar/followers",
         "following_url" : "https://api.github.com/users/amitiuttarwar/following{/other_user}",
         "gists_url" : "https://api.github.com/users/amitiuttarwar/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/amitiuttarwar",
         "id" : 1500952,
         "login" : "amitiuttarwar",
         "node_id" : "MDQ6VXNlcjE1MDA5NTI=",
         "organizations_url" : "https://api.github.com/users/amitiuttarwar/orgs",
         "received_events_url" : "https://api.github.com/users/amitiuttarwar/received_events",
         "repos_url" : "https://api.github.com/users/amitiuttarwar/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/amitiuttarwar/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/amitiuttarwar/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/amitiuttarwar"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27511#discussion_r1278516272"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27511"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1278516272"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "reading the chatGPT suggestion, if you want more detail, I think it'd make more sense to use the part that says they are recently discovered but have not yet been successfully connected to.",
      "commit_id" : "69abfd3db103182bbe9e800dc1aef0114369cb37",
      "created_at" : "2023-07-30T06:11:59Z",
      "diff_hunk" : "@@ -967,6 +967,55 @@ static RPCHelpMan addpeeraddress()\n     };\n }\n \n+static RPCHelpMan getaddrmaninfo()\n+{\n+    return RPCHelpMan{\"getaddrmaninfo\",\n+                      \"\\nProvides high-level information about the node's address manager by returning the number of \"\n+                      \"addresses in the `new` and `tried` tables and their sum for all networks.\\n\"\n+                      \"This RPC is for testing only.\\n\",\n+                      {},\n+                      RPCResult{\n+                              RPCResult::Type::OBJ_DYN, \"\", \"json object with network type as keys\",\n+                              {\n+                                      {RPCResult::Type::OBJ, \"network\", \"the network (\" + Join(GetNetworkNames(), \", \") + \")\",\n+                                       {\n+                                               {RPCResult::Type::NUM, \"new\", \"number of addresses in new table. The new table contains addresses of potential new peers that are periodically tested for connectivity to increase the node's network reach.\"},",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27511#discussion_r1278516272",
      "id" : 1278516272,
      "in_reply_to_id" : 1278512304,
      "line" : 982,
      "node_id" : "PRRC_kwDOABII585MNJww",
      "original_commit_id" : "6265bf90b7a168b551784bfaad427a649d6bfe70",
      "original_line" : 982,
      "original_position" : 16,
      "original_start_line" : null,
      "path" : "src/rpc/net.cpp",
      "position" : 16,
      "pull_request_review_id" : 1553586578,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27511",
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1278516272/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-07-30T06:11:59Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1278516272",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1500952?v=4",
         "events_url" : "https://api.github.com/users/amitiuttarwar/events{/privacy}",
         "followers_url" : "https://api.github.com/users/amitiuttarwar/followers",
         "following_url" : "https://api.github.com/users/amitiuttarwar/following{/other_user}",
         "gists_url" : "https://api.github.com/users/amitiuttarwar/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/amitiuttarwar",
         "id" : 1500952,
         "login" : "amitiuttarwar",
         "node_id" : "MDQ6VXNlcjE1MDA5NTI=",
         "organizations_url" : "https://api.github.com/users/amitiuttarwar/orgs",
         "received_events_url" : "https://api.github.com/users/amitiuttarwar/received_events",
         "repos_url" : "https://api.github.com/users/amitiuttarwar/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/amitiuttarwar/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/amitiuttarwar/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/amitiuttarwar"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27511#discussion_r1279500464"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27511"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1279500464"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Maybe relevant here, I think it's easier to just avoid (explicitly) copy-pasting ChatGPT or similar output into the project, for now, see #28175.",
      "commit_id" : "69abfd3db103182bbe9e800dc1aef0114369cb37",
      "created_at" : "2023-07-31T15:40:06Z",
      "diff_hunk" : "@@ -967,6 +967,55 @@ static RPCHelpMan addpeeraddress()\n     };\n }\n \n+static RPCHelpMan getaddrmaninfo()\n+{\n+    return RPCHelpMan{\"getaddrmaninfo\",\n+                      \"\\nProvides high-level information about the node's address manager by returning the number of \"\n+                      \"addresses in the `new` and `tried` tables and their sum for all networks.\\n\"\n+                      \"This RPC is for testing only.\\n\",\n+                      {},\n+                      RPCResult{\n+                              RPCResult::Type::OBJ_DYN, \"\", \"json object with network type as keys\",\n+                              {\n+                                      {RPCResult::Type::OBJ, \"network\", \"the network (\" + Join(GetNetworkNames(), \", \") + \")\",\n+                                       {\n+                                               {RPCResult::Type::NUM, \"new\", \"number of addresses in new table. The new table contains addresses of potential new peers that are periodically tested for connectivity to increase the node's network reach.\"},",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27511#discussion_r1279500464",
      "id" : 1279500464,
      "in_reply_to_id" : 1278512304,
      "line" : 982,
      "node_id" : "PRRC_kwDOABII585MQ6Cw",
      "original_commit_id" : "6265bf90b7a168b551784bfaad427a649d6bfe70",
      "original_line" : 982,
      "original_position" : 16,
      "original_start_line" : null,
      "path" : "src/rpc/net.cpp",
      "position" : 16,
      "pull_request_review_id" : 1555110728,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27511",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1279500464/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-07-31T15:40:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1279500464",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/863730?v=4",
         "events_url" : "https://api.github.com/users/fanquake/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fanquake/followers",
         "following_url" : "https://api.github.com/users/fanquake/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fanquake/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fanquake",
         "id" : 863730,
         "login" : "fanquake",
         "node_id" : "MDQ6VXNlcjg2MzczMA==",
         "organizations_url" : "https://api.github.com/users/fanquake/orgs",
         "received_events_url" : "https://api.github.com/users/fanquake/received_events",
         "repos_url" : "https://api.github.com/users/fanquake/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fanquake/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fanquake"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27511#discussion_r1290864136"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27511"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1290864136"
         }
      },
      "author_association" : "NONE",
      "body" : "Thanks all",
      "commit_id" : "e4f9b4097e8fd2e3aeb9bf0683cd0d9c1199319d",
      "created_at" : "2023-08-11T03:40:13Z",
      "diff_hunk" : "@@ -328,6 +329,19 @@ def test_addpeeraddress(self):\n             addrs = node.getnodeaddresses(count=0)  # getnodeaddresses re-runs the addrman checks\n             assert_equal(len(addrs), 2)\n \n+    def test_getaddrmaninfo(self):\n+        self.log.info(\"Test getaddrmaninfo\")\n+        node = self.nodes[1]\n+\n+        self.log.debug(\"Test that getaddrmaninfo is a hidden RPC\")\n+        # It is hidden from general help, but its detailed help may be called directly.\n+        assert \"getaddrmaninfo\" not in node.help()\n+        assert \"getaddrmaninfo\" in node.help(\"getaddrmaninfo\")\n+\n+        # current count of ipv4 addresses in addrman is {'new':1, 'tried':1}\n+        res = node.getaddrmaninfo()\n+        assert_equal(res[\"ipv4\"][\"new\"], 1)\n+        assert_equal(res[\"ipv4\"][\"tried\"], 1)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27511#discussion_r1290864136",
      "id" : 1290864136,
      "in_reply_to_id" : 1181081666,
      "line" : 376,
      "node_id" : "PRRC_kwDOABII585M8QYI",
      "original_commit_id" : "c505611f08a850acb97dea9cc03b36aa468929ca",
      "original_line" : 376,
      "original_position" : 24,
      "original_start_line" : null,
      "path" : "test/functional/rpc_net.py",
      "position" : 24,
      "pull_request_review_id" : 1572963009,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27511",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1290864136/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-08-11T10:31:01Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1290864136",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/108148678?v=4",
         "events_url" : "https://api.github.com/users/Jones098/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Jones098/followers",
         "following_url" : "https://api.github.com/users/Jones098/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Jones098/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Jones098",
         "id" : 108148678,
         "login" : "Jones098",
         "node_id" : "U_kgDOBnI3xg",
         "organizations_url" : "https://api.github.com/users/Jones098/orgs",
         "received_events_url" : "https://api.github.com/users/Jones098/received_events",
         "repos_url" : "https://api.github.com/users/Jones098/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Jones098/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Jones098/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Jones098"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27511#discussion_r1290884007"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27511"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1290884007"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "done. added some more detail to the part about new table.\r\n",
      "commit_id" : "e4f9b4097e8fd2e3aeb9bf0683cd0d9c1199319d",
      "created_at" : "2023-08-11T04:33:56Z",
      "diff_hunk" : "@@ -967,6 +967,55 @@ static RPCHelpMan addpeeraddress()\n     };\n }\n \n+static RPCHelpMan getaddrmaninfo()\n+{\n+    return RPCHelpMan{\"getaddrmaninfo\",\n+                      \"\\nProvides high-level information about the node's address manager by returning the number of \"\n+                      \"addresses in the `new` and `tried` tables and their sum for all networks.\\n\"\n+                      \"This RPC is for testing only.\\n\",\n+                      {},\n+                      RPCResult{\n+                              RPCResult::Type::OBJ_DYN, \"\", \"json object with network type as keys\",\n+                              {\n+                                      {RPCResult::Type::OBJ, \"network\", \"the network (\" + Join(GetNetworkNames(), \", \") + \")\",\n+                                       {\n+                                               {RPCResult::Type::NUM, \"new\", \"number of addresses in new table. The new table contains addresses of potential new peers that are periodically tested for connectivity to increase the node's network reach.\"},",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27511#discussion_r1290884007",
      "id" : 1290884007,
      "in_reply_to_id" : 1278512304,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585M8VOn",
      "original_commit_id" : "6265bf90b7a168b551784bfaad427a649d6bfe70",
      "original_line" : 982,
      "original_position" : 16,
      "original_start_line" : null,
      "path" : "src/rpc/net.cpp",
      "position" : null,
      "pull_request_review_id" : 1572986997,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27511",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1290884007/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-08-11T04:33:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1290884007",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/44024636?v=4",
         "events_url" : "https://api.github.com/users/stratospher/events{/privacy}",
         "followers_url" : "https://api.github.com/users/stratospher/followers",
         "following_url" : "https://api.github.com/users/stratospher/following{/other_user}",
         "gists_url" : "https://api.github.com/users/stratospher/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/stratospher",
         "id" : 44024636,
         "login" : "stratospher",
         "node_id" : "MDQ6VXNlcjQ0MDI0NjM2",
         "organizations_url" : "https://api.github.com/users/stratospher/orgs",
         "received_events_url" : "https://api.github.com/users/stratospher/received_events",
         "repos_url" : "https://api.github.com/users/stratospher/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/stratospher/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/stratospher/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/stratospher"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27511#discussion_r1290884028"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27511"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1290884028"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "done",
      "commit_id" : "e4f9b4097e8fd2e3aeb9bf0683cd0d9c1199319d",
      "created_at" : "2023-08-11T04:34:01Z",
      "diff_hunk" : "@@ -967,6 +967,55 @@ static RPCHelpMan addpeeraddress()\n     };\n }\n \n+static RPCHelpMan getaddrmaninfo()\n+{\n+    return RPCHelpMan{\"getaddrmaninfo\",\n+                      \"\\nProvides high-level information about the node's address manager by returning the number of \"\n+                      \"addresses in the `new` and `tried` tables and their sum for all networks.\\n\"\n+                      \"This RPC is for testing only.\\n\",\n+                      {},\n+                      RPCResult{\n+                              RPCResult::Type::OBJ_DYN, \"\", \"json object with network type as keys\",\n+                              {\n+                                      {RPCResult::Type::OBJ, \"network\", \"the network (\" + Join(GetNetworkNames(), \", \") + \")\",\n+                                       {\n+                                               {RPCResult::Type::NUM, \"new\", \"number of addresses in new table. The new table contains addresses of potential new peers that are periodically tested for connectivity to increase the node's network reach.\"},\n+                                               {RPCResult::Type::NUM, \"tried\", \"number of addresses in tried table. The tried table contains addresses of peers with whom the node has successfully connected to in the past.\"},\n+                                               {RPCResult::Type::NUM, \"total\", \"total number of addresses in both new/tried tables from a network\"},",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27511#discussion_r1290884028",
      "id" : 1290884028,
      "in_reply_to_id" : 1278512102,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585M8VO8",
      "original_commit_id" : "6265bf90b7a168b551784bfaad427a649d6bfe70",
      "original_line" : 984,
      "original_position" : 18,
      "original_start_line" : null,
      "path" : "src/rpc/net.cpp",
      "position" : null,
      "pull_request_review_id" : 1572987031,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27511",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1290884028/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-08-11T04:34:01Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1290884028",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/44024636?v=4",
         "events_url" : "https://api.github.com/users/stratospher/events{/privacy}",
         "followers_url" : "https://api.github.com/users/stratospher/followers",
         "following_url" : "https://api.github.com/users/stratospher/following{/other_user}",
         "gists_url" : "https://api.github.com/users/stratospher/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/stratospher",
         "id" : 44024636,
         "login" : "stratospher",
         "node_id" : "MDQ6VXNlcjQ0MDI0NjM2",
         "organizations_url" : "https://api.github.com/users/stratospher/orgs",
         "received_events_url" : "https://api.github.com/users/stratospher/received_events",
         "repos_url" : "https://api.github.com/users/stratospher/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/stratospher/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/stratospher/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/stratospher"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27511#discussion_r1290884145"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27511"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1290884145"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "done",
      "commit_id" : "e4f9b4097e8fd2e3aeb9bf0683cd0d9c1199319d",
      "created_at" : "2023-08-11T04:34:20Z",
      "diff_hunk" : "@@ -967,6 +967,55 @@ static RPCHelpMan addpeeraddress()\n     };\n }\n \n+static RPCHelpMan getaddrmaninfo()\n+{\n+    return RPCHelpMan{\"getaddrmaninfo\",\n+                      \"\\nProvides high-level information about the node's address manager by returning the number of \"\n+                      \"addresses in the `new` and `tried` tables and their sum for all networks.\\n\"\n+                      \"This RPC is for testing only.\\n\",\n+                      {},\n+                      RPCResult{\n+                              RPCResult::Type::OBJ_DYN, \"\", \"json object with network type as keys\",\n+                              {\n+                                      {RPCResult::Type::OBJ, \"network\", \"the network (\" + Join(GetNetworkNames(), \", \") + \")\",\n+                                       {\n+                                               {RPCResult::Type::NUM, \"new\", \"number of addresses in new table. The new table contains addresses of potential new peers that are periodically tested for connectivity to increase the node's network reach.\"},\n+                                               {RPCResult::Type::NUM, \"tried\", \"number of addresses in tried table. The tried table contains addresses of peers with whom the node has successfully connected to in the past.\"},",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27511#discussion_r1290884145",
      "id" : 1290884145,
      "in_reply_to_id" : 1278512493,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585M8VQx",
      "original_commit_id" : "6265bf90b7a168b551784bfaad427a649d6bfe70",
      "original_line" : 983,
      "original_position" : 17,
      "original_start_line" : null,
      "path" : "src/rpc/net.cpp",
      "position" : null,
      "pull_request_review_id" : 1572987210,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27511",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1290884145/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-08-11T04:34:20Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1290884145",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/44024636?v=4",
         "events_url" : "https://api.github.com/users/stratospher/events{/privacy}",
         "followers_url" : "https://api.github.com/users/stratospher/followers",
         "following_url" : "https://api.github.com/users/stratospher/following{/other_user}",
         "gists_url" : "https://api.github.com/users/stratospher/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/stratospher",
         "id" : 44024636,
         "login" : "stratospher",
         "node_id" : "MDQ6VXNlcjQ0MDI0NjM2",
         "organizations_url" : "https://api.github.com/users/stratospher/orgs",
         "received_events_url" : "https://api.github.com/users/stratospher/received_events",
         "repos_url" : "https://api.github.com/users/stratospher/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/stratospher/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/stratospher/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/stratospher"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27511#discussion_r1290884179"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27511"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1290884179"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "done",
      "commit_id" : "e4f9b4097e8fd2e3aeb9bf0683cd0d9c1199319d",
      "created_at" : "2023-08-11T04:34:25Z",
      "diff_hunk" : "@@ -328,6 +329,23 @@ def test_addpeeraddress(self):\n             addrs = node.getnodeaddresses(count=0)  # getnodeaddresses re-runs the addrman checks\n             assert_equal(len(addrs), 2)\n \n+    def test_getaddrmaninfo(self):\n+        self.log.info(\"Test getaddrmaninfo\")\n+        node = self.nodes[1]\n+\n+        self.log.debug(\"Test that getaddrmaninfo is a hidden RPC\")\n+        # It is hidden from general help, but its detailed help may be called directly.\n+        assert \"getaddrmaninfo\" not in node.help()\n+        assert \"getaddrmaninfo\" in node.help(\"getaddrmaninfo\")\n+\n+        # current count of ipv4 addresses in addrman is {'new':1, 'tried':1}\n+        res = node.getaddrmaninfo()\n+        assert_equal(res[\"ipv4\"][\"new\"], 1)\n+        assert_equal(res[\"ipv4\"][\"tried\"], 1)\n+        assert_equal(res[\"ipv4\"][\"total\"], 2)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27511#discussion_r1290884179",
      "id" : 1290884179,
      "in_reply_to_id" : 1278512805,
      "line" : 377,
      "node_id" : "PRRC_kwDOABII585M8VRT",
      "original_commit_id" : "69abfd3db103182bbe9e800dc1aef0114369cb37",
      "original_line" : 377,
      "original_position" : 25,
      "original_start_line" : null,
      "path" : "test/functional/rpc_net.py",
      "position" : 25,
      "pull_request_review_id" : 1572987266,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27511",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1290884179/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-08-11T04:34:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1290884179",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/44024636?v=4",
         "events_url" : "https://api.github.com/users/stratospher/events{/privacy}",
         "followers_url" : "https://api.github.com/users/stratospher/followers",
         "following_url" : "https://api.github.com/users/stratospher/following{/other_user}",
         "gists_url" : "https://api.github.com/users/stratospher/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/stratospher",
         "id" : 44024636,
         "login" : "stratospher",
         "node_id" : "MDQ6VXNlcjQ0MDI0NjM2",
         "organizations_url" : "https://api.github.com/users/stratospher/orgs",
         "received_events_url" : "https://api.github.com/users/stratospher/received_events",
         "repos_url" : "https://api.github.com/users/stratospher/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/stratospher/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/stratospher/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/stratospher"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "thanks @amitiuttarwar! addressed https://github.com/bitcoin/bitcoin/pull/27511#issuecomment-1657054147 to have better documentation for new/tried table. `getaddrmaninfo`'s help looks like this now:\r\n\r\n```\r\ngetaddrmaninfo\r\n\r\nProvides information about the node's address manager by returning the number of addresses in the `new` and `tried` tables and their sum for all networks.\r\nThis RPC is for testing only.\r\n\r\nResult:\r\n{                   (json object) json object with network type as keys\r\n  \"network\" : {     (json object) the network (ipv4, ipv6, onion, i2p, cjdns)\r\n    \"new\" : n,      (numeric) number of addresses in the new table, which represent potential peers the node discovers but hasn't yet successfully connected to.\r\n    \"tried\" : n,    (numeric) number of addresses in the tried table, which represent peers with whom the node has successfully connected to in the past.\r\n    \"total\" : n     (numeric) total number of addresses in both new/tried tables\r\n  },\r\n  ...\r\n}\r\n\r\nExamples:\r\n> bitcoin-cli getaddrmaninfo \r\n> curl --user myusername --data-binary '{\"jsonrpc\": \"1.0\", \"id\": \"curltest\", \"method\": \"getaddrmaninfo\", \"params\": []}' -H 'content-type: text/plain;' http://127.0.0.1:8332/\r\n```\r\n\r\n> that said, a reasonable possibility would be to remove the results for networks where the total is 0.\r\n\r\ni think i'll keep it as it is for now since removing it wouldn't make much of a difference as it's just 5 networks + 1 total.\r\n\r\nthere was also a discussion in https://github.com/bitcoin/bitcoin/pull/26988#issuecomment-1674171648 (which reworks a CLI using this RPC) whether to keep this RPC hidden/public. it was kept as a hidden RPC because:\r\n1. a normal user wouldn't be interested in the new/tried table breakdown of addresses.\r\n2. `-generate` CLI currently [uses](https://github.com/bitcoin/bitcoin/blob/467fa8943801911c233cb96d45282b1de10bfa90/src/bitcoin-cli.cpp#L1178) a [hidden RPC](https://github.com/bitcoin/bitcoin/blob/467fa8943801911c233cb96d45282b1de10bfa90/src/rpc/mining.cpp#L1055) (generatetoaddress) too.\r\n\r\nIf ever sufficient people end up being interested in the CLI rework and also feel that we'd need the RPC to be public in the CLI (despite being used by super users mostly), we could make it public in the CLI rework PR (#26982).\r\n\r\nSo yeah, i feel it's better to keep this RPC hidden for now since this info will mostly be useful to only super users. Would like to know what others think.",
      "created_at" : "2023-08-11T04:57:57Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27511#issuecomment-1674212552",
      "id" : 1674212552,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27511",
      "node_id" : "IC_kwDOABII585jynTI",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1674212552/reactions"
      },
      "updated_at" : "2023-08-11T04:57:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1674212552",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/44024636?v=4",
         "events_url" : "https://api.github.com/users/stratospher/events{/privacy}",
         "followers_url" : "https://api.github.com/users/stratospher/followers",
         "following_url" : "https://api.github.com/users/stratospher/following{/other_user}",
         "gists_url" : "https://api.github.com/users/stratospher/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/stratospher",
         "id" : 44024636,
         "login" : "stratospher",
         "node_id" : "MDQ6VXNlcjQ0MDI0NjM2",
         "organizations_url" : "https://api.github.com/users/stratospher/orgs",
         "received_events_url" : "https://api.github.com/users/stratospher/received_events",
         "repos_url" : "https://api.github.com/users/stratospher/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/stratospher/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/stratospher/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/stratospher"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "ACK 6d7fd9fb9b38be75b2bce643a99cc584837a902b\r\n\r\nkeeping it as a hidden RPC makes sense to me ",
      "created_at" : "2023-08-16T04:16:44Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27511#issuecomment-1679933308",
      "id" : 1679933308,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27511",
      "node_id" : "IC_kwDOABII585kIb98",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 1,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1679933308/reactions"
      },
      "updated_at" : "2023-08-16T04:17:24Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1679933308",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1500952?v=4",
         "events_url" : "https://api.github.com/users/amitiuttarwar/events{/privacy}",
         "followers_url" : "https://api.github.com/users/amitiuttarwar/followers",
         "following_url" : "https://api.github.com/users/amitiuttarwar/following{/other_user}",
         "gists_url" : "https://api.github.com/users/amitiuttarwar/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/amitiuttarwar",
         "id" : 1500952,
         "login" : "amitiuttarwar",
         "node_id" : "MDQ6VXNlcjE1MDA5NTI=",
         "organizations_url" : "https://api.github.com/users/amitiuttarwar/orgs",
         "received_events_url" : "https://api.github.com/users/amitiuttarwar/received_events",
         "repos_url" : "https://api.github.com/users/amitiuttarwar/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/amitiuttarwar/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/amitiuttarwar/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/amitiuttarwar"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27511#discussion_r1300631869"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27511"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1300631869"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "grammar nit: would drop \"with whom\"",
      "commit_id" : "e4f9b4097e8fd2e3aeb9bf0683cd0d9c1199319d",
      "created_at" : "2023-08-21T20:50:27Z",
      "diff_hunk" : "@@ -967,6 +967,55 @@ static RPCHelpMan addpeeraddress()\n     };\n }\n \n+static RPCHelpMan getaddrmaninfo()\n+{\n+    return RPCHelpMan{\"getaddrmaninfo\",\n+                      \"\\nProvides information about the node's address manager by returning the number of \"\n+                      \"addresses in the `new` and `tried` tables and their sum for all networks.\\n\"\n+                      \"This RPC is for testing only.\\n\",\n+                      {},\n+                      RPCResult{\n+                              RPCResult::Type::OBJ_DYN, \"\", \"json object with network type as keys\",\n+                              {\n+                                      {RPCResult::Type::OBJ, \"network\", \"the network (\" + Join(GetNetworkNames(), \", \") + \")\",\n+                                       {\n+                                               {RPCResult::Type::NUM, \"new\", \"number of addresses in the new table, which represent potential peers the node has discovered but hasn't yet successfully connected to.\"},\n+                                               {RPCResult::Type::NUM, \"tried\", \"number of addresses in the tried table, which represent peers with whom the node has successfully connected to in the past.\"},",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27511#discussion_r1300631869",
      "id" : 1300631869,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585NhhE9",
      "original_commit_id" : "a903f2529e5e64b8633f744741b10b63a6fe069c",
      "original_line" : 983,
      "original_position" : 17,
      "original_start_line" : null,
      "path" : "src/rpc/net.cpp",
      "position" : null,
      "pull_request_review_id" : 1587856427,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27511",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1300631869/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-08-21T20:53:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1300631869",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/48763452?v=4",
         "events_url" : "https://api.github.com/users/mzumsande/events{/privacy}",
         "followers_url" : "https://api.github.com/users/mzumsande/followers",
         "following_url" : "https://api.github.com/users/mzumsande/following{/other_user}",
         "gists_url" : "https://api.github.com/users/mzumsande/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/mzumsande",
         "id" : 48763452,
         "login" : "mzumsande",
         "node_id" : "MDQ6VXNlcjQ4NzYzNDUy",
         "organizations_url" : "https://api.github.com/users/mzumsande/orgs",
         "received_events_url" : "https://api.github.com/users/mzumsande/received_events",
         "repos_url" : "https://api.github.com/users/mzumsande/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/mzumsande/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/mzumsande/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/mzumsande"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27511#discussion_r1300947708"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27511"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1300947708"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "done",
      "commit_id" : "e4f9b4097e8fd2e3aeb9bf0683cd0d9c1199319d",
      "created_at" : "2023-08-22T05:26:27Z",
      "diff_hunk" : "@@ -967,6 +967,55 @@ static RPCHelpMan addpeeraddress()\n     };\n }\n \n+static RPCHelpMan getaddrmaninfo()\n+{\n+    return RPCHelpMan{\"getaddrmaninfo\",\n+                      \"\\nProvides information about the node's address manager by returning the number of \"\n+                      \"addresses in the `new` and `tried` tables and their sum for all networks.\\n\"\n+                      \"This RPC is for testing only.\\n\",\n+                      {},\n+                      RPCResult{\n+                              RPCResult::Type::OBJ_DYN, \"\", \"json object with network type as keys\",\n+                              {\n+                                      {RPCResult::Type::OBJ, \"network\", \"the network (\" + Join(GetNetworkNames(), \", \") + \")\",\n+                                       {\n+                                               {RPCResult::Type::NUM, \"new\", \"number of addresses in the new table, which represent potential peers the node has discovered but hasn't yet successfully connected to.\"},\n+                                               {RPCResult::Type::NUM, \"tried\", \"number of addresses in the tried table, which represent peers with whom the node has successfully connected to in the past.\"},",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27511#discussion_r1300947708",
      "id" : 1300947708,
      "in_reply_to_id" : 1300631869,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585NiuL8",
      "original_commit_id" : "a903f2529e5e64b8633f744741b10b63a6fe069c",
      "original_line" : 983,
      "original_position" : 17,
      "original_start_line" : null,
      "path" : "src/rpc/net.cpp",
      "position" : null,
      "pull_request_review_id" : 1588343278,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27511",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1300947708/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-08-22T05:26:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1300947708",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/44024636?v=4",
         "events_url" : "https://api.github.com/users/stratospher/events{/privacy}",
         "followers_url" : "https://api.github.com/users/stratospher/followers",
         "following_url" : "https://api.github.com/users/stratospher/following{/other_user}",
         "gists_url" : "https://api.github.com/users/stratospher/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/stratospher",
         "id" : 44024636,
         "login" : "stratospher",
         "node_id" : "MDQ6VXNlcjQ0MDI0NjM2",
         "organizations_url" : "https://api.github.com/users/stratospher/orgs",
         "received_events_url" : "https://api.github.com/users/stratospher/received_events",
         "repos_url" : "https://api.github.com/users/stratospher/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/stratospher/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/stratospher/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/stratospher"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "ACK [3803efb](https://github.com/bitcoin/bitcoin/commit/3803efb6f6336d50ba0a8367b6f3fc8c66f60664), only change was to improve the RPC doc.",
      "created_at" : "2023-08-22T14:30:33Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27511#issuecomment-1688303574",
      "id" : 1688303574,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27511",
      "node_id" : "IC_kwDOABII585koXfW",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1688303574/reactions"
      },
      "updated_at" : "2023-08-22T14:30:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1688303574",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/48763452?v=4",
         "events_url" : "https://api.github.com/users/mzumsande/events{/privacy}",
         "followers_url" : "https://api.github.com/users/mzumsande/followers",
         "following_url" : "https://api.github.com/users/mzumsande/following{/other_user}",
         "gists_url" : "https://api.github.com/users/mzumsande/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/mzumsande",
         "id" : 48763452,
         "login" : "mzumsande",
         "node_id" : "MDQ6VXNlcjQ4NzYzNDUy",
         "organizations_url" : "https://api.github.com/users/mzumsande/orgs",
         "received_events_url" : "https://api.github.com/users/mzumsande/received_events",
         "repos_url" : "https://api.github.com/users/mzumsande/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/mzumsande/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/mzumsande/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/mzumsande"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->\nð This pull request conflicts with the target branch and [needs rebase](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#rebasing-changes).\n",
      "created_at" : "2023-08-24T23:02:39Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27511#issuecomment-1692522603",
      "id" : 1692522603,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27511",
      "node_id" : "IC_kwDOABII585k4dhr",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1692522603/reactions"
      },
      "updated_at" : "2023-08-24T23:02:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1692522603",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "ACK e4f9b4097e8fd2e3aeb9bf0683cd0d9c1199319d (only rebase)",
      "created_at" : "2023-08-31T21:48:24Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27511#issuecomment-1701828528",
      "id" : 1701828528,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27511",
      "node_id" : "IC_kwDOABII585lb9ew",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1701828528/reactions"
      },
      "updated_at" : "2023-08-31T21:48:24Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1701828528",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/48763452?v=4",
         "events_url" : "https://api.github.com/users/mzumsande/events{/privacy}",
         "followers_url" : "https://api.github.com/users/mzumsande/followers",
         "following_url" : "https://api.github.com/users/mzumsande/following{/other_user}",
         "gists_url" : "https://api.github.com/users/mzumsande/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/mzumsande",
         "id" : 48763452,
         "login" : "mzumsande",
         "node_id" : "MDQ6VXNlcjQ4NzYzNDUy",
         "organizations_url" : "https://api.github.com/users/mzumsande/orgs",
         "received_events_url" : "https://api.github.com/users/mzumsande/received_events",
         "repos_url" : "https://api.github.com/users/mzumsande/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/mzumsande/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/mzumsande/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/mzumsande"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "ACK e4f9b4097e8fd2e3aeb9bf0683cd0d9c1199319d (rebase + small wording update) ",
      "created_at" : "2023-09-01T19:04:57Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27511#issuecomment-1703205592",
      "id" : 1703205592,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27511",
      "node_id" : "IC_kwDOABII585lhNrY",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 1,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1703205592/reactions"
      },
      "updated_at" : "2023-09-01T19:04:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1703205592",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1500952?v=4",
         "events_url" : "https://api.github.com/users/amitiuttarwar/events{/privacy}",
         "followers_url" : "https://api.github.com/users/amitiuttarwar/followers",
         "following_url" : "https://api.github.com/users/amitiuttarwar/following{/other_user}",
         "gists_url" : "https://api.github.com/users/amitiuttarwar/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/amitiuttarwar",
         "id" : 1500952,
         "login" : "amitiuttarwar",
         "node_id" : "MDQ6VXNlcjE1MDA5NTI=",
         "organizations_url" : "https://api.github.com/users/amitiuttarwar/orgs",
         "received_events_url" : "https://api.github.com/users/amitiuttarwar/received_events",
         "repos_url" : "https://api.github.com/users/amitiuttarwar/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/amitiuttarwar/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/amitiuttarwar/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/amitiuttarwar"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27511#discussion_r1328910486"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27511"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1328910486"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "I think having spaces in JSON keys could cause problems for some software. Why not use `all_networks` (or `sum`, `all`, ...).\r\n\r\n```suggestion\r\n                          ret.pushKV(\"all_networks\", obj);\r\n```",
      "commit_id" : "e4f9b4097e8fd2e3aeb9bf0683cd0d9c1199319d",
      "created_at" : "2023-09-18T15:31:18Z",
      "diff_hunk" : "@@ -1016,6 +1016,55 @@ static RPCHelpMan sendmsgtopeer()\n     };\n }\n \n+static RPCHelpMan getaddrmaninfo()\n+{\n+    return RPCHelpMan{\"getaddrmaninfo\",\n+                      \"\\nProvides information about the node's address manager by returning the number of \"\n+                      \"addresses in the `new` and `tried` tables and their sum for all networks.\\n\"\n+                      \"This RPC is for testing only.\\n\",\n+                      {},\n+                      RPCResult{\n+                              RPCResult::Type::OBJ_DYN, \"\", \"json object with network type as keys\",\n+                              {\n+                                      {RPCResult::Type::OBJ, \"network\", \"the network (\" + Join(GetNetworkNames(), \", \") + \")\",\n+                                       {\n+                                               {RPCResult::Type::NUM, \"new\", \"number of addresses in the new table, which represent potential peers the node has discovered but hasn't yet successfully connected to.\"},\n+                                               {RPCResult::Type::NUM, \"tried\", \"number of addresses in the tried table, which represent peers the node has successfully connected to in the past.\"},\n+                                               {RPCResult::Type::NUM, \"total\", \"total number of addresses in both new/tried tables\"},\n+                                       }},\n+                              }\n+                      },\n+                      RPCExamples{\n+                              HelpExampleCli(\"getaddrmaninfo\", \"\")\n+                              + HelpExampleRpc(\"getaddrmaninfo\", \"\")\n+                      },\n+                      [&](const RPCHelpMan& self, const JSONRPCRequest& request) -> UniValue\n+                      {\n+                          NodeContext& node = EnsureAnyNodeContext(request.context);\n+                          if (!node.addrman) {\n+                              throw JSONRPCError(RPC_CLIENT_P2P_DISABLED, \"Error: Address manager functionality missing or disabled\");\n+                          }\n+\n+                          UniValue ret(UniValue::VOBJ);\n+                          for (int n = 0; n < NET_MAX; ++n) {\n+                              enum Network network = static_cast<enum Network>(n);\n+                              if (network == NET_UNROUTABLE || network == NET_INTERNAL) continue;\n+                              UniValue obj(UniValue::VOBJ);\n+                              obj.pushKV(\"new\", node.addrman->Size(network, true));\n+                              obj.pushKV(\"tried\", node.addrman->Size(network, false));\n+                              obj.pushKV(\"total\", node.addrman->Size(network));\n+                              ret.pushKV(GetNetworkName(network), obj);\n+                          }\n+                          UniValue obj(UniValue::VOBJ);\n+                          obj.pushKV(\"new\", node.addrman->Size(std::nullopt, true));\n+                          obj.pushKV(\"tried\", node.addrman->Size(std::nullopt, false));\n+                          obj.pushKV(\"total\", node.addrman->Size());\n+                          ret.pushKV(\"all networks\", obj);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27511#discussion_r1328910486",
      "id" : 1328910486,
      "line" : 1062,
      "node_id" : "PRRC_kwDOABII585PNZCW",
      "original_commit_id" : "e4f9b4097e8fd2e3aeb9bf0683cd0d9c1199319d",
      "original_line" : 1062,
      "original_position" : 47,
      "original_start_line" : null,
      "path" : "src/rpc/net.cpp",
      "position" : 47,
      "pull_request_review_id" : 1631361582,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27511",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1328910486/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-09-18T15:33:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1328910486",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/19157360?v=4",
         "events_url" : "https://api.github.com/users/0xB10C/events{/privacy}",
         "followers_url" : "https://api.github.com/users/0xB10C/followers",
         "following_url" : "https://api.github.com/users/0xB10C/following{/other_user}",
         "gists_url" : "https://api.github.com/users/0xB10C/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/0xB10C",
         "id" : 19157360,
         "login" : "0xB10C",
         "node_id" : "MDQ6VXNlcjE5MTU3MzYw",
         "organizations_url" : "https://api.github.com/users/0xB10C/orgs",
         "received_events_url" : "https://api.github.com/users/0xB10C/received_events",
         "repos_url" : "https://api.github.com/users/0xB10C/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/0xB10C/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/0xB10C/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/0xB10C"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "It came up in a discussion that a follow-up to this PR could add a list of addresses (with source, time added, bucket, position, network, ...) to this RPC with a `verbose` flag.",
      "created_at" : "2023-09-18T15:42:30Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27511#issuecomment-1723764352",
      "id" : 1723764352,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27511",
      "node_id" : "IC_kwDOABII585mvo6A",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1723764352/reactions"
      },
      "updated_at" : "2023-09-18T15:42:30Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1723764352",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/19157360?v=4",
         "events_url" : "https://api.github.com/users/0xB10C/events{/privacy}",
         "followers_url" : "https://api.github.com/users/0xB10C/followers",
         "following_url" : "https://api.github.com/users/0xB10C/following{/other_user}",
         "gists_url" : "https://api.github.com/users/0xB10C/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/0xB10C",
         "id" : 19157360,
         "login" : "0xB10C",
         "node_id" : "MDQ6VXNlcjE5MTU3MzYw",
         "organizations_url" : "https://api.github.com/users/0xB10C/orgs",
         "received_events_url" : "https://api.github.com/users/0xB10C/received_events",
         "repos_url" : "https://api.github.com/users/0xB10C/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/0xB10C/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/0xB10C/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/0xB10C"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27511#discussion_r1328988195"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27511"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1328988195"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "nit: if you re-touch could add a debug log line what part of the new functionality we are testing as on L368",
      "commit_id" : "e4f9b4097e8fd2e3aeb9bf0683cd0d9c1199319d",
      "created_at" : "2023-09-18T16:30:57Z",
      "diff_hunk" : "@@ -360,6 +361,27 @@ def test_sendmsgtopeer(self):\n         node.sendmsgtopeer(peer_id=0, msg_type=\"addr\", msg=zero_byte_string.hex())\n         self.wait_until(lambda: len(self.nodes[0].getpeerinfo()) == 0, timeout=10)\n \n+    def test_getaddrmaninfo(self):\n+        self.log.info(\"Test getaddrmaninfo\")\n+        node = self.nodes[1]\n+\n+        self.log.debug(\"Test that getaddrmaninfo is a hidden RPC\")\n+        # It is hidden from general help, but its detailed help may be called directly.\n+        assert \"getaddrmaninfo\" not in node.help()\n+        assert \"getaddrmaninfo\" in node.help(\"getaddrmaninfo\")\n+\n+        # current count of ipv4 addresses in addrman is {'new':1, 'tried':1}",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27511#discussion_r1328988195",
      "id" : 1328988195,
      "line" : 373,
      "node_id" : "PRRC_kwDOABII585PNsAj",
      "original_commit_id" : "e4f9b4097e8fd2e3aeb9bf0683cd0d9c1199319d",
      "original_line" : 373,
      "original_position" : 21,
      "original_start_line" : null,
      "path" : "test/functional/rpc_net.py",
      "position" : 21,
      "pull_request_review_id" : 1631498446,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27511",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1328988195/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-09-18T16:37:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1328988195",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6606587?v=4",
         "events_url" : "https://api.github.com/users/willcl-ark/events{/privacy}",
         "followers_url" : "https://api.github.com/users/willcl-ark/followers",
         "following_url" : "https://api.github.com/users/willcl-ark/following{/other_user}",
         "gists_url" : "https://api.github.com/users/willcl-ark/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/willcl-ark",
         "id" : 6606587,
         "login" : "willcl-ark",
         "node_id" : "MDQ6VXNlcjY2MDY1ODc=",
         "organizations_url" : "https://api.github.com/users/willcl-ark/orgs",
         "received_events_url" : "https://api.github.com/users/willcl-ark/received_events",
         "repos_url" : "https://api.github.com/users/willcl-ark/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/willcl-ark/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/willcl-ark/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/willcl-ark"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27511#discussion_r1329948850"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27511"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1329948850"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "```suggestion\r\n        assert_equal(res[\"all_networks\"][\"new\"], 1)\r\n```",
      "commit_id" : "0bff92a3b34fea764efdfc474e4d69bb7da0882e",
      "created_at" : "2023-09-19T11:08:31Z",
      "diff_hunk" : "@@ -360,6 +361,28 @@ def test_sendmsgtopeer(self):\n         node.sendmsgtopeer(peer_id=0, msg_type=\"addr\", msg=zero_byte_string.hex())\n         self.wait_until(lambda: len(self.nodes[0].getpeerinfo()) == 0, timeout=10)\n \n+    def test_getaddrmaninfo(self):\n+        self.log.info(\"Test getaddrmaninfo\")\n+        node = self.nodes[1]\n+\n+        self.log.debug(\"Test that getaddrmaninfo is a hidden RPC\")\n+        # It is hidden from general help, but its detailed help may be called directly.\n+        assert \"getaddrmaninfo\" not in node.help()\n+        assert \"getaddrmaninfo\" in node.help(\"getaddrmaninfo\")\n+\n+        # current count of ipv4 addresses in addrman is {'new':1, 'tried':1}\n+        self.log.info(\"Test that count of addresses in addrman match expected values\")\n+        res = node.getaddrmaninfo()\n+        assert_equal(res[\"ipv4\"][\"new\"], 1)\n+        assert_equal(res[\"ipv4\"][\"tried\"], 1)\n+        assert_equal(res[\"ipv4\"][\"total\"], 2)\n+        assert_equal(res[\"all networks\"][\"new\"], 1)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27511#discussion_r1329948850",
      "id" : 1329948850,
      "line" : 379,
      "node_id" : "PRRC_kwDOABII585PRWiy",
      "original_commit_id" : "0bff92a3b34fea764efdfc474e4d69bb7da0882e",
      "original_line" : 379,
      "original_position" : 27,
      "original_start_line" : null,
      "path" : "test/functional/rpc_net.py",
      "position" : 27,
      "pull_request_review_id" : 1632996492,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27511",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1329948850/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-09-19T11:08:32Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1329948850",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/19480819?v=4",
         "events_url" : "https://api.github.com/users/brunoerg/events{/privacy}",
         "followers_url" : "https://api.github.com/users/brunoerg/followers",
         "following_url" : "https://api.github.com/users/brunoerg/following{/other_user}",
         "gists_url" : "https://api.github.com/users/brunoerg/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/brunoerg",
         "id" : 19480819,
         "login" : "brunoerg",
         "node_id" : "MDQ6VXNlcjE5NDgwODE5",
         "organizations_url" : "https://api.github.com/users/brunoerg/orgs",
         "received_events_url" : "https://api.github.com/users/brunoerg/received_events",
         "repos_url" : "https://api.github.com/users/brunoerg/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/brunoerg/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/brunoerg/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/brunoerg"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "ACK 28bac81a346c0b68273fa73af924f7096cb3f41d",
      "created_at" : "2023-09-19T23:10:49Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27511#issuecomment-1726665190",
      "id" : 1726665190,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27511",
      "node_id" : "IC_kwDOABII585m6tHm",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1726665190/reactions"
      },
      "updated_at" : "2023-09-19T23:10:49Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1726665190",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/19157360?v=4",
         "events_url" : "https://api.github.com/users/0xB10C/events{/privacy}",
         "followers_url" : "https://api.github.com/users/0xB10C/followers",
         "following_url" : "https://api.github.com/users/0xB10C/following{/other_user}",
         "gists_url" : "https://api.github.com/users/0xB10C/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/0xB10C",
         "id" : 19157360,
         "login" : "0xB10C",
         "node_id" : "MDQ6VXNlcjE5MTU3MzYw",
         "organizations_url" : "https://api.github.com/users/0xB10C/orgs",
         "received_events_url" : "https://api.github.com/users/0xB10C/received_events",
         "repos_url" : "https://api.github.com/users/0xB10C/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/0xB10C/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/0xB10C/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/0xB10C"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27511#discussion_r1330816303"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27511"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1330816303"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "true! done.",
      "commit_id" : "28bac81a346c0b68273fa73af924f7096cb3f41d",
      "created_at" : "2023-09-20T00:03:40Z",
      "diff_hunk" : "@@ -1016,6 +1016,55 @@ static RPCHelpMan sendmsgtopeer()\n     };\n }\n \n+static RPCHelpMan getaddrmaninfo()\n+{\n+    return RPCHelpMan{\"getaddrmaninfo\",\n+                      \"\\nProvides information about the node's address manager by returning the number of \"\n+                      \"addresses in the `new` and `tried` tables and their sum for all networks.\\n\"\n+                      \"This RPC is for testing only.\\n\",\n+                      {},\n+                      RPCResult{\n+                              RPCResult::Type::OBJ_DYN, \"\", \"json object with network type as keys\",\n+                              {\n+                                      {RPCResult::Type::OBJ, \"network\", \"the network (\" + Join(GetNetworkNames(), \", \") + \")\",\n+                                       {\n+                                               {RPCResult::Type::NUM, \"new\", \"number of addresses in the new table, which represent potential peers the node has discovered but hasn't yet successfully connected to.\"},\n+                                               {RPCResult::Type::NUM, \"tried\", \"number of addresses in the tried table, which represent peers the node has successfully connected to in the past.\"},\n+                                               {RPCResult::Type::NUM, \"total\", \"total number of addresses in both new/tried tables\"},\n+                                       }},\n+                              }\n+                      },\n+                      RPCExamples{\n+                              HelpExampleCli(\"getaddrmaninfo\", \"\")\n+                              + HelpExampleRpc(\"getaddrmaninfo\", \"\")\n+                      },\n+                      [&](const RPCHelpMan& self, const JSONRPCRequest& request) -> UniValue\n+                      {\n+                          NodeContext& node = EnsureAnyNodeContext(request.context);\n+                          if (!node.addrman) {\n+                              throw JSONRPCError(RPC_CLIENT_P2P_DISABLED, \"Error: Address manager functionality missing or disabled\");\n+                          }\n+\n+                          UniValue ret(UniValue::VOBJ);\n+                          for (int n = 0; n < NET_MAX; ++n) {\n+                              enum Network network = static_cast<enum Network>(n);\n+                              if (network == NET_UNROUTABLE || network == NET_INTERNAL) continue;\n+                              UniValue obj(UniValue::VOBJ);\n+                              obj.pushKV(\"new\", node.addrman->Size(network, true));\n+                              obj.pushKV(\"tried\", node.addrman->Size(network, false));\n+                              obj.pushKV(\"total\", node.addrman->Size(network));\n+                              ret.pushKV(GetNetworkName(network), obj);\n+                          }\n+                          UniValue obj(UniValue::VOBJ);\n+                          obj.pushKV(\"new\", node.addrman->Size(std::nullopt, true));\n+                          obj.pushKV(\"tried\", node.addrman->Size(std::nullopt, false));\n+                          obj.pushKV(\"total\", node.addrman->Size());\n+                          ret.pushKV(\"all networks\", obj);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27511#discussion_r1330816303",
      "id" : 1330816303,
      "in_reply_to_id" : 1328910486,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585PUqUv",
      "original_commit_id" : "e4f9b4097e8fd2e3aeb9bf0683cd0d9c1199319d",
      "original_line" : 1062,
      "original_position" : 47,
      "original_start_line" : null,
      "path" : "src/rpc/net.cpp",
      "position" : null,
      "pull_request_review_id" : 1634361141,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27511",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1330816303/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-09-20T00:03:41Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1330816303",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/44024636?v=4",
         "events_url" : "https://api.github.com/users/stratospher/events{/privacy}",
         "followers_url" : "https://api.github.com/users/stratospher/followers",
         "following_url" : "https://api.github.com/users/stratospher/following{/other_user}",
         "gists_url" : "https://api.github.com/users/stratospher/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/stratospher",
         "id" : 44024636,
         "login" : "stratospher",
         "node_id" : "MDQ6VXNlcjQ0MDI0NjM2",
         "organizations_url" : "https://api.github.com/users/stratospher/orgs",
         "received_events_url" : "https://api.github.com/users/stratospher/received_events",
         "repos_url" : "https://api.github.com/users/stratospher/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/stratospher/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/stratospher/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/stratospher"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27511#discussion_r1330816399"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27511"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1330816399"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "done.",
      "commit_id" : "28bac81a346c0b68273fa73af924f7096cb3f41d",
      "created_at" : "2023-09-20T00:03:53Z",
      "diff_hunk" : "@@ -360,6 +361,27 @@ def test_sendmsgtopeer(self):\n         node.sendmsgtopeer(peer_id=0, msg_type=\"addr\", msg=zero_byte_string.hex())\n         self.wait_until(lambda: len(self.nodes[0].getpeerinfo()) == 0, timeout=10)\n \n+    def test_getaddrmaninfo(self):\n+        self.log.info(\"Test getaddrmaninfo\")\n+        node = self.nodes[1]\n+\n+        self.log.debug(\"Test that getaddrmaninfo is a hidden RPC\")\n+        # It is hidden from general help, but its detailed help may be called directly.\n+        assert \"getaddrmaninfo\" not in node.help()\n+        assert \"getaddrmaninfo\" in node.help(\"getaddrmaninfo\")\n+\n+        # current count of ipv4 addresses in addrman is {'new':1, 'tried':1}",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27511#discussion_r1330816399",
      "id" : 1330816399,
      "in_reply_to_id" : 1328988195,
      "line" : 373,
      "node_id" : "PRRC_kwDOABII585PUqWP",
      "original_commit_id" : "e4f9b4097e8fd2e3aeb9bf0683cd0d9c1199319d",
      "original_line" : 373,
      "original_position" : 21,
      "original_start_line" : null,
      "path" : "test/functional/rpc_net.py",
      "position" : 21,
      "pull_request_review_id" : 1634361288,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27511",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1330816399/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-09-20T00:03:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1330816399",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/44024636?v=4",
         "events_url" : "https://api.github.com/users/stratospher/events{/privacy}",
         "followers_url" : "https://api.github.com/users/stratospher/followers",
         "following_url" : "https://api.github.com/users/stratospher/following{/other_user}",
         "gists_url" : "https://api.github.com/users/stratospher/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/stratospher",
         "id" : 44024636,
         "login" : "stratospher",
         "node_id" : "MDQ6VXNlcjQ0MDI0NjM2",
         "organizations_url" : "https://api.github.com/users/stratospher/orgs",
         "received_events_url" : "https://api.github.com/users/stratospher/received_events",
         "repos_url" : "https://api.github.com/users/stratospher/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/stratospher/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/stratospher/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/stratospher"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27511#discussion_r1330816551"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27511"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1330816551"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "done.",
      "commit_id" : "28bac81a346c0b68273fa73af924f7096cb3f41d",
      "created_at" : "2023-09-20T00:04:07Z",
      "diff_hunk" : "@@ -360,6 +361,28 @@ def test_sendmsgtopeer(self):\n         node.sendmsgtopeer(peer_id=0, msg_type=\"addr\", msg=zero_byte_string.hex())\n         self.wait_until(lambda: len(self.nodes[0].getpeerinfo()) == 0, timeout=10)\n \n+    def test_getaddrmaninfo(self):\n+        self.log.info(\"Test getaddrmaninfo\")\n+        node = self.nodes[1]\n+\n+        self.log.debug(\"Test that getaddrmaninfo is a hidden RPC\")\n+        # It is hidden from general help, but its detailed help may be called directly.\n+        assert \"getaddrmaninfo\" not in node.help()\n+        assert \"getaddrmaninfo\" in node.help(\"getaddrmaninfo\")\n+\n+        # current count of ipv4 addresses in addrman is {'new':1, 'tried':1}\n+        self.log.info(\"Test that count of addresses in addrman match expected values\")\n+        res = node.getaddrmaninfo()\n+        assert_equal(res[\"ipv4\"][\"new\"], 1)\n+        assert_equal(res[\"ipv4\"][\"tried\"], 1)\n+        assert_equal(res[\"ipv4\"][\"total\"], 2)\n+        assert_equal(res[\"all networks\"][\"new\"], 1)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27511#discussion_r1330816551",
      "id" : 1330816551,
      "in_reply_to_id" : 1329948850,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585PUqYn",
      "original_commit_id" : "0bff92a3b34fea764efdfc474e4d69bb7da0882e",
      "original_line" : 379,
      "original_position" : 27,
      "original_start_line" : null,
      "path" : "test/functional/rpc_net.py",
      "position" : null,
      "pull_request_review_id" : 1634361450,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27511",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1330816551/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-09-20T00:04:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1330816551",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/44024636?v=4",
         "events_url" : "https://api.github.com/users/stratospher/events{/privacy}",
         "followers_url" : "https://api.github.com/users/stratospher/followers",
         "following_url" : "https://api.github.com/users/stratospher/following{/other_user}",
         "gists_url" : "https://api.github.com/users/stratospher/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/stratospher",
         "id" : 44024636,
         "login" : "stratospher",
         "node_id" : "MDQ6VXNlcjQ0MDI0NjM2",
         "organizations_url" : "https://api.github.com/users/stratospher/orgs",
         "received_events_url" : "https://api.github.com/users/stratospher/received_events",
         "repos_url" : "https://api.github.com/users/stratospher/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/stratospher/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/stratospher/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/stratospher"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27511#discussion_r1331501491"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27511"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1331501491"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "nit: to deduplicate code, could introduce a helper function `EnsureAddrman` in rpc/server_util.cpp (similar to the already existing `EnsureConnman` and `EnsurePeerman`) and use that here and in the `addpeeraddress` RPC.",
      "commit_id" : "28bac81a346c0b68273fa73af924f7096cb3f41d",
      "created_at" : "2023-09-20T11:40:02Z",
      "diff_hunk" : "@@ -1016,6 +1016,55 @@ static RPCHelpMan sendmsgtopeer()\n     };\n }\n \n+static RPCHelpMan getaddrmaninfo()\n+{\n+    return RPCHelpMan{\"getaddrmaninfo\",\n+                      \"\\nProvides information about the node's address manager by returning the number of \"\n+                      \"addresses in the `new` and `tried` tables and their sum for all networks.\\n\"\n+                      \"This RPC is for testing only.\\n\",\n+                      {},\n+                      RPCResult{\n+                              RPCResult::Type::OBJ_DYN, \"\", \"json object with network type as keys\",\n+                              {\n+                                      {RPCResult::Type::OBJ, \"network\", \"the network (\" + Join(GetNetworkNames(), \", \") + \")\",\n+                                       {\n+                                               {RPCResult::Type::NUM, \"new\", \"number of addresses in the new table, which represent potential peers the node has discovered but hasn't yet successfully connected to.\"},\n+                                               {RPCResult::Type::NUM, \"tried\", \"number of addresses in the tried table, which represent peers the node has successfully connected to in the past.\"},\n+                                               {RPCResult::Type::NUM, \"total\", \"total number of addresses in both new/tried tables\"},\n+                                       }},\n+                              }\n+                      },\n+                      RPCExamples{\n+                              HelpExampleCli(\"getaddrmaninfo\", \"\")\n+                              + HelpExampleRpc(\"getaddrmaninfo\", \"\")\n+                      },\n+                      [&](const RPCHelpMan& self, const JSONRPCRequest& request) -> UniValue\n+                      {\n+                          NodeContext& node = EnsureAnyNodeContext(request.context);\n+                          if (!node.addrman) {\n+                              throw JSONRPCError(RPC_CLIENT_P2P_DISABLED, \"Error: Address manager functionality missing or disabled\");\n+                          }",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27511#discussion_r1331501491",
      "id" : 1331501491,
      "line" : 1046,
      "node_id" : "PRRC_kwDOABII585PXRmz",
      "original_commit_id" : "c8eb8dae51039aa1938e7040001a149210e87275",
      "original_line" : 1046,
      "original_position" : 31,
      "original_start_line" : 1044,
      "path" : "src/rpc/net.cpp",
      "position" : 31,
      "pull_request_review_id" : 1635433655,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27511",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1331501491/reactions"
      },
      "side" : "RIGHT",
      "start_line" : 1044,
      "start_side" : "RIGHT",
      "subject_type" : "line",
      "updated_at" : "2023-09-20T11:44:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1331501491",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/91535?v=4",
         "events_url" : "https://api.github.com/users/theStack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/theStack/followers",
         "following_url" : "https://api.github.com/users/theStack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/theStack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/theStack",
         "id" : 91535,
         "login" : "theStack",
         "node_id" : "MDQ6VXNlcjkxNTM1",
         "organizations_url" : "https://api.github.com/users/theStack/orgs",
         "received_events_url" : "https://api.github.com/users/theStack/received_events",
         "repos_url" : "https://api.github.com/users/theStack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/theStack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/theStack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/theStack"
      }
   }
]
