[
   {
      "author_association" : "MEMBER",
      "body" : "Hard to guess without logs (which would tell us why transactions failed). How much time elapsed between saving the mempool.dat and loading it? Mempool transactions that had confirmed during that time would be marked as \"failed.\"\r\n\r\nAnd to clarify, are you restarting with the same config? What are mempoolexpiry and maxmempool now? (Is it possible you have less space or expired old transactions?)\r\n\r\n> Not sure if the problem was writing the txs into mempool.dat or reading them.\r\n\r\nMust be loading given the \"X failed\" log line.\r\n\r\n> v24.0.0\r\n\r\nMaybe try upgrading to a newer version?",
      "created_at" : "2024-01-06T10:32:06Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/29193#issuecomment-1879631591",
      "id" : 1879631591,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/29193",
      "node_id" : "IC_kwDOABII585wCObn",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1879631591/reactions"
      },
      "updated_at" : "2024-01-06T10:32:06Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1879631591",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/25183001?v=4",
         "events_url" : "https://api.github.com/users/glozow/events{/privacy}",
         "followers_url" : "https://api.github.com/users/glozow/followers",
         "following_url" : "https://api.github.com/users/glozow/following{/other_user}",
         "gists_url" : "https://api.github.com/users/glozow/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/glozow",
         "id" : 25183001,
         "login" : "glozow",
         "node_id" : "MDQ6VXNlcjI1MTgzMDAx",
         "organizations_url" : "https://api.github.com/users/glozow/orgs",
         "received_events_url" : "https://api.github.com/users/glozow/received_events",
         "repos_url" : "https://api.github.com/users/glozow/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/glozow/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/glozow/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/glozow"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "> How much time elapsed between saving the mempool.dat and loading it?\r\n\r\nOnly a few minutes.\r\n\r\n> And to clarify, are you restarting with the same config? What are mempoolexpiry and maxmempool now?\r\n\r\nI restarted with the same config. Checked I have enough disk space.\r\n\r\n> Must be loading given the \"X failed\" log line.\r\n\r\nYes, I see.\r\n\r\n> Maybe try upgrading to a newer version?\r\n\r\nI can't test it anyway, I'm trying to contact people with a \"full mempool\", And asking them to restart the node and see what happens.",
      "created_at" : "2024-01-06T10:46:54Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/29193#issuecomment-1879634958",
      "id" : 1879634958,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/29193",
      "node_id" : "IC_kwDOABII585wCPQO",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1879634958/reactions"
      },
      "updated_at" : "2024-01-06T10:48:12Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1879634958",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/93706552?v=4",
         "events_url" : "https://api.github.com/users/dev7ba/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dev7ba/followers",
         "following_url" : "https://api.github.com/users/dev7ba/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dev7ba/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dev7ba",
         "id" : 93706552,
         "login" : "dev7ba",
         "node_id" : "U_kgDOBZXZOA",
         "organizations_url" : "https://api.github.com/users/dev7ba/orgs",
         "received_events_url" : "https://api.github.com/users/dev7ba/received_events",
         "repos_url" : "https://api.github.com/users/dev7ba/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dev7ba/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dev7ba/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dev7ba"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "I can confirm a similar issue in a node running Bitcoin Core 25.1, as detailed below:\r\n\r\nConfig options:\r\n- maxmempool=2000\r\n- mempoolexpiry=720\r\n- mempoolfullrbf=1\r\n\r\nPrior to the node's restart, the mempool size was approximately 1.14 GB, which filled up over roughly 26 hours of uptime since the last node restart.\r\n\r\nAfter initiating the shutdown, the node restarted immediately. According to the logs, the mempool was dumped (\"Dumped mempool: 1.0479s to copy, 10.5051s to dump\"). However, there are no subsequent details indicating that the mempool data was reloaded post-restart. \r\n\r\nThree minutes following the restart, the mempool size was merely 1MB. Ten minutes later, it increased to 18MB and continued to grow gradually, accumulating unconfirmed transactions. After one hour of uptime, the mempool size reached 110MB, with approximately 18,000 pending transactions. \r\n\r\nHow did you obtain Bitcoin Core\r\nPre-built binaries: (https://bitcoincore.org/bin/bitcoin-core-25.1/bitcoin-25.1-x86_64-linux-gnu.tar.gz)\r\n\r\nWhat version of Bitcoin Core are you using?\r\nv25.1\r\n\r\nOperating system and version\r\nDebian GNU/Linux 12 (bookworm)\r\n\r\nMachine specifications\r\nSynology NAS (node running in Docker)\r\n\r\ndebug.log (for the one hour starting with the node shutdown) - showing only lines with string 'Shutdown|mempool|Bitcoin Core version v':\r\n\r\n2024-01-11T08:55:47Z Shutdown: In progress...\r\n2024-01-11T08:55:57Z Dumped mempool: 0.643629s to copy, 8.92166s to dump\r\n2024-01-11T08:56:11Z Shutdown: done\r\n\r\n>>> RESTART\r\n\r\n2024-01-11T08:56:21Z Bitcoin Core version v25.1.0 (release build)\r\n2024-01-11T08:56:21Z Config file arg: maxmempool=\"2000\"\r\n2024-01-11T08:56:21Z Config file arg: mempoolexpiry=\"720\"\r\n2024-01-11T08:56:21Z Config file arg: mempoolfullrbf=\"1\"\r\n2024-01-11T08:56:23Z * Using 335.0 MiB for in-memory UTXO set (plus up to 1907.3 MiB of unused mempool space)",
      "created_at" : "2024-01-11T10:14:01Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/29193#issuecomment-1886783736",
      "id" : 1886783736,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/29193",
      "node_id" : "IC_kwDOABII585wdgj4",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1886783736/reactions"
      },
      "updated_at" : "2024-01-11T12:07:55Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1886783736",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/19352599?v=4",
         "events_url" : "https://api.github.com/users/deyw-bit/events{/privacy}",
         "followers_url" : "https://api.github.com/users/deyw-bit/followers",
         "following_url" : "https://api.github.com/users/deyw-bit/following{/other_user}",
         "gists_url" : "https://api.github.com/users/deyw-bit/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/deyw-bit",
         "id" : 19352599,
         "login" : "deyw-bit",
         "node_id" : "MDQ6VXNlcjE5MzUyNTk5",
         "organizations_url" : "https://api.github.com/users/deyw-bit/orgs",
         "received_events_url" : "https://api.github.com/users/deyw-bit/received_events",
         "repos_url" : "https://api.github.com/users/deyw-bit/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/deyw-bit/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/deyw-bit/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/deyw-bit"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> Ten minutes later, it increased to 18MB and continued to grow gradually\r\n\r\nLoading the mempool takes time after a startup. You can monitor whether it is complete over the getmempoolinfo RPC (`loaded` field). Once it is loaded, the loading result will be printed to the debug log.\r\n\r\n",
      "created_at" : "2024-01-11T10:20:18Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/29193#issuecomment-1886796183",
      "id" : 1886796183,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/29193",
      "node_id" : "IC_kwDOABII585wdjmX",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1886796183/reactions"
      },
      "updated_at" : "2024-01-11T10:20:18Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1886796183",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/maflcko/events{/privacy}",
         "followers_url" : "https://api.github.com/users/maflcko/followers",
         "following_url" : "https://api.github.com/users/maflcko/following{/other_user}",
         "gists_url" : "https://api.github.com/users/maflcko/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/maflcko",
         "id" : 6399679,
         "login" : "maflcko",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/maflcko/orgs",
         "received_events_url" : "https://api.github.com/users/maflcko/received_events",
         "repos_url" : "https://api.github.com/users/maflcko/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/maflcko/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/maflcko/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/maflcko"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "Okay, will keep monitoring it, right now (90 minutes after restart), bitcoin-cli getmempoolinfo returns \"loaded\": false",
      "created_at" : "2024-01-11T10:25:49Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/29193#issuecomment-1886805643",
      "id" : 1886805643,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/29193",
      "node_id" : "IC_kwDOABII585wdl6L",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1886805643/reactions"
      },
      "updated_at" : "2024-01-11T10:25:49Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1886805643",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/19352599?v=4",
         "events_url" : "https://api.github.com/users/deyw-bit/events{/privacy}",
         "followers_url" : "https://api.github.com/users/deyw-bit/followers",
         "following_url" : "https://api.github.com/users/deyw-bit/following{/other_user}",
         "gists_url" : "https://api.github.com/users/deyw-bit/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/deyw-bit",
         "id" : 19352599,
         "login" : "deyw-bit",
         "node_id" : "MDQ6VXNlcjE5MzUyNTk5",
         "organizations_url" : "https://api.github.com/users/deyw-bit/orgs",
         "received_events_url" : "https://api.github.com/users/deyw-bit/received_events",
         "repos_url" : "https://api.github.com/users/deyw-bit/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/deyw-bit/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/deyw-bit/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/deyw-bit"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "In retrospect, I believe what happened is that upon noticing the mempool wasn't loading, I gracefully shut down the node, causing mempool.dat to be overwritten with the limited contents of the mempool. \r\nIt might also be advisable not to overwrite the old mempool.dat if it hasn't finished loading completely.",
      "created_at" : "2024-01-11T12:37:09Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/29193#issuecomment-1887073369",
      "id" : 1887073369,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/29193",
      "node_id" : "IC_kwDOABII585wenRZ",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1887073369/reactions"
      },
      "updated_at" : "2024-01-11T12:37:09Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1887073369",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/93706552?v=4",
         "events_url" : "https://api.github.com/users/dev7ba/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dev7ba/followers",
         "following_url" : "https://api.github.com/users/dev7ba/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dev7ba/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dev7ba",
         "id" : 93706552,
         "login" : "dev7ba",
         "node_id" : "U_kgDOBZXZOA",
         "organizations_url" : "https://api.github.com/users/dev7ba/orgs",
         "received_events_url" : "https://api.github.com/users/dev7ba/received_events",
         "repos_url" : "https://api.github.com/users/dev7ba/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dev7ba/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dev7ba/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dev7ba"
      }
   }
]
