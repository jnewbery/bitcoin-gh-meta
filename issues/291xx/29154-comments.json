[
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage\nFor detailed information about the code coverage, see the [test coverage report](https://corecheck.dev/bitcoin/bitcoin/pulls/29154).\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\nA summary of reviews will appear here.\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#22341](https://github.com/bitcoin/bitcoin/pull/22341) (rpc: add path to gethdkey by Sjors)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.\n",
      "created_at" : "2023-12-29T21:00:45Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29154#issuecomment-1872335424",
      "id" : 1872335424,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/29154",
      "node_id" : "IC_kwDOABII585vmZJA",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1872335424/reactions"
      },
      "updated_at" : "2023-12-29T21:49:01Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1872335424",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29154#discussion_r1563833792"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29154"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1563833792"
         }
      },
      "author_association" : "NONE",
      "body" : "+1 for getting rid of the `/1/*` hardcodings!",
      "commit_id" : "8a2021c0f4f40f6f8a37dd5619ecfa3f38084679",
      "created_at" : "2024-04-13T07:30:36Z",
      "diff_hunk" : "@@ -47,19 +48,13 @@ def _check_psbt(psbt, to, value, multisig):\n                 amount += vout[\"value\"]\n         assert_approx(amount, float(value), vspan=0.001)\n \n-    def participants_create_multisigs(self, xpubs):\n+    def participants_create_multisigs(self, external_xpubs, internal_xpubs):\n         \"\"\"The multisig is created by importing the following descriptors. The resulting wallet is watch-only and every participant can do this.\"\"\"\n-        # some simple validation\n-        assert_equal(len(xpubs), self.N)\n-        # a sanity-check/assertion, this will throw if the base58 checksum of any of the provided xpubs are invalid\n-        for xpub in xpubs:\n-            base58_to_byte(xpub)\n-\n         for i, node in enumerate(self.nodes):\n             node.createwallet(wallet_name=f\"{self.name}_{i}\", blank=True, descriptors=True, disable_private_keys=True)\n             multisig = node.get_wallet_rpc(f\"{self.name}_{i}\")\n-            external = multisig.getdescriptorinfo(f\"wsh(sortedmulti({self.M},{f'/0/*,'.join(xpubs)}/0/*))\")\n-            internal = multisig.getdescriptorinfo(f\"wsh(sortedmulti({self.M},{f'/1/*,'.join(xpubs)}/1/*))\")\n+            external = multisig.getdescriptorinfo(f\"wsh(sortedmulti({self.M},{f','.join(external_xpubs)}))\")\n+            internal = multisig.getdescriptorinfo(f\"wsh(sortedmulti({self.M},{f','.join(internal_xpubs)}))\")",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29154#discussion_r1563833792",
      "id" : 1563833792,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585dNjXA",
      "original_commit_id" : "80ad8690e25c1ecab2ab1ff282882d5a6745f496",
      "original_line" : 57,
      "original_position" : 43,
      "original_start_line" : 61,
      "path" : "test/functional/wallet_multisig_descriptor_psbt.py",
      "position" : null,
      "pull_request_review_id" : 1999178739,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29154",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1563833792/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : "LEFT",
      "subject_type" : "line",
      "updated_at" : "2024-04-13T07:34:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1563833792",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5960750?v=4",
         "events_url" : "https://api.github.com/users/rkrux/events{/privacy}",
         "followers_url" : "https://api.github.com/users/rkrux/followers",
         "following_url" : "https://api.github.com/users/rkrux/following{/other_user}",
         "gists_url" : "https://api.github.com/users/rkrux/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/rkrux",
         "id" : 5960750,
         "login" : "rkrux",
         "node_id" : "MDQ6VXNlcjU5NjA3NTA=",
         "organizations_url" : "https://api.github.com/users/rkrux/orgs",
         "received_events_url" : "https://api.github.com/users/rkrux/received_events",
         "repos_url" : "https://api.github.com/users/rkrux/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/rkrux/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/rkrux/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/rkrux"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29154#discussion_r1563835474"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29154"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1563835474"
         }
      },
      "author_association" : "NONE",
      "body" : "`m` could be different in each test run because it uses `random.sample` as I found out while debugging this tst.. For thoroughness, would it be more robust to cover all the orderings instead? In this case it's going to be 2 only because `self.M = 2`.",
      "commit_id" : "8a2021c0f4f40f6f8a37dd5619ecfa3f38084679",
      "created_at" : "2024-04-13T07:33:08Z",
      "diff_hunk" : "@@ -139,12 +143,12 @@ def run_test(self):\n \n         self.log.info(\"Send another transaction from the multisig, this time with a daisy chained signing flow (one after another in series)!\")\n         psbt = participants[\"multisigs\"][0].walletcreatefundedpsbt(inputs=[], outputs={to: value}, feeRate=0.00010)\n-        for m in range(self.M):\n+        for i, m in enumerate(random.sample(range(self.M), self.M)):",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29154#discussion_r1563835474",
      "id" : 1563835474,
      "line" : 146,
      "node_id" : "PRRC_kwDOABII585dNjxS",
      "original_commit_id" : "8a2021c0f4f40f6f8a37dd5619ecfa3f38084679",
      "original_line" : 146,
      "original_position" : 36,
      "original_start_line" : null,
      "path" : "test/functional/wallet_multisig_descriptor_psbt.py",
      "position" : 36,
      "pull_request_review_id" : 1999178739,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29154",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1563835474/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-04-13T07:34:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1563835474",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5960750?v=4",
         "events_url" : "https://api.github.com/users/rkrux/events{/privacy}",
         "followers_url" : "https://api.github.com/users/rkrux/followers",
         "following_url" : "https://api.github.com/users/rkrux/following{/other_user}",
         "gists_url" : "https://api.github.com/users/rkrux/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/rkrux",
         "id" : 5960750,
         "login" : "rkrux",
         "node_id" : "MDQ6VXNlcjU5NjA3NTA=",
         "organizations_url" : "https://api.github.com/users/rkrux/orgs",
         "received_events_url" : "https://api.github.com/users/rkrux/received_events",
         "repos_url" : "https://api.github.com/users/rkrux/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/rkrux/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/rkrux/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/rkrux"
      }
   }
]
