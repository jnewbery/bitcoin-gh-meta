{
   "active_lock_reason" : null,
   "assignee" : null,
   "assignees" : [],
   "author_association" : "NONE",
   "body" : "**Is your feature request related to a problem? Please describe.**\r\n\r\nSize of the serialized UTXO set\r\n\r\n**Describe the solution you'd like**\r\n\r\nThe serialization format of the serialized UTXO set from `dumptxoutset` is a list of `(COutPoint, Coin)`.\r\n\r\nHowever, many out points refer to the same transaction so we can group by `Txid` with:\r\n`list(Txid, list((vout,Coin))`\r\n\r\nSince the cursor is already iterating through sorted `Txid` this doesn't add complexity to the serialization code.\r\n\r\nConsidering the UTXO at height 745995:\r\n```\r\nserialized_size: ~5.3Gb\r\ntotal_elements: 83_082_178\r\nuniques_txids: 49_517_483\r\nbytes_lost: total_elements // due to the additional byte for the length of the inner list\r\nbytes_savings: (total_elements-unique_txids)*32 - bytes_lost ~= 1Gb\r\n```\r\n\r\n**Describe alternatives you've considered**\r\n\r\nAdditional bytes could be saved by leveraging the duplications in scripts (address reuse). However, this is not considered worthy because the format would lose the streaming property and also because we don't want to optimize on something which is not recommended.\r\n\r\nThe byte lost for expressing the length of the inner list could be optimized with a special byte containing both the length of the list and the first vout, since usually both vout and this value are very small they should fit on a single byte most of the time having a fallback for edge cases.\r\n\r\n**Additional context**\r\n\r\nTagging @jamesob author of https://github.com/bitcoin/bitcoin/pull/16899\r\nassumeutxo summary https://github.com/bitcoin/bitcoin/pull/15606\r\n",
   "closed_at" : "2024-05-23T16:31:33Z",
   "closed_by" : {
      "avatar_url" : "https://avatars.githubusercontent.com/u/3782274?v=4",
      "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
      "followers_url" : "https://api.github.com/users/achow101/followers",
      "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
      "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
      "gravatar_id" : "",
      "html_url" : "https://github.com/achow101",
      "id" : 3782274,
      "login" : "achow101",
      "node_id" : "MDQ6VXNlcjM3ODIyNzQ=",
      "organizations_url" : "https://api.github.com/users/achow101/orgs",
      "received_events_url" : "https://api.github.com/users/achow101/received_events",
      "repos_url" : "https://api.github.com/users/achow101/repos",
      "site_admin" : false,
      "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
      "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
      "type" : "User",
      "url" : "https://api.github.com/users/achow101"
   },
   "comments" : 2,
   "comments_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25675/comments",
   "created_at" : "2022-07-22T11:43:39Z",
   "events_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25675/events",
   "html_url" : "https://github.com/bitcoin/bitcoin/issues/25675",
   "id" : 1314901929,
   "labels" : [
      {
         "color" : "7cf575",
         "default" : false,
         "description" : null,
         "id" : 64583,
         "name" : "Feature",
         "node_id" : "MDU6TGFiZWw2NDU4Mw==",
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/labels/Feature"
      }
   ],
   "labels_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25675/labels{/name}",
   "locked" : false,
   "milestone" : null,
   "node_id" : "I_kwDOABII585OX8-p",
   "number" : 25675,
   "performed_via_github_app" : null,
   "reactions" : {
      "+1" : 5,
      "-1" : 0,
      "confused" : 0,
      "eyes" : 0,
      "heart" : 0,
      "hooray" : 0,
      "laugh" : 0,
      "rocket" : 0,
      "total_count" : 5,
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25675/reactions"
   },
   "repository_url" : "https://api.github.com/repos/bitcoin/bitcoin",
   "state" : "closed",
   "state_reason" : "completed",
   "timeline_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25675/timeline",
   "title" : "Possible savings in `dumptxoutset` serialization format (~20%)",
   "updated_at" : "2024-05-23T16:31:33Z",
   "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25675",
   "user" : {
      "avatar_url" : "https://avatars.githubusercontent.com/u/6470319?v=4",
      "events_url" : "https://api.github.com/users/RCasatta/events{/privacy}",
      "followers_url" : "https://api.github.com/users/RCasatta/followers",
      "following_url" : "https://api.github.com/users/RCasatta/following{/other_user}",
      "gists_url" : "https://api.github.com/users/RCasatta/gists{/gist_id}",
      "gravatar_id" : "",
      "html_url" : "https://github.com/RCasatta",
      "id" : 6470319,
      "login" : "RCasatta",
      "node_id" : "MDQ6VXNlcjY0NzAzMTk=",
      "organizations_url" : "https://api.github.com/users/RCasatta/orgs",
      "received_events_url" : "https://api.github.com/users/RCasatta/received_events",
      "repos_url" : "https://api.github.com/users/RCasatta/repos",
      "site_admin" : false,
      "starred_url" : "https://api.github.com/users/RCasatta/starred{/owner}{/repo}",
      "subscriptions_url" : "https://api.github.com/users/RCasatta/subscriptions",
      "type" : "User",
      "url" : "https://api.github.com/users/RCasatta"
   }
}
