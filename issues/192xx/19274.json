{
   "active_lock_reason" : null,
   "assignee" : null,
   "assignees" : [],
   "author_association" : "NONE",
   "body" : "<!-- Describe the issue -->\r\nI recently had a corrupt bitcoin database.  I've been trying to re-index the blockchain as I have a full node and the entire blockchain downloaded to my volume.\r\n\r\nI'm seeing errors in the debug.log that I'm assuming are corrupt blocks.\r\nLoadExternalBlockFile: Deserialize or I/O error\r\n\r\nLoadExternalBlockFile: Deserialize or I/O error - CBufferedFile::Fill: end of file: unspecified iostream_category error\r\n\r\nLoadExternalBlockFile: Deserialize or I/O error - non-canonical ReadCompactSize(): unspecified iostream_category error\r\n\r\nWhen the re-index reaches one of those blocks, it stops trying to re-index the blockchain and begins to sync over the network.  It doesn't always stop immediately after finding the error.  Sometimes it will continue to re-index, but when looking for the best tip, it will begin syncing with the network after getting to that block.\r\n\r\nI'll delete the corrupt block, restart Bitcoin to re-index, hoping it will download the missing block and continue to re-index from my drive.  I haven't seen that happen.\r\n\r\n<!--- What behavior did you expect? -->\r\nWhen finding a corrupt or missing block, replace that one block and continue re-indexing from the volume.  Take priority for using blocks already on the volume rather than syncing over the network.\r\n\r\n<!-- What version of Bitcoin Core are you using, where did you get it (website, self-compiled, etc)? -->\r\n0.20\r\n\r\n<!-- What type of machine are you observing the error on (OS/CPU and disk type)? -->\r\n2010 Mac 5,1\r\n10.13.6 os\r\n2.8 GHz Quad-Core Intel Xeon\r\n24 GB 1066 MHz DDR3\r\nATI Radeon HD 5870 1024 MB\r\nblockchain stored on an attached DroboPro with 5 TB free storage.  The Drobo had a drive failure, I can lose another 2 drives before data loss.  Drobo is rebuilding.\r\n\r\n<!-- Any extra information that might be useful in the debugging process. -->\r\nTo test,  delete an early block and start Bitcoin.\r\n\r\n<!--- This is normally the contents of a `debug.log` or `config.log` file. Raw text or a link to a pastebin type site are preferred. -->\r\n\r\n\r\n2020-06-14T12:50:20Z Reindexing block file blk00163.dat...\r\n2020-06-14T12:51:03Z Loaded 518 blocks from external file in 42614ms\r\n2020-06-14T12:51:03Z Reindexing block file blk00164.dat...\r\n2020-06-14T12:51:26Z Loaded 606 blocks from external file in 22425ms\r\n2020-06-14T12:51:26Z Reindexing block file blk00165.dat...\r\n2020-06-14T12:52:04Z Loaded 492 blocks from external file in 38732ms\r\n2020-06-14T12:52:04Z Reindexing block file blk00166.dat...\r\n2020-06-14T12:52:29Z Loaded 518 blocks from external file in 24488ms\r\n2020-06-14T12:52:29Z Reindexing block file blk00167.dat...\r\n2020-06-14T12:53:10Z Loaded 595 blocks from external file in 41404ms\r\n2020-06-14T12:53:10Z Reindexing block file blk00168.dat...\r\n2020-06-14T12:53:32Z Loaded 573 blocks from external file in 22214ms\r\n2020-06-14T12:53:32Z Reindexing block file blk00169.dat...\r\n2020-06-14T12:53:37Z LoadExternalBlockFile: Deserialize or I/O error - CBufferedFile::Fill: end of file: unspecified iostream_category error\r\n2020-06-14T12:53:37Z Loaded 42 blocks from external file in 5048ms\r\n2020-06-14T12:53:37Z Reindexing block file blk00170.dat...\r\n2020-06-14T12:53:49Z Reindexing block file blk00171.dat...\r\n2020-06-14T12:54:05Z Reindexing block file blk00172.dat...\r\n2020-06-14T12:54:17Z Reindexing block file blk00173.dat...\r\n2020-06-14T12:54:29Z Reindexing block file blk00174.dat...\r\n2020-06-14T12:54:45Z Reindexing block file blk00175.dat...\r\n2020-06-14T12:54:57Z Reindexing block file blk00176.dat...\r\n2020-06-14T12:55:10Z Reindexing block file blk00177.dat...\r\n2020-06-14T12:55:25Z Reindexing block file blk00178.dat...\r\n2020-06-14T12:55:37Z Reindexing block file blk00179.dat...\r\n2020-06-14T12:55:54Z Reindexing block file blk00180.dat...\r\n2020-06-14T12:56:13Z Reindexing block file blk00181.dat...\r\n2020-06-14T12:56:31Z Reindexing block file blk00182.dat...\r\n2020-06-14T12:56:47Z Reindexing block file blk00183.dat...\r\n2020-06-14T12:57:01Z Reindexing block file blk00184.dat...\r\n2020-06-14T12:57:15Z Reindexing block file blk00185.dat...\r\n2020-06-14T12:57:32Z Reindexing block file blk00186.dat...\r\n2020-06-14T12:57:46Z Reindexing block file blk00187.dat...\r\n\r\n",
   "closed_at" : "2023-09-21T16:31:51Z",
   "closed_by" : {
      "avatar_url" : "https://avatars.githubusercontent.com/u/6606587?v=4",
      "events_url" : "https://api.github.com/users/willcl-ark/events{/privacy}",
      "followers_url" : "https://api.github.com/users/willcl-ark/followers",
      "following_url" : "https://api.github.com/users/willcl-ark/following{/other_user}",
      "gists_url" : "https://api.github.com/users/willcl-ark/gists{/gist_id}",
      "gravatar_id" : "",
      "html_url" : "https://github.com/willcl-ark",
      "id" : 6606587,
      "login" : "willcl-ark",
      "node_id" : "MDQ6VXNlcjY2MDY1ODc=",
      "organizations_url" : "https://api.github.com/users/willcl-ark/orgs",
      "received_events_url" : "https://api.github.com/users/willcl-ark/received_events",
      "repos_url" : "https://api.github.com/users/willcl-ark/repos",
      "site_admin" : false,
      "starred_url" : "https://api.github.com/users/willcl-ark/starred{/owner}{/repo}",
      "subscriptions_url" : "https://api.github.com/users/willcl-ark/subscriptions",
      "type" : "User",
      "url" : "https://api.github.com/users/willcl-ark"
   },
   "comments" : 4,
   "comments_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19274/comments",
   "created_at" : "2020-06-14T14:11:26Z",
   "events_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19274/events",
   "html_url" : "https://github.com/bitcoin/bitcoin/issues/19274",
   "id" : 638359698,
   "labels" : [],
   "labels_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19274/labels{/name}",
   "locked" : false,
   "milestone" : null,
   "node_id" : "MDU6SXNzdWU2MzgzNTk2OTg=",
   "number" : 19274,
   "performed_via_github_app" : null,
   "reactions" : {
      "+1" : 0,
      "-1" : 0,
      "confused" : 0,
      "eyes" : 0,
      "heart" : 0,
      "hooray" : 0,
      "laugh" : 0,
      "rocket" : 0,
      "total_count" : 0,
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19274/reactions"
   },
   "repository_url" : "https://api.github.com/repos/bitcoin/bitcoin",
   "state" : "closed",
   "state_reason" : "completed",
   "timeline_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19274/timeline",
   "title" : "When Finding a corrupt block during re-index, download the corrupt block, continue reindex from volume",
   "updated_at" : "2023-09-21T16:45:11Z",
   "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19274",
   "user" : {
      "avatar_url" : "https://avatars.githubusercontent.com/u/23297019?v=4",
      "events_url" : "https://api.github.com/users/spiralnova/events{/privacy}",
      "followers_url" : "https://api.github.com/users/spiralnova/followers",
      "following_url" : "https://api.github.com/users/spiralnova/following{/other_user}",
      "gists_url" : "https://api.github.com/users/spiralnova/gists{/gist_id}",
      "gravatar_id" : "",
      "html_url" : "https://github.com/spiralnova",
      "id" : 23297019,
      "login" : "spiralnova",
      "node_id" : "MDQ6VXNlcjIzMjk3MDE5",
      "organizations_url" : "https://api.github.com/users/spiralnova/orgs",
      "received_events_url" : "https://api.github.com/users/spiralnova/received_events",
      "repos_url" : "https://api.github.com/users/spiralnova/repos",
      "site_admin" : false,
      "starred_url" : "https://api.github.com/users/spiralnova/starred{/owner}{/repo}",
      "subscriptions_url" : "https://api.github.com/users/spiralnova/subscriptions",
      "type" : "User",
      "url" : "https://api.github.com/users/spiralnova"
   }
}
