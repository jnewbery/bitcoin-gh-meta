[
   {
      "author_association" : "NONE",
      "body" : "When performing a re-index, Bitcoin stops loading block files where it will begin to sync with network.  And still spends time reindexing each block file that I already have downloaded.  Example:\r\nDuring a re-index Bitcoin 1st reindexes all block files.  There is a confirmation message, Loaded x blocks from external file in x ms.  In my last -reindex pass at block file 865, I stopped seeing those confirmations.  And yet, bitcoin will continue to look at each file down to 2108, which is the last block file I have downloaded.  Then it begins to updateTip starting from the beginning blocks.  When it gets to file 865, it stops updateTip, and begins to re-download blocks from the network.  \r\n\r\nIdeally, Bitcoin would see all my local blocks, and only download if a block in the middle is not complete.  \r\nCheck local for block, if error, request network for download, check next local block.  \r\n\r\nInstead of, check local for block, error, download rest of blocks from network.  Or at least stop reindexing if it's going to ignore all those other blocks.\r\n\r\n\r\n\r\n2020-06-22T14:05:20Z Reindexing block file blk00862.dat...\r\n2020-06-22T14:05:26Z Loaded 112 blocks from external file in 6682ms\r\n2020-06-22T14:05:26Z Reindexing block file blk00863.dat...\r\n2020-06-22T14:05:34Z Loaded 146 blocks from external file in 7456ms\r\n2020-06-22T14:05:34Z Reindexing block file blk00864.dat...\r\n2020-06-22T14:05:40Z Loaded 119 blocks from external file in 6144ms\r\n2020-06-22T14:05:40Z Reindexing block file blk00865.dat...\r\n2020-06-22T14:05:45Z Reindexing block file blk00866.dat...\r\n2020-06-22T14:05:50Z Reindexing block file blk00867.dat...\r\n",
      "created_at" : "2020-06-22T14:17:51Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/19274#issuecomment-647548541",
      "id" : 647548541,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19274",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY0NzU0ODU0MQ==",
      "updated_at" : "2020-06-22T14:17:51Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/647548541",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/23297019?v=4",
         "events_url" : "https://api.github.com/users/spiralnova/events{/privacy}",
         "followers_url" : "https://api.github.com/users/spiralnova/followers",
         "following_url" : "https://api.github.com/users/spiralnova/following{/other_user}",
         "gists_url" : "https://api.github.com/users/spiralnova/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/spiralnova",
         "id" : 23297019,
         "login" : "spiralnova",
         "node_id" : "MDQ6VXNlcjIzMjk3MDE5",
         "organizations_url" : "https://api.github.com/users/spiralnova/orgs",
         "received_events_url" : "https://api.github.com/users/spiralnova/received_events",
         "repos_url" : "https://api.github.com/users/spiralnova/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/spiralnova/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/spiralnova/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/spiralnova"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "The problem is not easily reproducible.\r\n\r\nPlease open a new issue (or leave a comment in here if you want this re-opened) if you experience the problem again.",
      "created_at" : "2023-09-21T16:31:51Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/19274#issuecomment-1729918149",
      "id" : 1729918149,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19274",
      "node_id" : "IC_kwDOABII585nHHTF",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1729918149/reactions"
      },
      "updated_at" : "2023-09-21T16:31:51Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1729918149",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6606587?v=4",
         "events_url" : "https://api.github.com/users/willcl-ark/events{/privacy}",
         "followers_url" : "https://api.github.com/users/willcl-ark/followers",
         "following_url" : "https://api.github.com/users/willcl-ark/following{/other_user}",
         "gists_url" : "https://api.github.com/users/willcl-ark/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/willcl-ark",
         "id" : 6606587,
         "login" : "willcl-ark",
         "node_id" : "MDQ6VXNlcjY2MDY1ODc=",
         "organizations_url" : "https://api.github.com/users/willcl-ark/orgs",
         "received_events_url" : "https://api.github.com/users/willcl-ark/received_events",
         "repos_url" : "https://api.github.com/users/willcl-ark/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/willcl-ark/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/willcl-ark/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/willcl-ark"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "seems similar suggestion as #17341. I still think that this might make sense, and with the `getblockfrompeer` rpc this should be possible without adding much code, especially after  #27652 would be resolved. ",
      "created_at" : "2023-09-21T16:39:43Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/19274#issuecomment-1729933054",
      "id" : 1729933054,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19274",
      "node_id" : "IC_kwDOABII585nHK7-",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1729933054/reactions"
      },
      "updated_at" : "2023-09-21T16:39:43Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1729933054",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/48763452?v=4",
         "events_url" : "https://api.github.com/users/mzumsande/events{/privacy}",
         "followers_url" : "https://api.github.com/users/mzumsande/followers",
         "following_url" : "https://api.github.com/users/mzumsande/following{/other_user}",
         "gists_url" : "https://api.github.com/users/mzumsande/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/mzumsande",
         "id" : 48763452,
         "login" : "mzumsande",
         "node_id" : "MDQ6VXNlcjQ4NzYzNDUy",
         "organizations_url" : "https://api.github.com/users/mzumsande/orgs",
         "received_events_url" : "https://api.github.com/users/mzumsande/received_events",
         "repos_url" : "https://api.github.com/users/mzumsande/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/mzumsande/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/mzumsande/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/mzumsande"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Not sure if this is worth it. Block corruption should never happen or only rarely happen, so optimizing re-index doesn't seem worth it.\r\n\r\nIt seems better to optimize the hardware you are running on.",
      "created_at" : "2023-09-21T16:45:11Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/19274#issuecomment-1729941579",
      "id" : 1729941579,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19274",
      "node_id" : "IC_kwDOABII585nHNBL",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1729941579/reactions"
      },
      "updated_at" : "2023-09-21T16:45:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1729941579",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> Not sure if this is worth it. Block corruption should never happen or only rarely happen, so optimizing re-index doesn't seem worth it.\r\n\r\nDoes it really happen less today than corruptions for which `-reindex` or `-reindex-chainstate` would help?\r\nAlso, it seems that the data integrity requirements for block storage are lower than for other types of data, since the data is mostly used to help others sync: For example, it's not uncommon to store the `/blocks` directory on a external drive which may be slower and of less quality than the drive the chainstate and wallet are on.",
      "created_at" : "2023-09-25T14:24:34Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/19274#issuecomment-1733817681",
      "id" : 1733817681,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19274",
      "node_id" : "IC_kwDOABII585nV_VR",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1733817681/reactions"
      },
      "updated_at" : "2023-09-25T14:24:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1733817681",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/48763452?v=4",
         "events_url" : "https://api.github.com/users/mzumsande/events{/privacy}",
         "followers_url" : "https://api.github.com/users/mzumsande/followers",
         "following_url" : "https://api.github.com/users/mzumsande/following{/other_user}",
         "gists_url" : "https://api.github.com/users/mzumsande/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/mzumsande",
         "id" : 48763452,
         "login" : "mzumsande",
         "node_id" : "MDQ6VXNlcjQ4NzYzNDUy",
         "organizations_url" : "https://api.github.com/users/mzumsande/orgs",
         "received_events_url" : "https://api.github.com/users/mzumsande/received_events",
         "repos_url" : "https://api.github.com/users/mzumsande/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/mzumsande/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/mzumsande/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/mzumsande"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "The point of this request is not how a block was corrupted or the hardware it runs on.  The frustrating part is when bitcoin is reindexing and finds a bad block somewhere in the middle of the stored blocks, it doesn't just download the one block and then try the next block on the disk.  It redownloads all the blocks after the bad block.  Regardless if those blocks are good.  This was a couple versions ago.  Maybe this has been fixed.  You can test this by deleting a block in the stored blockchain and then running a reindex to see if it only replaces the lost block and then moves on to the next stored block on the local disk.  Or does it count all the rest of the blocks on the blockchain as bad and request those blocks again from the network.",
      "created_at" : "2023-09-26T02:46:30Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/19274#issuecomment-1734744337",
      "id" : 1734744337,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19274",
      "node_id" : "IC_kwDOABII585nZhkR",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1734744337/reactions"
      },
      "updated_at" : "2023-09-26T02:46:30Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1734744337",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/23297019?v=4",
         "events_url" : "https://api.github.com/users/spiralnova/events{/privacy}",
         "followers_url" : "https://api.github.com/users/spiralnova/followers",
         "following_url" : "https://api.github.com/users/spiralnova/following{/other_user}",
         "gists_url" : "https://api.github.com/users/spiralnova/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/spiralnova",
         "id" : 23297019,
         "login" : "spiralnova",
         "node_id" : "MDQ6VXNlcjIzMjk3MDE5",
         "organizations_url" : "https://api.github.com/users/spiralnova/orgs",
         "received_events_url" : "https://api.github.com/users/spiralnova/received_events",
         "repos_url" : "https://api.github.com/users/spiralnova/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/spiralnova/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/spiralnova/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/spiralnova"
      }
   }
]
