[
   {
      "author_association" : "MEMBER",
      "body" : "> I suppose another issue could be if it's worth having logic that tries to determine whether a peer is silently withholding transactions from us\r\n\r\nAre you talking about a peer that sets `version.relay` to true but behaves like a blocksonly node? I think the time when a node last sent us a tx should help here, it might already be tracked in `CNode::nLastTXTime`.\r\n\r\nIf you are talking about a peer that withholds specific transactions, that seems like a separate issue from blocksonly.",
      "created_at" : "2019-07-18T20:27:43Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/16418#issuecomment-512974455",
      "id" : 512974455,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16418",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDUxMjk3NDQ1NQ==",
      "updated_at" : "2019-07-18T20:27:43Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/512974455",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "If #15759 is merged, would it make sense to attempt to match our designated blocks-only outgoing connections with peers that run in blocks-only mode?\r\nIt seems ineffective if we have outgoing connections on which we want transactions with peers that don't offer any, and at the same time have blocks-only outgoing connections with peers that would relay transactions to us if we asked.",
      "created_at" : "2019-07-19T20:26:09Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/16418#issuecomment-513366312",
      "id" : 513366312,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16418",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDUxMzM2NjMxMg==",
      "updated_at" : "2019-07-19T20:26:09Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/513366312",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/48763452?v=4",
         "events_url" : "https://api.github.com/users/mzumsande/events{/privacy}",
         "followers_url" : "https://api.github.com/users/mzumsande/followers",
         "following_url" : "https://api.github.com/users/mzumsande/following{/other_user}",
         "gists_url" : "https://api.github.com/users/mzumsande/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/mzumsande",
         "id" : 48763452,
         "login" : "mzumsande",
         "node_id" : "MDQ6VXNlcjQ4NzYzNDUy",
         "organizations_url" : "https://api.github.com/users/mzumsande/orgs",
         "received_events_url" : "https://api.github.com/users/mzumsande/received_events",
         "repos_url" : "https://api.github.com/users/mzumsande/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/mzumsande/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/mzumsande/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/mzumsande"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> If #15759 is merged, would it make sense to attempt to match our designated blocks-only outgoing connections with peers that run in blocks-only mode?\r\n\r\nI tend to think that we should not make such an attempt, because I think the goal of our outbound connections (existing plus future blocks-only) is to give us a diverse selection of peers in the hopes that we have at least one honest one.  If we preference blocks-only peers for our blocks-only outbounds, then unless there are a lot of similarly diverse blocks-only peers out there, we will reduce our peer diversity substantially.  \r\n\r\nFrom an accounting perspective, perhaps there could be a way for us to \"downgrade\" a link that we expect to be a transaction-relay-peer that turns out to be a blocks-only peer, but I don't know if it will be worth the trouble of implementing something like that, and it's not totally clear to me whether that would introduce a bias that would be concerning.  I think it's easiest to reason about pulling a candidate peer out of our addrman at random, connecting, and staying connected as long as it offers the services we expect.  In the case of the issue I brought up here, I'd say that we should allow up to 2 or 3 of our outbounds being blocks-only (when we expect them to be tx-relay peers) and then if we encounter further blocks-only outbounds, we disconnect.  Anyway, this can all be discussed in any PRs that try to fix this.",
      "created_at" : "2019-07-22T19:05:09Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/16418#issuecomment-513913427",
      "id" : 513913427,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16418",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDUxMzkxMzQyNw==",
      "updated_at" : "2019-07-22T19:05:09Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/513913427",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/7463573?v=4",
         "events_url" : "https://api.github.com/users/sdaftuar/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sdaftuar/followers",
         "following_url" : "https://api.github.com/users/sdaftuar/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sdaftuar/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sdaftuar",
         "id" : 7463573,
         "login" : "sdaftuar",
         "node_id" : "MDQ6VXNlcjc0NjM1NzM=",
         "organizations_url" : "https://api.github.com/users/sdaftuar/orgs",
         "received_events_url" : "https://api.github.com/users/sdaftuar/received_events",
         "repos_url" : "https://api.github.com/users/sdaftuar/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sdaftuar/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sdaftuar/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sdaftuar"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> Are you talking about a peer that sets version.relay to true but behaves like a blocksonly node? I think the time when a node last sent us a tx should help here, it might already be tracked in CNode::nLastTXTime.\r\n\r\n@MarcoFalke Yeah that's what occurred to me when I was thinking about things that could go wrong with transaction relay.  I don't think it's a big concern, but I guess it's worth remembering that we have no handling for cases like that. ",
      "created_at" : "2019-07-22T19:09:01Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/16418#issuecomment-513914701",
      "id" : 513914701,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16418",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDUxMzkxNDcwMQ==",
      "updated_at" : "2019-07-22T19:09:01Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/513914701",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/7463573?v=4",
         "events_url" : "https://api.github.com/users/sdaftuar/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sdaftuar/followers",
         "following_url" : "https://api.github.com/users/sdaftuar/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sdaftuar/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sdaftuar",
         "id" : 7463573,
         "login" : "sdaftuar",
         "node_id" : "MDQ6VXNlcjc0NjM1NzM=",
         "organizations_url" : "https://api.github.com/users/sdaftuar/orgs",
         "received_events_url" : "https://api.github.com/users/sdaftuar/received_events",
         "repos_url" : "https://api.github.com/users/sdaftuar/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sdaftuar/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sdaftuar/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sdaftuar"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Having less than 8 transaction relay links leads to information leaks. \r\n\r\nI'm talking about the threat model where an attacker runs a number of public nodes and infers sources of transactions based on the timing of incoming messages.\r\n\r\nIt's (sort of) difficult now to perform this attack only because diffusion happens simultaneously over different directions. Having less transaction relay links makes diffusion much more inferrable. I don't have the exact numbers, but I expect it would become *really* concerning w.r.t. privacy if at least 2/8 outbound connections of every node are blocksonly.\r\n",
      "created_at" : "2019-07-23T18:26:27Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/16418#issuecomment-514328042",
      "id" : 514328042,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16418",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDUxNDMyODA0Mg==",
      "updated_at" : "2019-07-23T18:26:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/514328042",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7975071?v=4",
         "events_url" : "https://api.github.com/users/naumenkogs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/naumenkogs/followers",
         "following_url" : "https://api.github.com/users/naumenkogs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/naumenkogs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/naumenkogs",
         "id" : 7975071,
         "login" : "naumenkogs",
         "node_id" : "MDQ6VXNlcjc5NzUwNzE=",
         "organizations_url" : "https://api.github.com/users/naumenkogs/orgs",
         "received_events_url" : "https://api.github.com/users/naumenkogs/received_events",
         "repos_url" : "https://api.github.com/users/naumenkogs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/naumenkogs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/naumenkogs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/naumenkogs"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "This looks related to #28371 ",
      "created_at" : "2023-09-21T16:14:29Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/16418#issuecomment-1729893248",
      "id" : 1729893248,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16418",
      "node_id" : "IC_kwDOABII585nHBOA",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1729893248/reactions"
      },
      "updated_at" : "2023-09-21T16:14:29Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1729893248",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6606587?v=4",
         "events_url" : "https://api.github.com/users/willcl-ark/events{/privacy}",
         "followers_url" : "https://api.github.com/users/willcl-ark/followers",
         "following_url" : "https://api.github.com/users/willcl-ark/following{/other_user}",
         "gists_url" : "https://api.github.com/users/willcl-ark/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/willcl-ark",
         "id" : 6606587,
         "login" : "willcl-ark",
         "node_id" : "MDQ6VXNlcjY2MDY1ODc=",
         "organizations_url" : "https://api.github.com/users/willcl-ark/orgs",
         "received_events_url" : "https://api.github.com/users/willcl-ark/received_events",
         "repos_url" : "https://api.github.com/users/willcl-ark/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/willcl-ark/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/willcl-ark/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/willcl-ark"
      }
   }
]
