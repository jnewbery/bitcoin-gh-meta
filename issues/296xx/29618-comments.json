[
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "To me it seems that this could partition the network. In the addresses database of my node there are 2778 addresses that have advertised v2 out of 72821 total.\r\n\r\n> This would be extremely helpful for those who depend on V2 for confirming a connection is a \"bonafide\" node.\r\n\r\nTrying to better understand your usecase. Do you want to check a connection to a particular node (e.g. one that you control or \"trust\")? Note that if that node supports v2, then bitcoind will already connect to it using v2 currently. Note also that even if v2 is used, this alone does not mean that MITM did not happen. You have to manually verify the session ids for that.\r\n\r\nFor ensuring you really connect to the intended node (avoid MITM) using Tor or I2P may be easier or better alternative. In those networks the address represents the peer's public key and naturally when you establish a connection you know you are talking to the one who possesses the private key which corresponds to the address / public key.",
      "created_at" : "2024-03-11T10:24:06Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/29618#issuecomment-1988076800",
      "id" : 1988076800,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/29618",
      "node_id" : "IC_kwDOABII5852f6UA",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1988076800/reactions"
      },
      "updated_at" : "2024-03-11T10:24:06Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1988076800",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> To me it seems that this could partition the network. In the addresses database of my node there are 2778 addresses that have advertised v2 out of 72821 total.\r\n\r\nIt would only partition the network if almost all v2 nodes had v2-only enabled. As long as this option defaults to off, I don't see any real risk of that happening.\r\n\r\n> Note also that even if v2 is used, this alone does not mean that MITM did not happen. You have to manually verify the session ids for that.\r\n\r\nThe fact that people can check session ids is a reasonable deterrent to MITM attacks, as many attackers would not want their attack to be detected. I think it's fine to have a default-off option to enforce this to get a bit of extra privacy.",
      "created_at" : "2024-03-12T16:59:52Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/29618#issuecomment-1992135814",
      "id" : 1992135814,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/29618",
      "node_id" : "IC_kwDOABII5852vZSG",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1992135814/reactions"
      },
      "updated_at" : "2024-03-12T16:59:52Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1992135814",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7042?v=4",
         "events_url" : "https://api.github.com/users/petertodd/events{/privacy}",
         "followers_url" : "https://api.github.com/users/petertodd/followers",
         "following_url" : "https://api.github.com/users/petertodd/following{/other_user}",
         "gists_url" : "https://api.github.com/users/petertodd/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/petertodd",
         "id" : 7042,
         "login" : "petertodd",
         "node_id" : "MDQ6VXNlcjcwNDI=",
         "organizations_url" : "https://api.github.com/users/petertodd/orgs",
         "received_events_url" : "https://api.github.com/users/petertodd/received_events",
         "repos_url" : "https://api.github.com/users/petertodd/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/petertodd/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/petertodd/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/petertodd"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> It would only partition the network if almost all v2 nodes had v2-only enabled. As long as this option defaults to off, I don't see any real risk of that happening.\r\n\r\nWe have various other options that could partition the network (`-onlynet`) or have other bad consequences  (`-nolisten`, `-blocksonly`, `-prune`) if everyone used them, plus we could add a warning in the doc that only users who actually need it should use it.\r\n\r\n> Perhaps a setting like listenonly=v2\r\n\r\n`listen` usually refers to inbound connections, this should be an option that applies to both outbound and inbound connections (maybe a third option to `-v2transport`).",
      "created_at" : "2024-03-12T19:17:45Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/29618#issuecomment-1992370467",
      "id" : 1992370467,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/29618",
      "node_id" : "IC_kwDOABII5852wSkj",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1992370467/reactions"
      },
      "updated_at" : "2024-03-12T19:17:45Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1992370467",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/48763452?v=4",
         "events_url" : "https://api.github.com/users/mzumsande/events{/privacy}",
         "followers_url" : "https://api.github.com/users/mzumsande/followers",
         "following_url" : "https://api.github.com/users/mzumsande/following{/other_user}",
         "gists_url" : "https://api.github.com/users/mzumsande/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/mzumsande",
         "id" : 48763452,
         "login" : "mzumsande",
         "node_id" : "MDQ6VXNlcjQ4NzYzNDUy",
         "organizations_url" : "https://api.github.com/users/mzumsande/orgs",
         "received_events_url" : "https://api.github.com/users/mzumsande/received_events",
         "repos_url" : "https://api.github.com/users/mzumsande/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/mzumsande/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/mzumsande/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/mzumsande"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Ok, forget about the partitioning aspect (for now). Seems 3 different things are mixed here:\r\n\r\n1. Opening v2-only connection to a particular node (e.g. by `addnode` RPC). I got the impression that the OP is missing the fact that if this particular node supports v2 then a v2 connection will be opened even now.\r\n2. Opening v2-only connections for all outbound connections to clearnet peers (for Tor, I2P and CJDNS v1 is as fine because they do encryption anyway).\r\n3. Accepting v2-only incoming connections over clearnet.",
      "created_at" : "2024-03-13T08:16:38Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/29618#issuecomment-1993789136",
      "id" : 1993789136,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/29618",
      "node_id" : "IC_kwDOABII58521s7Q",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1993789136/reactions"
      },
      "updated_at" : "2024-03-13T08:16:38Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1993789136",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   }
]
