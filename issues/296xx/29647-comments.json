[
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage\nFor detailed information about the code coverage, see the [test coverage report](https://corecheck.dev/bitcoin/bitcoin/pulls/29647).\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| ACK | [tdb3](https://github.com/bitcoin/bitcoin/pull/29647#pullrequestreview-1947860217), [sipa](https://github.com/bitcoin/bitcoin/pull/29647#issuecomment-2009480683), [sr-gi](https://github.com/bitcoin/bitcoin/pull/29647#issuecomment-2015329706) |\n\nIf your review is incorrectly listed, please react with ð to this comment and the bot will ignore it on the next update.\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#29640](https://github.com/bitcoin/bitcoin/pull/29640) (Fix tiebreak when loading blocks from disk (and add tests for comparing chain ties) by sr-gi)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.\n",
      "created_at" : "2024-03-13T14:06:06Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29647#issuecomment-1994488159",
      "id" : 1994488159,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/29647",
      "node_id" : "IC_kwDOABII58524Xlf",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1994488159/reactions"
      },
      "updated_at" : "2024-03-22T15:20:16Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1994488159",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "This should only happen on regtest, or if the clock is off by years, so no backport is needed",
      "created_at" : "2024-03-13T14:07:59Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29647#issuecomment-1994492170",
      "id" : 1994492170,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/29647",
      "node_id" : "IC_kwDOABII58524YkK",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1994492170/reactions"
      },
      "updated_at" : "2024-03-13T14:08:31Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1994492170",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/maflcko/events{/privacy}",
         "followers_url" : "https://api.github.com/users/maflcko/followers",
         "following_url" : "https://api.github.com/users/maflcko/following{/other_user}",
         "gists_url" : "https://api.github.com/users/maflcko/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/maflcko",
         "id" : 6399679,
         "login" : "maflcko",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/maflcko/orgs",
         "received_events_url" : "https://api.github.com/users/maflcko/received_events",
         "repos_url" : "https://api.github.com/users/maflcko/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/maflcko/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/maflcko/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/maflcko"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "This can be tested on regtest (for exmaple) by connecting a node with one block to a node with no blocks, whose NodeClock is behind the block time.\r\n\r\nExample outputs (before):\r\n\r\n* When dividing by zero: `[msghand] [validation.cpp:4193] [ProcessNewBlockHeaders] Synchronizing blockheaders, height: 1 (~inf%)`\r\n* When dividing by a negative number: `[msghand] [validation.cpp:4193] [ProcessNewBlockHeaders] Synchronizing blockheaders, height: 1 (~-100.00%)`\r\n\r\nAfterward, they will, more consistently, be assumed to be `100%`:\r\n\r\n* `[msghand] [validation.cpp:4194] [ProcessNewBlockHeaders] Synchronizing blockheaders, height: 1 (~100.00%)`",
      "created_at" : "2024-03-14T09:20:49Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29647#issuecomment-1996997481",
      "id" : 1996997481,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/29647",
      "node_id" : "IC_kwDOABII5853B8Np",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1996997481/reactions"
      },
      "updated_at" : "2024-03-14T09:20:49Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1996997481",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/maflcko/events{/privacy}",
         "followers_url" : "https://api.github.com/users/maflcko/followers",
         "following_url" : "https://api.github.com/users/maflcko/following{/other_user}",
         "gists_url" : "https://api.github.com/users/maflcko/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/maflcko",
         "id" : 6399679,
         "login" : "maflcko",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/maflcko/orgs",
         "received_events_url" : "https://api.github.com/users/maflcko/received_events",
         "repos_url" : "https://api.github.com/users/maflcko/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/maflcko/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/maflcko/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/maflcko"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Concept ACK, will review it soon",
      "created_at" : "2024-03-16T01:47:50Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29647#issuecomment-2001057996",
      "id" : 2001057996,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/29647",
      "node_id" : "IC_kwDOABII5853RbjM",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2001057996/reactions"
      },
      "updated_at" : "2024-03-16T01:47:50Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2001057996",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6665628?v=4",
         "events_url" : "https://api.github.com/users/sr-gi/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sr-gi/followers",
         "following_url" : "https://api.github.com/users/sr-gi/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sr-gi/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sr-gi",
         "id" : 6665628,
         "login" : "sr-gi",
         "node_id" : "MDQ6VXNlcjY2NjU2Mjg=",
         "organizations_url" : "https://api.github.com/users/sr-gi/orgs",
         "received_events_url" : "https://api.github.com/users/sr-gi/received_events",
         "repos_url" : "https://api.github.com/users/sr-gi/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sr-gi/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sr-gi/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sr-gi"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> Started IBD on signet with stale clock (about 19 hours behind tip).\r\n> \"Pre-synchronizing\" and \"Synchronizing\" messages looked ok (no negatives or inf observed).\r\n\r\nYes, this is expected, because the signet chain has a total age of over 19 hours. You could try again, but set the time to be before the first header in the signet chain, and then submit the first header? Or you could try my modified functional test: https://github.com/bitcoin/bitcoin/pull/29640#discussion_r1523264375?",
      "created_at" : "2024-03-20T06:44:29Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29647#issuecomment-2008742367",
      "id" : 2008742367,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/29647",
      "node_id" : "IC_kwDOABII5853uvnf",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2008742367/reactions"
      },
      "updated_at" : "2024-03-20T06:44:29Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2008742367",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/maflcko/events{/privacy}",
         "followers_url" : "https://api.github.com/users/maflcko/followers",
         "following_url" : "https://api.github.com/users/maflcko/following{/other_user}",
         "gists_url" : "https://api.github.com/users/maflcko/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/maflcko",
         "id" : 6399679,
         "login" : "maflcko",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/maflcko/orgs",
         "received_events_url" : "https://api.github.com/users/maflcko/received_events",
         "repos_url" : "https://api.github.com/users/maflcko/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/maflcko/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/maflcko/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/maflcko"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> > Started IBD on signet with stale clock (about 19 hours behind tip).\r\n> > \"Pre-synchronizing\" and \"Synchronizing\" messages looked ok (no negatives or inf observed).\r\n> \r\n> Yes, this is expected, because the signet chain has a total age of over 19 hours. You could try again, but set the time to be before the first header in the signet chain, and then submit the first header? Or you could try my modified functional test: [#29640 (comment)](https://github.com/bitcoin/bitcoin/pull/29640#discussion_r1523264375)?\r\n\r\nv26.0:\r\n```\r\n2019-12-31T06:00:36Z New outbound-full-relay v1 peer connected: version: 70013, blocks=187585, peer=0\r\n2019-12-31T06:00:36Z Pre-synchronizing blockheaders, height: 2000 (~-5.89%)\r\n2019-12-31T06:00:37Z Pre-synchronizing blockheaders, height: 4000 (~-11.76%)\r\n...\r\n2019-12-31T06:01:01Z Pre-synchronizing blockheaders, height: 142000 (~-414.61%)\r\n2019-12-31T06:01:02Z Pre-synchronizing blockheaders, height: 146000 (~-424.84%)\r\n2019-12-31T06:01:05Z Warning: Please check that your computer's date and time are correct! If your clock is wrong, Bitcoin Core will not work properly.\r\nWarning: Please check that your computer's date and time are correct! If your clock is wrong, Bitcoin Core will not work properly.\r\n2019-12-31T06:01:05Z New outbound-full-relay v1 peer connected: version: 70016, blocks=187585, peer=3\r\n\r\n```\r\n\r\nPR 29647:\r\n```\r\n2019-12-31T06:02:36Z Pre-synchronizing blockheaders, height: 6000 (~100.00%)\r\n2019-12-31T06:02:36Z Pre-synchronizing blockheaders, height: 10000 (~100.00%)\r\n...\r\n2019-12-31T06:02:52Z Pre-synchronizing blockheaders, height: 174000 (~100.00%)\r\n2019-12-31T06:02:52Z Pre-synchronizing blockheaders, height: 178000 (~100.00%)\r\n2019-12-31T06:02:52Z Cannot connect to socket for 119.123.205.192:38333\r\n2019-12-31T06:02:53Z Cannot connect to socket for 100.26.155.44:38333\r\n2019-12-31T06:02:54Z Warning: Please check that your computer's date and time are correct! If your clock is wrong, Bitcoin Core will not work properly.\r\nWarning: Please check that your computer's date and time are correct! If your clock is wrong, Bitcoin Core will not work properly.\r\n\r\n```\r\n\r\n",
      "created_at" : "2024-03-20T12:23:29Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29647#issuecomment-2009444533",
      "id" : 2009444533,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/29647",
      "node_id" : "IC_kwDOABII5853xbC1",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2009444533/reactions"
      },
      "updated_at" : "2024-03-20T12:23:29Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2009444533",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/106488469?v=4",
         "events_url" : "https://api.github.com/users/tdb3/events{/privacy}",
         "followers_url" : "https://api.github.com/users/tdb3/followers",
         "following_url" : "https://api.github.com/users/tdb3/following{/other_user}",
         "gists_url" : "https://api.github.com/users/tdb3/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/tdb3",
         "id" : 106488469,
         "login" : "tdb3",
         "node_id" : "U_kgDOBljilQ",
         "organizations_url" : "https://api.github.com/users/tdb3/orgs",
         "received_events_url" : "https://api.github.com/users/tdb3/received_events",
         "repos_url" : "https://api.github.com/users/tdb3/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/tdb3/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/tdb3/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/tdb3"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "utACK fa4d98b3c8e63f20c6f366fc9382039ba52614a4",
      "created_at" : "2024-03-20T12:43:38Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29647#issuecomment-2009480683",
      "id" : 2009480683,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/29647",
      "node_id" : "IC_kwDOABII5853xj3r",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 1,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2009480683/reactions"
      },
      "updated_at" : "2024-03-20T12:43:38Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2009480683",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "tACK [fa4d98b](https://github.com/bitcoin/bitcoin/pull/29647/commits/fa4d98b3c8e63f20c6f366fc9382039ba52614a4)\r\n\r\nI tested this against #29640 by dropping 813961f057255835285266b90fcd6351ff4a3d1e and cherry-picking both commits included in the PR.\r\n\r\nOutput after dropping 813961f057255835285266b90fcd6351ff4a3d1e:\r\n\r\n```\r\n[msghand] [validation.cpp:4193] [ProcessNewBlockHeaders] Synchronizing blockheaders, height: 1 (~inf%)\r\n```\r\n\r\nOutput after cherry-picking:\r\n\r\n```\r\n[validation.cpp:4194] [ProcessNewBlockHeaders] Synchronizing blockheaders, height: 1 (~100.00%)\r\n```\r\n\r\n",
      "created_at" : "2024-03-22T15:20:12Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29647#issuecomment-2015329706",
      "id" : 2015329706,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/29647",
      "node_id" : "IC_kwDOABII5854H32q",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 1,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2015329706/reactions"
      },
      "updated_at" : "2024-03-22T15:20:12Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2015329706",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6665628?v=4",
         "events_url" : "https://api.github.com/users/sr-gi/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sr-gi/followers",
         "following_url" : "https://api.github.com/users/sr-gi/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sr-gi/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sr-gi",
         "id" : 6665628,
         "login" : "sr-gi",
         "node_id" : "MDQ6VXNlcjY2NjU2Mjg=",
         "organizations_url" : "https://api.github.com/users/sr-gi/orgs",
         "received_events_url" : "https://api.github.com/users/sr-gi/received_events",
         "repos_url" : "https://api.github.com/users/sr-gi/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sr-gi/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sr-gi/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sr-gi"
      }
   }
]
