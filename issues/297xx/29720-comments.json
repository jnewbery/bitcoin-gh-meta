[
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage\nFor detailed information about the code coverage, see the [test coverage report](https://corecheck.dev/bitcoin/bitcoin/pulls/29720).\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| Concept ACK | [fjahr](https://github.com/bitcoin/bitcoin/pull/29720#issuecomment-2072584005) |\n\nIf your review is incorrectly listed, please react with ð to this comment and the bot will ignore it on the next update.\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#29656](https://github.com/bitcoin/bitcoin/pull/29656) (chainparams: Change nChainTx type to uint64_t by fjahr)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.\n",
      "created_at" : "2024-03-25T10:15:34Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29720#issuecomment-2017655432",
      "id" : 2017655432,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/29720",
      "node_id" : "IC_kwDOABII5854QvqI",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2017655432/reactions"
      },
      "updated_at" : "2024-04-23T14:57:00Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2017655432",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29720#discussion_r1537955050"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29720"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1537955050"
         }
      },
      "author_association" : "MEMBER",
      "body" : "This is confusing. We know why txcount would be zero, but users might not. Perhaps txcount itself should be omitted when wrong?",
      "commit_id" : "fa032a5792c79b76b038827977c8a5eafd8e297b",
      "created_at" : "2024-03-25T17:24:19Z",
      "diff_hunk" : "@@ -1637,9 +1637,13 @@ static RPCHelpMan getchaintxstats()\n                         {RPCResult::Type::STR_HEX, \"window_final_block_hash\", \"The hash of the final block in the window\"},\n                         {RPCResult::Type::NUM, \"window_final_block_height\", \"The height of the final block in the window.\"},\n                         {RPCResult::Type::NUM, \"window_block_count\", \"Size of the window in number of blocks\"},\n-                        {RPCResult::Type::NUM, \"window_tx_count\", /*optional=*/true, \"The number of transactions in the window. Only returned if \\\"window_block_count\\\" is > 0\"},\n+                        {RPCResult::Type::NUM, \"window_tx_count\", /*optional=*/true,\n+                         \"The number of transactions in the window. \"\n+                         \"Only returned if \\\"window_block_count\\\" is > 0 and if txcount is non-zero for the start end end of the window.\"},",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29720#discussion_r1537955050",
      "id" : 1537955050,
      "line" : 1642,
      "node_id" : "PRRC_kwDOABII585bq1Tq",
      "original_commit_id" : "fa032a5792c79b76b038827977c8a5eafd8e297b",
      "original_line" : 1642,
      "original_position" : 7,
      "original_start_line" : null,
      "path" : "src/rpc/blockchain.cpp",
      "position" : 7,
      "pull_request_review_id" : 1958361151,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29720",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1537955050/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-03-25T17:24:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1537955050",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "node_id" : "MDQ6VXNlcjEwOTU2NzU=",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29720#discussion_r1539035652"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29720"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1539035652"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I think it is fine to return a value of zero, if it is explained why the value would be zero.\r\n\r\nHowever, I've made it optional in the last push to address your feedback.",
      "commit_id" : "faeb2056cf5c63af727994a6775d27a3e160ceed",
      "created_at" : "2024-03-26T11:19:03Z",
      "diff_hunk" : "@@ -1637,9 +1637,13 @@ static RPCHelpMan getchaintxstats()\n                         {RPCResult::Type::STR_HEX, \"window_final_block_hash\", \"The hash of the final block in the window\"},\n                         {RPCResult::Type::NUM, \"window_final_block_height\", \"The height of the final block in the window.\"},\n                         {RPCResult::Type::NUM, \"window_block_count\", \"Size of the window in number of blocks\"},\n-                        {RPCResult::Type::NUM, \"window_tx_count\", /*optional=*/true, \"The number of transactions in the window. Only returned if \\\"window_block_count\\\" is > 0\"},\n+                        {RPCResult::Type::NUM, \"window_tx_count\", /*optional=*/true,\n+                         \"The number of transactions in the window. \"\n+                         \"Only returned if \\\"window_block_count\\\" is > 0 and if txcount is non-zero for the start end end of the window.\"},",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29720#discussion_r1539035652",
      "id" : 1539035652,
      "in_reply_to_id" : 1537955050,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585bu9IE",
      "original_commit_id" : "fa032a5792c79b76b038827977c8a5eafd8e297b",
      "original_line" : 1642,
      "original_position" : 7,
      "original_start_line" : null,
      "path" : "src/rpc/blockchain.cpp",
      "position" : null,
      "pull_request_review_id" : 1960065877,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29720",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1539035652/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-03-26T11:19:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1539035652",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/maflcko/events{/privacy}",
         "followers_url" : "https://api.github.com/users/maflcko/followers",
         "following_url" : "https://api.github.com/users/maflcko/following{/other_user}",
         "gists_url" : "https://api.github.com/users/maflcko/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/maflcko",
         "id" : 6399679,
         "login" : "maflcko",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/maflcko/orgs",
         "received_events_url" : "https://api.github.com/users/maflcko/received_events",
         "repos_url" : "https://api.github.com/users/maflcko/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/maflcko/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/maflcko/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/maflcko"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Concept ACK, could we add a test for this?",
      "created_at" : "2024-04-23T14:56:57Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29720#issuecomment-2072584005",
      "id" : 2072584005,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/29720",
      "node_id" : "IC_kwDOABII5857iR9F",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2072584005/reactions"
      },
      "updated_at" : "2024-04-23T14:56:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2072584005",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1322187?v=4",
         "events_url" : "https://api.github.com/users/fjahr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fjahr/followers",
         "following_url" : "https://api.github.com/users/fjahr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fjahr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fjahr",
         "id" : 1322187,
         "login" : "fjahr",
         "node_id" : "MDQ6VXNlcjEzMjIxODc=",
         "organizations_url" : "https://api.github.com/users/fjahr/orgs",
         "received_events_url" : "https://api.github.com/users/fjahr/received_events",
         "repos_url" : "https://api.github.com/users/fjahr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fjahr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fjahr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fjahr"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "A test is already present in `test/functional/feature_assumeutxo.py`, see the diff. You can also test it by running this pull against a `bitcoind` compiled from master and observing the sanitizer crash and the test failure.",
      "created_at" : "2024-04-23T15:00:51Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29720#issuecomment-2072599127",
      "id" : 2072599127,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/29720",
      "node_id" : "IC_kwDOABII5857iVpX",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2072599127/reactions"
      },
      "updated_at" : "2024-04-23T15:00:51Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2072599127",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/maflcko/events{/privacy}",
         "followers_url" : "https://api.github.com/users/maflcko/followers",
         "following_url" : "https://api.github.com/users/maflcko/following{/other_user}",
         "gists_url" : "https://api.github.com/users/maflcko/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/maflcko",
         "id" : 6399679,
         "login" : "maflcko",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/maflcko/orgs",
         "received_events_url" : "https://api.github.com/users/maflcko/received_events",
         "repos_url" : "https://api.github.com/users/maflcko/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/maflcko/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/maflcko/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/maflcko"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29720#discussion_r1576472588"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29720"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1576472588"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Not returning a value here might break downstream projects if they are unlucky since this wasn't optional before. Not sure if deprecation is necessary here but a more safe approach could be to just return 0 if it is unknown. I don't have a strong opinion on it but usually, we are pretty cautious with a change like this.",
      "commit_id" : "faeb2056cf5c63af727994a6775d27a3e160ceed",
      "created_at" : "2024-04-23T15:34:30Z",
      "diff_hunk" : "@@ -1633,13 +1633,19 @@ static RPCHelpMan getchaintxstats()\n                     RPCResult::Type::OBJ, \"\", \"\",\n                     {\n                         {RPCResult::Type::NUM_TIME, \"time\", \"The timestamp for the final block in the window, expressed in \" + UNIX_EPOCH_TIME},\n-                        {RPCResult::Type::NUM, \"txcount\", \"The total number of transactions in the chain up to that point\"},\n+                        {RPCResult::Type::NUM, \"txcount\", /*optional=*/true,",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29720#discussion_r1576472588",
      "id" : 1576472588,
      "line" : 1636,
      "node_id" : "PRRC_kwDOABII585d9xAM",
      "original_commit_id" : "faeb2056cf5c63af727994a6775d27a3e160ceed",
      "original_line" : 1636,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "src/rpc/blockchain.cpp",
      "position" : 5,
      "pull_request_review_id" : 2017618817,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29720",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1576472588/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-04-23T15:34:31Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1576472588",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1322187?v=4",
         "events_url" : "https://api.github.com/users/fjahr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fjahr/followers",
         "following_url" : "https://api.github.com/users/fjahr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fjahr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fjahr",
         "id" : 1322187,
         "login" : "fjahr",
         "node_id" : "MDQ6VXNlcjEzMjIxODc=",
         "organizations_url" : "https://api.github.com/users/fjahr/orgs",
         "received_events_url" : "https://api.github.com/users/fjahr/received_events",
         "repos_url" : "https://api.github.com/users/fjahr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fjahr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fjahr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fjahr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29720#discussion_r1576507502"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29720"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1576507502"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I've implemented this in fa032a5792c79b76b038827977c8a5eafd8e297b, but changed it after https://github.com/bitcoin/bitcoin/pull/29720#discussion_r1537955050 to faeb2056cf5c63af727994a6775d27a3e160ceed.\r\n\r\nWhen evaluating whether this is a breaking change, I don't think it can affect any downstream projects, because Assume-Utxo is an incomplete, experimental, regtest-only feature. Also, if changing the `txcount` return value were to affect downstream projects, then b50554babdddf452acaa51bac757736766c70e81 was already a breaking change.\r\n",
      "commit_id" : "faeb2056cf5c63af727994a6775d27a3e160ceed",
      "created_at" : "2024-04-23T15:57:10Z",
      "diff_hunk" : "@@ -1633,13 +1633,19 @@ static RPCHelpMan getchaintxstats()\n                     RPCResult::Type::OBJ, \"\", \"\",\n                     {\n                         {RPCResult::Type::NUM_TIME, \"time\", \"The timestamp for the final block in the window, expressed in \" + UNIX_EPOCH_TIME},\n-                        {RPCResult::Type::NUM, \"txcount\", \"The total number of transactions in the chain up to that point\"},\n+                        {RPCResult::Type::NUM, \"txcount\", /*optional=*/true,",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29720#discussion_r1576507502",
      "id" : 1576507502,
      "in_reply_to_id" : 1576472588,
      "line" : 1636,
      "node_id" : "PRRC_kwDOABII585d95hu",
      "original_commit_id" : "faeb2056cf5c63af727994a6775d27a3e160ceed",
      "original_line" : 1636,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "src/rpc/blockchain.cpp",
      "position" : 5,
      "pull_request_review_id" : 2017673761,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29720",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1576507502/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-04-23T15:57:10Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1576507502",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/maflcko/events{/privacy}",
         "followers_url" : "https://api.github.com/users/maflcko/followers",
         "following_url" : "https://api.github.com/users/maflcko/following{/other_user}",
         "gists_url" : "https://api.github.com/users/maflcko/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/maflcko",
         "id" : 6399679,
         "login" : "maflcko",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/maflcko/orgs",
         "received_events_url" : "https://api.github.com/users/maflcko/received_events",
         "repos_url" : "https://api.github.com/users/maflcko/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/maflcko/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/maflcko/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/maflcko"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29720#discussion_r1576521230"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29720"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1576521230"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Yeah, changing the return value wouldn't be much of a concern, but a missing key has higher potential to crash something.\r\n\r\n> When evaluating whether this is a breaking change, I don't think it can affect any downstream projects, because Assume-Utxo is an incomplete, experimental, regtest-only feature. \r\n\r\n(*testnet/regtest-only) I'm pretty much with you here but [others might not be](https://github.com/bitcoin/bitcoin/pull/29612#pullrequestreview-1974818797) though the utxo set dump might also be used in a different context. Feel free to leave the approach as is, I am fine with it.",
      "commit_id" : "faeb2056cf5c63af727994a6775d27a3e160ceed",
      "created_at" : "2024-04-23T16:06:48Z",
      "diff_hunk" : "@@ -1633,13 +1633,19 @@ static RPCHelpMan getchaintxstats()\n                     RPCResult::Type::OBJ, \"\", \"\",\n                     {\n                         {RPCResult::Type::NUM_TIME, \"time\", \"The timestamp for the final block in the window, expressed in \" + UNIX_EPOCH_TIME},\n-                        {RPCResult::Type::NUM, \"txcount\", \"The total number of transactions in the chain up to that point\"},\n+                        {RPCResult::Type::NUM, \"txcount\", /*optional=*/true,",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29720#discussion_r1576521230",
      "id" : 1576521230,
      "in_reply_to_id" : 1576472588,
      "line" : 1636,
      "node_id" : "PRRC_kwDOABII585d984O",
      "original_commit_id" : "faeb2056cf5c63af727994a6775d27a3e160ceed",
      "original_line" : 1636,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "src/rpc/blockchain.cpp",
      "position" : 5,
      "pull_request_review_id" : 2017694765,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29720",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1576521230/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-04-23T16:06:48Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1576521230",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1322187?v=4",
         "events_url" : "https://api.github.com/users/fjahr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fjahr/followers",
         "following_url" : "https://api.github.com/users/fjahr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fjahr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fjahr",
         "id" : 1322187,
         "login" : "fjahr",
         "node_id" : "MDQ6VXNlcjEzMjIxODc=",
         "organizations_url" : "https://api.github.com/users/fjahr/orgs",
         "received_events_url" : "https://api.github.com/users/fjahr/received_events",
         "repos_url" : "https://api.github.com/users/fjahr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fjahr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fjahr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fjahr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29720#discussion_r1576536504"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29720"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1576536504"
         }
      },
      "author_association" : "MEMBER",
      "body" : "> (*testnet/regtest-only)\r\n\r\nA good catch. Looks like is in all networks, except for `main`, so I guess it is still fine.",
      "commit_id" : "faeb2056cf5c63af727994a6775d27a3e160ceed",
      "created_at" : "2024-04-23T16:18:33Z",
      "diff_hunk" : "@@ -1633,13 +1633,19 @@ static RPCHelpMan getchaintxstats()\n                     RPCResult::Type::OBJ, \"\", \"\",\n                     {\n                         {RPCResult::Type::NUM_TIME, \"time\", \"The timestamp for the final block in the window, expressed in \" + UNIX_EPOCH_TIME},\n-                        {RPCResult::Type::NUM, \"txcount\", \"The total number of transactions in the chain up to that point\"},\n+                        {RPCResult::Type::NUM, \"txcount\", /*optional=*/true,",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29720#discussion_r1576536504",
      "id" : 1576536504,
      "in_reply_to_id" : 1576472588,
      "line" : 1636,
      "node_id" : "PRRC_kwDOABII585d-Am4",
      "original_commit_id" : "faeb2056cf5c63af727994a6775d27a3e160ceed",
      "original_line" : 1636,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "src/rpc/blockchain.cpp",
      "position" : 5,
      "pull_request_review_id" : 2017718910,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29720",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1576536504/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-04-23T16:18:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1576536504",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/maflcko/events{/privacy}",
         "followers_url" : "https://api.github.com/users/maflcko/followers",
         "following_url" : "https://api.github.com/users/maflcko/following{/other_user}",
         "gists_url" : "https://api.github.com/users/maflcko/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/maflcko",
         "id" : 6399679,
         "login" : "maflcko",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/maflcko/orgs",
         "received_events_url" : "https://api.github.com/users/maflcko/received_events",
         "repos_url" : "https://api.github.com/users/maflcko/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/maflcko/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/maflcko/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/maflcko"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29720#discussion_r1580933666"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29720"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1580933666"
         }
      },
      "author_association" : "MEMBER",
      "body" : "We're breaking the format anyway with #29612 so might as well introduce other breaking changes now.",
      "commit_id" : "faeb2056cf5c63af727994a6775d27a3e160ceed",
      "created_at" : "2024-04-26T12:05:34Z",
      "diff_hunk" : "@@ -1633,13 +1633,19 @@ static RPCHelpMan getchaintxstats()\n                     RPCResult::Type::OBJ, \"\", \"\",\n                     {\n                         {RPCResult::Type::NUM_TIME, \"time\", \"The timestamp for the final block in the window, expressed in \" + UNIX_EPOCH_TIME},\n-                        {RPCResult::Type::NUM, \"txcount\", \"The total number of transactions in the chain up to that point\"},\n+                        {RPCResult::Type::NUM, \"txcount\", /*optional=*/true,",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29720#discussion_r1580933666",
      "id" : 1580933666,
      "in_reply_to_id" : 1576472588,
      "line" : 1636,
      "node_id" : "PRRC_kwDOABII585eOyIi",
      "original_commit_id" : "faeb2056cf5c63af727994a6775d27a3e160ceed",
      "original_line" : 1636,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "src/rpc/blockchain.cpp",
      "position" : 5,
      "pull_request_review_id" : 2024888152,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29720",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1580933666/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-04-26T12:05:35Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1580933666",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29720#discussion_r1580936006"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29720"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1580936006"
         }
      },
      "author_association" : "MEMBER",
      "body" : "The window can contain the snapshot height? If so then it should really check that _all_ `txcount` values exist.",
      "commit_id" : "faeb2056cf5c63af727994a6775d27a3e160ceed",
      "created_at" : "2024-04-26T12:07:58Z",
      "diff_hunk" : "@@ -1633,13 +1633,19 @@ static RPCHelpMan getchaintxstats()\n                     RPCResult::Type::OBJ, \"\", \"\",\n                     {\n                         {RPCResult::Type::NUM_TIME, \"time\", \"The timestamp for the final block in the window, expressed in \" + UNIX_EPOCH_TIME},\n-                        {RPCResult::Type::NUM, \"txcount\", \"The total number of transactions in the chain up to that point\"},\n+                        {RPCResult::Type::NUM, \"txcount\", /*optional=*/true,\n+                         \"The total number of transactions in the chain up to that point, if known. \"\n+                         \"It may be unknown when using Assume-Utxo.\"},\n                         {RPCResult::Type::STR_HEX, \"window_final_block_hash\", \"The hash of the final block in the window\"},\n                         {RPCResult::Type::NUM, \"window_final_block_height\", \"The height of the final block in the window.\"},\n                         {RPCResult::Type::NUM, \"window_block_count\", \"Size of the window in number of blocks\"},\n-                        {RPCResult::Type::NUM, \"window_tx_count\", /*optional=*/true, \"The number of transactions in the window. Only returned if \\\"window_block_count\\\" is > 0\"},\n+                        {RPCResult::Type::NUM, \"window_tx_count\", /*optional=*/true,\n+                         \"The number of transactions in the window. \"\n+                         \"Only returned if \\\"window_block_count\\\" is > 0 and if txcount exists for the start end end of the window.\"},",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29720#discussion_r1580936006",
      "id" : 1580936006,
      "line" : 1644,
      "node_id" : "PRRC_kwDOABII585eOytG",
      "original_commit_id" : "faeb2056cf5c63af727994a6775d27a3e160ceed",
      "original_line" : 1644,
      "original_position" : 14,
      "original_start_line" : null,
      "path" : "src/rpc/blockchain.cpp",
      "position" : 14,
      "pull_request_review_id" : 2024892089,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29720",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1580936006/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-04-26T12:09:09Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1580936006",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29720#discussion_r1580966108"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29720"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1580966108"
         }
      },
      "author_association" : "MEMBER",
      "body" : "> The window can contain the snapshot height? If so then it should really check that _all_ `txcount` values exist.\r\n\r\nWhy? Can you explain this a bit more? The result is not influenced by values that are not used in the calculation. For example, if the windows is [a, x, y, z, b] and you calculate `b - a`, then the values of x, y, z are irrelevant.",
      "commit_id" : "faeb2056cf5c63af727994a6775d27a3e160ceed",
      "created_at" : "2024-04-26T12:35:05Z",
      "diff_hunk" : "@@ -1633,13 +1633,19 @@ static RPCHelpMan getchaintxstats()\n                     RPCResult::Type::OBJ, \"\", \"\",\n                     {\n                         {RPCResult::Type::NUM_TIME, \"time\", \"The timestamp for the final block in the window, expressed in \" + UNIX_EPOCH_TIME},\n-                        {RPCResult::Type::NUM, \"txcount\", \"The total number of transactions in the chain up to that point\"},\n+                        {RPCResult::Type::NUM, \"txcount\", /*optional=*/true,\n+                         \"The total number of transactions in the chain up to that point, if known. \"\n+                         \"It may be unknown when using Assume-Utxo.\"},\n                         {RPCResult::Type::STR_HEX, \"window_final_block_hash\", \"The hash of the final block in the window\"},\n                         {RPCResult::Type::NUM, \"window_final_block_height\", \"The height of the final block in the window.\"},\n                         {RPCResult::Type::NUM, \"window_block_count\", \"Size of the window in number of blocks\"},\n-                        {RPCResult::Type::NUM, \"window_tx_count\", /*optional=*/true, \"The number of transactions in the window. Only returned if \\\"window_block_count\\\" is > 0\"},\n+                        {RPCResult::Type::NUM, \"window_tx_count\", /*optional=*/true,\n+                         \"The number of transactions in the window. \"\n+                         \"Only returned if \\\"window_block_count\\\" is > 0 and if txcount exists for the start end end of the window.\"},",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29720#discussion_r1580966108",
      "id" : 1580966108,
      "in_reply_to_id" : 1580936006,
      "line" : 1644,
      "node_id" : "PRRC_kwDOABII585eO6Dc",
      "original_commit_id" : "faeb2056cf5c63af727994a6775d27a3e160ceed",
      "original_line" : 1644,
      "original_position" : 14,
      "original_start_line" : null,
      "path" : "src/rpc/blockchain.cpp",
      "position" : 14,
      "pull_request_review_id" : 2024939927,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29720",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1580966108/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-04-26T12:35:05Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1580966108",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/maflcko/events{/privacy}",
         "followers_url" : "https://api.github.com/users/maflcko/followers",
         "following_url" : "https://api.github.com/users/maflcko/following{/other_user}",
         "gists_url" : "https://api.github.com/users/maflcko/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/maflcko",
         "id" : 6399679,
         "login" : "maflcko",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/maflcko/orgs",
         "received_events_url" : "https://api.github.com/users/maflcko/received_events",
         "repos_url" : "https://api.github.com/users/maflcko/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/maflcko/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/maflcko/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/maflcko"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29720#discussion_r1580968591"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29720"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1580968591"
         }
      },
      "author_association" : "MEMBER",
      "body" : "> We're breaking the format anyway with #29612 so might as well introduce other breaking changes now.\r\n\r\nNot sure why that pull request would be relevant to the changes here. The two RPCs are completely independent and the behavior or interface of one should not interact with the other.",
      "commit_id" : "faeb2056cf5c63af727994a6775d27a3e160ceed",
      "created_at" : "2024-04-26T12:37:32Z",
      "diff_hunk" : "@@ -1633,13 +1633,19 @@ static RPCHelpMan getchaintxstats()\n                     RPCResult::Type::OBJ, \"\", \"\",\n                     {\n                         {RPCResult::Type::NUM_TIME, \"time\", \"The timestamp for the final block in the window, expressed in \" + UNIX_EPOCH_TIME},\n-                        {RPCResult::Type::NUM, \"txcount\", \"The total number of transactions in the chain up to that point\"},\n+                        {RPCResult::Type::NUM, \"txcount\", /*optional=*/true,",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29720#discussion_r1580968591",
      "id" : 1580968591,
      "in_reply_to_id" : 1576472588,
      "line" : 1636,
      "node_id" : "PRRC_kwDOABII585eO6qP",
      "original_commit_id" : "faeb2056cf5c63af727994a6775d27a3e160ceed",
      "original_line" : 1636,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "src/rpc/blockchain.cpp",
      "position" : 5,
      "pull_request_review_id" : 2024944212,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29720",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1580968591/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-04-26T12:37:32Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1580968591",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/maflcko/events{/privacy}",
         "followers_url" : "https://api.github.com/users/maflcko/followers",
         "following_url" : "https://api.github.com/users/maflcko/following{/other_user}",
         "gists_url" : "https://api.github.com/users/maflcko/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/maflcko",
         "id" : 6399679,
         "login" : "maflcko",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/maflcko/orgs",
         "received_events_url" : "https://api.github.com/users/maflcko/received_events",
         "repos_url" : "https://api.github.com/users/maflcko/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/maflcko/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/maflcko/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/maflcko"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29720#discussion_r1580972472"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29720"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1580972472"
         }
      },
      "author_association" : "MEMBER",
      "body" : "```\r\nrpc/blockchain.cpp: In function âgetchaintxstats()::<lambda(const RPCHelpMan&, const JSONRPCRequest&)>â:\r\nrpc/blockchain.cpp:1707:34: warning: â*(std::_Optional_payload_base<unsigned int>::_Storage<unsigned int, true>*)((char*)&window_tx_count + offsetof(const std::optional<unsigned int>,std::optional<unsigned int>::<unnamed>.std::_Optional_base<unsigned int, true, true>::<unnamed>)).std::_Optional_payload_base<unsigned int>::_Storage<unsigned int, true>::_M_valueâ may be used uninitialized [-Wmaybe-uninitialized]\r\n 1707 |             ret.pushKV(\"txrate\", double(*window_tx_count) / nTimeDiff);\r\n      |                                  ^~~~~~~~~~~~~~~~~~~~~~~~\r\nrpc/blockchain.cpp:1689:16: note: â*(std::_Optional_payload_base<unsigned int>::_Storage<unsigned int, true>*)((char*)&window_tx_count + offsetof(const std::optional<unsigned int>,std::optional<unsigned int>::<unnamed>.std::_Optional_base<unsigned int, true, true>::<unnamed>)).std::_Optional_payload_base<unsigned int>::_Storage<unsigned int, true>::_M_valueâ was declared here\r\n 1689 |     const auto window_tx_count{\r\n      |                ^~~~~~~~~~~~~~~\r\n```\r\n\r\nUbuntu 23.10 with gcc 13.2.0\r\n\r\nWhich seems spurious, but it goes away with e.g.:\r\n\r\n```cpp\r\n    if (blockcount > 0) {\r\n        if (window_tx_count) {\r\n            ret.pushKV(\"window_tx_count\", *window_tx_count);\r\n            if (nTimeDiff > 0) {\r\n                ret.pushKV(\"txrate\", double(*window_tx_count) / nTimeDiff);\r\n            }\r\n        }\r\n        ret.pushKV(\"window_interval\", nTimeDiff);\r\n    }\r\n```",
      "commit_id" : "faeb2056cf5c63af727994a6775d27a3e160ceed",
      "created_at" : "2024-04-26T12:40:43Z",
      "diff_hunk" : "@@ -1680,19 +1686,25 @@ static RPCHelpMan getchaintxstats()\n \n     const CBlockIndex& past_block{*CHECK_NONFATAL(pindex->GetAncestor(pindex->nHeight - blockcount))};\n     const int64_t nTimeDiff{pindex->GetMedianTimePast() - past_block.GetMedianTimePast()};\n-    const int nTxDiff = pindex->nChainTx - past_block.nChainTx;\n+    const auto window_tx_count{\n+        (pindex->nChainTx != 0 && past_block.nChainTx != 0) ? std::optional{pindex->nChainTx - past_block.nChainTx} : std::nullopt,\n+    };\n \n     UniValue ret(UniValue::VOBJ);\n     ret.pushKV(\"time\", (int64_t)pindex->nTime);\n-    ret.pushKV(\"txcount\", (int64_t)pindex->nChainTx);\n+    if (pindex->nChainTx) {\n+        ret.pushKV(\"txcount\", pindex->nChainTx);\n+    }\n     ret.pushKV(\"window_final_block_hash\", pindex->GetBlockHash().GetHex());\n     ret.pushKV(\"window_final_block_height\", pindex->nHeight);\n     ret.pushKV(\"window_block_count\", blockcount);\n     if (blockcount > 0) {\n-        ret.pushKV(\"window_tx_count\", nTxDiff);\n+        if (window_tx_count) {\n+            ret.pushKV(\"window_tx_count\", *window_tx_count);\n+        }\n         ret.pushKV(\"window_interval\", nTimeDiff);\n-        if (nTimeDiff > 0) {\n-            ret.pushKV(\"txrate\", ((double)nTxDiff) / nTimeDiff);\n+        if (nTimeDiff > 0 && window_tx_count) {\n+            ret.pushKV(\"txrate\", double(*window_tx_count) / nTimeDiff);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29720#discussion_r1580972472",
      "id" : 1580972472,
      "line" : 1707,
      "node_id" : "PRRC_kwDOABII585eO7m4",
      "original_commit_id" : "faeb2056cf5c63af727994a6775d27a3e160ceed",
      "original_line" : 1707,
      "original_position" : 50,
      "original_start_line" : null,
      "path" : "src/rpc/blockchain.cpp",
      "position" : 50,
      "pull_request_review_id" : 2024903332,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29720",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1580972472/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-04-26T12:53:10Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1580972472",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29720#discussion_r1581000551"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29720"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1581000551"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Both are listed as critical for mainnet release in #29616. If one needs a breaking change, it's fine for the other to also make one.",
      "commit_id" : "faeb2056cf5c63af727994a6775d27a3e160ceed",
      "created_at" : "2024-04-26T12:57:27Z",
      "diff_hunk" : "@@ -1633,13 +1633,19 @@ static RPCHelpMan getchaintxstats()\n                     RPCResult::Type::OBJ, \"\", \"\",\n                     {\n                         {RPCResult::Type::NUM_TIME, \"time\", \"The timestamp for the final block in the window, expressed in \" + UNIX_EPOCH_TIME},\n-                        {RPCResult::Type::NUM, \"txcount\", \"The total number of transactions in the chain up to that point\"},\n+                        {RPCResult::Type::NUM, \"txcount\", /*optional=*/true,",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29720#discussion_r1581000551",
      "id" : 1581000551,
      "in_reply_to_id" : 1576472588,
      "line" : 1636,
      "node_id" : "PRRC_kwDOABII585ePCdn",
      "original_commit_id" : "faeb2056cf5c63af727994a6775d27a3e160ceed",
      "original_line" : 1636,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "src/rpc/blockchain.cpp",
      "position" : 5,
      "pull_request_review_id" : 2024992251,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29720",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1581000551/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-04-26T12:57:28Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1581000551",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29720#discussion_r1581006151"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29720"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1581006151"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Let's say we have blocks [1,2,3,4,5,6,7,8,9] and block 6 is the snapshot. The background sync just processed block 3, foreground sync is past 9. You ask for the window 1 - 7. In that case `nChainTx` for (1) and (7) are set, but's not set for (4) and (5).\r\n\r\nHowever as you say, this not a problem when subtracting `nChainTx` of block (1) from `nChainTx` of block (7).",
      "commit_id" : "faeb2056cf5c63af727994a6775d27a3e160ceed",
      "created_at" : "2024-04-26T13:02:18Z",
      "diff_hunk" : "@@ -1633,13 +1633,19 @@ static RPCHelpMan getchaintxstats()\n                     RPCResult::Type::OBJ, \"\", \"\",\n                     {\n                         {RPCResult::Type::NUM_TIME, \"time\", \"The timestamp for the final block in the window, expressed in \" + UNIX_EPOCH_TIME},\n-                        {RPCResult::Type::NUM, \"txcount\", \"The total number of transactions in the chain up to that point\"},\n+                        {RPCResult::Type::NUM, \"txcount\", /*optional=*/true,\n+                         \"The total number of transactions in the chain up to that point, if known. \"\n+                         \"It may be unknown when using Assume-Utxo.\"},\n                         {RPCResult::Type::STR_HEX, \"window_final_block_hash\", \"The hash of the final block in the window\"},\n                         {RPCResult::Type::NUM, \"window_final_block_height\", \"The height of the final block in the window.\"},\n                         {RPCResult::Type::NUM, \"window_block_count\", \"Size of the window in number of blocks\"},\n-                        {RPCResult::Type::NUM, \"window_tx_count\", /*optional=*/true, \"The number of transactions in the window. Only returned if \\\"window_block_count\\\" is > 0\"},\n+                        {RPCResult::Type::NUM, \"window_tx_count\", /*optional=*/true,\n+                         \"The number of transactions in the window. \"\n+                         \"Only returned if \\\"window_block_count\\\" is > 0 and if txcount exists for the start end end of the window.\"},",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29720#discussion_r1581006151",
      "id" : 1581006151,
      "in_reply_to_id" : 1580936006,
      "line" : 1644,
      "node_id" : "PRRC_kwDOABII585ePD1H",
      "original_commit_id" : "faeb2056cf5c63af727994a6775d27a3e160ceed",
      "original_line" : 1644,
      "original_position" : 14,
      "original_start_line" : null,
      "path" : "src/rpc/blockchain.cpp",
      "position" : 14,
      "pull_request_review_id" : 2025002092,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29720",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1581006151/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-04-26T13:02:18Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1581006151",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29720#discussion_r1581015988"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29720"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1581015988"
         }
      },
      "author_association" : "MEMBER",
      "body" : "> Both are listed as critical for mainnet release in #29616. If one needs a breaking change, it's fine for the other to also make one.\r\n\r\nNot sure. That doesn't mean that https://github.com/bitcoin/bitcoin/pull/29612  will be merged in its current form. One could come up with a non-breaking version of 29612, for example.\r\n\r\nI think the pull requests should be evaluated independently.\r\n\r\nIn any case, when evaluating whether *this pull request* is a breaking change, I don't think it can affect any downstream projects, because Assume-Utxo is an incomplete, experimental, non-mainnet (test-only) feature. Also, if changing the txcount return value were to affect downstream projects, then https://github.com/bitcoin/bitcoin/commit/b50554babdddf452acaa51bac757736766c70e81 was already a breaking change.",
      "commit_id" : "faeb2056cf5c63af727994a6775d27a3e160ceed",
      "created_at" : "2024-04-26T13:09:15Z",
      "diff_hunk" : "@@ -1633,13 +1633,19 @@ static RPCHelpMan getchaintxstats()\n                     RPCResult::Type::OBJ, \"\", \"\",\n                     {\n                         {RPCResult::Type::NUM_TIME, \"time\", \"The timestamp for the final block in the window, expressed in \" + UNIX_EPOCH_TIME},\n-                        {RPCResult::Type::NUM, \"txcount\", \"The total number of transactions in the chain up to that point\"},\n+                        {RPCResult::Type::NUM, \"txcount\", /*optional=*/true,",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29720#discussion_r1581015988",
      "id" : 1581015988,
      "in_reply_to_id" : 1576472588,
      "line" : 1636,
      "node_id" : "PRRC_kwDOABII585ePGO0",
      "original_commit_id" : "faeb2056cf5c63af727994a6775d27a3e160ceed",
      "original_line" : 1636,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "src/rpc/blockchain.cpp",
      "position" : 5,
      "pull_request_review_id" : 2025018103,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29720",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1581015988/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-04-26T13:09:15Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1581015988",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/maflcko/events{/privacy}",
         "followers_url" : "https://api.github.com/users/maflcko/followers",
         "following_url" : "https://api.github.com/users/maflcko/following{/other_user}",
         "gists_url" : "https://api.github.com/users/maflcko/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/maflcko",
         "id" : 6399679,
         "login" : "maflcko",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/maflcko/orgs",
         "received_events_url" : "https://api.github.com/users/maflcko/received_events",
         "repos_url" : "https://api.github.com/users/maflcko/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/maflcko/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/maflcko/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/maflcko"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29720#discussion_r1581021830"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29720"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1581021830"
         }
      },
      "author_association" : "MEMBER",
      "body" : "> Which seems spurious, but it goes away with e.g.:\r\n\r\nNot sure about changing the code for a broken compiler warning. I am sure this warning already exists in other parts of the code, so if changing the code is a desire, then it should be done for the other places as well (and CI could check against it). However, my recommendation would be to report this to upstream with a minimal reproducer, if it still happens with g++14.0.1-beta",
      "commit_id" : "faeb2056cf5c63af727994a6775d27a3e160ceed",
      "created_at" : "2024-04-26T13:14:02Z",
      "diff_hunk" : "@@ -1680,19 +1686,25 @@ static RPCHelpMan getchaintxstats()\n \n     const CBlockIndex& past_block{*CHECK_NONFATAL(pindex->GetAncestor(pindex->nHeight - blockcount))};\n     const int64_t nTimeDiff{pindex->GetMedianTimePast() - past_block.GetMedianTimePast()};\n-    const int nTxDiff = pindex->nChainTx - past_block.nChainTx;\n+    const auto window_tx_count{\n+        (pindex->nChainTx != 0 && past_block.nChainTx != 0) ? std::optional{pindex->nChainTx - past_block.nChainTx} : std::nullopt,\n+    };\n \n     UniValue ret(UniValue::VOBJ);\n     ret.pushKV(\"time\", (int64_t)pindex->nTime);\n-    ret.pushKV(\"txcount\", (int64_t)pindex->nChainTx);\n+    if (pindex->nChainTx) {\n+        ret.pushKV(\"txcount\", pindex->nChainTx);\n+    }\n     ret.pushKV(\"window_final_block_hash\", pindex->GetBlockHash().GetHex());\n     ret.pushKV(\"window_final_block_height\", pindex->nHeight);\n     ret.pushKV(\"window_block_count\", blockcount);\n     if (blockcount > 0) {\n-        ret.pushKV(\"window_tx_count\", nTxDiff);\n+        if (window_tx_count) {\n+            ret.pushKV(\"window_tx_count\", *window_tx_count);\n+        }\n         ret.pushKV(\"window_interval\", nTimeDiff);\n-        if (nTimeDiff > 0) {\n-            ret.pushKV(\"txrate\", ((double)nTxDiff) / nTimeDiff);\n+        if (nTimeDiff > 0 && window_tx_count) {\n+            ret.pushKV(\"txrate\", double(*window_tx_count) / nTimeDiff);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29720#discussion_r1581021830",
      "id" : 1581021830,
      "in_reply_to_id" : 1580972472,
      "line" : 1707,
      "node_id" : "PRRC_kwDOABII585ePHqG",
      "original_commit_id" : "faeb2056cf5c63af727994a6775d27a3e160ceed",
      "original_line" : 1707,
      "original_position" : 50,
      "original_start_line" : null,
      "path" : "src/rpc/blockchain.cpp",
      "position" : 50,
      "pull_request_review_id" : 2025027902,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29720",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1581021830/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-04-26T13:14:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1581021830",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/maflcko/events{/privacy}",
         "followers_url" : "https://api.github.com/users/maflcko/followers",
         "following_url" : "https://api.github.com/users/maflcko/following{/other_user}",
         "gists_url" : "https://api.github.com/users/maflcko/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/maflcko",
         "id" : 6399679,
         "login" : "maflcko",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/maflcko/orgs",
         "received_events_url" : "https://api.github.com/users/maflcko/received_events",
         "repos_url" : "https://api.github.com/users/maflcko/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/maflcko/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/maflcko/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/maflcko"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29720#discussion_r1581023235"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29720"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1581023235"
         }
      },
      "author_association" : "MEMBER",
      "body" : "> However as you say, this not a problem when subtracting `nChainTx` of block (1) from `nChainTx` of block (7).\r\n\r\nOk, not sure what to do here then. I'll probably resolve the thread for now.",
      "commit_id" : "faeb2056cf5c63af727994a6775d27a3e160ceed",
      "created_at" : "2024-04-26T13:15:14Z",
      "diff_hunk" : "@@ -1633,13 +1633,19 @@ static RPCHelpMan getchaintxstats()\n                     RPCResult::Type::OBJ, \"\", \"\",\n                     {\n                         {RPCResult::Type::NUM_TIME, \"time\", \"The timestamp for the final block in the window, expressed in \" + UNIX_EPOCH_TIME},\n-                        {RPCResult::Type::NUM, \"txcount\", \"The total number of transactions in the chain up to that point\"},\n+                        {RPCResult::Type::NUM, \"txcount\", /*optional=*/true,\n+                         \"The total number of transactions in the chain up to that point, if known. \"\n+                         \"It may be unknown when using Assume-Utxo.\"},\n                         {RPCResult::Type::STR_HEX, \"window_final_block_hash\", \"The hash of the final block in the window\"},\n                         {RPCResult::Type::NUM, \"window_final_block_height\", \"The height of the final block in the window.\"},\n                         {RPCResult::Type::NUM, \"window_block_count\", \"Size of the window in number of blocks\"},\n-                        {RPCResult::Type::NUM, \"window_tx_count\", /*optional=*/true, \"The number of transactions in the window. Only returned if \\\"window_block_count\\\" is > 0\"},\n+                        {RPCResult::Type::NUM, \"window_tx_count\", /*optional=*/true,\n+                         \"The number of transactions in the window. \"\n+                         \"Only returned if \\\"window_block_count\\\" is > 0 and if txcount exists for the start end end of the window.\"},",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29720#discussion_r1581023235",
      "id" : 1581023235,
      "in_reply_to_id" : 1580936006,
      "line" : 1644,
      "node_id" : "PRRC_kwDOABII585ePIAD",
      "original_commit_id" : "faeb2056cf5c63af727994a6775d27a3e160ceed",
      "original_line" : 1644,
      "original_position" : 14,
      "original_start_line" : null,
      "path" : "src/rpc/blockchain.cpp",
      "position" : 14,
      "pull_request_review_id" : 2025030293,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29720",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1581023235/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-04-26T13:15:15Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1581023235",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/maflcko/events{/privacy}",
         "followers_url" : "https://api.github.com/users/maflcko/followers",
         "following_url" : "https://api.github.com/users/maflcko/following{/other_user}",
         "gists_url" : "https://api.github.com/users/maflcko/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/maflcko",
         "id" : 6399679,
         "login" : "maflcko",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/maflcko/orgs",
         "received_events_url" : "https://api.github.com/users/maflcko/received_events",
         "repos_url" : "https://api.github.com/users/maflcko/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/maflcko/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/maflcko/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/maflcko"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29720#discussion_r1581037929"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29720"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1581037929"
         }
      },
      "author_association" : "MEMBER",
      "body" : "> Not sure about changing the code for a broken compiler warning. \r\n\r\nIt's also slightly more readable because it checks `window_tx_count` only once.\r\n\r\n> I am sure this warning already exists in other parts of the code\r\n\r\nThis is the only warning thrown.\r\n",
      "commit_id" : "faeb2056cf5c63af727994a6775d27a3e160ceed",
      "created_at" : "2024-04-26T13:26:56Z",
      "diff_hunk" : "@@ -1680,19 +1686,25 @@ static RPCHelpMan getchaintxstats()\n \n     const CBlockIndex& past_block{*CHECK_NONFATAL(pindex->GetAncestor(pindex->nHeight - blockcount))};\n     const int64_t nTimeDiff{pindex->GetMedianTimePast() - past_block.GetMedianTimePast()};\n-    const int nTxDiff = pindex->nChainTx - past_block.nChainTx;\n+    const auto window_tx_count{\n+        (pindex->nChainTx != 0 && past_block.nChainTx != 0) ? std::optional{pindex->nChainTx - past_block.nChainTx} : std::nullopt,\n+    };\n \n     UniValue ret(UniValue::VOBJ);\n     ret.pushKV(\"time\", (int64_t)pindex->nTime);\n-    ret.pushKV(\"txcount\", (int64_t)pindex->nChainTx);\n+    if (pindex->nChainTx) {\n+        ret.pushKV(\"txcount\", pindex->nChainTx);\n+    }\n     ret.pushKV(\"window_final_block_hash\", pindex->GetBlockHash().GetHex());\n     ret.pushKV(\"window_final_block_height\", pindex->nHeight);\n     ret.pushKV(\"window_block_count\", blockcount);\n     if (blockcount > 0) {\n-        ret.pushKV(\"window_tx_count\", nTxDiff);\n+        if (window_tx_count) {\n+            ret.pushKV(\"window_tx_count\", *window_tx_count);\n+        }\n         ret.pushKV(\"window_interval\", nTimeDiff);\n-        if (nTimeDiff > 0) {\n-            ret.pushKV(\"txrate\", ((double)nTxDiff) / nTimeDiff);\n+        if (nTimeDiff > 0 && window_tx_count) {\n+            ret.pushKV(\"txrate\", double(*window_tx_count) / nTimeDiff);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29720#discussion_r1581037929",
      "id" : 1581037929,
      "in_reply_to_id" : 1580972472,
      "line" : 1707,
      "node_id" : "PRRC_kwDOABII585ePLlp",
      "original_commit_id" : "faeb2056cf5c63af727994a6775d27a3e160ceed",
      "original_line" : 1707,
      "original_position" : 50,
      "original_start_line" : null,
      "path" : "src/rpc/blockchain.cpp",
      "position" : 50,
      "pull_request_review_id" : 2025054469,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29720",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1581037929/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-04-26T13:26:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1581037929",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29720#discussion_r1581040393"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29720"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1581040393"
         }
      },
      "author_association" : "MEMBER",
      "body" : "> This is the only warning thrown.\r\n\r\nWhat about all the ones I get, or others? For example: https://api.cirrus-ci.com/v1/task/5983141741985792/logs/make.log",
      "commit_id" : "faeb2056cf5c63af727994a6775d27a3e160ceed",
      "created_at" : "2024-04-26T13:28:56Z",
      "diff_hunk" : "@@ -1680,19 +1686,25 @@ static RPCHelpMan getchaintxstats()\n \n     const CBlockIndex& past_block{*CHECK_NONFATAL(pindex->GetAncestor(pindex->nHeight - blockcount))};\n     const int64_t nTimeDiff{pindex->GetMedianTimePast() - past_block.GetMedianTimePast()};\n-    const int nTxDiff = pindex->nChainTx - past_block.nChainTx;\n+    const auto window_tx_count{\n+        (pindex->nChainTx != 0 && past_block.nChainTx != 0) ? std::optional{pindex->nChainTx - past_block.nChainTx} : std::nullopt,\n+    };\n \n     UniValue ret(UniValue::VOBJ);\n     ret.pushKV(\"time\", (int64_t)pindex->nTime);\n-    ret.pushKV(\"txcount\", (int64_t)pindex->nChainTx);\n+    if (pindex->nChainTx) {\n+        ret.pushKV(\"txcount\", pindex->nChainTx);\n+    }\n     ret.pushKV(\"window_final_block_hash\", pindex->GetBlockHash().GetHex());\n     ret.pushKV(\"window_final_block_height\", pindex->nHeight);\n     ret.pushKV(\"window_block_count\", blockcount);\n     if (blockcount > 0) {\n-        ret.pushKV(\"window_tx_count\", nTxDiff);\n+        if (window_tx_count) {\n+            ret.pushKV(\"window_tx_count\", *window_tx_count);\n+        }\n         ret.pushKV(\"window_interval\", nTimeDiff);\n-        if (nTimeDiff > 0) {\n-            ret.pushKV(\"txrate\", ((double)nTxDiff) / nTimeDiff);\n+        if (nTimeDiff > 0 && window_tx_count) {\n+            ret.pushKV(\"txrate\", double(*window_tx_count) / nTimeDiff);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29720#discussion_r1581040393",
      "id" : 1581040393,
      "in_reply_to_id" : 1580972472,
      "line" : 1707,
      "node_id" : "PRRC_kwDOABII585ePMMJ",
      "original_commit_id" : "faeb2056cf5c63af727994a6775d27a3e160ceed",
      "original_line" : 1707,
      "original_position" : 50,
      "original_start_line" : null,
      "path" : "src/rpc/blockchain.cpp",
      "position" : 50,
      "pull_request_review_id" : 2025058512,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29720",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1581040393/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-04-26T13:28:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1581040393",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/maflcko/events{/privacy}",
         "followers_url" : "https://api.github.com/users/maflcko/followers",
         "following_url" : "https://api.github.com/users/maflcko/following{/other_user}",
         "gists_url" : "https://api.github.com/users/maflcko/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/maflcko",
         "id" : 6399679,
         "login" : "maflcko",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/maflcko/orgs",
         "received_events_url" : "https://api.github.com/users/maflcko/received_events",
         "repos_url" : "https://api.github.com/users/maflcko/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/maflcko/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/maflcko/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/maflcko"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29720#discussion_r1581051238"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29720"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1581051238"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Or https://github.com/bitcoin/bitcoin/issues/29359",
      "commit_id" : "faeb2056cf5c63af727994a6775d27a3e160ceed",
      "created_at" : "2024-04-26T13:37:51Z",
      "diff_hunk" : "@@ -1680,19 +1686,25 @@ static RPCHelpMan getchaintxstats()\n \n     const CBlockIndex& past_block{*CHECK_NONFATAL(pindex->GetAncestor(pindex->nHeight - blockcount))};\n     const int64_t nTimeDiff{pindex->GetMedianTimePast() - past_block.GetMedianTimePast()};\n-    const int nTxDiff = pindex->nChainTx - past_block.nChainTx;\n+    const auto window_tx_count{\n+        (pindex->nChainTx != 0 && past_block.nChainTx != 0) ? std::optional{pindex->nChainTx - past_block.nChainTx} : std::nullopt,\n+    };\n \n     UniValue ret(UniValue::VOBJ);\n     ret.pushKV(\"time\", (int64_t)pindex->nTime);\n-    ret.pushKV(\"txcount\", (int64_t)pindex->nChainTx);\n+    if (pindex->nChainTx) {\n+        ret.pushKV(\"txcount\", pindex->nChainTx);\n+    }\n     ret.pushKV(\"window_final_block_hash\", pindex->GetBlockHash().GetHex());\n     ret.pushKV(\"window_final_block_height\", pindex->nHeight);\n     ret.pushKV(\"window_block_count\", blockcount);\n     if (blockcount > 0) {\n-        ret.pushKV(\"window_tx_count\", nTxDiff);\n+        if (window_tx_count) {\n+            ret.pushKV(\"window_tx_count\", *window_tx_count);\n+        }\n         ret.pushKV(\"window_interval\", nTimeDiff);\n-        if (nTimeDiff > 0) {\n-            ret.pushKV(\"txrate\", ((double)nTxDiff) / nTimeDiff);\n+        if (nTimeDiff > 0 && window_tx_count) {\n+            ret.pushKV(\"txrate\", double(*window_tx_count) / nTimeDiff);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29720#discussion_r1581051238",
      "id" : 1581051238,
      "in_reply_to_id" : 1580972472,
      "line" : 1707,
      "node_id" : "PRRC_kwDOABII585ePO1m",
      "original_commit_id" : "faeb2056cf5c63af727994a6775d27a3e160ceed",
      "original_line" : 1707,
      "original_position" : 50,
      "original_start_line" : null,
      "path" : "src/rpc/blockchain.cpp",
      "position" : 50,
      "pull_request_review_id" : 2025076689,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29720",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1581051238/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-04-26T13:37:51Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1581051238",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/maflcko/events{/privacy}",
         "followers_url" : "https://api.github.com/users/maflcko/followers",
         "following_url" : "https://api.github.com/users/maflcko/following{/other_user}",
         "gists_url" : "https://api.github.com/users/maflcko/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/maflcko",
         "id" : 6399679,
         "login" : "maflcko",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/maflcko/orgs",
         "received_events_url" : "https://api.github.com/users/maflcko/received_events",
         "repos_url" : "https://api.github.com/users/maflcko/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/maflcko/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/maflcko/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/maflcko"
      }
   }
]
