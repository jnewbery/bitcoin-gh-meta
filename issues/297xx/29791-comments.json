[
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage\nFor detailed information about the code coverage, see the [test coverage report](https://corecheck.dev/bitcoin/bitcoin/pulls/29791).\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| ACK | [maflcko](https://github.com/bitcoin/bitcoin/pull/29791#issuecomment-2033837668), [tdb3](https://github.com/bitcoin/bitcoin/pull/29791#issuecomment-2036073972) |\n\nIf your review is incorrectly listed, please react with ð to this comment and the bot will ignore it on the next update.\n",
      "created_at" : "2024-04-02T16:13:08Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29791#issuecomment-2032476789",
      "id" : 2032476789,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/29791",
      "node_id" : "IC_kwDOABII5855JSJ1",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2032476789/reactions"
      },
      "updated_at" : "2024-04-04T02:50:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2032476789",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "Combined logs:\r\n[29791_feature_index_prune_combined_logs.gz](https://github.com/bitcoin/bitcoin/files/14843759/29791_feature_index_prune_combined_logs.gz)\r\n[29791_wallet_importdescriptors_combined_logs.gz](https://github.com/bitcoin/bitcoin/files/14843760/29791_wallet_importdescriptors_combined_logs.gz)\r\n",
      "created_at" : "2024-04-02T20:59:23Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29791#issuecomment-2033089178",
      "id" : 2033089178,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/29791",
      "node_id" : "IC_kwDOABII5855Lnqa",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2033089178/reactions"
      },
      "updated_at" : "2024-04-02T20:59:23Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2033089178",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/581308?v=4",
         "events_url" : "https://api.github.com/users/cbergqvist/events{/privacy}",
         "followers_url" : "https://api.github.com/users/cbergqvist/followers",
         "following_url" : "https://api.github.com/users/cbergqvist/following{/other_user}",
         "gists_url" : "https://api.github.com/users/cbergqvist/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/cbergqvist",
         "id" : 581308,
         "login" : "cbergqvist",
         "node_id" : "MDQ6VXNlcjU4MTMwOA==",
         "organizations_url" : "https://api.github.com/users/cbergqvist/orgs",
         "received_events_url" : "https://api.github.com/users/cbergqvist/received_events",
         "repos_url" : "https://api.github.com/users/cbergqvist/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/cbergqvist/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/cbergqvist/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/cbergqvist"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "lgtm ACK 49c0b8b2288e60ae22fcac5d03811cf36ecec058",
      "created_at" : "2024-04-03T08:04:26Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29791#issuecomment-2033837668",
      "id" : 2033837668,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/29791",
      "node_id" : "IC_kwDOABII5855OeZk",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2033837668/reactions"
      },
      "updated_at" : "2024-04-03T08:04:26Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2033837668",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/maflcko/events{/privacy}",
         "followers_url" : "https://api.github.com/users/maflcko/followers",
         "following_url" : "https://api.github.com/users/maflcko/following{/other_user}",
         "gists_url" : "https://api.github.com/users/maflcko/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/maflcko",
         "id" : 6399679,
         "login" : "maflcko",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/maflcko/orgs",
         "received_events_url" : "https://api.github.com/users/maflcko/received_events",
         "repos_url" : "https://api.github.com/users/maflcko/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/maflcko/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/maflcko/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/maflcko"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "Thanks for having a look @tdb3!\r\n\r\nAs mentioned in the summary, running without `--jobs=16` makes the tests succeed. I guess it is not a common parameter (even less common in conjunction with `--extended`).\r\n\r\nYour questions prompted me to perform the tests on older release branches to see if behavior changed recently. (No other tests failed but I didn't let `feature_dbcrash.py` and complete since it takes around 45 minutes (occasionally skipped some other stragglers as well)).\r\n\r\n*27.x* - Only `feature_index_prune.py` failed (4 runs), both failed (2 runs).\r\n\r\n*26.x* - Only `feature_index_prune.py` failed - `wallet_importdescriptors.py --descriptors` succeeded (4 runs)\r\n\r\n*25.x* - Only `feature_index_prune.py` failed - `wallet_importdescriptors.py --descriptors` succeeded (1 runs)\r\n\r\nThe fact that these two tests fail so consistently while no other tests fail helped increase my confidence in this change. The major reason `wallet_importdescriptors.py` is not failing as often probably lies in the difference in how much the timeouts are exceeded.\r\n\r\n> Might be worth running git blame to find the previous PR that is associated with the previous timeouts to see if there is rationale (a stretch, but worth a quick check).\r\n\r\nAgree that it might be fruitful to investigate the history of `wallet_importdescriptors.py` to pinpoint regressions, didn't have time today.",
      "created_at" : "2024-04-03T22:25:07Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29791#issuecomment-2035711744",
      "id" : 2035711744,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/29791",
      "node_id" : "IC_kwDOABII5855Vn8A",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2035711744/reactions"
      },
      "updated_at" : "2024-04-03T22:25:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2035711744",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/581308?v=4",
         "events_url" : "https://api.github.com/users/cbergqvist/events{/privacy}",
         "followers_url" : "https://api.github.com/users/cbergqvist/followers",
         "following_url" : "https://api.github.com/users/cbergqvist/following{/other_user}",
         "gists_url" : "https://api.github.com/users/cbergqvist/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/cbergqvist",
         "id" : 581308,
         "login" : "cbergqvist",
         "node_id" : "MDQ6VXNlcjU4MTMwOA==",
         "organizations_url" : "https://api.github.com/users/cbergqvist/orgs",
         "received_events_url" : "https://api.github.com/users/cbergqvist/received_events",
         "repos_url" : "https://api.github.com/users/cbergqvist/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/cbergqvist/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/cbergqvist/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/cbergqvist"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "@itornaza subtly prompted me to do some tests to find the sweet spot for the number of jobs on my hardware, which luckily helps motivate why running with 16 jobs is not unreasonable.\r\n\r\nThis is wall time running on a [RAM disk](https://github.com/bitcoin/bitcoin/blob/master/test/README.md#speed-up-test-runs-with-a-ram-disk) **without `--extended`**.\r\n```\r\njobs duration (s) results\r\n4    816          all passed\r\n8    454          all passed\r\n12   342          all passed\r\n16   300          all passed\r\n20   279          all passed\r\n24   264          all passed\r\n26   256          all passed\r\n28   261          all passed\r\n30   260          all passed\r\n```\r\n(These happened to be run on `26.x` branch, running the same on this PR (49c0b8b2288e60ae22fcac5d03811cf36ecec058) with 16 jobs got me 327 seconds, so things haven't moved too much).",
      "created_at" : "2024-04-03T22:28:49Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29791#issuecomment-2035716197",
      "id" : 2035716197,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/29791",
      "node_id" : "IC_kwDOABII5855VpBl",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2035716197/reactions"
      },
      "updated_at" : "2024-04-03T22:28:49Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2035716197",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/581308?v=4",
         "events_url" : "https://api.github.com/users/cbergqvist/events{/privacy}",
         "followers_url" : "https://api.github.com/users/cbergqvist/followers",
         "following_url" : "https://api.github.com/users/cbergqvist/following{/other_user}",
         "gists_url" : "https://api.github.com/users/cbergqvist/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/cbergqvist",
         "id" : 581308,
         "login" : "cbergqvist",
         "node_id" : "MDQ6VXNlcjU4MTMwOA==",
         "organizations_url" : "https://api.github.com/users/cbergqvist/orgs",
         "received_events_url" : "https://api.github.com/users/cbergqvist/received_events",
         "repos_url" : "https://api.github.com/users/cbergqvist/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/cbergqvist/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/cbergqvist/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/cbergqvist"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : ">As mentioned in the summary, running without --jobs=16 makes the tests succeed\r\n>\r\nOk, this gives me a bit more confidence that this may just be a simple case of resource contention from high concurrency slowing things down.  Omitting `--jobs` causes the default value of 4 jobs to be used.  In general, IIRC jobs != threads of execution (since some tests run multiple nodes, etc.).  I was also able to reproduce the failure of `feature_index_prune.py` with `--jobs=18` (on master).\r\n\r\n> Your questions prompted me to perform the tests on older release branches to see if behavior changed recently. (No other tests failed but I didn't let `feature_dbcrash.py` and complete since it takes around 45 minutes (occasionally skipped some other stragglers as well)).\r\n> \r\n> _27.x_ - Only `feature_index_prune.py` failed (4 runs), both failed (2 runs).\r\n> \r\n> _26.x_ - Only `feature_index_prune.py` failed - `wallet_importdescriptors.py --descriptors` succeeded (4 runs)\r\n> \r\n> _25.x_ - Only `feature_index_prune.py` failed - `wallet_importdescriptors.py --descriptors` succeeded (1 runs)\r\n> \r\n> The fact that these two tests fail so consistently while no other tests fail helped increase my confidence in this change. \r\n\r\nGood work gathering data.\r\n\r\nSince these tests only seem to be failing with high levels of concurrency, I'm ok with an ACK.  I don't have the time currently to further performance profile this, but maybe someone else does.\r\n\r\nACK for 49c0b8b2288e60ae22fcac5d03811cf36ecec058\r\n",
      "created_at" : "2024-04-04T02:50:53Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29791#issuecomment-2036073972",
      "id" : 2036073972,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/29791",
      "node_id" : "IC_kwDOABII5855XAX0",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2036073972/reactions"
      },
      "updated_at" : "2024-04-04T02:50:53Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2036073972",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/106488469?v=4",
         "events_url" : "https://api.github.com/users/tdb3/events{/privacy}",
         "followers_url" : "https://api.github.com/users/tdb3/followers",
         "following_url" : "https://api.github.com/users/tdb3/following{/other_user}",
         "gists_url" : "https://api.github.com/users/tdb3/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/tdb3",
         "id" : 106488469,
         "login" : "tdb3",
         "node_id" : "U_kgDOBljilQ",
         "organizations_url" : "https://api.github.com/users/tdb3/orgs",
         "received_events_url" : "https://api.github.com/users/tdb3/received_events",
         "repos_url" : "https://api.github.com/users/tdb3/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/tdb3/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/tdb3/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/tdb3"
      }
   }
]
