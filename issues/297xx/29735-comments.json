[
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage\nFor detailed information about the code coverage, see the [test coverage report](https://corecheck.dev/bitcoin/bitcoin/pulls/29735).\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| Concept ACK | [glozow](https://github.com/bitcoin/bitcoin/pull/29735#pullrequestreview-1960672199) |\n\nIf your review is incorrectly listed, please react with ð to this comment and the bot will ignore it on the next update.\n",
      "created_at" : "2024-03-26T14:41:50Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29735#issuecomment-2020621274",
      "id" : 2020621274,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/29735",
      "node_id" : "IC_kwDOABII5854cDva",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2020621274/reactions"
      },
      "updated_at" : "2024-03-27T11:08:38Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2020621274",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29735#discussion_r1539410139"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29735"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1539410139"
         }
      },
      "author_association" : "MEMBER",
      "body" : "is there an extra indent for this whole block? Also, might want to add some other things to this comment like\r\n- `-maxmempool` needs to be very small (i.e. 5) for this to work\r\n- if there are multiple nodes, note this doesn't run `sync_mempools`\r\n- assumes that `-minrelaytxfee` is 1sat/vB",
      "commit_id" : "4f8407cefa6ddb47b166b2c360d03778c0357a00",
      "created_at" : "2024-03-26T14:51:14Z",
      "diff_hunk" : "@@ -496,6 +496,48 @@ def check_node_connections(*, node, num_in, num_out):\n     assert_equal(info[\"connections_in\"], num_in)\n     assert_equal(info[\"connections_out\"], num_out)\n \n+# Allows simpler testing of scenarios with minfee != minrelay\n+def fill_mempool(test_framework, node, miniwallet):\n+        \"\"\"Fill mempool until eviction.\"\"\"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29735#discussion_r1539410139",
      "id" : 1539410139,
      "line" : 504,
      "node_id" : "PRRC_kwDOABII585bwYjb",
      "original_commit_id" : "aaa5125f1c65724b89d464be7f6d962afa0171a1",
      "original_line" : 504,
      "original_position" : 6,
      "original_start_line" : null,
      "path" : "test/functional/test_framework/util.py",
      "position" : 9,
      "pull_request_review_id" : 1960672199,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29735",
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1539410139/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-03-27T11:08:36Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1539410139",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/25183001?v=4",
         "events_url" : "https://api.github.com/users/glozow/events{/privacy}",
         "followers_url" : "https://api.github.com/users/glozow/followers",
         "following_url" : "https://api.github.com/users/glozow/following{/other_user}",
         "gists_url" : "https://api.github.com/users/glozow/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/glozow",
         "id" : 25183001,
         "login" : "glozow",
         "node_id" : "MDQ6VXNlcjI1MTgzMDAx",
         "organizations_url" : "https://api.github.com/users/glozow/orgs",
         "received_events_url" : "https://api.github.com/users/glozow/received_events",
         "repos_url" : "https://api.github.com/users/glozow/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/glozow/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/glozow/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/glozow"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29735#discussion_r1540871530"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29735"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1540871530"
         }
      },
      "author_association" : "MEMBER",
      "body" : " IIUC util is for more low-level stuff, but don't have better ideas other than throwing it on test_framework.py. Maybe @maflcko or @theStack would have an opinion on where we should put this?",
      "commit_id" : "4f8407cefa6ddb47b166b2c360d03778c0357a00",
      "created_at" : "2024-03-27T10:48:51Z",
      "diff_hunk" : "@@ -496,6 +496,48 @@ def check_node_connections(*, node, num_in, num_out):\n     assert_equal(info[\"connections_in\"], num_in)\n     assert_equal(info[\"connections_out\"], num_out)\n \n+# Allows simpler testing of scenarios with minfee != minrelay\n+def fill_mempool(test_framework, node, miniwallet):",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29735#discussion_r1540871530",
      "id" : 1540871530,
      "line" : 503,
      "node_id" : "PRRC_kwDOABII585b19Vq",
      "original_commit_id" : "aaa5125f1c65724b89d464be7f6d962afa0171a1",
      "original_line" : 503,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "test/functional/test_framework/util.py",
      "position" : 8,
      "pull_request_review_id" : 1960672199,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29735",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1540871530/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-03-27T11:08:36Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1540871530",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/25183001?v=4",
         "events_url" : "https://api.github.com/users/glozow/events{/privacy}",
         "followers_url" : "https://api.github.com/users/glozow/followers",
         "following_url" : "https://api.github.com/users/glozow/following{/other_user}",
         "gists_url" : "https://api.github.com/users/glozow/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/glozow",
         "id" : 25183001,
         "login" : "glozow",
         "node_id" : "MDQ6VXNlcjI1MTgzMDAx",
         "organizations_url" : "https://api.github.com/users/glozow/orgs",
         "received_events_url" : "https://api.github.com/users/glozow/received_events",
         "repos_url" : "https://api.github.com/users/glozow/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/glozow/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/glozow/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/glozow"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29735#discussion_r1540889727"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29735"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1540889727"
         }
      },
      "author_association" : "MEMBER",
      "body" : "unrelated renames?",
      "commit_id" : "4f8407cefa6ddb47b166b2c360d03778c0357a00",
      "created_at" : "2024-03-27T11:00:56Z",
      "diff_hunk" : "@@ -369,23 +375,58 @@ def test_maxfeerate_maxburn_submitpackage(self):\n         minrate_btc_kvb = min([chained_txn[\"fee\"] / chained_txn[\"tx\"].get_vsize() * 1000 for chained_txn in chained_txns])\n         chain_hex = [t[\"hex\"] for t in chained_txns]\n         pkg_result = node.submitpackage(chain_hex, maxfeerate=minrate_btc_kvb - Decimal(\"0.00000001\"))\n+\n+        # First tx failed in single transaction evaluation, so package message is generic\n+        assert_equal(pkg_result[\"package_msg\"], \"transaction failed\")\n         assert_equal(pkg_result[\"tx-results\"][chained_txns[0][\"wtxid\"]][\"error\"], \"max feerate exceeded\")\n         assert_equal(pkg_result[\"tx-results\"][chained_txns[1][\"wtxid\"]][\"error\"], \"bad-txns-inputs-missingorspent\")\n         assert_equal(node.getrawmempool(), [])\n \n+        # Make chain of two transactions where parent doesn't make minfee threshold\n+        # but child is too high fee\n+        fill_mempool(self, node, self.wallet)\n+        while node.getrawmempool() != []:\n+            self.generate(node, 1)\n+\n+        minrelay = node.getmempoolinfo()[\"minrelaytxfee\"]\n+        parent = self.wallet.create_self_transfer(\n+            fee_rate=minrelay,\n+        )\n+\n+        child = self.wallet.create_self_transfer(\n+            fee_rate=DEFAULT_FEE,\n+            utxo_to_spend=parent[\"new_utxo\"],\n+        )\n+\n+        pkg_result = node.submitpackage([parent[\"hex\"], child[\"hex\"]], maxfeerate=DEFAULT_FEE - Decimal(\"0.00000001\"))\n+\n+        # Package-wide error reported for package evaluation rejection\n+        assert_equal(pkg_result[\"package_msg\"], \"max feerate exceeded\")\n+        assert \"mempool min fee not met\" in pkg_result[\"tx-results\"][parent[\"wtxid\"]][\"error\"]\n+        assert_equal(pkg_result[\"tx-results\"][child[\"wtxid\"]][\"error\"], \"max feerate exceeded\")\n+        assert_equal(node.getrawmempool(), [])\n+\n+        # Reset minfee\n+        self.restart_node(0)\n+\n         self.log.info(\"Submitpackage maxburnamount arg testing\")\n-        tx = tx_from_hex(chain_hex[1])\n+        chained_txns_burn = self.wallet.create_self_transfer_chain(chain_length=2)\n+        chained_burn_hex = [t[\"hex\"] for t in chained_txns_burn]\n+\n+        tx = tx_from_hex(chained_burn_hex[1])\n         tx.vout[-1].scriptPubKey = b'a' * 10001 # scriptPubKey bigger than 10k IsUnspendable\n-        chain_hex = [chain_hex[0], tx.serialize().hex()]\n+        chained_burn_hex = [chained_burn_hex[0], tx.serialize().hex()]\n         # burn test is run before any package evaluation; nothing makes it in and we get broader exception\n-        assert_raises_rpc_error(-25, \"Unspendable output exceeds maximum configured by user\", node.submitpackage, chain_hex, 0, chained_txns[1][\"new_utxo\"][\"value\"] - Decimal(\"0.00000001\"))\n+        assert_raises_rpc_error(-25, \"Unspendable output exceeds maximum configured by user\", node.submitpackage, chained_burn_hex, 0, chained_txns_burn[1][\"new_utxo\"][\"value\"] - Decimal(\"0.00000001\"))\n         assert_equal(node.getrawmempool(), [])\n \n+        minrate_btc_kvb_burn = min([chained_txn_burn[\"fee\"] / chained_txn_burn[\"tx\"].get_vsize() * 1000 for chained_txn_burn in chained_txns_burn])\n+\n         # Relax the restrictions for both and send it; parent gets through as own subpackage\n-        pkg_result = node.submitpackage(chain_hex, maxfeerate=minrate_btc_kvb, maxburnamount=chained_txns[1][\"new_utxo\"][\"value\"])\n-        assert \"error\" not in pkg_result[\"tx-results\"][chained_txns[0][\"wtxid\"]]\n+        pkg_result = node.submitpackage(chained_burn_hex, maxfeerate=minrate_btc_kvb_burn, maxburnamount=chained_txns_burn[1][\"new_utxo\"][\"value\"])\n+        assert \"error\" not in pkg_result[\"tx-results\"][chained_txns_burn[0][\"wtxid\"]]\n         assert_equal(pkg_result[\"tx-results\"][tx.getwtxid()][\"error\"], \"scriptpubkey\")\n-        assert_equal(node.getrawmempool(), [chained_txns[0][\"txid\"]])\n+        assert_equal(node.getrawmempool(), [chained_txns_burn[0][\"txid\"]])",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29735#discussion_r1540889727",
      "id" : 1540889727,
      "line" : 430,
      "node_id" : "PRRC_kwDOABII585b2Bx_",
      "original_commit_id" : "5ae4dce79d304457bb419512e2a478cf6dd08b43",
      "original_line" : 430,
      "original_position" : 81,
      "original_start_line" : 377,
      "path" : "test/functional/rpc_packages.py",
      "position" : 82,
      "pull_request_review_id" : 1960672199,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29735",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1540889727/reactions"
      },
      "side" : "RIGHT",
      "start_line" : 377,
      "start_side" : "LEFT",
      "subject_type" : "line",
      "updated_at" : "2024-03-27T11:08:36Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1540889727",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/25183001?v=4",
         "events_url" : "https://api.github.com/users/glozow/events{/privacy}",
         "followers_url" : "https://api.github.com/users/glozow/followers",
         "following_url" : "https://api.github.com/users/glozow/following{/other_user}",
         "gists_url" : "https://api.github.com/users/glozow/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/glozow",
         "id" : 25183001,
         "login" : "glozow",
         "node_id" : "MDQ6VXNlcjI1MTgzMDAx",
         "organizations_url" : "https://api.github.com/users/glozow/orgs",
         "received_events_url" : "https://api.github.com/users/glozow/received_events",
         "repos_url" : "https://api.github.com/users/glozow/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/glozow/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/glozow/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/glozow"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29735#discussion_r1540891352"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29735"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1540891352"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Should this be \"transaction failed\" since it's an individual error?",
      "commit_id" : "4f8407cefa6ddb47b166b2c360d03778c0357a00",
      "created_at" : "2024-03-27T11:02:12Z",
      "diff_hunk" : "@@ -1366,6 +1366,8 @@ PackageMempoolAcceptResult MemPoolAccept::AcceptMultipleTransactions(const std::\n         // Individual modified feerate exceeded caller-defined max; abort\n         // N.B. this doesn't take into account CPFPs. Chunk-aware validation may be more robust.\n         if (args.m_client_maxfeerate && CFeeRate(ws.m_modified_fees, ws.m_vsize) > args.m_client_maxfeerate.value()) {\n+            // Need to set failure here both individually and at package level\n+            ws.m_state.Invalid(TxValidationResult::TX_MEMPOOL_POLICY, \"max feerate exceeded\", \"\");\n             package_state.Invalid(PackageValidationResult::PCKG_TX, \"max feerate exceeded\");",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29735#discussion_r1540891352",
      "id" : 1540891352,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585b2CLY",
      "original_commit_id" : "5ae4dce79d304457bb419512e2a478cf6dd08b43",
      "original_line" : 1371,
      "original_position" : 6,
      "original_start_line" : null,
      "path" : "src/validation.cpp",
      "position" : null,
      "pull_request_review_id" : 1960672199,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29735",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1540891352/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-03-27T11:08:36Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1540891352",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/25183001?v=4",
         "events_url" : "https://api.github.com/users/glozow/events{/privacy}",
         "followers_url" : "https://api.github.com/users/glozow/followers",
         "following_url" : "https://api.github.com/users/glozow/following{/other_user}",
         "gists_url" : "https://api.github.com/users/glozow/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/glozow",
         "id" : 25183001,
         "login" : "glozow",
         "node_id" : "MDQ6VXNlcjI1MTgzMDAx",
         "organizations_url" : "https://api.github.com/users/glozow/orgs",
         "received_events_url" : "https://api.github.com/users/glozow/received_events",
         "repos_url" : "https://api.github.com/users/glozow/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/glozow/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/glozow/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/glozow"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29735#discussion_r1541042929"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29735"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1541042929"
         }
      },
      "author_association" : "MEMBER",
      "body" : "it has `mine_large_block` et al which seem quite similar imo. I'll move it if there's something obviously better?",
      "commit_id" : "4f8407cefa6ddb47b166b2c360d03778c0357a00",
      "created_at" : "2024-03-27T12:46:58Z",
      "diff_hunk" : "@@ -496,6 +496,48 @@ def check_node_connections(*, node, num_in, num_out):\n     assert_equal(info[\"connections_in\"], num_in)\n     assert_equal(info[\"connections_out\"], num_out)\n \n+# Allows simpler testing of scenarios with minfee != minrelay\n+def fill_mempool(test_framework, node, miniwallet):",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29735#discussion_r1541042929",
      "id" : 1541042929,
      "in_reply_to_id" : 1540871530,
      "line" : 503,
      "node_id" : "PRRC_kwDOABII585b2nLx",
      "original_commit_id" : "aaa5125f1c65724b89d464be7f6d962afa0171a1",
      "original_line" : 503,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "test/functional/test_framework/util.py",
      "position" : 8,
      "pull_request_review_id" : 1963219672,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29735",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1541042929/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-03-27T12:46:58Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1541042929",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5767891?v=4",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "node_id" : "MDQ6VXNlcjU3Njc4OTE=",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29735#discussion_r1541046523"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29735"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1541046523"
         }
      },
      "author_association" : "MEMBER",
      "body" : "was confusing to me to re-use the names for two distinct transaction chains (yeah I wrote the original test, so what?)",
      "commit_id" : "4f8407cefa6ddb47b166b2c360d03778c0357a00",
      "created_at" : "2024-03-27T12:49:37Z",
      "diff_hunk" : "@@ -369,23 +375,58 @@ def test_maxfeerate_maxburn_submitpackage(self):\n         minrate_btc_kvb = min([chained_txn[\"fee\"] / chained_txn[\"tx\"].get_vsize() * 1000 for chained_txn in chained_txns])\n         chain_hex = [t[\"hex\"] for t in chained_txns]\n         pkg_result = node.submitpackage(chain_hex, maxfeerate=minrate_btc_kvb - Decimal(\"0.00000001\"))\n+\n+        # First tx failed in single transaction evaluation, so package message is generic\n+        assert_equal(pkg_result[\"package_msg\"], \"transaction failed\")\n         assert_equal(pkg_result[\"tx-results\"][chained_txns[0][\"wtxid\"]][\"error\"], \"max feerate exceeded\")\n         assert_equal(pkg_result[\"tx-results\"][chained_txns[1][\"wtxid\"]][\"error\"], \"bad-txns-inputs-missingorspent\")\n         assert_equal(node.getrawmempool(), [])\n \n+        # Make chain of two transactions where parent doesn't make minfee threshold\n+        # but child is too high fee\n+        fill_mempool(self, node, self.wallet)\n+        while node.getrawmempool() != []:\n+            self.generate(node, 1)\n+\n+        minrelay = node.getmempoolinfo()[\"minrelaytxfee\"]\n+        parent = self.wallet.create_self_transfer(\n+            fee_rate=minrelay,\n+        )\n+\n+        child = self.wallet.create_self_transfer(\n+            fee_rate=DEFAULT_FEE,\n+            utxo_to_spend=parent[\"new_utxo\"],\n+        )\n+\n+        pkg_result = node.submitpackage([parent[\"hex\"], child[\"hex\"]], maxfeerate=DEFAULT_FEE - Decimal(\"0.00000001\"))\n+\n+        # Package-wide error reported for package evaluation rejection\n+        assert_equal(pkg_result[\"package_msg\"], \"max feerate exceeded\")\n+        assert \"mempool min fee not met\" in pkg_result[\"tx-results\"][parent[\"wtxid\"]][\"error\"]\n+        assert_equal(pkg_result[\"tx-results\"][child[\"wtxid\"]][\"error\"], \"max feerate exceeded\")\n+        assert_equal(node.getrawmempool(), [])\n+\n+        # Reset minfee\n+        self.restart_node(0)\n+\n         self.log.info(\"Submitpackage maxburnamount arg testing\")\n-        tx = tx_from_hex(chain_hex[1])\n+        chained_txns_burn = self.wallet.create_self_transfer_chain(chain_length=2)\n+        chained_burn_hex = [t[\"hex\"] for t in chained_txns_burn]\n+\n+        tx = tx_from_hex(chained_burn_hex[1])\n         tx.vout[-1].scriptPubKey = b'a' * 10001 # scriptPubKey bigger than 10k IsUnspendable\n-        chain_hex = [chain_hex[0], tx.serialize().hex()]\n+        chained_burn_hex = [chained_burn_hex[0], tx.serialize().hex()]\n         # burn test is run before any package evaluation; nothing makes it in and we get broader exception\n-        assert_raises_rpc_error(-25, \"Unspendable output exceeds maximum configured by user\", node.submitpackage, chain_hex, 0, chained_txns[1][\"new_utxo\"][\"value\"] - Decimal(\"0.00000001\"))\n+        assert_raises_rpc_error(-25, \"Unspendable output exceeds maximum configured by user\", node.submitpackage, chained_burn_hex, 0, chained_txns_burn[1][\"new_utxo\"][\"value\"] - Decimal(\"0.00000001\"))\n         assert_equal(node.getrawmempool(), [])\n \n+        minrate_btc_kvb_burn = min([chained_txn_burn[\"fee\"] / chained_txn_burn[\"tx\"].get_vsize() * 1000 for chained_txn_burn in chained_txns_burn])\n+\n         # Relax the restrictions for both and send it; parent gets through as own subpackage\n-        pkg_result = node.submitpackage(chain_hex, maxfeerate=minrate_btc_kvb, maxburnamount=chained_txns[1][\"new_utxo\"][\"value\"])\n-        assert \"error\" not in pkg_result[\"tx-results\"][chained_txns[0][\"wtxid\"]]\n+        pkg_result = node.submitpackage(chained_burn_hex, maxfeerate=minrate_btc_kvb_burn, maxburnamount=chained_txns_burn[1][\"new_utxo\"][\"value\"])\n+        assert \"error\" not in pkg_result[\"tx-results\"][chained_txns_burn[0][\"wtxid\"]]\n         assert_equal(pkg_result[\"tx-results\"][tx.getwtxid()][\"error\"], \"scriptpubkey\")\n-        assert_equal(node.getrawmempool(), [chained_txns[0][\"txid\"]])\n+        assert_equal(node.getrawmempool(), [chained_txns_burn[0][\"txid\"]])",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29735#discussion_r1541046523",
      "id" : 1541046523,
      "in_reply_to_id" : 1540889727,
      "line" : 430,
      "node_id" : "PRRC_kwDOABII585b2oD7",
      "original_commit_id" : "5ae4dce79d304457bb419512e2a478cf6dd08b43",
      "original_line" : 430,
      "original_position" : 81,
      "original_start_line" : 377,
      "path" : "test/functional/rpc_packages.py",
      "position" : 82,
      "pull_request_review_id" : 1963225671,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29735",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1541046523/reactions"
      },
      "side" : "RIGHT",
      "start_line" : 377,
      "start_side" : "LEFT",
      "subject_type" : "line",
      "updated_at" : "2024-03-27T12:49:38Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1541046523",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5767891?v=4",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "node_id" : "MDQ6VXNlcjU3Njc4OTE=",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29735#discussion_r1541058199"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29735"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1541058199"
         }
      },
      "author_association" : "MEMBER",
      "body" : "changed",
      "commit_id" : "4f8407cefa6ddb47b166b2c360d03778c0357a00",
      "created_at" : "2024-03-27T12:55:57Z",
      "diff_hunk" : "@@ -1366,6 +1366,8 @@ PackageMempoolAcceptResult MemPoolAccept::AcceptMultipleTransactions(const std::\n         // Individual modified feerate exceeded caller-defined max; abort\n         // N.B. this doesn't take into account CPFPs. Chunk-aware validation may be more robust.\n         if (args.m_client_maxfeerate && CFeeRate(ws.m_modified_fees, ws.m_vsize) > args.m_client_maxfeerate.value()) {\n+            // Need to set failure here both individually and at package level\n+            ws.m_state.Invalid(TxValidationResult::TX_MEMPOOL_POLICY, \"max feerate exceeded\", \"\");\n             package_state.Invalid(PackageValidationResult::PCKG_TX, \"max feerate exceeded\");",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29735#discussion_r1541058199",
      "id" : 1541058199,
      "in_reply_to_id" : 1540891352,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585b2q6X",
      "original_commit_id" : "5ae4dce79d304457bb419512e2a478cf6dd08b43",
      "original_line" : 1371,
      "original_position" : 6,
      "original_start_line" : null,
      "path" : "src/validation.cpp",
      "position" : null,
      "pull_request_review_id" : 1963243559,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29735",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1541058199/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-03-27T12:55:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1541058199",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5767891?v=4",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "node_id" : "MDQ6VXNlcjU3Njc4OTE=",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29735#discussion_r1541058370"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29735"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1541058370"
         }
      },
      "author_association" : "MEMBER",
      "body" : "added some comments",
      "commit_id" : "4f8407cefa6ddb47b166b2c360d03778c0357a00",
      "created_at" : "2024-03-27T12:56:06Z",
      "diff_hunk" : "@@ -496,6 +496,48 @@ def check_node_connections(*, node, num_in, num_out):\n     assert_equal(info[\"connections_in\"], num_in)\n     assert_equal(info[\"connections_out\"], num_out)\n \n+# Allows simpler testing of scenarios with minfee != minrelay\n+def fill_mempool(test_framework, node, miniwallet):\n+        \"\"\"Fill mempool until eviction.\"\"\"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29735#discussion_r1541058370",
      "id" : 1541058370,
      "in_reply_to_id" : 1539410139,
      "line" : 504,
      "node_id" : "PRRC_kwDOABII585b2q9C",
      "original_commit_id" : "aaa5125f1c65724b89d464be7f6d962afa0171a1",
      "original_line" : 504,
      "original_position" : 6,
      "original_start_line" : null,
      "path" : "test/functional/test_framework/util.py",
      "position" : 9,
      "pull_request_review_id" : 1963243860,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29735",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1541058370/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-03-27T12:56:06Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1541058370",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5767891?v=4",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "node_id" : "MDQ6VXNlcjU3Njc4OTE=",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Added some fuzz coverage which would have likely caught this\r\n\r\nedit: yep, 3 minutes: `LC1hZGRuCS0Ab2VtZHL1iQHY2NjY2Am//wAAAAD/AACAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAA//8AAABB44MP3NL5/4zzEoz/dpB2dg==`",
      "created_at" : "2024-03-27T13:31:09Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29735#issuecomment-2022777293",
      "id" : 2022777293,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/29735",
      "node_id" : "IC_kwDOABII5854kSHN",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2022777293/reactions"
      },
      "updated_at" : "2024-03-27T13:34:45Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2022777293",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5767891?v=4",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "node_id" : "MDQ6VXNlcjU3Njc4OTE=",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29735#discussion_r1541603526"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29735"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1541603526"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "> IIUC util is for more low-level stuff, but don't have better ideas other than throwing it on test_framework.py. Maybe @maflcko or @theStack would have an opinion on where we should put this?\r\n\r\nNo strong opinion or better idea from my side either, util.py seems fine IMHO.\r\n",
      "commit_id" : "14c86ba721e1a208c88ada133ba9e90e24724ea4",
      "created_at" : "2024-03-27T18:01:34Z",
      "diff_hunk" : "@@ -496,6 +496,48 @@ def check_node_connections(*, node, num_in, num_out):\n     assert_equal(info[\"connections_in\"], num_in)\n     assert_equal(info[\"connections_out\"], num_out)\n \n+# Allows simpler testing of scenarios with minfee != minrelay\n+def fill_mempool(test_framework, node, miniwallet):",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29735#discussion_r1541603526",
      "id" : 1541603526,
      "in_reply_to_id" : 1540871530,
      "line" : 502,
      "node_id" : "PRRC_kwDOABII585b4wDG",
      "original_commit_id" : "aaa5125f1c65724b89d464be7f6d962afa0171a1",
      "original_line" : 502,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "test/functional/test_framework/util.py",
      "position" : 7,
      "pull_request_review_id" : 1964119772,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29735",
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1541603526/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-03-27T18:01:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1541603526",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/91535?v=4",
         "events_url" : "https://api.github.com/users/theStack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/theStack/followers",
         "following_url" : "https://api.github.com/users/theStack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/theStack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/theStack",
         "id" : 91535,
         "login" : "theStack",
         "node_id" : "MDQ6VXNlcjkxNTM1",
         "organizations_url" : "https://api.github.com/users/theStack/orgs",
         "received_events_url" : "https://api.github.com/users/theStack/received_events",
         "repos_url" : "https://api.github.com/users/theStack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/theStack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/theStack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/theStack"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29735#discussion_r1543093597"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29735"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1543093597"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I meant to add docs in the docstring comment :sweat_smile: \r\nalso:\r\n- requires `-datacarriersize=100000`\r\n- I think you mean \"It will *not* ensure mempools become synced\" ?",
      "commit_id" : "14c86ba721e1a208c88ada133ba9e90e24724ea4",
      "created_at" : "2024-03-28T14:37:23Z",
      "diff_hunk" : "@@ -496,6 +496,48 @@ def check_node_connections(*, node, num_in, num_out):\n     assert_equal(info[\"connections_in\"], num_in)\n     assert_equal(info[\"connections_out\"], num_out)\n \n+# Allows simpler testing of scenarios with minfee != minrelay\n+def fill_mempool(test_framework, node, miniwallet):\n+        \"\"\"Fill mempool until eviction.\"\"\"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29735#discussion_r1543093597",
      "id" : 1543093597,
      "in_reply_to_id" : 1539410139,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585b-b1d",
      "original_commit_id" : "aaa5125f1c65724b89d464be7f6d962afa0171a1",
      "original_line" : 504,
      "original_position" : 6,
      "original_start_line" : null,
      "path" : "test/functional/test_framework/util.py",
      "position" : null,
      "pull_request_review_id" : 1966413998,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29735",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1543093597/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-04-03T18:43:16Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1543093597",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/25183001?v=4",
         "events_url" : "https://api.github.com/users/glozow/events{/privacy}",
         "followers_url" : "https://api.github.com/users/glozow/followers",
         "following_url" : "https://api.github.com/users/glozow/following{/other_user}",
         "gists_url" : "https://api.github.com/users/glozow/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/glozow",
         "id" : 25183001,
         "login" : "glozow",
         "node_id" : "MDQ6VXNlcjI1MTgzMDAx",
         "organizations_url" : "https://api.github.com/users/glozow/orgs",
         "received_events_url" : "https://api.github.com/users/glozow/received_events",
         "repos_url" : "https://api.github.com/users/glozow/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/glozow/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/glozow/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/glozow"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29735#discussion_r1550066137"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29735"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1550066137"
         }
      },
      "author_association" : "MEMBER",
      "body" : "nit 4f8407cefa6ddb47b166b2c360d03778c0357a00: would prefer to do a restart in the subtest, to minimize the amount of tests that we do on a nondefault settings",
      "commit_id" : "14c86ba721e1a208c88ada133ba9e90e24724ea4",
      "created_at" : "2024-04-03T16:25:02Z",
      "diff_hunk" : "@@ -31,6 +32,11 @@ def set_test_params(self):\n         self.setup_clean_chain = True\n         # whitelist peers to speed up tx relay / mempool sync\n         self.noban_tx_relay = True\n+        # Needed for fill_mempool\n+        self.extra_args = [[\n+            \"-datacarriersize=100000\",\n+            \"-maxmempool=5\",\n+        ]]",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29735#discussion_r1550066137",
      "id" : 1550066137,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585cZCHZ",
      "original_commit_id" : "4f8407cefa6ddb47b166b2c360d03778c0357a00",
      "original_line" : 39,
      "original_position" : 16,
      "original_start_line" : 35,
      "path" : "test/functional/rpc_packages.py",
      "position" : null,
      "pull_request_review_id" : 1966413998,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29735",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1550066137/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : "RIGHT",
      "subject_type" : "line",
      "updated_at" : "2024-04-03T18:43:16Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1550066137",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/25183001?v=4",
         "events_url" : "https://api.github.com/users/glozow/events{/privacy}",
         "followers_url" : "https://api.github.com/users/glozow/followers",
         "following_url" : "https://api.github.com/users/glozow/following{/other_user}",
         "gists_url" : "https://api.github.com/users/glozow/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/glozow",
         "id" : 25183001,
         "login" : "glozow",
         "node_id" : "MDQ6VXNlcjI1MTgzMDAx",
         "organizations_url" : "https://api.github.com/users/glozow/orgs",
         "received_events_url" : "https://api.github.com/users/glozow/received_events",
         "repos_url" : "https://api.github.com/users/glozow/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/glozow/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/glozow/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/glozow"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29735#discussion_r1551177145"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29735"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1551177145"
         }
      },
      "author_association" : "MEMBER",
      "body" : "done",
      "commit_id" : "14c86ba721e1a208c88ada133ba9e90e24724ea4",
      "created_at" : "2024-04-04T08:26:13Z",
      "diff_hunk" : "@@ -31,6 +32,11 @@ def set_test_params(self):\n         self.setup_clean_chain = True\n         # whitelist peers to speed up tx relay / mempool sync\n         self.noban_tx_relay = True\n+        # Needed for fill_mempool\n+        self.extra_args = [[\n+            \"-datacarriersize=100000\",\n+            \"-maxmempool=5\",\n+        ]]",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29735#discussion_r1551177145",
      "id" : 1551177145,
      "in_reply_to_id" : 1550066137,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585cdRW5",
      "original_commit_id" : "4f8407cefa6ddb47b166b2c360d03778c0357a00",
      "original_line" : 39,
      "original_position" : 16,
      "original_start_line" : 35,
      "path" : "test/functional/rpc_packages.py",
      "position" : null,
      "pull_request_review_id" : 1979111251,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29735",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1551177145/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : "RIGHT",
      "subject_type" : "line",
      "updated_at" : "2024-04-04T08:26:13Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1551177145",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5767891?v=4",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "node_id" : "MDQ6VXNlcjU3Njc4OTE=",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29735#discussion_r1551177864"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29735"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1551177864"
         }
      },
      "author_association" : "MEMBER",
      "body" : "oops yeah, done",
      "commit_id" : "14c86ba721e1a208c88ada133ba9e90e24724ea4",
      "created_at" : "2024-04-04T08:26:22Z",
      "diff_hunk" : "@@ -496,6 +496,48 @@ def check_node_connections(*, node, num_in, num_out):\n     assert_equal(info[\"connections_in\"], num_in)\n     assert_equal(info[\"connections_out\"], num_out)\n \n+# Allows simpler testing of scenarios with minfee != minrelay\n+def fill_mempool(test_framework, node, miniwallet):\n+        \"\"\"Fill mempool until eviction.\"\"\"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29735#discussion_r1551177864",
      "id" : 1551177864,
      "in_reply_to_id" : 1539410139,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585cdRiI",
      "original_commit_id" : "aaa5125f1c65724b89d464be7f6d962afa0171a1",
      "original_line" : 504,
      "original_position" : 6,
      "original_start_line" : null,
      "path" : "test/functional/test_framework/util.py",
      "position" : null,
      "pull_request_review_id" : 1979112009,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29735",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1551177864/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-04-04T08:26:22Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1551177864",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5767891?v=4",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "node_id" : "MDQ6VXNlcjU3Njc4OTE=",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29735#discussion_r1552198747"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29735"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1552198747"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "In \"Move fill_mempool to util function\" (cc770e4b36e6f04cbd588ad3e7a19f122c21d38d):\r\n\r\nNit: If a commit is described as a move, I would expect no changes in the code beyond whatâs necessary to update the callsites. While these changes are minor and obviously do not entail a functional change, I would have expected the updated commentary and refactor to be a separate commitâIâm wondering whether my understanding of the modus operandi is correct.",
      "commit_id" : "14c86ba721e1a208c88ada133ba9e90e24724ea4",
      "created_at" : "2024-04-04T18:08:35Z",
      "diff_hunk" : "@@ -496,6 +496,58 @@ def check_node_connections(*, node, num_in, num_out):\n     assert_equal(info[\"connections_in\"], num_in)\n     assert_equal(info[\"connections_out\"], num_out)\n \n+# Assumes -maxmempool=5(or similarly small).\n+# It will ensure mempools become synced as it is based on a single node\n+# and assumes -minrelaytxfee is 1sat/vB.\n+def fill_mempool(test_framework, node, miniwallet):\n+        \"\"\"Fill mempool until eviction.\n+\n+        Allows for simpler testing of scenarios with minfee != minrelay\n+        Requires -datacarriersize=100000 and\n+        -maxmempool=5(or similarly small).\n+        It will not ensure mempools become synced as it\n+        is based on a single node and assumes -minrelaytxfee\n+        is 1 sat/vbyte.\n+        \"\"\"\n+        test_framework.log.info(\"Fill the mempool until eviction is triggered and the mempoolminfee rises\")\n+        txouts = gen_return_txouts()\n+        relayfee = node.getnetworkinfo()['relayfee']\n+\n+        tx_batch_size = 1\n+        num_of_batches = 75\n+        # Generate UTXOs to flood the mempool\n+        # 1 to create a tx initially that will be evicted from the mempool later\n+        # 75 transactions each with a fee rate higher than the previous one\n+        # And 1 more to verify that this tx does not get added to the mempool with a fee rate less than the mempoolminfee\n+        # And 2 more for the package cpfp test\n+        test_framework.generate(miniwallet, 1 + (num_of_batches * tx_batch_size))\n+\n+        # Mine 99 blocks so that the UTXOs are allowed to be spent\n+        test_framework.generate(node, 99)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29735#discussion_r1552198747",
      "id" : 1552198747,
      "line" : 526,
      "node_id" : "PRRC_kwDOABII585chKxb",
      "original_commit_id" : "cc770e4b36e6f04cbd588ad3e7a19f122c21d38d",
      "original_line" : 526,
      "original_position" : 31,
      "original_start_line" : null,
      "path" : "test/functional/test_framework/util.py",
      "position" : 31,
      "pull_request_review_id" : 1980784495,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29735",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1552198747/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-04-04T18:47:20Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1552198747",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/4060799?v=4",
         "events_url" : "https://api.github.com/users/murchandamus/events{/privacy}",
         "followers_url" : "https://api.github.com/users/murchandamus/followers",
         "following_url" : "https://api.github.com/users/murchandamus/following{/other_user}",
         "gists_url" : "https://api.github.com/users/murchandamus/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/murchandamus",
         "id" : 4060799,
         "login" : "murchandamus",
         "node_id" : "MDQ6VXNlcjQwNjA3OTk=",
         "organizations_url" : "https://api.github.com/users/murchandamus/orgs",
         "received_events_url" : "https://api.github.com/users/murchandamus/received_events",
         "repos_url" : "https://api.github.com/users/murchandamus/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/murchandamus/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/murchandamus/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/murchandamus"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29735#discussion_r1552208469"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29735"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1552208469"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "In \"AcceptMultipleTransactions: Fix workspace not being set as client_maxâ¦\r\n\r\nâ¦feerate failure\" (271599af6d84c871154dc16c7abcadbe5ac08163): \r\n\r\nIf these node parameters generally are needed for `fill_mempool` to work, would it perhaps make sense to move them to the `fill_mempool` function?\r\n\r\nAlternatively, the comment should perhaps be \"Lower mempool limit to make it easier to `fill_mempool`\"",
      "commit_id" : "14c86ba721e1a208c88ada133ba9e90e24724ea4",
      "created_at" : "2024-04-04T18:17:08Z",
      "diff_hunk" : "@@ -369,23 +370,65 @@ def test_maxfeerate_maxburn_submitpackage(self):\n         minrate_btc_kvb = min([chained_txn[\"fee\"] / chained_txn[\"tx\"].get_vsize() * 1000 for chained_txn in chained_txns])\n         chain_hex = [t[\"hex\"] for t in chained_txns]\n         pkg_result = node.submitpackage(chain_hex, maxfeerate=minrate_btc_kvb - Decimal(\"0.00000001\"))\n+\n+        # First tx failed in single transaction evaluation, so package message is generic\n+        assert_equal(pkg_result[\"package_msg\"], \"transaction failed\")\n         assert_equal(pkg_result[\"tx-results\"][chained_txns[0][\"wtxid\"]][\"error\"], \"max feerate exceeded\")\n         assert_equal(pkg_result[\"tx-results\"][chained_txns[1][\"wtxid\"]][\"error\"], \"bad-txns-inputs-missingorspent\")\n         assert_equal(node.getrawmempool(), [])\n \n+        # Make chain of two transactions where parent doesn't make minfee threshold\n+        # but child is too high fee\n+        # Needed for fill_mempool\n+        self.restart_node(0, extra_args=[\n+            \"-datacarriersize=100000\",\n+            \"-maxmempool=5\",\n+        ])",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29735#discussion_r1552208469",
      "id" : 1552208469,
      "line" : 386,
      "node_id" : "PRRC_kwDOABII585chNJV",
      "original_commit_id" : "271599af6d84c871154dc16c7abcadbe5ac08163",
      "original_line" : 386,
      "original_position" : 25,
      "original_start_line" : 382,
      "path" : "test/functional/rpc_packages.py",
      "position" : 25,
      "pull_request_review_id" : 1980784495,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29735",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1552208469/reactions"
      },
      "side" : "RIGHT",
      "start_line" : 382,
      "start_side" : "RIGHT",
      "subject_type" : "line",
      "updated_at" : "2024-04-04T18:47:20Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1552208469",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/4060799?v=4",
         "events_url" : "https://api.github.com/users/murchandamus/events{/privacy}",
         "followers_url" : "https://api.github.com/users/murchandamus/followers",
         "following_url" : "https://api.github.com/users/murchandamus/following{/other_user}",
         "gists_url" : "https://api.github.com/users/murchandamus/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/murchandamus",
         "id" : 4060799,
         "login" : "murchandamus",
         "node_id" : "MDQ6VXNlcjQwNjA3OTk=",
         "organizations_url" : "https://api.github.com/users/murchandamus/orgs",
         "received_events_url" : "https://api.github.com/users/murchandamus/received_events",
         "repos_url" : "https://api.github.com/users/murchandamus/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/murchandamus/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/murchandamus/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/murchandamus"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29735#discussion_r1552232875"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29735"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1552232875"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "In \"AcceptMultipleTransactions: Fix workspace not being set as client_maxâ¦\r\n\r\nâ¦feerate failure\" (https://github.com/bitcoin/bitcoin/commit/271599af6d84c871154dc16c7abcadbe5ac08163):\r\n\r\nPet-peeve nit: I suspect that the issues here is rather that the mempool min _feerate_ is not met?\r\n\r\n```suggestion\r\n        assert \"mempool min feerate not met\" in pkg_result[\"tx-results\"][parent[\"wtxid\"]][\"error\"]\r\n```",
      "commit_id" : "14c86ba721e1a208c88ada133ba9e90e24724ea4",
      "created_at" : "2024-04-04T18:34:19Z",
      "diff_hunk" : "@@ -369,23 +370,65 @@ def test_maxfeerate_maxburn_submitpackage(self):\n         minrate_btc_kvb = min([chained_txn[\"fee\"] / chained_txn[\"tx\"].get_vsize() * 1000 for chained_txn in chained_txns])\n         chain_hex = [t[\"hex\"] for t in chained_txns]\n         pkg_result = node.submitpackage(chain_hex, maxfeerate=minrate_btc_kvb - Decimal(\"0.00000001\"))\n+\n+        # First tx failed in single transaction evaluation, so package message is generic\n+        assert_equal(pkg_result[\"package_msg\"], \"transaction failed\")\n         assert_equal(pkg_result[\"tx-results\"][chained_txns[0][\"wtxid\"]][\"error\"], \"max feerate exceeded\")\n         assert_equal(pkg_result[\"tx-results\"][chained_txns[1][\"wtxid\"]][\"error\"], \"bad-txns-inputs-missingorspent\")\n         assert_equal(node.getrawmempool(), [])\n \n+        # Make chain of two transactions where parent doesn't make minfee threshold\n+        # but child is too high fee\n+        # Needed for fill_mempool\n+        self.restart_node(0, extra_args=[\n+            \"-datacarriersize=100000\",\n+            \"-maxmempool=5\",\n+        ])\n+\n+        fill_mempool(self, node, self.wallet)\n+        while node.getrawmempool() != []:\n+            self.generate(node, 1)\n+\n+        minrelay = node.getmempoolinfo()[\"minrelaytxfee\"]\n+        parent = self.wallet.create_self_transfer(\n+            fee_rate=minrelay,\n+        )\n+\n+        child = self.wallet.create_self_transfer(\n+            fee_rate=DEFAULT_FEE,\n+            utxo_to_spend=parent[\"new_utxo\"],\n+        )\n+\n+        pkg_result = node.submitpackage([parent[\"hex\"], child[\"hex\"]], maxfeerate=DEFAULT_FEE - Decimal(\"0.00000001\"))\n+\n+        # Child is connected even though parent is invalid and still reports fee exceeded\n+        # this implies sub-package evaluation of both entries together.\n+        assert_equal(pkg_result[\"package_msg\"], \"transaction failed\")\n+        assert \"mempool min fee not met\" in pkg_result[\"tx-results\"][parent[\"wtxid\"]][\"error\"]",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29735#discussion_r1552232875",
      "id" : 1552232875,
      "line" : 407,
      "node_id" : "PRRC_kwDOABII585chTGr",
      "original_commit_id" : "271599af6d84c871154dc16c7abcadbe5ac08163",
      "original_line" : 407,
      "original_position" : 46,
      "original_start_line" : null,
      "path" : "test/functional/rpc_packages.py",
      "position" : 46,
      "pull_request_review_id" : 1980784495,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29735",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1552232875/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-04-04T18:47:20Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1552232875",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/4060799?v=4",
         "events_url" : "https://api.github.com/users/murchandamus/events{/privacy}",
         "followers_url" : "https://api.github.com/users/murchandamus/followers",
         "following_url" : "https://api.github.com/users/murchandamus/following{/other_user}",
         "gists_url" : "https://api.github.com/users/murchandamus/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/murchandamus",
         "id" : 4060799,
         "login" : "murchandamus",
         "node_id" : "MDQ6VXNlcjQwNjA3OTk=",
         "organizations_url" : "https://api.github.com/users/murchandamus/orgs",
         "received_events_url" : "https://api.github.com/users/murchandamus/received_events",
         "repos_url" : "https://api.github.com/users/murchandamus/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/murchandamus/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/murchandamus/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/murchandamus"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29735#discussion_r1552235727"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29735"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1552235727"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "In \"AcceptMultipleTransactions: Fix workspace not being set as client_maxâ¦\r\n\r\nâ¦feerate failure\" (https://github.com/bitcoin/bitcoin/commit/271599af6d84c871154dc16c7abcadbe5ac08163):\r\n\r\nDid you perhaps mean:\r\n\r\n```suggestion\r\n        # Reset maxmempool and datacarriersize, and empty mempool to reset dynamic mempool minimum feerate\r\n```\r\n?",
      "commit_id" : "14c86ba721e1a208c88ada133ba9e90e24724ea4",
      "created_at" : "2024-04-04T18:36:40Z",
      "diff_hunk" : "@@ -369,23 +370,65 @@ def test_maxfeerate_maxburn_submitpackage(self):\n         minrate_btc_kvb = min([chained_txn[\"fee\"] / chained_txn[\"tx\"].get_vsize() * 1000 for chained_txn in chained_txns])\n         chain_hex = [t[\"hex\"] for t in chained_txns]\n         pkg_result = node.submitpackage(chain_hex, maxfeerate=minrate_btc_kvb - Decimal(\"0.00000001\"))\n+\n+        # First tx failed in single transaction evaluation, so package message is generic\n+        assert_equal(pkg_result[\"package_msg\"], \"transaction failed\")\n         assert_equal(pkg_result[\"tx-results\"][chained_txns[0][\"wtxid\"]][\"error\"], \"max feerate exceeded\")\n         assert_equal(pkg_result[\"tx-results\"][chained_txns[1][\"wtxid\"]][\"error\"], \"bad-txns-inputs-missingorspent\")\n         assert_equal(node.getrawmempool(), [])\n \n+        # Make chain of two transactions where parent doesn't make minfee threshold\n+        # but child is too high fee\n+        # Needed for fill_mempool\n+        self.restart_node(0, extra_args=[\n+            \"-datacarriersize=100000\",\n+            \"-maxmempool=5\",\n+        ])\n+\n+        fill_mempool(self, node, self.wallet)\n+        while node.getrawmempool() != []:\n+            self.generate(node, 1)\n+\n+        minrelay = node.getmempoolinfo()[\"minrelaytxfee\"]\n+        parent = self.wallet.create_self_transfer(\n+            fee_rate=minrelay,\n+        )\n+\n+        child = self.wallet.create_self_transfer(\n+            fee_rate=DEFAULT_FEE,\n+            utxo_to_spend=parent[\"new_utxo\"],\n+        )\n+\n+        pkg_result = node.submitpackage([parent[\"hex\"], child[\"hex\"]], maxfeerate=DEFAULT_FEE - Decimal(\"0.00000001\"))\n+\n+        # Child is connected even though parent is invalid and still reports fee exceeded\n+        # this implies sub-package evaluation of both entries together.\n+        assert_equal(pkg_result[\"package_msg\"], \"transaction failed\")\n+        assert \"mempool min fee not met\" in pkg_result[\"tx-results\"][parent[\"wtxid\"]][\"error\"]\n+        assert_equal(pkg_result[\"tx-results\"][child[\"wtxid\"]][\"error\"], \"max feerate exceeded\")\n+        assert_equal(node.getrawmempool(), [])\n+\n+        # Reset minfee",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29735#discussion_r1552235727",
      "id" : 1552235727,
      "line" : 411,
      "node_id" : "PRRC_kwDOABII585chTzP",
      "original_commit_id" : "271599af6d84c871154dc16c7abcadbe5ac08163",
      "original_line" : 411,
      "original_position" : 50,
      "original_start_line" : null,
      "path" : "test/functional/rpc_packages.py",
      "position" : 50,
      "pull_request_review_id" : 1980784495,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29735",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1552235727/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-04-04T18:51:30Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1552235727",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/4060799?v=4",
         "events_url" : "https://api.github.com/users/murchandamus/events{/privacy}",
         "followers_url" : "https://api.github.com/users/murchandamus/followers",
         "following_url" : "https://api.github.com/users/murchandamus/following{/other_user}",
         "gists_url" : "https://api.github.com/users/murchandamus/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/murchandamus",
         "id" : 4060799,
         "login" : "murchandamus",
         "node_id" : "MDQ6VXNlcjQwNjA3OTk=",
         "organizations_url" : "https://api.github.com/users/murchandamus/orgs",
         "received_events_url" : "https://api.github.com/users/murchandamus/received_events",
         "repos_url" : "https://api.github.com/users/murchandamus/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/murchandamus/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/murchandamus/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/murchandamus"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29735#discussion_r1552244211"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29735"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1552244211"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "In \"AcceptMultipleTransactions: Fix workspace not being set as client_maxâ¦\r\n\r\nâ¦feerate failure\" (https://github.com/bitcoin/bitcoin/commit/271599af6d84c871154dc16c7abcadbe5ac08163):\r\nAt this point, it might be better to split the `maxfeerate` and the `maxburnamount` tests.",
      "commit_id" : "14c86ba721e1a208c88ada133ba9e90e24724ea4",
      "created_at" : "2024-04-04T18:44:38Z",
      "diff_hunk" : "@@ -369,23 +370,65 @@ def test_maxfeerate_maxburn_submitpackage(self):\n         minrate_btc_kvb = min([chained_txn[\"fee\"] / chained_txn[\"tx\"].get_vsize() * 1000 for chained_txn in chained_txns])\n         chain_hex = [t[\"hex\"] for t in chained_txns]\n         pkg_result = node.submitpackage(chain_hex, maxfeerate=minrate_btc_kvb - Decimal(\"0.00000001\"))\n+\n+        # First tx failed in single transaction evaluation, so package message is generic\n+        assert_equal(pkg_result[\"package_msg\"], \"transaction failed\")\n         assert_equal(pkg_result[\"tx-results\"][chained_txns[0][\"wtxid\"]][\"error\"], \"max feerate exceeded\")\n         assert_equal(pkg_result[\"tx-results\"][chained_txns[1][\"wtxid\"]][\"error\"], \"bad-txns-inputs-missingorspent\")\n         assert_equal(node.getrawmempool(), [])\n \n+        # Make chain of two transactions where parent doesn't make minfee threshold\n+        # but child is too high fee\n+        # Needed for fill_mempool\n+        self.restart_node(0, extra_args=[\n+            \"-datacarriersize=100000\",\n+            \"-maxmempool=5\",\n+        ])\n+\n+        fill_mempool(self, node, self.wallet)\n+        while node.getrawmempool() != []:\n+            self.generate(node, 1)\n+\n+        minrelay = node.getmempoolinfo()[\"minrelaytxfee\"]\n+        parent = self.wallet.create_self_transfer(\n+            fee_rate=minrelay,\n+        )\n+\n+        child = self.wallet.create_self_transfer(\n+            fee_rate=DEFAULT_FEE,\n+            utxo_to_spend=parent[\"new_utxo\"],\n+        )\n+\n+        pkg_result = node.submitpackage([parent[\"hex\"], child[\"hex\"]], maxfeerate=DEFAULT_FEE - Decimal(\"0.00000001\"))\n+\n+        # Child is connected even though parent is invalid and still reports fee exceeded\n+        # this implies sub-package evaluation of both entries together.\n+        assert_equal(pkg_result[\"package_msg\"], \"transaction failed\")\n+        assert \"mempool min fee not met\" in pkg_result[\"tx-results\"][parent[\"wtxid\"]][\"error\"]\n+        assert_equal(pkg_result[\"tx-results\"][child[\"wtxid\"]][\"error\"], \"max feerate exceeded\")\n+        assert_equal(node.getrawmempool(), [])\n+\n+        # Reset minfee\n+        self.restart_node(0)\n+",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29735#discussion_r1552244211",
      "id" : 1552244211,
      "line" : 413,
      "node_id" : "PRRC_kwDOABII585chV3z",
      "original_commit_id" : "271599af6d84c871154dc16c7abcadbe5ac08163",
      "original_line" : 413,
      "original_position" : 52,
      "original_start_line" : null,
      "path" : "test/functional/rpc_packages.py",
      "position" : 52,
      "pull_request_review_id" : 1980784495,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29735",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1552244211/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-04-04T18:47:20Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1552244211",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/4060799?v=4",
         "events_url" : "https://api.github.com/users/murchandamus/events{/privacy}",
         "followers_url" : "https://api.github.com/users/murchandamus/followers",
         "following_url" : "https://api.github.com/users/murchandamus/following{/other_user}",
         "gists_url" : "https://api.github.com/users/murchandamus/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/murchandamus",
         "id" : 4060799,
         "login" : "murchandamus",
         "node_id" : "MDQ6VXNlcjQwNjA3OTk=",
         "organizations_url" : "https://api.github.com/users/murchandamus/orgs",
         "received_events_url" : "https://api.github.com/users/murchandamus/received_events",
         "repos_url" : "https://api.github.com/users/murchandamus/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/murchandamus/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/murchandamus/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/murchandamus"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29735#discussion_r1552969962"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29735"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1552969962"
         }
      },
      "author_association" : "MEMBER",
      "body" : "that's the error string as it's reported unfortunately!",
      "commit_id" : "1d79aabed4f2031c3001c5497afc9df8da4e0b20",
      "created_at" : "2024-04-05T06:00:18Z",
      "diff_hunk" : "@@ -369,23 +370,65 @@ def test_maxfeerate_maxburn_submitpackage(self):\n         minrate_btc_kvb = min([chained_txn[\"fee\"] / chained_txn[\"tx\"].get_vsize() * 1000 for chained_txn in chained_txns])\n         chain_hex = [t[\"hex\"] for t in chained_txns]\n         pkg_result = node.submitpackage(chain_hex, maxfeerate=minrate_btc_kvb - Decimal(\"0.00000001\"))\n+\n+        # First tx failed in single transaction evaluation, so package message is generic\n+        assert_equal(pkg_result[\"package_msg\"], \"transaction failed\")\n         assert_equal(pkg_result[\"tx-results\"][chained_txns[0][\"wtxid\"]][\"error\"], \"max feerate exceeded\")\n         assert_equal(pkg_result[\"tx-results\"][chained_txns[1][\"wtxid\"]][\"error\"], \"bad-txns-inputs-missingorspent\")\n         assert_equal(node.getrawmempool(), [])\n \n+        # Make chain of two transactions where parent doesn't make minfee threshold\n+        # but child is too high fee\n+        # Needed for fill_mempool\n+        self.restart_node(0, extra_args=[\n+            \"-datacarriersize=100000\",\n+            \"-maxmempool=5\",\n+        ])\n+\n+        fill_mempool(self, node, self.wallet)\n+        while node.getrawmempool() != []:\n+            self.generate(node, 1)\n+\n+        minrelay = node.getmempoolinfo()[\"minrelaytxfee\"]\n+        parent = self.wallet.create_self_transfer(\n+            fee_rate=minrelay,\n+        )\n+\n+        child = self.wallet.create_self_transfer(\n+            fee_rate=DEFAULT_FEE,\n+            utxo_to_spend=parent[\"new_utxo\"],\n+        )\n+\n+        pkg_result = node.submitpackage([parent[\"hex\"], child[\"hex\"]], maxfeerate=DEFAULT_FEE - Decimal(\"0.00000001\"))\n+\n+        # Child is connected even though parent is invalid and still reports fee exceeded\n+        # this implies sub-package evaluation of both entries together.\n+        assert_equal(pkg_result[\"package_msg\"], \"transaction failed\")\n+        assert \"mempool min fee not met\" in pkg_result[\"tx-results\"][parent[\"wtxid\"]][\"error\"]",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29735#discussion_r1552969962",
      "id" : 1552969962,
      "in_reply_to_id" : 1552232875,
      "line" : 408,
      "node_id" : "PRRC_kwDOABII585ckHDq",
      "original_commit_id" : "271599af6d84c871154dc16c7abcadbe5ac08163",
      "original_line" : 408,
      "original_position" : 46,
      "original_start_line" : null,
      "path" : "test/functional/rpc_packages.py",
      "position" : 65,
      "pull_request_review_id" : 1982003885,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29735",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1552969962/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-04-05T06:00:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1552969962",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5767891?v=4",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "node_id" : "MDQ6VXNlcjU3Njc4OTE=",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29735#discussion_r1552985927"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29735"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1552985927"
         }
      },
      "author_association" : "MEMBER",
      "body" : "done",
      "commit_id" : "1d79aabed4f2031c3001c5497afc9df8da4e0b20",
      "created_at" : "2024-04-05T06:20:57Z",
      "diff_hunk" : "@@ -369,23 +370,65 @@ def test_maxfeerate_maxburn_submitpackage(self):\n         minrate_btc_kvb = min([chained_txn[\"fee\"] / chained_txn[\"tx\"].get_vsize() * 1000 for chained_txn in chained_txns])\n         chain_hex = [t[\"hex\"] for t in chained_txns]\n         pkg_result = node.submitpackage(chain_hex, maxfeerate=minrate_btc_kvb - Decimal(\"0.00000001\"))\n+\n+        # First tx failed in single transaction evaluation, so package message is generic\n+        assert_equal(pkg_result[\"package_msg\"], \"transaction failed\")\n         assert_equal(pkg_result[\"tx-results\"][chained_txns[0][\"wtxid\"]][\"error\"], \"max feerate exceeded\")\n         assert_equal(pkg_result[\"tx-results\"][chained_txns[1][\"wtxid\"]][\"error\"], \"bad-txns-inputs-missingorspent\")\n         assert_equal(node.getrawmempool(), [])\n \n+        # Make chain of two transactions where parent doesn't make minfee threshold\n+        # but child is too high fee\n+        # Needed for fill_mempool\n+        self.restart_node(0, extra_args=[\n+            \"-datacarriersize=100000\",\n+            \"-maxmempool=5\",\n+        ])\n+\n+        fill_mempool(self, node, self.wallet)\n+        while node.getrawmempool() != []:\n+            self.generate(node, 1)\n+\n+        minrelay = node.getmempoolinfo()[\"minrelaytxfee\"]\n+        parent = self.wallet.create_self_transfer(\n+            fee_rate=minrelay,\n+        )\n+\n+        child = self.wallet.create_self_transfer(\n+            fee_rate=DEFAULT_FEE,\n+            utxo_to_spend=parent[\"new_utxo\"],\n+        )\n+\n+        pkg_result = node.submitpackage([parent[\"hex\"], child[\"hex\"]], maxfeerate=DEFAULT_FEE - Decimal(\"0.00000001\"))\n+\n+        # Child is connected even though parent is invalid and still reports fee exceeded\n+        # this implies sub-package evaluation of both entries together.\n+        assert_equal(pkg_result[\"package_msg\"], \"transaction failed\")\n+        assert \"mempool min fee not met\" in pkg_result[\"tx-results\"][parent[\"wtxid\"]][\"error\"]\n+        assert_equal(pkg_result[\"tx-results\"][child[\"wtxid\"]][\"error\"], \"max feerate exceeded\")\n+        assert_equal(node.getrawmempool(), [])\n+\n+        # Reset minfee\n+        self.restart_node(0)\n+",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29735#discussion_r1552985927",
      "id" : 1552985927,
      "in_reply_to_id" : 1552244211,
      "line" : 414,
      "node_id" : "PRRC_kwDOABII585ckK9H",
      "original_commit_id" : "271599af6d84c871154dc16c7abcadbe5ac08163",
      "original_line" : 414,
      "original_position" : 52,
      "original_start_line" : null,
      "path" : "test/functional/rpc_packages.py",
      "position" : 71,
      "pull_request_review_id" : 1982030238,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29735",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1552985927/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-04-05T06:20:58Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1552985927",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5767891?v=4",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "node_id" : "MDQ6VXNlcjU3Njc4OTE=",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29735#discussion_r1552985990"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29735"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1552985990"
         }
      },
      "author_association" : "MEMBER",
      "body" : "no but this is even better, taken",
      "commit_id" : "1d79aabed4f2031c3001c5497afc9df8da4e0b20",
      "created_at" : "2024-04-05T06:21:02Z",
      "diff_hunk" : "@@ -369,23 +370,65 @@ def test_maxfeerate_maxburn_submitpackage(self):\n         minrate_btc_kvb = min([chained_txn[\"fee\"] / chained_txn[\"tx\"].get_vsize() * 1000 for chained_txn in chained_txns])\n         chain_hex = [t[\"hex\"] for t in chained_txns]\n         pkg_result = node.submitpackage(chain_hex, maxfeerate=minrate_btc_kvb - Decimal(\"0.00000001\"))\n+\n+        # First tx failed in single transaction evaluation, so package message is generic\n+        assert_equal(pkg_result[\"package_msg\"], \"transaction failed\")\n         assert_equal(pkg_result[\"tx-results\"][chained_txns[0][\"wtxid\"]][\"error\"], \"max feerate exceeded\")\n         assert_equal(pkg_result[\"tx-results\"][chained_txns[1][\"wtxid\"]][\"error\"], \"bad-txns-inputs-missingorspent\")\n         assert_equal(node.getrawmempool(), [])\n \n+        # Make chain of two transactions where parent doesn't make minfee threshold\n+        # but child is too high fee\n+        # Needed for fill_mempool\n+        self.restart_node(0, extra_args=[\n+            \"-datacarriersize=100000\",\n+            \"-maxmempool=5\",\n+        ])\n+\n+        fill_mempool(self, node, self.wallet)\n+        while node.getrawmempool() != []:\n+            self.generate(node, 1)\n+\n+        minrelay = node.getmempoolinfo()[\"minrelaytxfee\"]\n+        parent = self.wallet.create_self_transfer(\n+            fee_rate=minrelay,\n+        )\n+\n+        child = self.wallet.create_self_transfer(\n+            fee_rate=DEFAULT_FEE,\n+            utxo_to_spend=parent[\"new_utxo\"],\n+        )\n+\n+        pkg_result = node.submitpackage([parent[\"hex\"], child[\"hex\"]], maxfeerate=DEFAULT_FEE - Decimal(\"0.00000001\"))\n+\n+        # Child is connected even though parent is invalid and still reports fee exceeded\n+        # this implies sub-package evaluation of both entries together.\n+        assert_equal(pkg_result[\"package_msg\"], \"transaction failed\")\n+        assert \"mempool min fee not met\" in pkg_result[\"tx-results\"][parent[\"wtxid\"]][\"error\"]\n+        assert_equal(pkg_result[\"tx-results\"][child[\"wtxid\"]][\"error\"], \"max feerate exceeded\")\n+        assert_equal(node.getrawmempool(), [])\n+\n+        # Reset minfee",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29735#discussion_r1552985990",
      "id" : 1552985990,
      "in_reply_to_id" : 1552235727,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585ckK-G",
      "original_commit_id" : "271599af6d84c871154dc16c7abcadbe5ac08163",
      "original_line" : 411,
      "original_position" : 50,
      "original_start_line" : null,
      "path" : "test/functional/rpc_packages.py",
      "position" : null,
      "pull_request_review_id" : 1982030318,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29735",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1552985990/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-04-05T06:21:02Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1552985990",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5767891?v=4",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "node_id" : "MDQ6VXNlcjU3Njc4OTE=",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29735#discussion_r1552986070"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29735"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1552986070"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I don't want to blow away extra_args the caller may want, so took the comment suggestion for now",
      "commit_id" : "1d79aabed4f2031c3001c5497afc9df8da4e0b20",
      "created_at" : "2024-04-05T06:21:07Z",
      "diff_hunk" : "@@ -369,23 +370,65 @@ def test_maxfeerate_maxburn_submitpackage(self):\n         minrate_btc_kvb = min([chained_txn[\"fee\"] / chained_txn[\"tx\"].get_vsize() * 1000 for chained_txn in chained_txns])\n         chain_hex = [t[\"hex\"] for t in chained_txns]\n         pkg_result = node.submitpackage(chain_hex, maxfeerate=minrate_btc_kvb - Decimal(\"0.00000001\"))\n+\n+        # First tx failed in single transaction evaluation, so package message is generic\n+        assert_equal(pkg_result[\"package_msg\"], \"transaction failed\")\n         assert_equal(pkg_result[\"tx-results\"][chained_txns[0][\"wtxid\"]][\"error\"], \"max feerate exceeded\")\n         assert_equal(pkg_result[\"tx-results\"][chained_txns[1][\"wtxid\"]][\"error\"], \"bad-txns-inputs-missingorspent\")\n         assert_equal(node.getrawmempool(), [])\n \n+        # Make chain of two transactions where parent doesn't make minfee threshold\n+        # but child is too high fee\n+        # Needed for fill_mempool\n+        self.restart_node(0, extra_args=[\n+            \"-datacarriersize=100000\",\n+            \"-maxmempool=5\",\n+        ])",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29735#discussion_r1552986070",
      "id" : 1552986070,
      "in_reply_to_id" : 1552208469,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585ckK_W",
      "original_commit_id" : "271599af6d84c871154dc16c7abcadbe5ac08163",
      "original_line" : 387,
      "original_position" : 25,
      "original_start_line" : 382,
      "path" : "test/functional/rpc_packages.py",
      "position" : null,
      "pull_request_review_id" : 1982030470,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29735",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1552986070/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : "RIGHT",
      "subject_type" : "line",
      "updated_at" : "2024-04-05T06:21:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1552986070",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5767891?v=4",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "node_id" : "MDQ6VXNlcjU3Njc4OTE=",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29735#discussion_r1552986113"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29735"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1552986113"
         }
      },
      "author_association" : "MEMBER",
      "body" : "split out the moving and docstring changes, should be minimal now?",
      "commit_id" : "1d79aabed4f2031c3001c5497afc9df8da4e0b20",
      "created_at" : "2024-04-05T06:21:10Z",
      "diff_hunk" : "@@ -496,6 +496,58 @@ def check_node_connections(*, node, num_in, num_out):\n     assert_equal(info[\"connections_in\"], num_in)\n     assert_equal(info[\"connections_out\"], num_out)\n \n+# Assumes -maxmempool=5(or similarly small).\n+# It will ensure mempools become synced as it is based on a single node\n+# and assumes -minrelaytxfee is 1sat/vB.\n+def fill_mempool(test_framework, node, miniwallet):\n+        \"\"\"Fill mempool until eviction.\n+\n+        Allows for simpler testing of scenarios with minfee != minrelay\n+        Requires -datacarriersize=100000 and\n+        -maxmempool=5(or similarly small).\n+        It will not ensure mempools become synced as it\n+        is based on a single node and assumes -minrelaytxfee\n+        is 1 sat/vbyte.\n+        \"\"\"\n+        test_framework.log.info(\"Fill the mempool until eviction is triggered and the mempoolminfee rises\")\n+        txouts = gen_return_txouts()\n+        relayfee = node.getnetworkinfo()['relayfee']\n+\n+        tx_batch_size = 1\n+        num_of_batches = 75\n+        # Generate UTXOs to flood the mempool\n+        # 1 to create a tx initially that will be evicted from the mempool later\n+        # 75 transactions each with a fee rate higher than the previous one\n+        # And 1 more to verify that this tx does not get added to the mempool with a fee rate less than the mempoolminfee\n+        # And 2 more for the package cpfp test\n+        test_framework.generate(miniwallet, 1 + (num_of_batches * tx_batch_size))\n+\n+        # Mine 99 blocks so that the UTXOs are allowed to be spent\n+        test_framework.generate(node, 99)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29735#discussion_r1552986113",
      "id" : 1552986113,
      "in_reply_to_id" : 1552198747,
      "line" : 523,
      "node_id" : "PRRC_kwDOABII585ckLAB",
      "original_commit_id" : "cc770e4b36e6f04cbd588ad3e7a19f122c21d38d",
      "original_line" : 523,
      "original_position" : 31,
      "original_start_line" : null,
      "path" : "test/functional/test_framework/util.py",
      "position" : 28,
      "pull_request_review_id" : 1982030548,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29735",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1552986113/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-04-05T06:21:10Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1552986113",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5767891?v=4",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "node_id" : "MDQ6VXNlcjU3Njc4OTE=",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29735#discussion_r1553735891"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29735"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1553735891"
         }
      },
      "author_association" : "MEMBER",
      "body" : "\"or similarly small\" doesn't really make sense to me. AFAICT this makes just enough transactions to go past the 5MB mempool.",
      "commit_id" : "1d79aabed4f2031c3001c5497afc9df8da4e0b20",
      "created_at" : "2024-04-05T14:14:16Z",
      "diff_hunk" : "@@ -497,7 +497,15 @@ def check_node_connections(*, node, num_in, num_out):\n     assert_equal(info[\"connections_out\"], num_out)\n \n def fill_mempool(test_framework, node, miniwallet):\n-        \"\"\"Fill mempool until eviction.\"\"\"\n+        \"\"\"Fill mempool until eviction.\n+\n+        Allows for simpler testing of scenarios with minfee != minrelay\n+        Requires -datacarriersize=100000 and\n+        -maxmempool=5(or similarly small).",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29735#discussion_r1553735891",
      "id" : 1553735891,
      "line" : 504,
      "node_id" : "PRRC_kwDOABII585cnCDT",
      "original_commit_id" : "ac0cfcaeef1eb8c7bc333b91a9a5c448e720255b",
      "original_line" : 504,
      "original_position" : 9,
      "original_start_line" : null,
      "path" : "test/functional/test_framework/util.py",
      "position" : 9,
      "pull_request_review_id" : 1983320959,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29735",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1553735891/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-04-05T14:25:23Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1553735891",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/25183001?v=4",
         "events_url" : "https://api.github.com/users/glozow/events{/privacy}",
         "followers_url" : "https://api.github.com/users/glozow/followers",
         "following_url" : "https://api.github.com/users/glozow/following{/other_user}",
         "gists_url" : "https://api.github.com/users/glozow/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/glozow",
         "id" : 25183001,
         "login" : "glozow",
         "node_id" : "MDQ6VXNlcjI1MTgzMDAx",
         "organizations_url" : "https://api.github.com/users/glozow/orgs",
         "received_events_url" : "https://api.github.com/users/glozow/received_events",
         "repos_url" : "https://api.github.com/users/glozow/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/glozow/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/glozow/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/glozow"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29735#discussion_r1553736451"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29735"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1553736451"
         }
      },
      "author_association" : "MEMBER",
      "body" : "nit\r\n```suggestion\r\n        Allows for simpler testing of scenarios with minfee > minrelay\r\n```",
      "commit_id" : "1d79aabed4f2031c3001c5497afc9df8da4e0b20",
      "created_at" : "2024-04-05T14:14:43Z",
      "diff_hunk" : "@@ -497,7 +497,15 @@ def check_node_connections(*, node, num_in, num_out):\n     assert_equal(info[\"connections_out\"], num_out)\n \n def fill_mempool(test_framework, node, miniwallet):\n-        \"\"\"Fill mempool until eviction.\"\"\"\n+        \"\"\"Fill mempool until eviction.\n+\n+        Allows for simpler testing of scenarios with minfee != minrelay",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29735#discussion_r1553736451",
      "id" : 1553736451,
      "line" : 502,
      "node_id" : "PRRC_kwDOABII585cnCMD",
      "original_commit_id" : "ac0cfcaeef1eb8c7bc333b91a9a5c448e720255b",
      "original_line" : 502,
      "original_position" : 7,
      "original_start_line" : null,
      "path" : "test/functional/test_framework/util.py",
      "position" : 7,
      "pull_request_review_id" : 1983320959,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29735",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1553736451/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-04-05T14:25:23Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1553736451",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/25183001?v=4",
         "events_url" : "https://api.github.com/users/glozow/events{/privacy}",
         "followers_url" : "https://api.github.com/users/glozow/followers",
         "following_url" : "https://api.github.com/users/glozow/following{/other_user}",
         "gists_url" : "https://api.github.com/users/glozow/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/glozow",
         "id" : 25183001,
         "login" : "glozow",
         "node_id" : "MDQ6VXNlcjI1MTgzMDAx",
         "organizations_url" : "https://api.github.com/users/glozow/orgs",
         "received_events_url" : "https://api.github.com/users/glozow/received_events",
         "repos_url" : "https://api.github.com/users/glozow/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/glozow/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/glozow/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/glozow"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29735#discussion_r1553744185"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29735"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1553744185"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Mempool is already empty?",
      "commit_id" : "1d79aabed4f2031c3001c5497afc9df8da4e0b20",
      "created_at" : "2024-04-05T14:19:55Z",
      "diff_hunk" : "@@ -411,6 +412,12 @@ def test_maxfeerate_maxburn_submitpackage(self):\n         # Reset maxmempool and datacarriersize, and empty mempool to reset dynamic mempool minimum feerate\n         self.restart_node(0)\n \n+    def test_maxburn_submitpackage(self):\n+        node = self.nodes[0]\n+        # clear mempool\n+        deterministic_address = node.get_deterministic_priv_key().address\n+        self.generatetoaddress(node, 1, deterministic_address)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29735#discussion_r1553744185",
      "id" : 1553744185,
      "line" : 419,
      "node_id" : "PRRC_kwDOABII585cnEE5",
      "original_commit_id" : "1d79aabed4f2031c3001c5497afc9df8da4e0b20",
      "original_line" : 419,
      "original_position" : 27,
      "original_start_line" : 417,
      "path" : "test/functional/rpc_packages.py",
      "position" : 27,
      "pull_request_review_id" : 1983320959,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29735",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1553744185/reactions"
      },
      "side" : "RIGHT",
      "start_line" : 417,
      "start_side" : "RIGHT",
      "subject_type" : "line",
      "updated_at" : "2024-04-05T14:25:23Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1553744185",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/25183001?v=4",
         "events_url" : "https://api.github.com/users/glozow/events{/privacy}",
         "followers_url" : "https://api.github.com/users/glozow/followers",
         "following_url" : "https://api.github.com/users/glozow/following{/other_user}",
         "gists_url" : "https://api.github.com/users/glozow/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/glozow",
         "id" : 25183001,
         "login" : "glozow",
         "node_id" : "MDQ6VXNlcjI1MTgzMDAx",
         "organizations_url" : "https://api.github.com/users/glozow/orgs",
         "received_events_url" : "https://api.github.com/users/glozow/received_events",
         "repos_url" : "https://api.github.com/users/glozow/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/glozow/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/glozow/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/glozow"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29735#discussion_r1553746827"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29735"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1553746827"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Note that this can change the mempool min fee",
      "commit_id" : "1d79aabed4f2031c3001c5497afc9df8da4e0b20",
      "created_at" : "2024-04-05T14:21:45Z",
      "diff_hunk" : "@@ -369,23 +370,65 @@ def test_maxfeerate_maxburn_submitpackage(self):\n         minrate_btc_kvb = min([chained_txn[\"fee\"] / chained_txn[\"tx\"].get_vsize() * 1000 for chained_txn in chained_txns])\n         chain_hex = [t[\"hex\"] for t in chained_txns]\n         pkg_result = node.submitpackage(chain_hex, maxfeerate=minrate_btc_kvb - Decimal(\"0.00000001\"))\n+\n+        # First tx failed in single transaction evaluation, so package message is generic\n+        assert_equal(pkg_result[\"package_msg\"], \"transaction failed\")\n         assert_equal(pkg_result[\"tx-results\"][chained_txns[0][\"wtxid\"]][\"error\"], \"max feerate exceeded\")\n         assert_equal(pkg_result[\"tx-results\"][chained_txns[1][\"wtxid\"]][\"error\"], \"bad-txns-inputs-missingorspent\")\n         assert_equal(node.getrawmempool(), [])\n \n+        # Make chain of two transactions where parent doesn't make minfee threshold\n+        # but child is too high fee\n+        # Lower mempool limit to make it easier to fill_mempool\n+        self.restart_node(0, extra_args=[\n+            \"-datacarriersize=100000\",\n+            \"-maxmempool=5\",\n+        ])\n+\n+        fill_mempool(self, node, self.wallet)\n+        while node.getrawmempool() != []:\n+            self.generate(node, 1)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29735#discussion_r1553746827",
      "id" : 1553746827,
      "line" : 391,
      "node_id" : "PRRC_kwDOABII585cnEuL",
      "original_commit_id" : "2b346ba9759ff35eb16440d594369e4494cef26e",
      "original_line" : 390,
      "original_position" : 29,
      "original_start_line" : 389,
      "path" : "test/functional/rpc_packages.py",
      "position" : 48,
      "pull_request_review_id" : 1983320959,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29735",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1553746827/reactions"
      },
      "side" : "RIGHT",
      "start_line" : 390,
      "start_side" : "RIGHT",
      "subject_type" : "line",
      "updated_at" : "2024-04-05T14:25:23Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1553746827",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/25183001?v=4",
         "events_url" : "https://api.github.com/users/glozow/events{/privacy}",
         "followers_url" : "https://api.github.com/users/glozow/followers",
         "following_url" : "https://api.github.com/users/glozow/following{/other_user}",
         "gists_url" : "https://api.github.com/users/glozow/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/glozow",
         "id" : 25183001,
         "login" : "glozow",
         "node_id" : "MDQ6VXNlcjI1MTgzMDAx",
         "organizations_url" : "https://api.github.com/users/glozow/orgs",
         "received_events_url" : "https://api.github.com/users/glozow/received_events",
         "repos_url" : "https://api.github.com/users/glozow/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/glozow/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/glozow/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/glozow"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29735#discussion_r1553749001"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29735"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1553749001"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Mempool is already empty\r\n```suggestion\r\n        # Reset maxmempool, datacarriersize, and dynamic mempool minimum feerate\r\n```",
      "commit_id" : "1d79aabed4f2031c3001c5497afc9df8da4e0b20",
      "created_at" : "2024-04-05T14:23:12Z",
      "diff_hunk" : "@@ -369,23 +370,65 @@ def test_maxfeerate_maxburn_submitpackage(self):\n         minrate_btc_kvb = min([chained_txn[\"fee\"] / chained_txn[\"tx\"].get_vsize() * 1000 for chained_txn in chained_txns])\n         chain_hex = [t[\"hex\"] for t in chained_txns]\n         pkg_result = node.submitpackage(chain_hex, maxfeerate=minrate_btc_kvb - Decimal(\"0.00000001\"))\n+\n+        # First tx failed in single transaction evaluation, so package message is generic\n+        assert_equal(pkg_result[\"package_msg\"], \"transaction failed\")\n         assert_equal(pkg_result[\"tx-results\"][chained_txns[0][\"wtxid\"]][\"error\"], \"max feerate exceeded\")\n         assert_equal(pkg_result[\"tx-results\"][chained_txns[1][\"wtxid\"]][\"error\"], \"bad-txns-inputs-missingorspent\")\n         assert_equal(node.getrawmempool(), [])\n \n+        # Make chain of two transactions where parent doesn't make minfee threshold\n+        # but child is too high fee\n+        # Lower mempool limit to make it easier to fill_mempool\n+        self.restart_node(0, extra_args=[\n+            \"-datacarriersize=100000\",\n+            \"-maxmempool=5\",\n+        ])\n+\n+        fill_mempool(self, node, self.wallet)\n+        while node.getrawmempool() != []:\n+            self.generate(node, 1)\n+\n+        minrelay = node.getmempoolinfo()[\"minrelaytxfee\"]\n+        parent = self.wallet.create_self_transfer(\n+            fee_rate=minrelay,\n+        )\n+\n+        child = self.wallet.create_self_transfer(\n+            fee_rate=DEFAULT_FEE,\n+            utxo_to_spend=parent[\"new_utxo\"],\n+        )\n+\n+        pkg_result = node.submitpackage([parent[\"hex\"], child[\"hex\"]], maxfeerate=DEFAULT_FEE - Decimal(\"0.00000001\"))\n+\n+        # Child is connected even though parent is invalid and still reports fee exceeded\n+        # this implies sub-package evaluation of both entries together.\n+        assert_equal(pkg_result[\"package_msg\"], \"transaction failed\")\n+        assert \"mempool min fee not met\" in pkg_result[\"tx-results\"][parent[\"wtxid\"]][\"error\"]\n+        assert_equal(pkg_result[\"tx-results\"][child[\"wtxid\"]][\"error\"], \"max feerate exceeded\")\n+        assert_equal(node.getrawmempool(), [])\n+\n+        # Reset maxmempool and datacarriersize, and empty mempool to reset dynamic mempool minimum feerate",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29735#discussion_r1553749001",
      "id" : 1553749001,
      "line" : 412,
      "node_id" : "PRRC_kwDOABII585cnFQJ",
      "original_commit_id" : "2b346ba9759ff35eb16440d594369e4494cef26e",
      "original_line" : 411,
      "original_position" : 50,
      "original_start_line" : null,
      "path" : "test/functional/rpc_packages.py",
      "position" : 69,
      "pull_request_review_id" : 1983320959,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29735",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1553749001/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-04-05T14:25:23Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1553749001",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/25183001?v=4",
         "events_url" : "https://api.github.com/users/glozow/events{/privacy}",
         "followers_url" : "https://api.github.com/users/glozow/followers",
         "following_url" : "https://api.github.com/users/glozow/following{/other_user}",
         "gists_url" : "https://api.github.com/users/glozow/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/glozow",
         "id" : 25183001,
         "login" : "glozow",
         "node_id" : "MDQ6VXNlcjI1MTgzMDAx",
         "organizations_url" : "https://api.github.com/users/glozow/orgs",
         "received_events_url" : "https://api.github.com/users/glozow/received_events",
         "repos_url" : "https://api.github.com/users/glozow/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/glozow/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/glozow/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/glozow"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29735#discussion_r1553766100"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29735"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1553766100"
         }
      },
      "author_association" : "MEMBER",
      "body" : "mm yeah let me make this a bit more bullet proof",
      "commit_id" : "1d79aabed4f2031c3001c5497afc9df8da4e0b20",
      "created_at" : "2024-04-05T14:34:08Z",
      "diff_hunk" : "@@ -369,23 +370,65 @@ def test_maxfeerate_maxburn_submitpackage(self):\n         minrate_btc_kvb = min([chained_txn[\"fee\"] / chained_txn[\"tx\"].get_vsize() * 1000 for chained_txn in chained_txns])\n         chain_hex = [t[\"hex\"] for t in chained_txns]\n         pkg_result = node.submitpackage(chain_hex, maxfeerate=minrate_btc_kvb - Decimal(\"0.00000001\"))\n+\n+        # First tx failed in single transaction evaluation, so package message is generic\n+        assert_equal(pkg_result[\"package_msg\"], \"transaction failed\")\n         assert_equal(pkg_result[\"tx-results\"][chained_txns[0][\"wtxid\"]][\"error\"], \"max feerate exceeded\")\n         assert_equal(pkg_result[\"tx-results\"][chained_txns[1][\"wtxid\"]][\"error\"], \"bad-txns-inputs-missingorspent\")\n         assert_equal(node.getrawmempool(), [])\n \n+        # Make chain of two transactions where parent doesn't make minfee threshold\n+        # but child is too high fee\n+        # Lower mempool limit to make it easier to fill_mempool\n+        self.restart_node(0, extra_args=[\n+            \"-datacarriersize=100000\",\n+            \"-maxmempool=5\",\n+        ])\n+\n+        fill_mempool(self, node, self.wallet)\n+        while node.getrawmempool() != []:\n+            self.generate(node, 1)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29735#discussion_r1553766100",
      "id" : 1553766100,
      "in_reply_to_id" : 1553746827,
      "line" : 391,
      "node_id" : "PRRC_kwDOABII585cnJbU",
      "original_commit_id" : "2b346ba9759ff35eb16440d594369e4494cef26e",
      "original_line" : 390,
      "original_position" : 29,
      "original_start_line" : 389,
      "path" : "test/functional/rpc_packages.py",
      "position" : 48,
      "pull_request_review_id" : 1983373536,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29735",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1553766100/reactions"
      },
      "side" : "RIGHT",
      "start_line" : 390,
      "start_side" : "RIGHT",
      "subject_type" : "line",
      "updated_at" : "2024-04-05T14:34:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1553766100",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5767891?v=4",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "node_id" : "MDQ6VXNlcjU3Njc4OTE=",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29735#discussion_r1553777536"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29735"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1553777536"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Well I don't think you need get rid of the transactions here - you just want to make sure they get cleared by the end of the test right?",
      "commit_id" : "1d79aabed4f2031c3001c5497afc9df8da4e0b20",
      "created_at" : "2024-04-05T14:41:55Z",
      "diff_hunk" : "@@ -369,23 +370,65 @@ def test_maxfeerate_maxburn_submitpackage(self):\n         minrate_btc_kvb = min([chained_txn[\"fee\"] / chained_txn[\"tx\"].get_vsize() * 1000 for chained_txn in chained_txns])\n         chain_hex = [t[\"hex\"] for t in chained_txns]\n         pkg_result = node.submitpackage(chain_hex, maxfeerate=minrate_btc_kvb - Decimal(\"0.00000001\"))\n+\n+        # First tx failed in single transaction evaluation, so package message is generic\n+        assert_equal(pkg_result[\"package_msg\"], \"transaction failed\")\n         assert_equal(pkg_result[\"tx-results\"][chained_txns[0][\"wtxid\"]][\"error\"], \"max feerate exceeded\")\n         assert_equal(pkg_result[\"tx-results\"][chained_txns[1][\"wtxid\"]][\"error\"], \"bad-txns-inputs-missingorspent\")\n         assert_equal(node.getrawmempool(), [])\n \n+        # Make chain of two transactions where parent doesn't make minfee threshold\n+        # but child is too high fee\n+        # Lower mempool limit to make it easier to fill_mempool\n+        self.restart_node(0, extra_args=[\n+            \"-datacarriersize=100000\",\n+            \"-maxmempool=5\",\n+        ])\n+\n+        fill_mempool(self, node, self.wallet)\n+        while node.getrawmempool() != []:\n+            self.generate(node, 1)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29735#discussion_r1553777536",
      "id" : 1553777536,
      "in_reply_to_id" : 1553746827,
      "line" : 391,
      "node_id" : "PRRC_kwDOABII585cnMOA",
      "original_commit_id" : "2b346ba9759ff35eb16440d594369e4494cef26e",
      "original_line" : 390,
      "original_position" : 29,
      "original_start_line" : 389,
      "path" : "test/functional/rpc_packages.py",
      "position" : 48,
      "pull_request_review_id" : 1983391770,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29735",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1553777536/reactions"
      },
      "side" : "RIGHT",
      "start_line" : 390,
      "start_side" : "RIGHT",
      "subject_type" : "line",
      "updated_at" : "2024-04-05T14:41:55Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1553777536",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/25183001?v=4",
         "events_url" : "https://api.github.com/users/glozow/events{/privacy}",
         "followers_url" : "https://api.github.com/users/glozow/followers",
         "following_url" : "https://api.github.com/users/glozow/following{/other_user}",
         "gists_url" : "https://api.github.com/users/glozow/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/glozow",
         "id" : 25183001,
         "login" : "glozow",
         "node_id" : "MDQ6VXNlcjI1MTgzMDAx",
         "organizations_url" : "https://api.github.com/users/glozow/orgs",
         "received_events_url" : "https://api.github.com/users/glozow/received_events",
         "repos_url" : "https://api.github.com/users/glozow/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/glozow/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/glozow/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/glozow"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29735#discussion_r1554559178"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29735"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1554559178"
         }
      },
      "author_association" : "MEMBER",
      "body" : "removed the parenthesis ",
      "commit_id" : "052c67d4beb72d3fdf31fa5e584ea2fa12e6f69c",
      "created_at" : "2024-04-06T09:53:18Z",
      "diff_hunk" : "@@ -497,7 +497,15 @@ def check_node_connections(*, node, num_in, num_out):\n     assert_equal(info[\"connections_out\"], num_out)\n \n def fill_mempool(test_framework, node, miniwallet):\n-        \"\"\"Fill mempool until eviction.\"\"\"\n+        \"\"\"Fill mempool until eviction.\n+\n+        Allows for simpler testing of scenarios with minfee != minrelay\n+        Requires -datacarriersize=100000 and\n+        -maxmempool=5(or similarly small).",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29735#discussion_r1554559178",
      "id" : 1554559178,
      "in_reply_to_id" : 1553735891,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585cqLDK",
      "original_commit_id" : "ac0cfcaeef1eb8c7bc333b91a9a5c448e720255b",
      "original_line" : 504,
      "original_position" : 9,
      "original_start_line" : null,
      "path" : "test/functional/test_framework/util.py",
      "position" : null,
      "pull_request_review_id" : 1984472663,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29735",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1554559178/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-04-06T09:53:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1554559178",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5767891?v=4",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "node_id" : "MDQ6VXNlcjU3Njc4OTE=",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29735#discussion_r1554559185"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29735"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1554559185"
         }
      },
      "author_association" : "MEMBER",
      "body" : "taken",
      "commit_id" : "052c67d4beb72d3fdf31fa5e584ea2fa12e6f69c",
      "created_at" : "2024-04-06T09:53:24Z",
      "diff_hunk" : "@@ -497,7 +497,15 @@ def check_node_connections(*, node, num_in, num_out):\n     assert_equal(info[\"connections_out\"], num_out)\n \n def fill_mempool(test_framework, node, miniwallet):\n-        \"\"\"Fill mempool until eviction.\"\"\"\n+        \"\"\"Fill mempool until eviction.\n+\n+        Allows for simpler testing of scenarios with minfee != minrelay",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29735#discussion_r1554559185",
      "id" : 1554559185,
      "in_reply_to_id" : 1553736451,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585cqLDR",
      "original_commit_id" : "ac0cfcaeef1eb8c7bc333b91a9a5c448e720255b",
      "original_line" : 502,
      "original_position" : 7,
      "original_start_line" : null,
      "path" : "test/functional/test_framework/util.py",
      "position" : null,
      "pull_request_review_id" : 1984472673,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29735",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1554559185/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-04-06T09:53:24Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1554559185",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5767891?v=4",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "node_id" : "MDQ6VXNlcjU3Njc4OTE=",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29735#discussion_r1554559188"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29735"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1554559188"
         }
      },
      "author_association" : "MEMBER",
      "body" : "replaced with an assert",
      "commit_id" : "052c67d4beb72d3fdf31fa5e584ea2fa12e6f69c",
      "created_at" : "2024-04-06T09:53:27Z",
      "diff_hunk" : "@@ -411,6 +412,12 @@ def test_maxfeerate_maxburn_submitpackage(self):\n         # Reset maxmempool and datacarriersize, and empty mempool to reset dynamic mempool minimum feerate\n         self.restart_node(0)\n \n+    def test_maxburn_submitpackage(self):\n+        node = self.nodes[0]\n+        # clear mempool\n+        deterministic_address = node.get_deterministic_priv_key().address\n+        self.generatetoaddress(node, 1, deterministic_address)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29735#discussion_r1554559188",
      "id" : 1554559188,
      "in_reply_to_id" : 1553744185,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585cqLDU",
      "original_commit_id" : "1d79aabed4f2031c3001c5497afc9df8da4e0b20",
      "original_line" : 419,
      "original_position" : 27,
      "original_start_line" : 417,
      "path" : "test/functional/rpc_packages.py",
      "position" : null,
      "pull_request_review_id" : 1984472677,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29735",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1554559188/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : "RIGHT",
      "subject_type" : "line",
      "updated_at" : "2024-04-06T09:53:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1554559188",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5767891?v=4",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "node_id" : "MDQ6VXNlcjU3Njc4OTE=",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29735#discussion_r1554559201"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29735"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1554559201"
         }
      },
      "author_association" : "MEMBER",
      "body" : "felt like I had a reason for this, but apparently not. At end of test I empty mempool on node restart, so removed",
      "commit_id" : "052c67d4beb72d3fdf31fa5e584ea2fa12e6f69c",
      "created_at" : "2024-04-06T09:53:37Z",
      "diff_hunk" : "@@ -369,23 +370,65 @@ def test_maxfeerate_maxburn_submitpackage(self):\n         minrate_btc_kvb = min([chained_txn[\"fee\"] / chained_txn[\"tx\"].get_vsize() * 1000 for chained_txn in chained_txns])\n         chain_hex = [t[\"hex\"] for t in chained_txns]\n         pkg_result = node.submitpackage(chain_hex, maxfeerate=minrate_btc_kvb - Decimal(\"0.00000001\"))\n+\n+        # First tx failed in single transaction evaluation, so package message is generic\n+        assert_equal(pkg_result[\"package_msg\"], \"transaction failed\")\n         assert_equal(pkg_result[\"tx-results\"][chained_txns[0][\"wtxid\"]][\"error\"], \"max feerate exceeded\")\n         assert_equal(pkg_result[\"tx-results\"][chained_txns[1][\"wtxid\"]][\"error\"], \"bad-txns-inputs-missingorspent\")\n         assert_equal(node.getrawmempool(), [])\n \n+        # Make chain of two transactions where parent doesn't make minfee threshold\n+        # but child is too high fee\n+        # Lower mempool limit to make it easier to fill_mempool\n+        self.restart_node(0, extra_args=[\n+            \"-datacarriersize=100000\",\n+            \"-maxmempool=5\",\n+        ])\n+\n+        fill_mempool(self, node, self.wallet)\n+        while node.getrawmempool() != []:\n+            self.generate(node, 1)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29735#discussion_r1554559201",
      "id" : 1554559201,
      "in_reply_to_id" : 1553746827,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585cqLDh",
      "original_commit_id" : "2b346ba9759ff35eb16440d594369e4494cef26e",
      "original_line" : 390,
      "original_position" : 29,
      "original_start_line" : 389,
      "path" : "test/functional/rpc_packages.py",
      "position" : null,
      "pull_request_review_id" : 1984472694,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29735",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1554559201/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : "RIGHT",
      "subject_type" : "line",
      "updated_at" : "2024-04-06T09:53:37Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1554559201",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5767891?v=4",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "node_id" : "MDQ6VXNlcjU3Njc4OTE=",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29735#discussion_r1554559207"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29735"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1554559207"
         }
      },
      "author_association" : "MEMBER",
      "body" : "changed where it's non-empty, so added `persistmempool=0` and left a new comment",
      "commit_id" : "052c67d4beb72d3fdf31fa5e584ea2fa12e6f69c",
      "created_at" : "2024-04-06T09:53:42Z",
      "diff_hunk" : "@@ -369,23 +370,65 @@ def test_maxfeerate_maxburn_submitpackage(self):\n         minrate_btc_kvb = min([chained_txn[\"fee\"] / chained_txn[\"tx\"].get_vsize() * 1000 for chained_txn in chained_txns])\n         chain_hex = [t[\"hex\"] for t in chained_txns]\n         pkg_result = node.submitpackage(chain_hex, maxfeerate=minrate_btc_kvb - Decimal(\"0.00000001\"))\n+\n+        # First tx failed in single transaction evaluation, so package message is generic\n+        assert_equal(pkg_result[\"package_msg\"], \"transaction failed\")\n         assert_equal(pkg_result[\"tx-results\"][chained_txns[0][\"wtxid\"]][\"error\"], \"max feerate exceeded\")\n         assert_equal(pkg_result[\"tx-results\"][chained_txns[1][\"wtxid\"]][\"error\"], \"bad-txns-inputs-missingorspent\")\n         assert_equal(node.getrawmempool(), [])\n \n+        # Make chain of two transactions where parent doesn't make minfee threshold\n+        # but child is too high fee\n+        # Lower mempool limit to make it easier to fill_mempool\n+        self.restart_node(0, extra_args=[\n+            \"-datacarriersize=100000\",\n+            \"-maxmempool=5\",\n+        ])\n+\n+        fill_mempool(self, node, self.wallet)\n+        while node.getrawmempool() != []:\n+            self.generate(node, 1)\n+\n+        minrelay = node.getmempoolinfo()[\"minrelaytxfee\"]\n+        parent = self.wallet.create_self_transfer(\n+            fee_rate=minrelay,\n+        )\n+\n+        child = self.wallet.create_self_transfer(\n+            fee_rate=DEFAULT_FEE,\n+            utxo_to_spend=parent[\"new_utxo\"],\n+        )\n+\n+        pkg_result = node.submitpackage([parent[\"hex\"], child[\"hex\"]], maxfeerate=DEFAULT_FEE - Decimal(\"0.00000001\"))\n+\n+        # Child is connected even though parent is invalid and still reports fee exceeded\n+        # this implies sub-package evaluation of both entries together.\n+        assert_equal(pkg_result[\"package_msg\"], \"transaction failed\")\n+        assert \"mempool min fee not met\" in pkg_result[\"tx-results\"][parent[\"wtxid\"]][\"error\"]\n+        assert_equal(pkg_result[\"tx-results\"][child[\"wtxid\"]][\"error\"], \"max feerate exceeded\")\n+        assert_equal(node.getrawmempool(), [])\n+\n+        # Reset maxmempool and datacarriersize, and empty mempool to reset dynamic mempool minimum feerate",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29735#discussion_r1554559207",
      "id" : 1554559207,
      "in_reply_to_id" : 1553749001,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585cqLDn",
      "original_commit_id" : "2b346ba9759ff35eb16440d594369e4494cef26e",
      "original_line" : 411,
      "original_position" : 50,
      "original_start_line" : null,
      "path" : "test/functional/rpc_packages.py",
      "position" : null,
      "pull_request_review_id" : 1984472699,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29735",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1554559207/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-04-06T09:53:42Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1554559207",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5767891?v=4",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "node_id" : "MDQ6VXNlcjU3Njc4OTE=",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29735#discussion_r1555694194"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29735"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1555694194"
         }
      },
      "author_association" : "MEMBER",
      "body" : "In a466686c6e97d47e3f4718eed0f781acb88da7fa \"test: expand docstring to fill_mempool\"\r\n\r\nnit: \r\n```suggestion\r\n        Allows for simpler testing of scenarios with floating mempoolminfee > minrelayfee\r\n```",
      "commit_id" : "4fe7d150eb3c85a6597d8fc910fe1490358197ad",
      "created_at" : "2024-04-08T11:54:10Z",
      "diff_hunk" : "@@ -497,7 +497,15 @@ def check_node_connections(*, node, num_in, num_out):\n     assert_equal(info[\"connections_out\"], num_out)\n \n def fill_mempool(test_framework, node, miniwallet):\n-        \"\"\"Fill mempool until eviction.\"\"\"\n+        \"\"\"Fill mempool until eviction.\n+\n+        Allows for simpler testing of scenarios with floating minfee > minrelay",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29735#discussion_r1555694194",
      "id" : 1555694194,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585cugJy",
      "original_commit_id" : "a466686c6e97d47e3f4718eed0f781acb88da7fa",
      "original_line" : 502,
      "original_position" : 7,
      "original_start_line" : null,
      "path" : "test/functional/test_framework/util.py",
      "position" : null,
      "pull_request_review_id" : 1986192988,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29735",
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1555694194/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-04-08T12:27:21Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1555694194",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/48946461?v=4",
         "events_url" : "https://api.github.com/users/ismaelsadeeq/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ismaelsadeeq/followers",
         "following_url" : "https://api.github.com/users/ismaelsadeeq/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ismaelsadeeq/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ismaelsadeeq",
         "id" : 48946461,
         "login" : "ismaelsadeeq",
         "node_id" : "MDQ6VXNlcjQ4OTQ2NDYx",
         "organizations_url" : "https://api.github.com/users/ismaelsadeeq/orgs",
         "received_events_url" : "https://api.github.com/users/ismaelsadeeq/received_events",
         "repos_url" : "https://api.github.com/users/ismaelsadeeq/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ismaelsadeeq/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ismaelsadeeq/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ismaelsadeeq"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29735#discussion_r1555720689"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29735"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1555720689"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Nit: I donât feel strongly about it, but the change that made me notice that there were code changes in the move originally was that  `COINBASE_MATURITY - 1` had gotten replaced with a `99` magic number.",
      "commit_id" : "4fe7d150eb3c85a6597d8fc910fe1490358197ad",
      "created_at" : "2024-04-08T12:16:23Z",
      "diff_hunk" : "@@ -496,6 +496,58 @@ def check_node_connections(*, node, num_in, num_out):\n     assert_equal(info[\"connections_in\"], num_in)\n     assert_equal(info[\"connections_out\"], num_out)\n \n+# Assumes -maxmempool=5(or similarly small).\n+# It will ensure mempools become synced as it is based on a single node\n+# and assumes -minrelaytxfee is 1sat/vB.\n+def fill_mempool(test_framework, node, miniwallet):\n+        \"\"\"Fill mempool until eviction.\n+\n+        Allows for simpler testing of scenarios with minfee != minrelay\n+        Requires -datacarriersize=100000 and\n+        -maxmempool=5(or similarly small).\n+        It will not ensure mempools become synced as it\n+        is based on a single node and assumes -minrelaytxfee\n+        is 1 sat/vbyte.\n+        \"\"\"\n+        test_framework.log.info(\"Fill the mempool until eviction is triggered and the mempoolminfee rises\")\n+        txouts = gen_return_txouts()\n+        relayfee = node.getnetworkinfo()['relayfee']\n+\n+        tx_batch_size = 1\n+        num_of_batches = 75\n+        # Generate UTXOs to flood the mempool\n+        # 1 to create a tx initially that will be evicted from the mempool later\n+        # 75 transactions each with a fee rate higher than the previous one\n+        # And 1 more to verify that this tx does not get added to the mempool with a fee rate less than the mempoolminfee\n+        # And 2 more for the package cpfp test\n+        test_framework.generate(miniwallet, 1 + (num_of_batches * tx_batch_size))\n+\n+        # Mine 99 blocks so that the UTXOs are allowed to be spent\n+        test_framework.generate(node, 99)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29735#discussion_r1555720689",
      "id" : 1555720689,
      "in_reply_to_id" : 1552198747,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585cumnx",
      "original_commit_id" : "cc770e4b36e6f04cbd588ad3e7a19f122c21d38d",
      "original_line" : 523,
      "original_position" : 31,
      "original_start_line" : null,
      "path" : "test/functional/test_framework/util.py",
      "position" : null,
      "pull_request_review_id" : 1986238385,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29735",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1555720689/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-04-08T12:23:35Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1555720689",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/4060799?v=4",
         "events_url" : "https://api.github.com/users/murchandamus/events{/privacy}",
         "followers_url" : "https://api.github.com/users/murchandamus/followers",
         "following_url" : "https://api.github.com/users/murchandamus/following{/other_user}",
         "gists_url" : "https://api.github.com/users/murchandamus/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/murchandamus",
         "id" : 4060799,
         "login" : "murchandamus",
         "node_id" : "MDQ6VXNlcjQwNjA3OTk=",
         "organizations_url" : "https://api.github.com/users/murchandamus/orgs",
         "received_events_url" : "https://api.github.com/users/murchandamus/received_events",
         "repos_url" : "https://api.github.com/users/murchandamus/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/murchandamus/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/murchandamus/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/murchandamus"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29735#discussion_r1555723093"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29735"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1555723093"
         }
      },
      "author_association" : "MEMBER",
      "body" : "In  c93f790cad1558dcf0b8fb5fd0cf3a276368d656 \" Move fill_mempool to util function\"\r\n\r\nThere should be a commit that will first pull out these two lines from this scope to \r\nhttps://github.com/bitcoin/bitcoin/blob/f0794cbd405636a7f528a60f2873050b865cf7e8/test/functional/mempool_limit.py#L231\r\n\r\nMoving `fill_mempool` to `test_framework/util.py` makes it clear that the comments do not belong to this scope.",
      "commit_id" : "4fe7d150eb3c85a6597d8fc910fe1490358197ad",
      "created_at" : "2024-04-08T12:18:14Z",
      "diff_hunk" : "@@ -496,6 +496,47 @@ def check_node_connections(*, node, num_in, num_out):\n     assert_equal(info[\"connections_in\"], num_in)\n     assert_equal(info[\"connections_out\"], num_out)\n \n+def fill_mempool(test_framework, node, miniwallet):\n+        \"\"\"Fill mempool until eviction.\"\"\"\n+        test_framework.log.info(\"Fill the mempool until eviction is triggered and the mempoolminfee rises\")\n+        txouts = gen_return_txouts()\n+        relayfee = node.getnetworkinfo()['relayfee']\n+\n+        tx_batch_size = 1\n+        num_of_batches = 75\n+        # Generate UTXOs to flood the mempool\n+        # 1 to create a tx initially that will be evicted from the mempool later\n+        # 75 transactions each with a fee rate higher than the previous one\n+        # And 1 more to verify that this tx does not get added to the mempool with a fee rate less than the mempoolminfee\n+        # And 2 more for the package cpfp test",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29735#discussion_r1555723093",
      "id" : 1555723093,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585cunNV",
      "original_commit_id" : "c93f790cad1558dcf0b8fb5fd0cf3a276368d656",
      "original_line" : 511,
      "original_position" : 16,
      "original_start_line" : 510,
      "path" : "test/functional/test_framework/util.py",
      "position" : null,
      "pull_request_review_id" : 1986192988,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29735",
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1555723093/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : "RIGHT",
      "subject_type" : "line",
      "updated_at" : "2024-04-08T12:27:21Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1555723093",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/48946461?v=4",
         "events_url" : "https://api.github.com/users/ismaelsadeeq/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ismaelsadeeq/followers",
         "following_url" : "https://api.github.com/users/ismaelsadeeq/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ismaelsadeeq/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ismaelsadeeq",
         "id" : 48946461,
         "login" : "ismaelsadeeq",
         "node_id" : "MDQ6VXNlcjQ4OTQ2NDYx",
         "organizations_url" : "https://api.github.com/users/ismaelsadeeq/orgs",
         "received_events_url" : "https://api.github.com/users/ismaelsadeeq/received_events",
         "repos_url" : "https://api.github.com/users/ismaelsadeeq/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ismaelsadeeq/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ismaelsadeeq/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ismaelsadeeq"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29735#discussion_r1555727656"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29735"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1555727656"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Nit: Subject line in commit message should not exceed 50 characters, and definitely not be more than 72: https://cbea.ms/git-commit/#limit-50",
      "commit_id" : "4fe7d150eb3c85a6597d8fc910fe1490358197ad",
      "created_at" : "2024-04-08T12:20:47Z",
      "diff_hunk" : "@@ -1366,7 +1366,9 @@ PackageMempoolAcceptResult MemPoolAccept::AcceptMultipleTransactions(const std::\n         // Individual modified feerate exceeded caller-defined max; abort\n         // N.B. this doesn't take into account CPFPs. Chunk-aware validation may be more robust.",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29735#discussion_r1555727656",
      "id" : 1555727656,
      "line" : 1367,
      "node_id" : "PRRC_kwDOABII585cuoUo",
      "original_commit_id" : "72425bd699dd33d57794b3339f6266c4c9df443d",
      "original_line" : 1367,
      "original_position" : 2,
      "original_start_line" : null,
      "path" : "src/validation.cpp",
      "position" : 2,
      "pull_request_review_id" : 1986238385,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29735",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1555727656/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-04-08T12:23:35Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1555727656",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/4060799?v=4",
         "events_url" : "https://api.github.com/users/murchandamus/events{/privacy}",
         "followers_url" : "https://api.github.com/users/murchandamus/followers",
         "following_url" : "https://api.github.com/users/murchandamus/following{/other_user}",
         "gists_url" : "https://api.github.com/users/murchandamus/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/murchandamus",
         "id" : 4060799,
         "login" : "murchandamus",
         "node_id" : "MDQ6VXNlcjQwNjA3OTk=",
         "organizations_url" : "https://api.github.com/users/murchandamus/orgs",
         "received_events_url" : "https://api.github.com/users/murchandamus/received_events",
         "repos_url" : "https://api.github.com/users/murchandamus/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/murchandamus/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/murchandamus/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/murchandamus"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29735#discussion_r1555729721"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29735"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1555729721"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Maybe assert for this at the beginning of the `fill_mempool`\r\n```python\r\n     assert_equal(node.getnetworkinfo()['relayfee'], Decimal('0.00001000'))\r\n```",
      "commit_id" : "4fe7d150eb3c85a6597d8fc910fe1490358197ad",
      "created_at" : "2024-04-08T12:22:05Z",
      "diff_hunk" : "@@ -497,7 +497,15 @@ def check_node_connections(*, node, num_in, num_out):\n     assert_equal(info[\"connections_out\"], num_out)\n \n def fill_mempool(test_framework, node, miniwallet):\n-        \"\"\"Fill mempool until eviction.\"\"\"\n+        \"\"\"Fill mempool until eviction.\n+\n+        Allows for simpler testing of scenarios with floating minfee > minrelay\n+        Requires -datacarriersize=100000 and\n+        -maxmempool=5.\n+        It will not ensure mempools become synced as it\n+        is based on a single node and assumes -minrelaytxfee\n+        is 1 sat/vbyte.",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29735#discussion_r1555729721",
      "id" : 1555729721,
      "line" : 507,
      "node_id" : "PRRC_kwDOABII585cuo05",
      "original_commit_id" : "a466686c6e97d47e3f4718eed0f781acb88da7fa",
      "original_line" : 507,
      "original_position" : 12,
      "original_start_line" : 505,
      "path" : "test/functional/test_framework/util.py",
      "position" : 12,
      "pull_request_review_id" : 1986192988,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29735",
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1555729721/reactions"
      },
      "side" : "RIGHT",
      "start_line" : 505,
      "start_side" : "RIGHT",
      "subject_type" : "line",
      "updated_at" : "2024-04-08T12:27:21Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1555729721",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/48946461?v=4",
         "events_url" : "https://api.github.com/users/ismaelsadeeq/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ismaelsadeeq/followers",
         "following_url" : "https://api.github.com/users/ismaelsadeeq/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ismaelsadeeq/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ismaelsadeeq",
         "id" : 48946461,
         "login" : "ismaelsadeeq",
         "node_id" : "MDQ6VXNlcjQ4OTQ2NDYx",
         "organizations_url" : "https://api.github.com/users/ismaelsadeeq/orgs",
         "received_events_url" : "https://api.github.com/users/ismaelsadeeq/received_events",
         "repos_url" : "https://api.github.com/users/ismaelsadeeq/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ismaelsadeeq/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ismaelsadeeq/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ismaelsadeeq"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29735#discussion_r1555830543"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29735"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1555830543"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Made it shorter :)",
      "commit_id" : "4fe7d150eb3c85a6597d8fc910fe1490358197ad",
      "created_at" : "2024-04-08T13:16:38Z",
      "diff_hunk" : "@@ -1366,7 +1366,9 @@ PackageMempoolAcceptResult MemPoolAccept::AcceptMultipleTransactions(const std::\n         // Individual modified feerate exceeded caller-defined max; abort\n         // N.B. this doesn't take into account CPFPs. Chunk-aware validation may be more robust.",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29735#discussion_r1555830543",
      "id" : 1555830543,
      "in_reply_to_id" : 1555727656,
      "line" : 1367,
      "node_id" : "PRRC_kwDOABII585cvBcP",
      "original_commit_id" : "72425bd699dd33d57794b3339f6266c4c9df443d",
      "original_line" : 1367,
      "original_position" : 2,
      "original_start_line" : null,
      "path" : "src/validation.cpp",
      "position" : 2,
      "pull_request_review_id" : 1986426954,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29735",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1555830543/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-04-08T13:16:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1555830543",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5767891?v=4",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "node_id" : "MDQ6VXNlcjU3Njc4OTE=",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29735#discussion_r1555831622"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29735"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1555831622"
         }
      },
      "author_association" : "MEMBER",
      "body" : "bit of an annoying circular reference issue(blocktools requiring utils) so for now at least make it grep-able what the magic value should be(and more greppable)",
      "commit_id" : "4fe7d150eb3c85a6597d8fc910fe1490358197ad",
      "created_at" : "2024-04-08T13:17:25Z",
      "diff_hunk" : "@@ -496,6 +496,58 @@ def check_node_connections(*, node, num_in, num_out):\n     assert_equal(info[\"connections_in\"], num_in)\n     assert_equal(info[\"connections_out\"], num_out)\n \n+# Assumes -maxmempool=5(or similarly small).\n+# It will ensure mempools become synced as it is based on a single node\n+# and assumes -minrelaytxfee is 1sat/vB.\n+def fill_mempool(test_framework, node, miniwallet):\n+        \"\"\"Fill mempool until eviction.\n+\n+        Allows for simpler testing of scenarios with minfee != minrelay\n+        Requires -datacarriersize=100000 and\n+        -maxmempool=5(or similarly small).\n+        It will not ensure mempools become synced as it\n+        is based on a single node and assumes -minrelaytxfee\n+        is 1 sat/vbyte.\n+        \"\"\"\n+        test_framework.log.info(\"Fill the mempool until eviction is triggered and the mempoolminfee rises\")\n+        txouts = gen_return_txouts()\n+        relayfee = node.getnetworkinfo()['relayfee']\n+\n+        tx_batch_size = 1\n+        num_of_batches = 75\n+        # Generate UTXOs to flood the mempool\n+        # 1 to create a tx initially that will be evicted from the mempool later\n+        # 75 transactions each with a fee rate higher than the previous one\n+        # And 1 more to verify that this tx does not get added to the mempool with a fee rate less than the mempoolminfee\n+        # And 2 more for the package cpfp test\n+        test_framework.generate(miniwallet, 1 + (num_of_batches * tx_batch_size))\n+\n+        # Mine 99 blocks so that the UTXOs are allowed to be spent\n+        test_framework.generate(node, 99)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29735#discussion_r1555831622",
      "id" : 1555831622,
      "in_reply_to_id" : 1552198747,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585cvBtG",
      "original_commit_id" : "cc770e4b36e6f04cbd588ad3e7a19f122c21d38d",
      "original_line" : 523,
      "original_position" : 31,
      "original_start_line" : null,
      "path" : "test/functional/test_framework/util.py",
      "position" : null,
      "pull_request_review_id" : 1986428796,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29735",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1555831622/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-04-08T13:17:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1555831622",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5767891?v=4",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "node_id" : "MDQ6VXNlcjU3Njc4OTE=",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29735#discussion_r1555832375"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29735"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1555832375"
         }
      },
      "author_association" : "MEMBER",
      "body" : "done",
      "commit_id" : "4fe7d150eb3c85a6597d8fc910fe1490358197ad",
      "created_at" : "2024-04-08T13:17:56Z",
      "diff_hunk" : "@@ -497,7 +497,15 @@ def check_node_connections(*, node, num_in, num_out):\n     assert_equal(info[\"connections_out\"], num_out)\n \n def fill_mempool(test_framework, node, miniwallet):\n-        \"\"\"Fill mempool until eviction.\"\"\"\n+        \"\"\"Fill mempool until eviction.\n+\n+        Allows for simpler testing of scenarios with floating minfee > minrelay",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29735#discussion_r1555832375",
      "id" : 1555832375,
      "in_reply_to_id" : 1555694194,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585cvB43",
      "original_commit_id" : "a466686c6e97d47e3f4718eed0f781acb88da7fa",
      "original_line" : 502,
      "original_position" : 7,
      "original_start_line" : null,
      "path" : "test/functional/test_framework/util.py",
      "position" : null,
      "pull_request_review_id" : 1986430699,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29735",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1555832375/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-04-08T13:17:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1555832375",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5767891?v=4",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "node_id" : "MDQ6VXNlcjU3Njc4OTE=",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29735#discussion_r1555832564"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29735"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1555832564"
         }
      },
      "author_association" : "MEMBER",
      "body" : "done, I think",
      "commit_id" : "4fe7d150eb3c85a6597d8fc910fe1490358197ad",
      "created_at" : "2024-04-08T13:18:04Z",
      "diff_hunk" : "@@ -496,6 +496,47 @@ def check_node_connections(*, node, num_in, num_out):\n     assert_equal(info[\"connections_in\"], num_in)\n     assert_equal(info[\"connections_out\"], num_out)\n \n+def fill_mempool(test_framework, node, miniwallet):\n+        \"\"\"Fill mempool until eviction.\"\"\"\n+        test_framework.log.info(\"Fill the mempool until eviction is triggered and the mempoolminfee rises\")\n+        txouts = gen_return_txouts()\n+        relayfee = node.getnetworkinfo()['relayfee']\n+\n+        tx_batch_size = 1\n+        num_of_batches = 75\n+        # Generate UTXOs to flood the mempool\n+        # 1 to create a tx initially that will be evicted from the mempool later\n+        # 75 transactions each with a fee rate higher than the previous one\n+        # And 1 more to verify that this tx does not get added to the mempool with a fee rate less than the mempoolminfee\n+        # And 2 more for the package cpfp test",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29735#discussion_r1555832564",
      "id" : 1555832564,
      "in_reply_to_id" : 1555723093,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585cvB70",
      "original_commit_id" : "c93f790cad1558dcf0b8fb5fd0cf3a276368d656",
      "original_line" : 511,
      "original_position" : 16,
      "original_start_line" : 510,
      "path" : "test/functional/test_framework/util.py",
      "position" : null,
      "pull_request_review_id" : 1986431067,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29735",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1555832564/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : "RIGHT",
      "subject_type" : "line",
      "updated_at" : "2024-04-08T13:18:04Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1555832564",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5767891?v=4",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "node_id" : "MDQ6VXNlcjU3Njc4OTE=",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29735#discussion_r1555832735"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29735"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1555832735"
         }
      },
      "author_association" : "MEMBER",
      "body" : "done",
      "commit_id" : "4fe7d150eb3c85a6597d8fc910fe1490358197ad",
      "created_at" : "2024-04-08T13:18:11Z",
      "diff_hunk" : "@@ -497,7 +497,15 @@ def check_node_connections(*, node, num_in, num_out):\n     assert_equal(info[\"connections_out\"], num_out)\n \n def fill_mempool(test_framework, node, miniwallet):\n-        \"\"\"Fill mempool until eviction.\"\"\"\n+        \"\"\"Fill mempool until eviction.\n+\n+        Allows for simpler testing of scenarios with floating minfee > minrelay\n+        Requires -datacarriersize=100000 and\n+        -maxmempool=5.\n+        It will not ensure mempools become synced as it\n+        is based on a single node and assumes -minrelaytxfee\n+        is 1 sat/vbyte.",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29735#discussion_r1555832735",
      "id" : 1555832735,
      "in_reply_to_id" : 1555729721,
      "line" : 507,
      "node_id" : "PRRC_kwDOABII585cvB-f",
      "original_commit_id" : "a466686c6e97d47e3f4718eed0f781acb88da7fa",
      "original_line" : 507,
      "original_position" : 12,
      "original_start_line" : 505,
      "path" : "test/functional/test_framework/util.py",
      "position" : 12,
      "pull_request_review_id" : 1986431353,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29735",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1555832735/reactions"
      },
      "side" : "RIGHT",
      "start_line" : 505,
      "start_side" : "RIGHT",
      "subject_type" : "line",
      "updated_at" : "2024-04-08T13:18:12Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1555832735",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5767891?v=4",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "node_id" : "MDQ6VXNlcjU3Njc4OTE=",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29735#discussion_r1556048973"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29735"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1556048973"
         }
      },
      "author_association" : "MEMBER",
      "body" : "looking at this again, what do you think about just restarting the node with the `-datacarriersize=100000`, ` -maxmempool=5`, `-minrelaytxfee=0.00001000` after filling the mempool we then restart the node with default node settings?\r\nAre there any advantage of delegating setting this to the caller?\r\nIf not then this will reduce duplication of all callers of `fill_mempool` settings this values.",
      "commit_id" : "4fe7d150eb3c85a6597d8fc910fe1490358197ad",
      "created_at" : "2024-04-08T15:33:34Z",
      "diff_hunk" : "@@ -497,7 +497,15 @@ def check_node_connections(*, node, num_in, num_out):\n     assert_equal(info[\"connections_out\"], num_out)\n \n def fill_mempool(test_framework, node, miniwallet):\n-        \"\"\"Fill mempool until eviction.\"\"\"\n+        \"\"\"Fill mempool until eviction.\n+\n+        Allows for simpler testing of scenarios with floating minfee > minrelay\n+        Requires -datacarriersize=100000 and\n+        -maxmempool=5.\n+        It will not ensure mempools become synced as it\n+        is based on a single node and assumes -minrelaytxfee\n+        is 1 sat/vbyte.",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29735#discussion_r1556048973",
      "id" : 1556048973,
      "in_reply_to_id" : 1555729721,
      "line" : 507,
      "node_id" : "PRRC_kwDOABII585cv2xN",
      "original_commit_id" : "a466686c6e97d47e3f4718eed0f781acb88da7fa",
      "original_line" : 507,
      "original_position" : 12,
      "original_start_line" : 505,
      "path" : "test/functional/test_framework/util.py",
      "position" : 12,
      "pull_request_review_id" : 1986801342,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29735",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1556048973/reactions"
      },
      "side" : "RIGHT",
      "start_line" : 505,
      "start_side" : "RIGHT",
      "subject_type" : "line",
      "updated_at" : "2024-04-08T15:33:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1556048973",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/48946461?v=4",
         "events_url" : "https://api.github.com/users/ismaelsadeeq/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ismaelsadeeq/followers",
         "following_url" : "https://api.github.com/users/ismaelsadeeq/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ismaelsadeeq/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ismaelsadeeq",
         "id" : 48946461,
         "login" : "ismaelsadeeq",
         "node_id" : "MDQ6VXNlcjQ4OTQ2NDYx",
         "organizations_url" : "https://api.github.com/users/ismaelsadeeq/orgs",
         "received_events_url" : "https://api.github.com/users/ismaelsadeeq/received_events",
         "repos_url" : "https://api.github.com/users/ismaelsadeeq/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ismaelsadeeq/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ismaelsadeeq/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ismaelsadeeq"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29735#discussion_r1556951038"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29735"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1556951038"
         }
      },
      "author_association" : "MEMBER",
      "body" : "We can't restart the node after filling the memopool without resetting the floating minfee.\r\n\r\nI could pull in the initial restart if we knew people didn't want any other extra_args.\r\n\r\nAlternatively I could assert that datacarrier and maxmempool is set  in extra_args?\r\n\r\nI think documentation is enough for now, leaving as is.",
      "commit_id" : "4fe7d150eb3c85a6597d8fc910fe1490358197ad",
      "created_at" : "2024-04-09T05:52:55Z",
      "diff_hunk" : "@@ -497,7 +497,15 @@ def check_node_connections(*, node, num_in, num_out):\n     assert_equal(info[\"connections_out\"], num_out)\n \n def fill_mempool(test_framework, node, miniwallet):\n-        \"\"\"Fill mempool until eviction.\"\"\"\n+        \"\"\"Fill mempool until eviction.\n+\n+        Allows for simpler testing of scenarios with floating minfee > minrelay\n+        Requires -datacarriersize=100000 and\n+        -maxmempool=5.\n+        It will not ensure mempools become synced as it\n+        is based on a single node and assumes -minrelaytxfee\n+        is 1 sat/vbyte.",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29735#discussion_r1556951038",
      "id" : 1556951038,
      "in_reply_to_id" : 1555729721,
      "line" : 507,
      "node_id" : "PRRC_kwDOABII585czS_-",
      "original_commit_id" : "a466686c6e97d47e3f4718eed0f781acb88da7fa",
      "original_line" : 507,
      "original_position" : 12,
      "original_start_line" : 505,
      "path" : "test/functional/test_framework/util.py",
      "position" : 12,
      "pull_request_review_id" : 1988156646,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29735",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1556951038/reactions"
      },
      "side" : "RIGHT",
      "start_line" : 505,
      "start_side" : "RIGHT",
      "subject_type" : "line",
      "updated_at" : "2024-04-09T05:52:55Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1556951038",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5767891?v=4",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "node_id" : "MDQ6VXNlcjU3Njc4OTE=",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29735#discussion_r1557579240"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29735"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1557579240"
         }
      },
      "author_association" : "MEMBER",
      "body" : "This should be in the extra args _above_ to avoid writing mempool.dat.\r\n\r\nCurrently the test is fine, but this is because the new datacarriersize causes all the transactions to be rejected.",
      "commit_id" : "4ba1d0b55339c3ea90e2bcd64662a06f0f90dd46",
      "created_at" : "2024-04-09T12:50:32Z",
      "diff_hunk" : "@@ -369,23 +371,69 @@ def test_maxfeerate_maxburn_submitpackage(self):\n         minrate_btc_kvb = min([chained_txn[\"fee\"] / chained_txn[\"tx\"].get_vsize() * 1000 for chained_txn in chained_txns])\n         chain_hex = [t[\"hex\"] for t in chained_txns]\n         pkg_result = node.submitpackage(chain_hex, maxfeerate=minrate_btc_kvb - Decimal(\"0.00000001\"))\n+\n+        # First tx failed in single transaction evaluation, so package message is generic\n+        assert_equal(pkg_result[\"package_msg\"], \"transaction failed\")\n         assert_equal(pkg_result[\"tx-results\"][chained_txns[0][\"wtxid\"]][\"error\"], \"max feerate exceeded\")\n         assert_equal(pkg_result[\"tx-results\"][chained_txns[1][\"wtxid\"]][\"error\"], \"bad-txns-inputs-missingorspent\")\n         assert_equal(node.getrawmempool(), [])\n \n+        # Make chain of two transactions where parent doesn't make minfee threshold\n+        # but child is too high fee\n+        # Lower mempool limit to make it easier to fill_mempool\n+        self.restart_node(0, extra_args=[\n+            \"-datacarriersize=100000\",\n+            \"-maxmempool=5\",\n+        ])\n+\n+        fill_mempool(self, node, self.wallet)\n+\n+        minrelay = node.getmempoolinfo()[\"minrelaytxfee\"]\n+        parent = self.wallet.create_self_transfer(\n+            fee_rate=minrelay,\n+        )\n+\n+        child = self.wallet.create_self_transfer(\n+            fee_rate=DEFAULT_FEE,\n+            utxo_to_spend=parent[\"new_utxo\"],\n+        )\n+\n+        pkg_result = node.submitpackage([parent[\"hex\"], child[\"hex\"]], maxfeerate=DEFAULT_FEE - Decimal(\"0.00000001\"))\n+\n+        # Child is connected even though parent is invalid and still reports fee exceeded\n+        # this implies sub-package evaluation of both entries together.\n+        assert_equal(pkg_result[\"package_msg\"], \"transaction failed\")\n+        assert \"mempool min fee not met\" in pkg_result[\"tx-results\"][parent[\"wtxid\"]][\"error\"]\n+        assert_equal(pkg_result[\"tx-results\"][child[\"wtxid\"]][\"error\"], \"max feerate exceeded\")\n+        assert parent[\"txid\"] not in node.getrawmempool()\n+        assert child[\"txid\"] not in node.getrawmempool()\n+\n+        # Reset maxmempool, datacarriersize, ,reset dynamic mempool minimum feerate, and empty mempool.\n+        self.restart_node(0, extra_args=[\"-persistmempool=0\"])",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29735#discussion_r1557579240",
      "id" : 1557579240,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585c1sXo",
      "original_commit_id" : "f28338b82be9820380ef217905ae9c167164f181",
      "original_line" : 412,
      "original_position" : 69,
      "original_start_line" : null,
      "path" : "test/functional/rpc_packages.py",
      "position" : null,
      "pull_request_review_id" : 1988955318,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29735",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1557579240/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-04-09T12:50:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1557579240",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/25183001?v=4",
         "events_url" : "https://api.github.com/users/glozow/events{/privacy}",
         "followers_url" : "https://api.github.com/users/glozow/followers",
         "following_url" : "https://api.github.com/users/glozow/following{/other_user}",
         "gists_url" : "https://api.github.com/users/glozow/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/glozow",
         "id" : 25183001,
         "login" : "glozow",
         "node_id" : "MDQ6VXNlcjI1MTgzMDAx",
         "organizations_url" : "https://api.github.com/users/glozow/orgs",
         "received_events_url" : "https://api.github.com/users/glozow/received_events",
         "repos_url" : "https://api.github.com/users/glozow/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/glozow/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/glozow/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/glozow"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29735#discussion_r1557583670"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29735"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1557583670"
         }
      },
      "author_association" : "MEMBER",
      "body" : "ð I think this interface is better if the caller knows what the requirements are but can otherwise put whatever args they want",
      "commit_id" : "4ba1d0b55339c3ea90e2bcd64662a06f0f90dd46",
      "created_at" : "2024-04-09T12:53:50Z",
      "diff_hunk" : "@@ -369,23 +370,65 @@ def test_maxfeerate_maxburn_submitpackage(self):\n         minrate_btc_kvb = min([chained_txn[\"fee\"] / chained_txn[\"tx\"].get_vsize() * 1000 for chained_txn in chained_txns])\n         chain_hex = [t[\"hex\"] for t in chained_txns]\n         pkg_result = node.submitpackage(chain_hex, maxfeerate=minrate_btc_kvb - Decimal(\"0.00000001\"))\n+\n+        # First tx failed in single transaction evaluation, so package message is generic\n+        assert_equal(pkg_result[\"package_msg\"], \"transaction failed\")\n         assert_equal(pkg_result[\"tx-results\"][chained_txns[0][\"wtxid\"]][\"error\"], \"max feerate exceeded\")\n         assert_equal(pkg_result[\"tx-results\"][chained_txns[1][\"wtxid\"]][\"error\"], \"bad-txns-inputs-missingorspent\")\n         assert_equal(node.getrawmempool(), [])\n \n+        # Make chain of two transactions where parent doesn't make minfee threshold\n+        # but child is too high fee\n+        # Needed for fill_mempool\n+        self.restart_node(0, extra_args=[\n+            \"-datacarriersize=100000\",\n+            \"-maxmempool=5\",\n+        ])",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29735#discussion_r1557583670",
      "id" : 1557583670,
      "in_reply_to_id" : 1552208469,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585c1tc2",
      "original_commit_id" : "271599af6d84c871154dc16c7abcadbe5ac08163",
      "original_line" : 388,
      "original_position" : 25,
      "original_start_line" : 382,
      "path" : "test/functional/rpc_packages.py",
      "position" : null,
      "pull_request_review_id" : 1988962379,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29735",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1557583670/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : "RIGHT",
      "subject_type" : "line",
      "updated_at" : "2024-04-09T12:53:50Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1557583670",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/25183001?v=4",
         "events_url" : "https://api.github.com/users/glozow/events{/privacy}",
         "followers_url" : "https://api.github.com/users/glozow/followers",
         "following_url" : "https://api.github.com/users/glozow/following{/other_user}",
         "gists_url" : "https://api.github.com/users/glozow/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/glozow",
         "id" : 25183001,
         "login" : "glozow",
         "node_id" : "MDQ6VXNlcjI1MTgzMDAx",
         "organizations_url" : "https://api.github.com/users/glozow/orgs",
         "received_events_url" : "https://api.github.com/users/glozow/received_events",
         "repos_url" : "https://api.github.com/users/glozow/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/glozow/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/glozow/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/glozow"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29735#discussion_r1557587565"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29735"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1557587565"
         }
      },
      "author_association" : "MEMBER",
      "body" : "moved and added assertion of empty mempool after restart",
      "commit_id" : "4ba1d0b55339c3ea90e2bcd64662a06f0f90dd46",
      "created_at" : "2024-04-09T12:56:41Z",
      "diff_hunk" : "@@ -369,23 +371,69 @@ def test_maxfeerate_maxburn_submitpackage(self):\n         minrate_btc_kvb = min([chained_txn[\"fee\"] / chained_txn[\"tx\"].get_vsize() * 1000 for chained_txn in chained_txns])\n         chain_hex = [t[\"hex\"] for t in chained_txns]\n         pkg_result = node.submitpackage(chain_hex, maxfeerate=minrate_btc_kvb - Decimal(\"0.00000001\"))\n+\n+        # First tx failed in single transaction evaluation, so package message is generic\n+        assert_equal(pkg_result[\"package_msg\"], \"transaction failed\")\n         assert_equal(pkg_result[\"tx-results\"][chained_txns[0][\"wtxid\"]][\"error\"], \"max feerate exceeded\")\n         assert_equal(pkg_result[\"tx-results\"][chained_txns[1][\"wtxid\"]][\"error\"], \"bad-txns-inputs-missingorspent\")\n         assert_equal(node.getrawmempool(), [])\n \n+        # Make chain of two transactions where parent doesn't make minfee threshold\n+        # but child is too high fee\n+        # Lower mempool limit to make it easier to fill_mempool\n+        self.restart_node(0, extra_args=[\n+            \"-datacarriersize=100000\",\n+            \"-maxmempool=5\",\n+        ])\n+\n+        fill_mempool(self, node, self.wallet)\n+\n+        minrelay = node.getmempoolinfo()[\"minrelaytxfee\"]\n+        parent = self.wallet.create_self_transfer(\n+            fee_rate=minrelay,\n+        )\n+\n+        child = self.wallet.create_self_transfer(\n+            fee_rate=DEFAULT_FEE,\n+            utxo_to_spend=parent[\"new_utxo\"],\n+        )\n+\n+        pkg_result = node.submitpackage([parent[\"hex\"], child[\"hex\"]], maxfeerate=DEFAULT_FEE - Decimal(\"0.00000001\"))\n+\n+        # Child is connected even though parent is invalid and still reports fee exceeded\n+        # this implies sub-package evaluation of both entries together.\n+        assert_equal(pkg_result[\"package_msg\"], \"transaction failed\")\n+        assert \"mempool min fee not met\" in pkg_result[\"tx-results\"][parent[\"wtxid\"]][\"error\"]\n+        assert_equal(pkg_result[\"tx-results\"][child[\"wtxid\"]][\"error\"], \"max feerate exceeded\")\n+        assert parent[\"txid\"] not in node.getrawmempool()\n+        assert child[\"txid\"] not in node.getrawmempool()\n+\n+        # Reset maxmempool, datacarriersize, ,reset dynamic mempool minimum feerate, and empty mempool.\n+        self.restart_node(0, extra_args=[\"-persistmempool=0\"])",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29735#discussion_r1557587565",
      "id" : 1557587565,
      "in_reply_to_id" : 1557579240,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585c1uZt",
      "original_commit_id" : "f28338b82be9820380ef217905ae9c167164f181",
      "original_line" : 412,
      "original_position" : 69,
      "original_start_line" : null,
      "path" : "test/functional/rpc_packages.py",
      "position" : null,
      "pull_request_review_id" : 1988968577,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29735",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1557587565/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-04-09T12:56:41Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1557587565",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5767891?v=4",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "node_id" : "MDQ6VXNlcjU3Njc4OTE=",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   }
]
