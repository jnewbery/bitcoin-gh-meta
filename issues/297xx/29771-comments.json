[
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage\nFor detailed information about the code coverage, see the [test coverage report](https://corecheck.dev/bitcoin/bitcoin/pulls/29771).\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\nA summary of reviews will appear here.\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#29777](https://github.com/bitcoin/bitcoin/pull/29777) (test: refactor: introduce and use `calculate_input_weight` helper by theStack)\n* [#29387](https://github.com/bitcoin/bitcoin/pull/29387) (test: fix RPC coverage check by BrandonOdiwuor)\n* [#28312](https://github.com/bitcoin/bitcoin/pull/28312) (test: fix `keys_to_multisig_script` (P2MS) helper for n/k > 16 by theStack)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.\n",
      "created_at" : "2024-03-31T03:42:25Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29771#issuecomment-2028543125",
      "id" : 2028543125,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/29771",
      "node_id" : "IC_kwDOABII58546RyV",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2028543125/reactions"
      },
      "updated_at" : "2024-04-01T22:54:10Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2028543125",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--85328a0da195eb286784d51f73fa0af9-->\n\nð§ At least one of the CI tasks failed. Make sure to run all tests locally, according to the\ndocumentation.\n\nPossibly this is due to a silent merge conflict (the changes in this pull request being\nincompatible with the current code in the target branch). If so, make sure to rebase on the latest\ncommit of the target branch.\n\nLeave a comment here, if you need help tracking down a confusing failure.\n\n<sub>Debug: https://github.com/bitcoin/bitcoin/runs/23271888984</sub>",
      "created_at" : "2024-03-31T04:11:49Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29771#issuecomment-2028547512",
      "id" : 2028547512,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/29771",
      "node_id" : "IC_kwDOABII58546S24",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2028547512/reactions"
      },
      "updated_at" : "2024-03-31T04:11:49Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2028547512",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "I suppose the original idea was to run these first as a sanity check. To somewhat retain that property, perhaps the entire test suite can be aborted if this fails.\r\n\r\nIf you run these in parallel, I think you might as well drop the `--skipunit` since it's faster than many of the other tests.\r\n\r\n> When running specific functional tests, framework unit tests are now skipped by default\r\n\r\nThis is useful, but wasn't that already the case? Or do you mean when using the `--filter` argument, rather than executing the individual test directly?\r\n\r\nTested the average of three runs for `time test/functional/test_runner.py --jobs=100` on a machine with 32 threads and a RAM disk for `--cachedir` and `--tmpdir`\r\n\r\nBefore: 1 minute 12 seconds\r\n\r\nAfter: 1 minute 13 seconds\r\n\r\nThat last number is dominated by a single run that took unusually long. Typically it's 4 seconds faster.",
      "created_at" : "2024-04-02T14:25:31Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29771#issuecomment-2032189173",
      "id" : 2032189173,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/29771",
      "node_id" : "IC_kwDOABII5855IL71",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2032189173/reactions"
      },
      "updated_at" : "2024-04-02T14:27:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2032189173",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> I suppose the original idea was to run these first as a sanity check. To somewhat retain that property, perhaps the entire test suite can be aborted if this fails.\r\n\r\nNot sure. For example, what point is it to abort *all* tests when the `muhash` unit test fails, when most tests are not using muhash? If someone wanted to abort early, there is the failfast option.\r\n\r\n> If you run these in parallel, I think you might as well drop the --skipunit since it's faster than many of the other tests.\r\n\r\nAgree.",
      "created_at" : "2024-04-02T14:31:47Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29771#issuecomment-2032203979",
      "id" : 2032203979,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/29771",
      "node_id" : "IC_kwDOABII5855IPjL",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2032203979/reactions"
      },
      "updated_at" : "2024-04-02T14:31:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2032203979",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/maflcko/events{/privacy}",
         "followers_url" : "https://api.github.com/users/maflcko/followers",
         "following_url" : "https://api.github.com/users/maflcko/following{/other_user}",
         "gists_url" : "https://api.github.com/users/maflcko/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/maflcko",
         "id" : 6399679,
         "login" : "maflcko",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/maflcko/orgs",
         "received_events_url" : "https://api.github.com/users/maflcko/received_events",
         "repos_url" : "https://api.github.com/users/maflcko/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/maflcko/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/maflcko/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/maflcko"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "I was assuming that any failure of the framework tests means your system is broken, but maybe that's too strong an assumption.",
      "created_at" : "2024-04-02T14:51:29Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29771#issuecomment-2032261502",
      "id" : 2032261502,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/29771",
      "node_id" : "IC_kwDOABII5855Idl-",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2032261502/reactions"
      },
      "updated_at" : "2024-04-02T14:51:29Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2032261502",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Thank you for taking a look @Sjors and @maflcko!\r\n\r\n> If you run these in parallel, I think you might as well drop the `--skipunit` since it's faster than many of the other tests.\r\n\r\nTo ensure I understand, is the desire here to have the unit tests run by default when running individual tests (and also by default when running all tests)?\r\n\r\nIf so, that seems reasonable to me.  As you mentioned, the unit tests are decently fast and the default job value is 4 anyway (so there would be some inherent parallelization now rather than the previous behavior to serialize unit test execution).  For example, on my system, running `feature_signet.py` with or without `feature_framework_unit_tests.py` (default jobs=4) now has the same runtime.  The tests that would be impacted are relatively short ones anyway, and the user still has the option to specify `--skipunit` to save a few seconds (the difference between the short test execution and unit test runtime).\r\n\r\n> \r\n> > When running specific functional tests, framework unit tests are now skipped by default\r\n> \r\n> This is useful, but wasn't that already the case? Or do you mean when using the `--filter` argument, rather than executing the individual test directly?\r\n\r\nThe previous behavior was to run the unit tests first, blocking all other tests until the unit tests passed.  If the unit tests failed, execution would stop before running any other tests (i.e. the default behavior for unit tests was to fail fast).\r\n\r\nThe new behavior is for unit tests to be run in parallel, not in a fail fast manner.  The user can specify `--failfast` to end testing early if any test fails (unit tests are no exception). \r\n\r\n",
      "created_at" : "2024-04-02T22:03:07Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29771#issuecomment-2033180778",
      "id" : 2033180778,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/29771",
      "node_id" : "IC_kwDOABII5855L-Bq",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2033180778/reactions"
      },
      "updated_at" : "2024-04-02T22:03:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2033180778",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/106488469?v=4",
         "events_url" : "https://api.github.com/users/tdb3/events{/privacy}",
         "followers_url" : "https://api.github.com/users/tdb3/followers",
         "following_url" : "https://api.github.com/users/tdb3/following{/other_user}",
         "gists_url" : "https://api.github.com/users/tdb3/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/tdb3",
         "id" : 106488469,
         "login" : "tdb3",
         "node_id" : "U_kgDOBljilQ",
         "organizations_url" : "https://api.github.com/users/tdb3/orgs",
         "received_events_url" : "https://api.github.com/users/tdb3/received_events",
         "repos_url" : "https://api.github.com/users/tdb3/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/tdb3/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/tdb3/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/tdb3"
      }
   }
]
