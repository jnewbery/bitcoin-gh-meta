[
   {
      "author_association" : "MEMBER",
      "body" : "I loaded a mainnet snapshot today with a pruned node with limited --dbcache=10000 on a 2019 MacBook Pro. This time I had the node sync for about an hour before loading the snapshot.\r\n\r\nAt some point the log says:\r\n\r\n```\r\n2024-05-28T12:38:11Z Cache size (10375257872) exceeds total space (10370521497)\r\n2024-05-28T12:38:11Z FlushSnapshotToDisk: flushing coins cache (10375 MB) started\r\n```\r\n\r\nThis flush took 50 minutes, while the chain synced from 392,803 to 417,312. It then continues loading coins from the snapshot.",
      "created_at" : "2024-05-28T13:30:34Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/29993#issuecomment-2135225915",
      "id" : 2135225915,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/29993",
      "node_id" : "IC_kwDOABII585_RPY7",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2135225915/reactions"
      },
      "updated_at" : "2024-05-28T13:30:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2135225915",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "In an earlier version of the code, we would acquire `cs_main` during the duration of snapshot load/activation. Maybe worth going back to that?",
      "created_at" : "2024-05-28T20:49:48Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/29993#issuecomment-2136081597",
      "id" : 2136081597,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/29993",
      "node_id" : "IC_kwDOABII585_UgS9",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2136081597/reactions"
      },
      "updated_at" : "2024-05-28T20:49:48Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2136081597",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/73197?v=4",
         "events_url" : "https://api.github.com/users/jamesob/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jamesob/followers",
         "following_url" : "https://api.github.com/users/jamesob/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jamesob/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jamesob",
         "id" : 73197,
         "login" : "jamesob",
         "node_id" : "MDQ6VXNlcjczMTk3",
         "organizations_url" : "https://api.github.com/users/jamesob/orgs",
         "received_events_url" : "https://api.github.com/users/jamesob/received_events",
         "repos_url" : "https://api.github.com/users/jamesob/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jamesob/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jamesob/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jamesob"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "IIUC taking `cs_main` blocks all RPC requests and the GUI, and this process can take half an hour or so on a modernish laptop. So I would prefer a less overkill method of pausing IBD. During my own testing I just turned the network off, but that's maybe not ideal either. Adding a few seconds delay before requesting new blocks might do the trick, while preventing our connections from timing out.",
      "created_at" : "2024-05-29T16:13:30Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/29993#issuecomment-2137791010",
      "id" : 2137791010,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/29993",
      "node_id" : "IC_kwDOABII585_bBoi",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2137791010/reactions"
      },
      "updated_at" : "2024-05-29T16:17:20Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2137791010",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   }
]
