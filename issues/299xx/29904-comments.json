[
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage\nFor detailed information about the code coverage, see the [test coverage report](https://corecheck.dev/bitcoin/bitcoin/pulls/29904).\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| ACK | [laanwj](https://github.com/bitcoin/bitcoin/pull/29904#pullrequestreview-2014113911) |\n| Concept NACK | [luke-jr](https://github.com/bitcoin/bitcoin/pull/29904#issuecomment-2067871490) |\n| Concept ACK | [TheCharlatan](https://github.com/bitcoin/bitcoin/pull/29904#issuecomment-2063858822), [hebasto](https://github.com/bitcoin/bitcoin/pull/29904#issuecomment-2064197562) |\n| Approach ACK | [stickies-v](https://github.com/bitcoin/bitcoin/pull/29904#pullrequestreview-2009339803) |\n| Stale ACK | [Sjors](https://github.com/bitcoin/bitcoin/pull/29904#pullrequestreview-2010862632) |\n\nIf your review is incorrectly listed, please react with ð to this comment and the bot will ignore it on the next update.\n",
      "created_at" : "2024-04-18T13:06:21Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29904#issuecomment-2063825450",
      "id" : 2063825450,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/29904",
      "node_id" : "IC_kwDOABII5857A3oq",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2063825450/reactions"
      },
      "updated_at" : "2024-04-22T08:29:16Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2063825450",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Concept ACK\r\nyes please... the hooking we do for `URL_DECODE` and `UrlDecodeFn` made me kind of scared, to be honest (in that context), i think can we get rid of that at the same time?\r\n\r\nThis will also fix @luke-jr's #29654.",
      "created_at" : "2024-04-18T13:11:16Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29904#issuecomment-2063835209",
      "id" : 2063835209,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/29904",
      "node_id" : "IC_kwDOABII5857A6BJ",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 2,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 2,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2063835209/reactions"
      },
      "updated_at" : "2024-04-18T13:11:16Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2063835209",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Concept ACK",
      "created_at" : "2024-04-18T13:22:38Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29904#issuecomment-2063858822",
      "id" : 2063858822,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/29904",
      "node_id" : "IC_kwDOABII5857A_yG",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2063858822/reactions"
      },
      "updated_at" : "2024-04-18T13:22:38Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2063858822",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8421793?v=4",
         "events_url" : "https://api.github.com/users/TheCharlatan/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheCharlatan/followers",
         "following_url" : "https://api.github.com/users/TheCharlatan/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheCharlatan/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheCharlatan",
         "id" : 8421793,
         "login" : "TheCharlatan",
         "node_id" : "MDQ6VXNlcjg0MjE3OTM=",
         "organizations_url" : "https://api.github.com/users/TheCharlatan/orgs",
         "received_events_url" : "https://api.github.com/users/TheCharlatan/received_events",
         "repos_url" : "https://api.github.com/users/TheCharlatan/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheCharlatan/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheCharlatan/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheCharlatan"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Concept ACK",
      "created_at" : "2024-04-18T13:54:55Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29904#issuecomment-2063926648",
      "id" : 2063926648,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/29904",
      "node_id" : "IC_kwDOABII5857BQV4",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2063926648/reactions"
      },
      "updated_at" : "2024-04-18T13:54:55Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2063926648",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/69010457?v=4",
         "events_url" : "https://api.github.com/users/stickies-v/events{/privacy}",
         "followers_url" : "https://api.github.com/users/stickies-v/followers",
         "following_url" : "https://api.github.com/users/stickies-v/following{/other_user}",
         "gists_url" : "https://api.github.com/users/stickies-v/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/stickies-v",
         "id" : 69010457,
         "login" : "stickies-v",
         "node_id" : "MDQ6VXNlcjY5MDEwNDU3",
         "organizations_url" : "https://api.github.com/users/stickies-v/orgs",
         "received_events_url" : "https://api.github.com/users/stickies-v/received_events",
         "repos_url" : "https://api.github.com/users/stickies-v/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/stickies-v/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/stickies-v/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/stickies-v"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Concept ACK.",
      "created_at" : "2024-04-18T15:18:16Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29904#issuecomment-2064197562",
      "id" : 2064197562,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/29904",
      "node_id" : "IC_kwDOABII5857CSe6",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2064197562/reactions"
      },
      "updated_at" : "2024-04-18T15:18:16Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2064197562",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/32963518?v=4",
         "events_url" : "https://api.github.com/users/hebasto/events{/privacy}",
         "followers_url" : "https://api.github.com/users/hebasto/followers",
         "following_url" : "https://api.github.com/users/hebasto/following{/other_user}",
         "gists_url" : "https://api.github.com/users/hebasto/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/hebasto",
         "id" : 32963518,
         "login" : "hebasto",
         "node_id" : "MDQ6VXNlcjMyOTYzNTE4",
         "organizations_url" : "https://api.github.com/users/hebasto/orgs",
         "received_events_url" : "https://api.github.com/users/hebasto/received_events",
         "repos_url" : "https://api.github.com/users/hebasto/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/hebasto/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/hebasto"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29904#discussion_r1571038503"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29904"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1571038503"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "nit\r\n```suggestion\r\n    BOOST_CHECK_EQUAL(urlDecode(encoded), result);\r\n```",
      "commit_id" : "2447bc7774edcc3f0ac92a41d4a7a30dde663da0",
      "created_at" : "2024-04-18T16:12:09Z",
      "diff_hunk" : "@@ -0,0 +1,46 @@\n+// Copyright (c) 2024 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include <test/util/setup_common.h>\n+#include <common/url.h>\n+\n+#include <string>\n+\n+#include <boost/test/unit_test.hpp>\n+\n+BOOST_AUTO_TEST_SUITE(common_url_tests)\n+\n+// These test vectors were ported from test/regress.c in the libevent library\n+// which used to be a dependency of the urlDecode function.\n+\n+BOOST_AUTO_TEST_CASE(encode_decode_test) {\n+    BOOST_CHECK_EQUAL(urlDecode(\"Hello\"), \"Hello\");\n+    BOOST_CHECK_EQUAL(urlDecode(\"99\"), \"99\");\n+    BOOST_CHECK_EQUAL(urlDecode(\"\"), \"\");\n+    BOOST_CHECK_EQUAL(urlDecode(\"abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ123456789-.~_\"),\n+                      \"abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ123456789-.~_\");\n+    BOOST_CHECK_EQUAL(urlDecode(\"%20\"), \" \");\n+    BOOST_CHECK_EQUAL(urlDecode(\"%FF%F0%E0\"), \"\\xff\\xf0\\xe0\");\n+    BOOST_CHECK_EQUAL(urlDecode(\"%01%19\"), \"\\x01\\x19\");\n+    BOOST_CHECK_EQUAL(urlDecode(\"http%3A%2F%2Fwww.ietf.org%2Frfc%2Frfc3986.txt\"),\n+                      \"http://www.ietf.org/rfc/rfc3986.txt\");\n+    BOOST_CHECK_EQUAL(urlDecode(\"1%2B2%3D3\"), \"1+2=3\");\n+}\n+\n+BOOST_AUTO_TEST_CASE(decode_malformed_test) {\n+    BOOST_CHECK_EQUAL(urlDecode(\"%%xhello th+ere \\xff\"), \"%%xhello th+ere \\xff\");\n+}\n+\n+BOOST_AUTO_TEST_CASE(decode_lowercase_hex_test) {\n+    BOOST_CHECK_EQUAL(urlDecode(\"%f0%a0%b0\"), \"\\xf0\\xa0\\xb0\");\n+}\n+\n+BOOST_AUTO_TEST_CASE(decode_internal_nuls_test) {\n+    std::string result{\"\\0\\0x\\0\\0\", 5};\n+    std::string encoded{\"%00%00x%00%00\"};\n+    BOOST_CHECK_EQUAL(urlDecode(encoded).size(), 5);\n+    BOOST_CHECK(urlDecode(encoded) == result);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29904#discussion_r1571038503",
      "id" : 1571038503,
      "line" : 43,
      "node_id" : "PRRC_kwDOABII585dpCUn",
      "original_commit_id" : "2447bc7774edcc3f0ac92a41d4a7a30dde663da0",
      "original_line" : 43,
      "original_position" : 43,
      "original_start_line" : null,
      "path" : "src/test/common_url_tests.cpp",
      "position" : 43,
      "pull_request_review_id" : 2009339803,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29904",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1571038503/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-04-18T16:46:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1571038503",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/69010457?v=4",
         "events_url" : "https://api.github.com/users/stickies-v/events{/privacy}",
         "followers_url" : "https://api.github.com/users/stickies-v/followers",
         "following_url" : "https://api.github.com/users/stickies-v/following{/other_user}",
         "gists_url" : "https://api.github.com/users/stickies-v/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/stickies-v",
         "id" : 69010457,
         "login" : "stickies-v",
         "node_id" : "MDQ6VXNlcjY5MDEwNDU3",
         "organizations_url" : "https://api.github.com/users/stickies-v/orgs",
         "received_events_url" : "https://api.github.com/users/stickies-v/received_events",
         "repos_url" : "https://api.github.com/users/stickies-v/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/stickies-v/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/stickies-v/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/stickies-v"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29904#discussion_r1571059431"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29904"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1571059431"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "We didn't use [plus decoding](https://github.com/libevent/libevent/blob/e0a4574ba2cbcdb64bb2b593e72be7f7f4010746/http.c#L3505) with `evhttp_uridecode`, so this implementation keeps functionality the same. Since `urlDecode` is a generic utility function, I think there should be a docstring that highlights that this implementation doesn't decode `+` to ` ` in case it's used for other purposes in the future.",
      "commit_id" : "2447bc7774edcc3f0ac92a41d4a7a30dde663da0",
      "created_at" : "2024-04-18T16:29:13Z",
      "diff_hunk" : "@@ -4,19 +4,33 @@\n \n #include <common/url.h>\n \n-#include <event2/http.h>\n-\n-#include <cstdlib>\n #include <string>\n+#include <stdexcept>\n+#include <charconv>\n \n-std::string urlDecode(const std::string &urlEncoded) {\n+std::string urlDecode(const std::string& urlEncoded) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29904#discussion_r1571059431",
      "id" : 1571059431,
      "line" : 11,
      "node_id" : "PRRC_kwDOABII585dpHbn",
      "original_commit_id" : "2447bc7774edcc3f0ac92a41d4a7a30dde663da0",
      "original_line" : 11,
      "original_position" : 12,
      "original_start_line" : null,
      "path" : "src/common/url.cpp",
      "position" : 12,
      "pull_request_review_id" : 2009339803,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29904",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1571059431/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-04-18T16:46:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1571059431",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/69010457?v=4",
         "events_url" : "https://api.github.com/users/stickies-v/events{/privacy}",
         "followers_url" : "https://api.github.com/users/stickies-v/followers",
         "following_url" : "https://api.github.com/users/stickies-v/following{/other_user}",
         "gists_url" : "https://api.github.com/users/stickies-v/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/stickies-v",
         "id" : 69010457,
         "login" : "stickies-v",
         "node_id" : "MDQ6VXNlcjY5MDEwNDU3",
         "organizations_url" : "https://api.github.com/users/stickies-v/orgs",
         "received_events_url" : "https://api.github.com/users/stickies-v/received_events",
         "repos_url" : "https://api.github.com/users/stickies-v/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/stickies-v/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/stickies-v/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/stickies-v"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29904#discussion_r1571063727"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29904"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1571063727"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "What's the rationale for continuing here? Should we accept invalid URLs? At first sight, I think I'd prefer having this return a `util::Result` and have the function fail in case of missing hex digits or invalid hex?",
      "commit_id" : "2447bc7774edcc3f0ac92a41d4a7a30dde663da0",
      "created_at" : "2024-04-18T16:33:02Z",
      "diff_hunk" : "@@ -4,19 +4,33 @@\n \n #include <common/url.h>\n \n-#include <event2/http.h>\n-\n-#include <cstdlib>\n #include <string>\n+#include <stdexcept>\n+#include <charconv>\n \n-std::string urlDecode(const std::string &urlEncoded) {\n+std::string urlDecode(const std::string& urlEncoded) {\n     std::string res;\n-    if (!urlEncoded.empty()) {\n-        char *decoded = evhttp_uridecode(urlEncoded.c_str(), false, nullptr);\n-        if (decoded) {\n-            res = std::string(decoded);\n-            free(decoded);\n+    res.reserve(urlEncoded.size());\n+\n+    for (size_t i = 0; i < urlEncoded.size(); ++i) {\n+        char c = urlEncoded[i];\n+        // Special handling for percent which should be followed by two hex digits\n+        // representing an octet values, see RFC 3986, Section 2.1 Percent-Encoding\n+        if (c == '%' && i + 2 < urlEncoded.size()) {\n+            int decoded_value = 0;\n+            auto [ptr, ec] = std::from_chars(&urlEncoded[i + 1], &urlEncoded[i + 3], decoded_value, 16);\n+            if (ec == std::errc()) {\n+                res += static_cast<char>(decoded_value);\n+                // Next two characters are part of the percent encoding\n+                i += 2;\n+            } else {\n+                // In case of invalid percent encoding, add the '%' and continue",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29904#discussion_r1571063727",
      "id" : 1571063727,
      "line" : 27,
      "node_id" : "PRRC_kwDOABII585dpIev",
      "original_commit_id" : "2447bc7774edcc3f0ac92a41d4a7a30dde663da0",
      "original_line" : 27,
      "original_position" : 33,
      "original_start_line" : null,
      "path" : "src/common/url.cpp",
      "position" : 33,
      "pull_request_review_id" : 2009339803,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29904",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1571063727/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-04-18T16:46:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1571063727",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/69010457?v=4",
         "events_url" : "https://api.github.com/users/stickies-v/events{/privacy}",
         "followers_url" : "https://api.github.com/users/stickies-v/followers",
         "following_url" : "https://api.github.com/users/stickies-v/following{/other_user}",
         "gists_url" : "https://api.github.com/users/stickies-v/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/stickies-v",
         "id" : 69010457,
         "login" : "stickies-v",
         "node_id" : "MDQ6VXNlcjY5MDEwNDU3",
         "organizations_url" : "https://api.github.com/users/stickies-v/orgs",
         "received_events_url" : "https://api.github.com/users/stickies-v/received_events",
         "repos_url" : "https://api.github.com/users/stickies-v/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/stickies-v/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/stickies-v/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/stickies-v"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Addressed @laanwj 's comment and removed the hooking.\r\n\r\nFWIW, I wondered for a moment why this is in common and not util but that was a conscious decision, see #26294.\r\n\r\n> yes please... the hooking we do for `URL_DECODE` and `UrlDecodeFn` made me kind of scared, to be honest (in that context), i think can we get rid of that at the same time?\r\n\r\nAbsolutely, I hadn't even seen that yet. For reviewers that wonder as well, the point of this was to not have the wallet depend on `libevent`, see #18504.\r\n\r\n> This will also fix @luke-jr's #29654.\r\n\r\nNice, I also missed that one!\r\n\r\n",
      "created_at" : "2024-04-18T18:37:52Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29904#issuecomment-2064887943",
      "id" : 2064887943,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/29904",
      "node_id" : "IC_kwDOABII5857E7CH",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2064887943/reactions"
      },
      "updated_at" : "2024-04-18T18:37:52Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2064887943",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1322187?v=4",
         "events_url" : "https://api.github.com/users/fjahr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fjahr/followers",
         "following_url" : "https://api.github.com/users/fjahr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fjahr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fjahr",
         "id" : 1322187,
         "login" : "fjahr",
         "node_id" : "MDQ6VXNlcjEzMjIxODc=",
         "organizations_url" : "https://api.github.com/users/fjahr/orgs",
         "received_events_url" : "https://api.github.com/users/fjahr/received_events",
         "repos_url" : "https://api.github.com/users/fjahr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fjahr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fjahr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fjahr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29904#discussion_r1571211295"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29904"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1571211295"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "I also found this a bit strange but it's the behavior of libevent and they even have an explicit test case for this (which failed when I wrote my initial implementation). I didn't investigate this further yet but I think the safest option is to keep this a pure refactor for now.",
      "commit_id" : "68bf6c82fee917756b367db4e99a8f6bcb6476bf",
      "created_at" : "2024-04-18T18:44:37Z",
      "diff_hunk" : "@@ -4,19 +4,33 @@\n \n #include <common/url.h>\n \n-#include <event2/http.h>\n-\n-#include <cstdlib>\n #include <string>\n+#include <stdexcept>\n+#include <charconv>\n \n-std::string urlDecode(const std::string &urlEncoded) {\n+std::string urlDecode(const std::string& urlEncoded) {\n     std::string res;\n-    if (!urlEncoded.empty()) {\n-        char *decoded = evhttp_uridecode(urlEncoded.c_str(), false, nullptr);\n-        if (decoded) {\n-            res = std::string(decoded);\n-            free(decoded);\n+    res.reserve(urlEncoded.size());\n+\n+    for (size_t i = 0; i < urlEncoded.size(); ++i) {\n+        char c = urlEncoded[i];\n+        // Special handling for percent which should be followed by two hex digits\n+        // representing an octet values, see RFC 3986, Section 2.1 Percent-Encoding\n+        if (c == '%' && i + 2 < urlEncoded.size()) {\n+            int decoded_value = 0;\n+            auto [ptr, ec] = std::from_chars(&urlEncoded[i + 1], &urlEncoded[i + 3], decoded_value, 16);\n+            if (ec == std::errc()) {\n+                res += static_cast<char>(decoded_value);\n+                // Next two characters are part of the percent encoding\n+                i += 2;\n+            } else {\n+                // In case of invalid percent encoding, add the '%' and continue",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29904#discussion_r1571211295",
      "id" : 1571211295,
      "in_reply_to_id" : 1571063727,
      "line" : 27,
      "node_id" : "PRRC_kwDOABII585dpsgf",
      "original_commit_id" : "2447bc7774edcc3f0ac92a41d4a7a30dde663da0",
      "original_line" : 27,
      "original_position" : 33,
      "original_start_line" : null,
      "path" : "src/common/url.cpp",
      "position" : 33,
      "pull_request_review_id" : 2009628589,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29904",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1571211295/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-04-18T19:30:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1571211295",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1322187?v=4",
         "events_url" : "https://api.github.com/users/fjahr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fjahr/followers",
         "following_url" : "https://api.github.com/users/fjahr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fjahr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fjahr",
         "id" : 1322187,
         "login" : "fjahr",
         "node_id" : "MDQ6VXNlcjEzMjIxODc=",
         "organizations_url" : "https://api.github.com/users/fjahr/orgs",
         "received_events_url" : "https://api.github.com/users/fjahr/received_events",
         "repos_url" : "https://api.github.com/users/fjahr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fjahr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fjahr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fjahr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29904#discussion_r1571252576"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29904"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1571252576"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "done",
      "commit_id" : "68bf6c82fee917756b367db4e99a8f6bcb6476bf",
      "created_at" : "2024-04-18T19:19:11Z",
      "diff_hunk" : "@@ -0,0 +1,46 @@\n+// Copyright (c) 2024 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include <test/util/setup_common.h>\n+#include <common/url.h>\n+\n+#include <string>\n+\n+#include <boost/test/unit_test.hpp>\n+\n+BOOST_AUTO_TEST_SUITE(common_url_tests)\n+\n+// These test vectors were ported from test/regress.c in the libevent library\n+// which used to be a dependency of the urlDecode function.\n+\n+BOOST_AUTO_TEST_CASE(encode_decode_test) {\n+    BOOST_CHECK_EQUAL(urlDecode(\"Hello\"), \"Hello\");\n+    BOOST_CHECK_EQUAL(urlDecode(\"99\"), \"99\");\n+    BOOST_CHECK_EQUAL(urlDecode(\"\"), \"\");\n+    BOOST_CHECK_EQUAL(urlDecode(\"abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ123456789-.~_\"),\n+                      \"abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ123456789-.~_\");\n+    BOOST_CHECK_EQUAL(urlDecode(\"%20\"), \" \");\n+    BOOST_CHECK_EQUAL(urlDecode(\"%FF%F0%E0\"), \"\\xff\\xf0\\xe0\");\n+    BOOST_CHECK_EQUAL(urlDecode(\"%01%19\"), \"\\x01\\x19\");\n+    BOOST_CHECK_EQUAL(urlDecode(\"http%3A%2F%2Fwww.ietf.org%2Frfc%2Frfc3986.txt\"),\n+                      \"http://www.ietf.org/rfc/rfc3986.txt\");\n+    BOOST_CHECK_EQUAL(urlDecode(\"1%2B2%3D3\"), \"1+2=3\");\n+}\n+\n+BOOST_AUTO_TEST_CASE(decode_malformed_test) {\n+    BOOST_CHECK_EQUAL(urlDecode(\"%%xhello th+ere \\xff\"), \"%%xhello th+ere \\xff\");\n+}\n+\n+BOOST_AUTO_TEST_CASE(decode_lowercase_hex_test) {\n+    BOOST_CHECK_EQUAL(urlDecode(\"%f0%a0%b0\"), \"\\xf0\\xa0\\xb0\");\n+}\n+\n+BOOST_AUTO_TEST_CASE(decode_internal_nuls_test) {\n+    std::string result{\"\\0\\0x\\0\\0\", 5};\n+    std::string encoded{\"%00%00x%00%00\"};\n+    BOOST_CHECK_EQUAL(urlDecode(encoded).size(), 5);\n+    BOOST_CHECK(urlDecode(encoded) == result);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29904#discussion_r1571252576",
      "id" : 1571252576,
      "in_reply_to_id" : 1571038503,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585dp2lg",
      "original_commit_id" : "2447bc7774edcc3f0ac92a41d4a7a30dde663da0",
      "original_line" : 43,
      "original_position" : 43,
      "original_start_line" : null,
      "path" : "src/test/common_url_tests.cpp",
      "position" : null,
      "pull_request_review_id" : 2009695056,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29904",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1571252576/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-04-18T19:19:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1571252576",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1322187?v=4",
         "events_url" : "https://api.github.com/users/fjahr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fjahr/followers",
         "following_url" : "https://api.github.com/users/fjahr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fjahr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fjahr",
         "id" : 1322187,
         "login" : "fjahr",
         "node_id" : "MDQ6VXNlcjEzMjIxODc=",
         "organizations_url" : "https://api.github.com/users/fjahr/orgs",
         "received_events_url" : "https://api.github.com/users/fjahr/received_events",
         "repos_url" : "https://api.github.com/users/fjahr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fjahr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fjahr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fjahr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29904#discussion_r1571252651"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29904"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1571252651"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Added a short docstring.",
      "commit_id" : "68bf6c82fee917756b367db4e99a8f6bcb6476bf",
      "created_at" : "2024-04-18T19:19:16Z",
      "diff_hunk" : "@@ -4,19 +4,33 @@\n \n #include <common/url.h>\n \n-#include <event2/http.h>\n-\n-#include <cstdlib>\n #include <string>\n+#include <stdexcept>\n+#include <charconv>\n \n-std::string urlDecode(const std::string &urlEncoded) {\n+std::string urlDecode(const std::string& urlEncoded) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29904#discussion_r1571252651",
      "id" : 1571252651,
      "in_reply_to_id" : 1571059431,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585dp2mr",
      "original_commit_id" : "2447bc7774edcc3f0ac92a41d4a7a30dde663da0",
      "original_line" : 11,
      "original_position" : 12,
      "original_start_line" : null,
      "path" : "src/common/url.cpp",
      "position" : null,
      "pull_request_review_id" : 2009695164,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29904",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1571252651/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-04-18T19:19:16Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1571252651",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1322187?v=4",
         "events_url" : "https://api.github.com/users/fjahr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fjahr/followers",
         "following_url" : "https://api.github.com/users/fjahr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fjahr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fjahr",
         "id" : 1322187,
         "login" : "fjahr",
         "node_id" : "MDQ6VXNlcjEzMjIxODc=",
         "organizations_url" : "https://api.github.com/users/fjahr/orgs",
         "received_events_url" : "https://api.github.com/users/fjahr/received_events",
         "repos_url" : "https://api.github.com/users/fjahr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fjahr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fjahr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fjahr"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Addressed @stickies-v 's feedback as well, thanks a lot!",
      "created_at" : "2024-04-18T19:20:07Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29904#issuecomment-2065027349",
      "id" : 2065027349,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/29904",
      "node_id" : "IC_kwDOABII5857FdEV",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2065027349/reactions"
      },
      "updated_at" : "2024-04-18T19:20:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2065027349",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1322187?v=4",
         "events_url" : "https://api.github.com/users/fjahr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fjahr/followers",
         "following_url" : "https://api.github.com/users/fjahr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fjahr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fjahr",
         "id" : 1322187,
         "login" : "fjahr",
         "node_id" : "MDQ6VXNlcjEzMjIxODc=",
         "organizations_url" : "https://api.github.com/users/fjahr/orgs",
         "received_events_url" : "https://api.github.com/users/fjahr/received_events",
         "repos_url" : "https://api.github.com/users/fjahr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fjahr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fjahr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fjahr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29904#discussion_r1571288106"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29904"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1571288106"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Indentation isn't right here",
      "commit_id" : "68bf6c82fee917756b367db4e99a8f6bcb6476bf",
      "created_at" : "2024-04-18T19:42:08Z",
      "diff_hunk" : "@@ -85,6 +85,7 @@ BITCOIN_TESTS =\\\n   test/checkqueue_tests.cpp \\\n   test/coins_tests.cpp \\\n   test/coinstatsindex_tests.cpp \\\n+\ttest/common_url_tests.cpp \\",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29904#discussion_r1571288106",
      "id" : 1571288106,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585dp_Qq",
      "original_commit_id" : "f037e67fb76a29573a0a28059279885911ef11e2",
      "original_line" : 88,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "src/Makefile.test.include",
      "position" : null,
      "pull_request_review_id" : 2009744473,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29904",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1571288106/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-04-18T19:42:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1571288106",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29904#discussion_r1571291302"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29904"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1571291302"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "fixed",
      "commit_id" : "68bf6c82fee917756b367db4e99a8f6bcb6476bf",
      "created_at" : "2024-04-18T19:45:43Z",
      "diff_hunk" : "@@ -85,6 +85,7 @@ BITCOIN_TESTS =\\\n   test/checkqueue_tests.cpp \\\n   test/coins_tests.cpp \\\n   test/coinstatsindex_tests.cpp \\\n+\ttest/common_url_tests.cpp \\",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29904#discussion_r1571291302",
      "id" : 1571291302,
      "in_reply_to_id" : 1571288106,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585dqACm",
      "original_commit_id" : "f037e67fb76a29573a0a28059279885911ef11e2",
      "original_line" : 88,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "src/Makefile.test.include",
      "position" : null,
      "pull_request_review_id" : 2009749789,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29904",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1571291302/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-04-18T19:45:44Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1571291302",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1322187?v=4",
         "events_url" : "https://api.github.com/users/fjahr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fjahr/followers",
         "following_url" : "https://api.github.com/users/fjahr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fjahr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fjahr",
         "id" : 1322187,
         "login" : "fjahr",
         "node_id" : "MDQ6VXNlcjEzMjIxODc=",
         "organizations_url" : "https://api.github.com/users/fjahr/orgs",
         "received_events_url" : "https://api.github.com/users/fjahr/received_events",
         "repos_url" : "https://api.github.com/users/fjahr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fjahr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fjahr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fjahr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29904#discussion_r1572032575"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29904"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1572032575"
         }
      },
      "author_association" : "MEMBER",
      "body" : "caa2040edc46291b3f032c64018eda2f4b31df39 nit: `auto [_, ec]`",
      "commit_id" : "68bf6c82fee917756b367db4e99a8f6bcb6476bf",
      "created_at" : "2024-04-19T08:36:36Z",
      "diff_hunk" : "@@ -4,19 +4,33 @@\n \n #include <common/url.h>\n \n-#include <event2/http.h>\n-\n-#include <cstdlib>\n #include <string>\n+#include <stdexcept>\n+#include <charconv>\n \n-std::string urlDecode(const std::string &urlEncoded) {\n+std::string urlDecode(const std::string& urlEncoded) {\n     std::string res;\n-    if (!urlEncoded.empty()) {\n-        char *decoded = evhttp_uridecode(urlEncoded.c_str(), false, nullptr);\n-        if (decoded) {\n-            res = std::string(decoded);\n-            free(decoded);\n+    res.reserve(urlEncoded.size());\n+\n+    for (size_t i = 0; i < urlEncoded.size(); ++i) {\n+        char c = urlEncoded[i];\n+        // Special handling for percent which should be followed by two hex digits\n+        // representing an octet values, see RFC 3986, Section 2.1 Percent-Encoding\n+        if (c == '%' && i + 2 < urlEncoded.size()) {\n+            int decoded_value = 0;\n+            auto [ptr, ec] = std::from_chars(&urlEncoded[i + 1], &urlEncoded[i + 3], decoded_value, 16);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29904#discussion_r1572032575",
      "id" : 1572032575,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585ds1A_",
      "original_commit_id" : "caa2040edc46291b3f032c64018eda2f4b31df39",
      "original_line" : 21,
      "original_position" : 27,
      "original_start_line" : null,
      "path" : "src/common/url.cpp",
      "position" : null,
      "pull_request_review_id" : 2010862632,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29904",
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1572032575/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-04-19T08:46:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1572032575",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29904#discussion_r1572043682"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29904"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1572043682"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Was this doing anything, or did we forget to remove it earlier?",
      "commit_id" : "68bf6c82fee917756b367db4e99a8f6bcb6476bf",
      "created_at" : "2024-04-19T08:45:41Z",
      "diff_hunk" : "@@ -51,7 +50,6 @@\n using CliClock = std::chrono::system_clock;\n \n const std::function<std::string(const char*)> G_TRANSLATION_FUN = nullptr;\n-UrlDecodeFn* const URL_DECODE = urlDecode;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29904#discussion_r1572043682",
      "id" : 1572043682,
      "line" : 54,
      "node_id" : "PRRC_kwDOABII585ds3ui",
      "original_commit_id" : "68bf6c82fee917756b367db4e99a8f6bcb6476bf",
      "original_line" : 54,
      "original_position" : 12,
      "original_start_line" : null,
      "path" : "src/bitcoin-cli.cpp",
      "position" : 12,
      "pull_request_review_id" : 2010862632,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29904",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1572043682/reactions"
      },
      "side" : "LEFT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-04-19T08:46:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1572043682",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29904#discussion_r1572049607"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29904"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1572049607"
         }
      },
      "author_association" : "NONE",
      "body" : "it seems to me that `&& i + 2 < url_encoded.size()` part isn't checked by the tests, consider adding a few more corner cases, e.g. this is what I tested it with:\r\n```C++\r\nBOOST_AUTO_TEST_CASE(decode_malformed_test) {\r\n    BOOST_CHECK_EQUAL(urlDecode(\"%%xhello th+ere \\xff\"), \"%%xhello th+ere \\xff\");\r\n\r\n    BOOST_CHECK_EQUAL(urlDecode(\"%\"), \"%\");\r\n    BOOST_CHECK_EQUAL(urlDecode(\"%%\"), \"%%\");\r\n    BOOST_CHECK_EQUAL(urlDecode(\"%%%\"), \"%%%\");\r\n    BOOST_CHECK_EQUAL(urlDecode(\"%%%%\"), \"%%%%\");\r\n\r\n    BOOST_CHECK_EQUAL(urlDecode(\"+\"), \"+\");\r\n    BOOST_CHECK_EQUAL(urlDecode(\"++\"), \"++\");\r\n\r\n    BOOST_CHECK_EQUAL(urlDecode(\"?\"), \"?\");\r\n    BOOST_CHECK_EQUAL(urlDecode(\"??\"), \"??\");\r\n\r\n    BOOST_CHECK_EQUAL(urlDecode(\"%G1\"), \"%G1\");\r\n    BOOST_CHECK_EQUAL(urlDecode(\"%2\"), \"%2\");\r\n    BOOST_CHECK_EQUAL(urlDecode(\"%ZX\"), \"%ZX\");\r\n\r\n    BOOST_CHECK_EQUAL(urlDecode(\"valid%20string%G1\"), \"valid string%G1\");\r\n    BOOST_CHECK_EQUAL(urlDecode(\"%20invalid%ZX\"), \" invalid%ZX\");\r\n    BOOST_CHECK_EQUAL(urlDecode(\"%20%G1%ZX\"), \" %G1%ZX\");\r\n}\r\n```\r\n\r\nSince the original implementation seems to include a case for handling `?` and `+` as well, I've added tests to make sure they're kept.",
      "commit_id" : "68bf6c82fee917756b367db4e99a8f6bcb6476bf",
      "created_at" : "2024-04-19T08:50:34Z",
      "diff_hunk" : "@@ -4,19 +4,33 @@\n \n #include <common/url.h>\n \n-#include <event2/http.h>\n-\n-#include <cstdlib>\n #include <string>\n+#include <stdexcept>\n+#include <charconv>\n \n-std::string urlDecode(const std::string &urlEncoded) {\n+std::string UrlDecode(const std::string& url_encoded) {\n     std::string res;\n-    if (!urlEncoded.empty()) {\n-        char *decoded = evhttp_uridecode(urlEncoded.c_str(), false, nullptr);\n-        if (decoded) {\n-            res = std::string(decoded);\n-            free(decoded);\n+    res.reserve(url_encoded.size());\n+\n+    for (size_t i = 0; i < url_encoded.size(); ++i) {\n+        char c = url_encoded[i];\n+        // Special handling for percent which should be followed by two hex digits\n+        // representing an octet values, see RFC 3986, Section 2.1 Percent-Encoding\n+        if (c == '%' && i + 2 < url_encoded.size()) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29904#discussion_r1572049607",
      "id" : 1572049607,
      "line" : 19,
      "node_id" : "PRRC_kwDOABII585ds5LH",
      "original_commit_id" : "68bf6c82fee917756b367db4e99a8f6bcb6476bf",
      "original_line" : 19,
      "original_position" : 25,
      "original_start_line" : null,
      "path" : "src/common/url.cpp",
      "position" : 25,
      "pull_request_review_id" : 2010889399,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29904",
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1572049607/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-04-19T09:32:16Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1572049607",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1841944?v=4",
         "events_url" : "https://api.github.com/users/paplorinc/events{/privacy}",
         "followers_url" : "https://api.github.com/users/paplorinc/followers",
         "following_url" : "https://api.github.com/users/paplorinc/following{/other_user}",
         "gists_url" : "https://api.github.com/users/paplorinc/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/paplorinc",
         "id" : 1841944,
         "login" : "paplorinc",
         "node_id" : "MDQ6VXNlcjE4NDE5NDQ=",
         "organizations_url" : "https://api.github.com/users/paplorinc/orgs",
         "received_events_url" : "https://api.github.com/users/paplorinc/received_events",
         "repos_url" : "https://api.github.com/users/paplorinc/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/paplorinc/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/paplorinc/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/paplorinc"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29904#discussion_r1572069107"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29904"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1572069107"
         }
      },
      "author_association" : "NONE",
      "body" : "`ptr` seems unused, we might as well inline it to:\r\n```C++\r\nstd::from_chars(&url_encoded[i + 1], &url_encoded[i + 3], decoded_value, 16).ec == std::errc{})\r\n```\r\n(note, I've used `std::errc{}` instead, seems we're using that more often in the codebase)",
      "commit_id" : "68bf6c82fee917756b367db4e99a8f6bcb6476bf",
      "created_at" : "2024-04-19T09:06:07Z",
      "diff_hunk" : "@@ -4,19 +4,33 @@\n \n #include <common/url.h>\n \n-#include <event2/http.h>\n-\n-#include <cstdlib>\n #include <string>\n+#include <stdexcept>\n+#include <charconv>\n \n-std::string urlDecode(const std::string &urlEncoded) {\n+std::string UrlDecode(const std::string& url_encoded) {\n     std::string res;\n-    if (!urlEncoded.empty()) {\n-        char *decoded = evhttp_uridecode(urlEncoded.c_str(), false, nullptr);\n-        if (decoded) {\n-            res = std::string(decoded);\n-            free(decoded);\n+    res.reserve(url_encoded.size());\n+\n+    for (size_t i = 0; i < url_encoded.size(); ++i) {\n+        char c = url_encoded[i];\n+        // Special handling for percent which should be followed by two hex digits\n+        // representing an octet values, see RFC 3986, Section 2.1 Percent-Encoding\n+        if (c == '%' && i + 2 < url_encoded.size()) {\n+            int decoded_value = 0;\n+            auto [ptr, ec] = std::from_chars(&url_encoded[i + 1], &url_encoded[i + 3], decoded_value, 16);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29904#discussion_r1572069107",
      "id" : 1572069107,
      "line" : 21,
      "node_id" : "PRRC_kwDOABII585ds97z",
      "original_commit_id" : "68bf6c82fee917756b367db4e99a8f6bcb6476bf",
      "original_line" : 21,
      "original_position" : 27,
      "original_start_line" : null,
      "path" : "src/common/url.cpp",
      "position" : 27,
      "pull_request_review_id" : 2010889399,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29904",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1572069107/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-04-19T09:32:16Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1572069107",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1841944?v=4",
         "events_url" : "https://api.github.com/users/paplorinc/events{/privacy}",
         "followers_url" : "https://api.github.com/users/paplorinc/followers",
         "following_url" : "https://api.github.com/users/paplorinc/following{/other_user}",
         "gists_url" : "https://api.github.com/users/paplorinc/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/paplorinc",
         "id" : 1841944,
         "login" : "paplorinc",
         "node_id" : "MDQ6VXNlcjE4NDE5NDQ=",
         "organizations_url" : "https://api.github.com/users/paplorinc/orgs",
         "received_events_url" : "https://api.github.com/users/paplorinc/received_events",
         "repos_url" : "https://api.github.com/users/paplorinc/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/paplorinc/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/paplorinc/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/paplorinc"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29904#discussion_r1572070476"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29904"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1572070476"
         }
      },
      "author_association" : "NONE",
      "body" : "we could unify these two `res += c` cases by merging the two conditions:\r\n```C++\r\nstd::string UrlDecode(const std::string& url_encoded) {\r\n    std::string res;\r\n    res.reserve(url_encoded.size());\r\n\r\n    for (size_t i = 0; i < url_encoded.size(); ++i) {\r\n        int decoded_value = 0;\r\n        if (url_encoded[i] == '%' &&\r\n            i + 2 < url_encoded.size() &&\r\n            std::from_chars(&url_encoded[i + 1], &url_encoded[i + 3], decoded_value, 16).ec == std::errc{}) {\r\n            res += static_cast<char>(decoded_value);\r\n            i += 2;\r\n        } else {\r\n            res += url_encoded[i];\r\n        }\r\n    }\r\n\r\n    return res;\r\n}\r\n```",
      "commit_id" : "68bf6c82fee917756b367db4e99a8f6bcb6476bf",
      "created_at" : "2024-04-19T09:07:14Z",
      "diff_hunk" : "@@ -4,19 +4,33 @@\n \n #include <common/url.h>\n \n-#include <event2/http.h>\n-\n-#include <cstdlib>\n #include <string>\n+#include <stdexcept>\n+#include <charconv>\n \n-std::string urlDecode(const std::string &urlEncoded) {\n+std::string UrlDecode(const std::string& url_encoded) {\n     std::string res;\n-    if (!urlEncoded.empty()) {\n-        char *decoded = evhttp_uridecode(urlEncoded.c_str(), false, nullptr);\n-        if (decoded) {\n-            res = std::string(decoded);\n-            free(decoded);\n+    res.reserve(url_encoded.size());\n+\n+    for (size_t i = 0; i < url_encoded.size(); ++i) {\n+        char c = url_encoded[i];\n+        // Special handling for percent which should be followed by two hex digits\n+        // representing an octet values, see RFC 3986, Section 2.1 Percent-Encoding\n+        if (c == '%' && i + 2 < url_encoded.size()) {\n+            int decoded_value = 0;\n+            auto [ptr, ec] = std::from_chars(&url_encoded[i + 1], &url_encoded[i + 3], decoded_value, 16);\n+            if (ec == std::errc()) {\n+                res += static_cast<char>(decoded_value);\n+                // Next two characters are part of the percent encoding\n+                i += 2;\n+            } else {\n+                // In case of invalid percent encoding, add the '%' and continue\n+                res += c;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29904#discussion_r1572070476",
      "id" : 1572070476,
      "line" : 28,
      "node_id" : "PRRC_kwDOABII585ds-RM",
      "original_commit_id" : "68bf6c82fee917756b367db4e99a8f6bcb6476bf",
      "original_line" : 28,
      "original_position" : 34,
      "original_start_line" : null,
      "path" : "src/common/url.cpp",
      "position" : 34,
      "pull_request_review_id" : 2010889399,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29904",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1572070476/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-04-19T09:32:16Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1572070476",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1841944?v=4",
         "events_url" : "https://api.github.com/users/paplorinc/events{/privacy}",
         "followers_url" : "https://api.github.com/users/paplorinc/followers",
         "following_url" : "https://api.github.com/users/paplorinc/following{/other_user}",
         "gists_url" : "https://api.github.com/users/paplorinc/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/paplorinc",
         "id" : 1841944,
         "login" : "paplorinc",
         "node_id" : "MDQ6VXNlcjE4NDE5NDQ=",
         "organizations_url" : "https://api.github.com/users/paplorinc/orgs",
         "received_events_url" : "https://api.github.com/users/paplorinc/received_events",
         "repos_url" : "https://api.github.com/users/paplorinc/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/paplorinc/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/paplorinc/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/paplorinc"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29904#discussion_r1572090699"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29904"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1572090699"
         }
      },
      "author_association" : "NONE",
      "body" : "is this passing for the old implementation?\r\nIsn't this a change in behavior?",
      "commit_id" : "68bf6c82fee917756b367db4e99a8f6bcb6476bf",
      "created_at" : "2024-04-19T09:23:44Z",
      "diff_hunk" : "@@ -0,0 +1,46 @@\n+// Copyright (c) 2024 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include <test/util/setup_common.h>\n+#include <common/url.h>\n+\n+#include <string>\n+\n+#include <boost/test/unit_test.hpp>\n+\n+BOOST_AUTO_TEST_SUITE(common_url_tests)\n+\n+// These test vectors were ported from test/regress.c in the libevent library\n+// which used to be a dependency of the UrlDecode function.\n+\n+BOOST_AUTO_TEST_CASE(encode_decode_test) {\n+    BOOST_CHECK_EQUAL(UrlDecode(\"Hello\"), \"Hello\");\n+    BOOST_CHECK_EQUAL(UrlDecode(\"99\"), \"99\");\n+    BOOST_CHECK_EQUAL(UrlDecode(\"\"), \"\");\n+    BOOST_CHECK_EQUAL(UrlDecode(\"abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ123456789-.~_\"),\n+                      \"abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ123456789-.~_\");\n+    BOOST_CHECK_EQUAL(UrlDecode(\"%20\"), \" \");\n+    BOOST_CHECK_EQUAL(UrlDecode(\"%FF%F0%E0\"), \"\\xff\\xf0\\xe0\");\n+    BOOST_CHECK_EQUAL(UrlDecode(\"%01%19\"), \"\\x01\\x19\");\n+    BOOST_CHECK_EQUAL(UrlDecode(\"http%3A%2F%2Fwww.ietf.org%2Frfc%2Frfc3986.txt\"),\n+                      \"http://www.ietf.org/rfc/rfc3986.txt\");\n+    BOOST_CHECK_EQUAL(UrlDecode(\"1%2B2%3D3\"), \"1+2=3\");\n+}\n+\n+BOOST_AUTO_TEST_CASE(decode_malformed_test) {\n+    BOOST_CHECK_EQUAL(UrlDecode(\"%%xhello th+ere \\xff\"), \"%%xhello th+ere \\xff\");\n+}\n+\n+BOOST_AUTO_TEST_CASE(decode_lowercase_hex_test) {\n+    BOOST_CHECK_EQUAL(UrlDecode(\"%f0%a0%b0\"), \"\\xf0\\xa0\\xb0\");\n+}\n+\n+BOOST_AUTO_TEST_CASE(decode_internal_nuls_test) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29904#discussion_r1572090699",
      "id" : 1572090699,
      "line" : 39,
      "node_id" : "PRRC_kwDOABII585dtDNL",
      "original_commit_id" : "68bf6c82fee917756b367db4e99a8f6bcb6476bf",
      "original_line" : 39,
      "original_position" : 39,
      "original_start_line" : null,
      "path" : "src/test/common_url_tests.cpp",
      "position" : 39,
      "pull_request_review_id" : 2010889399,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29904",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1572090699/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-04-19T09:32:16Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1572090699",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1841944?v=4",
         "events_url" : "https://api.github.com/users/paplorinc/events{/privacy}",
         "followers_url" : "https://api.github.com/users/paplorinc/followers",
         "following_url" : "https://api.github.com/users/paplorinc/following{/other_user}",
         "gists_url" : "https://api.github.com/users/paplorinc/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/paplorinc",
         "id" : 1841944,
         "login" : "paplorinc",
         "node_id" : "MDQ6VXNlcjE4NDE5NDQ=",
         "organizations_url" : "https://api.github.com/users/paplorinc/orgs",
         "received_events_url" : "https://api.github.com/users/paplorinc/received_events",
         "repos_url" : "https://api.github.com/users/paplorinc/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/paplorinc/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/paplorinc/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/paplorinc"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29904#discussion_r1572096517"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29904"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1572096517"
         }
      },
      "author_association" : "NONE",
      "body" : "nit: it used to be a dependency of `urlDecode`, not `UrlDecode`, but I guess it's fine",
      "commit_id" : "68bf6c82fee917756b367db4e99a8f6bcb6476bf",
      "created_at" : "2024-04-19T09:28:33Z",
      "diff_hunk" : "@@ -0,0 +1,46 @@\n+// Copyright (c) 2024 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include <test/util/setup_common.h>\n+#include <common/url.h>\n+\n+#include <string>\n+\n+#include <boost/test/unit_test.hpp>\n+\n+BOOST_AUTO_TEST_SUITE(common_url_tests)\n+\n+// These test vectors were ported from test/regress.c in the libevent library\n+// which used to be a dependency of the UrlDecode function.",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29904#discussion_r1572096517",
      "id" : 1572096517,
      "line" : 15,
      "node_id" : "PRRC_kwDOABII585dtEoF",
      "original_commit_id" : "68bf6c82fee917756b367db4e99a8f6bcb6476bf",
      "original_line" : 15,
      "original_position" : 15,
      "original_start_line" : null,
      "path" : "src/test/common_url_tests.cpp",
      "position" : 15,
      "pull_request_review_id" : 2010889399,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29904",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1572096517/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-04-19T09:32:16Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1572096517",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1841944?v=4",
         "events_url" : "https://api.github.com/users/paplorinc/events{/privacy}",
         "followers_url" : "https://api.github.com/users/paplorinc/followers",
         "following_url" : "https://api.github.com/users/paplorinc/following{/other_user}",
         "gists_url" : "https://api.github.com/users/paplorinc/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/paplorinc",
         "id" : 1841944,
         "login" : "paplorinc",
         "node_id" : "MDQ6VXNlcjE4NDE5NDQ=",
         "organizations_url" : "https://api.github.com/users/paplorinc/orgs",
         "received_events_url" : "https://api.github.com/users/paplorinc/received_events",
         "repos_url" : "https://api.github.com/users/paplorinc/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/paplorinc/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/paplorinc/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/paplorinc"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29904#discussion_r1573345116"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29904"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1573345116"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "done",
      "commit_id" : "f98631505f28fbd5dfe86be1f83e1b04eea443d6",
      "created_at" : "2024-04-20T17:13:01Z",
      "diff_hunk" : "@@ -4,19 +4,33 @@\n \n #include <common/url.h>\n \n-#include <event2/http.h>\n-\n-#include <cstdlib>\n #include <string>\n+#include <stdexcept>\n+#include <charconv>\n \n-std::string urlDecode(const std::string &urlEncoded) {\n+std::string urlDecode(const std::string& urlEncoded) {\n     std::string res;\n-    if (!urlEncoded.empty()) {\n-        char *decoded = evhttp_uridecode(urlEncoded.c_str(), false, nullptr);\n-        if (decoded) {\n-            res = std::string(decoded);\n-            free(decoded);\n+    res.reserve(urlEncoded.size());\n+\n+    for (size_t i = 0; i < urlEncoded.size(); ++i) {\n+        char c = urlEncoded[i];\n+        // Special handling for percent which should be followed by two hex digits\n+        // representing an octet values, see RFC 3986, Section 2.1 Percent-Encoding\n+        if (c == '%' && i + 2 < urlEncoded.size()) {\n+            int decoded_value = 0;\n+            auto [ptr, ec] = std::from_chars(&urlEncoded[i + 1], &urlEncoded[i + 3], decoded_value, 16);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29904#discussion_r1573345116",
      "id" : 1573345116,
      "in_reply_to_id" : 1572032575,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585dx1dc",
      "original_commit_id" : "caa2040edc46291b3f032c64018eda2f4b31df39",
      "original_line" : 21,
      "original_position" : 27,
      "original_start_line" : null,
      "path" : "src/common/url.cpp",
      "position" : null,
      "pull_request_review_id" : 2013119910,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29904",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1573345116/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-04-20T17:13:01Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1573345116",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1322187?v=4",
         "events_url" : "https://api.github.com/users/fjahr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fjahr/followers",
         "following_url" : "https://api.github.com/users/fjahr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fjahr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fjahr",
         "id" : 1322187,
         "login" : "fjahr",
         "node_id" : "MDQ6VXNlcjEzMjIxODc=",
         "organizations_url" : "https://api.github.com/users/fjahr/orgs",
         "received_events_url" : "https://api.github.com/users/fjahr/received_events",
         "repos_url" : "https://api.github.com/users/fjahr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fjahr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fjahr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fjahr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29904#discussion_r1573345292"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29904"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1573345292"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Not sure if I understand your question, do you mean this line in particular or the whole hooking thing? This line was added the with the rest of hooking code in #18504 and I don't think anything was changed about that until now, so I don't know where we might have forgotten to remove it.",
      "commit_id" : "632eb484280d13bda7b0976c7dab3606efdb509d",
      "created_at" : "2024-04-20T17:13:46Z",
      "diff_hunk" : "@@ -51,7 +50,6 @@\n using CliClock = std::chrono::system_clock;\n \n const std::function<std::string(const char*)> G_TRANSLATION_FUN = nullptr;\n-UrlDecodeFn* const URL_DECODE = urlDecode;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29904#discussion_r1573345292",
      "id" : 1573345292,
      "in_reply_to_id" : 1572043682,
      "line" : 54,
      "node_id" : "PRRC_kwDOABII585dx1gM",
      "original_commit_id" : "68bf6c82fee917756b367db4e99a8f6bcb6476bf",
      "original_line" : 54,
      "original_position" : 12,
      "original_start_line" : null,
      "path" : "src/bitcoin-cli.cpp",
      "position" : 12,
      "pull_request_review_id" : 2013119983,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29904",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1573345292/reactions"
      },
      "side" : "LEFT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-04-20T18:03:49Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1573345292",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1322187?v=4",
         "events_url" : "https://api.github.com/users/fjahr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fjahr/followers",
         "following_url" : "https://api.github.com/users/fjahr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fjahr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fjahr",
         "id" : 1322187,
         "login" : "fjahr",
         "node_id" : "MDQ6VXNlcjEzMjIxODc=",
         "organizations_url" : "https://api.github.com/users/fjahr/orgs",
         "received_events_url" : "https://api.github.com/users/fjahr/received_events",
         "repos_url" : "https://api.github.com/users/fjahr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fjahr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fjahr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fjahr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29904#discussion_r1573345315"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29904"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1573345315"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Thanks, added.",
      "commit_id" : "f98631505f28fbd5dfe86be1f83e1b04eea443d6",
      "created_at" : "2024-04-20T17:13:56Z",
      "diff_hunk" : "@@ -4,19 +4,33 @@\n \n #include <common/url.h>\n \n-#include <event2/http.h>\n-\n-#include <cstdlib>\n #include <string>\n+#include <stdexcept>\n+#include <charconv>\n \n-std::string urlDecode(const std::string &urlEncoded) {\n+std::string UrlDecode(const std::string& url_encoded) {\n     std::string res;\n-    if (!urlEncoded.empty()) {\n-        char *decoded = evhttp_uridecode(urlEncoded.c_str(), false, nullptr);\n-        if (decoded) {\n-            res = std::string(decoded);\n-            free(decoded);\n+    res.reserve(url_encoded.size());\n+\n+    for (size_t i = 0; i < url_encoded.size(); ++i) {\n+        char c = url_encoded[i];\n+        // Special handling for percent which should be followed by two hex digits\n+        // representing an octet values, see RFC 3986, Section 2.1 Percent-Encoding\n+        if (c == '%' && i + 2 < url_encoded.size()) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29904#discussion_r1573345315",
      "id" : 1573345315,
      "in_reply_to_id" : 1572049607,
      "line" : 19,
      "node_id" : "PRRC_kwDOABII585dx1gj",
      "original_commit_id" : "68bf6c82fee917756b367db4e99a8f6bcb6476bf",
      "original_line" : 19,
      "original_position" : 25,
      "original_start_line" : null,
      "path" : "src/common/url.cpp",
      "position" : 25,
      "pull_request_review_id" : 2013120007,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29904",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1573345315/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-04-20T17:13:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1573345315",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1322187?v=4",
         "events_url" : "https://api.github.com/users/fjahr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fjahr/followers",
         "following_url" : "https://api.github.com/users/fjahr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fjahr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fjahr",
         "id" : 1322187,
         "login" : "fjahr",
         "node_id" : "MDQ6VXNlcjEzMjIxODc=",
         "organizations_url" : "https://api.github.com/users/fjahr/orgs",
         "received_events_url" : "https://api.github.com/users/fjahr/received_events",
         "repos_url" : "https://api.github.com/users/fjahr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fjahr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fjahr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fjahr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29904#discussion_r1573345552"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29904"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1573345552"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "I think this is less readable so I will keep it as is but I did take @Sjors 's suggestion to change it to change `ptr` to `_`.",
      "commit_id" : "f98631505f28fbd5dfe86be1f83e1b04eea443d6",
      "created_at" : "2024-04-20T17:15:22Z",
      "diff_hunk" : "@@ -4,19 +4,33 @@\n \n #include <common/url.h>\n \n-#include <event2/http.h>\n-\n-#include <cstdlib>\n #include <string>\n+#include <stdexcept>\n+#include <charconv>\n \n-std::string urlDecode(const std::string &urlEncoded) {\n+std::string UrlDecode(const std::string& url_encoded) {\n     std::string res;\n-    if (!urlEncoded.empty()) {\n-        char *decoded = evhttp_uridecode(urlEncoded.c_str(), false, nullptr);\n-        if (decoded) {\n-            res = std::string(decoded);\n-            free(decoded);\n+    res.reserve(url_encoded.size());\n+\n+    for (size_t i = 0; i < url_encoded.size(); ++i) {\n+        char c = url_encoded[i];\n+        // Special handling for percent which should be followed by two hex digits\n+        // representing an octet values, see RFC 3986, Section 2.1 Percent-Encoding\n+        if (c == '%' && i + 2 < url_encoded.size()) {\n+            int decoded_value = 0;\n+            auto [ptr, ec] = std::from_chars(&url_encoded[i + 1], &url_encoded[i + 3], decoded_value, 16);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29904#discussion_r1573345552",
      "id" : 1573345552,
      "in_reply_to_id" : 1572069107,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585dx1kQ",
      "original_commit_id" : "68bf6c82fee917756b367db4e99a8f6bcb6476bf",
      "original_line" : 21,
      "original_position" : 27,
      "original_start_line" : null,
      "path" : "src/common/url.cpp",
      "position" : null,
      "pull_request_review_id" : 2013120185,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29904",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1573345552/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-04-20T17:15:22Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1573345552",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1322187?v=4",
         "events_url" : "https://api.github.com/users/fjahr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fjahr/followers",
         "following_url" : "https://api.github.com/users/fjahr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fjahr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fjahr",
         "id" : 1322187,
         "login" : "fjahr",
         "node_id" : "MDQ6VXNlcjEzMjIxODc=",
         "organizations_url" : "https://api.github.com/users/fjahr/orgs",
         "received_events_url" : "https://api.github.com/users/fjahr/received_events",
         "repos_url" : "https://api.github.com/users/fjahr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fjahr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fjahr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fjahr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29904#discussion_r1573345672"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29904"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1573345672"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Like above, I think this is a bit less readable so I will keep it as is.",
      "commit_id" : "f98631505f28fbd5dfe86be1f83e1b04eea443d6",
      "created_at" : "2024-04-20T17:15:58Z",
      "diff_hunk" : "@@ -4,19 +4,33 @@\n \n #include <common/url.h>\n \n-#include <event2/http.h>\n-\n-#include <cstdlib>\n #include <string>\n+#include <stdexcept>\n+#include <charconv>\n \n-std::string urlDecode(const std::string &urlEncoded) {\n+std::string UrlDecode(const std::string& url_encoded) {\n     std::string res;\n-    if (!urlEncoded.empty()) {\n-        char *decoded = evhttp_uridecode(urlEncoded.c_str(), false, nullptr);\n-        if (decoded) {\n-            res = std::string(decoded);\n-            free(decoded);\n+    res.reserve(url_encoded.size());\n+\n+    for (size_t i = 0; i < url_encoded.size(); ++i) {\n+        char c = url_encoded[i];\n+        // Special handling for percent which should be followed by two hex digits\n+        // representing an octet values, see RFC 3986, Section 2.1 Percent-Encoding\n+        if (c == '%' && i + 2 < url_encoded.size()) {\n+            int decoded_value = 0;\n+            auto [ptr, ec] = std::from_chars(&url_encoded[i + 1], &url_encoded[i + 3], decoded_value, 16);\n+            if (ec == std::errc()) {\n+                res += static_cast<char>(decoded_value);\n+                // Next two characters are part of the percent encoding\n+                i += 2;\n+            } else {\n+                // In case of invalid percent encoding, add the '%' and continue\n+                res += c;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29904#discussion_r1573345672",
      "id" : 1573345672,
      "in_reply_to_id" : 1572070476,
      "line" : 33,
      "node_id" : "PRRC_kwDOABII585dx1mI",
      "original_commit_id" : "68bf6c82fee917756b367db4e99a8f6bcb6476bf",
      "original_line" : 33,
      "original_position" : 34,
      "original_start_line" : null,
      "path" : "src/common/url.cpp",
      "position" : 39,
      "pull_request_review_id" : 2013120358,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29904",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1573345672/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-04-20T17:15:58Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1573345672",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1322187?v=4",
         "events_url" : "https://api.github.com/users/fjahr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fjahr/followers",
         "following_url" : "https://api.github.com/users/fjahr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fjahr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fjahr",
         "id" : 1322187,
         "login" : "fjahr",
         "node_id" : "MDQ6VXNlcjEzMjIxODc=",
         "organizations_url" : "https://api.github.com/users/fjahr/orgs",
         "received_events_url" : "https://api.github.com/users/fjahr/received_events",
         "repos_url" : "https://api.github.com/users/fjahr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fjahr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fjahr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fjahr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29904#discussion_r1573345724"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29904"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1573345724"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Either way, someone might get confused, but I think it's better to keep it as is.",
      "commit_id" : "f98631505f28fbd5dfe86be1f83e1b04eea443d6",
      "created_at" : "2024-04-20T17:16:08Z",
      "diff_hunk" : "@@ -0,0 +1,46 @@\n+// Copyright (c) 2024 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include <test/util/setup_common.h>\n+#include <common/url.h>\n+\n+#include <string>\n+\n+#include <boost/test/unit_test.hpp>\n+\n+BOOST_AUTO_TEST_SUITE(common_url_tests)\n+\n+// These test vectors were ported from test/regress.c in the libevent library\n+// which used to be a dependency of the UrlDecode function.",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29904#discussion_r1573345724",
      "id" : 1573345724,
      "in_reply_to_id" : 1572096517,
      "line" : 15,
      "node_id" : "PRRC_kwDOABII585dx1m8",
      "original_commit_id" : "68bf6c82fee917756b367db4e99a8f6bcb6476bf",
      "original_line" : 15,
      "original_position" : 15,
      "original_start_line" : null,
      "path" : "src/test/common_url_tests.cpp",
      "position" : 15,
      "pull_request_review_id" : 2013120375,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29904",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1573345724/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-04-20T17:16:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1573345724",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1322187?v=4",
         "events_url" : "https://api.github.com/users/fjahr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fjahr/followers",
         "following_url" : "https://api.github.com/users/fjahr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fjahr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fjahr",
         "id" : 1322187,
         "login" : "fjahr",
         "node_id" : "MDQ6VXNlcjEzMjIxODc=",
         "organizations_url" : "https://api.github.com/users/fjahr/orgs",
         "received_events_url" : "https://api.github.com/users/fjahr/received_events",
         "repos_url" : "https://api.github.com/users/fjahr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fjahr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fjahr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fjahr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29904#discussion_r1573347809"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29904"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1573347809"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "You're right, good catch! I was focussing too much on the behavior inside of libevent and didn't take into account that the result was cast to `std::string` afterwards, which lead to the behavior that a null character terminated the string. I have changed this to keep behavior consistent with the libevent version.",
      "commit_id" : "f98631505f28fbd5dfe86be1f83e1b04eea443d6",
      "created_at" : "2024-04-20T17:24:05Z",
      "diff_hunk" : "@@ -0,0 +1,46 @@\n+// Copyright (c) 2024 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include <test/util/setup_common.h>\n+#include <common/url.h>\n+\n+#include <string>\n+\n+#include <boost/test/unit_test.hpp>\n+\n+BOOST_AUTO_TEST_SUITE(common_url_tests)\n+\n+// These test vectors were ported from test/regress.c in the libevent library\n+// which used to be a dependency of the UrlDecode function.\n+\n+BOOST_AUTO_TEST_CASE(encode_decode_test) {\n+    BOOST_CHECK_EQUAL(UrlDecode(\"Hello\"), \"Hello\");\n+    BOOST_CHECK_EQUAL(UrlDecode(\"99\"), \"99\");\n+    BOOST_CHECK_EQUAL(UrlDecode(\"\"), \"\");\n+    BOOST_CHECK_EQUAL(UrlDecode(\"abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ123456789-.~_\"),\n+                      \"abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ123456789-.~_\");\n+    BOOST_CHECK_EQUAL(UrlDecode(\"%20\"), \" \");\n+    BOOST_CHECK_EQUAL(UrlDecode(\"%FF%F0%E0\"), \"\\xff\\xf0\\xe0\");\n+    BOOST_CHECK_EQUAL(UrlDecode(\"%01%19\"), \"\\x01\\x19\");\n+    BOOST_CHECK_EQUAL(UrlDecode(\"http%3A%2F%2Fwww.ietf.org%2Frfc%2Frfc3986.txt\"),\n+                      \"http://www.ietf.org/rfc/rfc3986.txt\");\n+    BOOST_CHECK_EQUAL(UrlDecode(\"1%2B2%3D3\"), \"1+2=3\");\n+}\n+\n+BOOST_AUTO_TEST_CASE(decode_malformed_test) {\n+    BOOST_CHECK_EQUAL(UrlDecode(\"%%xhello th+ere \\xff\"), \"%%xhello th+ere \\xff\");\n+}\n+\n+BOOST_AUTO_TEST_CASE(decode_lowercase_hex_test) {\n+    BOOST_CHECK_EQUAL(UrlDecode(\"%f0%a0%b0\"), \"\\xf0\\xa0\\xb0\");\n+}\n+\n+BOOST_AUTO_TEST_CASE(decode_internal_nuls_test) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29904#discussion_r1573347809",
      "id" : 1573347809,
      "in_reply_to_id" : 1572090699,
      "line" : 58,
      "node_id" : "PRRC_kwDOABII585dx2Hh",
      "original_commit_id" : "68bf6c82fee917756b367db4e99a8f6bcb6476bf",
      "original_line" : 58,
      "original_position" : 39,
      "original_start_line" : null,
      "path" : "src/test/common_url_tests.cpp",
      "position" : 58,
      "pull_request_review_id" : 2013122865,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29904",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1573347809/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-04-20T17:24:05Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1573347809",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1322187?v=4",
         "events_url" : "https://api.github.com/users/fjahr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fjahr/followers",
         "following_url" : "https://api.github.com/users/fjahr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fjahr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fjahr",
         "id" : 1322187,
         "login" : "fjahr",
         "node_id" : "MDQ6VXNlcjEzMjIxODc=",
         "organizations_url" : "https://api.github.com/users/fjahr/orgs",
         "received_events_url" : "https://api.github.com/users/fjahr/received_events",
         "repos_url" : "https://api.github.com/users/fjahr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fjahr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fjahr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fjahr"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Addressed feedback by @paplorinc and @Sjors , thanks a lot!\r\n\r\nI also reorganized the commits a bit because they were doing more than one thing and it was hard to address feedback cleanly. The tests are now split from the implementation, which makes it easier to cherry-pick the unit test commit and run it against master. And I split off the renaming into a scripted diff.",
      "created_at" : "2024-04-20T17:28:22Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29904#issuecomment-2067736339",
      "id" : 2067736339,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/29904",
      "node_id" : "IC_kwDOABII5857PycT",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2067736339/reactions"
      },
      "updated_at" : "2024-04-20T17:28:22Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2067736339",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1322187?v=4",
         "events_url" : "https://api.github.com/users/fjahr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fjahr/followers",
         "following_url" : "https://api.github.com/users/fjahr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fjahr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fjahr",
         "id" : 1322187,
         "login" : "fjahr",
         "node_id" : "MDQ6VXNlcjEzMjIxODc=",
         "organizations_url" : "https://api.github.com/users/fjahr/orgs",
         "received_events_url" : "https://api.github.com/users/fjahr/received_events",
         "repos_url" : "https://api.github.com/users/fjahr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fjahr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fjahr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fjahr"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "CI failure can be ignored, it was introduced by #29827 and should hopefully be fixed by #29926",
      "created_at" : "2024-04-20T23:33:04Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29904#issuecomment-2067814020",
      "id" : 2067814020,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/29904",
      "node_id" : "IC_kwDOABII5857QFaE",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2067814020/reactions"
      },
      "updated_at" : "2024-04-20T23:33:04Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2067814020",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1322187?v=4",
         "events_url" : "https://api.github.com/users/fjahr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fjahr/followers",
         "following_url" : "https://api.github.com/users/fjahr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fjahr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fjahr",
         "id" : 1322187,
         "login" : "fjahr",
         "node_id" : "MDQ6VXNlcjEzMjIxODc=",
         "organizations_url" : "https://api.github.com/users/fjahr/orgs",
         "received_events_url" : "https://api.github.com/users/fjahr/received_events",
         "repos_url" : "https://api.github.com/users/fjahr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fjahr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fjahr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fjahr"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Concept NACK. Embedding copies of shared code just makes things more fragile, not safer. It's far more likely there's a bugfix that we miss picking up on, than that there's malicious code inserted later.",
      "created_at" : "2024-04-21T02:59:15Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29904#issuecomment-2067871490",
      "id" : 2067871490,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/29904",
      "node_id" : "IC_kwDOABII5857QTcC",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2067871490/reactions"
      },
      "updated_at" : "2024-04-21T02:59:15Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2067871490",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "node_id" : "MDQ6VXNlcjEwOTU2NzU=",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : ">  It's far more likely there's a bugfix that we miss picking up on, than that there's malicious code inserted later.\r\n\r\nSometimes i'd agree with that reasoning. But let's face it, `urlDecode` is not more complex than say, `leftpad`, it's unlikely to need maintainance or bug fixes, and thus seems unnecessary to carry a dependency for. \r\n\r\n(Also this isn't a direct copy of the C code! It's a C++ reimplementation that does `std::string` to `std::string`, so should handle embedded NULL bytes without truncation)",
      "created_at" : "2024-04-21T08:17:16Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29904#issuecomment-2067954555",
      "id" : 2067954555,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/29904",
      "node_id" : "IC_kwDOABII5857Qnt7",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2067954555/reactions"
      },
      "updated_at" : "2024-04-21T08:17:16Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2067954555",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> Embedding copies of shared code just makes things more fragile, not safer. It's far more likely there's a bugfix that we miss picking up on, than that there's malicious code inserted later.\r\n\r\nIn addition to what @laanwj  said, it's also a much simpler re-implementation. The libevent function provided further options that we didn't care about and hardcoded, that's how we could simplify. And as was discussed in the last IRC meeting, there is also interest in removing libevent in general, at which point this would be a necessary change anyway. We are also removing that hooking code which is a big improvement in itself. If you subtract the test code, we are almost removing as much code as we are adding.\r\n\r\n> It's a C++ reimplementation that does std::string to std::string, so should handle embedded NULL bytes without truncation\r\n\r\nSo, to be clear, your opinion is for this part I should [remove the patch](https://github.com/bitcoin/bitcoin/pull/29904#discussion_r1573347809) and introduce a change of behavior, right?",
      "created_at" : "2024-04-21T14:59:01Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29904#issuecomment-2068074835",
      "id" : 2068074835,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/29904",
      "node_id" : "IC_kwDOABII5857RFFT",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2068074835/reactions"
      },
      "updated_at" : "2024-04-21T14:59:01Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2068074835",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1322187?v=4",
         "events_url" : "https://api.github.com/users/fjahr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fjahr/followers",
         "following_url" : "https://api.github.com/users/fjahr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fjahr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fjahr",
         "id" : 1322187,
         "login" : "fjahr",
         "node_id" : "MDQ6VXNlcjEzMjIxODc=",
         "organizations_url" : "https://api.github.com/users/fjahr/orgs",
         "received_events_url" : "https://api.github.com/users/fjahr/received_events",
         "repos_url" : "https://api.github.com/users/fjahr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fjahr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fjahr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fjahr"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> So, to be clear, your opinion is for this part I should https://github.com/bitcoin/bitcoin/pull/29904#discussion_r1573347809 and introduce a change of behavior, right?\r\n\r\nYes. There's no use in emulating broken C string behavior.\r\nEdit: maybe for one commit when you want to prove both implementations are the same. But it can be removed quickly after that, imo.",
      "created_at" : "2024-04-21T18:16:50Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29904#issuecomment-2068154367",
      "id" : 2068154367,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/29904",
      "node_id" : "IC_kwDOABII5857RYf_",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2068154367/reactions"
      },
      "updated_at" : "2024-04-21T18:22:38Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2068154367",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29904#discussion_r1573899433"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29904"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1573899433"
         }
      },
      "author_association" : "NONE",
      "body" : "Thanks for adding me as a co-author, if you force push again, please change the email to `LÅrinc <pap.lorinc@gmail.com>`",
      "commit_id" : "632eb484280d13bda7b0976c7dab3606efdb509d",
      "created_at" : "2024-04-21T19:54:31Z",
      "diff_hunk" : "@@ -0,0 +1,46 @@\n+// Copyright (c) 2024 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include <test/util/setup_common.h>\n+#include <common/url.h>\n+\n+#include <string>\n+\n+#include <boost/test/unit_test.hpp>\n+\n+BOOST_AUTO_TEST_SUITE(common_url_tests)\n+\n+// These test vectors were ported from test/regress.c in the libevent library\n+// which used to be a dependency of the UrlDecode function.\n+\n+BOOST_AUTO_TEST_CASE(encode_decode_test) {\n+    BOOST_CHECK_EQUAL(UrlDecode(\"Hello\"), \"Hello\");\n+    BOOST_CHECK_EQUAL(UrlDecode(\"99\"), \"99\");\n+    BOOST_CHECK_EQUAL(UrlDecode(\"\"), \"\");\n+    BOOST_CHECK_EQUAL(UrlDecode(\"abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ123456789-.~_\"),\n+                      \"abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ123456789-.~_\");\n+    BOOST_CHECK_EQUAL(UrlDecode(\"%20\"), \" \");\n+    BOOST_CHECK_EQUAL(UrlDecode(\"%FF%F0%E0\"), \"\\xff\\xf0\\xe0\");\n+    BOOST_CHECK_EQUAL(UrlDecode(\"%01%19\"), \"\\x01\\x19\");\n+    BOOST_CHECK_EQUAL(UrlDecode(\"http%3A%2F%2Fwww.ietf.org%2Frfc%2Frfc3986.txt\"),\n+                      \"http://www.ietf.org/rfc/rfc3986.txt\");\n+    BOOST_CHECK_EQUAL(UrlDecode(\"1%2B2%3D3\"), \"1+2=3\");\n+}\n+\n+BOOST_AUTO_TEST_CASE(decode_malformed_test) {\n+    BOOST_CHECK_EQUAL(UrlDecode(\"%%xhello th+ere \\xff\"), \"%%xhello th+ere \\xff\");\n+}\n+\n+BOOST_AUTO_TEST_CASE(decode_lowercase_hex_test) {\n+    BOOST_CHECK_EQUAL(UrlDecode(\"%f0%a0%b0\"), \"\\xf0\\xa0\\xb0\");\n+}\n+\n+BOOST_AUTO_TEST_CASE(decode_internal_nuls_test) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29904#discussion_r1573899433",
      "id" : 1573899433,
      "in_reply_to_id" : 1572090699,
      "line" : 58,
      "node_id" : "PRRC_kwDOABII585dz8yp",
      "original_commit_id" : "68bf6c82fee917756b367db4e99a8f6bcb6476bf",
      "original_line" : 58,
      "original_position" : 39,
      "original_start_line" : null,
      "path" : "src/test/common_url_tests.cpp",
      "position" : 58,
      "pull_request_review_id" : 2013507911,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29904",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1573899433/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-04-21T19:54:31Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1573899433",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1841944?v=4",
         "events_url" : "https://api.github.com/users/paplorinc/events{/privacy}",
         "followers_url" : "https://api.github.com/users/paplorinc/followers",
         "following_url" : "https://api.github.com/users/paplorinc/following{/other_user}",
         "gists_url" : "https://api.github.com/users/paplorinc/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/paplorinc",
         "id" : 1841944,
         "login" : "paplorinc",
         "node_id" : "MDQ6VXNlcjE4NDE5NDQ=",
         "organizations_url" : "https://api.github.com/users/paplorinc/orgs",
         "received_events_url" : "https://api.github.com/users/paplorinc/received_events",
         "repos_url" : "https://api.github.com/users/paplorinc/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/paplorinc/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/paplorinc/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/paplorinc"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "I have added the behavior change in a separate commit.",
      "created_at" : "2024-04-21T19:55:28Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29904#issuecomment-2068180640",
      "id" : 2068180640,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/29904",
      "node_id" : "IC_kwDOABII5857Re6g",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2068180640/reactions"
      },
      "updated_at" : "2024-04-21T19:55:28Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2068180640",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1322187?v=4",
         "events_url" : "https://api.github.com/users/fjahr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fjahr/followers",
         "following_url" : "https://api.github.com/users/fjahr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fjahr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fjahr",
         "id" : 1322187,
         "login" : "fjahr",
         "node_id" : "MDQ6VXNlcjEzMjIxODc=",
         "organizations_url" : "https://api.github.com/users/fjahr/orgs",
         "received_events_url" : "https://api.github.com/users/fjahr/received_events",
         "repos_url" : "https://api.github.com/users/fjahr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fjahr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fjahr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fjahr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29904#discussion_r1573899901"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29904"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1573899901"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "The behavior change is now re-introduced but explicitly documented as such in a separate commit.",
      "commit_id" : "632eb484280d13bda7b0976c7dab3606efdb509d",
      "created_at" : "2024-04-21T19:56:07Z",
      "diff_hunk" : "@@ -0,0 +1,46 @@\n+// Copyright (c) 2024 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include <test/util/setup_common.h>\n+#include <common/url.h>\n+\n+#include <string>\n+\n+#include <boost/test/unit_test.hpp>\n+\n+BOOST_AUTO_TEST_SUITE(common_url_tests)\n+\n+// These test vectors were ported from test/regress.c in the libevent library\n+// which used to be a dependency of the UrlDecode function.\n+\n+BOOST_AUTO_TEST_CASE(encode_decode_test) {\n+    BOOST_CHECK_EQUAL(UrlDecode(\"Hello\"), \"Hello\");\n+    BOOST_CHECK_EQUAL(UrlDecode(\"99\"), \"99\");\n+    BOOST_CHECK_EQUAL(UrlDecode(\"\"), \"\");\n+    BOOST_CHECK_EQUAL(UrlDecode(\"abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ123456789-.~_\"),\n+                      \"abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ123456789-.~_\");\n+    BOOST_CHECK_EQUAL(UrlDecode(\"%20\"), \" \");\n+    BOOST_CHECK_EQUAL(UrlDecode(\"%FF%F0%E0\"), \"\\xff\\xf0\\xe0\");\n+    BOOST_CHECK_EQUAL(UrlDecode(\"%01%19\"), \"\\x01\\x19\");\n+    BOOST_CHECK_EQUAL(UrlDecode(\"http%3A%2F%2Fwww.ietf.org%2Frfc%2Frfc3986.txt\"),\n+                      \"http://www.ietf.org/rfc/rfc3986.txt\");\n+    BOOST_CHECK_EQUAL(UrlDecode(\"1%2B2%3D3\"), \"1+2=3\");\n+}\n+\n+BOOST_AUTO_TEST_CASE(decode_malformed_test) {\n+    BOOST_CHECK_EQUAL(UrlDecode(\"%%xhello th+ere \\xff\"), \"%%xhello th+ere \\xff\");\n+}\n+\n+BOOST_AUTO_TEST_CASE(decode_lowercase_hex_test) {\n+    BOOST_CHECK_EQUAL(UrlDecode(\"%f0%a0%b0\"), \"\\xf0\\xa0\\xb0\");\n+}\n+\n+BOOST_AUTO_TEST_CASE(decode_internal_nuls_test) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29904#discussion_r1573899901",
      "id" : 1573899901,
      "in_reply_to_id" : 1572090699,
      "line" : 58,
      "node_id" : "PRRC_kwDOABII585dz859",
      "original_commit_id" : "68bf6c82fee917756b367db4e99a8f6bcb6476bf",
      "original_line" : 58,
      "original_position" : 39,
      "original_start_line" : null,
      "path" : "src/test/common_url_tests.cpp",
      "position" : 58,
      "pull_request_review_id" : 2013508122,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29904",
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1573899901/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-04-21T19:56:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1573899901",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1322187?v=4",
         "events_url" : "https://api.github.com/users/fjahr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fjahr/followers",
         "following_url" : "https://api.github.com/users/fjahr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fjahr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fjahr",
         "id" : 1322187,
         "login" : "fjahr",
         "node_id" : "MDQ6VXNlcjEzMjIxODc=",
         "organizations_url" : "https://api.github.com/users/fjahr/orgs",
         "received_events_url" : "https://api.github.com/users/fjahr/received_events",
         "repos_url" : "https://api.github.com/users/fjahr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fjahr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fjahr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fjahr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29904#discussion_r1573900516"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29904"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1573900516"
         }
      },
      "author_association" : "NONE",
      "body" : "would it make sense to mention the `&` as well?",
      "commit_id" : "632eb484280d13bda7b0976c7dab3606efdb509d",
      "created_at" : "2024-04-21T19:58:30Z",
      "diff_hunk" : "@@ -7,8 +7,10 @@\n \n #include <string>\n \n-using UrlDecodeFn = std::string(const std::string& url_encoded);\n-UrlDecodeFn urlDecode;\n-extern UrlDecodeFn* const URL_DECODE;\n+/* Decode a URL.\n+ *\n+ * Notably this implementation does not decode a '+' to a ' '.",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29904#discussion_r1573900516",
      "id" : 1573900516,
      "line" : 12,
      "node_id" : "PRRC_kwDOABII585dz9Dk",
      "original_commit_id" : "21ad0064439e5ecca93e42379e71391bb735e450",
      "original_line" : 12,
      "original_position" : 9,
      "original_start_line" : null,
      "path" : "src/common/url.h",
      "position" : 9,
      "pull_request_review_id" : 2013508448,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29904",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1573900516/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-04-21T19:58:30Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1573900516",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1841944?v=4",
         "events_url" : "https://api.github.com/users/paplorinc/events{/privacy}",
         "followers_url" : "https://api.github.com/users/paplorinc/followers",
         "following_url" : "https://api.github.com/users/paplorinc/following{/other_user}",
         "gists_url" : "https://api.github.com/users/paplorinc/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/paplorinc",
         "id" : 1841944,
         "login" : "paplorinc",
         "node_id" : "MDQ6VXNlcjE4NDE5NDQ=",
         "organizations_url" : "https://api.github.com/users/paplorinc/orgs",
         "received_events_url" : "https://api.github.com/users/paplorinc/received_events",
         "repos_url" : "https://api.github.com/users/paplorinc/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/paplorinc/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/paplorinc/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/paplorinc"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29904#discussion_r1573902309"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29904"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1573902309"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Are these commonly decoded as a space as well? I couldn't find evidence for this but I didn't spend much time on it.",
      "commit_id" : "175d57ba953cdc1da3a54ae0208dad813f7ea4cf",
      "created_at" : "2024-04-21T20:06:44Z",
      "diff_hunk" : "@@ -7,8 +7,10 @@\n \n #include <string>\n \n-using UrlDecodeFn = std::string(const std::string& url_encoded);\n-UrlDecodeFn urlDecode;\n-extern UrlDecodeFn* const URL_DECODE;\n+/* Decode a URL.\n+ *\n+ * Notably this implementation does not decode a '+' to a ' '.",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29904#discussion_r1573902309",
      "id" : 1573902309,
      "in_reply_to_id" : 1573900516,
      "line" : 12,
      "node_id" : "PRRC_kwDOABII585dz9fl",
      "original_commit_id" : "21ad0064439e5ecca93e42379e71391bb735e450",
      "original_line" : 12,
      "original_position" : 9,
      "original_start_line" : null,
      "path" : "src/common/url.h",
      "position" : 9,
      "pull_request_review_id" : 2013509536,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29904",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1573902309/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-04-21T20:06:44Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1573902309",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1322187?v=4",
         "events_url" : "https://api.github.com/users/fjahr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fjahr/followers",
         "following_url" : "https://api.github.com/users/fjahr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fjahr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fjahr",
         "id" : 1322187,
         "login" : "fjahr",
         "node_id" : "MDQ6VXNlcjEzMjIxODc=",
         "organizations_url" : "https://api.github.com/users/fjahr/orgs",
         "received_events_url" : "https://api.github.com/users/fjahr/received_events",
         "repos_url" : "https://api.github.com/users/fjahr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fjahr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fjahr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fjahr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29904#discussion_r1573902893"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29904"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1573902893"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "> Thanks for adding me as a co-author, if you force push again, please change the email to `LÅrinc <pap.lorinc@gmail.com>`\r\n\r\nfixed the email",
      "commit_id" : "175d57ba953cdc1da3a54ae0208dad813f7ea4cf",
      "created_at" : "2024-04-21T20:09:06Z",
      "diff_hunk" : "@@ -0,0 +1,46 @@\n+// Copyright (c) 2024 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include <test/util/setup_common.h>\n+#include <common/url.h>\n+\n+#include <string>\n+\n+#include <boost/test/unit_test.hpp>\n+\n+BOOST_AUTO_TEST_SUITE(common_url_tests)\n+\n+// These test vectors were ported from test/regress.c in the libevent library\n+// which used to be a dependency of the UrlDecode function.\n+\n+BOOST_AUTO_TEST_CASE(encode_decode_test) {\n+    BOOST_CHECK_EQUAL(UrlDecode(\"Hello\"), \"Hello\");\n+    BOOST_CHECK_EQUAL(UrlDecode(\"99\"), \"99\");\n+    BOOST_CHECK_EQUAL(UrlDecode(\"\"), \"\");\n+    BOOST_CHECK_EQUAL(UrlDecode(\"abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ123456789-.~_\"),\n+                      \"abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ123456789-.~_\");\n+    BOOST_CHECK_EQUAL(UrlDecode(\"%20\"), \" \");\n+    BOOST_CHECK_EQUAL(UrlDecode(\"%FF%F0%E0\"), \"\\xff\\xf0\\xe0\");\n+    BOOST_CHECK_EQUAL(UrlDecode(\"%01%19\"), \"\\x01\\x19\");\n+    BOOST_CHECK_EQUAL(UrlDecode(\"http%3A%2F%2Fwww.ietf.org%2Frfc%2Frfc3986.txt\"),\n+                      \"http://www.ietf.org/rfc/rfc3986.txt\");\n+    BOOST_CHECK_EQUAL(UrlDecode(\"1%2B2%3D3\"), \"1+2=3\");\n+}\n+\n+BOOST_AUTO_TEST_CASE(decode_malformed_test) {\n+    BOOST_CHECK_EQUAL(UrlDecode(\"%%xhello th+ere \\xff\"), \"%%xhello th+ere \\xff\");\n+}\n+\n+BOOST_AUTO_TEST_CASE(decode_lowercase_hex_test) {\n+    BOOST_CHECK_EQUAL(UrlDecode(\"%f0%a0%b0\"), \"\\xf0\\xa0\\xb0\");\n+}\n+\n+BOOST_AUTO_TEST_CASE(decode_internal_nuls_test) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29904#discussion_r1573902893",
      "id" : 1573902893,
      "in_reply_to_id" : 1572090699,
      "line" : 58,
      "node_id" : "PRRC_kwDOABII585dz9ot",
      "original_commit_id" : "68bf6c82fee917756b367db4e99a8f6bcb6476bf",
      "original_line" : 58,
      "original_position" : 39,
      "original_start_line" : null,
      "path" : "src/test/common_url_tests.cpp",
      "position" : 58,
      "pull_request_review_id" : 2013510121,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29904",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1573902893/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-04-21T20:14:59Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1573902893",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1322187?v=4",
         "events_url" : "https://api.github.com/users/fjahr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fjahr/followers",
         "following_url" : "https://api.github.com/users/fjahr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fjahr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fjahr",
         "id" : 1322187,
         "login" : "fjahr",
         "node_id" : "MDQ6VXNlcjEzMjIxODc=",
         "organizations_url" : "https://api.github.com/users/fjahr/orgs",
         "received_events_url" : "https://api.github.com/users/fjahr/received_events",
         "repos_url" : "https://api.github.com/users/fjahr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fjahr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fjahr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fjahr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29904#discussion_r1573902969"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29904"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1573902969"
         }
      },
      "author_association" : "NONE",
      "body" : "Not exactly: https://github.com/libevent/libevent/blob/release-2.1.12-stable/http.c#L3186-L3188",
      "commit_id" : "175d57ba953cdc1da3a54ae0208dad813f7ea4cf",
      "created_at" : "2024-04-21T20:09:33Z",
      "diff_hunk" : "@@ -7,8 +7,10 @@\n \n #include <string>\n \n-using UrlDecodeFn = std::string(const std::string& url_encoded);\n-UrlDecodeFn urlDecode;\n-extern UrlDecodeFn* const URL_DECODE;\n+/* Decode a URL.\n+ *\n+ * Notably this implementation does not decode a '+' to a ' '.",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29904#discussion_r1573902969",
      "id" : 1573902969,
      "in_reply_to_id" : 1573900516,
      "line" : 12,
      "node_id" : "PRRC_kwDOABII585dz9p5",
      "original_commit_id" : "21ad0064439e5ecca93e42379e71391bb735e450",
      "original_line" : 12,
      "original_position" : 9,
      "original_start_line" : null,
      "path" : "src/common/url.h",
      "position" : 9,
      "pull_request_review_id" : 2013510175,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29904",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1573902969/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-04-21T20:09:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1573902969",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1841944?v=4",
         "events_url" : "https://api.github.com/users/paplorinc/events{/privacy}",
         "followers_url" : "https://api.github.com/users/paplorinc/followers",
         "following_url" : "https://api.github.com/users/paplorinc/following{/other_user}",
         "gists_url" : "https://api.github.com/users/paplorinc/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/paplorinc",
         "id" : 1841944,
         "login" : "paplorinc",
         "node_id" : "MDQ6VXNlcjE4NDE5NDQ=",
         "organizations_url" : "https://api.github.com/users/paplorinc/orgs",
         "received_events_url" : "https://api.github.com/users/paplorinc/received_events",
         "repos_url" : "https://api.github.com/users/paplorinc/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/paplorinc/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/paplorinc/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/paplorinc"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29904#discussion_r1573904156"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29904"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1573904156"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Hm, the code you are linking to is part of how libevent handles the `+`. Or did you want to refer to `?`? I think if it's not very common for `&` to be decoded as space then we don't need to mention it.",
      "commit_id" : "175d57ba953cdc1da3a54ae0208dad813f7ea4cf",
      "created_at" : "2024-04-21T20:14:07Z",
      "diff_hunk" : "@@ -7,8 +7,10 @@\n \n #include <string>\n \n-using UrlDecodeFn = std::string(const std::string& url_encoded);\n-UrlDecodeFn urlDecode;\n-extern UrlDecodeFn* const URL_DECODE;\n+/* Decode a URL.\n+ *\n+ * Notably this implementation does not decode a '+' to a ' '.",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29904#discussion_r1573904156",
      "id" : 1573904156,
      "in_reply_to_id" : 1573900516,
      "line" : 12,
      "node_id" : "PRRC_kwDOABII585dz98c",
      "original_commit_id" : "21ad0064439e5ecca93e42379e71391bb735e450",
      "original_line" : 12,
      "original_position" : 9,
      "original_start_line" : null,
      "path" : "src/common/url.h",
      "position" : 9,
      "pull_request_review_id" : 2013510816,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29904",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1573904156/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-04-21T20:14:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1573904156",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1322187?v=4",
         "events_url" : "https://api.github.com/users/fjahr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fjahr/followers",
         "following_url" : "https://api.github.com/users/fjahr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fjahr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fjahr",
         "id" : 1322187,
         "login" : "fjahr",
         "node_id" : "MDQ6VXNlcjEzMjIxODc=",
         "organizations_url" : "https://api.github.com/users/fjahr/orgs",
         "received_events_url" : "https://api.github.com/users/fjahr/received_events",
         "repos_url" : "https://api.github.com/users/fjahr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fjahr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fjahr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fjahr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29904#discussion_r1573905184"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29904"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1573905184"
         }
      },
      "author_association" : "NONE",
      "body" : "? seems to be a control char, `If -1, when true we transform plus to space only after we've seen a ?.  -1 is deprecated.`, no need to mention it, thanks for checking.",
      "commit_id" : "175d57ba953cdc1da3a54ae0208dad813f7ea4cf",
      "created_at" : "2024-04-21T20:18:58Z",
      "diff_hunk" : "@@ -7,8 +7,10 @@\n \n #include <string>\n \n-using UrlDecodeFn = std::string(const std::string& url_encoded);\n-UrlDecodeFn urlDecode;\n-extern UrlDecodeFn* const URL_DECODE;\n+/* Decode a URL.\n+ *\n+ * Notably this implementation does not decode a '+' to a ' '.",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29904#discussion_r1573905184",
      "id" : 1573905184,
      "in_reply_to_id" : 1573900516,
      "line" : 12,
      "node_id" : "PRRC_kwDOABII585dz-Mg",
      "original_commit_id" : "21ad0064439e5ecca93e42379e71391bb735e450",
      "original_line" : 12,
      "original_position" : 9,
      "original_start_line" : null,
      "path" : "src/common/url.h",
      "position" : 9,
      "pull_request_review_id" : 2013511440,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29904",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1573905184/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-04-21T20:18:58Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1573905184",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1841944?v=4",
         "events_url" : "https://api.github.com/users/paplorinc/events{/privacy}",
         "followers_url" : "https://api.github.com/users/paplorinc/followers",
         "following_url" : "https://api.github.com/users/paplorinc/following{/other_user}",
         "gists_url" : "https://api.github.com/users/paplorinc/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/paplorinc",
         "id" : 1841944,
         "login" : "paplorinc",
         "node_id" : "MDQ6VXNlcjE4NDE5NDQ=",
         "organizations_url" : "https://api.github.com/users/paplorinc/orgs",
         "received_events_url" : "https://api.github.com/users/paplorinc/received_events",
         "repos_url" : "https://api.github.com/users/paplorinc/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/paplorinc/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/paplorinc/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/paplorinc"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29904#discussion_r1574339319"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29904"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1574339319"
         }
      },
      "author_association" : "MEMBER",
      "body" : "For better or worse, this silent accepting behavior for invalid hex values in URL decoding is really common. See for example Python:\r\n\r\n```python3\r\n>>> import urllib.parse\r\n>>> urllib.parse.unquote('%12%%xx%0a')\r\n'\\x12%%xx\\n'\r\n```\r\nIt's the web philopsophy of \"in case of doubt, just do something!\" ð . Anyhow, in this refactor it doesn't make sense imo to add error handling here.",
      "commit_id" : "175d57ba953cdc1da3a54ae0208dad813f7ea4cf",
      "created_at" : "2024-04-22T08:25:36Z",
      "diff_hunk" : "@@ -4,19 +4,33 @@\n \n #include <common/url.h>\n \n-#include <event2/http.h>\n-\n-#include <cstdlib>\n #include <string>\n+#include <stdexcept>\n+#include <charconv>\n \n-std::string urlDecode(const std::string &urlEncoded) {\n+std::string urlDecode(const std::string& urlEncoded) {\n     std::string res;\n-    if (!urlEncoded.empty()) {\n-        char *decoded = evhttp_uridecode(urlEncoded.c_str(), false, nullptr);\n-        if (decoded) {\n-            res = std::string(decoded);\n-            free(decoded);\n+    res.reserve(urlEncoded.size());\n+\n+    for (size_t i = 0; i < urlEncoded.size(); ++i) {\n+        char c = urlEncoded[i];\n+        // Special handling for percent which should be followed by two hex digits\n+        // representing an octet values, see RFC 3986, Section 2.1 Percent-Encoding\n+        if (c == '%' && i + 2 < urlEncoded.size()) {\n+            int decoded_value = 0;\n+            auto [ptr, ec] = std::from_chars(&urlEncoded[i + 1], &urlEncoded[i + 3], decoded_value, 16);\n+            if (ec == std::errc()) {\n+                res += static_cast<char>(decoded_value);\n+                // Next two characters are part of the percent encoding\n+                i += 2;\n+            } else {\n+                // In case of invalid percent encoding, add the '%' and continue",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29904#discussion_r1574339319",
      "id" : 1574339319,
      "in_reply_to_id" : 1571063727,
      "line" : 27,
      "node_id" : "PRRC_kwDOABII585d1oL3",
      "original_commit_id" : "2447bc7774edcc3f0ac92a41d4a7a30dde663da0",
      "original_line" : 27,
      "original_position" : 33,
      "original_start_line" : null,
      "path" : "src/common/url.cpp",
      "position" : 33,
      "pull_request_review_id" : 2014106251,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29904",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1574339319/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-04-22T08:25:37Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1574339319",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "No, it isn't. Nor is piling on the `EVENT_CFLAGS`. Good catch @hebasto.",
      "created_at" : "2024-04-22T08:42:28Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29904#issuecomment-2068827925",
      "id" : 2068827925,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/29904",
      "node_id" : "IC_kwDOABII5857T88V",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2068827925/reactions"
      },
      "updated_at" : "2024-04-22T08:42:28Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2068827925",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   }
]
