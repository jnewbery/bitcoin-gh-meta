{
   "active_lock_reason" : null,
   "assignee" : null,
   "assignees" : [],
   "author_association" : "CONTRIBUTOR",
   "body" : "When creating and replacing a transaction using `bumpfee`, an async update is sent in the form of the `TransactionAddedToMempool` and `TransactionRemovedFromMempool` signals. When `wallet_backwards_compatibility.py` creates `tx3_id` this way and replaces it with `tx4_id`, the `abandontransaction` rpc is called right after. In some cases the `TransactionAddedToMempool` and `TransactionRemovedFromMempool` is handled after the transaction is abandoned in the wallet, and overwrites the transaction's `abandoned` flag. This PR forces the signals to get handled before `abandontransaction` is called by invoking `self.sync_mempools` which calls `syncwithvalidationinterfacequeue` on every node's rpc connection.\r\n\r\nThis will mitigate the immediate inconsistency observed with the abandontransaction call, but the potential race conditions between the signals and wallet operations may also be useful to note in a separate issue (if it's okay to not address it in this one).\r\n\r\nFixes #29806 ",
   "closed_at" : null,
   "closed_by" : null,
   "comments" : 1,
   "comments_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/29982/comments",
   "created_at" : "2024-04-28T04:24:19Z",
   "draft" : false,
   "events_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/29982/events",
   "html_url" : "https://github.com/bitcoin/bitcoin/pull/29982",
   "id" : 2267332396,
   "labels" : [
      {
         "color" : "d4c5f9",
         "default" : false,
         "description" : null,
         "id" : 62963516,
         "name" : "Tests",
         "node_id" : "MDU6TGFiZWw2Mjk2MzUxNg==",
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/labels/Tests"
      }
   ],
   "labels_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/29982/labels{/name}",
   "locked" : false,
   "milestone" : null,
   "node_id" : "PR_kwDOABII585t7GiO",
   "number" : 29982,
   "performed_via_github_app" : null,
   "pull_request" : {
      "diff_url" : "https://github.com/bitcoin/bitcoin/pull/29982.diff",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29982",
      "merged_at" : null,
      "patch_url" : "https://github.com/bitcoin/bitcoin/pull/29982.patch",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29982"
   },
   "reactions" : {
      "+1" : 0,
      "-1" : 0,
      "confused" : 0,
      "eyes" : 0,
      "heart" : 0,
      "hooray" : 0,
      "laugh" : 0,
      "rocket" : 0,
      "total_count" : 0,
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/29982/reactions"
   },
   "repository_url" : "https://api.github.com/repos/bitcoin/bitcoin",
   "state" : "open",
   "state_reason" : null,
   "timeline_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/29982/timeline",
   "title" : "test: Fix intermittent issue in wallet_backwards_compatibility.py",
   "updated_at" : "2024-04-28T04:24:24Z",
   "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/29982",
   "user" : {
      "avatar_url" : "https://avatars.githubusercontent.com/u/4742100?v=4",
      "events_url" : "https://api.github.com/users/Randy808/events{/privacy}",
      "followers_url" : "https://api.github.com/users/Randy808/followers",
      "following_url" : "https://api.github.com/users/Randy808/following{/other_user}",
      "gists_url" : "https://api.github.com/users/Randy808/gists{/gist_id}",
      "gravatar_id" : "",
      "html_url" : "https://github.com/Randy808",
      "id" : 4742100,
      "login" : "Randy808",
      "node_id" : "MDQ6VXNlcjQ3NDIxMDA=",
      "organizations_url" : "https://api.github.com/users/Randy808/orgs",
      "received_events_url" : "https://api.github.com/users/Randy808/received_events",
      "repos_url" : "https://api.github.com/users/Randy808/repos",
      "site_admin" : false,
      "starred_url" : "https://api.github.com/users/Randy808/starred{/owner}{/repo}",
      "subscriptions_url" : "https://api.github.com/users/Randy808/subscriptions",
      "type" : "User",
      "url" : "https://api.github.com/users/Randy808"
   }
}
