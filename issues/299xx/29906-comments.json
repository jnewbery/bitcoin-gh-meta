[
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage\nFor detailed information about the code coverage, see the [test coverage report](https://corecheck.dev/bitcoin/bitcoin/pulls/29906).\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| ACK | [stickies-v](https://github.com/bitcoin/bitcoin/pull/29906#issuecomment-2085563710), [furszy](https://github.com/bitcoin/bitcoin/pull/29906#pullrequestreview-2031664498), [achow101](https://github.com/bitcoin/bitcoin/pull/29906#issuecomment-2085790704) |\n| Stale ACK | [TheCharlatan](https://github.com/bitcoin/bitcoin/pull/29906#pullrequestreview-2031473523) |\n\nIf your review is incorrectly listed, please react with ð to this comment and the bot will ignore it on the next update.\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#29936](https://github.com/bitcoin/bitcoin/pull/29936) (fuzz: wallet: add target for `CreateTransaction` by brunoerg)\n* [#29700](https://github.com/bitcoin/bitcoin/pull/29700) (kernel, refactor: return error status on all fatal errors by ryanofsky)\n* [#29442](https://github.com/bitcoin/bitcoin/pull/29442) (wallet: Target a pre-defined utxo set composition by adjusting change outputs by remyers)\n* [#28984](https://github.com/bitcoin/bitcoin/pull/28984) (Cluster size 2 package rbf by instagibbs)\n* [#28676](https://github.com/bitcoin/bitcoin/pull/28676) ([WIP] Cluster mempool implementation by sdaftuar)\n* [#26022](https://github.com/bitcoin/bitcoin/pull/26022) (Add util::ResultPtr class by ryanofsky)\n* [#25722](https://github.com/bitcoin/bitcoin/pull/25722) (refactor: Use util::Result class for wallet loading by ryanofsky)\n* [#25665](https://github.com/bitcoin/bitcoin/pull/25665) (refactor: Add util::Result failure values, multiple error and warning messages by ryanofsky)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.\n",
      "created_at" : "2024-04-18T19:09:58Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29906#issuecomment-2064995268",
      "id" : 2064995268,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/29906",
      "node_id" : "IC_kwDOABII5857FVPE",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2064995268/reactions"
      },
      "updated_at" : "2024-04-30T16:04:58Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2064995268",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29906#discussion_r1572632242"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29906"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1572632242"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "nit: Any reason not to just wrap the args in `std::move`? Seems like the more intuitive approach, and probably slightly more performant?\r\n\r\n```suggestion\r\n    std::vector<util::Result<SelectionResult>> results {\r\n        std::move(result_srd), std::move(result_knapsack), std::move(result_bnb)\r\n    };\r\n```",
      "commit_id" : "974b16b2580f4f09c8936fbead96fdbee637cb14",
      "created_at" : "2024-04-19T16:27:18Z",
      "diff_hunk" : "@@ -291,7 +291,10 @@ FUZZ_TARGET(coinselection)\n     }\n \n     std::vector<COutput> utxos;\n-    std::vector<util::Result<SelectionResult>> results{result_srd, result_knapsack, result_bnb};\n+    std::vector<util::Result<SelectionResult>> results;\n+    results.emplace_back(std::move(result_srd));\n+    results.emplace_back(std::move(result_knapsack));\n+    results.emplace_back(std::move(result_bnb));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29906#discussion_r1572632242",
      "id" : 1572632242,
      "line" : 297,
      "node_id" : "PRRC_kwDOABII585dvHay",
      "original_commit_id" : "974b16b2580f4f09c8936fbead96fdbee637cb14",
      "original_line" : 297,
      "original_position" : 8,
      "original_start_line" : 294,
      "path" : "src/wallet/test/fuzz/coinselection.cpp",
      "position" : 8,
      "pull_request_review_id" : 2011883406,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29906",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1572632242/reactions"
      },
      "side" : "RIGHT",
      "start_line" : 294,
      "start_side" : "RIGHT",
      "subject_type" : "line",
      "updated_at" : "2024-04-19T17:03:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1572632242",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/69010457?v=4",
         "events_url" : "https://api.github.com/users/stickies-v/events{/privacy}",
         "followers_url" : "https://api.github.com/users/stickies-v/followers",
         "following_url" : "https://api.github.com/users/stickies-v/following{/other_user}",
         "gists_url" : "https://api.github.com/users/stickies-v/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/stickies-v",
         "id" : 69010457,
         "login" : "stickies-v",
         "node_id" : "MDQ6VXNlcjY5MDEwNDU3",
         "organizations_url" : "https://api.github.com/users/stickies-v/orgs",
         "received_events_url" : "https://api.github.com/users/stickies-v/received_events",
         "repos_url" : "https://api.github.com/users/stickies-v/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/stickies-v/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/stickies-v/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/stickies-v"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29906#discussion_r1572639146"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29906"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1572639146"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "nit: nice, but maybe best to clean up all 3 instances in one go?\r\n\r\n<details>\r\n<summary>git diff on 974b16b258</summary>\r\n\r\n```diff\r\ndiff --git a/src/wallet/spend.cpp b/src/wallet/spend.cpp\r\nindex 8b62cddb02..9a7e166e68 100644\r\n--- a/src/wallet/spend.cpp\r\n+++ b/src/wallet/spend.cpp\r\n@@ -868,7 +868,7 @@ util::Result<SelectionResult> AutomaticCoinSelection(const CWallet& wallet, Coin\r\n             if (total_amount + total_unconf_long_chain > value_to_select) {\r\n                 return util::Error{_(\"Unconfirmed UTXOs are available, but spending them creates a chain of transactions that will be rejected by the mempool\")};\r\n             }\r\n-            return util::Result<SelectionResult>(util::Error()); // General \"Insufficient Funds\"\r\n+            return util::Error{}; // General \"Insufficient Funds\"\r\n         }\r\n \r\n         // Walk-through the filters until the solution gets found.\r\n@@ -894,7 +894,7 @@ util::Result<SelectionResult> AutomaticCoinSelection(const CWallet& wallet, Coin\r\n \r\n \r\n         // General \"Insufficient Funds\"\r\n-        return util::Result<SelectionResult>(util::Error());\r\n+        return util::Error{};\r\n     }\r\n }\r\n \r\n\r\n```\r\n</details>\r\n",
      "commit_id" : "974b16b2580f4f09c8936fbead96fdbee637cb14",
      "created_at" : "2024-04-19T16:34:09Z",
      "diff_hunk" : "@@ -866,7 +866,7 @@ util::Result<SelectionResult> AutomaticCoinSelection(const CWallet& wallet, Coin\n         if (CAmount total_amount = available_coins.GetTotalAmount() - total_discarded < value_to_select) {\n             // Special case, too-long-mempool cluster.\n             if (total_amount + total_unconf_long_chain > value_to_select) {\n-                return util::Result<SelectionResult>({_(\"Unconfirmed UTXOs are available, but spending them creates a chain of transactions that will be rejected by the mempool\")});\n+                return util::Error{_(\"Unconfirmed UTXOs are available, but spending them creates a chain of transactions that will be rejected by the mempool\")};",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29906#discussion_r1572639146",
      "id" : 1572639146,
      "line" : 869,
      "node_id" : "PRRC_kwDOABII585dvJGq",
      "original_commit_id" : "974b16b2580f4f09c8936fbead96fdbee637cb14",
      "original_line" : 869,
      "original_position" : 67,
      "original_start_line" : null,
      "path" : "src/wallet/spend.cpp",
      "position" : 67,
      "pull_request_review_id" : 2011883406,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29906",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1572639146/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-04-19T17:03:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1572639146",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/69010457?v=4",
         "events_url" : "https://api.github.com/users/stickies-v/events{/privacy}",
         "followers_url" : "https://api.github.com/users/stickies-v/followers",
         "following_url" : "https://api.github.com/users/stickies-v/following{/other_user}",
         "gists_url" : "https://api.github.com/users/stickies-v/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/stickies-v",
         "id" : 69010457,
         "login" : "stickies-v",
         "node_id" : "MDQ6VXNlcjY5MDEwNDU3",
         "organizations_url" : "https://api.github.com/users/stickies-v/orgs",
         "received_events_url" : "https://api.github.com/users/stickies-v/received_events",
         "repos_url" : "https://api.github.com/users/stickies-v/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/stickies-v/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/stickies-v/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/stickies-v"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29906#discussion_r1572648440"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29906"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1572648440"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "`Update` is a bit of an ambiguous name imo, it doesn't clearly indicate if it means replacing or merging into the existing result. I think for this commit, where we can only overwrite the existing result, I think `Replace` would be better. For the next commits in #25665 where we actually add the merging functionality, I think `Merge` or `Combine` would be a better choice.",
      "commit_id" : "974b16b2580f4f09c8936fbead96fdbee637cb14",
      "created_at" : "2024-04-19T16:43:58Z",
      "diff_hunk" : "@@ -75,6 +85,9 @@ class Result\n     const T& operator*() const LIFETIMEBOUND { return value(); }\n     T* operator->() LIFETIMEBOUND { return &value(); }\n     T& operator*() LIFETIMEBOUND { return value(); }\n+\n+    //! Update this result by moving from another result object.\n+    Result& Update(Result&& other) LIFETIMEBOUND { return *this = std::move(other); }",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29906#discussion_r1572648440",
      "id" : 1572648440,
      "line" : 90,
      "node_id" : "PRRC_kwDOABII585dvLX4",
      "original_commit_id" : "974b16b2580f4f09c8936fbead96fdbee637cb14",
      "original_line" : 90,
      "original_position" : 30,
      "original_start_line" : null,
      "path" : "src/util/result.h",
      "position" : 30,
      "pull_request_review_id" : 2011883406,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29906",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1572648440/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-04-19T17:03:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1572648440",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/69010457?v=4",
         "events_url" : "https://api.github.com/users/stickies-v/events{/privacy}",
         "followers_url" : "https://api.github.com/users/stickies-v/followers",
         "following_url" : "https://api.github.com/users/stickies-v/following{/other_user}",
         "gists_url" : "https://api.github.com/users/stickies-v/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/stickies-v",
         "id" : 69010457,
         "login" : "stickies-v",
         "node_id" : "MDQ6VXNlcjY5MDEwNDU3",
         "organizations_url" : "https://api.github.com/users/stickies-v/orgs",
         "received_events_url" : "https://api.github.com/users/stickies-v/received_events",
         "repos_url" : "https://api.github.com/users/stickies-v/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/stickies-v/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/stickies-v/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/stickies-v"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29906#discussion_r1572817364"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29906"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1572817364"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "re: https://github.com/bitcoin/bitcoin/pull/29906#discussion_r1572648440\r\n\r\n> `Update` is a bit of an ambiguous name imo, it doesn't clearly indicate if it means replacing or merging into the existing result. I think for this commit, where we can only overwrite the existing result, I think `Replace` would be better. For the next commits in #25665 where we actually add the merging functionality, I think `Merge` or `Combine` would be a better choice.\r\n\r\nWe could definitely have a `Replace` method in the future. The only reason I didn't add one now is that so far after updating a lot of code to use the `Result` class in PR's #29700 and #25722, I haven't seen uses for a `Replace` method. If you think having a `Replace()` method would good to add here for a future use-case, or for the sake of completeness, I'd be happy to add it. However, I don't think any changed lines here should be calling `Replace()` because they are just trying to update result values, not reset and replace the entire result object.\r\n\r\nI did originally consider calling this method `Merge` instead of `Update` but I liked `Update` better for 2 reasons. First, I liked consistency with python's [`dict.update`](\r\nhttps://docs.python.org/3/library/stdtypes.html#dict.update) method which takes fields from two different dict objects and combines them, just like this `Update` function does. Second, I think the name `Merge` would be misleading in the majority of cases where individual values are _not_ merged, only different fields are combined, and new field values overwrite old values. [^1]\r\n\r\n[^1]: It is true that with [#25722](https://github.com/bitcoin/bitcoin/pull/25722), you can go out of your way to pass a custom type to `util::Result` and specialize `ResultTraits` so field values are merged when Update() is called. I haven't seen cases where this is useful for success types, only for some failure types where multiple things can fail and you want to return information about all the failures. I think name `Update` is generic enough to cover atypical cases where values are merged without implying that values are merged typically.\r\n\r\nYour suggestion `Combine` could also work instead of `Update` but I think is less clear syntactically. For example, I think `a.Update(b)` maps pretty well to \"update object `a` with contents of object `b`\", but it's less obvious what `a.Combine(b)` would be supposed to do.\r\n",
      "commit_id" : "66022315641934bda301d61f009dae9cb3b45da0",
      "created_at" : "2024-04-19T19:11:30Z",
      "diff_hunk" : "@@ -75,6 +85,9 @@ class Result\n     const T& operator*() const LIFETIMEBOUND { return value(); }\n     T* operator->() LIFETIMEBOUND { return &value(); }\n     T& operator*() LIFETIMEBOUND { return value(); }\n+\n+    //! Update this result by moving from another result object.\n+    Result& Update(Result&& other) LIFETIMEBOUND { return *this = std::move(other); }",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29906#discussion_r1572817364",
      "id" : 1572817364,
      "in_reply_to_id" : 1572648440,
      "line" : 93,
      "node_id" : "PRRC_kwDOABII585dv0nU",
      "original_commit_id" : "974b16b2580f4f09c8936fbead96fdbee637cb14",
      "original_line" : 93,
      "original_position" : 30,
      "original_start_line" : null,
      "path" : "src/util/result.h",
      "position" : 33,
      "pull_request_review_id" : 2012191090,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29906",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1572817364/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-04-24T15:52:49Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1572817364",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29906#discussion_r1572817468"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29906"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1572817468"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "re: https://github.com/bitcoin/bitcoin/pull/29906#discussion_r1572639146\r\n\r\n> nit: nice, but maybe best to clean up all 3 instances in one go?\r\n\r\nThanks! Applied patch",
      "commit_id" : "66022315641934bda301d61f009dae9cb3b45da0",
      "created_at" : "2024-04-19T19:11:38Z",
      "diff_hunk" : "@@ -866,7 +866,7 @@ util::Result<SelectionResult> AutomaticCoinSelection(const CWallet& wallet, Coin\n         if (CAmount total_amount = available_coins.GetTotalAmount() - total_discarded < value_to_select) {\n             // Special case, too-long-mempool cluster.\n             if (total_amount + total_unconf_long_chain > value_to_select) {\n-                return util::Result<SelectionResult>({_(\"Unconfirmed UTXOs are available, but spending them creates a chain of transactions that will be rejected by the mempool\")});\n+                return util::Error{_(\"Unconfirmed UTXOs are available, but spending them creates a chain of transactions that will be rejected by the mempool\")};",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29906#discussion_r1572817468",
      "id" : 1572817468,
      "in_reply_to_id" : 1572639146,
      "line" : 869,
      "node_id" : "PRRC_kwDOABII585dv0o8",
      "original_commit_id" : "974b16b2580f4f09c8936fbead96fdbee637cb14",
      "original_line" : 869,
      "original_position" : 67,
      "original_start_line" : null,
      "path" : "src/wallet/spend.cpp",
      "position" : 67,
      "pull_request_review_id" : 2012191090,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29906",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1572817468/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-04-24T15:52:49Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1572817468",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29906#discussion_r1572817536"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29906"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1572817536"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "re: https://github.com/bitcoin/bitcoin/pull/29906#discussion_r1572632242\r\n\r\n> nit: Any reason not to just wrap the args in `std::move`? Seems like the more intuitive approach, and probably slightly more performant?\r\n\r\nAgreed that's much better. Applied suggestion.",
      "commit_id" : "66022315641934bda301d61f009dae9cb3b45da0",
      "created_at" : "2024-04-19T19:11:44Z",
      "diff_hunk" : "@@ -291,7 +291,10 @@ FUZZ_TARGET(coinselection)\n     }\n \n     std::vector<COutput> utxos;\n-    std::vector<util::Result<SelectionResult>> results{result_srd, result_knapsack, result_bnb};\n+    std::vector<util::Result<SelectionResult>> results;\n+    results.emplace_back(std::move(result_srd));\n+    results.emplace_back(std::move(result_knapsack));\n+    results.emplace_back(std::move(result_bnb));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29906#discussion_r1572817536",
      "id" : 1572817536,
      "in_reply_to_id" : 1572632242,
      "line" : 297,
      "node_id" : "PRRC_kwDOABII585dv0qA",
      "original_commit_id" : "974b16b2580f4f09c8936fbead96fdbee637cb14",
      "original_line" : 297,
      "original_position" : 8,
      "original_start_line" : 294,
      "path" : "src/wallet/test/fuzz/coinselection.cpp",
      "position" : 8,
      "pull_request_review_id" : 2012191090,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29906",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1572817536/reactions"
      },
      "side" : "RIGHT",
      "start_line" : 294,
      "start_side" : "RIGHT",
      "subject_type" : "line",
      "updated_at" : "2024-04-24T15:52:49Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1572817536",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29906#discussion_r1578217883"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29906"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1578217883"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "re: [#29906 (comment)](https://github.com/bitcoin/bitcoin/pull/29906#discussion_r1572632242)\r\n\r\n> nit: Any reason not to just wrap the args in `std::move`? Seems like the more intuitive approach, and probably slightly more performant?\r\n\r\nActually this turns out not to work because `std::initializer_list` list [does not work](https://old.reddit.com/r/cpp/comments/7a1o7f/why_does_stdinitializer_list_prevents_using/) with move-only types. So unfortunately vector initialization needs to be a little more verbose. I updated the PR now to disable the `util::Result` move constructor to catch this and any related problems.",
      "commit_id" : "66022315641934bda301d61f009dae9cb3b45da0",
      "created_at" : "2024-04-24T16:48:06Z",
      "diff_hunk" : "@@ -291,7 +291,10 @@ FUZZ_TARGET(coinselection)\n     }\n \n     std::vector<COutput> utxos;\n-    std::vector<util::Result<SelectionResult>> results{result_srd, result_knapsack, result_bnb};\n+    std::vector<util::Result<SelectionResult>> results;\n+    results.emplace_back(std::move(result_srd));\n+    results.emplace_back(std::move(result_knapsack));\n+    results.emplace_back(std::move(result_bnb));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29906#discussion_r1578217883",
      "id" : 1578217883,
      "in_reply_to_id" : 1572632242,
      "line" : 297,
      "node_id" : "PRRC_kwDOABII585eEbGb",
      "original_commit_id" : "974b16b2580f4f09c8936fbead96fdbee637cb14",
      "original_line" : 297,
      "original_position" : 8,
      "original_start_line" : 294,
      "path" : "src/wallet/test/fuzz/coinselection.cpp",
      "position" : 8,
      "pull_request_review_id" : 2020422224,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29906",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1578217883/reactions"
      },
      "side" : "RIGHT",
      "start_line" : 294,
      "start_side" : "RIGHT",
      "subject_type" : "line",
      "updated_at" : "2024-04-24T19:20:13Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1578217883",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29906#discussion_r1579447042"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29906"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1579447042"
         }
      },
      "author_association" : "MEMBER",
      "body" : "q: why uppercase? Do you wanted to differentiate own functions vs standard ones?",
      "commit_id" : "66022315641934bda301d61f009dae9cb3b45da0",
      "created_at" : "2024-04-25T13:11:27Z",
      "diff_hunk" : "@@ -75,6 +85,9 @@ class Result\n     const T& operator*() const LIFETIMEBOUND { return value(); }\n     T* operator->() LIFETIMEBOUND { return &value(); }\n     T& operator*() LIFETIMEBOUND { return value(); }\n+\n+    //! Update this result by moving from another result object.\n+    Result& Update(Result&& other) LIFETIMEBOUND { return *this = std::move(other); }",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29906#discussion_r1579447042",
      "id" : 1579447042,
      "line" : 93,
      "node_id" : "PRRC_kwDOABII585eJHMC",
      "original_commit_id" : "d293d0ba521b6c37595571f28eb19106c8444065",
      "original_line" : 90,
      "original_position" : 30,
      "original_start_line" : 89,
      "path" : "src/util/result.h",
      "position" : 33,
      "pull_request_review_id" : 2022455655,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29906",
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1579447042/reactions"
      },
      "side" : "RIGHT",
      "start_line" : 92,
      "start_side" : "RIGHT",
      "subject_type" : "line",
      "updated_at" : "2024-04-25T14:30:10Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1579447042",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5377650?v=4",
         "events_url" : "https://api.github.com/users/furszy/events{/privacy}",
         "followers_url" : "https://api.github.com/users/furszy/followers",
         "following_url" : "https://api.github.com/users/furszy/following{/other_user}",
         "gists_url" : "https://api.github.com/users/furszy/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/furszy",
         "id" : 5377650,
         "login" : "furszy",
         "node_id" : "MDQ6VXNlcjUzNzc2NTA=",
         "organizations_url" : "https://api.github.com/users/furszy/orgs",
         "received_events_url" : "https://api.github.com/users/furszy/received_events",
         "repos_url" : "https://api.github.com/users/furszy/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/furszy/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/furszy/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/furszy"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29906#discussion_r1579500335"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29906"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1579500335"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Not for this PR but.. we could remove this `Update` call pretty easily (e8a330584571bf0270c692676a57ebcf7d7c7697). We are calling `getNewDestination` twice only to verify if the wallet is locked or not.",
      "commit_id" : "66022315641934bda301d61f009dae9cb3b45da0",
      "created_at" : "2024-04-25T13:44:36Z",
      "diff_hunk" : "@@ -377,7 +377,7 @@ QString AddressTableModel::addRow(const QString &type, const QString &label, con\n                 editStatus = WALLET_UNLOCK_FAILURE;\n                 return QString();\n             }\n-            op_dest = walletModel->wallet().getNewDestination(address_type, strLabel);\n+            op_dest.Update(walletModel->wallet().getNewDestination(address_type, strLabel));\n             if (!op_dest) {\n                 editStatus = KEY_GENERATION_FAILURE;\n                 return QString();",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29906#discussion_r1579500335",
      "id" : 1579500335,
      "line" : 383,
      "node_id" : "PRRC_kwDOABII585eJUMv",
      "original_commit_id" : "d293d0ba521b6c37595571f28eb19106c8444065",
      "original_line" : 383,
      "original_position" : 8,
      "original_start_line" : 380,
      "path" : "src/qt/addresstablemodel.cpp",
      "position" : 8,
      "pull_request_review_id" : 2022455655,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29906",
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1579500335/reactions"
      },
      "side" : "RIGHT",
      "start_line" : 380,
      "start_side" : "RIGHT",
      "subject_type" : "line",
      "updated_at" : "2024-04-25T14:30:10Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1579500335",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5377650?v=4",
         "events_url" : "https://api.github.com/users/furszy/events{/privacy}",
         "followers_url" : "https://api.github.com/users/furszy/followers",
         "following_url" : "https://api.github.com/users/furszy/following{/other_user}",
         "gists_url" : "https://api.github.com/users/furszy/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/furszy",
         "id" : 5377650,
         "login" : "furszy",
         "node_id" : "MDQ6VXNlcjUzNzc2NTA=",
         "organizations_url" : "https://api.github.com/users/furszy/orgs",
         "received_events_url" : "https://api.github.com/users/furszy/received_events",
         "repos_url" : "https://api.github.com/users/furszy/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/furszy/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/furszy/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/furszy"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29906#discussion_r1579632793"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29906"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1579632793"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "re: https://github.com/bitcoin/bitcoin/pull/29906#discussion_r1579500335\r\n\r\nIt seems like the goal of the code is to get a new address without unlocking. But I haven't looked into this. It definitely looks a little clumsy, though, because it isn't actually using the error message that is returned.",
      "commit_id" : "66022315641934bda301d61f009dae9cb3b45da0",
      "created_at" : "2024-04-25T14:54:20Z",
      "diff_hunk" : "@@ -377,7 +377,7 @@ QString AddressTableModel::addRow(const QString &type, const QString &label, con\n                 editStatus = WALLET_UNLOCK_FAILURE;\n                 return QString();\n             }\n-            op_dest = walletModel->wallet().getNewDestination(address_type, strLabel);\n+            op_dest.Update(walletModel->wallet().getNewDestination(address_type, strLabel));\n             if (!op_dest) {\n                 editStatus = KEY_GENERATION_FAILURE;\n                 return QString();",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29906#discussion_r1579632793",
      "id" : 1579632793,
      "in_reply_to_id" : 1579500335,
      "line" : 383,
      "node_id" : "PRRC_kwDOABII585eJ0iZ",
      "original_commit_id" : "d293d0ba521b6c37595571f28eb19106c8444065",
      "original_line" : 383,
      "original_position" : 8,
      "original_start_line" : 380,
      "path" : "src/qt/addresstablemodel.cpp",
      "position" : 8,
      "pull_request_review_id" : 2022770502,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29906",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1579632793/reactions"
      },
      "side" : "RIGHT",
      "start_line" : 380,
      "start_side" : "RIGHT",
      "subject_type" : "line",
      "updated_at" : "2024-04-25T15:04:46Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1579632793",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29906#discussion_r1579633610"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29906"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1579633610"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "re: https://github.com/bitcoin/bitcoin/pull/29906#discussion_r1579447042\r\n\r\nPersonally I think using lowercase for instance methods and uppercase for other methods and functions is good practice because it makes it obvious when you are passing an implicit `this` parameter to function calls. (It is useful for the same reason `m_` prefixes are useful.) However, I got pushback when I tried to allow this in the style guide in #14635 so now I usually try to follow the guide.",
      "commit_id" : "66022315641934bda301d61f009dae9cb3b45da0",
      "created_at" : "2024-04-25T14:54:38Z",
      "diff_hunk" : "@@ -75,6 +85,9 @@ class Result\n     const T& operator*() const LIFETIMEBOUND { return value(); }\n     T* operator->() LIFETIMEBOUND { return &value(); }\n     T& operator*() LIFETIMEBOUND { return value(); }\n+\n+    //! Update this result by moving from another result object.\n+    Result& Update(Result&& other) LIFETIMEBOUND { return *this = std::move(other); }",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29906#discussion_r1579633610",
      "id" : 1579633610,
      "in_reply_to_id" : 1579447042,
      "line" : 93,
      "node_id" : "PRRC_kwDOABII585eJ0vK",
      "original_commit_id" : "d293d0ba521b6c37595571f28eb19106c8444065",
      "original_line" : 90,
      "original_position" : 30,
      "original_start_line" : 89,
      "path" : "src/util/result.h",
      "position" : 33,
      "pull_request_review_id" : 2022770502,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29906",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1579633610/reactions"
      },
      "side" : "RIGHT",
      "start_line" : 92,
      "start_side" : "RIGHT",
      "subject_type" : "line",
      "updated_at" : "2024-04-25T15:04:46Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1579633610",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29906#discussion_r1580022711"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29906"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1580022711"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "I think using `Update` here is confusing and makes the code less clear.\r\n\r\n<details>\r\n<summary>git diff on 6602231564</summary>\r\n\r\n```diff\r\ndiff --git a/src/init.cpp b/src/init.cpp\r\nindex 8cb593754c..678bb2a39c 100644\r\n--- a/src/init.cpp\r\n+++ b/src/init.cpp\r\n@@ -991,10 +991,8 @@ bool AppInitParameterInteraction(const ArgsManager& args)\r\n         InitWarning(strprintf(_(\"Reducing -maxconnections from %d to %d, because of system limitations.\"), nUserMaxConnections, nMaxConnections));\r\n \r\n     // ********************************************************* Step 3: parameter-to-internal-flags\r\n-    auto result = init::SetLoggingCategories(args);\r\n-    if (!result) return InitError(util::ErrorString(result));\r\n-    result.Update(init::SetLoggingLevel(args));\r\n-    if (!result) return InitError(util::ErrorString(result));\r\n+    if (auto result{init::SetLoggingCategories(args)}; !result) return InitError(util::ErrorString(result));\r\n+    if (auto result{init::SetLoggingLevel(args)}; !result) return InitError(util::ErrorString(result));\r\n \r\n     nConnectTimeout = args.GetIntArg(\"-timeout\", DEFAULT_CONNECT_TIMEOUT);\r\n     if (nConnectTimeout <= 0) {\r\n\r\n```\r\n</details>\r\n",
      "commit_id" : "88aa093356ff142efe60df989323eb1ed1aa9e18",
      "created_at" : "2024-04-25T19:24:42Z",
      "diff_hunk" : "@@ -993,7 +993,7 @@ bool AppInitParameterInteraction(const ArgsManager& args)\n     // ********************************************************* Step 3: parameter-to-internal-flags\n     auto result = init::SetLoggingCategories(args);\n     if (!result) return InitError(util::ErrorString(result));\n-    result = init::SetLoggingLevel(args);\n+    result.Update(init::SetLoggingLevel(args));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29906#discussion_r1580022711",
      "id" : 1580022711,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585eLTu3",
      "original_commit_id" : "66022315641934bda301d61f009dae9cb3b45da0",
      "original_line" : 996,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "src/init.cpp",
      "position" : null,
      "pull_request_review_id" : 2023406729,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29906",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1580022711/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-04-25T20:11:23Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1580022711",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/69010457?v=4",
         "events_url" : "https://api.github.com/users/stickies-v/events{/privacy}",
         "followers_url" : "https://api.github.com/users/stickies-v/followers",
         "following_url" : "https://api.github.com/users/stickies-v/following{/other_user}",
         "gists_url" : "https://api.github.com/users/stickies-v/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/stickies-v",
         "id" : 69010457,
         "login" : "stickies-v",
         "node_id" : "MDQ6VXNlcjY5MDEwNDU3",
         "organizations_url" : "https://api.github.com/users/stickies-v/orgs",
         "received_events_url" : "https://api.github.com/users/stickies-v/received_events",
         "repos_url" : "https://api.github.com/users/stickies-v/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/stickies-v/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/stickies-v/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/stickies-v"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29906#discussion_r1580027359"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29906"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1580027359"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "I don't think `Update` is appropriate here, would e.g. use:\r\n\r\n<details>\r\n<summary>git diff on 6602231564</summary>\r\n\r\n```diff\r\ndiff --git a/src/test/mempool_tests.cpp b/src/test/mempool_tests.cpp\r\nindex 2858494625..41ffb76762 100644\r\n--- a/src/test/mempool_tests.cpp\r\n+++ b/src/test/mempool_tests.cpp\r\n@@ -202,9 +202,11 @@ BOOST_AUTO_TEST_CASE(MempoolIndexingTest)\r\n     tx7.vout[1].scriptPubKey = CScript() << OP_11 << OP_EQUAL;\r\n     tx7.vout[1].nValue = 1 * COIN;\r\n \r\n-    auto ancestors_calculated{pool.CalculateMemPoolAncestors(entry.Fee(2000000LL).FromTx(tx7), CTxMemPool::Limits::NoLimits())};\r\n-    BOOST_REQUIRE(ancestors_calculated.has_value());\r\n-    BOOST_CHECK(*ancestors_calculated == setAncestors);\r\n+    {\r\n+        auto ancestors_calculated{pool.CalculateMemPoolAncestors(entry.Fee(2000000LL).FromTx(tx7), CTxMemPool::Limits::NoLimits())};\r\n+        BOOST_REQUIRE(ancestors_calculated.has_value());\r\n+        BOOST_CHECK(*ancestors_calculated == setAncestors);\r\n+    }\r\n \r\n     pool.addUnchecked(entry.FromTx(tx7), setAncestors);\r\n     BOOST_CHECK_EQUAL(pool.size(), 7U);\r\n@@ -260,9 +262,12 @@ BOOST_AUTO_TEST_CASE(MempoolIndexingTest)\r\n     tx10.vout[0].scriptPubKey = CScript() << OP_11 << OP_EQUAL;\r\n     tx10.vout[0].nValue = 10 * COIN;\r\n \r\n-    ancestors_calculated.Update(pool.CalculateMemPoolAncestors(entry.Fee(200000LL).Time(NodeSeconds{4s}).FromTx(tx10), CTxMemPool::Limits::NoLimits()));\r\n-    BOOST_REQUIRE(ancestors_calculated);\r\n-    BOOST_CHECK(*ancestors_calculated == setAncestors);\r\n+    {\r\n+        auto ancestors_calculated{pool.CalculateMemPoolAncestors(entry.Fee(200000LL).Time(NodeSeconds{4s}).FromTx(tx10), CTxMemPool::Limits::NoLimits())};\r\n+        BOOST_REQUIRE(ancestors_calculated);\r\n+        BOOST_CHECK(*ancestors_calculated == setAncestors);\r\n+    }\r\n+\r\n \r\n     pool.addUnchecked(entry.FromTx(tx10), setAncestors);\r\n \r\n\r\n```\r\n</details>\r\n",
      "commit_id" : "88aa093356ff142efe60df989323eb1ed1aa9e18",
      "created_at" : "2024-04-25T19:29:29Z",
      "diff_hunk" : "@@ -260,7 +260,7 @@ BOOST_AUTO_TEST_CASE(MempoolIndexingTest)\n     tx10.vout[0].scriptPubKey = CScript() << OP_11 << OP_EQUAL;\n     tx10.vout[0].nValue = 10 * COIN;\n \n-    ancestors_calculated = pool.CalculateMemPoolAncestors(entry.Fee(200000LL).Time(NodeSeconds{4s}).FromTx(tx10), CTxMemPool::Limits::NoLimits());\n+    ancestors_calculated.Update(pool.CalculateMemPoolAncestors(entry.Fee(200000LL).Time(NodeSeconds{4s}).FromTx(tx10), CTxMemPool::Limits::NoLimits()));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29906#discussion_r1580027359",
      "id" : 1580027359,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585eLU3f",
      "original_commit_id" : "66022315641934bda301d61f009dae9cb3b45da0",
      "original_line" : 263,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "src/test/mempool_tests.cpp",
      "position" : null,
      "pull_request_review_id" : 2023406729,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29906",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1580027359/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-04-25T20:11:23Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1580027359",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/69010457?v=4",
         "events_url" : "https://api.github.com/users/stickies-v/events{/privacy}",
         "followers_url" : "https://api.github.com/users/stickies-v/followers",
         "following_url" : "https://api.github.com/users/stickies-v/following{/other_user}",
         "gists_url" : "https://api.github.com/users/stickies-v/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/stickies-v",
         "id" : 69010457,
         "login" : "stickies-v",
         "node_id" : "MDQ6VXNlcjY5MDEwNDU3",
         "organizations_url" : "https://api.github.com/users/stickies-v/orgs",
         "received_events_url" : "https://api.github.com/users/stickies-v/received_events",
         "repos_url" : "https://api.github.com/users/stickies-v/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/stickies-v/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/stickies-v/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/stickies-v"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29906#discussion_r1580037125"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29906"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1580037125"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Alternative approach without `Update`:\r\n\r\n<details>\r\n<summary>git diff on 6602231564</summary>\r\n\r\n```diff\r\ndiff --git a/src/wallet/test/fuzz/notifications.cpp b/src/wallet/test/fuzz/notifications.cpp\r\nindex d0b06b726e..d9b4cdfdf2 100644\r\n--- a/src/wallet/test/fuzz/notifications.cpp\r\n+++ b/src/wallet/test/fuzz/notifications.cpp\r\n@@ -106,13 +106,12 @@ struct FuzzedWallet {\r\n     CTxDestination GetDestination(FuzzedDataProvider& fuzzed_data_provider)\r\n     {\r\n         auto type{fuzzed_data_provider.PickValueInArray(OUTPUT_TYPES)};\r\n-        util::Result<CTxDestination> op_dest{util::Error{}};\r\n         if (fuzzed_data_provider.ConsumeBool()) {\r\n-            op_dest.Update(wallet->GetNewDestination(type, \"\"));\r\n+            return *Assert(wallet->GetNewDestination(type, \"\"));\r\n         } else {\r\n-            op_dest.Update(wallet->GetNewChangeDestination(type));\r\n+            return *Assert(wallet->GetNewChangeDestination(type));\r\n         }\r\n-        return *Assert(op_dest);\r\n+        assert(false);\r\n     }\r\n     CScript GetScriptPubKey(FuzzedDataProvider& fuzzed_data_provider) { return GetScriptForDestination(GetDestination(fuzzed_data_provider)); }\r\n     void FundTx(FuzzedDataProvider& fuzzed_data_provider, CMutableTransaction tx)\r\n\r\n```\r\n</details>\r\n",
      "commit_id" : "88aa093356ff142efe60df989323eb1ed1aa9e18",
      "created_at" : "2024-04-25T19:39:49Z",
      "diff_hunk" : "@@ -108,9 +108,9 @@ struct FuzzedWallet {\n         auto type{fuzzed_data_provider.PickValueInArray(OUTPUT_TYPES)};\n         util::Result<CTxDestination> op_dest{util::Error{}};\n         if (fuzzed_data_provider.ConsumeBool()) {\n-            op_dest = wallet->GetNewDestination(type, \"\");\n+            op_dest.Update(wallet->GetNewDestination(type, \"\"));\n         } else {\n-            op_dest = wallet->GetNewChangeDestination(type);\n+            op_dest.Update(wallet->GetNewChangeDestination(type));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29906#discussion_r1580037125",
      "id" : 1580037125,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585eLXQF",
      "original_commit_id" : "66022315641934bda301d61f009dae9cb3b45da0",
      "original_line" : 113,
      "original_position" : 8,
      "original_start_line" : null,
      "path" : "src/wallet/test/fuzz/notifications.cpp",
      "position" : null,
      "pull_request_review_id" : 2023406729,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29906",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1580037125/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-04-25T20:11:23Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1580037125",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/69010457?v=4",
         "events_url" : "https://api.github.com/users/stickies-v/events{/privacy}",
         "followers_url" : "https://api.github.com/users/stickies-v/followers",
         "following_url" : "https://api.github.com/users/stickies-v/following{/other_user}",
         "gists_url" : "https://api.github.com/users/stickies-v/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/stickies-v",
         "id" : 69010457,
         "login" : "stickies-v",
         "node_id" : "MDQ6VXNlcjY5MDEwNDU3",
         "organizations_url" : "https://api.github.com/users/stickies-v/orgs",
         "received_events_url" : "https://api.github.com/users/stickies-v/received_events",
         "repos_url" : "https://api.github.com/users/stickies-v/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/stickies-v/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/stickies-v/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/stickies-v"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29906#discussion_r1580043133"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29906"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1580043133"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "And also here, I think `Update` is confusing and can e.g. be simplified with:\r\n\r\n<details>\r\n<summary>git diff on 6602231564</summary>\r\n\r\n```diff\r\ndiff --git a/src/wallet/test/spend_tests.cpp b/src/wallet/test/spend_tests.cpp\r\nindex 640e63903a..963c0f838b 100644\r\n--- a/src/wallet/test/spend_tests.cpp\r\n+++ b/src/wallet/test/spend_tests.cpp\r\n@@ -97,13 +97,11 @@ BOOST_FIXTURE_TEST_CASE(wallet_duplicated_preset_inputs_test, TestChain100Setup)\r\n     // so that the recipient's amount is no longer equal to the user's selected target of 299 BTC.\r\n \r\n     // First case, use 'subtract_fee_from_outputs=true'\r\n-    util::Result<CreatedTransactionResult> res_tx = CreateTransaction(*wallet, recipients, /*change_pos=*/std::nullopt, coin_control);\r\n-    BOOST_CHECK(!res_tx.has_value());\r\n+    BOOST_CHECK(!CreateTransaction(*wallet, recipients, /*change_pos=*/std::nullopt, coin_control));\r\n \r\n     // Second case, don't use 'subtract_fee_from_outputs'.\r\n     recipients[0].fSubtractFeeFromAmount = false;\r\n-    res_tx.Update(CreateTransaction(*wallet, recipients, /*change_pos=*/std::nullopt, coin_control));\r\n-    BOOST_CHECK(!res_tx.has_value());\r\n+    BOOST_CHECK(!CreateTransaction(*wallet, recipients, /*change_pos=*/std::nullopt, coin_control));\r\n }\r\n \r\n BOOST_AUTO_TEST_SUITE_END()\r\n\r\n```\r\n</details>\r\n",
      "commit_id" : "88aa093356ff142efe60df989323eb1ed1aa9e18",
      "created_at" : "2024-04-25T19:46:25Z",
      "diff_hunk" : "@@ -102,7 +102,7 @@ BOOST_FIXTURE_TEST_CASE(wallet_duplicated_preset_inputs_test, TestChain100Setup)\n \n     // Second case, don't use 'subtract_fee_from_outputs'.\n     recipients[0].fSubtractFeeFromAmount = false;\n-    res_tx = CreateTransaction(*wallet, recipients, /*change_pos=*/std::nullopt, coin_control);\n+    res_tx.Update(CreateTransaction(*wallet, recipients, /*change_pos=*/std::nullopt, coin_control));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29906#discussion_r1580043133",
      "id" : 1580043133,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585eLYt9",
      "original_commit_id" : "66022315641934bda301d61f009dae9cb3b45da0",
      "original_line" : 105,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "src/wallet/test/spend_tests.cpp",
      "position" : null,
      "pull_request_review_id" : 2023406729,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29906",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1580043133/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-04-25T20:11:23Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1580043133",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/69010457?v=4",
         "events_url" : "https://api.github.com/users/stickies-v/events{/privacy}",
         "followers_url" : "https://api.github.com/users/stickies-v/followers",
         "following_url" : "https://api.github.com/users/stickies-v/following{/other_user}",
         "gists_url" : "https://api.github.com/users/stickies-v/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/stickies-v",
         "id" : 69010457,
         "login" : "stickies-v",
         "node_id" : "MDQ6VXNlcjY5MDEwNDU3",
         "organizations_url" : "https://api.github.com/users/stickies-v/orgs",
         "received_events_url" : "https://api.github.com/users/stickies-v/received_events",
         "repos_url" : "https://api.github.com/users/stickies-v/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/stickies-v/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/stickies-v/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/stickies-v"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29906#discussion_r1580051611"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29906"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1580051611"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "> I haven't seen uses for a Replace method.\r\n\r\nI agree. The use cases I was thinking of should just be addressed with list initialization, so I think not implementing the method until we actually need it is the way to go, thanks.\r\n\r\n> Second, I think the name Merge would be misleading ... only different fields are combined\r\n\r\nThat's a good point, I agree `Update` > `Merge`\r\n\r\n> it's less obvious what a.Combine(b) would be supposed to do\r\n\r\nI don't think I agree, but I do agree there's no clear winner, so I'm happy to leave this as is.",
      "commit_id" : "88aa093356ff142efe60df989323eb1ed1aa9e18",
      "created_at" : "2024-04-25T19:55:03Z",
      "diff_hunk" : "@@ -75,6 +85,9 @@ class Result\n     const T& operator*() const LIFETIMEBOUND { return value(); }\n     T* operator->() LIFETIMEBOUND { return &value(); }\n     T& operator*() LIFETIMEBOUND { return value(); }\n+\n+    //! Update this result by moving from another result object.\n+    Result& Update(Result&& other) LIFETIMEBOUND { return *this = std::move(other); }",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29906#discussion_r1580051611",
      "id" : 1580051611,
      "in_reply_to_id" : 1572648440,
      "line" : 93,
      "node_id" : "PRRC_kwDOABII585eLayb",
      "original_commit_id" : "974b16b2580f4f09c8936fbead96fdbee637cb14",
      "original_line" : 93,
      "original_position" : 30,
      "original_start_line" : null,
      "path" : "src/util/result.h",
      "position" : 33,
      "pull_request_review_id" : 2023406729,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29906",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1580051611/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-04-25T20:11:23Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1580051611",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/69010457?v=4",
         "events_url" : "https://api.github.com/users/stickies-v/events{/privacy}",
         "followers_url" : "https://api.github.com/users/stickies-v/followers",
         "following_url" : "https://api.github.com/users/stickies-v/following{/other_user}",
         "gists_url" : "https://api.github.com/users/stickies-v/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/stickies-v",
         "id" : 69010457,
         "login" : "stickies-v",
         "node_id" : "MDQ6VXNlcjY5MDEwNDU3",
         "organizations_url" : "https://api.github.com/users/stickies-v/orgs",
         "received_events_url" : "https://api.github.com/users/stickies-v/received_events",
         "repos_url" : "https://api.github.com/users/stickies-v/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/stickies-v/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/stickies-v/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/stickies-v"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Thanks @stickies-v, I agree with your suggestions to avoid updating existing `Result` objects where possible and will apply them.\r\n\r\nBut I wonder if there are is anything else I can do to help make the interface more intuitive though. I'm not exactly clear on why it is not intuitive currently. A few places you mentioned \"Update here is confusing\" but I don't understand why it is confusing. Saying `result.Update(success_value)` is just meant to update the result object with a success value while keeping other result data intact. Saying `result.Update({util::Error{_(\"error message\"), failure_value});` is meant to update the result object with an error message and failure value, again keeping other result data intact.\r\n\r\nI think it's very similar to python dict.update function where if you start with an existing dictionary:\r\n\r\n```python\r\nd = {'a': 1, 'b': 2, 'c': 3}\r\n```\r\n\r\nand call the update method with new values:\r\n\r\n```python\r\nd.update({'a': 4, 'd': 5})\r\n```\r\n\r\nAnd the dictionary will be updated with the new values overwriting the old ones:\r\n\r\n```python\r\n{'a': 4, 'b': 2, 'c': 3, 'd': 5}\r\n```\r\n\r\n> In the code example you give, I'd find assignment much more intuitive, since the goal doesn't seem to be combining results. If Update() is aimed to be used exclusively (?) when we intend to combine results, doesn't that make for a more clear interface?\r\n\r\nUpdate is just intended to update some data in a result object without necessarily erasing other data in the result object. Assigning is conceptually different and would imply that result being assigned to would be cleared and completely replaced by value being assigned. In this PR, the result object only has two mutually exclusive fields (success value and error string), so assigning and updating are the same thing. In #25665, result objects contain more fields so assigning and updating are different things.",
      "created_at" : "2024-04-25T20:49:57Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29906#issuecomment-2078149594",
      "id" : 2078149594,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/29906",
      "node_id" : "IC_kwDOABII58573gva",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2078149594/reactions"
      },
      "updated_at" : "2024-04-25T20:49:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2078149594",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29906#discussion_r1580124463"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29906"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1580124463"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "re: https://github.com/bitcoin/bitcoin/pull/29906#discussion_r1580022711\r\n\r\nThanks, applied patch",
      "commit_id" : "88aa093356ff142efe60df989323eb1ed1aa9e18",
      "created_at" : "2024-04-25T21:02:07Z",
      "diff_hunk" : "@@ -993,7 +993,7 @@ bool AppInitParameterInteraction(const ArgsManager& args)\n     // ********************************************************* Step 3: parameter-to-internal-flags\n     auto result = init::SetLoggingCategories(args);\n     if (!result) return InitError(util::ErrorString(result));\n-    result = init::SetLoggingLevel(args);\n+    result.Update(init::SetLoggingLevel(args));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29906#discussion_r1580124463",
      "id" : 1580124463,
      "in_reply_to_id" : 1580022711,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585eLskv",
      "original_commit_id" : "66022315641934bda301d61f009dae9cb3b45da0",
      "original_line" : 996,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "src/init.cpp",
      "position" : null,
      "pull_request_review_id" : 2023574807,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29906",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1580124463/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-04-25T21:10:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1580124463",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29906#discussion_r1580124595"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29906"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1580124595"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "re: https://github.com/bitcoin/bitcoin/pull/29906#discussion_r1580027359\r\n\r\nThanks, applied patch",
      "commit_id" : "88aa093356ff142efe60df989323eb1ed1aa9e18",
      "created_at" : "2024-04-25T21:02:15Z",
      "diff_hunk" : "@@ -260,7 +260,7 @@ BOOST_AUTO_TEST_CASE(MempoolIndexingTest)\n     tx10.vout[0].scriptPubKey = CScript() << OP_11 << OP_EQUAL;\n     tx10.vout[0].nValue = 10 * COIN;\n \n-    ancestors_calculated = pool.CalculateMemPoolAncestors(entry.Fee(200000LL).Time(NodeSeconds{4s}).FromTx(tx10), CTxMemPool::Limits::NoLimits());\n+    ancestors_calculated.Update(pool.CalculateMemPoolAncestors(entry.Fee(200000LL).Time(NodeSeconds{4s}).FromTx(tx10), CTxMemPool::Limits::NoLimits()));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29906#discussion_r1580124595",
      "id" : 1580124595,
      "in_reply_to_id" : 1580027359,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585eLsmz",
      "original_commit_id" : "66022315641934bda301d61f009dae9cb3b45da0",
      "original_line" : 263,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "src/test/mempool_tests.cpp",
      "position" : null,
      "pull_request_review_id" : 2023574807,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29906",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1580124595/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-04-25T21:10:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1580124595",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29906#discussion_r1580124847"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29906"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1580124847"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "re: https://github.com/bitcoin/bitcoin/pull/29906#discussion_r1580037125\r\n\r\nThanks, applied patch",
      "commit_id" : "88aa093356ff142efe60df989323eb1ed1aa9e18",
      "created_at" : "2024-04-25T21:02:35Z",
      "diff_hunk" : "@@ -108,9 +108,9 @@ struct FuzzedWallet {\n         auto type{fuzzed_data_provider.PickValueInArray(OUTPUT_TYPES)};\n         util::Result<CTxDestination> op_dest{util::Error{}};\n         if (fuzzed_data_provider.ConsumeBool()) {\n-            op_dest = wallet->GetNewDestination(type, \"\");\n+            op_dest.Update(wallet->GetNewDestination(type, \"\"));\n         } else {\n-            op_dest = wallet->GetNewChangeDestination(type);\n+            op_dest.Update(wallet->GetNewChangeDestination(type));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29906#discussion_r1580124847",
      "id" : 1580124847,
      "in_reply_to_id" : 1580037125,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585eLsqv",
      "original_commit_id" : "66022315641934bda301d61f009dae9cb3b45da0",
      "original_line" : 113,
      "original_position" : 8,
      "original_start_line" : null,
      "path" : "src/wallet/test/fuzz/notifications.cpp",
      "position" : null,
      "pull_request_review_id" : 2023574807,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29906",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1580124847/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-04-25T21:10:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1580124847",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29906#discussion_r1580125044"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29906"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1580125044"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "re: https://github.com/bitcoin/bitcoin/pull/29906#discussion_r1580043133\r\n\r\nThanks, applied patch",
      "commit_id" : "88aa093356ff142efe60df989323eb1ed1aa9e18",
      "created_at" : "2024-04-25T21:02:50Z",
      "diff_hunk" : "@@ -102,7 +102,7 @@ BOOST_FIXTURE_TEST_CASE(wallet_duplicated_preset_inputs_test, TestChain100Setup)\n \n     // Second case, don't use 'subtract_fee_from_outputs'.\n     recipients[0].fSubtractFeeFromAmount = false;\n-    res_tx = CreateTransaction(*wallet, recipients, /*change_pos=*/std::nullopt, coin_control);\n+    res_tx.Update(CreateTransaction(*wallet, recipients, /*change_pos=*/std::nullopt, coin_control));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29906#discussion_r1580125044",
      "id" : 1580125044,
      "in_reply_to_id" : 1580043133,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585eLst0",
      "original_commit_id" : "66022315641934bda301d61f009dae9cb3b45da0",
      "original_line" : 105,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "src/wallet/test/spend_tests.cpp",
      "position" : null,
      "pull_request_review_id" : 2023574807,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29906",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1580125044/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-04-25T21:10:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1580125044",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Sorry, I've been doing a poor job explaining myself. I am fully onboard with how `Update` works.  When I used the word \"confusion\", I was talking about _usage_, not interface*. Prior to this push, `Update()` was used in a couple of places where we know or expect the `Result` to be empty, and in those case I think we should just be explicit about that and use list initialization. When I see `result.Update()` being called, I have to look up which values are in `result` already and ensure that's correct, whereas with `auto result{...};` I know right away that we're starting from an empty result.\r\n\r\nTo stick with the python analogy: using `update` when we know or expect `a` to be an empty dictionary, is imo an anti-pattern and should be avoided.\r\n\r\n```python\r\na = {}\r\n// do some logic to calculate `value`\r\na.update({1: value})\r\n```\r\n\r\nInstead, it is much clearer to use assignment, so the reader doesn't have to figure out which values `a` held already.\r\n```python\r\n// do some logic to calculate `value`\r\na = {1: value}\r\n```\r\n\r\nIn short: I think it would be helpful if we only use `result.Update()` when `result` (potentially) has had fields set already, and use list initialization (or if necessary assignment initialization) for when we know (and thus enforce that) `result` is empty. This is also the concern I had with the code example [at the end of this comment](https://github.com/bitcoin/bitcoin/pull/29906#pullrequestreview-2012191090).\r\n\r\nI hope I did a better job explaining myself, but otherwise I'm happy to talk about it more offline to not pollute this PR more.\r\n\r\n* well, except for making sure the method names align with how we intend people to use them, hence my earlier renaming suggestions.",
      "created_at" : "2024-04-25T21:34:51Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29906#issuecomment-2078213252",
      "id" : 2078213252,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/29906",
      "node_id" : "IC_kwDOABII58573wSE",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2078213252/reactions"
      },
      "updated_at" : "2024-04-25T21:34:51Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2078213252",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/69010457?v=4",
         "events_url" : "https://api.github.com/users/stickies-v/events{/privacy}",
         "followers_url" : "https://api.github.com/users/stickies-v/followers",
         "following_url" : "https://api.github.com/users/stickies-v/following{/other_user}",
         "gists_url" : "https://api.github.com/users/stickies-v/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/stickies-v",
         "id" : 69010457,
         "login" : "stickies-v",
         "node_id" : "MDQ6VXNlcjY5MDEwNDU3",
         "organizations_url" : "https://api.github.com/users/stickies-v/orgs",
         "received_events_url" : "https://api.github.com/users/stickies-v/received_events",
         "repos_url" : "https://api.github.com/users/stickies-v/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/stickies-v/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/stickies-v/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/stickies-v"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Rebased 88aa093356ff142efe60df989323eb1ed1aa9e18 -> 0cbcb66257db65f0a68d82d17a2d1a83d8654b38 ([`pr/saferesult.5`](https://github.com/ryanofsky/bitcoin/commits/pr/saferesult.5) -> [`pr/saferesult.6`](https://github.com/ryanofsky/bitcoin/commits/pr/saferesult.6), [compare](https://github.com/ryanofsky/bitcoin/compare/pr/saferesult.5-rebase..pr/saferesult.6)) dropping Result::Update() method in this PR, and last 2 uses of it.\r\nUpdate 0cbcb66257db65f0a68d82d17a2d1a83d8654b38 -> e1be443315be6ba6c80267e0e6be59deee77de50 ([`pr/saferesult.6`](https://github.com/ryanofsky/bitcoin/commits/pr/saferesult.6) -> [`pr/saferesult.7`](https://github.com/ryanofsky/bitcoin/commits/pr/saferesult.7), [compare](https://github.com/ryanofsky/bitcoin/compare/pr/saferesult.6..pr/saferesult.7)) just changing a commit message to no longer mention Result::Update().\r\n\r\n---\r\n\r\nre: https://github.com/bitcoin/bitcoin/pull/29906#issuecomment-2078213252\r\n\r\nThanks for clarifying. I think we might disagree whether certain uses of an update function would be antipatterns, but I completely agree with all the code changes you suggested, and that in general if you have a choice between initializing values once or letting them change over time, you should prefer initializing them once so there's less changing state to reason about. I also looked at remaining two update calls in this PR, and thought they both were not good uses, so I removed them as well.\r\n\r\nMy [update example](https://github.com/bitcoin/bitcoin/pull/29906#pullrequestreview-2012191090]) was very simple because I wanted to show minimal code that demonstrated _how_ to use the update function, but the code was probably too simple to demonstrate _why_ you would want to use it. The use-case for update is when you have a function that is performing multiple operations and you want to accumulate warnings and errors from all the operations and return them. Examples would be the [`BlockManager::SaveBlockToDisk`](https://github.com/ryanofsky/bitcoin/blob/4d2c9de24916f8d69514ea7c7251136e2762fa5c/src/node/blockstorage.cpp#L1167-L1195) function from #29700 or the [`CompleteChainstateInitialization`](https://github.com/ryanofsky/bitcoin/blob/55d7de92bbbe035c1833c89f885af14e5b243932/src/node/chainstate.cpp#L38-L179) function from #25665. I think these are reasonable uses of the update function, but it's possible there could be better ways to write this code, and you might have another idea what it should look like.",
      "created_at" : "2024-04-26T01:11:42Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29906#issuecomment-2078452007",
      "id" : 2078452007,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/29906",
      "node_id" : "IC_kwDOABII58574qkn",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2078452007/reactions"
      },
      "updated_at" : "2024-04-26T01:22:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2078452007",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29906#discussion_r1580997920"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29906"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1580997920"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "nit: unnecessary extra newline",
      "commit_id" : "e1be443315be6ba6c80267e0e6be59deee77de50",
      "created_at" : "2024-04-26T12:55:27Z",
      "diff_hunk" : "@@ -260,9 +262,12 @@ BOOST_AUTO_TEST_CASE(MempoolIndexingTest)\n     tx10.vout[0].scriptPubKey = CScript() << OP_11 << OP_EQUAL;\n     tx10.vout[0].nValue = 10 * COIN;\n \n-    ancestors_calculated = pool.CalculateMemPoolAncestors(entry.Fee(200000LL).Time(NodeSeconds{4s}).FromTx(tx10), CTxMemPool::Limits::NoLimits());\n-    BOOST_REQUIRE(ancestors_calculated);\n-    BOOST_CHECK(*ancestors_calculated == setAncestors);\n+    {\n+        auto ancestors_calculated{pool.CalculateMemPoolAncestors(entry.Fee(200000LL).Time(NodeSeconds{4s}).FromTx(tx10), CTxMemPool::Limits::NoLimits())};\n+        BOOST_REQUIRE(ancestors_calculated);\n+        BOOST_CHECK(*ancestors_calculated == setAncestors);\n+    }\n+",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29906#discussion_r1580997920",
      "id" : 1580997920,
      "line" : 270,
      "node_id" : "PRRC_kwDOABII585ePB0g",
      "original_commit_id" : "e1be443315be6ba6c80267e0e6be59deee77de50",
      "original_line" : 270,
      "original_position" : 27,
      "original_start_line" : null,
      "path" : "src/test/mempool_tests.cpp",
      "position" : 27,
      "pull_request_review_id" : 2024988118,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29906",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1580997920/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-04-26T13:23:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1580997920",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/69010457?v=4",
         "events_url" : "https://api.github.com/users/stickies-v/events{/privacy}",
         "followers_url" : "https://api.github.com/users/stickies-v/followers",
         "following_url" : "https://api.github.com/users/stickies-v/following{/other_user}",
         "gists_url" : "https://api.github.com/users/stickies-v/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/stickies-v",
         "id" : 69010457,
         "login" : "stickies-v",
         "node_id" : "MDQ6VXNlcjY5MDEwNDU3",
         "organizations_url" : "https://api.github.com/users/stickies-v/orgs",
         "received_events_url" : "https://api.github.com/users/stickies-v/received_events",
         "repos_url" : "https://api.github.com/users/stickies-v/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/stickies-v/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/stickies-v/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/stickies-v"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29906#discussion_r1581039091"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29906"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1581039091"
         }
      },
      "author_association" : "MEMBER",
      "body" : "nit: Is this line needed?",
      "commit_id" : "e1be443315be6ba6c80267e0e6be59deee77de50",
      "created_at" : "2024-04-26T13:27:49Z",
      "diff_hunk" : "@@ -106,13 +106,12 @@ struct FuzzedWallet {\n     CTxDestination GetDestination(FuzzedDataProvider& fuzzed_data_provider)\n     {\n         auto type{fuzzed_data_provider.PickValueInArray(OUTPUT_TYPES)};\n-        util::Result<CTxDestination> op_dest{util::Error{}};\n         if (fuzzed_data_provider.ConsumeBool()) {\n-            op_dest = wallet->GetNewDestination(type, \"\");\n+            return *Assert(wallet->GetNewDestination(type, \"\"));\n         } else {\n-            op_dest = wallet->GetNewChangeDestination(type);\n+            return *Assert(wallet->GetNewChangeDestination(type));\n         }\n-        return *Assert(op_dest);\n+        assert(false);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29906#discussion_r1581039091",
      "id" : 1581039091,
      "line" : 114,
      "node_id" : "PRRC_kwDOABII585ePL3z",
      "original_commit_id" : "e1be443315be6ba6c80267e0e6be59deee77de50",
      "original_line" : 114,
      "original_position" : 13,
      "original_start_line" : null,
      "path" : "src/wallet/test/fuzz/notifications.cpp",
      "position" : 13,
      "pull_request_review_id" : 2025056280,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29906",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1581039091/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-04-26T13:44:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1581039091",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/maflcko/events{/privacy}",
         "followers_url" : "https://api.github.com/users/maflcko/followers",
         "following_url" : "https://api.github.com/users/maflcko/following{/other_user}",
         "gists_url" : "https://api.github.com/users/maflcko/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/maflcko",
         "id" : 6399679,
         "login" : "maflcko",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/maflcko/orgs",
         "received_events_url" : "https://api.github.com/users/maflcko/received_events",
         "repos_url" : "https://api.github.com/users/maflcko/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/maflcko/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/maflcko/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/maflcko"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29906#discussion_r1581073867"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29906"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1581073867"
         }
      },
      "author_association" : "MEMBER",
      "body" : "This should be shadowing the previous `ancestors` variable (why the compiler isn't complaining about this?). The else path can also access the variable when it is declared inside the if statement.",
      "commit_id" : "e1be443315be6ba6c80267e0e6be59deee77de50",
      "created_at" : "2024-04-26T13:54:36Z",
      "diff_hunk" : "@@ -970,11 +971,13 @@ bool MemPoolAccept::PreChecks(ATMPArgs& args, Workspace& ws)\n         if (ws.m_vsize > EXTRA_DESCENDANT_TX_SIZE_LIMIT) {\n             return state.Invalid(TxValidationResult::TX_MEMPOOL_POLICY, \"too-long-mempool-chain\", error_message);\n         }\n-        ancestors = m_pool.CalculateMemPoolAncestors(*entry, cpfp_carve_out_limits);\n-        if (!ancestors) return state.Invalid(TxValidationResult::TX_MEMPOOL_POLICY, \"too-long-mempool-chain\", error_message);\n+        if (auto ancestors{m_pool.CalculateMemPoolAncestors(*entry, cpfp_carve_out_limits)}) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29906#discussion_r1581073867",
      "id" : 1581073867,
      "line" : 974,
      "node_id" : "PRRC_kwDOABII585ePUXL",
      "original_commit_id" : "616572cbb4b5b87e7cfb2373121c5471481a868a",
      "original_line" : 974,
      "original_position" : 18,
      "original_start_line" : null,
      "path" : "src/validation.cpp",
      "position" : 18,
      "pull_request_review_id" : 2025115330,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29906",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1581073867/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-04-26T13:54:45Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1581073867",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5377650?v=4",
         "events_url" : "https://api.github.com/users/furszy/events{/privacy}",
         "followers_url" : "https://api.github.com/users/furszy/followers",
         "following_url" : "https://api.github.com/users/furszy/following{/other_user}",
         "gists_url" : "https://api.github.com/users/furszy/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/furszy",
         "id" : 5377650,
         "login" : "furszy",
         "node_id" : "MDQ6VXNlcjUzNzc2NTA=",
         "organizations_url" : "https://api.github.com/users/furszy/orgs",
         "received_events_url" : "https://api.github.com/users/furszy/received_events",
         "repos_url" : "https://api.github.com/users/furszy/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/furszy/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/furszy/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/furszy"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29906#discussion_r1581108542"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29906"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1581108542"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "> This should be shadowing the previous `ancestors` variable (why the compiler isn't complaining about this?). The else path can also access the variable when it is declared inside the if statement.\r\n\r\nI can rename the variable to something else if you have a suggestion. Shadowing is also present in the `qt/addresstablemodel.cpp` change. The shadowing is intended, and I don't think shadowing in cases like these is necessarily bad. I think shadowing is sometimes better than having multiple similarly-named variables that could be confused and lead to bugs when the wrong variable is used.",
      "commit_id" : "e1be443315be6ba6c80267e0e6be59deee77de50",
      "created_at" : "2024-04-26T14:20:40Z",
      "diff_hunk" : "@@ -970,11 +971,13 @@ bool MemPoolAccept::PreChecks(ATMPArgs& args, Workspace& ws)\n         if (ws.m_vsize > EXTRA_DESCENDANT_TX_SIZE_LIMIT) {\n             return state.Invalid(TxValidationResult::TX_MEMPOOL_POLICY, \"too-long-mempool-chain\", error_message);\n         }\n-        ancestors = m_pool.CalculateMemPoolAncestors(*entry, cpfp_carve_out_limits);\n-        if (!ancestors) return state.Invalid(TxValidationResult::TX_MEMPOOL_POLICY, \"too-long-mempool-chain\", error_message);\n+        if (auto ancestors{m_pool.CalculateMemPoolAncestors(*entry, cpfp_carve_out_limits)}) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29906#discussion_r1581108542",
      "id" : 1581108542,
      "in_reply_to_id" : 1581073867,
      "line" : 974,
      "node_id" : "PRRC_kwDOABII585ePc0-",
      "original_commit_id" : "616572cbb4b5b87e7cfb2373121c5471481a868a",
      "original_line" : 974,
      "original_position" : 18,
      "original_start_line" : null,
      "path" : "src/validation.cpp",
      "position" : 18,
      "pull_request_review_id" : 2025173457,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29906",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1581108542/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-04-26T14:20:41Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1581108542",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29906#discussion_r1581128440"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29906"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1581128440"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I guess the \"issue\" is how people reading this in the future would differentiate an intended shadowing from an unintended one.`-Wshadow` will output a warning for this. Adding a special suppression tag just for this seems excessive to me.\r\n\r\nBut, in any case, it's not a big deal if you don't think it's worth it. I also don't think this is a problem anyway.",
      "commit_id" : "e1be443315be6ba6c80267e0e6be59deee77de50",
      "created_at" : "2024-04-26T14:35:37Z",
      "diff_hunk" : "@@ -970,11 +971,13 @@ bool MemPoolAccept::PreChecks(ATMPArgs& args, Workspace& ws)\n         if (ws.m_vsize > EXTRA_DESCENDANT_TX_SIZE_LIMIT) {\n             return state.Invalid(TxValidationResult::TX_MEMPOOL_POLICY, \"too-long-mempool-chain\", error_message);\n         }\n-        ancestors = m_pool.CalculateMemPoolAncestors(*entry, cpfp_carve_out_limits);\n-        if (!ancestors) return state.Invalid(TxValidationResult::TX_MEMPOOL_POLICY, \"too-long-mempool-chain\", error_message);\n+        if (auto ancestors{m_pool.CalculateMemPoolAncestors(*entry, cpfp_carve_out_limits)}) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29906#discussion_r1581128440",
      "id" : 1581128440,
      "in_reply_to_id" : 1581073867,
      "line" : 974,
      "node_id" : "PRRC_kwDOABII585ePhr4",
      "original_commit_id" : "616572cbb4b5b87e7cfb2373121c5471481a868a",
      "original_line" : 974,
      "original_position" : 18,
      "original_start_line" : null,
      "path" : "src/validation.cpp",
      "position" : 18,
      "pull_request_review_id" : 2025209538,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29906",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1581128440/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-04-26T14:35:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1581128440",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5377650?v=4",
         "events_url" : "https://api.github.com/users/furszy/events{/privacy}",
         "followers_url" : "https://api.github.com/users/furszy/followers",
         "following_url" : "https://api.github.com/users/furszy/following{/other_user}",
         "gists_url" : "https://api.github.com/users/furszy/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/furszy",
         "id" : 5377650,
         "login" : "furszy",
         "node_id" : "MDQ6VXNlcjUzNzc2NTA=",
         "organizations_url" : "https://api.github.com/users/furszy/orgs",
         "received_events_url" : "https://api.github.com/users/furszy/received_events",
         "repos_url" : "https://api.github.com/users/furszy/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/furszy/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/furszy/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/furszy"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "ACK e1be443315be6ba6c80267e0e6be59deee77de50",
      "created_at" : "2024-04-26T18:37:40Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29906#issuecomment-2079935291",
      "id" : 2079935291,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/29906",
      "node_id" : "IC_kwDOABII5857-Us7",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2079935291/reactions"
      },
      "updated_at" : "2024-04-26T18:37:40Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2079935291",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "node_id" : "MDQ6VXNlcjM3ODIyNzQ=",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29906#discussion_r1581409638"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29906"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1581409638"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Can you briefly explain why these `operator=` are made private as opposed to deleting them?",
      "commit_id" : "e1be443315be6ba6c80267e0e6be59deee77de50",
      "created_at" : "2024-04-26T18:47:02Z",
      "diff_hunk" : "@@ -39,13 +39,25 @@ class Result\n \n     std::variant<bilingual_str, T> m_variant;\n \n+    //! Disallow copy constructor, require Result to be moved for efficiency.\n+    Result(const Result&) = delete;\n+\n+    //! Disallow operator= to avoid confusion in the future when the Result\n+    //! class gains support for richer error reporting, and callers should have\n+    //! ability to set a new result value without clearing existing error\n+    //! messages.\n+    Result& operator=(const Result&) = default;\n+    Result& operator=(Result&&) = default;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29906#discussion_r1581409638",
      "id" : 1581409638,
      "line" : 50,
      "node_id" : "PRRC_kwDOABII585eQmVm",
      "original_commit_id" : "e1be443315be6ba6c80267e0e6be59deee77de50",
      "original_line" : 50,
      "original_position" : 12,
      "original_start_line" : 45,
      "path" : "src/util/result.h",
      "position" : 12,
      "pull_request_review_id" : 2025667660,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29906",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1581409638/reactions"
      },
      "side" : "RIGHT",
      "start_line" : 45,
      "start_side" : "RIGHT",
      "subject_type" : "line",
      "updated_at" : "2024-04-26T18:47:02Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1581409638",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "node_id" : "MDQ6VXNlcjM3ODIyNzQ=",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29906#discussion_r1581579143"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29906"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1581579143"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "re: https://github.com/bitcoin/bitcoin/pull/29906#discussion_r1580997920\r\n\r\n> nit: unnecessary extra newline\r\n\r\nThanks, removed",
      "commit_id" : "9552619961049d7673f84c40917b0385be70b782",
      "created_at" : "2024-04-26T22:11:02Z",
      "diff_hunk" : "@@ -260,9 +262,12 @@ BOOST_AUTO_TEST_CASE(MempoolIndexingTest)\n     tx10.vout[0].scriptPubKey = CScript() << OP_11 << OP_EQUAL;\n     tx10.vout[0].nValue = 10 * COIN;\n \n-    ancestors_calculated = pool.CalculateMemPoolAncestors(entry.Fee(200000LL).Time(NodeSeconds{4s}).FromTx(tx10), CTxMemPool::Limits::NoLimits());\n-    BOOST_REQUIRE(ancestors_calculated);\n-    BOOST_CHECK(*ancestors_calculated == setAncestors);\n+    {\n+        auto ancestors_calculated{pool.CalculateMemPoolAncestors(entry.Fee(200000LL).Time(NodeSeconds{4s}).FromTx(tx10), CTxMemPool::Limits::NoLimits())};\n+        BOOST_REQUIRE(ancestors_calculated);\n+        BOOST_CHECK(*ancestors_calculated == setAncestors);\n+    }\n+",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29906#discussion_r1581579143",
      "id" : 1581579143,
      "in_reply_to_id" : 1580997920,
      "line" : 270,
      "node_id" : "PRRC_kwDOABII585eRPuH",
      "original_commit_id" : "e1be443315be6ba6c80267e0e6be59deee77de50",
      "original_line" : 270,
      "original_position" : 27,
      "original_start_line" : null,
      "path" : "src/test/mempool_tests.cpp",
      "position" : 27,
      "pull_request_review_id" : 2025935950,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29906",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1581579143/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-04-26T22:38:29Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1581579143",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29906#discussion_r1581579195"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29906"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1581579195"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "re: https://github.com/bitcoin/bitcoin/pull/29906#discussion_r1581409638\r\n\r\n> Can you briefly explain why these `operator=` are made private as opposed to deleting them?\r\n\r\nChanged these to `delete`. The default operators were needed in an earlier version of the PR which had an `Update()` method which called them privately.",
      "commit_id" : "9552619961049d7673f84c40917b0385be70b782",
      "created_at" : "2024-04-26T22:11:09Z",
      "diff_hunk" : "@@ -39,13 +39,25 @@ class Result\n \n     std::variant<bilingual_str, T> m_variant;\n \n+    //! Disallow copy constructor, require Result to be moved for efficiency.\n+    Result(const Result&) = delete;\n+\n+    //! Disallow operator= to avoid confusion in the future when the Result\n+    //! class gains support for richer error reporting, and callers should have\n+    //! ability to set a new result value without clearing existing error\n+    //! messages.\n+    Result& operator=(const Result&) = default;\n+    Result& operator=(Result&&) = default;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29906#discussion_r1581579195",
      "id" : 1581579195,
      "in_reply_to_id" : 1581409638,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585eRPu7",
      "original_commit_id" : "e1be443315be6ba6c80267e0e6be59deee77de50",
      "original_line" : 50,
      "original_position" : 12,
      "original_start_line" : 45,
      "path" : "src/util/result.h",
      "position" : null,
      "pull_request_review_id" : 2025935950,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29906",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1581579195/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : "RIGHT",
      "subject_type" : "line",
      "updated_at" : "2024-04-26T22:38:29Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1581579195",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29906#discussion_r1581580725"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29906"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1581580725"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "re: https://github.com/bitcoin/bitcoin/pull/29906#discussion_r1581128440\r\n\r\n> But, in any case, it's not a big deal if you don't think it's worth it. I also don't think this is a problem anyway.\r\n\r\nI'm happy to go with any suggestion. I don't see shadowing as a problem in all cases, so this is just the best way to write the code that I could think of.\r\n\r\n",
      "commit_id" : "9552619961049d7673f84c40917b0385be70b782",
      "created_at" : "2024-04-26T22:14:33Z",
      "diff_hunk" : "@@ -970,11 +971,13 @@ bool MemPoolAccept::PreChecks(ATMPArgs& args, Workspace& ws)\n         if (ws.m_vsize > EXTRA_DESCENDANT_TX_SIZE_LIMIT) {\n             return state.Invalid(TxValidationResult::TX_MEMPOOL_POLICY, \"too-long-mempool-chain\", error_message);\n         }\n-        ancestors = m_pool.CalculateMemPoolAncestors(*entry, cpfp_carve_out_limits);\n-        if (!ancestors) return state.Invalid(TxValidationResult::TX_MEMPOOL_POLICY, \"too-long-mempool-chain\", error_message);\n+        if (auto ancestors{m_pool.CalculateMemPoolAncestors(*entry, cpfp_carve_out_limits)}) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29906#discussion_r1581580725",
      "id" : 1581580725,
      "in_reply_to_id" : 1581073867,
      "line" : 974,
      "node_id" : "PRRC_kwDOABII585eRQG1",
      "original_commit_id" : "616572cbb4b5b87e7cfb2373121c5471481a868a",
      "original_line" : 974,
      "original_position" : 18,
      "original_start_line" : null,
      "path" : "src/validation.cpp",
      "position" : 18,
      "pull_request_review_id" : 2025935950,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29906",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1581580725/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-04-26T22:38:29Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1581580725",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29906#discussion_r1581580768"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29906"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1581580768"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "re: https://github.com/bitcoin/bitcoin/pull/29906#discussion_r1581039091\r\n\r\n> nit: Is this line needed?\r\n\r\nNope, dropped this",
      "commit_id" : "9552619961049d7673f84c40917b0385be70b782",
      "created_at" : "2024-04-26T22:14:39Z",
      "diff_hunk" : "@@ -106,13 +106,12 @@ struct FuzzedWallet {\n     CTxDestination GetDestination(FuzzedDataProvider& fuzzed_data_provider)\n     {\n         auto type{fuzzed_data_provider.PickValueInArray(OUTPUT_TYPES)};\n-        util::Result<CTxDestination> op_dest{util::Error{}};\n         if (fuzzed_data_provider.ConsumeBool()) {\n-            op_dest = wallet->GetNewDestination(type, \"\");\n+            return *Assert(wallet->GetNewDestination(type, \"\"));\n         } else {\n-            op_dest = wallet->GetNewChangeDestination(type);\n+            return *Assert(wallet->GetNewChangeDestination(type));\n         }\n-        return *Assert(op_dest);\n+        assert(false);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29906#discussion_r1581580768",
      "id" : 1581580768,
      "in_reply_to_id" : 1581039091,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585eRQHg",
      "original_commit_id" : "e1be443315be6ba6c80267e0e6be59deee77de50",
      "original_line" : 114,
      "original_position" : 13,
      "original_start_line" : null,
      "path" : "src/wallet/test/fuzz/notifications.cpp",
      "position" : null,
      "pull_request_review_id" : 2025935950,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29906",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1581580768/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-04-26T22:38:29Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1581580768",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Re-ACK 9552619961049d7673f84c40917b0385be70b782 , just addressing nits, no other changes",
      "created_at" : "2024-04-27T14:12:24Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29906#issuecomment-2080752984",
      "id" : 2080752984,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/29906",
      "node_id" : "IC_kwDOABII5858BcVY",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2080752984/reactions"
      },
      "updated_at" : "2024-04-27T14:12:24Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2080752984",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/69010457?v=4",
         "events_url" : "https://api.github.com/users/stickies-v/events{/privacy}",
         "followers_url" : "https://api.github.com/users/stickies-v/followers",
         "following_url" : "https://api.github.com/users/stickies-v/following{/other_user}",
         "gists_url" : "https://api.github.com/users/stickies-v/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/stickies-v",
         "id" : 69010457,
         "login" : "stickies-v",
         "node_id" : "MDQ6VXNlcjY5MDEwNDU3",
         "organizations_url" : "https://api.github.com/users/stickies-v/orgs",
         "received_events_url" : "https://api.github.com/users/stickies-v/received_events",
         "repos_url" : "https://api.github.com/users/stickies-v/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/stickies-v/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/stickies-v/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/stickies-v"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29906#discussion_r1584914512"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29906"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1584914512"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "re: https://github.com/bitcoin/bitcoin/pull/29906#discussion_r1581580725\r\n\r\n> I'm happy to go with any suggestion. I don't see shadowing as a problem in all cases, so this is just the best way to write the code that I could think of.\r\n\r\nNot sure why I couldn't think of a good way to write this without shadowing last week. But added `_retry` suffixes now so the code should be clearer and shadowing should be gone :sunglasses: ",
      "commit_id" : "6a8b2befeab25e4e92d8e947a23e78014695e06c",
      "created_at" : "2024-04-30T14:19:30Z",
      "diff_hunk" : "@@ -970,11 +971,13 @@ bool MemPoolAccept::PreChecks(ATMPArgs& args, Workspace& ws)\n         if (ws.m_vsize > EXTRA_DESCENDANT_TX_SIZE_LIMIT) {\n             return state.Invalid(TxValidationResult::TX_MEMPOOL_POLICY, \"too-long-mempool-chain\", error_message);\n         }\n-        ancestors = m_pool.CalculateMemPoolAncestors(*entry, cpfp_carve_out_limits);\n-        if (!ancestors) return state.Invalid(TxValidationResult::TX_MEMPOOL_POLICY, \"too-long-mempool-chain\", error_message);\n+        if (auto ancestors{m_pool.CalculateMemPoolAncestors(*entry, cpfp_carve_out_limits)}) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29906#discussion_r1584914512",
      "id" : 1584914512,
      "in_reply_to_id" : 1581073867,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585ed-BQ",
      "original_commit_id" : "616572cbb4b5b87e7cfb2373121c5471481a868a",
      "original_line" : 974,
      "original_position" : 18,
      "original_start_line" : null,
      "path" : "src/validation.cpp",
      "position" : null,
      "pull_request_review_id" : 2031518836,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29906",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 1,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1584914512/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-04-30T14:23:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1584914512",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "re-ACK 6a8b2befeab25e4e92d8e947a23e78014695e06c",
      "created_at" : "2024-04-30T14:54:53Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29906#issuecomment-2085563710",
      "id" : 2085563710,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/29906",
      "node_id" : "IC_kwDOABII5858Ty0-",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2085563710/reactions"
      },
      "updated_at" : "2024-04-30T14:54:53Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2085563710",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/69010457?v=4",
         "events_url" : "https://api.github.com/users/stickies-v/events{/privacy}",
         "followers_url" : "https://api.github.com/users/stickies-v/followers",
         "following_url" : "https://api.github.com/users/stickies-v/following{/other_user}",
         "gists_url" : "https://api.github.com/users/stickies-v/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/stickies-v",
         "id" : 69010457,
         "login" : "stickies-v",
         "node_id" : "MDQ6VXNlcjY5MDEwNDU3",
         "organizations_url" : "https://api.github.com/users/stickies-v/orgs",
         "received_events_url" : "https://api.github.com/users/stickies-v/received_events",
         "repos_url" : "https://api.github.com/users/stickies-v/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/stickies-v/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/stickies-v/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/stickies-v"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "ACK 6a8b2befeab25e4e92d8e947a23e78014695e06c",
      "created_at" : "2024-04-30T16:04:55Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29906#issuecomment-2085790704",
      "id" : 2085790704,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/29906",
      "node_id" : "IC_kwDOABII5858UqPw",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2085790704/reactions"
      },
      "updated_at" : "2024-04-30T16:04:55Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2085790704",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "node_id" : "MDQ6VXNlcjM3ODIyNzQ=",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   }
]
