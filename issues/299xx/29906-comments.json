[
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29906#discussion_r1572632242"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29906"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1572632242"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "nit: Any reason not to just wrap the args in `std::move`? Seems like the more intuitive approach, and probably slightly more performant?\r\n\r\n```suggestion\r\n    std::vector<util::Result<SelectionResult>> results {\r\n        std::move(result_srd), std::move(result_knapsack), std::move(result_bnb)\r\n    };\r\n```",
      "commit_id" : "974b16b2580f4f09c8936fbead96fdbee637cb14",
      "created_at" : "2024-04-19T16:27:18Z",
      "diff_hunk" : "@@ -291,7 +291,10 @@ FUZZ_TARGET(coinselection)\n     }\n \n     std::vector<COutput> utxos;\n-    std::vector<util::Result<SelectionResult>> results{result_srd, result_knapsack, result_bnb};\n+    std::vector<util::Result<SelectionResult>> results;\n+    results.emplace_back(std::move(result_srd));\n+    results.emplace_back(std::move(result_knapsack));\n+    results.emplace_back(std::move(result_bnb));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29906#discussion_r1572632242",
      "id" : 1572632242,
      "line" : 297,
      "node_id" : "PRRC_kwDOABII585dvHay",
      "original_commit_id" : "974b16b2580f4f09c8936fbead96fdbee637cb14",
      "original_line" : 297,
      "original_position" : 8,
      "original_start_line" : 294,
      "path" : "src/wallet/test/fuzz/coinselection.cpp",
      "position" : 8,
      "pull_request_review_id" : 2011883406,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29906",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1572632242/reactions"
      },
      "side" : "RIGHT",
      "start_line" : 294,
      "start_side" : "RIGHT",
      "subject_type" : "line",
      "updated_at" : "2024-04-19T17:03:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1572632242",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/69010457?v=4",
         "events_url" : "https://api.github.com/users/stickies-v/events{/privacy}",
         "followers_url" : "https://api.github.com/users/stickies-v/followers",
         "following_url" : "https://api.github.com/users/stickies-v/following{/other_user}",
         "gists_url" : "https://api.github.com/users/stickies-v/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/stickies-v",
         "id" : 69010457,
         "login" : "stickies-v",
         "node_id" : "MDQ6VXNlcjY5MDEwNDU3",
         "organizations_url" : "https://api.github.com/users/stickies-v/orgs",
         "received_events_url" : "https://api.github.com/users/stickies-v/received_events",
         "repos_url" : "https://api.github.com/users/stickies-v/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/stickies-v/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/stickies-v/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/stickies-v"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29906#discussion_r1572639146"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29906"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1572639146"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "nit: nice, but maybe best to clean up all 3 instances in one go?\r\n\r\n<details>\r\n<summary>git diff on 974b16b258</summary>\r\n\r\n```diff\r\ndiff --git a/src/wallet/spend.cpp b/src/wallet/spend.cpp\r\nindex 8b62cddb02..9a7e166e68 100644\r\n--- a/src/wallet/spend.cpp\r\n+++ b/src/wallet/spend.cpp\r\n@@ -868,7 +868,7 @@ util::Result<SelectionResult> AutomaticCoinSelection(const CWallet& wallet, Coin\r\n             if (total_amount + total_unconf_long_chain > value_to_select) {\r\n                 return util::Error{_(\"Unconfirmed UTXOs are available, but spending them creates a chain of transactions that will be rejected by the mempool\")};\r\n             }\r\n-            return util::Result<SelectionResult>(util::Error()); // General \"Insufficient Funds\"\r\n+            return util::Error{}; // General \"Insufficient Funds\"\r\n         }\r\n \r\n         // Walk-through the filters until the solution gets found.\r\n@@ -894,7 +894,7 @@ util::Result<SelectionResult> AutomaticCoinSelection(const CWallet& wallet, Coin\r\n \r\n \r\n         // General \"Insufficient Funds\"\r\n-        return util::Result<SelectionResult>(util::Error());\r\n+        return util::Error{};\r\n     }\r\n }\r\n \r\n\r\n```\r\n</details>\r\n",
      "commit_id" : "974b16b2580f4f09c8936fbead96fdbee637cb14",
      "created_at" : "2024-04-19T16:34:09Z",
      "diff_hunk" : "@@ -866,7 +866,7 @@ util::Result<SelectionResult> AutomaticCoinSelection(const CWallet& wallet, Coin\n         if (CAmount total_amount = available_coins.GetTotalAmount() - total_discarded < value_to_select) {\n             // Special case, too-long-mempool cluster.\n             if (total_amount + total_unconf_long_chain > value_to_select) {\n-                return util::Result<SelectionResult>({_(\"Unconfirmed UTXOs are available, but spending them creates a chain of transactions that will be rejected by the mempool\")});\n+                return util::Error{_(\"Unconfirmed UTXOs are available, but spending them creates a chain of transactions that will be rejected by the mempool\")};",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29906#discussion_r1572639146",
      "id" : 1572639146,
      "line" : 869,
      "node_id" : "PRRC_kwDOABII585dvJGq",
      "original_commit_id" : "974b16b2580f4f09c8936fbead96fdbee637cb14",
      "original_line" : 869,
      "original_position" : 67,
      "original_start_line" : null,
      "path" : "src/wallet/spend.cpp",
      "position" : 67,
      "pull_request_review_id" : 2011883406,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29906",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1572639146/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-04-19T17:03:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1572639146",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/69010457?v=4",
         "events_url" : "https://api.github.com/users/stickies-v/events{/privacy}",
         "followers_url" : "https://api.github.com/users/stickies-v/followers",
         "following_url" : "https://api.github.com/users/stickies-v/following{/other_user}",
         "gists_url" : "https://api.github.com/users/stickies-v/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/stickies-v",
         "id" : 69010457,
         "login" : "stickies-v",
         "node_id" : "MDQ6VXNlcjY5MDEwNDU3",
         "organizations_url" : "https://api.github.com/users/stickies-v/orgs",
         "received_events_url" : "https://api.github.com/users/stickies-v/received_events",
         "repos_url" : "https://api.github.com/users/stickies-v/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/stickies-v/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/stickies-v/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/stickies-v"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29906#discussion_r1572648440"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29906"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1572648440"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "`Update` is a bit of an ambiguous name imo, it doesn't clearly indicate if it means replacing or merging into the existing result. I think for this commit, where we can only overwrite the existing result, I think `Replace` would be better. For the next commits in #25665 where we actually add the merging functionality, I think `Merge` or `Combine` would be a better choice.",
      "commit_id" : "974b16b2580f4f09c8936fbead96fdbee637cb14",
      "created_at" : "2024-04-19T16:43:58Z",
      "diff_hunk" : "@@ -75,6 +85,9 @@ class Result\n     const T& operator*() const LIFETIMEBOUND { return value(); }\n     T* operator->() LIFETIMEBOUND { return &value(); }\n     T& operator*() LIFETIMEBOUND { return value(); }\n+\n+    //! Update this result by moving from another result object.\n+    Result& Update(Result&& other) LIFETIMEBOUND { return *this = std::move(other); }",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29906#discussion_r1572648440",
      "id" : 1572648440,
      "line" : 90,
      "node_id" : "PRRC_kwDOABII585dvLX4",
      "original_commit_id" : "974b16b2580f4f09c8936fbead96fdbee637cb14",
      "original_line" : 90,
      "original_position" : 30,
      "original_start_line" : null,
      "path" : "src/util/result.h",
      "position" : 30,
      "pull_request_review_id" : 2011883406,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29906",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1572648440/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-04-19T17:03:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1572648440",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/69010457?v=4",
         "events_url" : "https://api.github.com/users/stickies-v/events{/privacy}",
         "followers_url" : "https://api.github.com/users/stickies-v/followers",
         "following_url" : "https://api.github.com/users/stickies-v/following{/other_user}",
         "gists_url" : "https://api.github.com/users/stickies-v/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/stickies-v",
         "id" : 69010457,
         "login" : "stickies-v",
         "node_id" : "MDQ6VXNlcjY5MDEwNDU3",
         "organizations_url" : "https://api.github.com/users/stickies-v/orgs",
         "received_events_url" : "https://api.github.com/users/stickies-v/received_events",
         "repos_url" : "https://api.github.com/users/stickies-v/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/stickies-v/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/stickies-v/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/stickies-v"
      }
   }
]
