[
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage\nFor detailed information about the code coverage, see the [test coverage report](https://corecheck.dev/bitcoin/bitcoin/pulls/29873).\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| Concept ACK | [sdaftuar](https://github.com/bitcoin/bitcoin/pull/29873#issuecomment-2117722792) |\n| Stale ACK | [murchandamus](https://github.com/bitcoin/bitcoin/pull/29873#pullrequestreview-2066839394) |\n\nIf your review is incorrectly listed, please react with ð to this comment and the bot will ignore it on the next update.\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#29496](https://github.com/bitcoin/bitcoin/pull/29496) (policy: bump TX_MAX_STANDARD_VERSION to 3 by glozow)\n* [#29325](https://github.com/bitcoin/bitcoin/pull/29325) (consensus: Store transaction nVersion as uint32_t by achow101)\n* [#28676](https://github.com/bitcoin/bitcoin/pull/28676) ([WIP] Cluster mempool implementation by sdaftuar)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.\n",
      "created_at" : "2024-04-15T11:19:27Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29873#issuecomment-2056585462",
      "id" : 2056585462,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/29873",
      "node_id" : "IC_kwDOABII5856lQD2",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2056585462/reactions"
      },
      "updated_at" : "2024-05-21T14:07:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2056585462",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "cc @sdaftuar @instagibbs @t-bast ",
      "created_at" : "2024-04-15T11:20:11Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29873#issuecomment-2056586768",
      "id" : 2056586768,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/29873",
      "node_id" : "IC_kwDOABII5856lQYQ",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2056586768/reactions"
      },
      "updated_at" : "2024-04-15T11:20:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2056586768",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/25183001?v=4",
         "events_url" : "https://api.github.com/users/glozow/events{/privacy}",
         "followers_url" : "https://api.github.com/users/glozow/followers",
         "following_url" : "https://api.github.com/users/glozow/following{/other_user}",
         "gists_url" : "https://api.github.com/users/glozow/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/glozow",
         "id" : 25183001,
         "login" : "glozow",
         "node_id" : "MDQ6VXNlcjI1MTgzMDAx",
         "organizations_url" : "https://api.github.com/users/glozow/orgs",
         "received_events_url" : "https://api.github.com/users/glozow/received_events",
         "repos_url" : "https://api.github.com/users/glozow/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/glozow/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/glozow/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/glozow"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> Would this make things {broken, inconvenient} for potential users of TRUCs, e.g. by requiring swapping between v3 and v2?\r\n\r\nwithout focusing too much on the LN use-case, anytime you wanted to use something larger, you'd have to make sure you do so, f.e. when sweeping a max size commitment tx with penalty path. Basically you'll have to check if your tx is larger than 25k and switch if so.",
      "created_at" : "2024-04-15T13:54:31Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29873#issuecomment-2056921899",
      "id" : 2056921899,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/29873",
      "node_id" : "IC_kwDOABII5856miMr",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2056921899/reactions"
      },
      "updated_at" : "2024-04-15T13:54:31Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2056921899",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5767891?v=4",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "node_id" : "MDQ6VXNlcjU3Njc4OTE=",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> Would this make things {broken, inconvenient} for potential users of TRUCs, e.g. by requiring swapping between v3 and v2?\r\n\r\nJust wanted to add -- I think the case I expect more often would be that users would just create multiple transactions if they had a need to construct a transaction greater than 25kvb (similar to what I think everyone must do today to work around the current 100kvb standardness limit).\r\n\r\nThe additional transaction overhead from constructing four 25kvb transactions instead of one 100kvb transaction seems quite small, so if there's not some clear need for 100kvb transactions I think this would be great to try.  Maybe in the long run the network moves towards a lower cap on transaction sizes and this can be a way to test the waters; on the other hand, if we get this wrong and there is demand for bigger TRUC transactions for some use case, we can always relax the limit later if we need to.",
      "created_at" : "2024-04-15T19:39:15Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29873#issuecomment-2057668820",
      "id" : 2057668820,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/29873",
      "node_id" : "IC_kwDOABII5856pYjU",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2057668820/reactions"
      },
      "updated_at" : "2024-04-15T19:39:15Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2057668820",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7463573?v=4",
         "events_url" : "https://api.github.com/users/sdaftuar/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sdaftuar/followers",
         "following_url" : "https://api.github.com/users/sdaftuar/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sdaftuar/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sdaftuar",
         "id" : 7463573,
         "login" : "sdaftuar",
         "node_id" : "MDQ6VXNlcjc0NjM1NzM=",
         "organizations_url" : "https://api.github.com/users/sdaftuar/orgs",
         "received_events_url" : "https://api.github.com/users/sdaftuar/received_events",
         "repos_url" : "https://api.github.com/users/sdaftuar/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sdaftuar/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sdaftuar/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sdaftuar"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> [Expected size of a commitment transaction](https://github.com/lightning/bolts/blob/master/03-transactions.md#expected-weight-of-the-commitment-transaction) is within (900 + 172 * 483 + 224) / 4 = 21050vB\r\n\r\nCheck BOLT2âs `max_accepted_htlcs`, itâs 483 HTLC outputs in both directions (inbounds / outbounds), so 25k virtual bytes doesnât work (even if LN implems use more conservative limits in practice, theyâre exposed to lightning node operators).\r\n\r\n> Would this make things {broken, inconvenient} for potential users of TRUCs, e.g. by requiring swapping between v3 and v2?\r\n\r\nWhat is / are TRUCs ?",
      "created_at" : "2024-04-16T01:49:34Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29873#issuecomment-2058091748",
      "id" : 2058091748,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/29873",
      "node_id" : "IC_kwDOABII5856q_zk",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2058091748/reactions"
      },
      "updated_at" : "2024-04-16T01:49:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2058091748",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/23310655?v=4",
         "events_url" : "https://api.github.com/users/ariard/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ariard/followers",
         "following_url" : "https://api.github.com/users/ariard/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ariard/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ariard",
         "id" : 23310655,
         "login" : "ariard",
         "node_id" : "MDQ6VXNlcjIzMzEwNjU1",
         "organizations_url" : "https://api.github.com/users/ariard/orgs",
         "received_events_url" : "https://api.github.com/users/ariard/received_events",
         "repos_url" : "https://api.github.com/users/ariard/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ariard/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ariard/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ariard"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Ah so (900 + 172 * 483 * 2 + 224) / 4 = 41819vB?\r\n\r\nSo maybe a better number is 42KvB or 50KvB.",
      "created_at" : "2024-04-16T15:18:37Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29873#issuecomment-2059346502",
      "id" : 2059346502,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/29873",
      "node_id" : "IC_kwDOABII5856vyJG",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2059346502/reactions"
      },
      "updated_at" : "2024-04-16T15:18:37Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2059346502",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/25183001?v=4",
         "events_url" : "https://api.github.com/users/glozow/events{/privacy}",
         "followers_url" : "https://api.github.com/users/glozow/followers",
         "following_url" : "https://api.github.com/users/glozow/following{/other_user}",
         "gists_url" : "https://api.github.com/users/glozow/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/glozow",
         "id" : 25183001,
         "login" : "glozow",
         "node_id" : "MDQ6VXNlcjI1MTgzMDAx",
         "organizations_url" : "https://api.github.com/users/glozow/orgs",
         "received_events_url" : "https://api.github.com/users/glozow/received_events",
         "repos_url" : "https://api.github.com/users/glozow/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/glozow/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/glozow/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/glozow"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> Ah so (900 + 172 * 483 * 2 + 224) / 4 = 41819vB?\r\n\r\nThat's correct, that is the maximum size of a commitment transaction today.\r\n\r\nThis size was chosen to ensure that signatures for all HTLCs could be transmitted in a single 65kB lightning p2p message. But we will likely need to transmit more data when we support PTLCs, which means we'll probably reduce the maximum number of allowed PTLCs (IIRC we'll have to divide the current limits roughly by two). That would reduce the maximum size of a commitment transaction, which is IMO a good thing and would likely work with your proposed maximum of 25KvB!\r\n\r\nRegardless of that, I think you shouldn't care about the size of today's lightning transactions: whenever we start using TRUCs, we can cut down the maximum number of allowed HTLCs to ensure that the transaction size stays below 25KvB. Lightning should adapt to what's best for bitcoin more generally, and I agree that smaller transactions are desirable.",
      "created_at" : "2024-04-17T15:01:56Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29873#issuecomment-2061480170",
      "id" : 2061480170,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/29873",
      "node_id" : "IC_kwDOABII585637Dq",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2061480170/reactions"
      },
      "updated_at" : "2024-04-17T15:01:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2061480170",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/31281497?v=4",
         "events_url" : "https://api.github.com/users/t-bast/events{/privacy}",
         "followers_url" : "https://api.github.com/users/t-bast/followers",
         "following_url" : "https://api.github.com/users/t-bast/following{/other_user}",
         "gists_url" : "https://api.github.com/users/t-bast/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/t-bast",
         "id" : 31281497,
         "login" : "t-bast",
         "node_id" : "MDQ6VXNlcjMxMjgxNDk3",
         "organizations_url" : "https://api.github.com/users/t-bast/orgs",
         "received_events_url" : "https://api.github.com/users/t-bast/received_events",
         "repos_url" : "https://api.github.com/users/t-bast/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/t-bast/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/t-bast/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/t-bast"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> So maybe a better number is 42KvB or 50KvB.\r\n\r\nYes, donât forget the 2 * for anchor outputs.\r\n\r\n> Regardless of that, I think you shouldn't care about the size of today's lightning transactions: whenever we start using TRUCs,\r\n\r\nStill, what are TRUCs ? Do you have documentation ?\r\n",
      "created_at" : "2024-04-17T15:02:58Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29873#issuecomment-2061482383",
      "id" : 2061482383,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/29873",
      "node_id" : "IC_kwDOABII585637mP",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2061482383/reactions"
      },
      "updated_at" : "2024-04-17T15:02:58Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2061482383",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/23310655?v=4",
         "events_url" : "https://api.github.com/users/ariard/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ariard/followers",
         "following_url" : "https://api.github.com/users/ariard/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ariard/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ariard",
         "id" : 23310655,
         "login" : "ariard",
         "node_id" : "MDQ6VXNlcjIzMzEwNjU1",
         "organizations_url" : "https://api.github.com/users/ariard/orgs",
         "received_events_url" : "https://api.github.com/users/ariard/received_events",
         "repos_url" : "https://api.github.com/users/ariard/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ariard/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ariard/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ariard"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> Still, what are TRUCs ? Do you have documentation ?\r\n\r\nTRUC = Topologically Restricted Until Confirmation, see https://github.com/bitcoin/bips/pull/1541",
      "created_at" : "2024-04-22T21:22:06Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29873#issuecomment-2070974638",
      "id" : 2070974638,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/29873",
      "node_id" : "IC_kwDOABII5857cJCu",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2070974638/reactions"
      },
      "updated_at" : "2024-04-22T21:22:06Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2070974638",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/23310655?v=4",
         "events_url" : "https://api.github.com/users/ariard/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ariard/followers",
         "following_url" : "https://api.github.com/users/ariard/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ariard/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ariard",
         "id" : 23310655,
         "login" : "ariard",
         "node_id" : "MDQ6VXNlcjIzMzEwNjU1",
         "organizations_url" : "https://api.github.com/users/ariard/orgs",
         "received_events_url" : "https://api.github.com/users/ariard/received_events",
         "repos_url" : "https://api.github.com/users/ariard/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ariard/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ariard/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ariard"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> Would this make things {broken, inconvenient} for potential users of TRUCs, e.g. by requiring swapping between v3 and v2?\r\n\r\nFor historical lightning channel who have already negotiated parameters above `max_accepted_htlcs` + witness spend size of legacy channel types. i.e anything before `option_anchors_zero_fee_htlc_tx`, I think. Legacy v2 commitment transactions are already opting to RBF, so shall be able to be replaced by v3. This is unclear for the splicing flow, where a counterparty could malleate one of the v2 transaction flow above v3 `MAX_STANDARD_TX_WEIGHT` (no guarantee that one counterparty contributes at least one input and as such sign the splice-in/out).\r\n\r\n> Is this useful for pinning, given that there are already tighter limits on commitment tx size through max_accepted_htlcs?\r\n\r\nYes if you have sane negotiated `max_accepted_htlcs` with your channel counterparties. On the other hand, you have a trade-off with off-chain HTLCs per-channel throughput (only considering non-dust HTLCs) as they wonât materialize on the commitment transaction. In practice, I think itâs really rare when LN nodes are reaching a concurrent `max_accepted_htlcs` of ~10/20 per-channel. It might be better to have a constraining `MAX_STANDARD_TX_WEIGHT` and have them open more pinning relatively hardened channels to scale their off-chain payment throughput (of course, it incentivizes LN nodes to occupy more space in the UTXO setâ¦trade-offs).",
      "created_at" : "2024-05-02T01:38:56Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29873#issuecomment-2089386661",
      "id" : 2089386661,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/29873",
      "node_id" : "IC_kwDOABII5858iYKl",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2089386661/reactions"
      },
      "updated_at" : "2024-05-02T01:38:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2089386661",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/23310655?v=4",
         "events_url" : "https://api.github.com/users/ariard/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ariard/followers",
         "following_url" : "https://api.github.com/users/ariard/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ariard/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ariard",
         "id" : 23310655,
         "login" : "ariard",
         "node_id" : "MDQ6VXNlcjIzMzEwNjU1",
         "organizations_url" : "https://api.github.com/users/ariard/orgs",
         "received_events_url" : "https://api.github.com/users/ariard/received_events",
         "repos_url" : "https://api.github.com/users/ariard/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ariard/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ariard/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ariard"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "I think the 100kB value for transaction relay was adopted as follows:\r\n\r\n * 2010-09-13 In 3df62878c3c satoshi added a 100kB (`MAX_BLOCK_SIZE_GEN/5` with `MBS_GEN = MAX_BLOCK_SIZE/2`) limit on new transactions in `CreateTransaction()`\r\n * 2013-02-04 #2273 In gavin gave that constant a name, and made it apply to transaction relay as well\r\n\r\nSo I don't think there was any deep thought put into that figure. 25kvB sounds fine to me.\r\n\r\nGiven the suggestion in the OP that it's easier to increase the value than decrease it, I'm tempted to suggest it should initially be as small as possible, perhaps as low as 10kvB? However I think increasing it is also likely to be hard in practice -- if someone designs their protocol assuming an attacker can only attach 9.9kvB of garbage to their 100vB tx, then suddenly finding out that an attacker can actually attach 24.9kvB of garbage instead might cause them unexpected problems (\"now I have to pay 2.5x as much as I'd planned??\") which might break software that had been designed based on the initial parameters.",
      "created_at" : "2024-05-16T14:50:01Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29873#issuecomment-2115459510",
      "id" : 2115459510,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/29873",
      "node_id" : "IC_kwDOABII585-F1m2",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 2,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 2,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2115459510/reactions"
      },
      "updated_at" : "2024-05-16T14:50:01Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2115459510",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/127186?v=4",
         "events_url" : "https://api.github.com/users/ajtowns/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ajtowns/followers",
         "following_url" : "https://api.github.com/users/ajtowns/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ajtowns/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ajtowns",
         "id" : 127186,
         "login" : "ajtowns",
         "node_id" : "MDQ6VXNlcjEyNzE4Ng==",
         "organizations_url" : "https://api.github.com/users/ajtowns/orgs",
         "received_events_url" : "https://api.github.com/users/ajtowns/received_events",
         "repos_url" : "https://api.github.com/users/ajtowns/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ajtowns/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ajtowns/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ajtowns"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "From a more general wallet perspective if we're assuming ~110vbytes of overhead per additional transaction required to match an input/output set, picking 10kvB as the new limit vs 100kvB results in 10*110=1,100vb, or ~1% additional overhead vs 100kvB. At 5kvB you'd be receiving ~2% penalty, and so on.\r\n\r\nFWIW 10kvB also seems like plenty of headroom for practical LN channels with >60-HTLCs-per-direction, but below today's spec limit.\r\n\r\n",
      "created_at" : "2024-05-16T15:59:08Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29873#issuecomment-2115624871",
      "id" : 2115624871,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/29873",
      "node_id" : "IC_kwDOABII585-Gd-n",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2115624871/reactions"
      },
      "updated_at" : "2024-05-16T15:59:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2115624871",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5767891?v=4",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "node_id" : "MDQ6VXNlcjU3Njc4OTE=",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "I've changed the limit to 10KvB. This means the maximum v3 package vsize is 11KvB.\r\n\r\nThe `test_nondefault_package_limits` descendant limit test hit a snag (CPFP carve out grants a free +10kvB which makes it impossible to make a descendant limit stricter than 11KvB), so I added a commit to explicitly disable CPFP carve out for v3. This change should be fine since CPFP carveout's intended purpose clearly doesn't apply in the v3 world. Alternatively we can delete this test, but it felt weird that v3 could benefit from CPFP carve out.",
      "created_at" : "2024-05-17T12:41:41Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29873#issuecomment-2117516628",
      "id" : 2117516628,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/29873",
      "node_id" : "IC_kwDOABII585-Nr1U",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2117516628/reactions"
      },
      "updated_at" : "2024-05-17T12:41:41Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2117516628",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/25183001?v=4",
         "events_url" : "https://api.github.com/users/glozow/events{/privacy}",
         "followers_url" : "https://api.github.com/users/glozow/followers",
         "following_url" : "https://api.github.com/users/glozow/following{/other_user}",
         "gists_url" : "https://api.github.com/users/glozow/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/glozow",
         "id" : 25183001,
         "login" : "glozow",
         "node_id" : "MDQ6VXNlcjI1MTgzMDAx",
         "organizations_url" : "https://api.github.com/users/glozow/orgs",
         "received_events_url" : "https://api.github.com/users/glozow/received_events",
         "repos_url" : "https://api.github.com/users/glozow/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/glozow/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/glozow/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/glozow"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29873#discussion_r1605019621"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29873"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1605019621"
         }
      },
      "author_association" : "MEMBER",
      "body" : "probably can assert this in the fuzz target?",
      "commit_id" : "1d95eee9ebfa17dee3c9cf60fea1c28a2cf5d8b5",
      "created_at" : "2024-05-17T13:37:35Z",
      "diff_hunk" : "@@ -24,11 +24,13 @@ static constexpr unsigned int V3_DESCENDANT_LIMIT{2};\n /** Maximum number of transactions including a V3 tx and all its mempool ancestors. */\n static constexpr unsigned int V3_ANCESTOR_LIMIT{2};\n \n+/** Maximum sigop-adjusted virtual size of all v3 transactions. */\n+static constexpr int64_t V3_MAX_VSIZE{10000};",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29873#discussion_r1605019621",
      "id" : 1605019621,
      "line" : 28,
      "node_id" : "PRRC_kwDOABII585fqqfl",
      "original_commit_id" : "1d95eee9ebfa17dee3c9cf60fea1c28a2cf5d8b5",
      "original_line" : 28,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "src/policy/v3_policy.h",
      "position" : 5,
      "pull_request_review_id" : 2063449877,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29873",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1605019621/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-05-17T13:37:36Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1605019621",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5767891?v=4",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "node_id" : "MDQ6VXNlcjU3Njc4OTE=",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Concept ACK making it 10kvb.  Assuming we stick with that, then the commit message in the second commit should be updated (https://github.com/bitcoin/bitcoin/commit/1d95eee9ebfa17dee3c9cf60fea1c28a2cf5d8b5).",
      "created_at" : "2024-05-17T14:22:00Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29873#issuecomment-2117722792",
      "id" : 2117722792,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/29873",
      "node_id" : "IC_kwDOABII585-OeKo",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2117722792/reactions"
      },
      "updated_at" : "2024-05-17T14:22:00Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2117722792",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7463573?v=4",
         "events_url" : "https://api.github.com/users/sdaftuar/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sdaftuar/followers",
         "following_url" : "https://api.github.com/users/sdaftuar/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sdaftuar/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sdaftuar",
         "id" : 7463573,
         "login" : "sdaftuar",
         "node_id" : "MDQ6VXNlcjc0NjM1NzM=",
         "organizations_url" : "https://api.github.com/users/sdaftuar/orgs",
         "received_events_url" : "https://api.github.com/users/sdaftuar/received_events",
         "repos_url" : "https://api.github.com/users/sdaftuar/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sdaftuar/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sdaftuar/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sdaftuar"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "I think 10kvb is okay as a limit though pray for someone telling it more to LN folks.\r\n\r\nThere is very likely 2018 / 2019 channels open with `max_accepted_htlcs` at max 483 both-sides. With no dynamic upgrades deployed, no way to restraint, without force-close and re-open. Worst than pinning exposure is no propagating TRUC transaction due to ânaiveâ upgrade.\r\n\r\nIn the (far) future, 10kvb could be dynamic at the transaction-relay level, though this would assume LN upgrading its channel policy settings first to have something like `max_package_kvb` (or WU) to be of any practical benefit (still modulo all other safety considerations).",
      "created_at" : "2024-05-17T23:33:41Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29873#issuecomment-2118488640",
      "id" : 2118488640,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/29873",
      "node_id" : "IC_kwDOABII585-RZJA",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2118488640/reactions"
      },
      "updated_at" : "2024-05-17T23:33:41Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2118488640",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/23310655?v=4",
         "events_url" : "https://api.github.com/users/ariard/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ariard/followers",
         "following_url" : "https://api.github.com/users/ariard/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ariard/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ariard",
         "id" : 23310655,
         "login" : "ariard",
         "node_id" : "MDQ6VXNlcjIzMzEwNjU1",
         "organizations_url" : "https://api.github.com/users/ariard/orgs",
         "received_events_url" : "https://api.github.com/users/ariard/received_events",
         "repos_url" : "https://api.github.com/users/ariard/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ariard/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ariard/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ariard"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29873#discussion_r1606540111"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29873"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1606540111"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Added. Ran fuzzer for a bit, seems happy",
      "commit_id" : "0583aeef4f2b09f35547f95f1fe21dc14738b65d",
      "created_at" : "2024-05-20T10:00:19Z",
      "diff_hunk" : "@@ -24,11 +24,13 @@ static constexpr unsigned int V3_DESCENDANT_LIMIT{2};\n /** Maximum number of transactions including a V3 tx and all its mempool ancestors. */\n static constexpr unsigned int V3_ANCESTOR_LIMIT{2};\n \n+/** Maximum sigop-adjusted virtual size of all v3 transactions. */\n+static constexpr int64_t V3_MAX_VSIZE{10000};",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29873#discussion_r1606540111",
      "id" : 1606540111,
      "in_reply_to_id" : 1605019621,
      "line" : 28,
      "node_id" : "PRRC_kwDOABII585fwdtP",
      "original_commit_id" : "1d95eee9ebfa17dee3c9cf60fea1c28a2cf5d8b5",
      "original_line" : 28,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "src/policy/v3_policy.h",
      "position" : 5,
      "pull_request_review_id" : 2065844531,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29873",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1606540111/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-05-20T10:00:31Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1606540111",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/25183001?v=4",
         "events_url" : "https://api.github.com/users/glozow/events{/privacy}",
         "followers_url" : "https://api.github.com/users/glozow/followers",
         "following_url" : "https://api.github.com/users/glozow/following{/other_user}",
         "gists_url" : "https://api.github.com/users/glozow/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/glozow",
         "id" : 25183001,
         "login" : "glozow",
         "node_id" : "MDQ6VXNlcjI1MTgzMDAx",
         "organizations_url" : "https://api.github.com/users/glozow/orgs",
         "received_events_url" : "https://api.github.com/users/glozow/received_events",
         "repos_url" : "https://api.github.com/users/glozow/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/glozow/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/glozow/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/glozow"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Concept ACK on making the TRUC transaction vsize limit 10 kvB.",
      "created_at" : "2024-05-20T19:03:43Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29873#issuecomment-2121032237",
      "id" : 2121032237,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/29873",
      "node_id" : "IC_kwDOABII585-bGIt",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2121032237/reactions"
      },
      "updated_at" : "2024-05-20T19:03:43Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2121032237",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/4060799?v=4",
         "events_url" : "https://api.github.com/users/murchandamus/events{/privacy}",
         "followers_url" : "https://api.github.com/users/murchandamus/followers",
         "following_url" : "https://api.github.com/users/murchandamus/following{/other_user}",
         "gists_url" : "https://api.github.com/users/murchandamus/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/murchandamus",
         "id" : 4060799,
         "login" : "murchandamus",
         "node_id" : "MDQ6VXNlcjQwNjA3OTk=",
         "organizations_url" : "https://api.github.com/users/murchandamus/orgs",
         "received_events_url" : "https://api.github.com/users/murchandamus/received_events",
         "repos_url" : "https://api.github.com/users/murchandamus/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/murchandamus/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/murchandamus/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/murchandamus"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29873#discussion_r1607161860"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29873"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1607161860"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Typo:\r\n```suggestion\r\n        // descendant limit descendants. The transaction also cannot be v3,\r\n        // as its topology restrictions do not allow a second child.\r\n```",
      "commit_id" : "0583aeef4f2b09f35547f95f1fe21dc14738b65d",
      "created_at" : "2024-05-20T19:06:24Z",
      "diff_hunk" : "@@ -953,7 +953,8 @@ bool MemPoolAccept::PreChecks(ATMPArgs& args, Workspace& ws)\n         // If the new transaction is relatively small (up to 40k weight)\n         // and has at most one ancestor (ie ancestor limit of 2, including\n         // the new transaction), allow it if its parent has exactly the\n-        // descendant limit descendants.\n+        // descendant limit descendants. The transaction also cannot be v3,\n+        // as its topology resrictions do not allow a second child.",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29873#discussion_r1607161860",
      "id" : 1607161860,
      "line" : 957,
      "node_id" : "PRRC_kwDOABII585fy1gE",
      "original_commit_id" : "e3be8501e585e4af173224eb61b8053c690b34da",
      "original_line" : 957,
      "original_position" : 6,
      "original_start_line" : 956,
      "path" : "src/validation.cpp",
      "position" : 6,
      "pull_request_review_id" : 2066839394,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29873",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1607161860/reactions"
      },
      "side" : "RIGHT",
      "start_line" : 956,
      "start_side" : "RIGHT",
      "subject_type" : "line",
      "updated_at" : "2024-05-20T19:40:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1607161860",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/4060799?v=4",
         "events_url" : "https://api.github.com/users/murchandamus/events{/privacy}",
         "followers_url" : "https://api.github.com/users/murchandamus/followers",
         "following_url" : "https://api.github.com/users/murchandamus/following{/other_user}",
         "gists_url" : "https://api.github.com/users/murchandamus/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/murchandamus",
         "id" : 4060799,
         "login" : "murchandamus",
         "node_id" : "MDQ6VXNlcjQwNjA3OTk=",
         "organizations_url" : "https://api.github.com/users/murchandamus/orgs",
         "received_events_url" : "https://api.github.com/users/murchandamus/received_events",
         "repos_url" : "https://api.github.com/users/murchandamus/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/murchandamus/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/murchandamus/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/murchandamus"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29873#discussion_r1607176526"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29873"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1607176526"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "<s>I donât understand the test here. My understanding was that TRUC transactions would be generally limited to 10â¯kvB, and TRUC transactions with a parent would be limited to 1â¯kvB. It seems to me that they should together be allowed to weigh up to 11â¯kvB, so it is no clear to me why this comment reads \"but parent's descendant limit is exceeded\".</s>\r\n\r\nPerhaps clarify here in the comment that there is a custom descendant limit in play:\r\n```suggestion\r\n        # Parent and child are within v3 limits, but the reduced descendant limit is exceeded for the parent\r\n```",
      "commit_id" : "0583aeef4f2b09f35547f95f1fe21dc14738b65d",
      "created_at" : "2024-05-20T19:20:30Z",
      "diff_hunk" : "@@ -201,21 +217,47 @@ def test_nondefault_package_limits(self):\n         \"\"\"\n         node = self.nodes[0]\n         self.log.info(\"Test that a decreased limitdescendantsize also applies to v3 child\")\n-        tx_v3_parent_large1 = self.wallet.send_self_transfer(from_node=node, target_weight=99900, version=3)\n-        tx_v3_child_large1 = self.wallet.create_self_transfer(utxo_to_spend=tx_v3_parent_large1[\"new_utxo\"], version=3)\n-        # Child is within v3 limits, but parent's descendant limit is exceeded\n-        assert_greater_than(1000, tx_v3_child_large1[\"tx\"].get_vsize())\n+        parent_target_weight = 9990 * WITNESS_SCALE_FACTOR\n+        child_target_weight = 500 * WITNESS_SCALE_FACTOR\n+        tx_v3_parent_large1 = self.wallet.send_self_transfer(\n+            from_node=node,\n+            target_weight=parent_target_weight,\n+            version=3\n+        )\n+        tx_v3_child_large1 = self.wallet.create_self_transfer(\n+            utxo_to_spend=tx_v3_parent_large1[\"new_utxo\"],\n+            target_weight=child_target_weight,\n+            version=3\n+        )\n+\n+        # Parent and child are within v3 limits, but parent's descendant limit is exceeded",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29873#discussion_r1607176526",
      "id" : 1607176526,
      "line" : 233,
      "node_id" : "PRRC_kwDOABII585fy5FO",
      "original_commit_id" : "74b5e05576f8e3766ebc00aa5e1afd958c39afc4",
      "original_line" : 233,
      "original_position" : 58,
      "original_start_line" : null,
      "path" : "test/functional/mempool_accept_v3.py",
      "position" : 58,
      "pull_request_review_id" : 2066839394,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29873",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1607176526/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-05-20T19:40:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1607176526",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/4060799?v=4",
         "events_url" : "https://api.github.com/users/murchandamus/events{/privacy}",
         "followers_url" : "https://api.github.com/users/murchandamus/followers",
         "following_url" : "https://api.github.com/users/murchandamus/following{/other_user}",
         "gists_url" : "https://api.github.com/users/murchandamus/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/murchandamus",
         "id" : 4060799,
         "login" : "murchandamus",
         "node_id" : "MDQ6VXNlcjQwNjA3OTk=",
         "organizations_url" : "https://api.github.com/users/murchandamus/orgs",
         "received_events_url" : "https://api.github.com/users/murchandamus/received_events",
         "repos_url" : "https://api.github.com/users/murchandamus/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/murchandamus/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/murchandamus/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/murchandamus"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29873#discussion_r1608401645"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29873"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1608401645"
         }
      },
      "author_association" : "MEMBER",
      "body" : "done",
      "commit_id" : "154b2b2296edccb5ed24e829798dacb6195edc11",
      "created_at" : "2024-05-21T14:07:19Z",
      "diff_hunk" : "@@ -201,21 +217,47 @@ def test_nondefault_package_limits(self):\n         \"\"\"\n         node = self.nodes[0]\n         self.log.info(\"Test that a decreased limitdescendantsize also applies to v3 child\")\n-        tx_v3_parent_large1 = self.wallet.send_self_transfer(from_node=node, target_weight=99900, version=3)\n-        tx_v3_child_large1 = self.wallet.create_self_transfer(utxo_to_spend=tx_v3_parent_large1[\"new_utxo\"], version=3)\n-        # Child is within v3 limits, but parent's descendant limit is exceeded\n-        assert_greater_than(1000, tx_v3_child_large1[\"tx\"].get_vsize())\n+        parent_target_weight = 9990 * WITNESS_SCALE_FACTOR\n+        child_target_weight = 500 * WITNESS_SCALE_FACTOR\n+        tx_v3_parent_large1 = self.wallet.send_self_transfer(\n+            from_node=node,\n+            target_weight=parent_target_weight,\n+            version=3\n+        )\n+        tx_v3_child_large1 = self.wallet.create_self_transfer(\n+            utxo_to_spend=tx_v3_parent_large1[\"new_utxo\"],\n+            target_weight=child_target_weight,\n+            version=3\n+        )\n+\n+        # Parent and child are within v3 limits, but parent's descendant limit is exceeded",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29873#discussion_r1608401645",
      "id" : 1608401645,
      "in_reply_to_id" : 1607176526,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585f3kLt",
      "original_commit_id" : "74b5e05576f8e3766ebc00aa5e1afd958c39afc4",
      "original_line" : 233,
      "original_position" : 58,
      "original_start_line" : null,
      "path" : "test/functional/mempool_accept_v3.py",
      "position" : null,
      "pull_request_review_id" : 2068754725,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29873",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1608401645/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-05-21T14:07:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1608401645",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/25183001?v=4",
         "events_url" : "https://api.github.com/users/glozow/events{/privacy}",
         "followers_url" : "https://api.github.com/users/glozow/followers",
         "following_url" : "https://api.github.com/users/glozow/following{/other_user}",
         "gists_url" : "https://api.github.com/users/glozow/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/glozow",
         "id" : 25183001,
         "login" : "glozow",
         "node_id" : "MDQ6VXNlcjI1MTgzMDAx",
         "organizations_url" : "https://api.github.com/users/glozow/orgs",
         "received_events_url" : "https://api.github.com/users/glozow/received_events",
         "repos_url" : "https://api.github.com/users/glozow/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/glozow/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/glozow/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/glozow"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29873#discussion_r1608401789"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29873"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1608401789"
         }
      },
      "author_association" : "MEMBER",
      "body" : "done",
      "commit_id" : "154b2b2296edccb5ed24e829798dacb6195edc11",
      "created_at" : "2024-05-21T14:07:25Z",
      "diff_hunk" : "@@ -953,7 +953,8 @@ bool MemPoolAccept::PreChecks(ATMPArgs& args, Workspace& ws)\n         // If the new transaction is relatively small (up to 40k weight)\n         // and has at most one ancestor (ie ancestor limit of 2, including\n         // the new transaction), allow it if its parent has exactly the\n-        // descendant limit descendants.\n+        // descendant limit descendants. The transaction also cannot be v3,\n+        // as its topology resrictions do not allow a second child.",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29873#discussion_r1608401789",
      "id" : 1608401789,
      "in_reply_to_id" : 1607161860,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585f3kN9",
      "original_commit_id" : "e3be8501e585e4af173224eb61b8053c690b34da",
      "original_line" : 957,
      "original_position" : 6,
      "original_start_line" : 956,
      "path" : "src/validation.cpp",
      "position" : null,
      "pull_request_review_id" : 2068754725,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29873",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1608401789/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : "RIGHT",
      "subject_type" : "line",
      "updated_at" : "2024-05-21T14:07:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1608401789",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/25183001?v=4",
         "events_url" : "https://api.github.com/users/glozow/events{/privacy}",
         "followers_url" : "https://api.github.com/users/glozow/followers",
         "following_url" : "https://api.github.com/users/glozow/following{/other_user}",
         "gists_url" : "https://api.github.com/users/glozow/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/glozow",
         "id" : 25183001,
         "login" : "glozow",
         "node_id" : "MDQ6VXNlcjI1MTgzMDAx",
         "organizations_url" : "https://api.github.com/users/glozow/orgs",
         "received_events_url" : "https://api.github.com/users/glozow/received_events",
         "repos_url" : "https://api.github.com/users/glozow/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/glozow/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/glozow/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/glozow"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Thanks @murchandamus, addressed nits",
      "created_at" : "2024-05-21T14:08:12Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29873#issuecomment-2122725600",
      "id" : 2122725600,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/29873",
      "node_id" : "IC_kwDOABII585-hjjg",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2122725600/reactions"
      },
      "updated_at" : "2024-05-21T14:08:12Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2122725600",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/25183001?v=4",
         "events_url" : "https://api.github.com/users/glozow/events{/privacy}",
         "followers_url" : "https://api.github.com/users/glozow/followers",
         "following_url" : "https://api.github.com/users/glozow/following{/other_user}",
         "gists_url" : "https://api.github.com/users/glozow/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/glozow",
         "id" : 25183001,
         "login" : "glozow",
         "node_id" : "MDQ6VXNlcjI1MTgzMDAx",
         "organizations_url" : "https://api.github.com/users/glozow/orgs",
         "received_events_url" : "https://api.github.com/users/glozow/received_events",
         "repos_url" : "https://api.github.com/users/glozow/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/glozow/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/glozow/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/glozow"
      }
   }
]
