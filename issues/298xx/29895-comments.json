[
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage\nFor detailed information about the code coverage, see the [test coverage report](https://corecheck.dev/bitcoin/bitcoin/pulls/29895).\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| Concept ACK | [hebasto](https://github.com/bitcoin/bitcoin/pull/29895#issuecomment-2063547954), [Sjors](https://github.com/bitcoin/bitcoin/pull/29895#issuecomment-2066199026) |\n\nIf your review is incorrectly listed, please react with ð to this comment and the bot will ignore it on the next update.\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#29959](https://github.com/bitcoin/bitcoin/pull/29959) ([PoC] qt, depends: Add wayland support without build-time nor fixed run-time deps by laanwj)\n* [#29923](https://github.com/bitcoin/bitcoin/pull/29923) (depends: Remove Qt build-time dependencies by laanwj)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.\n",
      "created_at" : "2024-04-16T17:21:35Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29895#issuecomment-2059577699",
      "id" : 2059577699,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/29895",
      "node_id" : "IC_kwDOABII5856wqlj",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2059577699/reactions"
      },
      "updated_at" : "2024-04-25T10:10:12Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2059577699",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "i'm divided on this conceptually, i think with the reputation it has now, another successful attack on xz specifically is unlikely (not more likely than any other library, at least). And i'm not sure we need to go out of our way to avoid it given how much of the FOSS ecosystem relies on it.\r\n\r\nOne thing i am slightly afraid of is that in avoiding xz we become more sloppy about dependencies in other ways. Not saying that that is happening here.\r\n\r\nBut e.g. not being able to use the primary source for a project anymore like for xkbcommon is something to think about. But maybe the github-generated tarball is actually better? Unlike the bootstrapped one it shouldn't. contain any extra files besides what's in the git repo, and we can check this. After all, the xz backdoor used one of these autotools \"bonus\" files to hide in.\r\n\r\n> Putting that aside, there is a real question of if we want to consolidate all packages in depends to one type of tarball\r\n\r\nThat said i do like the elegance of having only one kind of input format for the guix builder. It's generally good to drop dependencies from guix.\r\n",
      "created_at" : "2024-04-17T05:10:51Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29895#issuecomment-2060364162",
      "id" : 2060364162,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/29895",
      "node_id" : "IC_kwDOABII5856zqmC",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2060364162/reactions"
      },
      "updated_at" : "2024-04-17T05:12:36Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2060364162",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Not sure about the benefit to make extra steps to use a possibly non-standard, possibly easier to backdoor, mirrored tarball.\r\n\r\nAn alternative might be to completely skip the step of tarballs and instead use the upstream source control directly?",
      "created_at" : "2024-04-17T06:06:12Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29895#issuecomment-2060446429",
      "id" : 2060446429,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/29895",
      "node_id" : "IC_kwDOABII5856z-rd",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2060446429/reactions"
      },
      "updated_at" : "2024-04-17T06:06:12Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2060446429",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/maflcko/events{/privacy}",
         "followers_url" : "https://api.github.com/users/maflcko/followers",
         "following_url" : "https://api.github.com/users/maflcko/following{/other_user}",
         "gists_url" : "https://api.github.com/users/maflcko/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/maflcko",
         "id" : 6399679,
         "login" : "maflcko",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/maflcko/orgs",
         "received_events_url" : "https://api.github.com/users/maflcko/received_events",
         "repos_url" : "https://api.github.com/users/maflcko/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/maflcko/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/maflcko/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/maflcko"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> And i'm not sure we need to go out of our way to avoid it given how much of the FOSS ecosystem relies on it.\r\n\r\nYea. xz was a way to start a discussion. It could turn out that we actually consolidate everything to xz, and actually drop bzip2 for example.\r\n\r\n> possibly easier to backdoor, mirrored tarball.\r\n> and instead use the upstream source control directly\r\n\r\nIf anything, I'd hope it's less easy to backdoor, because it's just the source code, and not all the bootstrapped garbage we don't need. This is using the tag from the official upstream source control.",
      "created_at" : "2024-04-17T07:50:13Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29895#issuecomment-2060615404",
      "id" : 2060615404,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/29895",
      "node_id" : "IC_kwDOABII58560n7s",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2060615404/reactions"
      },
      "updated_at" : "2024-04-17T07:50:13Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2060615404",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/863730?v=4",
         "events_url" : "https://api.github.com/users/fanquake/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fanquake/followers",
         "following_url" : "https://api.github.com/users/fanquake/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fanquake/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fanquake",
         "id" : 863730,
         "login" : "fanquake",
         "node_id" : "MDQ6VXNlcjg2MzczMA==",
         "organizations_url" : "https://api.github.com/users/fanquake/orgs",
         "received_events_url" : "https://api.github.com/users/fanquake/received_events",
         "repos_url" : "https://api.github.com/users/fanquake/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fanquake/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fanquake"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> Not sure about the benefit to make extra steps to use a possibly non-standard, possibly easier to backdoor, mirrored tarball.\r\n\r\nMind that we do verify the sha256 hash. The person introducing it has to check, once, that the tarball matches exactly what is in git (and reviewers can verify this). i don't think there's a win in making every guix buid do a git (or other scm) checkout of all dependencies. That leaves more of a network attack surface too and makes it harder to mirror safely, not easier.",
      "created_at" : "2024-04-17T07:50:26Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29895#issuecomment-2060616166",
      "id" : 2060616166,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/29895",
      "node_id" : "IC_kwDOABII58560oHm",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2060616166/reactions"
      },
      "updated_at" : "2024-04-17T07:51:36Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2060616166",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> The person introducing it has to check, once, that the tarball matches exactly what is in git (and reviewers can verify this)\r\n\r\nI think it could make sense to specifically mention this on bumps, going forward. Maybe there could even be a new target written in depends to do the check?\r\n\r\n",
      "created_at" : "2024-04-17T08:29:38Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29895#issuecomment-2060698390",
      "id" : 2060698390,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/29895",
      "node_id" : "IC_kwDOABII585608MW",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2060698390/reactions"
      },
      "updated_at" : "2024-04-17T08:29:38Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2060698390",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/maflcko/events{/privacy}",
         "followers_url" : "https://api.github.com/users/maflcko/followers",
         "following_url" : "https://api.github.com/users/maflcko/following{/other_user}",
         "gists_url" : "https://api.github.com/users/maflcko/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/maflcko",
         "id" : 6399679,
         "login" : "maflcko",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/maflcko/orgs",
         "received_events_url" : "https://api.github.com/users/maflcko/received_events",
         "repos_url" : "https://api.github.com/users/maflcko/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/maflcko/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/maflcko/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/maflcko"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> If anything, I'd hope it's less easy to backdoor, because it's just the source code, and not all the bootstrapped garbage we don't need. This is using the tag from the official upstream source control.\r\n\r\nOh, I see. So the motivation is to drop, possibly non-determinisically created, \"bootstrapped garbage\"? Concept +1 on this.\r\n\r\nI am just not sure on dropping `$compression_tool`. I presume guix internally requires it to bootstrap to a point where Bitcoin Core can be compiled, as many guix sources are compressed tarballs. So effectively `$compression_tool` will still be compiled and exist in guix, just not be present during the compilation of Bitcoin Core.",
      "created_at" : "2024-04-17T08:34:24Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29895#issuecomment-2060707521",
      "id" : 2060707521,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/29895",
      "node_id" : "IC_kwDOABII58560-bB",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2060707521/reactions"
      },
      "updated_at" : "2024-04-17T08:34:24Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2060707521",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/maflcko/events{/privacy}",
         "followers_url" : "https://api.github.com/users/maflcko/followers",
         "following_url" : "https://api.github.com/users/maflcko/following{/other_user}",
         "gists_url" : "https://api.github.com/users/maflcko/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/maflcko",
         "id" : 6399679,
         "login" : "maflcko",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/maflcko/orgs",
         "received_events_url" : "https://api.github.com/users/maflcko/received_events",
         "repos_url" : "https://api.github.com/users/maflcko/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/maflcko/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/maflcko/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/maflcko"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Something a bit more concrete. We could consolidate all packages in depends to .tar.gz (which is also what we use for releases), and drop `bzip2` and eventually `xz`.\r\n\r\n> Oh, I see. So the motivation is to drop, possibly non-determinisically created, \"bootstrapped garbage\"? Concept +1 on this.\r\n\r\nWe could also start doing this now, but it may be somewhat cleaner to do when packages are using CMake, so if reviewers want we could look at switching any of the open CMake depends PRs to downloading unbootstrapped tarballs.",
      "created_at" : "2024-04-18T10:19:08Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29895#issuecomment-2063525458",
      "id" : 2063525458,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/29895",
      "node_id" : "IC_kwDOABII5856_uZS",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2063525458/reactions"
      },
      "updated_at" : "2024-04-18T10:19:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2063525458",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/863730?v=4",
         "events_url" : "https://api.github.com/users/fanquake/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fanquake/followers",
         "following_url" : "https://api.github.com/users/fanquake/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fanquake/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fanquake",
         "id" : 863730,
         "login" : "fanquake",
         "node_id" : "MDQ6VXNlcjg2MzczMA==",
         "organizations_url" : "https://api.github.com/users/fanquake/orgs",
         "received_events_url" : "https://api.github.com/users/fanquake/received_events",
         "repos_url" : "https://api.github.com/users/fanquake/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fanquake/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fanquake"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Concept ACK on consolidating archive formats.",
      "created_at" : "2024-04-18T10:32:39Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29895#issuecomment-2063547954",
      "id" : 2063547954,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/29895",
      "node_id" : "IC_kwDOABII5856_z4y",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2063547954/reactions"
      },
      "updated_at" : "2024-04-18T10:32:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2063547954",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/32963518?v=4",
         "events_url" : "https://api.github.com/users/hebasto/events{/privacy}",
         "followers_url" : "https://api.github.com/users/hebasto/followers",
         "following_url" : "https://api.github.com/users/hebasto/following{/other_user}",
         "gists_url" : "https://api.github.com/users/hebasto/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/hebasto",
         "id" : 32963518,
         "login" : "hebasto",
         "node_id" : "MDQ6VXNlcjMyOTYzNTE4",
         "organizations_url" : "https://api.github.com/users/hebasto/orgs",
         "received_events_url" : "https://api.github.com/users/hebasto/received_events",
         "repos_url" : "https://api.github.com/users/hebasto/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/hebasto/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/hebasto"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> Something a bit more concrete. We could consolidate all packages in depends to .tar.gz (which is also what we use for releases), and drop `bzip2` and eventually `xz`.\r\n\r\nAgain, I don't understand what the goal is. I doubt that removing xz as a dependency is doable. For example, gcc seems to be fetched as a xz archive (https://git.savannah.gnu.org/cgit/guix.git/tree/gnu/packages/gcc.scm#n803)? Even if it wasn't, I am sure there are other guix packages that depend on xz.\r\n\r\n",
      "created_at" : "2024-04-18T10:36:13Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29895#issuecomment-2063554137",
      "id" : 2063554137,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/29895",
      "node_id" : "IC_kwDOABII5856_1ZZ",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2063554137/reactions"
      },
      "updated_at" : "2024-04-18T10:36:13Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2063554137",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/maflcko/events{/privacy}",
         "followers_url" : "https://api.github.com/users/maflcko/followers",
         "following_url" : "https://api.github.com/users/maflcko/following{/other_user}",
         "gists_url" : "https://api.github.com/users/maflcko/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/maflcko",
         "id" : 6399679,
         "login" : "maflcko",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/maflcko/orgs",
         "received_events_url" : "https://api.github.com/users/maflcko/received_events",
         "repos_url" : "https://api.github.com/users/maflcko/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/maflcko/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/maflcko/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/maflcko"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> Again, I don't understand what the goal is.\r\n\r\nThe goal is to remove things we don't use. If we don't need bzip2, then I don't see a reason to keep it in our build release environment. Same reasoning for any other dep. Also, just because some thing may be used somewhere in the Guix bootstrap chain, isn't a reason to explicitly include it in our release env unnecessarily.",
      "created_at" : "2024-04-18T10:39:45Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29895#issuecomment-2063559858",
      "id" : 2063559858,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/29895",
      "node_id" : "IC_kwDOABII5856_2yy",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2063559858/reactions"
      },
      "updated_at" : "2024-04-18T10:39:45Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2063559858",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/863730?v=4",
         "events_url" : "https://api.github.com/users/fanquake/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fanquake/followers",
         "following_url" : "https://api.github.com/users/fanquake/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fanquake/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fanquake",
         "id" : 863730,
         "login" : "fanquake",
         "node_id" : "MDQ6VXNlcjg2MzczMA==",
         "organizations_url" : "https://api.github.com/users/fanquake/orgs",
         "received_events_url" : "https://api.github.com/users/fanquake/received_events",
         "repos_url" : "https://api.github.com/users/fanquake/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fanquake/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fanquake"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> Something a bit more concrete. We could consolidate all packages in depends to .tar.gz (which is also what we use for releases), and drop `bzip2` and eventually `xz`.\r\n\r\nConcept ACK. From your commits I gather that most stuff we use, provides `.tar.gz` at the same location we got the source from before.\r\n\r\nOnly QT and libxkbcommon require fetching code from Github. If they ever move away from Github to a platform that doesn't automatically generate `.tar.gz` files (Gitlab does), we could either revert or use `git clone` instead.\r\n\r\n> An alternative might be to completely skip the step of tarballs and instead use the upstream source control directly?\r\n\r\nThis could make sense, but the fact that this source is almost always Github makes me a bit uneasy. OTOH that's why we have `$(package)_sha256_hash` and `FALLBACK_DOWNLOAD_PATH`. Anyway, for now this PR mostly maintains the download pages we used before.\r\n\r\n> So the motivation is to drop, possibly non-determinisically created, \"bootstrapped garbage\"? \r\n\r\nAlso concept ACK.",
      "created_at" : "2024-04-19T09:34:52Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29895#issuecomment-2066199026",
      "id" : 2066199026,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/29895",
      "node_id" : "IC_kwDOABII5857J7Hy",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2066199026/reactions"
      },
      "updated_at" : "2024-04-19T09:34:52Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2066199026",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "I think we as a community have proven to be resilient. However the time has\r\ncome to fix some things that we do. Such as using Bitcoin as a way to work\r\nagainst one another. Don't destroy what was built over jealousy or anger.\r\nStop trying to manipulate the system for your own gains. Just a word of\r\nadvice\r\n\r\nOn Fri, Apr 19, 2024, 4:35 AM Sjors Provoost ***@***.***>\r\nwrote:\r\n\r\n> Something a bit more concrete. We could consolidate all packages in\r\n> depends to .tar.gz (which is also what we use for releases), and drop\r\n> bzip2 and eventually xz.\r\n>\r\n> Concept ACK. From your commits I gather that most stuff we use, provides\r\n> .tar.gz at the same location we got the source from before.\r\n>\r\n> Only QT and libxkbcommon require fetching code from Github. If they ever\r\n> move away from Github to a platform that doesn't automatically generate\r\n> .tar.gz files (Gitlab does), we could either revert or use git clone\r\n> instead.\r\n>\r\n> An alternative might be to completely skip the step of tarballs and\r\n> instead use the upstream source control directly?\r\n>\r\n> This could make sense, but the fact that this source is almost always\r\n> Github makes me a bit uneasy. OTOH that's why we have\r\n> $(package)_sha256_hash and FALLBACK_DOWNLOAD_PATH. Anyway, for now this\r\n> PR mostly maintains the download pages we used before.\r\n>\r\n> So the motivation is to drop, possibly non-determinisically created,\r\n> \"bootstrapped garbage\"?\r\n>\r\n> Also concept ACK.\r\n>\r\n> â\r\n> Reply to this email directly, view it on GitHub\r\n> <https://github.com/bitcoin/bitcoin/pull/29895#issuecomment-2066199026>,\r\n> or unsubscribe\r\n> <https://github.com/notifications/unsubscribe-auth/AORL3634W5I5MXPXNRDZ24LY6DQNXAVCNFSM6AAAAABGJYWXHSVHI2DSMVQWIX3LMV43OSLTON2WKQ3PNVWWK3TUHMZDANRWGE4TSMBSGY>\r\n> .\r\n> You are receiving this because you are subscribed to this thread.Message\r\n> ID: ***@***.***>\r\n>\r\n",
      "created_at" : "2024-04-19T09:43:44Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29895#issuecomment-2066213899",
      "id" : 2066213899,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/29895",
      "node_id" : "IC_kwDOABII5857J-wL",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2066213899/reactions"
      },
      "updated_at" : "2024-04-19T09:43:44Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2066213899",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/60997115?v=4",
         "events_url" : "https://api.github.com/users/Satoshin-Btc/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Satoshin-Btc/followers",
         "following_url" : "https://api.github.com/users/Satoshin-Btc/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Satoshin-Btc/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Satoshin-Btc",
         "id" : 60997115,
         "login" : "Satoshin-Btc",
         "node_id" : "MDQ6VXNlcjYwOTk3MTE1",
         "organizations_url" : "https://api.github.com/users/Satoshin-Btc/orgs",
         "received_events_url" : "https://api.github.com/users/Satoshin-Btc/received_events",
         "repos_url" : "https://api.github.com/users/Satoshin-Btc/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Satoshin-Btc/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Satoshin-Btc/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Satoshin-Btc"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "The current set of the changes look fine. However, to actually review all 10 changed packages, it would be nice to have a script that prints whether the tarball has any differences from the upstream source control it claims to come from.",
      "created_at" : "2024-04-19T14:54:20Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29895#issuecomment-2066751093",
      "id" : 2066751093,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/29895",
      "node_id" : "IC_kwDOABII5857MB51",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2066751093/reactions"
      },
      "updated_at" : "2024-04-19T14:54:20Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2066751093",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/maflcko/events{/privacy}",
         "followers_url" : "https://api.github.com/users/maflcko/followers",
         "following_url" : "https://api.github.com/users/maflcko/following{/other_user}",
         "gists_url" : "https://api.github.com/users/maflcko/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/maflcko",
         "id" : 6399679,
         "login" : "maflcko",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/maflcko/orgs",
         "received_events_url" : "https://api.github.com/users/maflcko/received_events",
         "repos_url" : "https://api.github.com/users/maflcko/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/maflcko/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/maflcko/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/maflcko"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Changed to drop the xz changes, and just switch tar.bzip2 tarballs to using tar.gz (same as release tarballs), so we can drop bzip2 as a Guix dep.\r\n\r\n>  it would be nice to have a script that prints whether the tarball has any differences from the upstream source control it claims to come from.\r\n\r\nSure, we can have a script. Note that the current tarballs will already differ in that sense.",
      "created_at" : "2024-04-19T15:16:49Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29895#issuecomment-2066790159",
      "id" : 2066790159,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/29895",
      "node_id" : "IC_kwDOABII5857MLcP",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2066790159/reactions"
      },
      "updated_at" : "2024-04-19T15:16:49Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2066790159",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/863730?v=4",
         "events_url" : "https://api.github.com/users/fanquake/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fanquake/followers",
         "following_url" : "https://api.github.com/users/fanquake/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fanquake/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fanquake",
         "id" : 863730,
         "login" : "fanquake",
         "node_id" : "MDQ6VXNlcjg2MzczMA==",
         "organizations_url" : "https://api.github.com/users/fanquake/orgs",
         "received_events_url" : "https://api.github.com/users/fanquake/received_events",
         "repos_url" : "https://api.github.com/users/fanquake/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fanquake/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fanquake"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> The current set of the changes look fine. However, to actually review all 10 changed packages, it would be nice to have a script that prints whether the tarball has any differences from the upstream source control it claims to come from.\r\n\r\ni expect the `gz` and `bz2` are the same `tar` data just compressed with a different compressor. Going to check, though.\r\n\r\nThis, along with seeing if the guix binary output is the same (apart from version markers) before and after this PR. ",
      "created_at" : "2024-04-26T08:42:49Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29895#issuecomment-2078921911",
      "id" : 2078921911,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/29895",
      "node_id" : "IC_kwDOABII58576dS3",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2078921911/reactions"
      },
      "updated_at" : "2024-04-26T08:43:00Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2078921911",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Always some surprises...\r\n```python\r\n#!/usr/bin/env python3\r\nfrom os import path\r\nimport os\r\nfrom subprocess import run\r\nimport bz2\r\nimport gzip\r\n\r\nGIT='git'\r\nTMPDIR='tmp_checkout'\r\nBRANCH='remove_xz_guix'\r\nBASE_COMMIT='c05c214f2e9cfd6070a3c7680bfa09358fd9d97a'\r\n\r\ndef compare_streams(f, g, bsize=1024*1024):\r\n    while True:\r\n        b1 = f.read(bsize)\r\n        b2 = g.read(bsize)\r\n        if b1 != b2:\r\n            return False\r\n        if len(b1) == 0 and len(b2) == 0: # Both at EOF\r\n            break\r\n    return True\r\n\r\nrun([GIT, 'clone', '--depth', '20', '--single-branch', '-b', branch, 'https://github.com/fanquake/bitcoin.git', TMPDIR], check=True)\r\n\r\nos.chdir(path.join(TMPDIR, 'depends'))\r\n\r\n# download and checksum packages from PR\r\nrun([GIT, 'checkout', BRANCH], check=True)\r\nrun(['make', 'download'], check=True)\r\n\r\n# download and checksum packages from base commit\r\nrun([GIT, 'checkout', BASE_COMMIT], check=True)\r\nrun(['make', 'download'], check=True)\r\n\r\n# check compressed data\r\nSOURCES=[\r\n    'boost_1_81_0.tar',\r\n    'qrencode-4.1.1.tar',\r\n    'libXau-1.0.9.tar',\r\n    'xproto-7.0.31.tar',\r\n    'fontconfig-2.12.6.tar',\r\n    'xcb-util-0.4.0.tar',\r\n    'xcb-util-renderutil-0.3.9.tar',\r\n    'xcb-util-keysyms-0.4.0.tar',\r\n    'xcb-util-image-0.4.0.tar',\r\n    'xcb-util-wm-0.4.1.tar'\r\n]\r\nfail = False\r\nfor source in SOURCES:\r\n    print(f'Checking {source}')\r\n    with bz2.open(path.join('sources', source) + '.bz2', 'rb') as f, \\\r\n         gzip.open(path.join('sources', source) + '.gz', 'rb') as g:\r\n        if not compare_streams(f, g):\r\n            print(f'Mismatch for {source}')\r\n            fail = True\r\n\r\nif not fail:\r\n    print('Passed checks')\r\nelse:\r\n    print('There were failures')\r\n```\r\nOutput:\r\n```\r\nChecking boost_1_81_0.tar\r\nChecking qrencode-4.1.1.tar\r\nMismatch for qrencode-4.1.1.tar\r\nChecking libXau-1.0.9.tar\r\nChecking xproto-7.0.31.tar\r\nChecking fontconfig-2.12.6.tar\r\nChecking xcb-util-0.4.0.tar\r\nChecking xcb-util-renderutil-0.3.9.tar\r\nChecking xcb-util-keysyms-0.4.0.tar\r\nChecking xcb-util-image-0.4.0.tar\r\nChecking xcb-util-wm-0.4.1.tar\r\nThere were failures\r\n```\r\nWill check the qrencode one...",
      "created_at" : "2024-04-26T09:49:36Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29895#issuecomment-2079034463",
      "id" : 2079034463,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/29895",
      "node_id" : "IC_kwDOABII585764xf",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2079034463/reactions"
      },
      "updated_at" : "2024-04-26T09:49:36Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2079034463",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   }
]
